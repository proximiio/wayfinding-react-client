function FV(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var $V={exports:{}},SE={},zV={exports:{}},Jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_=Symbol.for("react.element"),Nte=Symbol.for("react.portal"),Fte=Symbol.for("react.fragment"),$te=Symbol.for("react.strict_mode"),zte=Symbol.for("react.profiler"),Bte=Symbol.for("react.provider"),jte=Symbol.for("react.context"),Ute=Symbol.for("react.forward_ref"),Vte=Symbol.for("react.suspense"),Gte=Symbol.for("react.memo"),qte=Symbol.for("react.lazy"),m4=Symbol.iterator;function Wte(e){return e===null||typeof e!="object"?null:(e=m4&&e[m4]||e["@@iterator"],typeof e=="function"?e:null)}var BV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jV=Object.assign,UV={};function Hg(e,t,r){this.props=e,this.context=t,this.refs=UV,this.updater=r||BV}Hg.prototype.isReactComponent={};Hg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function VV(){}VV.prototype=Hg.prototype;function jL(e,t,r){this.props=e,this.context=t,this.refs=UV,this.updater=r||BV}var UL=jL.prototype=new VV;UL.constructor=jL;jV(UL,Hg.prototype);UL.isPureReactComponent=!0;var g4=Array.isArray,GV=Object.prototype.hasOwnProperty,VL={current:null},qV={key:!0,ref:!0,__self:!0,__source:!0};function WV(e,t,r){var n,i={},o=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)GV.call(t,n)&&!qV.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var d=Array(a),f=0;f<a;f++)d[f]=arguments[f+2];i.children=d}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:f_,type:e,key:o,ref:s,props:i,_owner:VL.current}}function Xte(e,t){return{$$typeof:f_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function GL(e){return typeof e=="object"&&e!==null&&e.$$typeof===f_}function Yte(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var v4=/\/+/g;function EC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yte(""+e.key):t.toString(36)}function wx(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case f_:case Nte:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+EC(s,0):n,g4(i)?(r="",e!=null&&(r=e.replace(v4,"$&/")+"/"),wx(i,t,r,"",function(f){return f})):i!=null&&(GL(i)&&(i=Xte(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(v4,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",g4(e))for(var a=0;a<e.length;a++){o=e[a];var d=n+EC(o,a);s+=wx(o,t,r,d,i)}else if(d=Wte(e),typeof d=="function")for(e=d.call(e),a=0;!(o=e.next()).done;)o=o.value,d=n+EC(o,a++),s+=wx(o,t,r,d,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function lb(e,t,r){if(e==null)return e;var n=[],i=0;return wx(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Hte(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cu={current:null},Ex={transition:null},Zte={ReactCurrentDispatcher:Cu,ReactCurrentBatchConfig:Ex,ReactCurrentOwner:VL};Jn.Children={map:lb,forEach:function(e,t,r){lb(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return lb(e,function(){t++}),t},toArray:function(e){return lb(e,function(t){return t})||[]},only:function(e){if(!GL(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Jn.Component=Hg;Jn.Fragment=Fte;Jn.Profiler=zte;Jn.PureComponent=jL;Jn.StrictMode=$te;Jn.Suspense=Vte;Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zte;Jn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jV({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=VL.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(d in t)GV.call(t,d)&&!qV.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&a!==void 0?a[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){a=Array(d);for(var f=0;f<d;f++)a[f]=arguments[f+2];n.children=a}return{$$typeof:f_,type:e.type,key:i,ref:o,props:n,_owner:s}};Jn.createContext=function(e){return e={$$typeof:jte,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bte,_context:e},e.Consumer=e};Jn.createElement=WV;Jn.createFactory=function(e){var t=WV.bind(null,e);return t.type=e,t};Jn.createRef=function(){return{current:null}};Jn.forwardRef=function(e){return{$$typeof:Ute,render:e}};Jn.isValidElement=GL;Jn.lazy=function(e){return{$$typeof:qte,_payload:{_status:-1,_result:e},_init:Hte}};Jn.memo=function(e,t){return{$$typeof:Gte,type:e,compare:t===void 0?null:t}};Jn.startTransition=function(e){var t=Ex.transition;Ex.transition={};try{e()}finally{Ex.transition=t}};Jn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jn.useCallback=function(e,t){return Cu.current.useCallback(e,t)};Jn.useContext=function(e){return Cu.current.useContext(e)};Jn.useDebugValue=function(){};Jn.useDeferredValue=function(e){return Cu.current.useDeferredValue(e)};Jn.useEffect=function(e,t){return Cu.current.useEffect(e,t)};Jn.useId=function(){return Cu.current.useId()};Jn.useImperativeHandle=function(e,t,r){return Cu.current.useImperativeHandle(e,t,r)};Jn.useInsertionEffect=function(e,t){return Cu.current.useInsertionEffect(e,t)};Jn.useLayoutEffect=function(e,t){return Cu.current.useLayoutEffect(e,t)};Jn.useMemo=function(e,t){return Cu.current.useMemo(e,t)};Jn.useReducer=function(e,t,r){return Cu.current.useReducer(e,t,r)};Jn.useRef=function(e){return Cu.current.useRef(e)};Jn.useState=function(e){return Cu.current.useState(e)};Jn.useSyncExternalStore=function(e,t,r){return Cu.current.useSyncExternalStore(e,t,r)};Jn.useTransition=function(){return Cu.current.useTransition()};Jn.version="18.2.0";zV.exports=Jn;var ne=zV.exports;const Tr=bd(ne),XV=FV({__proto__:null,default:Tr},[ne]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kte=ne,Jte=Symbol.for("react.element"),Qte=Symbol.for("react.fragment"),ere=Object.prototype.hasOwnProperty,tre=Kte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rre={key:!0,ref:!0,__self:!0,__source:!0};function YV(e,t,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)ere.call(t,n)&&!rre.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Jte,type:e,key:o,ref:s,props:i,_owner:tre.current}}SE.Fragment=Qte;SE.jsx=YV;SE.jsxs=YV;$V.exports=SE;var Qe=$V.exports,iT={},HV={exports:{}},Ml={},ZV={exports:{}},KV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,re){var ie=K.length;K.push(re);e:for(;0<ie;){var he=ie-1>>>1,ae=K[he];if(0<i(ae,re))K[he]=re,K[ie]=ae,ie=he;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var re=K[0],ie=K.pop();if(ie!==re){K[0]=ie;e:for(var he=0,ae=K.length,Te=ae>>>1;he<Te;){var Le=2*(he+1)-1,Xe=K[Le],$e=Le+1,at=K[$e];if(0>i(Xe,ie))$e<ae&&0>i(at,Xe)?(K[he]=at,K[$e]=ie,he=$e):(K[he]=Xe,K[Le]=ie,he=Le);else if($e<ae&&0>i(at,ie))K[he]=at,K[$e]=ie,he=$e;else break e}}return re}function i(K,re){var ie=K.sortIndex-re.sortIndex;return ie!==0?ie:K.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var d=[],f=[],g=1,_=null,b=3,P=!1,L=!1,R=!1,$=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(K){for(var re=r(f);re!==null;){if(re.callback===null)n(f);else if(re.startTime<=K)n(f),re.sortIndex=re.expirationTime,t(d,re);else break;re=r(f)}}function N(K){if(R=!1,x(K),!L)if(r(d)!==null)L=!0,fe(B);else{var re=r(f);re!==null&&G(N,re.startTime-K)}}function B(K,re){L=!1,R&&(R=!1,F(Y),Y=-1),P=!0;var ie=b;try{for(x(re),_=r(d);_!==null&&(!(_.expirationTime>re)||K&&!me());){var he=_.callback;if(typeof he=="function"){_.callback=null,b=_.priorityLevel;var ae=he(_.expirationTime<=re);re=e.unstable_now(),typeof ae=="function"?_.callback=ae:_===r(d)&&n(d),x(re)}else n(d);_=r(d)}if(_!==null)var Te=!0;else{var Le=r(f);Le!==null&&G(N,Le.startTime-re),Te=!1}return Te}finally{_=null,b=ie,P=!1}}var H=!1,Z=null,Y=-1,W=5,Q=-1;function me(){return!(e.unstable_now()-Q<W)}function ge(){if(Z!==null){var K=e.unstable_now();Q=K;var re=!0;try{re=Z(!0,K)}finally{re?be():(H=!1,Z=null)}}else H=!1}var be;if(typeof T=="function")be=function(){T(ge)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ie=oe.port2;oe.port1.onmessage=ge,be=function(){Ie.postMessage(null)}}else be=function(){$(ge,0)};function fe(K){Z=K,H||(H=!0,be())}function G(K,re){Y=$(function(){K(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){L||P||(L=!0,fe(B))},e.unstable_forceFrameRate=function(K){0>K||125<K||(W=0<K?Math.floor(1e3/K):5)},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(K){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var ie=b;b=re;try{return K()}finally{b=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ie=b;b=K;try{return re()}finally{b=ie}},e.unstable_scheduleCallback=function(K,re,ie){var he=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,K){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ie+ae,K={id:g++,callback:re,priorityLevel:K,startTime:ie,expirationTime:ae,sortIndex:-1},ie>he?(K.sortIndex=ie,t(f,K),r(d)===null&&K===r(f)&&(R?(F(Y),Y=-1):R=!0,G(N,ie-he))):(K.sortIndex=ae,t(d,K),L||P||(L=!0,fe(B))),K},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(K){var re=b;return function(){var ie=b;b=re;try{return K.apply(this,arguments)}finally{b=ie}}}})(KV);ZV.exports=KV;var nre=ZV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JV=ne,Il=nre;function zt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QV=new Set,b0={};function Rp(e,t){Ag(e,t),Ag(e+"Capture",t)}function Ag(e,t){for(b0[e]=t,e=0;e<t.length;e++)QV.add(t[e])}var th=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oT=Object.prototype.hasOwnProperty,ire=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y4={},_4={};function ore(e){return oT.call(_4,e)?!0:oT.call(y4,e)?!1:ire.test(e)?_4[e]=!0:(y4[e]=!0,!1)}function are(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sre(e,t,r,n){if(t===null||typeof t>"u"||are(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Iu(e,t,r,n,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Ss={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ss[e]=new Iu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ss[t]=new Iu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ss[e]=new Iu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ss[e]=new Iu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ss[e]=new Iu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ss[e]=new Iu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ss[e]=new Iu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ss[e]=new Iu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ss[e]=new Iu(e,5,!1,e.toLowerCase(),null,!1,!1)});var qL=/[\-:]([a-z])/g;function WL(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qL,WL);Ss[t]=new Iu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qL,WL);Ss[t]=new Iu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qL,WL);Ss[t]=new Iu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ss[e]=new Iu(e,1,!1,e.toLowerCase(),null,!1,!1)});Ss.xlinkHref=new Iu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ss[e]=new Iu(e,1,!1,e.toLowerCase(),null,!0,!0)});function XL(e,t,r,n){var i=Ss.hasOwnProperty(t)?Ss[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sre(t,r,i,n)&&(r=null),n||i===null?ore(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var hh=JV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cb=Symbol.for("react.element"),Vm=Symbol.for("react.portal"),Gm=Symbol.for("react.fragment"),YL=Symbol.for("react.strict_mode"),aT=Symbol.for("react.profiler"),e9=Symbol.for("react.provider"),t9=Symbol.for("react.context"),HL=Symbol.for("react.forward_ref"),sT=Symbol.for("react.suspense"),uT=Symbol.for("react.suspense_list"),ZL=Symbol.for("react.memo"),zh=Symbol.for("react.lazy"),r9=Symbol.for("react.offscreen"),b4=Symbol.iterator;function Hv(e){return e===null||typeof e!="object"?null:(e=b4&&e[b4]||e["@@iterator"],typeof e=="function"?e:null)}var Bo=Object.assign,SC;function Cy(e){if(SC===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);SC=t&&t[1]||""}return`
`+SC+e}var PC=!1;function AC(e,t){if(!e||PC)return"";PC=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var n=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){n=f}e.call(t.prototype)}else{try{throw Error()}catch(f){n=f}e()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var d=`
`+i[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=a);break}}}finally{PC=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Cy(e):""}function ure(e){switch(e.tag){case 5:return Cy(e.type);case 16:return Cy("Lazy");case 13:return Cy("Suspense");case 19:return Cy("SuspenseList");case 0:case 2:case 15:return e=AC(e.type,!1),e;case 11:return e=AC(e.type.render,!1),e;case 1:return e=AC(e.type,!0),e;default:return""}}function lT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gm:return"Fragment";case Vm:return"Portal";case aT:return"Profiler";case YL:return"StrictMode";case sT:return"Suspense";case uT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case t9:return(e.displayName||"Context")+".Consumer";case e9:return(e._context.displayName||"Context")+".Provider";case HL:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ZL:return t=e.displayName||null,t!==null?t:lT(e.type)||"Memo";case zh:t=e._payload,e=e._init;try{return lT(e(t))}catch{}}return null}function lre(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lT(t);case 8:return t===YL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function n9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cre(e){var t=n9(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fb(e){e._valueTracker||(e._valueTracker=cre(e))}function i9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=n9(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Jx(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cT(e,t){var r=t.checked;return Bo({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function x4(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=sd(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function o9(e,t){t=t.checked,t!=null&&XL(e,"checked",t,!1)}function fT(e,t){o9(e,t);var r=sd(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hT(e,t.type,r):t.hasOwnProperty("defaultValue")&&hT(e,t.type,sd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function w4(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function hT(e,t,r){(t!=="number"||Jx(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Iy=Array.isArray;function dg(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+sd(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function dT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(zt(91));return Bo({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function E4(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(zt(92));if(Iy(r)){if(1<r.length)throw Error(zt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:sd(r)}}function a9(e,t){var r=sd(t.value),n=sd(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function S4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function s9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?s9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hb,u9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hb=hb||document.createElement("div"),hb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function x0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fre=["Webkit","ms","Moz","O"];Object.keys(Yy).forEach(function(e){fre.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yy[t]=Yy[e]})});function l9(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yy.hasOwnProperty(e)&&Yy[e]?(""+t).trim():t+"px"}function c9(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=l9(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var hre=Bo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mT(e,t){if(t){if(hre[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(zt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(zt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(zt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(zt(62))}}function gT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vT=null;function KL(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yT=null,pg=null,mg=null;function P4(e){if(e=p_(e)){if(typeof yT!="function")throw Error(zt(280));var t=e.stateNode;t&&(t=OE(t),yT(e.stateNode,e.type,t))}}function f9(e){pg?mg?mg.push(e):mg=[e]:pg=e}function h9(){if(pg){var e=pg,t=mg;if(mg=pg=null,P4(e),t)for(e=0;e<t.length;e++)P4(t[e])}}function d9(e,t){return e(t)}function p9(){}var CC=!1;function m9(e,t,r){if(CC)return e(t,r);CC=!0;try{return d9(e,t,r)}finally{CC=!1,(pg!==null||mg!==null)&&(p9(),h9())}}function w0(e,t){var r=e.stateNode;if(r===null)return null;var n=OE(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(zt(231,t,typeof r));return r}var _T=!1;if(th)try{var Zv={};Object.defineProperty(Zv,"passive",{get:function(){_T=!0}}),window.addEventListener("test",Zv,Zv),window.removeEventListener("test",Zv,Zv)}catch{_T=!1}function dre(e,t,r,n,i,o,s,a,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(g){this.onError(g)}}var Hy=!1,Qx=null,ew=!1,bT=null,pre={onError:function(e){Hy=!0,Qx=e}};function mre(e,t,r,n,i,o,s,a,d){Hy=!1,Qx=null,dre.apply(pre,arguments)}function gre(e,t,r,n,i,o,s,a,d){if(mre.apply(this,arguments),Hy){if(Hy){var f=Qx;Hy=!1,Qx=null}else throw Error(zt(198));ew||(ew=!0,bT=f)}}function kp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function g9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function A4(e){if(kp(e)!==e)throw Error(zt(188))}function vre(e){var t=e.alternate;if(!t){if(t=kp(e),t===null)throw Error(zt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return A4(i),e;if(o===n)return A4(i),t;o=o.sibling}throw Error(zt(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(zt(189))}}if(r.alternate!==n)throw Error(zt(190))}if(r.tag!==3)throw Error(zt(188));return r.stateNode.current===r?e:t}function v9(e){return e=vre(e),e!==null?y9(e):null}function y9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=y9(e);if(t!==null)return t;e=e.sibling}return null}var _9=Il.unstable_scheduleCallback,C4=Il.unstable_cancelCallback,yre=Il.unstable_shouldYield,_re=Il.unstable_requestPaint,fa=Il.unstable_now,bre=Il.unstable_getCurrentPriorityLevel,JL=Il.unstable_ImmediatePriority,b9=Il.unstable_UserBlockingPriority,tw=Il.unstable_NormalPriority,xre=Il.unstable_LowPriority,x9=Il.unstable_IdlePriority,PE=null,cf=null;function wre(e){if(cf&&typeof cf.onCommitFiberRoot=="function")try{cf.onCommitFiberRoot(PE,e,void 0,(e.current.flags&128)===128)}catch{}}var Ec=Math.clz32?Math.clz32:Pre,Ere=Math.log,Sre=Math.LN2;function Pre(e){return e>>>=0,e===0?32:31-(Ere(e)/Sre|0)|0}var db=64,pb=4194304;function Oy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rw(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=Oy(a):(o&=s,o!==0&&(n=Oy(o)))}else s=r&~i,s!==0?n=Oy(s):o!==0&&(n=Oy(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ec(t),i=1<<r,n|=e[r],t&=~i;return n}function Are(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cre(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Ec(o),a=1<<s,d=i[s];d===-1?(!(a&r)||a&n)&&(i[s]=Are(a,t)):d<=t&&(e.expiredLanes|=a),o&=~a}}function xT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function w9(){var e=db;return db<<=1,!(db&4194240)&&(db=64),e}function IC(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function h_(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ec(t),e[t]=r}function Ire(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ec(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function QL(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ec(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Ri=0;function E9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var S9,eR,P9,A9,C9,wT=!1,mb=[],Hh=null,Zh=null,Kh=null,E0=new Map,S0=new Map,Gh=[],Ore="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function I4(e,t){switch(e){case"focusin":case"focusout":Hh=null;break;case"dragenter":case"dragleave":Zh=null;break;case"mouseover":case"mouseout":Kh=null;break;case"pointerover":case"pointerout":E0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":S0.delete(t.pointerId)}}function Kv(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=p_(t),t!==null&&eR(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Tre(e,t,r,n,i){switch(t){case"focusin":return Hh=Kv(Hh,e,t,r,n,i),!0;case"dragenter":return Zh=Kv(Zh,e,t,r,n,i),!0;case"mouseover":return Kh=Kv(Kh,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return E0.set(o,Kv(E0.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,S0.set(o,Kv(S0.get(o)||null,e,t,r,n,i)),!0}return!1}function I9(e){var t=Jd(e.target);if(t!==null){var r=kp(t);if(r!==null){if(t=r.tag,t===13){if(t=g9(r),t!==null){e.blockedOn=t,C9(e.priority,function(){P9(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ET(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);vT=n,r.target.dispatchEvent(n),vT=null}else return t=p_(r),t!==null&&eR(t),e.blockedOn=r,!1;t.shift()}return!0}function O4(e,t,r){Sx(e)&&r.delete(t)}function Mre(){wT=!1,Hh!==null&&Sx(Hh)&&(Hh=null),Zh!==null&&Sx(Zh)&&(Zh=null),Kh!==null&&Sx(Kh)&&(Kh=null),E0.forEach(O4),S0.forEach(O4)}function Jv(e,t){e.blockedOn===t&&(e.blockedOn=null,wT||(wT=!0,Il.unstable_scheduleCallback(Il.unstable_NormalPriority,Mre)))}function P0(e){function t(i){return Jv(i,e)}if(0<mb.length){Jv(mb[0],e);for(var r=1;r<mb.length;r++){var n=mb[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Hh!==null&&Jv(Hh,e),Zh!==null&&Jv(Zh,e),Kh!==null&&Jv(Kh,e),E0.forEach(t),S0.forEach(t),r=0;r<Gh.length;r++)n=Gh[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gh.length&&(r=Gh[0],r.blockedOn===null);)I9(r),r.blockedOn===null&&Gh.shift()}var gg=hh.ReactCurrentBatchConfig,nw=!0;function Lre(e,t,r,n){var i=Ri,o=gg.transition;gg.transition=null;try{Ri=1,tR(e,t,r,n)}finally{Ri=i,gg.transition=o}}function Rre(e,t,r,n){var i=Ri,o=gg.transition;gg.transition=null;try{Ri=4,tR(e,t,r,n)}finally{Ri=i,gg.transition=o}}function tR(e,t,r,n){if(nw){var i=ET(e,t,r,n);if(i===null)$C(e,t,n,iw,r),I4(e,n);else if(Tre(i,e,t,r,n))n.stopPropagation();else if(I4(e,n),t&4&&-1<Ore.indexOf(e)){for(;i!==null;){var o=p_(i);if(o!==null&&S9(o),o=ET(e,t,r,n),o===null&&$C(e,t,n,iw,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else $C(e,t,n,null,r)}}var iw=null;function ET(e,t,r,n){if(iw=null,e=KL(n),e=Jd(e),e!==null)if(t=kp(e),t===null)e=null;else if(r=t.tag,r===13){if(e=g9(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return iw=e,null}function O9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bre()){case JL:return 1;case b9:return 4;case tw:case xre:return 16;case x9:return 536870912;default:return 16}default:return 16}}var Wh=null,rR=null,Px=null;function T9(){if(Px)return Px;var e,t=rR,r=t.length,n,i="value"in Wh?Wh.value:Wh.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[o-n];n++);return Px=i.slice(e,1<n?1-n:void 0)}function Ax(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gb(){return!0}function T4(){return!1}function Ll(e){function t(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gb:T4,this.isPropagationStopped=T4,this}return Bo(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=gb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=gb)},persist:function(){},isPersistent:gb}),t}var Zg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nR=Ll(Zg),d_=Bo({},Zg,{view:0,detail:0}),kre=Ll(d_),OC,TC,Qv,AE=Bo({},d_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iR,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qv&&(Qv&&e.type==="mousemove"?(OC=e.screenX-Qv.screenX,TC=e.screenY-Qv.screenY):TC=OC=0,Qv=e),OC)},movementY:function(e){return"movementY"in e?e.movementY:TC}}),M4=Ll(AE),Dre=Bo({},AE,{dataTransfer:0}),Nre=Ll(Dre),Fre=Bo({},d_,{relatedTarget:0}),MC=Ll(Fre),$re=Bo({},Zg,{animationName:0,elapsedTime:0,pseudoElement:0}),zre=Ll($re),Bre=Bo({},Zg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jre=Ll(Bre),Ure=Bo({},Zg,{data:0}),L4=Ll(Ure),Vre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wre(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qre[e])?!!t[e]:!1}function iR(){return Wre}var Xre=Bo({},d_,{key:function(e){if(e.key){var t=Vre[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ax(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gre[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iR,charCode:function(e){return e.type==="keypress"?Ax(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ax(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yre=Ll(Xre),Hre=Bo({},AE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R4=Ll(Hre),Zre=Bo({},d_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iR}),Kre=Ll(Zre),Jre=Bo({},Zg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qre=Ll(Jre),ene=Bo({},AE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tne=Ll(ene),rne=[9,13,27,32],oR=th&&"CompositionEvent"in window,Zy=null;th&&"documentMode"in document&&(Zy=document.documentMode);var nne=th&&"TextEvent"in window&&!Zy,M9=th&&(!oR||Zy&&8<Zy&&11>=Zy),k4=String.fromCharCode(32),D4=!1;function L9(e,t){switch(e){case"keyup":return rne.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qm=!1;function ine(e,t){switch(e){case"compositionend":return R9(t);case"keypress":return t.which!==32?null:(D4=!0,k4);case"textInput":return e=t.data,e===k4&&D4?null:e;default:return null}}function one(e,t){if(qm)return e==="compositionend"||!oR&&L9(e,t)?(e=T9(),Px=rR=Wh=null,qm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return M9&&t.locale!=="ko"?null:t.data;default:return null}}var ane={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ane[e.type]:t==="textarea"}function k9(e,t,r,n){f9(n),t=ow(t,"onChange"),0<t.length&&(r=new nR("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ky=null,A0=null;function sne(e){q9(e,0)}function CE(e){var t=Ym(e);if(i9(t))return e}function une(e,t){if(e==="change")return t}var D9=!1;if(th){var LC;if(th){var RC="oninput"in document;if(!RC){var F4=document.createElement("div");F4.setAttribute("oninput","return;"),RC=typeof F4.oninput=="function"}LC=RC}else LC=!1;D9=LC&&(!document.documentMode||9<document.documentMode)}function $4(){Ky&&(Ky.detachEvent("onpropertychange",N9),A0=Ky=null)}function N9(e){if(e.propertyName==="value"&&CE(A0)){var t=[];k9(t,A0,e,KL(e)),m9(sne,t)}}function lne(e,t,r){e==="focusin"?($4(),Ky=t,A0=r,Ky.attachEvent("onpropertychange",N9)):e==="focusout"&&$4()}function cne(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return CE(A0)}function fne(e,t){if(e==="click")return CE(t)}function hne(e,t){if(e==="input"||e==="change")return CE(t)}function dne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pc=typeof Object.is=="function"?Object.is:dne;function C0(e,t){if(Pc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!oT.call(t,i)||!Pc(e[i],t[i]))return!1}return!0}function z4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function B4(e,t){var r=z4(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=z4(r)}}function F9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?F9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $9(){for(var e=window,t=Jx();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Jx(e.document)}return t}function aR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pne(e){var t=$9(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&F9(r.ownerDocument.documentElement,r)){if(n!==null&&aR(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=B4(r,o);var s=B4(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mne=th&&"documentMode"in document&&11>=document.documentMode,Wm=null,ST=null,Jy=null,PT=!1;function j4(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;PT||Wm==null||Wm!==Jx(n)||(n=Wm,"selectionStart"in n&&aR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jy&&C0(Jy,n)||(Jy=n,n=ow(ST,"onSelect"),0<n.length&&(t=new nR("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Wm)))}function vb(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xm={animationend:vb("Animation","AnimationEnd"),animationiteration:vb("Animation","AnimationIteration"),animationstart:vb("Animation","AnimationStart"),transitionend:vb("Transition","TransitionEnd")},kC={},z9={};th&&(z9=document.createElement("div").style,"AnimationEvent"in window||(delete Xm.animationend.animation,delete Xm.animationiteration.animation,delete Xm.animationstart.animation),"TransitionEvent"in window||delete Xm.transitionend.transition);function IE(e){if(kC[e])return kC[e];if(!Xm[e])return e;var t=Xm[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in z9)return kC[e]=t[r];return e}var B9=IE("animationend"),j9=IE("animationiteration"),U9=IE("animationstart"),V9=IE("transitionend"),G9=new Map,U4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xd(e,t){G9.set(e,t),Rp(t,[e])}for(var DC=0;DC<U4.length;DC++){var NC=U4[DC],gne=NC.toLowerCase(),vne=NC[0].toUpperCase()+NC.slice(1);xd(gne,"on"+vne)}xd(B9,"onAnimationEnd");xd(j9,"onAnimationIteration");xd(U9,"onAnimationStart");xd("dblclick","onDoubleClick");xd("focusin","onFocus");xd("focusout","onBlur");xd(V9,"onTransitionEnd");Ag("onMouseEnter",["mouseout","mouseover"]);Ag("onMouseLeave",["mouseout","mouseover"]);Ag("onPointerEnter",["pointerout","pointerover"]);Ag("onPointerLeave",["pointerout","pointerover"]);Rp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ty="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yne=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ty));function V4(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,gre(n,t,void 0,e),e.currentTarget=null}function q9(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],d=a.instance,f=a.currentTarget;if(a=a.listener,d!==o&&i.isPropagationStopped())break e;V4(i,a,f),o=d}else for(s=0;s<n.length;s++){if(a=n[s],d=a.instance,f=a.currentTarget,a=a.listener,d!==o&&i.isPropagationStopped())break e;V4(i,a,f),o=d}}}if(ew)throw e=bT,ew=!1,bT=null,e}function ho(e,t){var r=t[TT];r===void 0&&(r=t[TT]=new Set);var n=e+"__bubble";r.has(n)||(W9(t,e,2,!1),r.add(n))}function FC(e,t,r){var n=0;t&&(n|=4),W9(r,e,n,t)}var yb="_reactListening"+Math.random().toString(36).slice(2);function I0(e){if(!e[yb]){e[yb]=!0,QV.forEach(function(r){r!=="selectionchange"&&(yne.has(r)||FC(r,!1,e),FC(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yb]||(t[yb]=!0,FC("selectionchange",!1,t))}}function W9(e,t,r,n){switch(O9(t)){case 1:var i=Lre;break;case 4:i=Rre;break;default:i=tR}r=i.bind(null,t,r,e),i=void 0,!_T||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function $C(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var d=s.tag;if((d===3||d===4)&&(d=s.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Jd(a),s===null)return;if(d=s.tag,d===5||d===6){n=o=s;continue e}a=a.parentNode}}n=n.return}m9(function(){var f=o,g=KL(r),_=[];e:{var b=G9.get(e);if(b!==void 0){var P=nR,L=e;switch(e){case"keypress":if(Ax(r)===0)break e;case"keydown":case"keyup":P=Yre;break;case"focusin":L="focus",P=MC;break;case"focusout":L="blur",P=MC;break;case"beforeblur":case"afterblur":P=MC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=M4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Nre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=Kre;break;case B9:case j9:case U9:P=zre;break;case V9:P=Qre;break;case"scroll":P=kre;break;case"wheel":P=tne;break;case"copy":case"cut":case"paste":P=jre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=R4}var R=(t&4)!==0,$=!R&&e==="scroll",F=R?b!==null?b+"Capture":null:b;R=[];for(var T=f,x;T!==null;){x=T;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,F!==null&&(N=w0(T,F),N!=null&&R.push(O0(T,N,x)))),$)break;T=T.return}0<R.length&&(b=new P(b,L,null,r,g),_.push({event:b,listeners:R}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",b&&r!==vT&&(L=r.relatedTarget||r.fromElement)&&(Jd(L)||L[rh]))break e;if((P||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,P?(L=r.relatedTarget||r.toElement,P=f,L=L?Jd(L):null,L!==null&&($=kp(L),L!==$||L.tag!==5&&L.tag!==6)&&(L=null)):(P=null,L=f),P!==L)){if(R=M4,N="onMouseLeave",F="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(R=R4,N="onPointerLeave",F="onPointerEnter",T="pointer"),$=P==null?b:Ym(P),x=L==null?b:Ym(L),b=new R(N,T+"leave",P,r,g),b.target=$,b.relatedTarget=x,N=null,Jd(g)===f&&(R=new R(F,T+"enter",L,r,g),R.target=x,R.relatedTarget=$,N=R),$=N,P&&L)t:{for(R=P,F=L,T=0,x=R;x;x=bm(x))T++;for(x=0,N=F;N;N=bm(N))x++;for(;0<T-x;)R=bm(R),T--;for(;0<x-T;)F=bm(F),x--;for(;T--;){if(R===F||F!==null&&R===F.alternate)break t;R=bm(R),F=bm(F)}R=null}else R=null;P!==null&&G4(_,b,P,R,!1),L!==null&&$!==null&&G4(_,$,L,R,!0)}}e:{if(b=f?Ym(f):window,P=b.nodeName&&b.nodeName.toLowerCase(),P==="select"||P==="input"&&b.type==="file")var B=une;else if(N4(b))if(D9)B=hne;else{B=cne;var H=lne}else(P=b.nodeName)&&P.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(B=fne);if(B&&(B=B(e,f))){k9(_,B,r,g);break e}H&&H(e,b,f),e==="focusout"&&(H=b._wrapperState)&&H.controlled&&b.type==="number"&&hT(b,"number",b.value)}switch(H=f?Ym(f):window,e){case"focusin":(N4(H)||H.contentEditable==="true")&&(Wm=H,ST=f,Jy=null);break;case"focusout":Jy=ST=Wm=null;break;case"mousedown":PT=!0;break;case"contextmenu":case"mouseup":case"dragend":PT=!1,j4(_,r,g);break;case"selectionchange":if(mne)break;case"keydown":case"keyup":j4(_,r,g)}var Z;if(oR)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else qm?L9(e,r)&&(Y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Y="onCompositionStart");Y&&(M9&&r.locale!=="ko"&&(qm||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&qm&&(Z=T9()):(Wh=g,rR="value"in Wh?Wh.value:Wh.textContent,qm=!0)),H=ow(f,Y),0<H.length&&(Y=new L4(Y,e,null,r,g),_.push({event:Y,listeners:H}),Z?Y.data=Z:(Z=R9(r),Z!==null&&(Y.data=Z)))),(Z=nne?ine(e,r):one(e,r))&&(f=ow(f,"onBeforeInput"),0<f.length&&(g=new L4("onBeforeInput","beforeinput",null,r,g),_.push({event:g,listeners:f}),g.data=Z))}q9(_,t)})}function O0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ow(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=w0(e,r),o!=null&&n.unshift(O0(e,o,i)),o=w0(e,t),o!=null&&n.push(O0(e,o,i))),e=e.return}return n}function bm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function G4(e,t,r,n,i){for(var o=t._reactName,s=[];r!==null&&r!==n;){var a=r,d=a.alternate,f=a.stateNode;if(d!==null&&d===n)break;a.tag===5&&f!==null&&(a=f,i?(d=w0(r,o),d!=null&&s.unshift(O0(r,d,a))):i||(d=w0(r,o),d!=null&&s.push(O0(r,d,a)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var _ne=/\r\n?/g,bne=/\u0000|\uFFFD/g;function q4(e){return(typeof e=="string"?e:""+e).replace(_ne,`
`).replace(bne,"")}function _b(e,t,r){if(t=q4(t),q4(e)!==t&&r)throw Error(zt(425))}function aw(){}var AT=null,CT=null;function IT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var OT=typeof setTimeout=="function"?setTimeout:void 0,xne=typeof clearTimeout=="function"?clearTimeout:void 0,W4=typeof Promise=="function"?Promise:void 0,wne=typeof queueMicrotask=="function"?queueMicrotask:typeof W4<"u"?function(e){return W4.resolve(null).then(e).catch(Ene)}:OT;function Ene(e){setTimeout(function(){throw e})}function zC(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),P0(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);P0(t)}function Jh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function X4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Kg=Math.random().toString(36).slice(2),rf="__reactFiber$"+Kg,T0="__reactProps$"+Kg,rh="__reactContainer$"+Kg,TT="__reactEvents$"+Kg,Sne="__reactListeners$"+Kg,Pne="__reactHandles$"+Kg;function Jd(e){var t=e[rf];if(t)return t;for(var r=e.parentNode;r;){if(t=r[rh]||r[rf]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=X4(e);e!==null;){if(r=e[rf])return r;e=X4(e)}return t}e=r,r=e.parentNode}return null}function p_(e){return e=e[rf]||e[rh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ym(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(zt(33))}function OE(e){return e[T0]||null}var MT=[],Hm=-1;function wd(e){return{current:e}}function mo(e){0>Hm||(e.current=MT[Hm],MT[Hm]=null,Hm--)}function to(e,t){Hm++,MT[Hm]=e.current,e.current=t}var ud={},ru=wd(ud),Gu=wd(!1),fp=ud;function Cg(e,t){var r=e.type.contextTypes;if(!r)return ud;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function qu(e){return e=e.childContextTypes,e!=null}function sw(){mo(Gu),mo(ru)}function Y4(e,t,r){if(ru.current!==ud)throw Error(zt(168));to(ru,t),to(Gu,r)}function X9(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(zt(108,lre(e)||"Unknown",i));return Bo({},r,n)}function uw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ud,fp=ru.current,to(ru,e),to(Gu,Gu.current),!0}function H4(e,t,r){var n=e.stateNode;if(!n)throw Error(zt(169));r?(e=X9(e,t,fp),n.__reactInternalMemoizedMergedChildContext=e,mo(Gu),mo(ru),to(ru,e)):mo(Gu),to(Gu,r)}var Gf=null,TE=!1,BC=!1;function Y9(e){Gf===null?Gf=[e]:Gf.push(e)}function Ane(e){TE=!0,Y9(e)}function Ed(){if(!BC&&Gf!==null){BC=!0;var e=0,t=Ri;try{var r=Gf;for(Ri=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Gf=null,TE=!1}catch(i){throw Gf!==null&&(Gf=Gf.slice(e+1)),_9(JL,Ed),i}finally{Ri=t,BC=!1}}return null}var Zm=[],Km=0,lw=null,cw=0,Hl=[],Zl=0,hp=null,Yf=1,Hf="";function Vd(e,t){Zm[Km++]=cw,Zm[Km++]=lw,lw=e,cw=t}function H9(e,t,r){Hl[Zl++]=Yf,Hl[Zl++]=Hf,Hl[Zl++]=hp,hp=e;var n=Yf;e=Hf;var i=32-Ec(n)-1;n&=~(1<<i),r+=1;var o=32-Ec(t)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Yf=1<<32-Ec(t)+i|r<<i|n,Hf=o+e}else Yf=1<<o|r<<i|n,Hf=e}function sR(e){e.return!==null&&(Vd(e,1),H9(e,1,0))}function uR(e){for(;e===lw;)lw=Zm[--Km],Zm[Km]=null,cw=Zm[--Km],Zm[Km]=null;for(;e===hp;)hp=Hl[--Zl],Hl[Zl]=null,Hf=Hl[--Zl],Hl[Zl]=null,Yf=Hl[--Zl],Hl[Zl]=null}var Al=null,Pl=null,Po=!1,bc=null;function Z9(e,t){var r=ec(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Z4(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Al=e,Pl=Jh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Al=e,Pl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hp!==null?{id:Yf,overflow:Hf}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ec(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Al=e,Pl=null,!0):!1;default:return!1}}function LT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function RT(e){if(Po){var t=Pl;if(t){var r=t;if(!Z4(e,t)){if(LT(e))throw Error(zt(418));t=Jh(r.nextSibling);var n=Al;t&&Z4(e,t)?Z9(n,r):(e.flags=e.flags&-4097|2,Po=!1,Al=e)}}else{if(LT(e))throw Error(zt(418));e.flags=e.flags&-4097|2,Po=!1,Al=e}}}function K4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Al=e}function bb(e){if(e!==Al)return!1;if(!Po)return K4(e),Po=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!IT(e.type,e.memoizedProps)),t&&(t=Pl)){if(LT(e))throw K9(),Error(zt(418));for(;t;)Z9(e,t),t=Jh(t.nextSibling)}if(K4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(zt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pl=Jh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pl=null}}else Pl=Al?Jh(e.stateNode.nextSibling):null;return!0}function K9(){for(var e=Pl;e;)e=Jh(e.nextSibling)}function Ig(){Pl=Al=null,Po=!1}function lR(e){bc===null?bc=[e]:bc.push(e)}var Cne=hh.ReactCurrentBatchConfig;function yc(e,t){if(e&&e.defaultProps){t=Bo({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var fw=wd(null),hw=null,Jm=null,cR=null;function fR(){cR=Jm=hw=null}function hR(e){var t=fw.current;mo(fw),e._currentValue=t}function kT(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vg(e,t){hw=e,cR=Jm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vu=!0),e.firstContext=null)}function nc(e){var t=e._currentValue;if(cR!==e)if(e={context:e,memoizedValue:t,next:null},Jm===null){if(hw===null)throw Error(zt(308));Jm=e,hw.dependencies={lanes:0,firstContext:e}}else Jm=Jm.next=e;return t}var Qd=null;function dR(e){Qd===null?Qd=[e]:Qd.push(e)}function J9(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,dR(t)):(r.next=i.next,i.next=r),t.interleaved=r,nh(e,n)}function nh(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Bh=!1;function pR(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q9(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kf(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qh(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,hi&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,nh(e,r)}return i=n.interleaved,i===null?(t.next=t,dR(n)):(t.next=i.next,i.next=t),n.interleaved=t,nh(e,r)}function Cx(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,QL(e,r)}}function J4(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function dw(e,t,r,n){var i=e.updateQueue;Bh=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var d=a,f=d.next;d.next=null,s===null?o=f:s.next=f,s=d;var g=e.alternate;g!==null&&(g=g.updateQueue,a=g.lastBaseUpdate,a!==s&&(a===null?g.firstBaseUpdate=f:a.next=f,g.lastBaseUpdate=d))}if(o!==null){var _=i.baseState;s=0,g=f=d=null,a=o;do{var b=a.lane,P=a.eventTime;if((n&b)===b){g!==null&&(g=g.next={eventTime:P,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var L=e,R=a;switch(b=t,P=r,R.tag){case 1:if(L=R.payload,typeof L=="function"){_=L.call(P,_,b);break e}_=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=R.payload,b=typeof L=="function"?L.call(P,_,b):L,b==null)break e;_=Bo({},_,b);break e;case 2:Bh=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,b=i.effects,b===null?i.effects=[a]:b.push(a))}else P={eventTime:P,lane:b,tag:a.tag,payload:a.payload,callback:a.callback,next:null},g===null?(f=g=P,d=_):g=g.next=P,s|=b;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;b=a,a=b.next,b.next=null,i.lastBaseUpdate=b,i.shared.pending=null}}while(1);if(g===null&&(d=_),i.baseState=d,i.firstBaseUpdate=f,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);pp|=s,e.lanes=s,e.memoizedState=_}}function Q4(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(zt(191,i));i.call(n)}}}var e7=new JV.Component().refs;function DT(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Bo({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ME={isMounted:function(e){return(e=e._reactInternals)?kp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Eu(),i=td(e),o=Kf(n,i);o.payload=t,r!=null&&(o.callback=r),t=Qh(e,o,i),t!==null&&(Sc(t,e,i,n),Cx(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Eu(),i=td(e),o=Kf(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Qh(e,o,i),t!==null&&(Sc(t,e,i,n),Cx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Eu(),n=td(e),i=Kf(r,n);i.tag=2,t!=null&&(i.callback=t),t=Qh(e,i,n),t!==null&&(Sc(t,e,n,r),Cx(t,e,n))}};function e5(e,t,r,n,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,s):t.prototype&&t.prototype.isPureReactComponent?!C0(r,n)||!C0(i,o):!0}function t7(e,t,r){var n=!1,i=ud,o=t.contextType;return typeof o=="object"&&o!==null?o=nc(o):(i=qu(t)?fp:ru.current,n=t.contextTypes,o=(n=n!=null)?Cg(e,i):ud),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ME,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function t5(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ME.enqueueReplaceState(t,t.state,null)}function NT(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=e7,pR(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=nc(o):(o=qu(t)?fp:ru.current,i.context=Cg(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(DT(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ME.enqueueReplaceState(i,i.state,null),dw(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ey(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(zt(309));var n=r.stateNode}if(!n)throw Error(zt(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;a===e7&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(zt(284));if(!r._owner)throw Error(zt(290,e))}return e}function xb(e,t){throw e=Object.prototype.toString.call(t),Error(zt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function r5(e){var t=e._init;return t(e._payload)}function r7(e){function t(F,T){if(e){var x=F.deletions;x===null?(F.deletions=[T],F.flags|=16):x.push(T)}}function r(F,T){if(!e)return null;for(;T!==null;)t(F,T),T=T.sibling;return null}function n(F,T){for(F=new Map;T!==null;)T.key!==null?F.set(T.key,T):F.set(T.index,T),T=T.sibling;return F}function i(F,T){return F=rd(F,T),F.index=0,F.sibling=null,F}function o(F,T,x){return F.index=x,e?(x=F.alternate,x!==null?(x=x.index,x<T?(F.flags|=2,T):x):(F.flags|=2,T)):(F.flags|=1048576,T)}function s(F){return e&&F.alternate===null&&(F.flags|=2),F}function a(F,T,x,N){return T===null||T.tag!==6?(T=XC(x,F.mode,N),T.return=F,T):(T=i(T,x),T.return=F,T)}function d(F,T,x,N){var B=x.type;return B===Gm?g(F,T,x.props.children,N,x.key):T!==null&&(T.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===zh&&r5(B)===T.type)?(N=i(T,x.props),N.ref=ey(F,T,x),N.return=F,N):(N=Rx(x.type,x.key,x.props,null,F.mode,N),N.ref=ey(F,T,x),N.return=F,N)}function f(F,T,x,N){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=YC(x,F.mode,N),T.return=F,T):(T=i(T,x.children||[]),T.return=F,T)}function g(F,T,x,N,B){return T===null||T.tag!==7?(T=ap(x,F.mode,N,B),T.return=F,T):(T=i(T,x),T.return=F,T)}function _(F,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=XC(""+T,F.mode,x),T.return=F,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case cb:return x=Rx(T.type,T.key,T.props,null,F.mode,x),x.ref=ey(F,null,T),x.return=F,x;case Vm:return T=YC(T,F.mode,x),T.return=F,T;case zh:var N=T._init;return _(F,N(T._payload),x)}if(Iy(T)||Hv(T))return T=ap(T,F.mode,x,null),T.return=F,T;xb(F,T)}return null}function b(F,T,x,N){var B=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return B!==null?null:a(F,T,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cb:return x.key===B?d(F,T,x,N):null;case Vm:return x.key===B?f(F,T,x,N):null;case zh:return B=x._init,b(F,T,B(x._payload),N)}if(Iy(x)||Hv(x))return B!==null?null:g(F,T,x,N,null);xb(F,x)}return null}function P(F,T,x,N,B){if(typeof N=="string"&&N!==""||typeof N=="number")return F=F.get(x)||null,a(T,F,""+N,B);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case cb:return F=F.get(N.key===null?x:N.key)||null,d(T,F,N,B);case Vm:return F=F.get(N.key===null?x:N.key)||null,f(T,F,N,B);case zh:var H=N._init;return P(F,T,x,H(N._payload),B)}if(Iy(N)||Hv(N))return F=F.get(x)||null,g(T,F,N,B,null);xb(T,N)}return null}function L(F,T,x,N){for(var B=null,H=null,Z=T,Y=T=0,W=null;Z!==null&&Y<x.length;Y++){Z.index>Y?(W=Z,Z=null):W=Z.sibling;var Q=b(F,Z,x[Y],N);if(Q===null){Z===null&&(Z=W);break}e&&Z&&Q.alternate===null&&t(F,Z),T=o(Q,T,Y),H===null?B=Q:H.sibling=Q,H=Q,Z=W}if(Y===x.length)return r(F,Z),Po&&Vd(F,Y),B;if(Z===null){for(;Y<x.length;Y++)Z=_(F,x[Y],N),Z!==null&&(T=o(Z,T,Y),H===null?B=Z:H.sibling=Z,H=Z);return Po&&Vd(F,Y),B}for(Z=n(F,Z);Y<x.length;Y++)W=P(Z,F,Y,x[Y],N),W!==null&&(e&&W.alternate!==null&&Z.delete(W.key===null?Y:W.key),T=o(W,T,Y),H===null?B=W:H.sibling=W,H=W);return e&&Z.forEach(function(me){return t(F,me)}),Po&&Vd(F,Y),B}function R(F,T,x,N){var B=Hv(x);if(typeof B!="function")throw Error(zt(150));if(x=B.call(x),x==null)throw Error(zt(151));for(var H=B=null,Z=T,Y=T=0,W=null,Q=x.next();Z!==null&&!Q.done;Y++,Q=x.next()){Z.index>Y?(W=Z,Z=null):W=Z.sibling;var me=b(F,Z,Q.value,N);if(me===null){Z===null&&(Z=W);break}e&&Z&&me.alternate===null&&t(F,Z),T=o(me,T,Y),H===null?B=me:H.sibling=me,H=me,Z=W}if(Q.done)return r(F,Z),Po&&Vd(F,Y),B;if(Z===null){for(;!Q.done;Y++,Q=x.next())Q=_(F,Q.value,N),Q!==null&&(T=o(Q,T,Y),H===null?B=Q:H.sibling=Q,H=Q);return Po&&Vd(F,Y),B}for(Z=n(F,Z);!Q.done;Y++,Q=x.next())Q=P(Z,F,Y,Q.value,N),Q!==null&&(e&&Q.alternate!==null&&Z.delete(Q.key===null?Y:Q.key),T=o(Q,T,Y),H===null?B=Q:H.sibling=Q,H=Q);return e&&Z.forEach(function(ge){return t(F,ge)}),Po&&Vd(F,Y),B}function $(F,T,x,N){if(typeof x=="object"&&x!==null&&x.type===Gm&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case cb:e:{for(var B=x.key,H=T;H!==null;){if(H.key===B){if(B=x.type,B===Gm){if(H.tag===7){r(F,H.sibling),T=i(H,x.props.children),T.return=F,F=T;break e}}else if(H.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===zh&&r5(B)===H.type){r(F,H.sibling),T=i(H,x.props),T.ref=ey(F,H,x),T.return=F,F=T;break e}r(F,H);break}else t(F,H);H=H.sibling}x.type===Gm?(T=ap(x.props.children,F.mode,N,x.key),T.return=F,F=T):(N=Rx(x.type,x.key,x.props,null,F.mode,N),N.ref=ey(F,T,x),N.return=F,F=N)}return s(F);case Vm:e:{for(H=x.key;T!==null;){if(T.key===H)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){r(F,T.sibling),T=i(T,x.children||[]),T.return=F,F=T;break e}else{r(F,T);break}else t(F,T);T=T.sibling}T=YC(x,F.mode,N),T.return=F,F=T}return s(F);case zh:return H=x._init,$(F,T,H(x._payload),N)}if(Iy(x))return L(F,T,x,N);if(Hv(x))return R(F,T,x,N);xb(F,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(r(F,T.sibling),T=i(T,x),T.return=F,F=T):(r(F,T),T=XC(x,F.mode,N),T.return=F,F=T),s(F)):r(F,T)}return $}var Og=r7(!0),n7=r7(!1),m_={},ff=wd(m_),M0=wd(m_),L0=wd(m_);function ep(e){if(e===m_)throw Error(zt(174));return e}function mR(e,t){switch(to(L0,t),to(M0,e),to(ff,m_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pT(t,e)}mo(ff),to(ff,t)}function Tg(){mo(ff),mo(M0),mo(L0)}function i7(e){ep(L0.current);var t=ep(ff.current),r=pT(t,e.type);t!==r&&(to(M0,e),to(ff,r))}function gR(e){M0.current===e&&(mo(ff),mo(M0))}var Do=wd(0);function pw(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jC=[];function vR(){for(var e=0;e<jC.length;e++)jC[e]._workInProgressVersionPrimary=null;jC.length=0}var Ix=hh.ReactCurrentDispatcher,UC=hh.ReactCurrentBatchConfig,dp=0,zo=null,Na=null,as=null,mw=!1,Qy=!1,R0=0,Ine=0;function qs(){throw Error(zt(321))}function yR(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Pc(e[r],t[r]))return!1;return!0}function _R(e,t,r,n,i,o){if(dp=o,zo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ix.current=e===null||e.memoizedState===null?Lne:Rne,e=r(n,i),Qy){o=0;do{if(Qy=!1,R0=0,25<=o)throw Error(zt(301));o+=1,as=Na=null,t.updateQueue=null,Ix.current=kne,e=r(n,i)}while(Qy)}if(Ix.current=gw,t=Na!==null&&Na.next!==null,dp=0,as=Na=zo=null,mw=!1,t)throw Error(zt(300));return e}function bR(){var e=R0!==0;return R0=0,e}function Qc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return as===null?zo.memoizedState=as=e:as=as.next=e,as}function ic(){if(Na===null){var e=zo.alternate;e=e!==null?e.memoizedState:null}else e=Na.next;var t=as===null?zo.memoizedState:as.next;if(t!==null)as=t,Na=e;else{if(e===null)throw Error(zt(310));Na=e,e={memoizedState:Na.memoizedState,baseState:Na.baseState,baseQueue:Na.baseQueue,queue:Na.queue,next:null},as===null?zo.memoizedState=as=e:as=as.next=e}return as}function k0(e,t){return typeof t=="function"?t(e):t}function VC(e){var t=ic(),r=t.queue;if(r===null)throw Error(zt(311));r.lastRenderedReducer=e;var n=Na,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,d=null,f=o;do{var g=f.lane;if((dp&g)===g)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:e(n,f.action);else{var _={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(a=d=_,s=n):d=d.next=_,zo.lanes|=g,pp|=g}f=f.next}while(f!==null&&f!==o);d===null?s=n:d.next=a,Pc(n,t.memoizedState)||(Vu=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,zo.lanes|=o,pp|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function GC(e){var t=ic(),r=t.queue;if(r===null)throw Error(zt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Pc(o,t.memoizedState)||(Vu=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function o7(){}function a7(e,t){var r=zo,n=ic(),i=t(),o=!Pc(n.memoizedState,i);if(o&&(n.memoizedState=i,Vu=!0),n=n.queue,xR(l7.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||as!==null&&as.memoizedState.tag&1){if(r.flags|=2048,D0(9,u7.bind(null,r,n,i,t),void 0,null),us===null)throw Error(zt(349));dp&30||s7(r,t,i)}return i}function s7(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zo.updateQueue,t===null?(t={lastEffect:null,stores:null},zo.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function u7(e,t,r,n){t.value=r,t.getSnapshot=n,c7(t)&&f7(e)}function l7(e,t,r){return r(function(){c7(t)&&f7(e)})}function c7(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Pc(e,r)}catch{return!0}}function f7(e){var t=nh(e,1);t!==null&&Sc(t,e,1,-1)}function n5(e){var t=Qc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:k0,lastRenderedState:e},t.queue=e,e=e.dispatch=Mne.bind(null,zo,e),[t.memoizedState,e]}function D0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zo.updateQueue,t===null?(t={lastEffect:null,stores:null},zo.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function h7(){return ic().memoizedState}function Ox(e,t,r,n){var i=Qc();zo.flags|=e,i.memoizedState=D0(1|t,r,void 0,n===void 0?null:n)}function LE(e,t,r,n){var i=ic();n=n===void 0?null:n;var o=void 0;if(Na!==null){var s=Na.memoizedState;if(o=s.destroy,n!==null&&yR(n,s.deps)){i.memoizedState=D0(t,r,o,n);return}}zo.flags|=e,i.memoizedState=D0(1|t,r,o,n)}function i5(e,t){return Ox(8390656,8,e,t)}function xR(e,t){return LE(2048,8,e,t)}function d7(e,t){return LE(4,2,e,t)}function p7(e,t){return LE(4,4,e,t)}function m7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function g7(e,t,r){return r=r!=null?r.concat([e]):null,LE(4,4,m7.bind(null,t,e),r)}function wR(){}function v7(e,t){var r=ic();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yR(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function y7(e,t){var r=ic();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yR(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _7(e,t,r){return dp&21?(Pc(r,t)||(r=w9(),zo.lanes|=r,pp|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vu=!0),e.memoizedState=r)}function One(e,t){var r=Ri;Ri=r!==0&&4>r?r:4,e(!0);var n=UC.transition;UC.transition={};try{e(!1),t()}finally{Ri=r,UC.transition=n}}function b7(){return ic().memoizedState}function Tne(e,t,r){var n=td(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},x7(e))w7(t,r);else if(r=J9(e,t,r,n),r!==null){var i=Eu();Sc(r,e,n,i),E7(r,t,n)}}function Mne(e,t,r){var n=td(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(x7(e))w7(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,Pc(a,s)){var d=t.interleaved;d===null?(i.next=i,dR(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=J9(e,t,i,n),r!==null&&(i=Eu(),Sc(r,e,n,i),E7(r,t,n))}}function x7(e){var t=e.alternate;return e===zo||t!==null&&t===zo}function w7(e,t){Qy=mw=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function E7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,QL(e,r)}}var gw={readContext:nc,useCallback:qs,useContext:qs,useEffect:qs,useImperativeHandle:qs,useInsertionEffect:qs,useLayoutEffect:qs,useMemo:qs,useReducer:qs,useRef:qs,useState:qs,useDebugValue:qs,useDeferredValue:qs,useTransition:qs,useMutableSource:qs,useSyncExternalStore:qs,useId:qs,unstable_isNewReconciler:!1},Lne={readContext:nc,useCallback:function(e,t){return Qc().memoizedState=[e,t===void 0?null:t],e},useContext:nc,useEffect:i5,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ox(4194308,4,m7.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ox(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ox(4,2,e,t)},useMemo:function(e,t){var r=Qc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Qc();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Tne.bind(null,zo,e),[n.memoizedState,e]},useRef:function(e){var t=Qc();return e={current:e},t.memoizedState=e},useState:n5,useDebugValue:wR,useDeferredValue:function(e){return Qc().memoizedState=e},useTransition:function(){var e=n5(!1),t=e[0];return e=One.bind(null,e[1]),Qc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zo,i=Qc();if(Po){if(r===void 0)throw Error(zt(407));r=r()}else{if(r=t(),us===null)throw Error(zt(349));dp&30||s7(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,i5(l7.bind(null,n,o,e),[e]),n.flags|=2048,D0(9,u7.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Qc(),t=us.identifierPrefix;if(Po){var r=Hf,n=Yf;r=(n&~(1<<32-Ec(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=R0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Ine++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rne={readContext:nc,useCallback:v7,useContext:nc,useEffect:xR,useImperativeHandle:g7,useInsertionEffect:d7,useLayoutEffect:p7,useMemo:y7,useReducer:VC,useRef:h7,useState:function(){return VC(k0)},useDebugValue:wR,useDeferredValue:function(e){var t=ic();return _7(t,Na.memoizedState,e)},useTransition:function(){var e=VC(k0)[0],t=ic().memoizedState;return[e,t]},useMutableSource:o7,useSyncExternalStore:a7,useId:b7,unstable_isNewReconciler:!1},kne={readContext:nc,useCallback:v7,useContext:nc,useEffect:xR,useImperativeHandle:g7,useInsertionEffect:d7,useLayoutEffect:p7,useMemo:y7,useReducer:GC,useRef:h7,useState:function(){return GC(k0)},useDebugValue:wR,useDeferredValue:function(e){var t=ic();return Na===null?t.memoizedState=e:_7(t,Na.memoizedState,e)},useTransition:function(){var e=GC(k0)[0],t=ic().memoizedState;return[e,t]},useMutableSource:o7,useSyncExternalStore:a7,useId:b7,unstable_isNewReconciler:!1};function Mg(e,t){try{var r="",n=t;do r+=ure(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function qC(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function FT(e,t){try{}catch(r){setTimeout(function(){throw r})}}var Dne=typeof WeakMap=="function"?WeakMap:Map;function S7(e,t,r){r=Kf(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){yw||(yw=!0,XT=n),FT(e,t)},r}function P7(e,t,r){r=Kf(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){FT(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){FT(e,t),typeof n!="function"&&(ed===null?ed=new Set([this]):ed.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function o5(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Dne;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Hne.bind(null,e,t,r),t.then(e,e))}function a5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function s5(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Kf(-1,1),t.tag=2,Qh(r,t,1))),r.lanes|=1),e)}var Nne=hh.ReactCurrentOwner,Vu=!1;function _u(e,t,r,n){t.child=e===null?n7(t,null,r,n):Og(t,e.child,r,n)}function u5(e,t,r,n,i){r=r.render;var o=t.ref;return vg(t,i),n=_R(e,t,r,n,o,i),r=bR(),e!==null&&!Vu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ih(e,t,i)):(Po&&r&&sR(t),t.flags|=1,_u(e,t,n,i),t.child)}function l5(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!TR(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,A7(e,t,o,n,i)):(e=Rx(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:C0,r(s,n)&&e.ref===t.ref)return ih(e,t,i)}return t.flags|=1,e=rd(o,n),e.ref=t.ref,e.return=t,t.child=e}function A7(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(C0(o,n)&&e.ref===t.ref)if(Vu=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Vu=!0);else return t.lanes=e.lanes,ih(e,t,i)}return $T(e,t,r,n,i)}function C7(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},to(eg,_l),_l|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,to(eg,_l),_l|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,to(eg,_l),_l|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,to(eg,_l),_l|=n;return _u(e,t,i,r),t.child}function I7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function $T(e,t,r,n,i){var o=qu(r)?fp:ru.current;return o=Cg(t,o),vg(t,i),r=_R(e,t,r,n,o,i),n=bR(),e!==null&&!Vu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ih(e,t,i)):(Po&&n&&sR(t),t.flags|=1,_u(e,t,r,i),t.child)}function c5(e,t,r,n,i){if(qu(r)){var o=!0;uw(t)}else o=!1;if(vg(t,i),t.stateNode===null)Tx(e,t),t7(t,r,n),NT(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var d=s.context,f=r.contextType;typeof f=="object"&&f!==null?f=nc(f):(f=qu(r)?fp:ru.current,f=Cg(t,f));var g=r.getDerivedStateFromProps,_=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function";_||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||d!==f)&&t5(t,s,n,f),Bh=!1;var b=t.memoizedState;s.state=b,dw(t,n,s,i),d=t.memoizedState,a!==n||b!==d||Gu.current||Bh?(typeof g=="function"&&(DT(t,r,g,n),d=t.memoizedState),(a=Bh||e5(t,r,a,n,b,d,f))?(_||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),s.props=n,s.state=d,s.context=f,n=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Q9(e,t),a=t.memoizedProps,f=t.type===t.elementType?a:yc(t.type,a),s.props=f,_=t.pendingProps,b=s.context,d=r.contextType,typeof d=="object"&&d!==null?d=nc(d):(d=qu(r)?fp:ru.current,d=Cg(t,d));var P=r.getDerivedStateFromProps;(g=typeof P=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==_||b!==d)&&t5(t,s,n,d),Bh=!1,b=t.memoizedState,s.state=b,dw(t,n,s,i);var L=t.memoizedState;a!==_||b!==L||Gu.current||Bh?(typeof P=="function"&&(DT(t,r,P,n),L=t.memoizedState),(f=Bh||e5(t,r,f,n,b,L,d)||!1)?(g||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,L,d),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,L,d)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=L),s.props=n,s.state=L,s.context=d,n=f):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),n=!1)}return zT(e,t,r,n,o,i)}function zT(e,t,r,n,i,o){I7(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&H4(t,r,!1),ih(e,t,o);n=t.stateNode,Nne.current=t;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Og(t,e.child,null,o),t.child=Og(t,null,a,o)):_u(e,t,a,o),t.memoizedState=n.state,i&&H4(t,r,!0),t.child}function O7(e){var t=e.stateNode;t.pendingContext?Y4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y4(e,t.context,!1),mR(e,t.containerInfo)}function f5(e,t,r,n,i){return Ig(),lR(i),t.flags|=256,_u(e,t,r,n),t.child}var BT={dehydrated:null,treeContext:null,retryLane:0};function jT(e){return{baseLanes:e,cachePool:null,transitions:null}}function T7(e,t,r){var n=t.pendingProps,i=Do.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),to(Do,i&1),e===null)return RT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,o?(n=t.mode,o=t.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=DE(s,n,0,null),e=ap(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jT(r),t.memoizedState=BT,e):ER(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Fne(e,t,s,n,a,i,r);if(o){o=n.fallback,s=t.mode,i=e.child,a=i.sibling;var d={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=rd(i,d),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=rd(a,o):(o=ap(o,s,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,s=e.child.memoizedState,s=s===null?jT(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~r,t.memoizedState=BT,n}return o=e.child,e=o.sibling,n=rd(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ER(e,t){return t=DE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wb(e,t,r,n){return n!==null&&lR(n),Og(t,e.child,null,r),e=ER(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fne(e,t,r,n,i,o,s){if(r)return t.flags&256?(t.flags&=-257,n=qC(Error(zt(422))),wb(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=DE({mode:"visible",children:n.children},i,0,null),o=ap(o,i,s,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Og(t,e.child,null,s),t.child.memoizedState=jT(s),t.memoizedState=BT,o);if(!(t.mode&1))return wb(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(zt(419)),n=qC(o,n,void 0),wb(e,t,s,n)}if(a=(s&e.childLanes)!==0,Vu||a){if(n=us,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,nh(e,i),Sc(n,e,i,-1))}return OR(),n=qC(Error(zt(421))),wb(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Zne.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Pl=Jh(i.nextSibling),Al=t,Po=!0,bc=null,e!==null&&(Hl[Zl++]=Yf,Hl[Zl++]=Hf,Hl[Zl++]=hp,Yf=e.id,Hf=e.overflow,hp=t),t=ER(t,n.children),t.flags|=4096,t)}function h5(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),kT(e.return,t,r)}function WC(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function M7(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(_u(e,t,n.children,r),n=Do.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&h5(e,r,t);else if(e.tag===19)h5(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(to(Do,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&pw(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),WC(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&pw(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}WC(t,!0,r,null,o);break;case"together":WC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ih(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pp|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(zt(153));if(t.child!==null){for(e=t.child,r=rd(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=rd(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function $ne(e,t,r){switch(t.tag){case 3:O7(t),Ig();break;case 5:i7(t);break;case 1:qu(t.type)&&uw(t);break;case 4:mR(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;to(fw,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(to(Do,Do.current&1),t.flags|=128,null):r&t.child.childLanes?T7(e,t,r):(to(Do,Do.current&1),e=ih(e,t,r),e!==null?e.sibling:null);to(Do,Do.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return M7(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),to(Do,Do.current),n)break;return null;case 22:case 23:return t.lanes=0,C7(e,t,r)}return ih(e,t,r)}var L7,UT,R7,k7;L7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};UT=function(){};R7=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ep(ff.current);var o=null;switch(r){case"input":i=cT(e,i),n=cT(e,n),o=[];break;case"select":i=Bo({},i,{value:void 0}),n=Bo({},n,{value:void 0}),o=[];break;case"textarea":i=dT(e,i),n=dT(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=aw)}mT(r,n);var s;r=null;for(f in i)if(!n.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(b0.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in n){var d=n[f];if(a=i!=null?i[f]:void 0,n.hasOwnProperty(f)&&d!==a&&(d!=null||a!=null))if(f==="style")if(a){for(s in a)!a.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in d)d.hasOwnProperty(s)&&a[s]!==d[s]&&(r||(r={}),r[s]=d[s])}else r||(o||(o=[]),o.push(f,r)),r=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,a=a?a.__html:void 0,d!=null&&a!==d&&(o=o||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(b0.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&ho("scroll",e),o||a===d||(o=[])):(o=o||[]).push(f,d))}r&&(o=o||[]).push("style",r);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};k7=function(e,t,r,n){r!==n&&(t.flags|=4)};function ty(e,t){if(!Po)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ws(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function zne(e,t,r){var n=t.pendingProps;switch(uR(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:return qu(t.type)&&sw(),Ws(t),null;case 3:return n=t.stateNode,Tg(),mo(Gu),mo(ru),vR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(bb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bc!==null&&(ZT(bc),bc=null))),UT(e,t),Ws(t),null;case 5:gR(t);var i=ep(L0.current);if(r=t.type,e!==null&&t.stateNode!=null)R7(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(zt(166));return Ws(t),null}if(e=ep(ff.current),bb(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[rf]=t,n[T0]=o,e=(t.mode&1)!==0,r){case"dialog":ho("cancel",n),ho("close",n);break;case"iframe":case"object":case"embed":ho("load",n);break;case"video":case"audio":for(i=0;i<Ty.length;i++)ho(Ty[i],n);break;case"source":ho("error",n);break;case"img":case"image":case"link":ho("error",n),ho("load",n);break;case"details":ho("toggle",n);break;case"input":x4(n,o),ho("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ho("invalid",n);break;case"textarea":E4(n,o),ho("invalid",n)}mT(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&_b(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&_b(n.textContent,a,e),i=["children",""+a]):b0.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ho("scroll",n)}switch(r){case"input":fb(n),w4(n,o,!0);break;case"textarea":fb(n),S4(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=aw)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=s9(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[rf]=t,e[T0]=n,L7(e,t,!1,!1),t.stateNode=e;e:{switch(s=gT(r,n),r){case"dialog":ho("cancel",e),ho("close",e),i=n;break;case"iframe":case"object":case"embed":ho("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ty.length;i++)ho(Ty[i],e);i=n;break;case"source":ho("error",e),i=n;break;case"img":case"image":case"link":ho("error",e),ho("load",e),i=n;break;case"details":ho("toggle",e),i=n;break;case"input":x4(e,n),i=cT(e,n),ho("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Bo({},n,{value:void 0}),ho("invalid",e);break;case"textarea":E4(e,n),i=dT(e,n),ho("invalid",e);break;default:i=n}mT(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var d=a[o];o==="style"?c9(e,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&u9(e,d)):o==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&x0(e,d):typeof d=="number"&&x0(e,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(b0.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ho("scroll",e):d!=null&&XL(e,o,d,s))}switch(r){case"input":fb(e),w4(e,n,!1);break;case"textarea":fb(e),S4(e);break;case"option":n.value!=null&&e.setAttribute("value",""+sd(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?dg(e,!!n.multiple,o,!1):n.defaultValue!=null&&dg(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=aw)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&t.stateNode!=null)k7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(zt(166));if(r=ep(L0.current),ep(ff.current),bb(t)){if(n=t.stateNode,r=t.memoizedProps,n[rf]=t,(o=n.nodeValue!==r)&&(e=Al,e!==null))switch(e.tag){case 3:_b(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_b(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rf]=t,t.stateNode=n}return Ws(t),null;case 13:if(mo(Do),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Po&&Pl!==null&&t.mode&1&&!(t.flags&128))K9(),Ig(),t.flags|=98560,o=!1;else if(o=bb(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(zt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(zt(317));o[rf]=t}else Ig(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else bc!==null&&(ZT(bc),bc=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Do.current&1?$a===0&&($a=3):OR())),t.updateQueue!==null&&(t.flags|=4),Ws(t),null);case 4:return Tg(),UT(e,t),e===null&&I0(t.stateNode.containerInfo),Ws(t),null;case 10:return hR(t.type._context),Ws(t),null;case 17:return qu(t.type)&&sw(),Ws(t),null;case 19:if(mo(Do),o=t.memoizedState,o===null)return Ws(t),null;if(n=(t.flags&128)!==0,s=o.rendering,s===null)if(n)ty(o,!1);else{if($a!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=pw(e),s!==null){for(t.flags|=128,ty(o,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return to(Do,Do.current&1|2),t.child}e=e.sibling}o.tail!==null&&fa()>Lg&&(t.flags|=128,n=!0,ty(o,!1),t.lanes=4194304)}else{if(!n)if(e=pw(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ty(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Po)return Ws(t),null}else 2*fa()-o.renderingStartTime>Lg&&r!==1073741824&&(t.flags|=128,n=!0,ty(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(r=o.last,r!==null?r.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=fa(),t.sibling=null,r=Do.current,to(Do,n?r&1|2:r&1),t):(Ws(t),null);case 22:case 23:return IR(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?_l&1073741824&&(Ws(t),t.subtreeFlags&6&&(t.flags|=8192)):Ws(t),null;case 24:return null;case 25:return null}throw Error(zt(156,t.tag))}function Bne(e,t){switch(uR(t),t.tag){case 1:return qu(t.type)&&sw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tg(),mo(Gu),mo(ru),vR(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gR(t),null;case 13:if(mo(Do),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(zt(340));Ig()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mo(Do),null;case 4:return Tg(),null;case 10:return hR(t.type._context),null;case 22:case 23:return IR(),null;case 24:return null;default:return null}}var Eb=!1,eu=!1,jne=typeof WeakSet=="function"?WeakSet:Set,_r=null;function Qm(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ho(e,t,n)}else r.current=null}function VT(e,t,r){try{r()}catch(n){Ho(e,t,n)}}var d5=!1;function Une(e,t){if(AT=nw,e=$9(),aR(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,d=-1,f=0,g=0,_=e,b=null;t:for(;;){for(var P;_!==r||i!==0&&_.nodeType!==3||(a=s+i),_!==o||n!==0&&_.nodeType!==3||(d=s+n),_.nodeType===3&&(s+=_.nodeValue.length),(P=_.firstChild)!==null;)b=_,_=P;for(;;){if(_===e)break t;if(b===r&&++f===i&&(a=s),b===o&&++g===n&&(d=s),(P=_.nextSibling)!==null)break;_=b,b=_.parentNode}_=P}r=a===-1||d===-1?null:{start:a,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(CT={focusedElem:e,selectionRange:r},nw=!1,_r=t;_r!==null;)if(t=_r,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_r=e;else for(;_r!==null;){t=_r;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var R=L.memoizedProps,$=L.memoizedState,F=t.stateNode,T=F.getSnapshotBeforeUpdate(t.elementType===t.type?R:yc(t.type,R),$);F.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(zt(163))}}catch(N){Ho(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,_r=e;break}_r=t.return}return L=d5,d5=!1,L}function e0(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&VT(t,r,o)}i=i.next}while(i!==n)}}function RE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function GT(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function D7(e){var t=e.alternate;t!==null&&(e.alternate=null,D7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rf],delete t[T0],delete t[TT],delete t[Sne],delete t[Pne])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function N7(e){return e.tag===5||e.tag===3||e.tag===4}function p5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||N7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=aw));else if(n!==4&&(e=e.child,e!==null))for(qT(e,t,r),e=e.sibling;e!==null;)qT(e,t,r),e=e.sibling}function WT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(WT(e,t,r),e=e.sibling;e!==null;)WT(e,t,r),e=e.sibling}var bs=null,_c=!1;function Rh(e,t,r){for(r=r.child;r!==null;)F7(e,t,r),r=r.sibling}function F7(e,t,r){if(cf&&typeof cf.onCommitFiberUnmount=="function")try{cf.onCommitFiberUnmount(PE,r)}catch{}switch(r.tag){case 5:eu||Qm(r,t);case 6:var n=bs,i=_c;bs=null,Rh(e,t,r),bs=n,_c=i,bs!==null&&(_c?(e=bs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):bs.removeChild(r.stateNode));break;case 18:bs!==null&&(_c?(e=bs,r=r.stateNode,e.nodeType===8?zC(e.parentNode,r):e.nodeType===1&&zC(e,r),P0(e)):zC(bs,r.stateNode));break;case 4:n=bs,i=_c,bs=r.stateNode.containerInfo,_c=!0,Rh(e,t,r),bs=n,_c=i;break;case 0:case 11:case 14:case 15:if(!eu&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&VT(r,t,s),i=i.next}while(i!==n)}Rh(e,t,r);break;case 1:if(!eu&&(Qm(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ho(r,t,a)}Rh(e,t,r);break;case 21:Rh(e,t,r);break;case 22:r.mode&1?(eu=(n=eu)||r.memoizedState!==null,Rh(e,t,r),eu=n):Rh(e,t,r);break;default:Rh(e,t,r)}}function m5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new jne),t.forEach(function(n){var i=Kne.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function gc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:bs=a.stateNode,_c=!1;break e;case 3:bs=a.stateNode.containerInfo,_c=!0;break e;case 4:bs=a.stateNode.containerInfo,_c=!0;break e}a=a.return}if(bs===null)throw Error(zt(160));F7(o,s,i),bs=null,_c=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(f){Ho(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$7(t,e),t=t.sibling}function $7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),Hc(e),n&4){try{e0(3,e,e.return),RE(3,e)}catch(R){Ho(e,e.return,R)}try{e0(5,e,e.return)}catch(R){Ho(e,e.return,R)}}break;case 1:gc(t,e),Hc(e),n&512&&r!==null&&Qm(r,r.return);break;case 5:if(gc(t,e),Hc(e),n&512&&r!==null&&Qm(r,r.return),e.flags&32){var i=e.stateNode;try{x0(i,"")}catch(R){Ho(e,e.return,R)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=r!==null?r.memoizedProps:o,a=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&o9(i,o),gT(a,s);var f=gT(a,o);for(s=0;s<d.length;s+=2){var g=d[s],_=d[s+1];g==="style"?c9(i,_):g==="dangerouslySetInnerHTML"?u9(i,_):g==="children"?x0(i,_):XL(i,g,_,f)}switch(a){case"input":fT(i,o);break;case"textarea":a9(i,o);break;case"select":var b=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var P=o.value;P!=null?dg(i,!!o.multiple,P,!1):b!==!!o.multiple&&(o.defaultValue!=null?dg(i,!!o.multiple,o.defaultValue,!0):dg(i,!!o.multiple,o.multiple?[]:"",!1))}i[T0]=o}catch(R){Ho(e,e.return,R)}}break;case 6:if(gc(t,e),Hc(e),n&4){if(e.stateNode===null)throw Error(zt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(R){Ho(e,e.return,R)}}break;case 3:if(gc(t,e),Hc(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{P0(t.containerInfo)}catch(R){Ho(e,e.return,R)}break;case 4:gc(t,e),Hc(e);break;case 13:gc(t,e),Hc(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(AR=fa())),n&4&&m5(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(eu=(f=eu)||g,gc(t,e),eu=f):gc(t,e),Hc(e),n&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!g&&e.mode&1)for(_r=e,g=e.child;g!==null;){for(_=_r=g;_r!==null;){switch(b=_r,P=b.child,b.tag){case 0:case 11:case 14:case 15:e0(4,b,b.return);break;case 1:Qm(b,b.return);var L=b.stateNode;if(typeof L.componentWillUnmount=="function"){n=b,r=b.return;try{t=n,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(R){Ho(n,r,R)}}break;case 5:Qm(b,b.return);break;case 22:if(b.memoizedState!==null){v5(_);continue}}P!==null?(P.return=b,_r=P):v5(_)}g=g.sibling}e:for(g=null,_=e;;){if(_.tag===5){if(g===null){g=_;try{i=_.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=_.stateNode,d=_.memoizedProps.style,s=d!=null&&d.hasOwnProperty("display")?d.display:null,a.style.display=l9("display",s))}catch(R){Ho(e,e.return,R)}}}else if(_.tag===6){if(g===null)try{_.stateNode.nodeValue=f?"":_.memoizedProps}catch(R){Ho(e,e.return,R)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;g===_&&(g=null),_=_.return}g===_&&(g=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:gc(t,e),Hc(e),n&4&&m5(e);break;case 21:break;default:gc(t,e),Hc(e)}}function Hc(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(N7(r)){var n=r;break e}r=r.return}throw Error(zt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(x0(i,""),n.flags&=-33);var o=p5(e);WT(e,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=p5(e);qT(e,a,s);break;default:throw Error(zt(161))}}catch(d){Ho(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vne(e,t,r){_r=e,z7(e)}function z7(e,t,r){for(var n=(e.mode&1)!==0;_r!==null;){var i=_r,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Eb;if(!s){var a=i.alternate,d=a!==null&&a.memoizedState!==null||eu;a=Eb;var f=eu;if(Eb=s,(eu=d)&&!f)for(_r=i;_r!==null;)s=_r,d=s.child,s.tag===22&&s.memoizedState!==null?y5(i):d!==null?(d.return=s,_r=d):y5(i);for(;o!==null;)_r=o,z7(o),o=o.sibling;_r=i,Eb=a,eu=f}g5(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,_r=o):g5(e)}}function g5(e){for(;_r!==null;){var t=_r;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:eu||RE(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!eu)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:yc(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Q4(t,o,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Q4(t,s,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var _=g.dehydrated;_!==null&&P0(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(zt(163))}eu||t.flags&512&&GT(t)}catch(b){Ho(t,t.return,b)}}if(t===e){_r=null;break}if(r=t.sibling,r!==null){r.return=t.return,_r=r;break}_r=t.return}}function v5(e){for(;_r!==null;){var t=_r;if(t===e){_r=null;break}var r=t.sibling;if(r!==null){r.return=t.return,_r=r;break}_r=t.return}}function y5(e){for(;_r!==null;){var t=_r;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{RE(4,t)}catch(d){Ho(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(d){Ho(t,i,d)}}var o=t.return;try{GT(t)}catch(d){Ho(t,o,d)}break;case 5:var s=t.return;try{GT(t)}catch(d){Ho(t,s,d)}}}catch(d){Ho(t,t.return,d)}if(t===e){_r=null;break}var a=t.sibling;if(a!==null){a.return=t.return,_r=a;break}_r=t.return}}var Gne=Math.ceil,vw=hh.ReactCurrentDispatcher,SR=hh.ReactCurrentOwner,rc=hh.ReactCurrentBatchConfig,hi=0,us=null,_a=null,Es=0,_l=0,eg=wd(0),$a=0,N0=null,pp=0,kE=0,PR=0,t0=null,Uu=null,AR=0,Lg=1/0,jf=null,yw=!1,XT=null,ed=null,Sb=!1,Xh=null,_w=0,r0=0,YT=null,Mx=-1,Lx=0;function Eu(){return hi&6?fa():Mx!==-1?Mx:Mx=fa()}function td(e){return e.mode&1?hi&2&&Es!==0?Es&-Es:Cne.transition!==null?(Lx===0&&(Lx=w9()),Lx):(e=Ri,e!==0||(e=window.event,e=e===void 0?16:O9(e.type)),e):1}function Sc(e,t,r,n){if(50<r0)throw r0=0,YT=null,Error(zt(185));h_(e,r,n),(!(hi&2)||e!==us)&&(e===us&&(!(hi&2)&&(kE|=r),$a===4&&qh(e,Es)),Wu(e,n),r===1&&hi===0&&!(t.mode&1)&&(Lg=fa()+500,TE&&Ed()))}function Wu(e,t){var r=e.callbackNode;Cre(e,t);var n=rw(e,e===us?Es:0);if(n===0)r!==null&&C4(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&C4(r),t===1)e.tag===0?Ane(_5.bind(null,e)):Y9(_5.bind(null,e)),wne(function(){!(hi&6)&&Ed()}),r=null;else{switch(E9(n)){case 1:r=JL;break;case 4:r=b9;break;case 16:r=tw;break;case 536870912:r=x9;break;default:r=tw}r=X7(r,B7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function B7(e,t){if(Mx=-1,Lx=0,hi&6)throw Error(zt(327));var r=e.callbackNode;if(yg()&&e.callbackNode!==r)return null;var n=rw(e,e===us?Es:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=bw(e,n);else{t=n;var i=hi;hi|=2;var o=U7();(us!==e||Es!==t)&&(jf=null,Lg=fa()+500,op(e,t));do try{Xne();break}catch(a){j7(e,a)}while(1);fR(),vw.current=o,hi=i,_a!==null?t=0:(us=null,Es=0,t=$a)}if(t!==0){if(t===2&&(i=xT(e),i!==0&&(n=i,t=HT(e,i))),t===1)throw r=N0,op(e,0),qh(e,n),Wu(e,fa()),r;if(t===6)qh(e,n);else{if(i=e.current.alternate,!(n&30)&&!qne(i)&&(t=bw(e,n),t===2&&(o=xT(e),o!==0&&(n=o,t=HT(e,o))),t===1))throw r=N0,op(e,0),qh(e,n),Wu(e,fa()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(zt(345));case 2:Gd(e,Uu,jf);break;case 3:if(qh(e,n),(n&130023424)===n&&(t=AR+500-fa(),10<t)){if(rw(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=OT(Gd.bind(null,e,Uu,jf),t);break}Gd(e,Uu,jf);break;case 4:if(qh(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Ec(n);o=1<<s,s=t[s],s>i&&(i=s),n&=~o}if(n=i,n=fa()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Gne(n/1960))-n,10<n){e.timeoutHandle=OT(Gd.bind(null,e,Uu,jf),n);break}Gd(e,Uu,jf);break;case 5:Gd(e,Uu,jf);break;default:throw Error(zt(329))}}}return Wu(e,fa()),e.callbackNode===r?B7.bind(null,e):null}function HT(e,t){var r=t0;return e.current.memoizedState.isDehydrated&&(op(e,t).flags|=256),e=bw(e,t),e!==2&&(t=Uu,Uu=r,t!==null&&ZT(t)),e}function ZT(e){Uu===null?Uu=e:Uu.push.apply(Uu,e)}function qne(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Pc(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qh(e,t){for(t&=~PR,t&=~kE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ec(t),n=1<<r;e[r]=-1,t&=~n}}function _5(e){if(hi&6)throw Error(zt(327));yg();var t=rw(e,0);if(!(t&1))return Wu(e,fa()),null;var r=bw(e,t);if(e.tag!==0&&r===2){var n=xT(e);n!==0&&(t=n,r=HT(e,n))}if(r===1)throw r=N0,op(e,0),qh(e,t),Wu(e,fa()),r;if(r===6)throw Error(zt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gd(e,Uu,jf),Wu(e,fa()),null}function CR(e,t){var r=hi;hi|=1;try{return e(t)}finally{hi=r,hi===0&&(Lg=fa()+500,TE&&Ed())}}function mp(e){Xh!==null&&Xh.tag===0&&!(hi&6)&&yg();var t=hi;hi|=1;var r=rc.transition,n=Ri;try{if(rc.transition=null,Ri=1,e)return e()}finally{Ri=n,rc.transition=r,hi=t,!(hi&6)&&Ed()}}function IR(){_l=eg.current,mo(eg)}function op(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,xne(r)),_a!==null)for(r=_a.return;r!==null;){var n=r;switch(uR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sw();break;case 3:Tg(),mo(Gu),mo(ru),vR();break;case 5:gR(n);break;case 4:Tg();break;case 13:mo(Do);break;case 19:mo(Do);break;case 10:hR(n.type._context);break;case 22:case 23:IR()}r=r.return}if(us=e,_a=e=rd(e.current,null),Es=_l=t,$a=0,N0=null,PR=kE=pp=0,Uu=t0=null,Qd!==null){for(t=0;t<Qd.length;t++)if(r=Qd[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Qd=null}return e}function j7(e,t){do{var r=_a;try{if(fR(),Ix.current=gw,mw){for(var n=zo.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mw=!1}if(dp=0,as=Na=zo=null,Qy=!1,R0=0,SR.current=null,r===null||r.return===null){$a=1,N0=t,_a=null;break}e:{var o=e,s=r.return,a=r,d=t;if(t=Es,a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,g=a,_=g.tag;if(!(g.mode&1)&&(_===0||_===11||_===15)){var b=g.alternate;b?(g.updateQueue=b.updateQueue,g.memoizedState=b.memoizedState,g.lanes=b.lanes):(g.updateQueue=null,g.memoizedState=null)}var P=a5(s);if(P!==null){P.flags&=-257,s5(P,s,a,o,t),P.mode&1&&o5(o,f,t),t=P,d=f;var L=t.updateQueue;if(L===null){var R=new Set;R.add(d),t.updateQueue=R}else L.add(d);break e}else{if(!(t&1)){o5(o,f,t),OR();break e}d=Error(zt(426))}}else if(Po&&a.mode&1){var $=a5(s);if($!==null){!($.flags&65536)&&($.flags|=256),s5($,s,a,o,t),lR(Mg(d,a));break e}}o=d=Mg(d,a),$a!==4&&($a=2),t0===null?t0=[o]:t0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var F=S7(o,d,t);J4(o,F);break e;case 1:a=d;var T=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ed===null||!ed.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=P7(o,a,t);J4(o,N);break e}}o=o.return}while(o!==null)}G7(r)}catch(B){t=B,_a===r&&r!==null&&(_a=r=r.return);continue}break}while(1)}function U7(){var e=vw.current;return vw.current=gw,e===null?gw:e}function OR(){($a===0||$a===3||$a===2)&&($a=4),us===null||!(pp&268435455)&&!(kE&268435455)||qh(us,Es)}function bw(e,t){var r=hi;hi|=2;var n=U7();(us!==e||Es!==t)&&(jf=null,op(e,t));do try{Wne();break}catch(i){j7(e,i)}while(1);if(fR(),hi=r,vw.current=n,_a!==null)throw Error(zt(261));return us=null,Es=0,$a}function Wne(){for(;_a!==null;)V7(_a)}function Xne(){for(;_a!==null&&!yre();)V7(_a)}function V7(e){var t=W7(e.alternate,e,_l);e.memoizedProps=e.pendingProps,t===null?G7(e):_a=t,SR.current=null}function G7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Bne(r,t),r!==null){r.flags&=32767,_a=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$a=6,_a=null;return}}else if(r=zne(r,t,_l),r!==null){_a=r;return}if(t=t.sibling,t!==null){_a=t;return}_a=t=e}while(t!==null);$a===0&&($a=5)}function Gd(e,t,r){var n=Ri,i=rc.transition;try{rc.transition=null,Ri=1,Yne(e,t,r,n)}finally{rc.transition=i,Ri=n}return null}function Yne(e,t,r,n){do yg();while(Xh!==null);if(hi&6)throw Error(zt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(zt(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Ire(e,o),e===us&&(_a=us=null,Es=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sb||(Sb=!0,X7(tw,function(){return yg(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=rc.transition,rc.transition=null;var s=Ri;Ri=1;var a=hi;hi|=4,SR.current=null,Une(e,r),$7(r,e),pne(CT),nw=!!AT,CT=AT=null,e.current=r,Vne(r),_re(),hi=a,Ri=s,rc.transition=o}else e.current=r;if(Sb&&(Sb=!1,Xh=e,_w=i),o=e.pendingLanes,o===0&&(ed=null),wre(r.stateNode),Wu(e,fa()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(yw)throw yw=!1,e=XT,XT=null,e;return _w&1&&e.tag!==0&&yg(),o=e.pendingLanes,o&1?e===YT?r0++:(r0=0,YT=e):r0=0,Ed(),null}function yg(){if(Xh!==null){var e=E9(_w),t=rc.transition,r=Ri;try{if(rc.transition=null,Ri=16>e?16:e,Xh===null)var n=!1;else{if(e=Xh,Xh=null,_w=0,hi&6)throw Error(zt(331));var i=hi;for(hi|=4,_r=e.current;_r!==null;){var o=_r,s=o.child;if(_r.flags&16){var a=o.deletions;if(a!==null){for(var d=0;d<a.length;d++){var f=a[d];for(_r=f;_r!==null;){var g=_r;switch(g.tag){case 0:case 11:case 15:e0(8,g,o)}var _=g.child;if(_!==null)_.return=g,_r=_;else for(;_r!==null;){g=_r;var b=g.sibling,P=g.return;if(D7(g),g===f){_r=null;break}if(b!==null){b.return=P,_r=b;break}_r=P}}}var L=o.alternate;if(L!==null){var R=L.child;if(R!==null){L.child=null;do{var $=R.sibling;R.sibling=null,R=$}while(R!==null)}}_r=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,_r=s;else e:for(;_r!==null;){if(o=_r,o.flags&2048)switch(o.tag){case 0:case 11:case 15:e0(9,o,o.return)}var F=o.sibling;if(F!==null){F.return=o.return,_r=F;break e}_r=o.return}}var T=e.current;for(_r=T;_r!==null;){s=_r;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,_r=x;else e:for(s=T;_r!==null;){if(a=_r,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:RE(9,a)}}catch(B){Ho(a,a.return,B)}if(a===s){_r=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,_r=N;break e}_r=a.return}}if(hi=i,Ed(),cf&&typeof cf.onPostCommitFiberRoot=="function")try{cf.onPostCommitFiberRoot(PE,e)}catch{}n=!0}return n}finally{Ri=r,rc.transition=t}}return!1}function b5(e,t,r){t=Mg(r,t),t=S7(e,t,1),e=Qh(e,t,1),t=Eu(),e!==null&&(h_(e,1,t),Wu(e,t))}function Ho(e,t,r){if(e.tag===3)b5(e,e,r);else for(;t!==null;){if(t.tag===3){b5(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ed===null||!ed.has(n))){e=Mg(r,e),e=P7(t,e,1),t=Qh(t,e,1),e=Eu(),t!==null&&(h_(t,1,e),Wu(t,e));break}}t=t.return}}function Hne(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Eu(),e.pingedLanes|=e.suspendedLanes&r,us===e&&(Es&r)===r&&($a===4||$a===3&&(Es&130023424)===Es&&500>fa()-AR?op(e,0):PR|=r),Wu(e,t)}function q7(e,t){t===0&&(e.mode&1?(t=pb,pb<<=1,!(pb&130023424)&&(pb=4194304)):t=1);var r=Eu();e=nh(e,t),e!==null&&(h_(e,t,r),Wu(e,r))}function Zne(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),q7(e,r)}function Kne(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(zt(314))}n!==null&&n.delete(t),q7(e,r)}var W7;W7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gu.current)Vu=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Vu=!1,$ne(e,t,r);Vu=!!(e.flags&131072)}else Vu=!1,Po&&t.flags&1048576&&H9(t,cw,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Tx(e,t),e=t.pendingProps;var i=Cg(t,ru.current);vg(t,r),i=_R(null,t,n,e,i,r);var o=bR();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qu(n)?(o=!0,uw(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pR(t),i.updater=ME,t.stateNode=i,i._reactInternals=t,NT(t,n,e,r),t=zT(null,t,n,!0,o,r)):(t.tag=0,Po&&o&&sR(t),_u(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Tx(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Qne(n),e=yc(n,e),i){case 0:t=$T(null,t,n,e,r);break e;case 1:t=c5(null,t,n,e,r);break e;case 11:t=u5(null,t,n,e,r);break e;case 14:t=l5(null,t,n,yc(n.type,e),r);break e}throw Error(zt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yc(n,i),$T(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yc(n,i),c5(e,t,n,i,r);case 3:e:{if(O7(t),e===null)throw Error(zt(387));n=t.pendingProps,o=t.memoizedState,i=o.element,Q9(e,t),dw(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Mg(Error(zt(423)),t),t=f5(e,t,n,r,i);break e}else if(n!==i){i=Mg(Error(zt(424)),t),t=f5(e,t,n,r,i);break e}else for(Pl=Jh(t.stateNode.containerInfo.firstChild),Al=t,Po=!0,bc=null,r=n7(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ig(),n===i){t=ih(e,t,r);break e}_u(e,t,n,r)}t=t.child}return t;case 5:return i7(t),e===null&&RT(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,IT(n,i)?s=null:o!==null&&IT(n,o)&&(t.flags|=32),I7(e,t),_u(e,t,s,r),t.child;case 6:return e===null&&RT(t),null;case 13:return T7(e,t,r);case 4:return mR(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Og(t,null,n,r):_u(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yc(n,i),u5(e,t,n,i,r);case 7:return _u(e,t,t.pendingProps,r),t.child;case 8:return _u(e,t,t.pendingProps.children,r),t.child;case 12:return _u(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,to(fw,n._currentValue),n._currentValue=s,o!==null)if(Pc(o.value,s)){if(o.children===i.children&&!Gu.current){t=ih(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var d=a.firstContext;d!==null;){if(d.context===n){if(o.tag===1){d=Kf(-1,r&-r),d.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?d.next=d:(d.next=g.next,g.next=d),f.pending=d}}o.lanes|=r,d=o.alternate,d!==null&&(d.lanes|=r),kT(o.return,r,t),a.lanes|=r;break}d=d.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(zt(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),kT(s,r,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}_u(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,vg(t,r),i=nc(i),n=n(i),t.flags|=1,_u(e,t,n,r),t.child;case 14:return n=t.type,i=yc(n,t.pendingProps),i=yc(n.type,i),l5(e,t,n,i,r);case 15:return A7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yc(n,i),Tx(e,t),t.tag=1,qu(n)?(e=!0,uw(t)):e=!1,vg(t,r),t7(t,n,i),NT(t,n,i,r),zT(null,t,n,!0,e,r);case 19:return M7(e,t,r);case 22:return C7(e,t,r)}throw Error(zt(156,t.tag))};function X7(e,t){return _9(e,t)}function Jne(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ec(e,t,r,n){return new Jne(e,t,r,n)}function TR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qne(e){if(typeof e=="function")return TR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===HL)return 11;if(e===ZL)return 14}return 2}function rd(e,t){var r=e.alternate;return r===null?(r=ec(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Rx(e,t,r,n,i,o){var s=2;if(n=e,typeof e=="function")TR(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Gm:return ap(r.children,i,o,t);case YL:s=8,i|=8;break;case aT:return e=ec(12,r,t,i|2),e.elementType=aT,e.lanes=o,e;case sT:return e=ec(13,r,t,i),e.elementType=sT,e.lanes=o,e;case uT:return e=ec(19,r,t,i),e.elementType=uT,e.lanes=o,e;case r9:return DE(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case e9:s=10;break e;case t9:s=9;break e;case HL:s=11;break e;case ZL:s=14;break e;case zh:s=16,n=null;break e}throw Error(zt(130,e==null?e:typeof e,""))}return t=ec(s,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function ap(e,t,r,n){return e=ec(7,e,n,t),e.lanes=r,e}function DE(e,t,r,n){return e=ec(22,e,n,t),e.elementType=r9,e.lanes=r,e.stateNode={isHidden:!1},e}function XC(e,t,r){return e=ec(6,e,null,t),e.lanes=r,e}function YC(e,t,r){return t=ec(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eie(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IC(0),this.expirationTimes=IC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IC(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function MR(e,t,r,n,i,o,s,a,d){return e=new eie(e,t,r,a,d),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ec(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pR(o),e}function tie(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vm,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Y7(e){if(!e)return ud;e=e._reactInternals;e:{if(kp(e)!==e||e.tag!==1)throw Error(zt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(zt(171))}if(e.tag===1){var r=e.type;if(qu(r))return X9(e,r,t)}return t}function H7(e,t,r,n,i,o,s,a,d){return e=MR(r,n,!0,e,i,o,s,a,d),e.context=Y7(null),r=e.current,n=Eu(),i=td(r),o=Kf(n,i),o.callback=t??null,Qh(r,o,i),e.current.lanes=i,h_(e,i,n),Wu(e,n),e}function NE(e,t,r,n){var i=t.current,o=Eu(),s=td(i);return r=Y7(r),t.context===null?t.context=r:t.pendingContext=r,t=Kf(o,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Qh(i,t,s),e!==null&&(Sc(e,i,s,o),Cx(e,i,s)),s}function xw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function x5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function LR(e,t){x5(e,t),(e=e.alternate)&&x5(e,t)}function rie(){return null}var Z7=typeof reportError=="function"?reportError:function(e){};function RR(e){this._internalRoot=e}FE.prototype.render=RR.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(zt(409));NE(e,t,null,null)};FE.prototype.unmount=RR.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mp(function(){NE(null,e,null,null)}),t[rh]=null}};function FE(e){this._internalRoot=e}FE.prototype.unstable_scheduleHydration=function(e){if(e){var t=A9();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gh.length&&t!==0&&t<Gh[r].priority;r++);Gh.splice(r,0,e),r===0&&I9(e)}};function kR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $E(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function w5(){}function nie(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var f=xw(s);o.call(f)}}var s=H7(t,n,e,0,null,!1,!1,"",w5);return e._reactRootContainer=s,e[rh]=s.current,I0(e.nodeType===8?e.parentNode:e),mp(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var f=xw(d);a.call(f)}}var d=MR(e,0,!1,null,null,!1,!1,"",w5);return e._reactRootContainer=d,e[rh]=d.current,I0(e.nodeType===8?e.parentNode:e),mp(function(){NE(t,d,r,n)}),d}function zE(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var d=xw(s);a.call(d)}}NE(t,s,e,i)}else s=nie(r,t,e,i,n);return xw(s)}S9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Oy(t.pendingLanes);r!==0&&(QL(t,r|1),Wu(t,fa()),!(hi&6)&&(Lg=fa()+500,Ed()))}break;case 13:mp(function(){var n=nh(e,1);if(n!==null){var i=Eu();Sc(n,e,1,i)}}),LR(e,1)}};eR=function(e){if(e.tag===13){var t=nh(e,134217728);if(t!==null){var r=Eu();Sc(t,e,134217728,r)}LR(e,134217728)}};P9=function(e){if(e.tag===13){var t=td(e),r=nh(e,t);if(r!==null){var n=Eu();Sc(r,e,t,n)}LR(e,t)}};A9=function(){return Ri};C9=function(e,t){var r=Ri;try{return Ri=e,t()}finally{Ri=r}};yT=function(e,t,r){switch(t){case"input":if(fT(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=OE(n);if(!i)throw Error(zt(90));i9(n),fT(n,i)}}}break;case"textarea":a9(e,r);break;case"select":t=r.value,t!=null&&dg(e,!!r.multiple,t,!1)}};d9=CR;p9=mp;var iie={usingClientEntryPoint:!1,Events:[p_,Ym,OE,f9,h9,CR]},ry={findFiberByHostInstance:Jd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},oie={bundleType:ry.bundleType,version:ry.version,rendererPackageName:ry.rendererPackageName,rendererConfig:ry.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=v9(e),e===null?null:e.stateNode},findFiberByHostInstance:ry.findFiberByHostInstance||rie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pb.isDisabled&&Pb.supportsFiber)try{PE=Pb.inject(oie),cf=Pb}catch{}}Ml.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iie;Ml.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kR(t))throw Error(zt(200));return tie(e,t,null,r)};Ml.createRoot=function(e,t){if(!kR(e))throw Error(zt(299));var r=!1,n="",i=Z7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=MR(e,1,!1,null,null,r,!1,n,i),e[rh]=t.current,I0(e.nodeType===8?e.parentNode:e),new RR(t)};Ml.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(zt(188)):(e=Object.keys(e).join(","),Error(zt(268,e)));return e=v9(t),e=e===null?null:e.stateNode,e};Ml.flushSync=function(e){return mp(e)};Ml.hydrate=function(e,t,r){if(!$E(t))throw Error(zt(200));return zE(null,e,t,!0,r)};Ml.hydrateRoot=function(e,t,r){if(!kR(e))throw Error(zt(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=Z7;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=H7(t,null,e,1,r??null,i,!1,o,s),e[rh]=t.current,I0(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new FE(t)};Ml.render=function(e,t,r){if(!$E(t))throw Error(zt(200));return zE(null,e,t,!1,r)};Ml.unmountComponentAtNode=function(e){if(!$E(e))throw Error(zt(40));return e._reactRootContainer?(mp(function(){zE(null,null,e,!1,function(){e._reactRootContainer=null,e[rh]=null})}),!0):!1};Ml.unstable_batchedUpdates=CR;Ml.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$E(r))throw Error(zt(200));if(e==null||e._reactInternals===void 0)throw Error(zt(38));return zE(e,t,r,!1,n)};Ml.version="18.2.0-next-9e3b772b8-20220608";function K7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K7)}catch{}}K7(),HV.exports=Ml;var Dp=HV.exports;const J7=bd(Dp);var E5=Dp;iT.createRoot=E5.createRoot,iT.hydrateRoot=E5.hydrateRoot;var Q7={},DR={},Tc={},NR={exports:{}},eG=function(t,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return t.apply(r,i)}},aie=eG,Np=Object.prototype.toString;function FR(e){return Np.call(e)==="[object Array]"}function KT(e){return typeof e>"u"}function sie(e){return e!==null&&!KT(e)&&e.constructor!==null&&!KT(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function uie(e){return Np.call(e)==="[object ArrayBuffer]"}function lie(e){return typeof FormData<"u"&&e instanceof FormData}function cie(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function fie(e){return typeof e=="string"}function hie(e){return typeof e=="number"}function tG(e){return e!==null&&typeof e=="object"}function kx(e){if(Np.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function die(e){return Np.call(e)==="[object Date]"}function pie(e){return Np.call(e)==="[object File]"}function mie(e){return Np.call(e)==="[object Blob]"}function rG(e){return Np.call(e)==="[object Function]"}function gie(e){return tG(e)&&rG(e.pipe)}function vie(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function yie(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function _ie(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function $R(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),FR(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function JT(){var e={};function t(i,o){kx(e[o])&&kx(i)?e[o]=JT(e[o],i):kx(i)?e[o]=JT({},i):FR(i)?e[o]=i.slice():e[o]=i}for(var r=0,n=arguments.length;r<n;r++)$R(arguments[r],t);return e}function bie(e,t,r){return $R(t,function(i,o){r&&typeof i=="function"?e[o]=aie(i,r):e[o]=i}),e}function xie(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Rl={isArray:FR,isArrayBuffer:uie,isBuffer:sie,isFormData:lie,isArrayBufferView:cie,isString:fie,isNumber:hie,isObject:tG,isPlainObject:kx,isUndefined:KT,isDate:die,isFile:pie,isBlob:mie,isFunction:rG,isStream:gie,isURLSearchParams:vie,isStandardBrowserEnv:_ie,forEach:$R,merge:JT,extend:bie,trim:yie,stripBOM:xie},xm=Rl;function S5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var nG=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(xm.isURLSearchParams(r))i=r.toString();else{var o=[];xm.forEach(r,function(d,f){d===null||typeof d>"u"||(xm.isArray(d)?f=f+"[]":d=[d],xm.forEach(d,function(_){xm.isDate(_)?_=_.toISOString():xm.isObject(_)&&(_=JSON.stringify(_)),o.push(S5(f)+"="+S5(_))}))}),i=o.join("&")}if(i){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},wie=Rl;function BE(){this.handlers=[]}BE.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};BE.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};BE.prototype.forEach=function(t){wie.forEach(this.handlers,function(n){n!==null&&t(n)})};var Eie=BE,Sie=Rl,Pie=function(t,r){Sie.forEach(t,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[o])})},iG=function(t,r,n,i,o){return t.config=r,n&&(t.code=n),t.request=i,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},HC,P5;function oG(){if(P5)return HC;P5=1;var e=iG;return HC=function(r,n,i,o,s){var a=new Error(r);return e(a,n,i,o,s)},HC}var ZC,A5;function Aie(){if(A5)return ZC;A5=1;var e=oG();return ZC=function(r,n,i){var o=i.config.validateStatus;!i.status||!o||o(i.status)?r(i):n(e("Request failed with status code "+i.status,i.config,null,i.request,i))},ZC}var KC,C5;function Cie(){if(C5)return KC;C5=1;var e=Rl;return KC=e.isStandardBrowserEnv()?function(){return{write:function(n,i,o,s,a,d){var f=[];f.push(n+"="+encodeURIComponent(i)),e.isNumber(o)&&f.push("expires="+new Date(o).toGMTString()),e.isString(s)&&f.push("path="+s),e.isString(a)&&f.push("domain="+a),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),KC}var JC,I5;function Iie(){return I5||(I5=1,JC=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),JC}var QC,O5;function Oie(){return O5||(O5=1,QC=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),QC}var eI,T5;function Tie(){if(T5)return eI;T5=1;var e=Iie(),t=Oie();return eI=function(n,i){return n&&!e(i)?t(n,i):i},eI}var tI,M5;function Mie(){if(M5)return tI;M5=1;var e=Rl,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return tI=function(n){var i={},o,s,a;return n&&e.forEach(n.split(`
`),function(f){if(a=f.indexOf(":"),o=e.trim(f.substr(0,a)).toLowerCase(),s=e.trim(f.substr(a+1)),o){if(i[o]&&t.indexOf(o)>=0)return;o==="set-cookie"?i[o]=(i[o]?i[o]:[]).concat([s]):i[o]=i[o]?i[o]+", "+s:s}}),i},tI}var rI,L5;function Lie(){if(L5)return rI;L5=1;var e=Rl;return rI=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function o(s){var a=s;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(a){var d=e.isString(a)?o(a):a;return d.protocol===i.protocol&&d.host===i.host}}():function(){return function(){return!0}}(),rI}var nI,R5;function k5(){if(R5)return nI;R5=1;var e=Rl,t=Aie(),r=Cie(),n=nG,i=Tie(),o=Mie(),s=Lie(),a=oG();return nI=function(f){return new Promise(function(_,b){var P=f.data,L=f.headers,R=f.responseType;e.isFormData(P)&&delete L["Content-Type"];var $=new XMLHttpRequest;if(f.auth){var F=f.auth.username||"",T=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";L.Authorization="Basic "+btoa(F+":"+T)}var x=i(f.baseURL,f.url);$.open(f.method.toUpperCase(),n(x,f.params,f.paramsSerializer),!0),$.timeout=f.timeout;function N(){if($){var H="getAllResponseHeaders"in $?o($.getAllResponseHeaders()):null,Z=!R||R==="text"||R==="json"?$.responseText:$.response,Y={data:Z,status:$.status,statusText:$.statusText,headers:H,config:f,request:$};t(_,b,Y),$=null}}if("onloadend"in $?$.onloadend=N:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(N)},$.onabort=function(){$&&(b(a("Request aborted",f,"ECONNABORTED",$)),$=null)},$.onerror=function(){b(a("Network Error",f,null,$)),$=null},$.ontimeout=function(){var Z="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(Z=f.timeoutErrorMessage),b(a(Z,f,f.transitional&&f.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",$)),$=null},e.isStandardBrowserEnv()){var B=(f.withCredentials||s(x))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;B&&(L[f.xsrfHeaderName]=B)}"setRequestHeader"in $&&e.forEach(L,function(Z,Y){typeof P>"u"&&Y.toLowerCase()==="content-type"?delete L[Y]:$.setRequestHeader(Y,Z)}),e.isUndefined(f.withCredentials)||($.withCredentials=!!f.withCredentials),R&&R!=="json"&&($.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&$.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&$.upload&&$.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(Z){$&&($.abort(),b(Z),$=null)}),P||(P=null),$.send(P)})},nI}var xs=Rl,D5=Pie,Rie=iG,kie={"Content-Type":"application/x-www-form-urlencoded"};function N5(e,t){!xs.isUndefined(e)&&xs.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Die(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=k5()),e}function Nie(e,t,r){if(xs.isString(e))try{return(t||JSON.parse)(e),xs.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var jE={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Die(),transformRequest:[function(t,r){return D5(r,"Accept"),D5(r,"Content-Type"),xs.isFormData(t)||xs.isArrayBuffer(t)||xs.isBuffer(t)||xs.isStream(t)||xs.isFile(t)||xs.isBlob(t)?t:xs.isArrayBufferView(t)?t.buffer:xs.isURLSearchParams(t)?(N5(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):xs.isObject(t)||r&&r["Content-Type"]==="application/json"?(N5(r,"application/json"),Nie(t)):t}],transformResponse:[function(t){var r=this.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&xs.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?Rie(s,this,"E_JSON_PARSE"):s}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};jE.headers={common:{Accept:"application/json, text/plain, */*"}};xs.forEach(["delete","get","head"],function(t){jE.headers[t]={}});xs.forEach(["post","put","patch"],function(t){jE.headers[t]=xs.merge(kie)});var zR=jE,Fie=Rl,$ie=zR,zie=function(t,r,n){var i=this||$ie;return Fie.forEach(n,function(s){t=s.call(i,t,r)}),t},iI,F5;function aG(){return F5||(F5=1,iI=function(t){return!!(t&&t.__CANCEL__)}),iI}var $5=Rl,oI=zie,Bie=aG(),jie=zR;function aI(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Uie=function(t){aI(t),t.headers=t.headers||{},t.data=oI.call(t,t.data,t.headers,t.transformRequest),t.headers=$5.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),$5.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||jie.adapter;return r(t).then(function(i){return aI(t),i.data=oI.call(t,i.data,i.headers,t.transformResponse),i},function(i){return Bie(i)||(aI(t),i&&i.response&&(i.response.data=oI.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Xs=Rl,sG=function(t,r){r=r||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function d(b,P){return Xs.isPlainObject(b)&&Xs.isPlainObject(P)?Xs.merge(b,P):Xs.isPlainObject(P)?Xs.merge({},P):Xs.isArray(P)?P.slice():P}function f(b){Xs.isUndefined(r[b])?Xs.isUndefined(t[b])||(n[b]=d(void 0,t[b])):n[b]=d(t[b],r[b])}Xs.forEach(i,function(P){Xs.isUndefined(r[P])||(n[P]=d(void 0,r[P]))}),Xs.forEach(o,f),Xs.forEach(s,function(P){Xs.isUndefined(r[P])?Xs.isUndefined(t[P])||(n[P]=d(void 0,t[P])):n[P]=d(void 0,r[P])}),Xs.forEach(a,function(P){P in r?n[P]=d(t[P],r[P]):P in t&&(n[P]=d(void 0,t[P]))});var g=i.concat(o).concat(s).concat(a),_=Object.keys(t).concat(Object.keys(r)).filter(function(P){return g.indexOf(P)===-1});return Xs.forEach(_,f),n};const Vie="axios",Gie="0.21.4",qie="Promise based HTTP client for the browser and node.js",Wie="index.js",Xie={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},Yie={type:"git",url:"https://github.com/axios/axios.git"},Hie=["xhr","http","ajax","promise","node"],Zie="Matt Zabriskie",Kie="MIT",Jie={url:"https://github.com/axios/axios/issues"},Qie="https://axios-http.com",eoe={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},toe={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},roe="dist/axios.min.js",noe="dist/axios.min.js",ioe="./index.d.ts",ooe={"follow-redirects":"^1.14.0"},aoe=[{path:"./dist/axios.min.js",threshold:"5kB"}],soe={name:Vie,version:Gie,description:qie,main:Wie,scripts:Xie,repository:Yie,keywords:Hie,author:Zie,license:Kie,bugs:Jie,homepage:Qie,devDependencies:eoe,browser:toe,jsdelivr:roe,unpkg:noe,typings:ioe,dependencies:ooe,bundlesize:aoe};var uG=soe,BR={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){BR[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var z5={},uoe=uG.version.split(".");function lG(e,t){for(var r=t?t.split("."):uoe,n=e.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}BR.transitional=function(t,r,n){var i=r&&lG(r);function o(s,a){return"[Axios v"+uG.version+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,d){if(t===!1)throw new Error(o(a," has been removed in "+r));return i&&!z5[a]&&(z5[a]=!0),t?t(s,a,d):!0}};function loe(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var o=n[i],s=t[o];if(s){var a=e[o],d=a===void 0||s(a,o,e);if(d!==!0)throw new TypeError("option "+o+" must be "+d);continue}if(r!==!0)throw Error("Unknown option "+o)}}var coe={isOlderVersion:lG,assertOptions:loe,validators:BR},cG=Rl,foe=nG,B5=Eie,j5=Uie,UE=sG,fG=coe,wm=fG.validators;function g_(e){this.defaults=e,this.interceptors={request:new B5,response:new B5}}g_.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=UE(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&fG.assertOptions(r,{silentJSONParsing:wm.transitional(wm.boolean,"1.0.0"),forcedJSONParsing:wm.transitional(wm.boolean,"1.0.0"),clarifyTimeoutError:wm.transitional(wm.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(i=i&&b.synchronous,n.unshift(b.fulfilled,b.rejected))});var o=[];this.interceptors.response.forEach(function(b){o.push(b.fulfilled,b.rejected)});var s;if(!i){var a=[j5,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(o),s=Promise.resolve(t);a.length;)s=s.then(a.shift(),a.shift());return s}for(var d=t;n.length;){var f=n.shift(),g=n.shift();try{d=f(d)}catch(_){g(_);break}}try{s=j5(d)}catch(_){return Promise.reject(_)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};g_.prototype.getUri=function(t){return t=UE(this.defaults,t),foe(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};cG.forEach(["delete","get","head","options"],function(t){g_.prototype[t]=function(r,n){return this.request(UE(n||{},{method:t,url:r,data:(n||{}).data}))}});cG.forEach(["post","put","patch"],function(t){g_.prototype[t]=function(r,n,i){return this.request(UE(i||{},{method:t,url:r,data:n}))}});var hoe=g_,sI,U5;function hG(){if(U5)return sI;U5=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,sI=e,sI}var uI,V5;function doe(){if(V5)return uI;V5=1;var e=hG();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var i=this;r(function(s){i.reason||(i.reason=new e(s),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var n,i=new t(function(s){n=s});return{token:i,cancel:n}},uI=t,uI}var lI,G5;function poe(){return G5||(G5=1,lI=function(t){return function(n){return t.apply(null,n)}}),lI}var cI,q5;function moe(){return q5||(q5=1,cI=function(t){return typeof t=="object"&&t.isAxiosError===!0}),cI}var W5=Rl,goe=eG,Dx=hoe,voe=sG,yoe=zR;function dG(e){var t=new Dx(e),r=goe(Dx.prototype.request,t);return W5.extend(r,Dx.prototype,t),W5.extend(r,t),r}var Ac=dG(yoe);Ac.Axios=Dx;Ac.create=function(t){return dG(voe(Ac.defaults,t))};Ac.Cancel=hG();Ac.CancelToken=doe();Ac.isCancel=aG();Ac.all=function(t){return Promise.all(t)};Ac.spread=poe();Ac.isAxiosError=moe();NR.exports=Ac;NR.exports.default=Ac;var _oe=NR.exports,boe=_oe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getNestedObjectValue=e.uuidv4=e.getBase64FromImage=e.getImageFromBase64=e.kebabize=e.kebabToCamel=e.camelToKebab=e.axios=void 0;var t=boe;e.axios=t.default.create({baseURL:"https://api.proximi.fi",timeout:6e4});var r=function(f){return f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};e.camelToKebab=r;var n=function(f){return f.replace(/-([a-z])/g,function(g){return g[1].toUpperCase()})};e.kebabToCamel=n;var i=function(f){var g={};return Object.keys(f).forEach(function(_){typeof f[_]<"u"&&(g[(0,e.camelToKebab)(_)]=f[_])}),g};e.kebabize=i;var o=function(f){return new Promise(function(g,_){var b=new Image;b.src=f,b.onload=function(){return g(b)},b.onerror=function(P){return g(b)}})};e.getImageFromBase64=o;var s=function(f){return new Promise(function(g,_){var b=new FileReader;b.readAsDataURL(f),b.onload=function(){return g(b.result)},b.onerror=function(P){return _(P)}})};e.getBase64FromImage=s;var a=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(f){return(f!==crypto.getRandomValues(new Uint8Array(1))[0]&15>f/4).toString(16)})};e.uuidv4=a;var d=function(f,g){if(g!==""){var _=g.split(".")[0],b=g.slice(_.length+1),P=f[_];if(P!==void 0)return b===""?P:(0,e.getNestedObjectValue)(P,b)}};e.getNestedObjectValue=d})(Tc);(function(e){var t=Pe&&Pe.__awaiter||function(f,g,_,b){function P(L){return L instanceof _?L:new _(function(R){R(L)})}return new(_||(_=Promise))(function(L,R){function $(x){try{T(b.next(x))}catch(N){R(N)}}function F(x){try{T(b.throw(x))}catch(N){R(N)}}function T(x){x.done?L(x.value):P(x.value).then($,F)}T((b=b.apply(f,g||[])).next())})},r=Pe&&Pe.__generator||function(f,g){var _={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},b,P,L,R;return R={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function $(T){return function(x){return F([T,x])}}function F(T){if(b)throw new TypeError("Generator is already executing.");for(;R&&(R=0,T[0]&&(_=0)),_;)try{if(b=1,P&&(L=T[0]&2?P.return:T[0]?P.throw||((L=P.return)&&L.call(P),0):P.next)&&!(L=L.call(P,T[1])).done)return L;switch(P=0,L&&(T=[T[0]&2,L.value]),T[0]){case 0:case 1:L=T;break;case 4:return _.label++,{value:T[1],done:!1};case 5:_.label++,P=T[1],T=[0];continue;case 7:T=_.ops.pop(),_.trys.pop();continue;default:if(L=_.trys,!(L=L.length>0&&L[L.length-1])&&(T[0]===6||T[0]===2)){_=0;continue}if(T[0]===3&&(!L||T[1]>L[0]&&T[1]<L[3])){_.label=T[1];break}if(T[0]===6&&_.label<L[1]){_.label=L[1],L=T;break}if(L&&_.label<L[2]){_.label=L[2],_.ops.push(T);break}L[2]&&_.ops.pop(),_.trys.pop();continue}T=g.call(f,_)}catch(x){T=[6,x],P=0}finally{b=L=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getCurrentUser=e.getUserConfig=e.loginWithToken=e.login=void 0;var n=Tc,i=null,o=function(f,g){return t(void 0,void 0,void 0,function(){var _,b,P;return r(this,function(L){switch(L.label){case 0:if(L.trys.push([0,2,,3]),!f)throw new Error("Please provide your email");if(!g)throw new Error("Please provide your password");return _={email:f,password:g},[4,n.axios.post("core_auth/login",_)];case 1:return b=L.sent(),b.data&&(n.axios.defaults.headers.common.Authorization=b.data.token,i=b),[2,b];case 2:throw P=L.sent(),new Error("Login failed, ".concat(P.message));case 3:return[2]}})})};e.login=o;var s=function(f){return t(void 0,void 0,void 0,function(){var g,_;return r(this,function(b){switch(b.label){case 0:if(b.trys.push([0,2,,3]),!f)throw new Error("Please provide your token");return n.axios.defaults.headers.common.Authorization=f,[4,n.axios.get("core/current_user")];case 1:return g=b.sent(),g.data&&(i=g),[2,g];case 2:throw _=b.sent(),new Error("Login failed, ".concat(_.message));case 3:return[2]}})})};e.loginWithToken=s;var a=function(){return t(void 0,void 0,void 0,function(){var f,g;return r(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,n.axios.get("config")];case 1:return f=_.sent(),[2,f.data];case 2:throw g=_.sent(),new Error("Fetching config failed, ".concat(g.message));case 3:return[2]}})})};e.getUserConfig=a;var d=function(){return t(void 0,void 0,void 0,function(){var f,g,_;return r(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),i?(g=i,[3,3]):[3,1];case 1:return[4,n.axios.get("core/current_user")];case 2:g=b.sent(),b.label=3;case 3:return f=g,[2,f.data];case 4:throw _=b.sent(),new Error("Fetching current user failed, ".concat(_.message));case 5:return[2]}})})};e.getCurrentUser=d,e.default={login:e.login,loginWithToken:e.loginWithToken,getUserConfig:e.getUserConfig,getCurrentUser:e.getCurrentUser}})(DR);var v_={},y_={},Jg={};Object.defineProperty(Jg,"__esModule",{value:!0});var xoe=function(){function e(t){this.id=t.id||(t.properties?t.properties.id:void 0),this.createdAt=t.createdAt,this.updatedAt=t.updatedAt}return Object.defineProperty(e.prototype,"exists",{get:function(){return typeof this.id<"u"},enumerable:!1,configurable:!0}),e}();Jg.default=xoe;var woe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(y_,"__esModule",{value:!0});y_.PlaceModel=void 0;var Eoe=Jg,Soe=function(e){woe(t,e);function t(r){var n=e.call(this,r)||this;return n.name=r.name,n.address=r.address,n.location=r.location?r.location:{lat:60.1669635,lng:24.9217484},n.tags=r.tags,n.remoteId=r.remote_id,n}return Object.defineProperty(t.prototype,"hasLocation",{get:function(){return!isNaN(this.location.lat)&&!isNaN(this.location.lng)},enumerable:!1,configurable:!0}),t}(Eoe.default);y_.PlaceModel=Soe;(function(e){var t=Pe&&Pe.__awaiter||function(a,d,f,g){function _(b){return b instanceof f?b:new f(function(P){P(b)})}return new(f||(f=Promise))(function(b,P){function L(F){try{$(g.next(F))}catch(T){P(T)}}function R(F){try{$(g.throw(F))}catch(T){P(T)}}function $(F){F.done?b(F.value):_(F.value).then(L,R)}$((g=g.apply(a,d||[])).next())})},r=Pe&&Pe.__generator||function(a,d){var f={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},g,_,b,P;return P={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function L($){return function(F){return R([$,F])}}function R($){if(g)throw new TypeError("Generator is already executing.");for(;P&&(P=0,$[0]&&(f=0)),f;)try{if(g=1,_&&(b=$[0]&2?_.return:$[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,$[1])).done)return b;switch(_=0,b&&($=[$[0]&2,b.value]),$[0]){case 0:case 1:b=$;break;case 4:return f.label++,{value:$[1],done:!1};case 5:f.label++,_=$[1],$=[0];continue;case 7:$=f.ops.pop(),f.trys.pop();continue;default:if(b=f.trys,!(b=b.length>0&&b[b.length-1])&&($[0]===6||$[0]===2)){f=0;continue}if($[0]===3&&(!b||$[1]>b[0]&&$[1]<b[3])){f.label=$[1];break}if($[0]===6&&f.label<b[1]){f.label=b[1],b=$;break}if(b&&f.label<b[2]){f.label=b[2],f.ops.push($);break}b[2]&&f.ops.pop(),f.trys.pop();continue}$=d.call(a,f)}catch(F){$=[6,F],_=0}finally{g=b=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getPlaceById=e.getPlaces=void 0;var n=Tc,i=y_,o=function(a,d,f,g,_,b,P){return t(void 0,void 0,void 0,function(){var L,R,$;return r(this,function(F){switch(F.label){case 0:L="",a&&(L+="?limit=".concat(a)),d&&(L+="&skip=".concat(d)),f&&(L+="&order=".concat(f)),g&&(L+="&dir=".concat(g)),_&&(L+="&filterByIndex=".concat(_)),b&&(L+="&q=".concat(b)),P&&(L+="&filter=".concat(b)),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,n.axios.get("core/places".concat(L))];case 2:return R=F.sent(),[2,{data:R.data.map(function(T){return new i.PlaceModel(T)}),total:+R.headers.searchcount}];case 3:throw $=F.sent(),new Error("Retrieving places failed, ".concat($.message));case 4:return[2]}})})};e.getPlaces=o;var s=function(a){return t(void 0,void 0,void 0,function(){var d,f;return r(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,n.axios.get("core/places/".concat(a))];case 1:return d=g.sent(),[2,new i.PlaceModel(d.data)];case 2:throw f=g.sent(),new Error("Retrieving place by id '".concat(a,"' failed, ").concat(f.message));case 3:return[2]}})})};e.getPlaceById=s,e.default={getPlaces:e.getPlaces,getPlaceById:e.getPlaceById}})(v_);var Qg={},__={},Poe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(__,"__esModule",{value:!0});__.FloorModel=void 0;var Aoe=Jg,Coe=function(e){Poe(t,e);function t(r){var n=e.call(this,r)||this;return n.name=r.name,n.placeId=r.place_id,n.placeName=r.place_name,n.floorplanImageUrl=r.floorplan_image_url,n.level=r.level||0,r.anchors&&(n.anchors=[[r.anchors[0].lng,r.anchors[0].lat],[r.anchors[1].lng,r.anchors[1].lat],[r.anchors[3].lng,r.anchors[3].lat],[r.anchors[2].lng,r.anchors[2].lat]]),n.editor=r.editor,n.geopoint=r.geopoint,n.remoteId=r.remote_id,n.metadata=r.metadata,n}return Object.defineProperty(t.prototype,"hasFloorplan",{get:function(){return!!(this.floorplanImageUrl&&this.floorplanImageUrl.length>1&&this.anchors)},enumerable:!1,configurable:!0}),t}(Aoe.default);__.FloorModel=Coe;(function(e){var t=Pe&&Pe.__awaiter||function(a,d,f,g){function _(b){return b instanceof f?b:new f(function(P){P(b)})}return new(f||(f=Promise))(function(b,P){function L(F){try{$(g.next(F))}catch(T){P(T)}}function R(F){try{$(g.throw(F))}catch(T){P(T)}}function $(F){F.done?b(F.value):_(F.value).then(L,R)}$((g=g.apply(a,d||[])).next())})},r=Pe&&Pe.__generator||function(a,d){var f={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},g,_,b,P;return P={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function L($){return function(F){return R([$,F])}}function R($){if(g)throw new TypeError("Generator is already executing.");for(;P&&(P=0,$[0]&&(f=0)),f;)try{if(g=1,_&&(b=$[0]&2?_.return:$[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,$[1])).done)return b;switch(_=0,b&&($=[$[0]&2,b.value]),$[0]){case 0:case 1:b=$;break;case 4:return f.label++,{value:$[1],done:!1};case 5:f.label++,_=$[1],$=[0];continue;case 7:$=f.ops.pop(),f.trys.pop();continue;default:if(b=f.trys,!(b=b.length>0&&b[b.length-1])&&($[0]===6||$[0]===2)){f=0;continue}if($[0]===3&&(!b||$[1]>b[0]&&$[1]<b[3])){f.label=$[1];break}if($[0]===6&&f.label<b[1]){f.label=b[1],b=$;break}if(b&&f.label<b[2]){f.label=b[2],f.ops.push($);break}b[2]&&f.ops.pop(),f.trys.pop();continue}$=d.call(a,f)}catch(F){$=[6,F],_=0}finally{g=b=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getPlaceFloors=e.getFloors=void 0;var n=Tc,i=__,o=function(a,d,f,g,_,b){return t(void 0,void 0,void 0,function(){var P,L,R;return r(this,function($){switch($.label){case 0:P="",a&&(P+="?limit=".concat(a)),d&&(P+="&skip=".concat(d)),f&&(P+="&order=".concat(f)),g&&(P+="&dir=".concat(g)),_&&(P+="&filterByIndex=".concat(_)),b&&(P+="&q=".concat(b)),$.label=1;case 1:return $.trys.push([1,3,,4]),[4,n.axios.get("core/floors".concat(P))];case 2:return L=$.sent(),[2,{data:L.data.map(function(F){return new i.FloorModel(F)}),total:+L.headers.searchcount}];case 3:throw R=$.sent(),new Error("Retrieving floors failed, ".concat(R.message));case 4:return[2]}})})};e.getFloors=o;var s=function(a){return t(void 0,void 0,void 0,function(){var d,f;return r(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,n.axios.get("core/floors?skip=0&limit=1000&filter=place_id:".concat(a))];case 1:return d=g.sent(),[2,d.data.map(function(_){return new i.FloorModel(_)})];case 2:throw f=g.sent(),new Error("Retrieving floors for place '".concat(a,"' failed, ").concat(f.message));case 3:return[2]}})})};e.getPlaceFloors=s,e.default={getFloors:e.getFloors,getPlaceFloors:e.getPlaceFloors}})(Qg);var fI={},pG={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Pe,function(){var r,n,i;function o(a,d){if(!r)r=d;else if(!n)n=d;else{var f="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",g={};r(g),i=d(g),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([f],{type:"text/javascript"})))}}o(["exports"],function(a){function d(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var f=g;function g(p,c){this.x=p,this.y=c}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,c){return this.clone()._rotateAround(p,c)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var c=p.x-this.x,m=p.y-this.y;return c*c+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,c){return Math.atan2(this.x*c-this.y*p,this.x*p+this.y*c)},_matMult:function(p){var c=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=c,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var c=Math.cos(p),m=Math.sin(p),E=m*this.x+c*this.y;return this.x=c*this.x-m*this.y,this.y=E,this},_rotateAround:function(p,c){var m=Math.cos(p),E=Math.sin(p),I=c.y+E*(this.x-c.x)+m*(this.y-c.y);return this.x=c.x+m*(this.x-c.x)-E*(this.y-c.y),this.y=I,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(p){return p instanceof g?p:Array.isArray(p)?new g(p[0],p[1]):p};var _=d(f),b=P;function P(p,c,m,E){this.cx=3*p,this.bx=3*(m-p)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(E-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=p,this.p1y=c,this.p2x=m,this.p2y=E}P.prototype={sampleCurveX:function(p){return((this.ax*p+this.bx)*p+this.cx)*p},sampleCurveY:function(p){return((this.ay*p+this.by)*p+this.cy)*p},sampleCurveDerivativeX:function(p){return(3*this.ax*p+2*this.bx)*p+this.cx},solveCurveX:function(p,c){if(c===void 0&&(c=1e-6),p<0)return 0;if(p>1)return 1;for(var m=p,E=0;E<8;E++){var I=this.sampleCurveX(m)-p;if(Math.abs(I)<c)return m;var k=this.sampleCurveDerivativeX(m);if(Math.abs(k)<1e-6)break;m-=I/k}var D=0,j=1;for(m=p,E=0;E<20&&(I=this.sampleCurveX(m),!(Math.abs(I-p)<c));E++)p>I?D=m:j=m,m=.5*(j-D)+D;return m},solve:function(p,c){return this.sampleCurveY(this.solveCurveX(p,c))}};var L=d(b);function R(p,c,m,E){const I=new L(p,c,m,E);return function(k){return I.solve(k)}}const $=R(.25,.1,.25,1);function F(p,c,m){return Math.min(m,Math.max(c,p))}function T(p,c,m){const E=m-c,I=((p-c)%E+E)%E+c;return I===c?m:I}function x(p,...c){for(const m of c)for(const E in m)p[E]=m[E];return p}let N=1;function B(p,c,m){const E={};for(const I in p)E[I]=c.call(m||this,p[I],I,p);return E}function H(p,c,m){const E={};for(const I in p)c.call(m||this,p[I],I,p)&&(E[I]=p[I]);return E}function Z(p){return Array.isArray(p)?p.map(Z):typeof p=="object"&&p?B(p,Z):p}const Y={};function W(p){Y[p]||(typeof console<"u",Y[p]=!0)}function Q(p,c,m){return(m.y-p.y)*(c.x-p.x)>(c.y-p.y)*(m.x-p.x)}function me(p){let c=0;for(let m,E,I=0,k=p.length,D=k-1;I<k;D=I++)m=p[I],E=p[D],c+=(E.x-m.x)*(m.y+E.y);return c}function ge(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let be=null;function oe(p){if(be==null){const c=p.navigator?p.navigator.userAgent:null;be=!!p.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return be}function Ie(p){return typeof ImageBitmap<"u"&&p instanceof ImageBitmap}const fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let G,K;const re={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(p){const c=requestAnimationFrame(p);return{cancel:()=>cancelAnimationFrame(c)}},getImageData(p,c=0){return this.getImageCanvasContext(p).getImageData(-c,-c,p.width+2*c,p.height+2*c)},getImageCanvasContext(p){const c=window.document.createElement("canvas"),m=c.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return c.width=p.width,c.height=p.height,m.drawImage(p,0,0,p.width,p.height),m},resolveURL:p=>(G||(G=document.createElement("a")),G.href=p,G.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(K==null&&(K=matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}},ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class he extends Error{constructor(c,m,E,I){super(`AJAXError: ${m} (${c}): ${E}`),this.status=c,this.statusText=m,this.url=E,this.body=I}}const ae=ge()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Te=p=>ie.REGISTERED_PROTOCOLS[p.substring(0,p.indexOf("://"))];function Le(p,c){const m=new AbortController,E=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:ae(),signal:m.signal});let I=!1,k=!1;return p.type==="json"&&E.headers.set("Accept","application/json"),k||fetch(E).then(D=>D.ok?(j=>{(p.type==="arrayBuffer"||p.type==="image"?j.arrayBuffer():p.type==="json"?j.json():j.text()).then(q=>{k||(I=!0,c(null,q,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(q=>{k||c(new Error(q.message))})})(D):D.blob().then(j=>c(new he(D.status,D.statusText,p.url,j)))).catch(D=>{D.code!==20&&c(new Error(D.message))}),{cancel:()=>{k=!0,I||m.abort()}}}const Xe=function(p,c){if(/:\/\//.test(p.url)&&!/^https?:|^file:/.test(p.url)){if(ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,c);if(!ge())return(Te(p.url)||Le)(p,c)}if(!(/^file:/.test(m=p.url)||/^file:/.test(ae())&&!/^\w+:/.test(m))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Le(p,c);if(ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,c,void 0,!0)}var m;return function(E,I){const k=new XMLHttpRequest;k.open(E.method||"GET",E.url,!0),E.type!=="arrayBuffer"&&E.type!=="image"||(k.responseType="arraybuffer");for(const D in E.headers)k.setRequestHeader(D,E.headers[D]);return E.type==="json"&&(k.responseType="text",k.setRequestHeader("Accept","application/json")),k.withCredentials=E.credentials==="include",k.onerror=()=>{I(new Error(k.statusText))},k.onload=()=>{if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let D=k.response;if(E.type==="json")try{D=JSON.parse(k.response)}catch(j){return I(j)}I(null,D,k.getResponseHeader("Cache-Control"),k.getResponseHeader("Expires"))}else{const D=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});I(new he(k.status,k.statusText,E.url,D))}},k.send(E.body),{cancel:()=>k.abort()}}(p,c)},$e=function(p,c){return Xe(x(p,{type:"arrayBuffer"}),c)};function at(p){if(!p||p.indexOf("://")<=0||p.indexOf("data:image/")===0||p.indexOf("blob:")===0)return!0;const c=new URL(p),m=window.location;return c.protocol===m.protocol&&c.host===m.host}function _t(p,c,m){m[p]&&m[p].indexOf(c)!==-1||(m[p]=m[p]||[],m[p].push(c))}function Lt(p,c,m){if(m&&m[p]){const E=m[p].indexOf(c);E!==-1&&m[p].splice(E,1)}}class pt{constructor(c,m={}){x(this,m),this.type=c}}class Ot extends pt{constructor(c,m={}){super("error",x({error:c},m))}}class vt{on(c,m){return this._listeners=this._listeners||{},_t(c,m,this._listeners),this}off(c,m){return Lt(c,m,this._listeners),Lt(c,m,this._oneTimeListeners),this}once(c,m){return m?(this._oneTimeListeners=this._oneTimeListeners||{},_t(c,m,this._oneTimeListeners),this):new Promise(E=>this.once(c,E))}fire(c,m){typeof c=="string"&&(c=new pt(c,m||{}));const E=c.type;if(this.listens(E)){c.target=this;const I=this._listeners&&this._listeners[E]?this._listeners[E].slice():[];for(const j of I)j.call(this,c);const k=this._oneTimeListeners&&this._oneTimeListeners[E]?this._oneTimeListeners[E].slice():[];for(const j of k)Lt(E,j,this._oneTimeListeners),j.call(this,c);const D=this._eventedParent;D&&(x(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(c))}else c instanceof Ot;return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,m){return this._eventedParent=c,this._eventedParentData=m,this}}var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Zt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function rr(p,c){const m={};for(const E in p)E!=="ref"&&(m[E]=p[E]);return Zt.forEach(E=>{E in c&&(m[E]=c[E])}),m}function Gt(p,c){if(Array.isArray(p)){if(!Array.isArray(c)||p.length!==c.length)return!1;for(let m=0;m<p.length;m++)if(!Gt(p[m],c[m]))return!1;return!0}if(typeof p=="object"&&p!==null&&c!==null){if(typeof c!="object"||Object.keys(p).length!==Object.keys(c).length)return!1;for(const m in p)if(!Gt(p[m],c[m]))return!1;return!0}return p===c}const br={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function un(p,c,m){m.push({command:br.addSource,args:[p,c[p]]})}function ot(p,c,m){c.push({command:br.removeSource,args:[p]}),m[p]=!0}function Oe(p,c,m,E){ot(p,m,E),un(p,c,m)}function ve(p,c,m){let E;for(E in p[m])if(Object.prototype.hasOwnProperty.call(p[m],E)&&E!=="data"&&!Gt(p[m][E],c[m][E]))return!1;for(E in c[m])if(Object.prototype.hasOwnProperty.call(c[m],E)&&E!=="data"&&!Gt(p[m][E],c[m][E]))return!1;return!0}function xe(p,c,m,E,I,k){let D;for(D in c=c||{},p=p||{})Object.prototype.hasOwnProperty.call(p,D)&&(Gt(p[D],c[D])||m.push({command:k,args:[E,D,c[D],I]}));for(D in c)Object.prototype.hasOwnProperty.call(c,D)&&!Object.prototype.hasOwnProperty.call(p,D)&&(Gt(p[D],c[D])||m.push({command:k,args:[E,D,c[D],I]}))}function je(p){return p.id}function Ke(p,c){return p[c.id]=c,p}class qe{constructor(c,m,E,I){this.message=(c?`${c}: `:"")+E,I&&(this.identifier=I),m!=null&&m.__line__&&(this.line=m.__line__)}}function mt(p,...c){for(const m of c)for(const E in m)p[E]=m[E];return p}class rt extends Error{constructor(c,m){super(m),this.message=m,this.key=c}}class Ht{constructor(c,m=[]){this.parent=c,this.bindings={};for(const[E,I]of m)this.bindings[E]=I}concat(c){return new Ht(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const lr={kind:"null"},ut={kind:"number"},kt={kind:"string"},$t={kind:"boolean"},Lr={kind:"color"},Rr={kind:"object"},Nt={kind:"value"},yn={kind:"collator"},_n={kind:"formatted"},ti={kind:"padding"},dn={kind:"resolvedImage"},Kr={kind:"variableAnchorOffsetCollection"};function Xn(p,c){return{kind:"array",itemType:p,N:c}}function $r(p){if(p.kind==="array"){const c=$r(p.itemType);return typeof p.N=="number"?`array<${c}, ${p.N}>`:p.itemType.kind==="value"?"array":`array<${c}>`}return p.kind}const Pt=[lr,ut,kt,$t,Lr,_n,Rr,Xn(Nt),ti,dn,Kr];function Ei(p,c){if(c.kind==="error")return null;if(p.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Ei(p.itemType,c.itemType))&&(typeof p.N!="number"||p.N===c.N))return null}else{if(p.kind===c.kind)return null;if(p.kind==="value"){for(const m of Pt)if(!Ei(m,c))return null}}return`Expected ${$r(p)} but found ${$r(c)} instead.`}function Ne(p,c){return c.some(m=>m.kind===p.kind)}function ce(p,c){return c.some(m=>m==="null"?p===null:m==="array"?Array.isArray(p):m==="object"?p&&!Array.isArray(p)&&typeof p=="object":m===typeof p)}function ye(p,c){return p.kind==="array"&&c.kind==="array"?p.itemType.kind===c.itemType.kind&&typeof p.N=="number":p.kind===c.kind}const Me=.96422,ze=.82521,Ge=4/29,nt=6/29,He=3*nt*nt,Ye=nt*nt*nt,tt=Math.PI/180,yt=180/Math.PI;function bt(p){return(p%=360)<0&&(p+=360),p}function gt([p,c,m,E]){let I,k;const D=dr((.2225045*(p=Rt(p))+.7168786*(c=Rt(c))+.0606169*(m=Rt(m)))/1);p===c&&c===m?I=k=D:(I=dr((.4360747*p+.3850649*c+.1430804*m)/Me),k=dr((.0139322*p+.0971045*c+.7141733*m)/ze));const j=116*D-16;return[j<0?0:j,500*(I-D),200*(D-k),E]}function Rt(p){return p<=.04045?p/12.92:Math.pow((p+.055)/1.055,2.4)}function dr(p){return p>Ye?Math.pow(p,1/3):p/He+Ge}function qt([p,c,m,E]){let I=(p+16)/116,k=isNaN(c)?I:I+c/500,D=isNaN(m)?I:I-m/200;return I=1*er(I),k=Me*er(k),D=ze*er(D),[Kt(3.1338561*k-1.6168667*I-.4906146*D),Kt(-.9787684*k+1.9161415*I+.033454*D),Kt(.0719453*k-.2289914*I+1.4052427*D),E]}function Kt(p){return(p=p<=.00304?12.92*p:1.055*Math.pow(p,1/2.4)-.055)<0?0:p>1?1:p}function er(p){return p>nt?p*p*p:He*(p-Ge)}function Yr(p){return parseInt(p.padEnd(2,p),16)/255}function Hr(p,c){return Wr(c?p/100:p,0,1)}function Wr(p,c,m){return Math.min(Math.max(c,p),m)}function Dr(p){return!p.some(Number.isNaN)}const go={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Wt{constructor(c,m,E,I=1,k=!0){this.r=c,this.g=m,this.b=E,this.a=I,k||(this.r*=I,this.g*=I,this.b*=I,I||this.overwriteGetter("rgb",[c,m,E,I]))}static parse(c){if(c instanceof Wt)return c;if(typeof c!="string")return;const m=function(E){if((E=E.toLowerCase().trim())==="transparent")return[0,0,0,0];const I=go[E];if(I){const[D,j,q]=I;return[D/255,j/255,q/255,1]}if(E.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(E)){const D=E.length<6?1:2;let j=1;return[Yr(E.slice(j,j+=D)),Yr(E.slice(j,j+=D)),Yr(E.slice(j,j+=D)),Yr(E.slice(j,j+D)||"ff")]}if(E.startsWith("rgb")){const D=E.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[j,q,te,ue,de,_e,Se,Ce,Fe,Ue,We,st]=D,Je=[ue||" ",Se||" ",Ue].join("");if(Je==="  "||Je==="  /"||Je===",,"||Je===",,,"){const lt=[te,_e,Fe].join(""),ft=lt==="%%%"?100:lt===""?255:0;if(ft){const Et=[Wr(+q/ft,0,1),Wr(+de/ft,0,1),Wr(+Ce/ft,0,1),We?Hr(+We,st):1];if(Dr(Et))return Et}}return}}const k=E.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[D,j,q,te,ue,de,_e,Se,Ce]=k,Fe=[q||" ",ue||" ",_e].join("");if(Fe==="  "||Fe==="  /"||Fe===",,"||Fe===",,,"){const Ue=[+j,Wr(+te,0,100),Wr(+de,0,100),Se?Hr(+Se,Ce):1];if(Dr(Ue))return function([We,st,Je,lt]){function ft(Et){const Yt=(Et+We/30)%12,mr=st*Math.min(Je,1-Je);return Je-mr*Math.max(-1,Math.min(Yt-3,9-Yt,1))}return We=bt(We),st/=100,Je/=100,[ft(0),ft(8),ft(4),lt]}(Ue)}}}(c);return m?new Wt(...m,!1):void 0}get rgb(){const{r:c,g:m,b:E,a:I}=this,k=I||1/0;return this.overwriteGetter("rgb",[c/k,m/k,E/k,I])}get hcl(){return this.overwriteGetter("hcl",function(c){const[m,E,I,k]=gt(c),D=Math.sqrt(E*E+I*I);return[Math.round(1e4*D)?bt(Math.atan2(I,E)*yt):NaN,D,m,k]}(this.rgb))}get lab(){return this.overwriteGetter("lab",gt(this.rgb))}overwriteGetter(c,m){return Object.defineProperty(this,c,{value:m}),m}toString(){const[c,m,E,I]=this.rgb;return`rgba(${[c,m,E].map(k=>Math.round(255*k)).join(",")},${I})`}}Wt.black=new Wt(0,0,0,1),Wt.white=new Wt(1,1,1,1),Wt.transparent=new Wt(0,0,0,0),Wt.red=new Wt(1,0,0,1);class Vr{constructor(c,m,E){this.sensitivity=c?m?"variant":"case":m?"accent":"base",this.locale=E,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,m){return this.collator.compare(c,m)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class xt{constructor(c,m,E,I,k){this.text=c,this.image=m,this.scale=E,this.fontStack=I,this.textColor=k}}class Jr{constructor(c){this.sections=c}static fromString(c){return new Jr([new xt(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof Jr?c:Jr.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class Mi{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Mi)return c;if(typeof c=="number")return new Mi([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const m of c)if(typeof m!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new Mi(c)}}toString(){return JSON.stringify(this.values)}}const yi=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Si{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Si)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let m=0;m<c.length;m+=2){const E=c[m],I=c[m+1];if(typeof E!="string"||!yi.has(E)||!Array.isArray(I)||I.length!==2||typeof I[0]!="number"||typeof I[1]!="number")return}return new Si(c)}}toString(){return JSON.stringify(this.values)}}class Pi{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new Pi({name:c,available:!1}):null}}function da(p,c,m,E){return typeof p=="number"&&p>=0&&p<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof m=="number"&&m>=0&&m<=255?E===void 0||typeof E=="number"&&E>=0&&E<=1?null:`Invalid rgba value [${[p,c,m,E].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof E=="number"?[p,c,m,E]:[p,c,m]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function no(p){if(p===null||typeof p=="string"||typeof p=="boolean"||typeof p=="number"||p instanceof Wt||p instanceof Vr||p instanceof Jr||p instanceof Mi||p instanceof Si||p instanceof Pi)return!0;if(Array.isArray(p)){for(const c of p)if(!no(c))return!1;return!0}if(typeof p=="object"){for(const c in p)if(!no(p[c]))return!1;return!0}return!1}function di(p){if(p===null)return lr;if(typeof p=="string")return kt;if(typeof p=="boolean")return $t;if(typeof p=="number")return ut;if(p instanceof Wt)return Lr;if(p instanceof Vr)return yn;if(p instanceof Jr)return _n;if(p instanceof Mi)return ti;if(p instanceof Si)return Kr;if(p instanceof Pi)return dn;if(Array.isArray(p)){const c=p.length;let m;for(const E of p){const I=di(E);if(m){if(m===I)continue;m=Nt;break}m=I}return Xn(m||Nt,c)}return Rr}function Ko(p){const c=typeof p;return p===null?"":c==="string"||c==="number"||c==="boolean"?String(p):p instanceof Wt||p instanceof Jr||p instanceof Mi||p instanceof Si||p instanceof Pi?p.toString():JSON.stringify(p)}class Ea{constructor(c,m){this.type=c,this.value=m}static parse(c,m){if(c.length!==2)return m.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!no(c[1]))return m.error("invalid value");const E=c[1];let I=di(E);const k=m.expectedType;return I.kind!=="array"||I.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(I=k),new Ea(I,E)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class oi{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const Yn={string:kt,number:ut,boolean:$t,object:Rr};class io{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");let E,I=1;const k=c[0];if(k==="array"){let j,q;if(c.length>2){const te=c[1];if(typeof te!="string"||!(te in Yn)||te==="object")return m.error('The item type argument of "array" must be one of string, number, boolean',1);j=Yn[te],I++}else j=Nt;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return m.error('The length argument to "array" must be a positive integer literal',2);q=c[2],I++}E=Xn(j,q)}else{if(!Yn[k])throw new Error(`Types doesn't contain name = ${k}`);E=Yn[k]}const D=[];for(;I<c.length;I++){const j=m.parse(c[I],I,Nt);if(!j)return null;D.push(j)}return new io(E,D)}evaluate(c){for(let m=0;m<this.args.length;m++){const E=this.args[m].evaluate(c);if(!Ei(this.type,di(E)))return E;if(m===this.args.length-1)throw new oi(`Expected value to be of type ${$r(this.type)}, but found ${$r(di(E))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Uo={"to-boolean":$t,"to-color":Lr,"to-number":ut,"to-string":kt};class pa{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const E=c[0];if(!Uo[E])throw new Error(`Can't parse ${E} as it is not part of the known types`);if((E==="to-boolean"||E==="to-string")&&c.length!==2)return m.error("Expected one argument.");const I=Uo[E],k=[];for(let D=1;D<c.length;D++){const j=m.parse(c[D],D,Nt);if(!j)return null;k.push(j)}return new pa(I,k)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let m,E;for(const I of this.args){if(m=I.evaluate(c),E=null,m instanceof Wt)return m;if(typeof m=="string"){const k=c.parseColor(m);if(k)return k}else if(Array.isArray(m)&&(E=m.length<3||m.length>4?`Invalid rbga value ${JSON.stringify(m)}: expected an array containing either three or four numeric values.`:da(m[0],m[1],m[2],m[3]),!E))return new Wt(m[0]/255,m[1]/255,m[2]/255,m[3])}throw new oi(E||`Could not parse color from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"padding":{let m;for(const E of this.args){m=E.evaluate(c);const I=Mi.parse(m);if(I)return I}throw new oi(`Could not parse padding from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"variableAnchorOffsetCollection":{let m;for(const E of this.args){m=E.evaluate(c);const I=Si.parse(m);if(I)return I}throw new oi(`Could not parse variableAnchorOffsetCollection from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"number":{let m=null;for(const E of this.args){if(m=E.evaluate(c),m===null)return 0;const I=Number(m);if(!isNaN(I))return I}throw new oi(`Could not convert ${JSON.stringify(m)} to number.`)}case"formatted":return Jr.fromString(Ko(this.args[0].evaluate(c)));case"resolvedImage":return Pi.fromString(Ko(this.args[0].evaluate(c)));default:return Ko(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Ou=["Unknown","Point","LineString","Polygon"];class or{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ou[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let m=this._parseColorCache[c];return m||(m=this._parseColorCache[c]=Wt.parse(c)),m}}class Tu{constructor(c,m,E=[],I,k=new Ht,D=[]){this.registry=c,this.path=E,this.key=E.map(j=>`[${j}]`).join(""),this.scope=k,this.errors=D,this.expectedType=I,this._isConstant=m}parse(c,m,E,I,k={}){return m?this.concat(m,E,I)._parse(c,k):this._parse(c,k)}_parse(c,m){function E(I,k,D){return D==="assert"?new io(k,[I]):D==="coerce"?new pa(k,[I]):I}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const I=c[0];if(typeof I!="string")return this.error(`Expression name must be a string, but found ${typeof I} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[I];if(k){let D=k.parse(c,this);if(!D)return null;if(this.expectedType){const j=this.expectedType,q=D.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||q.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||q.kind!=="value"&&q.kind!=="string")if(j.kind!=="padding"||q.kind!=="value"&&q.kind!=="number"&&q.kind!=="array")if(j.kind!=="variableAnchorOffsetCollection"||q.kind!=="value"&&q.kind!=="array"){if(this.checkSubtype(j,q))return null}else D=E(D,j,m.typeAnnotation||"coerce");else D=E(D,j,m.typeAnnotation||"coerce");else D=E(D,j,m.typeAnnotation||"coerce");else D=E(D,j,m.typeAnnotation||"assert")}if(!(D instanceof Ea)&&D.type.kind!=="resolvedImage"&&this._isConstant(D)){const j=new or;try{D=new Ea(D.type,D.evaluate(j))}catch(q){return this.error(q.message),null}}return D}return this.error(`Unknown expression "${I}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,m,E){const I=typeof c=="number"?this.path.concat(c):this.path,k=E?this.scope.concat(E):this.scope;return new Tu(this.registry,this._isConstant,I,m||null,k,this.errors)}error(c,...m){const E=`${this.key}${m.map(I=>`[${I}]`).join("")}`;this.errors.push(new rt(E,c))}checkSubtype(c,m){const E=Ei(c,m);return E&&this.error(E),E}}class oo{constructor(c,m,E){this.type=yn,this.locale=E,this.caseSensitive=c,this.diacriticSensitive=m}static parse(c,m){if(c.length!==2)return m.error("Expected one argument.");const E=c[1];if(typeof E!="object"||Array.isArray(E))return m.error("Collator options argument must be an object.");const I=m.parse(E["case-sensitive"]!==void 0&&E["case-sensitive"],1,$t);if(!I)return null;const k=m.parse(E["diacritic-sensitive"]!==void 0&&E["diacritic-sensitive"],1,$t);if(!k)return null;let D=null;return E.locale&&(D=m.parse(E.locale,1,kt),!D)?null:new oo(I,k,D)}evaluate(c){return new Vr(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}const Ga=8192;function zr(p,c){p[0]=Math.min(p[0],c[0]),p[1]=Math.min(p[1],c[1]),p[2]=Math.max(p[2],c[0]),p[3]=Math.max(p[3],c[1])}function Mu(p,c){return!(p[0]<=c[0]||p[2]>=c[2]||p[1]<=c[1]||p[3]>=c[3])}function Ef(p,c){const m=(180+p[0])/360,E=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p[1]*Math.PI/360)))/360,I=Math.pow(2,c.z);return[Math.round(m*I*Ga),Math.round(E*I*Ga)]}function el(p,c,m){const E=p[0]-c[0],I=p[1]-c[1],k=p[0]-m[0],D=p[1]-m[1];return E*D-k*I==0&&E*k<=0&&I*D<=0}function vo(p,c){let m=!1;for(let D=0,j=c.length;D<j;D++){const q=c[D];for(let te=0,ue=q.length;te<ue-1;te++){if(el(p,q[te],q[te+1]))return!1;(I=q[te])[1]>(E=p)[1]!=(k=q[te+1])[1]>E[1]&&E[0]<(k[0]-I[0])*(E[1]-I[1])/(k[1]-I[1])+I[0]&&(m=!m)}}var E,I,k;return m}function Sa(p,c){for(let m=0;m<c.length;m++)if(vo(p,c[m]))return!0;return!1}function tl(p,c,m,E){const I=E[0]-m[0],k=E[1]-m[1],D=(p[0]-m[0])*k-I*(p[1]-m[1]),j=(c[0]-m[0])*k-I*(c[1]-m[1]);return D>0&&j<0||D<0&&j>0}function Dc(p,c,m){for(const te of m)for(let ue=0;ue<te.length-1;++ue)if((j=[(D=te[ue+1])[0]-(k=te[ue])[0],D[1]-k[1]])[0]*(q=[(I=c)[0]-(E=p)[0],I[1]-E[1]])[1]-j[1]*q[0]!=0&&tl(E,I,k,D)&&tl(k,D,E,I))return!0;var E,I,k,D,j,q;return!1}function It(p,c){for(let m=0;m<p.length;++m)if(!vo(p[m],c))return!1;for(let m=0;m<p.length-1;++m)if(Dc(p[m],p[m+1],c))return!1;return!0}function rl(p,c){for(let m=0;m<c.length;m++)if(It(p,c[m]))return!0;return!1}function Ao(p,c,m){const E=[];for(let I=0;I<p.length;I++){const k=[];for(let D=0;D<p[I].length;D++){const j=Ef(p[I][D],m);zr(c,j),k.push(j)}E.push(k)}return E}function Pa(p,c,m){const E=[];for(let I=0;I<p.length;I++){const k=Ao(p[I],c,m);E.push(k)}return E}function nl(p,c,m,E){if(p[0]<m[0]||p[0]>m[2]){const I=.5*E;let k=p[0]-m[0]>I?-E:m[0]-p[0]>I?E:0;k===0&&(k=p[0]-m[2]>I?-E:m[2]-p[0]>I?E:0),p[0]+=k}zr(c,p)}function Ai(p,c,m,E){const I=Math.pow(2,E.z)*Ga,k=[E.x*Ga,E.y*Ga],D=[];for(const j of p)for(const q of j){const te=[q.x+k[0],q.y+k[1]];nl(te,c,m,I),D.push(te)}return D}function gn(p,c,m,E){const I=Math.pow(2,E.z)*Ga,k=[E.x*Ga,E.y*Ga],D=[];for(const q of p){const te=[];for(const ue of q){const de=[ue.x+k[0],ue.y+k[1]];zr(c,de),te.push(de)}D.push(te)}if(c[2]-c[0]<=I/2){(j=c)[0]=j[1]=1/0,j[2]=j[3]=-1/0;for(const q of D)for(const te of q)nl(te,c,m,I)}var j;return D}class Qr{constructor(c,m){this.type=$t,this.geojson=c,this.geometries=m}static parse(c,m){if(c.length!==2)return m.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(no(c[1])){const E=c[1];if(E.type==="FeatureCollection")for(let I=0;I<E.features.length;++I){const k=E.features[I].geometry.type;if(k==="Polygon"||k==="MultiPolygon")return new Qr(E,E.features[I].geometry)}else if(E.type==="Feature"){const I=E.geometry.type;if(I==="Polygon"||I==="MultiPolygon")return new Qr(E,E.geometry)}else if(E.type==="Polygon"||E.type==="MultiPolygon")return new Qr(E,E)}return m.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(m,E){const I=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],D=m.canonicalID();if(E.type==="Polygon"){const j=Ao(E.coordinates,k,D),q=Ai(m.geometry(),I,k,D);if(!Mu(I,k))return!1;for(const te of q)if(!vo(te,j))return!1}if(E.type==="MultiPolygon"){const j=Pa(E.coordinates,k,D),q=Ai(m.geometry(),I,k,D);if(!Mu(I,k))return!1;for(const te of q)if(!Sa(te,j))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(m,E){const I=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],D=m.canonicalID();if(E.type==="Polygon"){const j=Ao(E.coordinates,k,D),q=gn(m.geometry(),I,k,D);if(!Mu(I,k))return!1;for(const te of q)if(!It(te,j))return!1}if(E.type==="MultiPolygon"){const j=Pa(E.coordinates,k,D),q=gn(m.geometry(),I,k,D);if(!Mu(I,k))return!1;for(const te of q)if(!rl(te,j))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Hn{constructor(c,m){this.type=m.type,this.name=c,this.boundExpression=m}static parse(c,m){if(c.length!==2||typeof c[1]!="string")return m.error("'var' expression requires exactly one string literal argument.");const E=c[1];return m.scope.has(E)?new Hn(E,m.scope.get(E)):m.error(`Unknown variable "${E}". Make sure "${E}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class Jo{constructor(c,m,E,I){this.name=c,this.type=m,this._evaluate=E,this.args=I}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,m){const E=c[0],I=Jo.definitions[E];if(!I)return m.error(`Unknown expression "${E}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(I)?I[0]:I.type,D=Array.isArray(I)?[[I[1],I[2]]]:I.overloads,j=D.filter(([te])=>!Array.isArray(te)||te.length===c.length-1);let q=null;for(const[te,ue]of j){q=new Tu(m.registry,il,m.path,null,m.scope);const de=[];let _e=!1;for(let Se=1;Se<c.length;Se++){const Ce=c[Se],Fe=Array.isArray(te)?te[Se-1]:te.type,Ue=q.parse(Ce,1+de.length,Fe);if(!Ue){_e=!0;break}de.push(Ue)}if(!_e)if(Array.isArray(te)&&te.length!==de.length)q.error(`Expected ${te.length} arguments, but found ${de.length} instead.`);else{for(let Se=0;Se<de.length;Se++){const Ce=Array.isArray(te)?te[Se]:te.type,Fe=de[Se];q.concat(Se+1).checkSubtype(Ce,Fe.type)}if(q.errors.length===0)return new Jo(E,k,ue,de)}}if(j.length===1)m.errors.push(...q.errors);else{const te=(j.length?j:D).map(([de])=>{return _e=de,Array.isArray(_e)?`(${_e.map($r).join(", ")})`:`(${$r(_e.type)}...)`;var _e}).join(" | "),ue=[];for(let de=1;de<c.length;de++){const _e=m.parse(c[de],1+ue.length);if(!_e)return null;ue.push($r(_e.type))}m.error(`Expected arguments of type ${te}, but found (${ue.join(", ")}) instead.`)}return null}static register(c,m){Jo.definitions=m;for(const E in m)c[E]=Jo}}function il(p){if(p instanceof Hn)return il(p.boundExpression);if(p instanceof Jo&&p.name==="error"||p instanceof oo||p instanceof Qr)return!1;const c=p instanceof pa||p instanceof io;let m=!0;return p.eachChild(E=>{m=c?m&&il(E):m&&E instanceof Ea}),!!m&&Gi(p)&&yo(p,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Gi(p){if(p instanceof Jo&&(p.name==="get"&&p.args.length===1||p.name==="feature-state"||p.name==="has"&&p.args.length===1||p.name==="properties"||p.name==="geometry-type"||p.name==="id"||/^filter-/.test(p.name))||p instanceof Qr)return!1;let c=!0;return p.eachChild(m=>{c&&!Gi(m)&&(c=!1)}),c}function As(p){if(p instanceof Jo&&p.name==="feature-state")return!1;let c=!0;return p.eachChild(m=>{c&&!As(m)&&(c=!1)}),c}function yo(p,c){if(p instanceof Jo&&c.indexOf(p.name)>=0)return!1;let m=!0;return p.eachChild(E=>{m&&!yo(E,c)&&(m=!1)}),m}function on(p,c){const m=p.length-1;let E,I,k=0,D=m,j=0;for(;k<=D;)if(j=Math.floor((k+D)/2),E=p[j],I=p[j+1],E<=c){if(j===m||c<I)return j;k=j+1}else{if(!(E>c))throw new oi("Input is not a number.");D=j-1}return 0}class cs{constructor(c,m,E){this.type=c,this.input=m,this.labels=[],this.outputs=[];for(const[I,k]of E)this.labels.push(I),this.outputs.push(k)}static parse(c,m){if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");const E=m.parse(c[1],1,ut);if(!E)return null;const I=[];let k=null;m.expectedType&&m.expectedType.kind!=="value"&&(k=m.expectedType);for(let D=1;D<c.length;D+=2){const j=D===1?-1/0:c[D],q=c[D+1],te=D,ue=D+1;if(typeof j!="number")return m.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',te);if(I.length&&I[I.length-1][0]>=j)return m.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',te);const de=m.parse(q,ue,k);if(!de)return null;k=k||de.type,I.push([j,de])}return new cs(k,E,I)}evaluate(c){const m=this.labels,E=this.outputs;if(m.length===1)return E[0].evaluate(c);const I=this.input.evaluate(c);if(I<=m[0])return E[0].evaluate(c);const k=m.length;return I>=m[k-1]?E[k-1].evaluate(c):E[on(m,I)].evaluate(c)}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function ai(p,c,m){return p+m*(c-p)}function Lu(p,c,m){return p.map((E,I)=>ai(E,c[I],m))}const qi={number:ai,color:function(p,c,m,E="rgb"){switch(E){case"rgb":{const[I,k,D,j]=Lu(p.rgb,c.rgb,m);return new Wt(I,k,D,j,!1)}case"hcl":{const[I,k,D,j]=p.hcl,[q,te,ue,de]=c.hcl;let _e,Se;if(isNaN(I)||isNaN(q))isNaN(I)?isNaN(q)?_e=NaN:(_e=q,D!==1&&D!==0||(Se=te)):(_e=I,ue!==1&&ue!==0||(Se=k));else{let st=q-I;q>I&&st>180?st-=360:q<I&&I-q>180&&(st+=360),_e=I+m*st}const[Ce,Fe,Ue,We]=function([st,Je,lt,ft]){return st=isNaN(st)?0:st*tt,qt([lt,Math.cos(st)*Je,Math.sin(st)*Je,ft])}([_e,Se??ai(k,te,m),ai(D,ue,m),ai(j,de,m)]);return new Wt(Ce,Fe,Ue,We,!1)}case"lab":{const[I,k,D,j]=qt(Lu(p.lab,c.lab,m));return new Wt(I,k,D,j,!1)}}},array:Lu,padding:function(p,c,m){return new Mi(Lu(p.values,c.values,m))},variableAnchorOffsetCollection:function(p,c,m){const E=p.values,I=c.values;if(E.length!==I.length)throw new oi(`Cannot interpolate values of different length. from: ${p.toString()}, to: ${c.toString()}`);const k=[];for(let D=0;D<E.length;D+=2){if(E[D]!==I[D])throw new oi(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${E[D]}, to[${D}]: ${I[D]}`);k.push(E[D]);const[j,q]=E[D+1],[te,ue]=I[D+1];k.push([ai(j,te,m),ai(q,ue,m)])}return new Si(k)}};class rn{constructor(c,m,E,I,k){this.type=c,this.operator=m,this.interpolation=E,this.input=I,this.labels=[],this.outputs=[];for(const[D,j]of k)this.labels.push(D),this.outputs.push(j)}static interpolationFactor(c,m,E,I){let k=0;if(c.name==="exponential")k=Wi(m,c.base,E,I);else if(c.name==="linear")k=Wi(m,1,E,I);else if(c.name==="cubic-bezier"){const D=c.controlPoints;k=new L(D[0],D[1],D[2],D[3]).solve(Wi(m,1,E,I))}return k}static parse(c,m){let[E,I,k,...D]=c;if(!Array.isArray(I)||I.length===0)return m.error("Expected an interpolation type expression.",1);if(I[0]==="linear")I={name:"linear"};else if(I[0]==="exponential"){const te=I[1];if(typeof te!="number")return m.error("Exponential interpolation requires a numeric base.",1,1);I={name:"exponential",base:te}}else{if(I[0]!=="cubic-bezier")return m.error(`Unknown interpolation type ${String(I[0])}`,1,0);{const te=I.slice(1);if(te.length!==4||te.some(ue=>typeof ue!="number"||ue<0||ue>1))return m.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);I={name:"cubic-bezier",controlPoints:te}}}if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");if(k=m.parse(k,2,ut),!k)return null;const j=[];let q=null;E==="interpolate-hcl"||E==="interpolate-lab"?q=Lr:m.expectedType&&m.expectedType.kind!=="value"&&(q=m.expectedType);for(let te=0;te<D.length;te+=2){const ue=D[te],de=D[te+1],_e=te+3,Se=te+4;if(typeof ue!="number")return m.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(j.length&&j[j.length-1][0]>=ue)return m.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const Ce=m.parse(de,Se,q);if(!Ce)return null;q=q||Ce.type,j.push([ue,Ce])}return ye(q,ut)||ye(q,Lr)||ye(q,ti)||ye(q,Kr)||ye(q,Xn(ut))?new rn(q,E,I,k,j):m.error(`Type ${$r(q)} is not interpolatable.`)}evaluate(c){const m=this.labels,E=this.outputs;if(m.length===1)return E[0].evaluate(c);const I=this.input.evaluate(c);if(I<=m[0])return E[0].evaluate(c);const k=m.length;if(I>=m[k-1])return E[k-1].evaluate(c);const D=on(m,I),j=rn.interpolationFactor(this.interpolation,I,m[D],m[D+1]),q=E[D].evaluate(c),te=E[D+1].evaluate(c);switch(this.operator){case"interpolate":return qi[this.type.kind](q,te,j);case"interpolate-hcl":return qi.color(q,te,j,"hcl");case"interpolate-lab":return qi.color(q,te,j,"lab")}}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Wi(p,c,m,E){const I=E-m,k=p-m;return I===0?0:c===1?k/I:(Math.pow(c,k)-1)/(Math.pow(c,I)-1)}class qa{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expectected at least one argument.");let E=null;const I=m.expectedType;I&&I.kind!=="value"&&(E=I);const k=[];for(const j of c.slice(1)){const q=m.parse(j,1+k.length,E,void 0,{typeAnnotation:"omit"});if(!q)return null;E=E||q.type,k.push(q)}if(!E)throw new Error("No output type");const D=I&&k.some(j=>Ei(I,j.type));return new qa(D?Nt:E,k)}evaluate(c){let m,E=null,I=0;for(const k of this.args)if(I++,E=k.evaluate(c),E&&E instanceof Pi&&!E.available&&(m||(m=E.name),E=null,I===this.args.length&&(E=m)),E!==null)break;return E}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}class Fi{constructor(c,m){this.type=m.type,this.bindings=[].concat(c),this.result=m}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const m of this.bindings)c(m[1]);c(this.result)}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const E=[];for(let k=1;k<c.length-1;k+=2){const D=c[k];if(typeof D!="string")return m.error(`Expected string, but found ${typeof D} instead.`,k);if(/[^a-zA-Z0-9_]/.test(D))return m.error("Variable names must contain only alphanumeric characters or '_'.",k);const j=m.parse(c[k+1],k+1);if(!j)return null;E.push([D,j])}const I=m.parse(c[c.length-1],c.length-1,m.expectedType,E);return I?new Fi(E,I):null}outputDefined(){return this.result.outputDefined()}}class Co{constructor(c,m,E){this.type=c,this.index=m,this.input=E}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const E=m.parse(c[1],1,ut),I=m.parse(c[2],2,Xn(m.expectedType||Nt));return E&&I?new Co(I.type.itemType,E,I):null}evaluate(c){const m=this.index.evaluate(c),E=this.input.evaluate(c);if(m<0)throw new oi(`Array index out of bounds: ${m} < 0.`);if(m>=E.length)throw new oi(`Array index out of bounds: ${m} > ${E.length-1}.`);if(m!==Math.floor(m))throw new oi(`Array index must be an integer, but found ${m} instead.`);return E[m]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class Zr{constructor(c,m){this.type=$t,this.needle=c,this.haystack=m}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const E=m.parse(c[1],1,Nt),I=m.parse(c[2],2,Nt);return E&&I?Ne(E.type,[$t,kt,ut,lr,Nt])?new Zr(E,I):m.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(E.type)} instead`):null}evaluate(c){const m=this.needle.evaluate(c),E=this.haystack.evaluate(c);if(!E)return!1;if(!ce(m,["boolean","string","number","null"]))throw new oi(`Expected first argument to be of type boolean, string, number or null, but found ${$r(di(m))} instead.`);if(!ce(E,["string","array"]))throw new oi(`Expected second argument to be of type array or string, but found ${$r(di(E))} instead.`);return E.indexOf(m)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Wa{constructor(c,m,E){this.type=ut,this.needle=c,this.haystack=m,this.fromIndex=E}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const E=m.parse(c[1],1,Nt),I=m.parse(c[2],2,Nt);if(!E||!I)return null;if(!Ne(E.type,[$t,kt,ut,lr,Nt]))return m.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(E.type)} instead`);if(c.length===4){const k=m.parse(c[3],3,ut);return k?new Wa(E,I,k):null}return new Wa(E,I)}evaluate(c){const m=this.needle.evaluate(c),E=this.haystack.evaluate(c);if(!ce(m,["boolean","string","number","null"]))throw new oi(`Expected first argument to be of type boolean, string, number or null, but found ${$r(di(m))} instead.`);if(!ce(E,["string","array"]))throw new oi(`Expected second argument to be of type array or string, but found ${$r(di(E))} instead.`);if(this.fromIndex){const I=this.fromIndex.evaluate(c);return E.indexOf(m,I)}return E.indexOf(m)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class si{constructor(c,m,E,I,k,D){this.inputType=c,this.type=m,this.input=E,this.cases=I,this.outputs=k,this.otherwise=D}static parse(c,m){if(c.length<5)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return m.error("Expected an even number of arguments.");let E,I;m.expectedType&&m.expectedType.kind!=="value"&&(I=m.expectedType);const k={},D=[];for(let te=2;te<c.length-1;te+=2){let ue=c[te];const de=c[te+1];Array.isArray(ue)||(ue=[ue]);const _e=m.concat(te);if(ue.length===0)return _e.error("Expected at least one branch label.");for(const Ce of ue){if(typeof Ce!="number"&&typeof Ce!="string")return _e.error("Branch labels must be numbers or strings.");if(typeof Ce=="number"&&Math.abs(Ce)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ce=="number"&&Math.floor(Ce)!==Ce)return _e.error("Numeric branch labels must be integer values.");if(E){if(_e.checkSubtype(E,di(Ce)))return null}else E=di(Ce);if(k[String(Ce)]!==void 0)return _e.error("Branch labels must be unique.");k[String(Ce)]=D.length}const Se=m.parse(de,te,I);if(!Se)return null;I=I||Se.type,D.push(Se)}const j=m.parse(c[1],1,Nt);if(!j)return null;const q=m.parse(c[c.length-1],c.length-1,I);return q?j.type.kind!=="value"&&m.concat(1).checkSubtype(E,j.type)?null:new si(E,I,j,k,D,q):null}evaluate(c){const m=this.input.evaluate(c);return(di(m)===this.inputType&&this.outputs[this.cases[m]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Dl{constructor(c,m,E){this.type=c,this.branches=m,this.otherwise=E}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return m.error("Expected an odd number of arguments.");let E;m.expectedType&&m.expectedType.kind!=="value"&&(E=m.expectedType);const I=[];for(let D=1;D<c.length-1;D+=2){const j=m.parse(c[D],D,$t);if(!j)return null;const q=m.parse(c[D+1],D+1,E);if(!q)return null;I.push([j,q]),E=E||q.type}const k=m.parse(c[c.length-1],c.length-1,E);if(!k)return null;if(!E)throw new Error("Can't infer output type");return new Dl(E,I,k)}evaluate(c){for(const[m,E]of this.branches)if(m.evaluate(c))return E.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[m,E]of this.branches)c(m),c(E);c(this.otherwise)}outputDefined(){return this.branches.every(([c,m])=>m.outputDefined())&&this.otherwise.outputDefined()}}class _o{constructor(c,m,E,I){this.type=c,this.input=m,this.beginIndex=E,this.endIndex=I}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const E=m.parse(c[1],1,Nt),I=m.parse(c[2],2,ut);if(!E||!I)return null;if(!Ne(E.type,[Xn(Nt),kt,Nt]))return m.error(`Expected first argument to be of type array or string, but found ${$r(E.type)} instead`);if(c.length===4){const k=m.parse(c[3],3,ut);return k?new _o(E.type,E,I,k):null}return new _o(E.type,E,I)}evaluate(c){const m=this.input.evaluate(c),E=this.beginIndex.evaluate(c);if(!ce(m,["string","array"]))throw new oi(`Expected first argument to be of type array or string, but found ${$r(di(m))} instead.`);if(this.endIndex){const I=this.endIndex.evaluate(c);return m.slice(E,I)}return m.slice(E)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function ui(p,c){return p==="=="||p==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Ci(p,c,m,E){return E.compare(c,m)===0}function fs(p,c,m){const E=p!=="=="&&p!=="!=";return class mG{constructor(k,D,j){this.type=$t,this.lhs=k,this.rhs=D,this.collator=j,this.hasUntypedArgument=k.type.kind==="value"||D.type.kind==="value"}static parse(k,D){if(k.length!==3&&k.length!==4)return D.error("Expected two or three arguments.");const j=k[0];let q=D.parse(k[1],1,Nt);if(!q)return null;if(!ui(j,q.type))return D.concat(1).error(`"${j}" comparisons are not supported for type '${$r(q.type)}'.`);let te=D.parse(k[2],2,Nt);if(!te)return null;if(!ui(j,te.type))return D.concat(2).error(`"${j}" comparisons are not supported for type '${$r(te.type)}'.`);if(q.type.kind!==te.type.kind&&q.type.kind!=="value"&&te.type.kind!=="value")return D.error(`Cannot compare types '${$r(q.type)}' and '${$r(te.type)}'.`);E&&(q.type.kind==="value"&&te.type.kind!=="value"?q=new io(te.type,[q]):q.type.kind!=="value"&&te.type.kind==="value"&&(te=new io(q.type,[te])));let ue=null;if(k.length===4){if(q.type.kind!=="string"&&te.type.kind!=="string"&&q.type.kind!=="value"&&te.type.kind!=="value")return D.error("Cannot use collator to compare non-string types.");if(ue=D.parse(k[3],3,yn),!ue)return null}return new mG(q,te,ue)}evaluate(k){const D=this.lhs.evaluate(k),j=this.rhs.evaluate(k);if(E&&this.hasUntypedArgument){const q=di(D),te=di(j);if(q.kind!==te.kind||q.kind!=="string"&&q.kind!=="number")throw new oi(`Expected arguments for "${p}" to be (string, string) or (number, number), but found (${q.kind}, ${te.kind}) instead.`)}if(this.collator&&!E&&this.hasUntypedArgument){const q=di(D),te=di(j);if(q.kind!=="string"||te.kind!=="string")return c(k,D,j)}return this.collator?m(k,D,j,this.collator.evaluate(k)):c(k,D,j)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const Sf=fs("==",function(p,c,m){return c===m},Ci),Ru=fs("!=",function(p,c,m){return c!==m},function(p,c,m,E){return!Ci(0,c,m,E)}),Nc=fs("<",function(p,c,m){return c<m},function(p,c,m,E){return E.compare(c,m)<0}),ou=fs(">",function(p,c,m){return c>m},function(p,c,m,E){return E.compare(c,m)>0}),Ii=fs("<=",function(p,c,m){return c<=m},function(p,c,m,E){return E.compare(c,m)<=0}),ao=fs(">=",function(p,c,m){return c>=m},function(p,c,m,E){return E.compare(c,m)>=0});class ri{constructor(c,m,E,I,k){this.type=kt,this.number=c,this.locale=m,this.currency=E,this.minFractionDigits=I,this.maxFractionDigits=k}static parse(c,m){if(c.length!==3)return m.error("Expected two arguments.");const E=m.parse(c[1],1,ut);if(!E)return null;const I=c[2];if(typeof I!="object"||Array.isArray(I))return m.error("NumberFormat options argument must be an object.");let k=null;if(I.locale&&(k=m.parse(I.locale,1,kt),!k))return null;let D=null;if(I.currency&&(D=m.parse(I.currency,1,kt),!D))return null;let j=null;if(I["min-fraction-digits"]&&(j=m.parse(I["min-fraction-digits"],1,ut),!j))return null;let q=null;return I["max-fraction-digits"]&&(q=m.parse(I["max-fraction-digits"],1,ut),!q)?null:new ri(E,k,D,j,q)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class Cs{constructor(c){this.type=_n,this.sections=c}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const E=c[1];if(!Array.isArray(E)&&typeof E=="object")return m.error("First argument must be an image or text section.");const I=[];let k=!1;for(let D=1;D<=c.length-1;++D){const j=c[D];if(k&&typeof j=="object"&&!Array.isArray(j)){k=!1;let q=null;if(j["font-scale"]&&(q=m.parse(j["font-scale"],1,ut),!q))return null;let te=null;if(j["text-font"]&&(te=m.parse(j["text-font"],1,Xn(kt)),!te))return null;let ue=null;if(j["text-color"]&&(ue=m.parse(j["text-color"],1,Lr),!ue))return null;const de=I[I.length-1];de.scale=q,de.font=te,de.textColor=ue}else{const q=m.parse(c[D],1,Nt);if(!q)return null;const te=q.type.kind;if(te!=="string"&&te!=="value"&&te!=="null"&&te!=="resolvedImage")return m.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,I.push({content:q,scale:null,font:null,textColor:null})}}return new Cs(I)}evaluate(c){return new Jr(this.sections.map(m=>{const E=m.content.evaluate(c);return di(E)===dn?new xt("",E,null,null,null):new xt(Ko(E),null,m.scale?m.scale.evaluate(c):null,m.font?m.font.evaluate(c).join(","):null,m.textColor?m.textColor.evaluate(c):null)}))}eachChild(c){for(const m of this.sections)c(m.content),m.scale&&c(m.scale),m.font&&c(m.font),m.textColor&&c(m.textColor)}outputDefined(){return!1}}class Aa{constructor(c){this.type=dn,this.input=c}static parse(c,m){if(c.length!==2)return m.error("Expected two arguments.");const E=m.parse(c[1],1,kt);return E?new Aa(E):m.error("No image name provided.")}evaluate(c){const m=this.input.evaluate(c),E=Pi.fromString(m);return E&&c.availableImages&&(E.available=c.availableImages.indexOf(m)>-1),E}eachChild(c){c(this.input)}outputDefined(){return!1}}class ol{constructor(c){this.type=ut,this.input=c}static parse(c,m){if(c.length!==2)return m.error(`Expected 1 argument, but found ${c.length-1} instead.`);const E=m.parse(c[1],1);return E?E.type.kind!=="array"&&E.type.kind!=="string"&&E.type.kind!=="value"?m.error(`Expected argument of type string or array, but found ${$r(E.type)} instead.`):new ol(E):null}evaluate(c){const m=this.input.evaluate(c);if(typeof m=="string"||Array.isArray(m))return m.length;throw new oi(`Expected value to be of type string or array, but found ${$r(di(m))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Zn={"==":Sf,"!=":Ru,">":ou,"<":Nc,">=":ao,"<=":Ii,array:io,at:Co,boolean:io,case:Dl,coalesce:qa,collator:oo,format:Cs,image:Aa,in:Zr,"index-of":Wa,interpolate:rn,"interpolate-hcl":rn,"interpolate-lab":rn,length:ol,let:Fi,literal:Ea,match:si,number:io,"number-format":ri,object:io,slice:_o,step:cs,string:io,"to-boolean":pa,"to-color":pa,"to-number":pa,"to-string":pa,var:Hn,within:Qr};function cr(p,[c,m,E,I]){c=c.evaluate(p),m=m.evaluate(p),E=E.evaluate(p);const k=I?I.evaluate(p):1,D=da(c,m,E,k);if(D)throw new oi(D);return new Wt(c/255,m/255,E/255,k,!1)}function Pf(p,c){return p in c}function al(p,c){const m=c[p];return m===void 0?null:m}function ki(p){return{type:p}}function Ca(p){return{result:"success",value:p}}function Ia(p){return{result:"error",value:p}}function Is(p){return p["property-type"]==="data-driven"||p["property-type"]==="cross-faded-data-driven"}function Fc(p){return!!p.expression&&p.expression.parameters.indexOf("zoom")>-1}function $c(p){return!!p.expression&&p.expression.interpolated}function ar(p){return p instanceof Number?"number":p instanceof String?"string":p instanceof Boolean?"boolean":Array.isArray(p)?"array":p===null?"null":typeof p}function Oa(p){return typeof p=="object"&&p!==null&&!Array.isArray(p)}function pi(p){return p}function Nl(p,c){const m=c.type==="color",E=p.stops&&typeof p.stops[0][0]=="object",I=E||!(E||p.property!==void 0),k=p.type||($c(c)?"exponential":"interval");if(m||c.type==="padding"){const ue=m?Wt.parse:Mi.parse;(p=mt({},p)).stops&&(p.stops=p.stops.map(de=>[de[0],ue(de[1])])),p.default=ue(p.default?p.default:c.default)}if(p.colorSpace&&(D=p.colorSpace)!=="rgb"&&D!=="hcl"&&D!=="lab")throw new Error(`Unknown color space: "${p.colorSpace}"`);var D;let j,q,te;if(k==="exponential")j=ku;else if(k==="interval")j=nn;else if(k==="categorical"){j=xh,q=Object.create(null);for(const ue of p.stops)q[ue[0]]=ue[1];te=typeof p.stops[0][0]}else{if(k!=="identity")throw new Error(`Unknown function type "${k}"`);j=Qn}if(E){const ue={},de=[];for(let Ce=0;Ce<p.stops.length;Ce++){const Fe=p.stops[Ce],Ue=Fe[0].zoom;ue[Ue]===void 0&&(ue[Ue]={zoom:Ue,type:p.type,property:p.property,default:p.default,stops:[]},de.push(Ue)),ue[Ue].stops.push([Fe[0].value,Fe[1]])}const _e=[];for(const Ce of de)_e.push([ue[Ce].zoom,Nl(ue[Ce],c)]);const Se={name:"linear"};return{kind:"composite",interpolationType:Se,interpolationFactor:rn.interpolationFactor.bind(void 0,Se),zoomStops:_e.map(Ce=>Ce[0]),evaluate:({zoom:Ce},Fe)=>ku({stops:_e,base:p.base},c,Ce).evaluate(Ce,Fe)}}if(I){const ue=k==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:ue,interpolationFactor:rn.interpolationFactor.bind(void 0,ue),zoomStops:p.stops.map(de=>de[0]),evaluate:({zoom:de})=>j(p,c,de,q,te)}}return{kind:"source",evaluate(ue,de){const _e=de&&de.properties?de.properties[p.property]:void 0;return _e===void 0?$i(p.default,c.default):j(p,c,_e,q,te)}}}function $i(p,c,m){return p!==void 0?p:c!==void 0?c:m!==void 0?m:void 0}function xh(p,c,m,E,I){return $i(typeof m===I?E[m]:void 0,p.default,c.default)}function nn(p,c,m){if(ar(m)!=="number")return $i(p.default,c.default);const E=p.stops.length;if(E===1||m<=p.stops[0][0])return p.stops[0][1];if(m>=p.stops[E-1][0])return p.stops[E-1][1];const I=on(p.stops.map(k=>k[0]),m);return p.stops[I][1]}function ku(p,c,m){const E=p.base!==void 0?p.base:1;if(ar(m)!=="number")return $i(p.default,c.default);const I=p.stops.length;if(I===1||m<=p.stops[0][0])return p.stops[0][1];if(m>=p.stops[I-1][0])return p.stops[I-1][1];const k=on(p.stops.map(ue=>ue[0]),m),D=function(ue,de,_e,Se){const Ce=Se-_e,Fe=ue-_e;return Ce===0?0:de===1?Fe/Ce:(Math.pow(de,Fe)-1)/(Math.pow(de,Ce)-1)}(m,E,p.stops[k][0],p.stops[k+1][0]),j=p.stops[k][1],q=p.stops[k+1][1],te=qi[c.type]||pi;return typeof j.evaluate=="function"?{evaluate(...ue){const de=j.evaluate.apply(void 0,ue),_e=q.evaluate.apply(void 0,ue);if(de!==void 0&&_e!==void 0)return te(de,_e,D,p.colorSpace)}}:te(j,q,D,p.colorSpace)}function Qn(p,c,m){switch(c.type){case"color":m=Wt.parse(m);break;case"formatted":m=Jr.fromString(m.toString());break;case"resolvedImage":m=Pi.fromString(m.toString());break;case"padding":m=Mi.parse(m);break;default:ar(m)===c.type||c.type==="enum"&&c.values[m]||(m=void 0)}return $i(m,p.default,c.default)}Jo.register(Zn,{error:[{kind:"error"},[kt],(p,[c])=>{throw new oi(c.evaluate(p))}],typeof:[kt,[Nt],(p,[c])=>$r(di(c.evaluate(p)))],"to-rgba":[Xn(ut,4),[Lr],(p,[c])=>{const[m,E,I,k]=c.evaluate(p).rgb;return[255*m,255*E,255*I,k]}],rgb:[Lr,[ut,ut,ut],cr],rgba:[Lr,[ut,ut,ut,ut],cr],has:{type:$t,overloads:[[[kt],(p,[c])=>Pf(c.evaluate(p),p.properties())],[[kt,Rr],(p,[c,m])=>Pf(c.evaluate(p),m.evaluate(p))]]},get:{type:Nt,overloads:[[[kt],(p,[c])=>al(c.evaluate(p),p.properties())],[[kt,Rr],(p,[c,m])=>al(c.evaluate(p),m.evaluate(p))]]},"feature-state":[Nt,[kt],(p,[c])=>al(c.evaluate(p),p.featureState||{})],properties:[Rr,[],p=>p.properties()],"geometry-type":[kt,[],p=>p.geometryType()],id:[Nt,[],p=>p.id()],zoom:[ut,[],p=>p.globals.zoom],"heatmap-density":[ut,[],p=>p.globals.heatmapDensity||0],"line-progress":[ut,[],p=>p.globals.lineProgress||0],accumulated:[Nt,[],p=>p.globals.accumulated===void 0?null:p.globals.accumulated],"+":[ut,ki(ut),(p,c)=>{let m=0;for(const E of c)m+=E.evaluate(p);return m}],"*":[ut,ki(ut),(p,c)=>{let m=1;for(const E of c)m*=E.evaluate(p);return m}],"-":{type:ut,overloads:[[[ut,ut],(p,[c,m])=>c.evaluate(p)-m.evaluate(p)],[[ut],(p,[c])=>-c.evaluate(p)]]},"/":[ut,[ut,ut],(p,[c,m])=>c.evaluate(p)/m.evaluate(p)],"%":[ut,[ut,ut],(p,[c,m])=>c.evaluate(p)%m.evaluate(p)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(p,[c,m])=>Math.pow(c.evaluate(p),m.evaluate(p))],sqrt:[ut,[ut],(p,[c])=>Math.sqrt(c.evaluate(p))],log10:[ut,[ut],(p,[c])=>Math.log(c.evaluate(p))/Math.LN10],ln:[ut,[ut],(p,[c])=>Math.log(c.evaluate(p))],log2:[ut,[ut],(p,[c])=>Math.log(c.evaluate(p))/Math.LN2],sin:[ut,[ut],(p,[c])=>Math.sin(c.evaluate(p))],cos:[ut,[ut],(p,[c])=>Math.cos(c.evaluate(p))],tan:[ut,[ut],(p,[c])=>Math.tan(c.evaluate(p))],asin:[ut,[ut],(p,[c])=>Math.asin(c.evaluate(p))],acos:[ut,[ut],(p,[c])=>Math.acos(c.evaluate(p))],atan:[ut,[ut],(p,[c])=>Math.atan(c.evaluate(p))],min:[ut,ki(ut),(p,c)=>Math.min(...c.map(m=>m.evaluate(p)))],max:[ut,ki(ut),(p,c)=>Math.max(...c.map(m=>m.evaluate(p)))],abs:[ut,[ut],(p,[c])=>Math.abs(c.evaluate(p))],round:[ut,[ut],(p,[c])=>{const m=c.evaluate(p);return m<0?-Math.round(-m):Math.round(m)}],floor:[ut,[ut],(p,[c])=>Math.floor(c.evaluate(p))],ceil:[ut,[ut],(p,[c])=>Math.ceil(c.evaluate(p))],"filter-==":[$t,[kt,Nt],(p,[c,m])=>p.properties()[c.value]===m.value],"filter-id-==":[$t,[Nt],(p,[c])=>p.id()===c.value],"filter-type-==":[$t,[kt],(p,[c])=>p.geometryType()===c.value],"filter-<":[$t,[kt,Nt],(p,[c,m])=>{const E=p.properties()[c.value],I=m.value;return typeof E==typeof I&&E<I}],"filter-id-<":[$t,[Nt],(p,[c])=>{const m=p.id(),E=c.value;return typeof m==typeof E&&m<E}],"filter->":[$t,[kt,Nt],(p,[c,m])=>{const E=p.properties()[c.value],I=m.value;return typeof E==typeof I&&E>I}],"filter-id->":[$t,[Nt],(p,[c])=>{const m=p.id(),E=c.value;return typeof m==typeof E&&m>E}],"filter-<=":[$t,[kt,Nt],(p,[c,m])=>{const E=p.properties()[c.value],I=m.value;return typeof E==typeof I&&E<=I}],"filter-id-<=":[$t,[Nt],(p,[c])=>{const m=p.id(),E=c.value;return typeof m==typeof E&&m<=E}],"filter->=":[$t,[kt,Nt],(p,[c,m])=>{const E=p.properties()[c.value],I=m.value;return typeof E==typeof I&&E>=I}],"filter-id->=":[$t,[Nt],(p,[c])=>{const m=p.id(),E=c.value;return typeof m==typeof E&&m>=E}],"filter-has":[$t,[Nt],(p,[c])=>c.value in p.properties()],"filter-has-id":[$t,[],p=>p.id()!==null&&p.id()!==void 0],"filter-type-in":[$t,[Xn(kt)],(p,[c])=>c.value.indexOf(p.geometryType())>=0],"filter-id-in":[$t,[Xn(Nt)],(p,[c])=>c.value.indexOf(p.id())>=0],"filter-in-small":[$t,[kt,Xn(Nt)],(p,[c,m])=>m.value.indexOf(p.properties()[c.value])>=0],"filter-in-large":[$t,[kt,Xn(Nt)],(p,[c,m])=>function(E,I,k,D){for(;k<=D;){const j=k+D>>1;if(I[j]===E)return!0;I[j]>E?D=j-1:k=j+1}return!1}(p.properties()[c.value],m.value,0,m.value.length-1)],all:{type:$t,overloads:[[[$t,$t],(p,[c,m])=>c.evaluate(p)&&m.evaluate(p)],[ki($t),(p,c)=>{for(const m of c)if(!m.evaluate(p))return!1;return!0}]]},any:{type:$t,overloads:[[[$t,$t],(p,[c,m])=>c.evaluate(p)||m.evaluate(p)],[ki($t),(p,c)=>{for(const m of c)if(m.evaluate(p))return!0;return!1}]]},"!":[$t,[$t],(p,[c])=>!c.evaluate(p)],"is-supported-script":[$t,[kt],(p,[c])=>{const m=p.globals&&p.globals.isSupportedScript;return!m||m(c.evaluate(p))}],upcase:[kt,[kt],(p,[c])=>c.evaluate(p).toUpperCase()],downcase:[kt,[kt],(p,[c])=>c.evaluate(p).toLowerCase()],concat:[kt,ki(Nt),(p,c)=>c.map(m=>Ko(m.evaluate(p))).join("")],"resolved-locale":[kt,[yn],(p,[c])=>c.evaluate(p).resolvedLocale()]});class li{constructor(c,m){var E;this.expression=c,this._warningHistory={},this._evaluator=new or,this._defaultValue=m?(E=m).type==="color"&&Oa(E.default)?new Wt(0,0,0,0):E.type==="color"?Wt.parse(E.default)||null:E.type==="padding"?Mi.parse(E.default)||null:E.type==="variableAnchorOffsetCollection"?Si.parse(E.default)||null:E.default===void 0?null:E.default:null,this._enumValues=m&&m.type==="enum"?m.values:null}evaluateWithoutErrorHandling(c,m,E,I,k,D){return this._evaluator.globals=c,this._evaluator.feature=m,this._evaluator.featureState=E,this._evaluator.canonical=I,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)}evaluate(c,m,E,I,k,D){this._evaluator.globals=c,this._evaluator.feature=m||null,this._evaluator.featureState=E||null,this._evaluator.canonical=I,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=D||null;try{const j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new oi(`Expected value to be one of ${Object.keys(this._enumValues).map(q=>JSON.stringify(q)).join(", ")}, but found ${JSON.stringify(j)} instead.`);return j}catch(j){return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"),this._defaultValue}}}function Xi(p){return Array.isArray(p)&&p.length>0&&typeof p[0]=="string"&&p[0]in Zn}function qr(p,c){const m=new Tu(Zn,il,[],c?function(I){const k={color:Lr,string:kt,number:ut,enum:kt,boolean:$t,formatted:_n,padding:ti,resolvedImage:dn,variableAnchorOffsetCollection:Kr};return I.type==="array"?Xn(k[I.value]||Nt,I.length):k[I.type]}(c):void 0),E=m.parse(p,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return E?Ca(new li(E,c)):Ia(m.errors)}class Fl{constructor(c,m){this.kind=c,this._styleExpression=m,this.isStateDependent=c!=="constant"&&!As(m.expression)}evaluateWithoutErrorHandling(c,m,E,I,k,D){return this._styleExpression.evaluateWithoutErrorHandling(c,m,E,I,k,D)}evaluate(c,m,E,I,k,D){return this._styleExpression.evaluate(c,m,E,I,k,D)}}class bn{constructor(c,m,E,I){this.kind=c,this.zoomStops=E,this._styleExpression=m,this.isStateDependent=c!=="camera"&&!As(m.expression),this.interpolationType=I}evaluateWithoutErrorHandling(c,m,E,I,k,D){return this._styleExpression.evaluateWithoutErrorHandling(c,m,E,I,k,D)}evaluate(c,m,E,I,k,D){return this._styleExpression.evaluate(c,m,E,I,k,D)}interpolationFactor(c,m,E){return this.interpolationType?rn.interpolationFactor(this.interpolationType,c,m,E):0}}function yr(p,c){const m=qr(p,c);if(m.result==="error")return m;const E=m.value.expression,I=Gi(E);if(!I&&!Is(c))return Ia([new rt("","data expressions not supported")]);const k=yo(E,["zoom"]);if(!k&&!Fc(c))return Ia([new rt("","zoom expressions not supported")]);const D=Os(E);return D||k?D instanceof rt?Ia([D]):D instanceof rn&&!$c(c)?Ia([new rt("",'"interpolate" expressions cannot be used with this property')]):Ca(D?new bn(I?"camera":"composite",m.value,D.labels,D instanceof rn?D.interpolation:void 0):new Fl(I?"constant":"source",m.value)):Ia([new rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yi{constructor(c,m){this._parameters=c,this._specification=m,mt(this,Nl(this._parameters,this._specification))}static deserialize(c){return new Yi(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function Os(p){let c=null;if(p instanceof Fi)c=Os(p.result);else if(p instanceof qa){for(const m of p.args)if(c=Os(m),c)break}else(p instanceof cs||p instanceof rn)&&p.input instanceof Jo&&p.input.name==="zoom"&&(c=p);return c instanceof rt||p.eachChild(m=>{const E=Os(m);E instanceof rt?c=E:!c&&E?c=new rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&E&&c!==E&&(c=new rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function Ta(p){if(p===!0||p===!1)return!0;if(!Array.isArray(p)||p.length===0)return!1;switch(p[0]){case"has":return p.length>=2&&p[1]!=="$id"&&p[1]!=="$type";case"in":return p.length>=3&&(typeof p[1]!="string"||Array.isArray(p[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return p.length!==3||Array.isArray(p[1])||Array.isArray(p[2]);case"any":case"all":for(const c of p.slice(1))if(!Ta(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Qo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zi(p){if(p==null)return{filter:()=>!0,needGeometry:!1};Ta(p)||(p=Ma(p));const c=qr(p,Qo);if(c.result==="error")throw new Error(c.value.map(m=>`${m.key}: ${m.message}`).join(", "));return{filter:(m,E,I)=>c.value.evaluate(m,E,{},I),needGeometry:zc(p)}}function Dd(p,c){return p<c?-1:p>c?1:0}function zc(p){if(!Array.isArray(p))return!1;if(p[0]==="within")return!0;for(let c=1;c<p.length;c++)if(zc(p[c]))return!0;return!1}function Ma(p){if(!p)return!0;const c=p[0];return p.length<=1?c!=="any":c==="=="?Vo(p[1],p[2],"=="):c==="!="?kr(Vo(p[1],p[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Vo(p[1],p[2],c):c==="any"?(m=p.slice(1),["any"].concat(m.map(Ma))):c==="all"?["all"].concat(p.slice(1).map(Ma)):c==="none"?["all"].concat(p.slice(1).map(Ma).map(kr)):c==="in"?Ts(p[1],p.slice(2)):c==="!in"?kr(Ts(p[1],p.slice(2))):c==="has"?bo(p[1]):c==="!has"?kr(bo(p[1])):c!=="within"||p;var m}function Vo(p,c,m){switch(p){case"$type":return[`filter-type-${m}`,c];case"$id":return[`filter-id-${m}`,c];default:return[`filter-${m}`,p,c]}}function Ts(p,c){if(c.length===0)return!1;switch(p){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(m=>typeof m!=typeof c[0])?["filter-in-large",p,["literal",c.sort(Dd)]]:["filter-in-small",p,["literal",c]]}}function bo(p){switch(p){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",p]}}function kr(p){return["!",p]}function ea(p){const c=typeof p;if(c==="number"||c==="boolean"||c==="string"||p==null)return JSON.stringify(p);if(Array.isArray(p)){let I="[";for(const k of p)I+=`${ea(k)},`;return`${I}]`}const m=Object.keys(p).sort();let E="{";for(let I=0;I<m.length;I++)E+=`${JSON.stringify(m[I])}:${ea(p[m[I]])},`;return`${E}}`}function hs(p){let c="";for(const m of Zt)c+=`/${ea(p[m])}`;return c}function Xa(p){const c=p.value;return c?[new qe(p.key,c,"constants have been deprecated as of v8")]:[]}function an(p){return p instanceof Number||p instanceof String||p instanceof Boolean?p.valueOf():p}function $l(p){if(Array.isArray(p))return p.map($l);if(p instanceof Object&&!(p instanceof Number||p instanceof String||p instanceof Boolean)){const c={};for(const m in p)c[m]=$l(p[m]);return c}return an(p)}function La(p){const c=p.key,m=p.value,E=p.valueSpec||{},I=p.objectElementValidators||{},k=p.style,D=p.styleSpec,j=p.validateSpec;let q=[];const te=ar(m);if(te!=="object")return[new qe(c,m,`object expected, ${te} found`)];for(const ue in m){const de=ue.split(".")[0],_e=E[de]||E["*"];let Se;if(I[de])Se=I[de];else if(E[de])Se=j;else if(I["*"])Se=I["*"];else{if(!E["*"]){q.push(new qe(c,m[ue],`unknown property "${ue}"`));continue}Se=j}q=q.concat(Se({key:(c&&`${c}.`)+ue,value:m[ue],valueSpec:_e,style:k,styleSpec:D,object:m,objectKey:ue,validateSpec:j},m))}for(const ue in E)I[ue]||E[ue].required&&E[ue].default===void 0&&m[ue]===void 0&&q.push(new qe(c,m,`missing required property "${ue}"`));return q}function xo(p){const c=p.value,m=p.valueSpec,E=p.style,I=p.styleSpec,k=p.key,D=p.arrayElementValidator||p.validateSpec;if(ar(c)!=="array")return[new qe(k,c,`array expected, ${ar(c)} found`)];if(m.length&&c.length!==m.length)return[new qe(k,c,`array length ${m.length} expected, length ${c.length} found`)];if(m["min-length"]&&c.length<m["min-length"])return[new qe(k,c,`array length at least ${m["min-length"]} expected, length ${c.length} found`)];let j={type:m.value,values:m.values};I.$version<7&&(j.function=m.function),ar(m.value)==="object"&&(j=m.value);let q=[];for(let te=0;te<c.length;te++)q=q.concat(D({array:c,arrayIndex:te,value:c[te],valueSpec:j,validateSpec:p.validateSpec,style:E,styleSpec:I,key:`${k}[${te}]`}));return q}function Ms(p){const c=p.key,m=p.value,E=p.valueSpec;let I=ar(m);return I==="number"&&m!=m&&(I="NaN"),I!=="number"?[new qe(c,m,`number expected, ${I} found`)]:"minimum"in E&&m<E.minimum?[new qe(c,m,`${m} is less than the minimum value ${E.minimum}`)]:"maximum"in E&&m>E.maximum?[new qe(c,m,`${m} is greater than the maximum value ${E.maximum}`)]:[]}function Ya(p){const c=p.valueSpec,m=an(p.value.type);let E,I,k,D={};const j=m!=="categorical"&&p.value.property===void 0,q=!j,te=ar(p.value.stops)==="array"&&ar(p.value.stops[0])==="array"&&ar(p.value.stops[0][0])==="object",ue=La({key:p.key,value:p.value,valueSpec:p.styleSpec.function,validateSpec:p.validateSpec,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(Se){if(m==="identity")return[new qe(Se.key,Se.value,'identity function may not have a "stops" property')];let Ce=[];const Fe=Se.value;return Ce=Ce.concat(xo({key:Se.key,value:Fe,valueSpec:Se.valueSpec,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,arrayElementValidator:de})),ar(Fe)==="array"&&Fe.length===0&&Ce.push(new qe(Se.key,Fe,"array must have at least one stop")),Ce},default:function(Se){return Se.validateSpec({key:Se.key,value:Se.value,valueSpec:c,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec})}}});return m==="identity"&&j&&ue.push(new qe(p.key,p.value,'missing required property "property"')),m==="identity"||p.value.stops||ue.push(new qe(p.key,p.value,'missing required property "stops"')),m==="exponential"&&p.valueSpec.expression&&!$c(p.valueSpec)&&ue.push(new qe(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(q&&!Is(p.valueSpec)?ue.push(new qe(p.key,p.value,"property functions not supported")):j&&!Fc(p.valueSpec)&&ue.push(new qe(p.key,p.value,"zoom functions not supported"))),m!=="categorical"&&!te||p.value.property!==void 0||ue.push(new qe(p.key,p.value,'"property" property is required')),ue;function de(Se){let Ce=[];const Fe=Se.value,Ue=Se.key;if(ar(Fe)!=="array")return[new qe(Ue,Fe,`array expected, ${ar(Fe)} found`)];if(Fe.length!==2)return[new qe(Ue,Fe,`array length 2 expected, length ${Fe.length} found`)];if(te){if(ar(Fe[0])!=="object")return[new qe(Ue,Fe,`object expected, ${ar(Fe[0])} found`)];if(Fe[0].zoom===void 0)return[new qe(Ue,Fe,"object stop key must have zoom")];if(Fe[0].value===void 0)return[new qe(Ue,Fe,"object stop key must have value")];if(k&&k>an(Fe[0].zoom))return[new qe(Ue,Fe[0].zoom,"stop zoom values must appear in ascending order")];an(Fe[0].zoom)!==k&&(k=an(Fe[0].zoom),I=void 0,D={}),Ce=Ce.concat(La({key:`${Ue}[0]`,value:Fe[0],valueSpec:{zoom:{}},validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,objectElementValidators:{zoom:Ms,value:_e}}))}else Ce=Ce.concat(_e({key:`${Ue}[0]`,value:Fe[0],valueSpec:{},validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec},Fe));return Xi($l(Fe[1]))?Ce.concat([new qe(`${Ue}[1]`,Fe[1],"expressions are not allowed in function stops.")]):Ce.concat(Se.validateSpec({key:`${Ue}[1]`,value:Fe[1],valueSpec:c,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec}))}function _e(Se,Ce){const Fe=ar(Se.value),Ue=an(Se.value),We=Se.value!==null?Se.value:Ce;if(E){if(Fe!==E)return[new qe(Se.key,We,`${Fe} stop domain type must match previous stop domain type ${E}`)]}else E=Fe;if(Fe!=="number"&&Fe!=="string"&&Fe!=="boolean")return[new qe(Se.key,We,"stop domain value must be a number, string, or boolean")];if(Fe!=="number"&&m!=="categorical"){let st=`number expected, ${Fe} found`;return Is(c)&&m===void 0&&(st+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(Se.key,We,st)]}return m!=="categorical"||Fe!=="number"||isFinite(Ue)&&Math.floor(Ue)===Ue?m!=="categorical"&&Fe==="number"&&I!==void 0&&Ue<I?[new qe(Se.key,We,"stop domain values must appear in ascending order")]:(I=Ue,m==="categorical"&&Ue in D?[new qe(Se.key,We,"stop domain values must be unique")]:(D[Ue]=!0,[])):[new qe(Se.key,We,`integer expected, found ${Ue}`)]}}function Du(p){const c=(p.expressionContext==="property"?yr:qr)($l(p.value),p.valueSpec);if(c.result==="error")return c.value.map(E=>new qe(`${p.key}${E.key}`,p.value,E.message));const m=c.value.expression||c.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!m.outputDefined())return[new qe(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!As(m))return[new qe(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter"&&!As(m))return[new qe(p.key,p.value,'"feature-state" data expressions are not supported with filters.')];if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!yo(m,["zoom","feature-state"]))return[new qe(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!Gi(m))return[new qe(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function so(p){const c=p.key,m=p.value,E=p.valueSpec,I=[];return Array.isArray(E.values)?E.values.indexOf(an(m))===-1&&I.push(new qe(c,m,`expected one of [${E.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(E.values).indexOf(an(m))===-1&&I.push(new qe(c,m,`expected one of [${Object.keys(E.values).join(", ")}], ${JSON.stringify(m)} found`)),I}function Af(p){return Ta($l(p.value))?Du(mt({},p,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bc(p)}function Bc(p){const c=p.value,m=p.key;if(ar(c)!=="array")return[new qe(m,c,`array expected, ${ar(c)} found`)];const E=p.styleSpec;let I,k=[];if(c.length<1)return[new qe(m,c,"filter array must have at least 1 element")];switch(k=k.concat(so({key:`${m}[0]`,value:c[0],valueSpec:E.filter_operator,style:p.style,styleSpec:p.styleSpec})),an(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&an(c[1])==="$type"&&k.push(new qe(m,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&k.push(new qe(m,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(I=ar(c[1]),I!=="string"&&k.push(new qe(`${m}[1]`,c[1],`string expected, ${I} found`)));for(let D=2;D<c.length;D++)I=ar(c[D]),an(c[1])==="$type"?k=k.concat(so({key:`${m}[${D}]`,value:c[D],valueSpec:E.geometry_type,style:p.style,styleSpec:p.styleSpec})):I!=="string"&&I!=="number"&&I!=="boolean"&&k.push(new qe(`${m}[${D}]`,c[D],`string, number, or boolean expected, ${I} found`));break;case"any":case"all":case"none":for(let D=1;D<c.length;D++)k=k.concat(Bc({key:`${m}[${D}]`,value:c[D],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":I=ar(c[1]),c.length!==2?k.push(new qe(m,c,`filter array for "${c[0]}" operator must have 2 elements`)):I!=="string"&&k.push(new qe(`${m}[1]`,c[1],`string expected, ${I} found`));break;case"within":I=ar(c[1]),c.length!==2?k.push(new qe(m,c,`filter array for "${c[0]}" operator must have 2 elements`)):I!=="object"&&k.push(new qe(`${m}[1]`,c[1],`object expected, ${I} found`))}return k}function sl(p,c){const m=p.key,E=p.validateSpec,I=p.style,k=p.styleSpec,D=p.value,j=p.objectKey,q=k[`${c}_${p.layerType}`];if(!q)return[];const te=j.match(/^(.*)-transition$/);if(c==="paint"&&te&&q[te[1]]&&q[te[1]].transition)return E({key:m,value:D,valueSpec:k.transition,style:I,styleSpec:k});const ue=p.valueSpec||q[j];if(!ue)return[new qe(m,D,`unknown property "${j}"`)];let de;if(ar(D)==="string"&&Is(ue)&&!ue.tokens&&(de=/^{([^}]+)}$/.exec(D)))return[new qe(m,D,`"${j}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(de[1])} }\`.`)];const _e=[];return p.layerType==="symbol"&&(j==="text-field"&&I&&!I.glyphs&&_e.push(new qe(m,D,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Oa($l(D))&&an(D.type)==="identity"&&_e.push(new qe(m,D,'"text-font" does not support identity functions'))),_e.concat(E({key:p.key,value:D,valueSpec:ue,style:I,styleSpec:k,expressionContext:"property",propertyType:c,propertyKey:j}))}function jc(p){return sl(p,"paint")}function Cf(p){return sl(p,"layout")}function Nu(p){let c=[];const m=p.value,E=p.key,I=p.style,k=p.styleSpec;m.type||m.ref||c.push(new qe(E,m,'either "type" or "ref" is required'));let D=an(m.type);const j=an(m.ref);if(m.id){const q=an(m.id);for(let te=0;te<p.arrayIndex;te++){const ue=I.layers[te];an(ue.id)===q&&c.push(new qe(E,m.id,`duplicate layer id "${m.id}", previously used at line ${ue.id.__line__}`))}}if("ref"in m){let q;["type","source","source-layer","filter","layout"].forEach(te=>{te in m&&c.push(new qe(E,m[te],`"${te}" is prohibited for ref layers`))}),I.layers.forEach(te=>{an(te.id)===j&&(q=te)}),q?q.ref?c.push(new qe(E,m.ref,"ref cannot reference another ref layer")):D=an(q.type):c.push(new qe(E,m.ref,`ref layer "${j}" not found`))}else if(D!=="background")if(m.source){const q=I.sources&&I.sources[m.source],te=q&&an(q.type);q?te==="vector"&&D==="raster"?c.push(new qe(E,m.source,`layer "${m.id}" requires a raster source`)):te==="raster"&&D!=="raster"?c.push(new qe(E,m.source,`layer "${m.id}" requires a vector source`)):te!=="vector"||m["source-layer"]?te==="raster-dem"&&D!=="hillshade"?c.push(new qe(E,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):D!=="line"||!m.paint||!m.paint["line-gradient"]||te==="geojson"&&q.lineMetrics||c.push(new qe(E,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new qe(E,m,`layer "${m.id}" must specify a "source-layer"`)):c.push(new qe(E,m.source,`source "${m.source}" not found`))}else c.push(new qe(E,m,'missing required property "source"'));return c=c.concat(La({key:E,value:m,valueSpec:k.layer,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*":()=>[],type:()=>p.validateSpec({key:`${E}.type`,value:m.type,valueSpec:k.layer.type,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,object:m,objectKey:"type"}),filter:Af,layout:q=>La({layer:m,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":te=>Cf(mt({layerType:D},te))}}),paint:q=>La({layer:m,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":te=>jc(mt({layerType:D},te))}})}})),c}function Go(p){const c=p.value,m=p.key,E=ar(c);return E!=="string"?[new qe(m,c,`string expected, ${E} found`)]:[]}const uo={promoteId:function({key:p,value:c}){if(ar(c)==="string")return Go({key:p,value:c});{const m=[];for(const E in c)m.push(...Go({key:`${p}.${E}`,value:c[E]}));return m}}};function Fu(p){const c=p.value,m=p.key,E=p.styleSpec,I=p.style,k=p.validateSpec;if(!c.type)return[new qe(m,c,'"type" is required')];const D=an(c.type);let j;switch(D){case"vector":case"raster":case"raster-dem":return j=La({key:m,value:c,valueSpec:E[`source_${D.replace("-","_")}`],style:p.style,styleSpec:E,objectElementValidators:uo,validateSpec:k}),j;case"geojson":if(j=La({key:m,value:c,valueSpec:E.source_geojson,style:I,styleSpec:E,validateSpec:k,objectElementValidators:uo}),c.cluster)for(const q in c.clusterProperties){const[te,ue]=c.clusterProperties[q],de=typeof te=="string"?[te,["accumulated"],["get",q]]:te;j.push(...Du({key:`${m}.${q}.map`,value:ue,validateSpec:k,expressionContext:"cluster-map"})),j.push(...Du({key:`${m}.${q}.reduce`,value:de,validateSpec:k,expressionContext:"cluster-reduce"}))}return j;case"video":return La({key:m,value:c,valueSpec:E.source_video,style:I,validateSpec:k,styleSpec:E});case"image":return La({key:m,value:c,valueSpec:E.source_image,style:I,validateSpec:k,styleSpec:E});case"canvas":return[new qe(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return so({key:`${m}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:I,validateSpec:k,styleSpec:E})}}function Io(p){const c=p.value,m=p.styleSpec,E=m.light,I=p.style;let k=[];const D=ar(c);if(c===void 0)return k;if(D!=="object")return k=k.concat([new qe("light",c,`object expected, ${D} found`)]),k;for(const j in c){const q=j.match(/^(.*)-transition$/);k=k.concat(q&&E[q[1]]&&E[q[1]].transition?p.validateSpec({key:j,value:c[j],valueSpec:m.transition,validateSpec:p.validateSpec,style:I,styleSpec:m}):E[j]?p.validateSpec({key:j,value:c[j],valueSpec:E[j],validateSpec:p.validateSpec,style:I,styleSpec:m}):[new qe(j,c[j],`unknown property "${j}"`)])}return k}function Ls(p){const c=p.value,m=p.styleSpec,E=m.terrain,I=p.style;let k=[];const D=ar(c);if(c===void 0)return k;if(D!=="object")return k=k.concat([new qe("terrain",c,`object expected, ${D} found`)]),k;for(const j in c)k=k.concat(E[j]?p.validateSpec({key:j,value:c[j],valueSpec:E[j],validateSpec:p.validateSpec,style:I,styleSpec:m}):[new qe(j,c[j],`unknown property "${j}"`)]);return k}function ul(p){let c=[];const m=p.value,E=p.key;if(Array.isArray(m)){const I=[],k=[];for(const D in m)m[D].id&&I.includes(m[D].id)&&c.push(new qe(E,m,`all the sprites' ids must be unique, but ${m[D].id} is duplicated`)),I.push(m[D].id),m[D].url&&k.includes(m[D].url)&&c.push(new qe(E,m,`all the sprites' URLs must be unique, but ${m[D].url} is duplicated`)),k.push(m[D].url),c=c.concat(La({key:`${E}[${D}]`,value:m[D],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:p.validateSpec}));return c}return Go({key:E,value:m})}const wh={"*":()=>[],array:xo,boolean:function(p){const c=p.value,m=p.key,E=ar(c);return E!=="boolean"?[new qe(m,c,`boolean expected, ${E} found`)]:[]},number:Ms,color:function(p){const c=p.key,m=p.value,E=ar(m);return E!=="string"?[new qe(c,m,`color expected, ${E} found`)]:Wt.parse(String(m))?[]:[new qe(c,m,`color expected, "${m}" found`)]},constants:Xa,enum:so,filter:Af,function:Ya,layer:Nu,object:La,source:Fu,light:Io,terrain:Ls,string:Go,formatted:function(p){return Go(p).length===0?[]:Du(p)},resolvedImage:function(p){return Go(p).length===0?[]:Du(p)},padding:function(p){const c=p.key,m=p.value;if(ar(m)==="array"){if(m.length<1||m.length>4)return[new qe(c,m,`padding requires 1 to 4 values; ${m.length} values found`)];const E={type:"number"};let I=[];for(let k=0;k<m.length;k++)I=I.concat(p.validateSpec({key:`${c}[${k}]`,value:m[k],validateSpec:p.validateSpec,valueSpec:E}));return I}return Ms({key:c,value:m,valueSpec:{}})},variableAnchorOffsetCollection:function(p){const c=p.key,m=p.value,E=ar(m),I=p.styleSpec;if(E!=="array"||m.length<1||m.length%2!=0)return[new qe(c,m,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let D=0;D<m.length;D+=2)k=k.concat(so({key:`${c}[${D}]`,value:m[D],valueSpec:I.layout_symbol["text-anchor"]})),k=k.concat(xo({key:`${c}[${D+1}]`,value:m[D+1],valueSpec:{length:2,value:"number"},validateSpec:p.validateSpec,style:p.style,styleSpec:I}));return k},sprite:ul};function au(p){const c=p.value,m=p.valueSpec,E=p.styleSpec;return p.validateSpec=au,m.expression&&Oa(an(c))?Ya(p):m.expression&&Xi($l(c))?Du(p):m.type&&wh[m.type]?wh[m.type](p):La(mt({},p,{valueSpec:m.type?E[m.type]:m}))}function ds(p){const c=p.value,m=p.key,E=Go(p);return E.length||(c.indexOf("{fontstack}")===-1&&E.push(new qe(m,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&E.push(new qe(m,c,'"glyphs" url must include a "{range}" token'))),E}function Hi(p,c=Ze){let m=[];return m=m.concat(au({key:"",value:p,valueSpec:c.$root,styleSpec:c,style:p,validateSpec:au,objectElementValidators:{glyphs:ds,"*":()=>[]}})),p.constants&&(m=m.concat(Xa({key:"constants",value:p.constants,style:p,styleSpec:c,validateSpec:au}))),ta(m)}function ln(p){return function(c){return p({...c,validateSpec:au})}}function ta(p){return[].concat(p).sort((c,m)=>c.line-m.line)}function Oi(p){return function(...c){return ta(p.apply(this,c))}}Hi.source=Oi(ln(Fu)),Hi.sprite=Oi(ln(ul)),Hi.glyphs=Oi(ln(ds)),Hi.light=Oi(ln(Io)),Hi.terrain=Oi(ln(Ls)),Hi.layer=Oi(ln(Nu)),Hi.filter=Oi(ln(Af)),Hi.paintProperty=Oi(ln(jc)),Hi.layoutProperty=Oi(ln(Cf));const Uc=Hi,ll=Uc.light,su=Uc.paintProperty,wo=Uc.layoutProperty;function Zi(p,c){let m=!1;if(c&&c.length)for(const E of c)p.fire(new Ot(new Error(E.message))),m=!0;return m}class ma{constructor(c,m,E){const I=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const D=new Int32Array(this.arrayBuffer);c=D[0],this.d=(m=D[1])+2*(E=D[2]);for(let q=0;q<this.d*this.d;q++){const te=D[3+q],ue=D[3+q+1];I.push(te===ue?null:D.subarray(te,ue))}const j=D[3+I.length+1];this.keys=D.subarray(D[3+I.length],j),this.bboxes=D.subarray(j),this.insert=this._insertReadonly}else{this.d=m+2*E;for(let D=0;D<this.d*this.d;D++)I.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=c,this.padding=E,this.scale=m/c,this.uid=0;const k=E/m*c;this.min=-k,this.max=c+k}insert(c,m,E,I,k){this._forEachCell(m,E,I,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(m),this.bboxes.push(E),this.bboxes.push(I),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,m,E,I,k,D){this.cells[k].push(D)}query(c,m,E,I,k){const D=this.min,j=this.max;if(c<=D&&m<=D&&j<=E&&j<=I&&!k)return Array.prototype.slice.call(this.keys);{const q=[];return this._forEachCell(c,m,E,I,this._queryCell,q,{},k),q}}_queryCell(c,m,E,I,k,D,j,q){const te=this.cells[k];if(te!==null){const ue=this.keys,de=this.bboxes;for(let _e=0;_e<te.length;_e++){const Se=te[_e];if(j[Se]===void 0){const Ce=4*Se;(q?q(de[Ce+0],de[Ce+1],de[Ce+2],de[Ce+3]):c<=de[Ce+2]&&m<=de[Ce+3]&&E>=de[Ce+0]&&I>=de[Ce+1])?(j[Se]=!0,D.push(ue[Se])):j[Se]=!1}}}}_forEachCell(c,m,E,I,k,D,j,q){const te=this._convertToCellCoord(c),ue=this._convertToCellCoord(m),de=this._convertToCellCoord(E),_e=this._convertToCellCoord(I);for(let Se=te;Se<=de;Se++)for(let Ce=ue;Ce<=_e;Ce++){const Fe=this.d*Ce+Se;if((!q||q(this._convertFromCellCoord(Se),this._convertFromCellCoord(Ce),this._convertFromCellCoord(Se+1),this._convertFromCellCoord(Ce+1)))&&k.call(this,c,m,E,I,Fe,D,j,q))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,m=3+this.cells.length+1+1;let E=0;for(let D=0;D<this.cells.length;D++)E+=this.cells[D].length;const I=new Int32Array(m+E+this.keys.length+this.bboxes.length);I[0]=this.extent,I[1]=this.n,I[2]=this.padding;let k=m;for(let D=0;D<c.length;D++){const j=c[D];I[3+D]=k,I.set(j,k),k+=j.length}return I[3+c.length]=k,I.set(this.keys,k),k+=this.keys.length,I[3+c.length+1]=k,I.set(this.bboxes,k),k+=this.bboxes.length,I.buffer}static serialize(c,m){const E=c.toArrayBuffer();return m&&m.push(E),{buffer:E}}static deserialize(c){return new ma(c.buffer)}}const Bi={};function Jt(p,c,m={}){if(Bi[p])throw new Error(`${p} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:p,writeable:!1}),Bi[p]={klass:c,omit:m.omit||[],shallow:m.shallow||[]}}Jt("Object",Object),Jt("TransferableGridIndex",ma),Jt("Color",Wt),Jt("Error",Error),Jt("AJAXError",he),Jt("ResolvedImage",Pi),Jt("StylePropertyFunction",Yi),Jt("StyleExpression",li,{omit:["_evaluator"]}),Jt("ZoomDependentExpression",bn),Jt("ZoomConstantExpression",Fl),Jt("CompoundExpression",Jo,{omit:["_evaluate"]});for(const p in Zn)Zn[p]._classRegistryKey||Jt(`Expression_${p}`,Zn[p]);function Rs(p){return p&&typeof ArrayBuffer<"u"&&(p instanceof ArrayBuffer||p.constructor&&p.constructor.name==="ArrayBuffer")}function ps(p,c){if(p==null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob)return p;if(Rs(p)||Ie(p))return c&&c.push(p),p;if(ArrayBuffer.isView(p)){const m=p;return c&&c.push(m.buffer),m}if(p instanceof ImageData)return c&&c.push(p.data.buffer),p;if(Array.isArray(p)){const m=[];for(const E of p)m.push(ps(E,c));return m}if(typeof p=="object"){const m=p.constructor,E=m._classRegistryKey;if(!E)throw new Error("can't serialize object of unregistered class");if(!Bi[E])throw new Error(`${E} is not registered.`);const I=m.serialize?m.serialize(p,c):{};if(m.serialize){if(c&&I===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in p){if(!p.hasOwnProperty(k)||Bi[E].omit.indexOf(k)>=0)continue;const D=p[k];I[k]=Bi[E].shallow.indexOf(k)>=0?D:ps(D,c)}p instanceof Error&&(I.message=p.message)}if(I.$name)throw new Error("$name property is reserved for worker serialization logic.");return E!=="Object"&&(I.$name=E),I}throw new Error("can't serialize object of type "+typeof p)}function Ki(p){if(p==null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob||Rs(p)||Ie(p)||ArrayBuffer.isView(p)||p instanceof ImageData)return p;if(Array.isArray(p))return p.map(Ki);if(typeof p=="object"){const c=p.$name||"Object";if(!Bi[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:m}=Bi[c];if(!m)throw new Error(`can't deserialize unregistered class ${c}`);if(m.deserialize)return m.deserialize(p);const E=Object.create(m.prototype);for(const I of Object.keys(p)){if(I==="$name")continue;const k=p[I];E[I]=Bi[c].shallow.indexOf(I)>=0?k:Ki(k)}return E}throw new Error("can't deserialize object of type "+typeof p)}class If{constructor(){this.first=!0}update(c,m){const E=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=E,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=E,!0):(this.lastFloorZoom>E?(this.lastIntegerZoom=E+1,this.lastIntegerZoomTime=m):this.lastFloorZoom<E&&(this.lastIntegerZoom=E,this.lastIntegerZoomTime=m),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=E,!0))}}const Mt={"Latin-1 Supplement":p=>p>=128&&p<=255,Arabic:p=>p>=1536&&p<=1791,"Arabic Supplement":p=>p>=1872&&p<=1919,"Arabic Extended-A":p=>p>=2208&&p<=2303,"Hangul Jamo":p=>p>=4352&&p<=4607,"Unified Canadian Aboriginal Syllabics":p=>p>=5120&&p<=5759,Khmer:p=>p>=6016&&p<=6143,"Unified Canadian Aboriginal Syllabics Extended":p=>p>=6320&&p<=6399,"General Punctuation":p=>p>=8192&&p<=8303,"Letterlike Symbols":p=>p>=8448&&p<=8527,"Number Forms":p=>p>=8528&&p<=8591,"Miscellaneous Technical":p=>p>=8960&&p<=9215,"Control Pictures":p=>p>=9216&&p<=9279,"Optical Character Recognition":p=>p>=9280&&p<=9311,"Enclosed Alphanumerics":p=>p>=9312&&p<=9471,"Geometric Shapes":p=>p>=9632&&p<=9727,"Miscellaneous Symbols":p=>p>=9728&&p<=9983,"Miscellaneous Symbols and Arrows":p=>p>=11008&&p<=11263,"CJK Radicals Supplement":p=>p>=11904&&p<=12031,"Kangxi Radicals":p=>p>=12032&&p<=12255,"Ideographic Description Characters":p=>p>=12272&&p<=12287,"CJK Symbols and Punctuation":p=>p>=12288&&p<=12351,Hiragana:p=>p>=12352&&p<=12447,Katakana:p=>p>=12448&&p<=12543,Bopomofo:p=>p>=12544&&p<=12591,"Hangul Compatibility Jamo":p=>p>=12592&&p<=12687,Kanbun:p=>p>=12688&&p<=12703,"Bopomofo Extended":p=>p>=12704&&p<=12735,"CJK Strokes":p=>p>=12736&&p<=12783,"Katakana Phonetic Extensions":p=>p>=12784&&p<=12799,"Enclosed CJK Letters and Months":p=>p>=12800&&p<=13055,"CJK Compatibility":p=>p>=13056&&p<=13311,"CJK Unified Ideographs Extension A":p=>p>=13312&&p<=19903,"Yijing Hexagram Symbols":p=>p>=19904&&p<=19967,"CJK Unified Ideographs":p=>p>=19968&&p<=40959,"Yi Syllables":p=>p>=40960&&p<=42127,"Yi Radicals":p=>p>=42128&&p<=42191,"Hangul Jamo Extended-A":p=>p>=43360&&p<=43391,"Hangul Syllables":p=>p>=44032&&p<=55215,"Hangul Jamo Extended-B":p=>p>=55216&&p<=55295,"Private Use Area":p=>p>=57344&&p<=63743,"CJK Compatibility Ideographs":p=>p>=63744&&p<=64255,"Arabic Presentation Forms-A":p=>p>=64336&&p<=65023,"Vertical Forms":p=>p>=65040&&p<=65055,"CJK Compatibility Forms":p=>p>=65072&&p<=65103,"Small Form Variants":p=>p>=65104&&p<=65135,"Arabic Presentation Forms-B":p=>p>=65136&&p<=65279,"Halfwidth and Fullwidth Forms":p=>p>=65280&&p<=65519};function Vc(p){for(const c of p)if(ra(c.charCodeAt(0)))return!0;return!1}function ms(p){for(const c of p)if(!lo(c.charCodeAt(0)))return!1;return!0}function lo(p){return!(Mt.Arabic(p)||Mt["Arabic Supplement"](p)||Mt["Arabic Extended-A"](p)||Mt["Arabic Presentation Forms-A"](p)||Mt["Arabic Presentation Forms-B"](p))}function ra(p){return!(p!==746&&p!==747&&(p<4352||!(Mt["Bopomofo Extended"](p)||Mt.Bopomofo(p)||Mt["CJK Compatibility Forms"](p)&&!(p>=65097&&p<=65103)||Mt["CJK Compatibility Ideographs"](p)||Mt["CJK Compatibility"](p)||Mt["CJK Radicals Supplement"](p)||Mt["CJK Strokes"](p)||!(!Mt["CJK Symbols and Punctuation"](p)||p>=12296&&p<=12305||p>=12308&&p<=12319||p===12336)||Mt["CJK Unified Ideographs Extension A"](p)||Mt["CJK Unified Ideographs"](p)||Mt["Enclosed CJK Letters and Months"](p)||Mt["Hangul Compatibility Jamo"](p)||Mt["Hangul Jamo Extended-A"](p)||Mt["Hangul Jamo Extended-B"](p)||Mt["Hangul Jamo"](p)||Mt["Hangul Syllables"](p)||Mt.Hiragana(p)||Mt["Ideographic Description Characters"](p)||Mt.Kanbun(p)||Mt["Kangxi Radicals"](p)||Mt["Katakana Phonetic Extensions"](p)||Mt.Katakana(p)&&p!==12540||!(!Mt["Halfwidth and Fullwidth Forms"](p)||p===65288||p===65289||p===65293||p>=65306&&p<=65310||p===65339||p===65341||p===65343||p>=65371&&p<=65503||p===65507||p>=65512&&p<=65519)||!(!Mt["Small Form Variants"](p)||p>=65112&&p<=65118||p>=65123&&p<=65126)||Mt["Unified Canadian Aboriginal Syllabics"](p)||Mt["Unified Canadian Aboriginal Syllabics Extended"](p)||Mt["Vertical Forms"](p)||Mt["Yijing Hexagram Symbols"](p)||Mt["Yi Syllables"](p)||Mt["Yi Radicals"](p))))}function ks(p){return!(ra(p)||function(c){return!!(Mt["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||Mt["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||Mt["Letterlike Symbols"](c)||Mt["Number Forms"](c)||Mt["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||Mt["Control Pictures"](c)&&c!==9251||Mt["Optical Character Recognition"](c)||Mt["Enclosed Alphanumerics"](c)||Mt["Geometric Shapes"](c)||Mt["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Mt["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Mt["CJK Symbols and Punctuation"](c)||Mt.Katakana(c)||Mt["Private Use Area"](c)||Mt["CJK Compatibility Forms"](c)||Mt["Small Form Variants"](c)||Mt["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(p))}function cl(p){return p>=1424&&p<=2303||Mt["Arabic Presentation Forms-A"](p)||Mt["Arabic Presentation Forms-B"](p)}function Ds(p,c){return!(!c&&cl(p)||p>=2304&&p<=3583||p>=3840&&p<=4255||Mt.Khmer(p))}function zl(p){for(const c of p)if(cl(c.charCodeAt(0)))return!0;return!1}const Oo="deferred",Ra="loading",_i="loaded";let Eh=null,ka="unavailable",Li=null;const uu=function(p){p&&typeof p=="string"&&p.indexOf("NetworkError")>-1&&(ka="error"),Eh&&Eh(p)};function Of(){fl.fire(new pt("pluginStateChange",{pluginStatus:ka,pluginURL:Li}))}const fl=new vt,lu=function(){return ka},Ji=function(){if(ka!==Oo||!Li)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ka=Ra,Of(),Li&&$e({url:Li},p=>{p?uu(p):(ka=_i,Of())})},ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ka===_i||ci.applyArabicShaping!=null,isLoading:()=>ka===Ra,setState(p){if(!ge())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ka=p.pluginStatus,Li=p.pluginURL},isParsed(){if(!ge())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ci.applyArabicShaping!=null&&ci.processBidirectionalText!=null&&ci.processStyledBidirectionalText!=null},getPluginURL(){if(!ge())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Li}};class fi{constructor(c,m){this.zoom=c,m?(this.now=m.now,this.fadeDuration=m.fadeDuration,this.zoomHistory=m.zoomHistory,this.transition=m.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new If,this.transition={})}isSupportedScript(c){return function(m,E){for(const I of m)if(!Ds(I.charCodeAt(0),E))return!1;return!0}(c,ci.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,m=c-Math.floor(c),E=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:m+(1-m)*E}:{fromScale:.5,toScale:1,t:1-(1-E)*m}}}class To{constructor(c,m){this.property=c,this.value=m,this.expression=function(E,I){if(Oa(E))return new Yi(E,I);if(Xi(E)){const k=yr(E,I);if(k.result==="error")throw new Error(k.value.map(D=>`${D.key}: ${D.message}`).join(", "));return k.value}{let k=E;return I.type==="color"&&typeof E=="string"?k=Wt.parse(E):I.type!=="padding"||typeof E!="number"&&!Array.isArray(E)?I.type==="variableAnchorOffsetCollection"&&Array.isArray(E)&&(k=Si.parse(E)):k=Mi.parse(E),{kind:"constant",evaluate:()=>k}}}(m===void 0?c.specification.default:m,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,m,E){return this.property.possiblyEvaluate(this,c,m,E)}}class Bl{constructor(c){this.property=c,this.value=new To(c,void 0)}transitioned(c,m){return new ji(this.property,this.value,m,x({},c.transition,this.transition),c.now)}untransitioned(){return new ji(this.property,this.value,null,{},0)}}class Tf{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return Z(this._values[c].value.value)}setValue(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Bl(this._values[c].property)),this._values[c].value=new To(this._values[c].property,m===null?void 0:Z(m))}getTransition(c){return Z(this._values[c].transition)}setTransition(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Bl(this._values[c].property)),this._values[c].transition=Z(m)||void 0}serialize(){const c={};for(const m of Object.keys(this._values)){const E=this.getValue(m);E!==void 0&&(c[m]=E);const I=this.getTransition(m);I!==void 0&&(c[`${m}-transition`]=I)}return c}transitioned(c,m){const E=new um(this._properties);for(const I of Object.keys(this._values))E._values[I]=this._values[I].transitioned(c,m._values[I]);return E}untransitioned(){const c=new um(this._properties);for(const m of Object.keys(this._values))c._values[m]=this._values[m].untransitioned();return c}}class ji{constructor(c,m,E,I,k){this.property=c,this.value=m,this.begin=k+I.delay||0,this.end=this.begin+I.duration||0,c.specification.transition&&(I.delay||I.duration)&&(this.prior=E)}possiblyEvaluate(c,m,E){const I=c.now||0,k=this.value.possiblyEvaluate(c,m,E),D=this.prior;if(D){if(I>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(I<this.begin)return D.possiblyEvaluate(c,m,E);{const j=(I-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(c,m,E),k,function(q){if(q<=0)return 0;if(q>=1)return 1;const te=q*q,ue=te*q;return 4*(q<.5?ue:3*(q-te)+ue-.75)}(j))}}return k}}class um{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,m,E){const I=new hl(this._properties);for(const k of Object.keys(this._values))I._values[k]=this._values[k].possiblyEvaluate(c,m,E);return I}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class cu{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return Z(this._values[c].value)}setValue(c,m){this._values[c]=new To(this._values[c].property,m===null?void 0:Z(m))}serialize(){const c={};for(const m of Object.keys(this._values)){const E=this.getValue(m);E!==void 0&&(c[m]=E)}return c}possiblyEvaluate(c,m,E){const I=new hl(this._properties);for(const k of Object.keys(this._values))I._values[k]=this._values[k].possiblyEvaluate(c,m,E);return I}}class Ns{constructor(c,m,E){this.property=c,this.value=m,this.parameters=E}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,m,E,I){return this.property.evaluate(this.value,this.parameters,c,m,E,I)}}class hl{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class gr{constructor(c){this.specification=c}possiblyEvaluate(c,m){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(m)}interpolate(c,m,E){const I=qi[this.specification.type];return I?I(c,m,E):c}}class Ir{constructor(c,m){this.specification=c,this.overrides=m}possiblyEvaluate(c,m,E,I){return new Ns(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(m,null,{},E,I)}:c.expression,m)}interpolate(c,m,E){if(c.value.kind!=="constant"||m.value.kind!=="constant")return c;if(c.value.value===void 0||m.value.value===void 0)return new Ns(this,{kind:"constant",value:void 0},c.parameters);const I=qi[this.specification.type];if(I){const k=I(c.value.value,m.value.value,E);return new Ns(this,{kind:"constant",value:k},c.parameters)}return c}evaluate(c,m,E,I,k,D){return c.kind==="constant"?c.value:c.evaluate(m,E,I,k,D)}}class Ha extends Ir{possiblyEvaluate(c,m,E,I){if(c.value===void 0)return new Ns(this,{kind:"constant",value:void 0},m);if(c.expression.kind==="constant"){const k=c.expression.evaluate(m,null,{},E,I),D=c.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,j=this._calculate(D,D,D,m);return new Ns(this,{kind:"constant",value:j},m)}if(c.expression.kind==="camera"){const k=this._calculate(c.expression.evaluate({zoom:m.zoom-1}),c.expression.evaluate({zoom:m.zoom}),c.expression.evaluate({zoom:m.zoom+1}),m);return new Ns(this,{kind:"constant",value:k},m)}return new Ns(this,c.expression,m)}evaluate(c,m,E,I,k,D){if(c.kind==="source"){const j=c.evaluate(m,E,I,k,D);return this._calculate(j,j,j,m)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(m.zoom)-1},E,I),c.evaluate({zoom:Math.floor(m.zoom)},E,I),c.evaluate({zoom:Math.floor(m.zoom)+1},E,I),m):c.value}_calculate(c,m,E,I){return I.zoom>I.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:E,to:m}}interpolate(c){return c}}class jl{constructor(c){this.specification=c}possiblyEvaluate(c,m,E,I){if(c.value!==void 0){if(c.expression.kind==="constant"){const k=c.expression.evaluate(m,null,{},E,I);return this._calculate(k,k,k,m)}return this._calculate(c.expression.evaluate(new fi(Math.floor(m.zoom-1),m)),c.expression.evaluate(new fi(Math.floor(m.zoom),m)),c.expression.evaluate(new fi(Math.floor(m.zoom+1),m)),m)}}_calculate(c,m,E,I){return I.zoom>I.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:E,to:m}}interpolate(c){return c}}class Ul{constructor(c){this.specification=c}possiblyEvaluate(c,m,E,I){return!!c.expression.evaluate(m,null,{},E,I)}interpolate(){return!1}}class ga{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in c){const E=c[m];E.specification.overridable&&this.overridableProperties.push(m);const I=this.defaultPropertyValues[m]=new To(E,void 0),k=this.defaultTransitionablePropertyValues[m]=new Bl(E);this.defaultTransitioningPropertyValues[m]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=I.possiblyEvaluate({})}}}Jt("DataDrivenProperty",Ir),Jt("DataConstantProperty",gr),Jt("CrossFadedDataDrivenProperty",Ha),Jt("CrossFadedProperty",jl),Jt("ColorRampProperty",Ul);const Fs="-transition";class na extends vt{constructor(c,m){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),m.layout&&(this._unevaluatedLayout=new cu(m.layout)),m.paint)){this._transitionablePaint=new Tf(m.paint);for(const E in c.paint)this.setPaintProperty(E,c.paint[E],{validate:!1});for(const E in c.layout)this.setLayoutProperty(E,c.layout[E],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hl(m.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,m,E={}){m!=null&&this._validate(wo,`layers.${this.id}.layout.${c}`,c,m,E)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,m):this.visibility=m)}getPaintProperty(c){return c.endsWith(Fs)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,m,E={}){if(m!=null&&this._validate(su,`layers.${this.id}.paint.${c}`,c,m,E))return!1;if(c.endsWith(Fs))return this._transitionablePaint.setTransition(c.slice(0,-11),m||void 0),!1;{const I=this._transitionablePaint._values[c],k=I.property.specification["property-type"]==="cross-faded-data-driven",D=I.value.isDataDriven(),j=I.value;this._transitionablePaint.setValue(c,m),this._handleSpecialPaintPropertyUpdate(c);const q=this._transitionablePaint._values[c].value;return q.isDataDriven()||D||k||this._handleOverridablePaintPropertyUpdate(c,j,q)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,m,E){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,m){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,m)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),H(c,(m,E)=>!(m===void 0||E==="layout"&&!Object.keys(m).length||E==="paint"&&!Object.keys(m).length))}_validate(c,m,E,I,k={}){return(!k||k.validate!==!1)&&Zi(this,c.call(Uc,{key:m,layerType:this.type,objectKey:E,value:I,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const m=this.paint.get(c);if(m instanceof Ns&&Is(m.property.specification)&&(m.value.kind==="source"||m.value.kind==="composite")&&m.value.isStateDependent)return!0}return!1}}const Mf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $u{constructor(c,m){this._structArray=c,this._pos1=m*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ei{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,m){return c._trim(),m&&(c.isTransferred=!0,m.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const m=Object.create(this.prototype);return m.arrayBuffer=c.arrayBuffer,m.length=c.length,m.capacity=c.arrayBuffer.byteLength/m.bytesPerElement,m._refreshViews(),m}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const m=this.uint8;this._refreshViews(),m&&this.uint8.set(m)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function nr(p,c=1){let m=0,E=0;return{members:p.map(I=>{const k=Mf[I.type].BYTES_PER_ELEMENT,D=m=zu(m,Math.max(c,k)),j=I.components||1;return E=Math.max(E,k),m+=k*j,{name:I.name,type:I.type,components:j,offset:D}}),size:zu(m,Math.max(E,c)),alignment:c}}function zu(p,c){return Math.ceil(p/c)*c}class ia extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m){const E=this.length;return this.resize(E+1),this.emplace(E,c,m)}emplace(c,m,E){const I=2*c;return this.int16[I+0]=m,this.int16[I+1]=E,c}}ia.prototype.bytesPerElement=4,Jt("StructArrayLayout2i4",ia);class $s extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,E)}emplace(c,m,E,I){const k=3*c;return this.int16[k+0]=m,this.int16[k+1]=E,this.int16[k+2]=I,c}}$s.prototype.bytesPerElement=6,Jt("StructArrayLayout3i6",$s);class Mo extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,E,I){const k=this.length;return this.resize(k+1),this.emplace(k,c,m,E,I)}emplace(c,m,E,I,k){const D=4*c;return this.int16[D+0]=m,this.int16[D+1]=E,this.int16[D+2]=I,this.int16[D+3]=k,c}}Mo.prototype.bytesPerElement=8,Jt("StructArrayLayout4i8",Mo);class Lf extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D){const j=this.length;return this.resize(j+1),this.emplace(j,c,m,E,I,k,D)}emplace(c,m,E,I,k,D,j){const q=6*c;return this.int16[q+0]=m,this.int16[q+1]=E,this.int16[q+2]=I,this.int16[q+3]=k,this.int16[q+4]=D,this.int16[q+5]=j,c}}Lf.prototype.bytesPerElement=12,Jt("StructArrayLayout2i4i12",Lf);class Lo extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D){const j=this.length;return this.resize(j+1),this.emplace(j,c,m,E,I,k,D)}emplace(c,m,E,I,k,D,j){const q=4*c,te=8*c;return this.int16[q+0]=m,this.int16[q+1]=E,this.uint8[te+4]=I,this.uint8[te+5]=k,this.uint8[te+6]=D,this.uint8[te+7]=j,c}}Lo.prototype.bytesPerElement=8,Jt("StructArrayLayout2i4ub8",Lo);class mi extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m){const E=this.length;return this.resize(E+1),this.emplace(E,c,m)}emplace(c,m,E){const I=2*c;return this.float32[I+0]=m,this.float32[I+1]=E,c}}mi.prototype.bytesPerElement=8,Jt("StructArrayLayout2f8",mi);class uc extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D,j,q,te,ue){const de=this.length;return this.resize(de+1),this.emplace(de,c,m,E,I,k,D,j,q,te,ue)}emplace(c,m,E,I,k,D,j,q,te,ue,de){const _e=10*c;return this.uint16[_e+0]=m,this.uint16[_e+1]=E,this.uint16[_e+2]=I,this.uint16[_e+3]=k,this.uint16[_e+4]=D,this.uint16[_e+5]=j,this.uint16[_e+6]=q,this.uint16[_e+7]=te,this.uint16[_e+8]=ue,this.uint16[_e+9]=de,c}}uc.prototype.bytesPerElement=20,Jt("StructArrayLayout10ui20",uc);class fu extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D,j,q,te,ue,de,_e){const Se=this.length;return this.resize(Se+1),this.emplace(Se,c,m,E,I,k,D,j,q,te,ue,de,_e)}emplace(c,m,E,I,k,D,j,q,te,ue,de,_e,Se){const Ce=12*c;return this.int16[Ce+0]=m,this.int16[Ce+1]=E,this.int16[Ce+2]=I,this.int16[Ce+3]=k,this.uint16[Ce+4]=D,this.uint16[Ce+5]=j,this.uint16[Ce+6]=q,this.uint16[Ce+7]=te,this.int16[Ce+8]=ue,this.int16[Ce+9]=de,this.int16[Ce+10]=_e,this.int16[Ce+11]=Se,c}}fu.prototype.bytesPerElement=24,Jt("StructArrayLayout4i4ui4i24",fu);class u extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,E)}emplace(c,m,E,I){const k=3*c;return this.float32[k+0]=m,this.float32[k+1]=E,this.float32[k+2]=I,c}}u.prototype.bytesPerElement=12,Jt("StructArrayLayout3f12",u);class h extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint32[1*c+0]=m,c}}h.prototype.bytesPerElement=4,Jt("StructArrayLayout1ul4",h);class y extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D,j,q,te){const ue=this.length;return this.resize(ue+1),this.emplace(ue,c,m,E,I,k,D,j,q,te)}emplace(c,m,E,I,k,D,j,q,te,ue){const de=10*c,_e=5*c;return this.int16[de+0]=m,this.int16[de+1]=E,this.int16[de+2]=I,this.int16[de+3]=k,this.int16[de+4]=D,this.int16[de+5]=j,this.uint32[_e+3]=q,this.uint16[de+8]=te,this.uint16[de+9]=ue,c}}y.prototype.bytesPerElement=20,Jt("StructArrayLayout6i1ul2ui20",y);class w extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D){const j=this.length;return this.resize(j+1),this.emplace(j,c,m,E,I,k,D)}emplace(c,m,E,I,k,D,j){const q=6*c;return this.int16[q+0]=m,this.int16[q+1]=E,this.int16[q+2]=I,this.int16[q+3]=k,this.int16[q+4]=D,this.int16[q+5]=j,c}}w.prototype.bytesPerElement=12,Jt("StructArrayLayout2i2i2i12",w);class O extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k){const D=this.length;return this.resize(D+1),this.emplace(D,c,m,E,I,k)}emplace(c,m,E,I,k,D){const j=4*c,q=8*c;return this.float32[j+0]=m,this.float32[j+1]=E,this.float32[j+2]=I,this.int16[q+6]=k,this.int16[q+7]=D,c}}O.prototype.bytesPerElement=16,Jt("StructArrayLayout2f1f2i16",O);class U extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,E,I){const k=this.length;return this.resize(k+1),this.emplace(k,c,m,E,I)}emplace(c,m,E,I,k){const D=12*c,j=3*c;return this.uint8[D+0]=m,this.uint8[D+1]=E,this.float32[j+1]=I,this.float32[j+2]=k,c}}U.prototype.bytesPerElement=12,Jt("StructArrayLayout2ub2f12",U);class J extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,E)}emplace(c,m,E,I){const k=3*c;return this.uint16[k+0]=m,this.uint16[k+1]=E,this.uint16[k+2]=I,c}}J.prototype.bytesPerElement=6,Jt("StructArrayLayout3ui6",J);class pe extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe,Ue,We){const st=this.length;return this.resize(st+1),this.emplace(st,c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe,Ue,We)}emplace(c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe,Ue,We,st){const Je=24*c,lt=12*c,ft=48*c;return this.int16[Je+0]=m,this.int16[Je+1]=E,this.uint16[Je+2]=I,this.uint16[Je+3]=k,this.uint32[lt+2]=D,this.uint32[lt+3]=j,this.uint32[lt+4]=q,this.uint16[Je+10]=te,this.uint16[Je+11]=ue,this.uint16[Je+12]=de,this.float32[lt+7]=_e,this.float32[lt+8]=Se,this.uint8[ft+36]=Ce,this.uint8[ft+37]=Fe,this.uint8[ft+38]=Ue,this.uint32[lt+10]=We,this.int16[Je+22]=st,c}}pe.prototype.bytesPerElement=48,Jt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",pe);class Ae extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe,Ue,We,st,Je,lt,ft,Et,Yt,mr,Xt,Ut,Ft,tr){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe,Ue,We,st,Je,lt,ft,Et,Yt,mr,Xt,Ut,Ft,tr)}emplace(c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe,Ue,We,st,Je,lt,ft,Et,Yt,mr,Xt,Ut,Ft,tr,Bt){const Tt=32*c,Pr=16*c;return this.int16[Tt+0]=m,this.int16[Tt+1]=E,this.int16[Tt+2]=I,this.int16[Tt+3]=k,this.int16[Tt+4]=D,this.int16[Tt+5]=j,this.int16[Tt+6]=q,this.int16[Tt+7]=te,this.uint16[Tt+8]=ue,this.uint16[Tt+9]=de,this.uint16[Tt+10]=_e,this.uint16[Tt+11]=Se,this.uint16[Tt+12]=Ce,this.uint16[Tt+13]=Fe,this.uint16[Tt+14]=Ue,this.uint16[Tt+15]=We,this.uint16[Tt+16]=st,this.uint16[Tt+17]=Je,this.uint16[Tt+18]=lt,this.uint16[Tt+19]=ft,this.uint16[Tt+20]=Et,this.uint16[Tt+21]=Yt,this.uint16[Tt+22]=mr,this.uint32[Pr+12]=Xt,this.float32[Pr+13]=Ut,this.float32[Pr+14]=Ft,this.uint16[Tt+30]=tr,this.uint16[Tt+31]=Bt,c}}Ae.prototype.bytesPerElement=64,Jt("StructArrayLayout8i15ui1ul2f2ui64",Ae);class A extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.float32[1*c+0]=m,c}}A.prototype.bytesPerElement=4,Jt("StructArrayLayout1f4",A);class l extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,E)}emplace(c,m,E,I){const k=3*c;return this.uint16[6*c+0]=m,this.float32[k+1]=E,this.float32[k+2]=I,c}}l.prototype.bytesPerElement=12,Jt("StructArrayLayout1ui2f12",l);class v extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,E)}emplace(c,m,E,I){const k=4*c;return this.uint32[2*c+0]=m,this.uint16[k+2]=E,this.uint16[k+3]=I,c}}v.prototype.bytesPerElement=8,Jt("StructArrayLayout1ul2ui8",v);class S extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m){const E=this.length;return this.resize(E+1),this.emplace(E,c,m)}emplace(c,m,E){const I=2*c;return this.uint16[I+0]=m,this.uint16[I+1]=E,c}}S.prototype.bytesPerElement=4,Jt("StructArrayLayout2ui4",S);class C extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint16[1*c+0]=m,c}}C.prototype.bytesPerElement=2,Jt("StructArrayLayout1ui2",C);class M extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,E,I){const k=this.length;return this.resize(k+1),this.emplace(k,c,m,E,I)}emplace(c,m,E,I,k){const D=4*c;return this.float32[D+0]=m,this.float32[D+1]=E,this.float32[D+2]=I,this.float32[D+3]=k,c}}M.prototype.bytesPerElement=16,Jt("StructArrayLayout4f16",M);class z extends $u{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new _(this.anchorPointX,this.anchorPointY)}}z.prototype.size=20;class V extends y{get(c){return new z(this,c)}}Jt("CollisionBoxArray",V);class X extends $u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}X.prototype.size=48;class ee extends pe{get(c){return new X(this,c)}}Jt("PlacedSymbolArray",ee);class se extends $u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}se.prototype.size=64;class le extends Ae{get(c){return new se(this,c)}}Jt("SymbolInstanceArray",le);class we extends A{getoffsetX(c){return this.float32[1*c+0]}}Jt("GlyphOffsetArray",we);class De extends $s{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}Jt("SymbolLineVertexArray",De);class ke extends $u{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ke.prototype.size=12;class Be extends l{get(c){return new ke(this,c)}}Jt("TextAnchorOffsetArray",Be);class Re extends $u{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Re.prototype.size=8;class et extends v{get(c){return new Re(this,c)}}Jt("FeatureIndexArray",et);class ct extends ia{}class Ve extends ia{}class it extends ia{}class ht extends Lf{}class dt extends Lo{}class wt extends mi{}class At extends uc{}class St extends fu{}class Dt extends u{}class pr extends h{}class cn extends w{}class jt extends U{}class xr extends J{}class fr extends S{}const Ui=nr([{name:"a_pos",components:2,type:"Int16"}],4),{members:fn}=Ui;class Sr{constructor(c=[]){this.segments=c}prepareSegment(c,m,E,I){let k=this.segments[this.segments.length-1];return c>Sr.MAX_VERTEX_ARRAY_LENGTH&&W(`Max vertices per segment is ${Sr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!k||k.vertexLength+c>Sr.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==I)&&(k={vertexOffset:m.length,primitiveOffset:E.length,vertexLength:0,primitiveLength:0},I!==void 0&&(k.sortKey=I),this.segments.push(k)),k}get(){return this.segments}destroy(){for(const c of this.segments)for(const m in c.vaos)c.vaos[m].destroy()}static simpleSegment(c,m,E,I){return new Sr([{vertexOffset:c,primitiveOffset:m,vertexLength:E,primitiveLength:I,vaos:{},sortKey:0}])}}function hn(p,c){return 256*(p=F(Math.floor(p),0,255))+F(Math.floor(c),0,255)}Sr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt("SegmentVector",Sr);const Qi=nr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var gi={exports:{}},hu={exports:{}};hu.exports=function(p,c){var m,E,I,k,D,j,q,te;for(E=p.length-(m=3&p.length),I=c,D=3432918353,j=461845907,te=0;te<E;)q=255&p.charCodeAt(te)|(255&p.charCodeAt(++te))<<8|(255&p.charCodeAt(++te))<<16|(255&p.charCodeAt(++te))<<24,++te,I=27492+(65535&(k=5*(65535&(I=(I^=q=(65535&(q=(q=(65535&q)*D+(((q>>>16)*D&65535)<<16)&4294967295)<<15|q>>>17))*j+(((q>>>16)*j&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(k>>>16)&65535)<<16);switch(q=0,m){case 3:q^=(255&p.charCodeAt(te+2))<<16;case 2:q^=(255&p.charCodeAt(te+1))<<8;case 1:I^=q=(65535&(q=(q=(65535&(q^=255&p.charCodeAt(te)))*D+(((q>>>16)*D&65535)<<16)&4294967295)<<15|q>>>17))*j+(((q>>>16)*j&65535)<<16)&4294967295}return I^=p.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0};var Da=hu.exports,Eo={exports:{}};Eo.exports=function(p,c){for(var m,E=p.length,I=c^E,k=0;E>=4;)m=1540483477*(65535&(m=255&p.charCodeAt(k)|(255&p.charCodeAt(++k))<<8|(255&p.charCodeAt(++k))<<16|(255&p.charCodeAt(++k))<<24))+((1540483477*(m>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),E-=4,++k;switch(E){case 3:I^=(255&p.charCodeAt(k+2))<<16;case 2:I^=(255&p.charCodeAt(k+1))<<8;case 1:I=1540483477*(65535&(I^=255&p.charCodeAt(k)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0};var zs=Da,Vl=Eo.exports;gi.exports=zs,gi.exports.murmur3=zs,gi.exports.murmur2=Vl;var dl=d(gi.exports);class Gl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,m,E,I){this.ids.push(Sh(c)),this.positions.push(m,E,I)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const m=Sh(c);let E=0,I=this.ids.length-1;for(;E<I;){const D=E+I>>1;this.ids[D]>=m?I=D:E=D+1}const k=[];for(;this.ids[E]===m;)k.push({index:this.positions[3*E],start:this.positions[3*E+1],end:this.positions[3*E+2]}),E++;return k}static serialize(c,m){const E=new Float64Array(c.ids),I=new Uint32Array(c.positions);return Gc(E,I,0,E.length-1),m&&m.push(E.buffer,I.buffer),{ids:E,positions:I}}static deserialize(c){const m=new Gl;return m.ids=c.ids,m.positions=c.positions,m.indexed=!0,m}}function Sh(p){const c=+p;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:dl(String(p))}function Gc(p,c,m,E){for(;m<E;){const I=p[m+E>>1];let k=m-1,D=E+1;for(;;){do k++;while(p[k]<I);do D--;while(p[D]>I);if(k>=D)break;lc(p,k,D),lc(c,3*k,3*D),lc(c,3*k+1,3*D+1),lc(c,3*k+2,3*D+2)}D-m<E-D?(Gc(p,c,m,D),m=D+1):(Gc(p,c,D+1,E),E=D)}}function lc(p,c,m){const E=p[c];p[c]=p[m],p[m]=E}Jt("FeaturePositionMap",Gl);class Ro{constructor(c,m){this.gl=c.gl,this.location=m}}class oa extends Ro{constructor(c,m){super(c,m),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class Za extends Ro{constructor(c,m){super(c,m),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class Ph extends Ro{constructor(c,m){super(c,m),this.current=Wt.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const aa=new Float32Array(16);function qo(p){return[hn(255*p.r,255*p.g),hn(255*p.b,255*p.a)]}class Ka{constructor(c,m,E){this.value=c,this.uniformNames=m.map(I=>`u_${I}`),this.type=E}setUniform(c,m,E){c.set(E.constantOr(this.value))}getBinding(c,m,E){return this.type==="color"?new Ph(c,m):new oa(c,m)}}class eo{constructor(c,m){this.uniformNames=m.map(E=>`u_${E}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,m){this.pixelRatioFrom=m.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=m.tlbr,this.patternTo=c.tlbr}setUniform(c,m,E,I){const k=I==="u_pattern_to"?this.patternTo:I==="u_pattern_from"?this.patternFrom:I==="u_pixel_ratio_to"?this.pixelRatioTo:I==="u_pixel_ratio_from"?this.pixelRatioFrom:null;k&&c.set(k)}getBinding(c,m,E){return E.substr(0,9)==="u_pattern"?new Za(c,m):new oa(c,m)}}class cc{constructor(c,m,E,I){this.expression=c,this.type=E,this.maxValue=0,this.paintVertexAttributes=m.map(k=>({name:`a_${k}`,type:"Float32",components:E==="color"?2:1,offset:0})),this.paintVertexArray=new I}populatePaintArray(c,m,E,I,k){const D=this.paintVertexArray.length,j=this.expression.evaluate(new fi(0),m,{},I,[],k);this.paintVertexArray.resize(c),this._setPaintValue(D,c,j)}updatePaintArray(c,m,E,I){const k=this.expression.evaluate({zoom:0},E,I);this._setPaintValue(c,m,k)}_setPaintValue(c,m,E){if(this.type==="color"){const I=qo(E);for(let k=c;k<m;k++)this.paintVertexArray.emplace(k,I[0],I[1])}else{for(let I=c;I<m;I++)this.paintVertexArray.emplace(I,E);this.maxValue=Math.max(this.maxValue,Math.abs(E))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pl{constructor(c,m,E,I,k,D){this.expression=c,this.uniformNames=m.map(j=>`u_${j}_t`),this.type=E,this.useIntegerZoom=I,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=m.map(j=>({name:`a_${j}`,type:"Float32",components:E==="color"?4:2,offset:0})),this.paintVertexArray=new D}populatePaintArray(c,m,E,I,k){const D=this.expression.evaluate(new fi(this.zoom),m,{},I,[],k),j=this.expression.evaluate(new fi(this.zoom+1),m,{},I,[],k),q=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(q,c,D,j)}updatePaintArray(c,m,E,I){const k=this.expression.evaluate({zoom:this.zoom},E,I),D=this.expression.evaluate({zoom:this.zoom+1},E,I);this._setPaintValue(c,m,k,D)}_setPaintValue(c,m,E,I){if(this.type==="color"){const k=qo(E),D=qo(I);for(let j=c;j<m;j++)this.paintVertexArray.emplace(j,k[0],k[1],D[0],D[1])}else{for(let k=c;k<m;k++)this.paintVertexArray.emplace(k,E,I);this.maxValue=Math.max(this.maxValue,Math.abs(E),Math.abs(I))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,m){const E=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,I=F(this.expression.interpolationFactor(E,this.zoom,this.zoom+1),0,1);c.set(I)}getBinding(c,m,E){return new oa(c,m)}}class qc{constructor(c,m,E,I,k,D){this.expression=c,this.type=m,this.useIntegerZoom=E,this.zoom=I,this.layerId=D,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(c,m,E){const I=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(I,c,m.patterns&&m.patterns[this.layerId],E)}updatePaintArray(c,m,E,I,k){this._setPaintValues(c,m,E.patterns&&E.patterns[this.layerId],k)}_setPaintValues(c,m,E,I){if(!I||!E)return;const{min:k,mid:D,max:j}=E,q=I[k],te=I[D],ue=I[j];if(q&&te&&ue)for(let de=c;de<m;de++)this.zoomInPaintVertexArray.emplace(de,te.tl[0],te.tl[1],te.br[0],te.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],te.pixelRatio,q.pixelRatio),this.zoomOutPaintVertexArray.emplace(de,te.tl[0],te.tl[1],te.br[0],te.br[1],ue.tl[0],ue.tl[1],ue.br[0],ue.br[1],te.pixelRatio,ue.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,Qi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,Qi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class U1{constructor(c,m,E){this.binders={},this._buffers=[];const I=[];for(const k in c.paint._values){if(!E(k))continue;const D=c.paint.get(k);if(!(D instanceof Ns&&Is(D.property.specification)))continue;const j=kA(k,c.type),q=D.value,te=D.property.specification.type,ue=D.property.useIntegerZoom,de=D.property.specification["property-type"],_e=de==="cross-faded"||de==="cross-faded-data-driven";if(q.kind==="constant")this.binders[k]=_e?new eo(q.value,j):new Ka(q.value,j,te),I.push(`/u_${k}`);else if(q.kind==="source"||_e){const Se=kf(k,te,"source");this.binders[k]=_e?new qc(q,te,ue,m,Se,c.id):new cc(q,j,te,Se),I.push(`/a_${k}`)}else{const Se=kf(k,te,"composite");this.binders[k]=new pl(q,j,te,ue,m,Se),I.push(`/z_${k}`)}}this.cacheKey=I.sort().join("")}getMaxValue(c){const m=this.binders[c];return m instanceof cc||m instanceof pl?m.maxValue:0}populatePaintArrays(c,m,E,I,k){for(const D in this.binders){const j=this.binders[D];(j instanceof cc||j instanceof pl||j instanceof qc)&&j.populatePaintArray(c,m,E,I,k)}}setConstantPatternPositions(c,m){for(const E in this.binders){const I=this.binders[E];I instanceof eo&&I.setConstantPatternPositions(c,m)}}updatePaintArrays(c,m,E,I,k){let D=!1;for(const j in c){const q=m.getPositions(j);for(const te of q){const ue=E.feature(te.index);for(const de in this.binders){const _e=this.binders[de];if((_e instanceof cc||_e instanceof pl||_e instanceof qc)&&_e.expression.isStateDependent===!0){const Se=I.paint.get(de);_e.expression=Se.value,_e.updatePaintArray(te.start,te.end,ue,c[j],k),D=!0}}}}return D}defines(){const c=[];for(const m in this.binders){const E=this.binders[m];(E instanceof Ka||E instanceof eo)&&c.push(...E.uniformNames.map(I=>`#define HAS_UNIFORM_${I}`))}return c}getBinderAttributes(){const c=[];for(const m in this.binders){const E=this.binders[m];if(E instanceof cc||E instanceof pl)for(let I=0;I<E.paintVertexAttributes.length;I++)c.push(E.paintVertexAttributes[I].name);else if(E instanceof qc)for(let I=0;I<Qi.members.length;I++)c.push(Qi.members[I].name)}return c}getBinderUniforms(){const c=[];for(const m in this.binders){const E=this.binders[m];if(E instanceof Ka||E instanceof eo||E instanceof pl)for(const I of E.uniformNames)c.push(I)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,m){const E=[];for(const I in this.binders){const k=this.binders[I];if(k instanceof Ka||k instanceof eo||k instanceof pl){for(const D of k.uniformNames)if(m[D]){const j=k.getBinding(c,m[D],D);E.push({name:D,property:I,binding:j})}}}return E}setUniforms(c,m,E,I){for(const{name:k,property:D,binding:j}of m)this.binders[D].setUniform(j,I,E.get(D),k)}updatePaintBuffers(c){this._buffers=[];for(const m in this.binders){const E=this.binders[m];if(c&&E instanceof qc){const I=c.fromScale===2?E.zoomInPaintVertexBuffer:E.zoomOutPaintVertexBuffer;I&&this._buffers.push(I)}else(E instanceof cc||E instanceof pl)&&E.paintVertexBuffer&&this._buffers.push(E.paintVertexBuffer)}}upload(c){for(const m in this.binders){const E=this.binders[m];(E instanceof cc||E instanceof pl||E instanceof qc)&&E.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const m=this.binders[c];(m instanceof cc||m instanceof pl||m instanceof qc)&&m.destroy()}}}class Rf{constructor(c,m,E=()=>!0){this.programConfigurations={};for(const I of c)this.programConfigurations[I.id]=new U1(I,m,E);this.needsUpload=!1,this._featureMap=new Gl,this._bufferOffset=0}populatePaintArrays(c,m,E,I,k,D){for(const j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(c,m,I,k,D);m.id!==void 0&&this._featureMap.add(m.id,E,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,m,E,I){for(const k of E)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(c,this._featureMap,m,k,I)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const m in this.programConfigurations)this.programConfigurations[m].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function kA(p,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[p]||[p.replace(`${c}-`,"").replace(/-/g,"_")]}function kf(p,c,m){const E={color:{source:mi,composite:M},number:{source:A,composite:mi}},I=function(k){return{"line-pattern":{source:At,composite:At},"fill-pattern":{source:At,composite:At},"fill-extrusion-pattern":{source:At,composite:At}}[k]}(p);return I&&I[m]||E[c][m]}Jt("ConstantBinder",Ka),Jt("CrossFadedConstantBinder",eo),Jt("SourceExpressionBinder",cc),Jt("CrossFadedCompositeBinder",qc),Jt("CompositeExpressionBinder",pl),Jt("ProgramConfiguration",U1,{omit:["_buffers"]}),Jt("ProgramConfigurationSet",Rf);const co=8192,lm=Math.pow(2,14)-1,Mv=-lm-1;function fc(p){const c=co/p.extent,m=p.loadGeometry();for(let E=0;E<m.length;E++){const I=m[E];for(let k=0;k<I.length;k++){const D=I[k],j=Math.round(D.x*c),q=Math.round(D.y*c);D.x=F(j,Mv,lm),D.y=F(q,Mv,lm),(j<D.x||j>D.x+1||q<D.y||q>D.y+1)&&W("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return m}function Wc(p,c){return{type:p.type,id:p.id,properties:p.properties,geometry:c?fc(p):[]}}function Ah(p,c,m,E,I){p.emplaceBack(2*c+(E+1)/2,2*m+(I+1)/2)}class DA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Ve,this.indexArray=new xr,this.segments=new Sr,this.programConfigurations=new Rf(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,E){const I=this.layers[0],k=[];let D=null,j=!1;I.type==="circle"&&(D=I.layout.get("circle-sort-key"),j=!D.isConstant());for(const{feature:q,id:te,index:ue,sourceLayerIndex:de}of c){const _e=this.layers[0]._featureFilter.needGeometry,Se=Wc(q,_e);if(!this.layers[0]._featureFilter.filter(new fi(this.zoom),Se,E))continue;const Ce=j?D.evaluate(Se,{},E):void 0,Fe={id:te,properties:q.properties,type:q.type,sourceLayerIndex:de,index:ue,geometry:_e?Se.geometry:fc(q),patterns:{},sortKey:Ce};k.push(Fe)}j&&k.sort((q,te)=>q.sortKey-te.sortKey);for(const q of k){const{geometry:te,index:ue,sourceLayerIndex:de}=q,_e=c[ue].feature;this.addFeature(q,te,ue,E),m.featureIndex.insert(_e,te,ue,de,this.index)}}update(c,m,E){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,E)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,fn),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,m,E,I){for(const k of m)for(const D of k){const j=D.x,q=D.y;if(j<0||j>=co||q<0||q>=co)continue;const te=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),ue=te.vertexLength;Ah(this.layoutVertexArray,j,q,-1,-1),Ah(this.layoutVertexArray,j,q,1,-1),Ah(this.layoutVertexArray,j,q,1,1),Ah(this.layoutVertexArray,j,q,-1,1),this.indexArray.emplaceBack(ue,ue+1,ue+2),this.indexArray.emplaceBack(ue,ue+3,ue+2),te.vertexLength+=4,te.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,E,{},I)}}function $3(p,c){for(let m=0;m<p.length;m++)if(cm(c,p[m]))return!0;for(let m=0;m<c.length;m++)if(cm(p,c[m]))return!0;return!!NA(p,c)}function VQ(p,c,m){return!!cm(p,c)||!!FA(c,p,m)}function z3(p,c){if(p.length===1)return j3(c,p[0]);for(let m=0;m<c.length;m++){const E=c[m];for(let I=0;I<E.length;I++)if(cm(p,E[I]))return!0}for(let m=0;m<p.length;m++)if(j3(c,p[m]))return!0;for(let m=0;m<c.length;m++)if(NA(p,c[m]))return!0;return!1}function GQ(p,c,m){if(p.length>1){if(NA(p,c))return!0;for(let E=0;E<c.length;E++)if(FA(c[E],p,m))return!0}for(let E=0;E<p.length;E++)if(FA(p[E],c,m))return!0;return!1}function NA(p,c){if(p.length===0||c.length===0)return!1;for(let m=0;m<p.length-1;m++){const E=p[m],I=p[m+1];for(let k=0;k<c.length-1;k++)if(qQ(E,I,c[k],c[k+1]))return!0}return!1}function qQ(p,c,m,E){return Q(p,m,E)!==Q(c,m,E)&&Q(p,c,m)!==Q(p,c,E)}function FA(p,c,m){const E=m*m;if(c.length===1)return p.distSqr(c[0])<E;for(let I=1;I<c.length;I++)if(B3(p,c[I-1],c[I])<E)return!0;return!1}function B3(p,c,m){const E=c.distSqr(m);if(E===0)return p.distSqr(c);const I=((p.x-c.x)*(m.x-c.x)+(p.y-c.y)*(m.y-c.y))/E;return p.distSqr(I<0?c:I>1?m:m.sub(c)._mult(I)._add(c))}function j3(p,c){let m,E,I,k=!1;for(let D=0;D<p.length;D++){m=p[D];for(let j=0,q=m.length-1;j<m.length;q=j++)E=m[j],I=m[q],E.y>c.y!=I.y>c.y&&c.x<(I.x-E.x)*(c.y-E.y)/(I.y-E.y)+E.x&&(k=!k)}return k}function cm(p,c){let m=!1;for(let E=0,I=p.length-1;E<p.length;I=E++){const k=p[E],D=p[I];k.y>c.y!=D.y>c.y&&c.x<(D.x-k.x)*(c.y-k.y)/(D.y-k.y)+k.x&&(m=!m)}return m}function WQ(p,c,m){const E=m[0],I=m[2];if(p.x<E.x&&c.x<E.x||p.x>I.x&&c.x>I.x||p.y<E.y&&c.y<E.y||p.y>I.y&&c.y>I.y)return!1;const k=Q(p,c,m[0]);return k!==Q(p,c,m[1])||k!==Q(p,c,m[2])||k!==Q(p,c,m[3])}function Lv(p,c,m){const E=c.paint.get(p).value;return E.kind==="constant"?E.value:m.programConfigurations.get(c.id).getMaxValue(p)}function V1(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function G1(p,c,m,E,I){if(!c[0]&&!c[1])return p;const k=_.convert(c)._mult(I);m==="viewport"&&k._rotate(-E);const D=[];for(let j=0;j<p.length;j++)D.push(p[j].sub(k));return D}let U3,V3;Jt("CircleBucket",DA,{omit:["layers"]});var XQ={get paint(){return V3=V3||new ga({"circle-radius":new Ir(Ze.paint_circle["circle-radius"]),"circle-color":new Ir(Ze.paint_circle["circle-color"]),"circle-blur":new Ir(Ze.paint_circle["circle-blur"]),"circle-opacity":new Ir(Ze.paint_circle["circle-opacity"]),"circle-translate":new gr(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new gr(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gr(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gr(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ir(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ir(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ir(Ze.paint_circle["circle-stroke-opacity"])})},get layout(){return U3=U3||new ga({"circle-sort-key":new Ir(Ze.layout_circle["circle-sort-key"])})}},Bs=1e-6,fm=typeof Float32Array<"u"?Float32Array:Array;function $A(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function G3(p,c,m){var E=c[0],I=c[1],k=c[2],D=c[3],j=c[4],q=c[5],te=c[6],ue=c[7],de=c[8],_e=c[9],Se=c[10],Ce=c[11],Fe=c[12],Ue=c[13],We=c[14],st=c[15],Je=m[0],lt=m[1],ft=m[2],Et=m[3];return p[0]=Je*E+lt*j+ft*de+Et*Fe,p[1]=Je*I+lt*q+ft*_e+Et*Ue,p[2]=Je*k+lt*te+ft*Se+Et*We,p[3]=Je*D+lt*ue+ft*Ce+Et*st,p[4]=(Je=m[4])*E+(lt=m[5])*j+(ft=m[6])*de+(Et=m[7])*Fe,p[5]=Je*I+lt*q+ft*_e+Et*Ue,p[6]=Je*k+lt*te+ft*Se+Et*We,p[7]=Je*D+lt*ue+ft*Ce+Et*st,p[8]=(Je=m[8])*E+(lt=m[9])*j+(ft=m[10])*de+(Et=m[11])*Fe,p[9]=Je*I+lt*q+ft*_e+Et*Ue,p[10]=Je*k+lt*te+ft*Se+Et*We,p[11]=Je*D+lt*ue+ft*Ce+Et*st,p[12]=(Je=m[12])*E+(lt=m[13])*j+(ft=m[14])*de+(Et=m[15])*Fe,p[13]=Je*I+lt*q+ft*_e+Et*Ue,p[14]=Je*k+lt*te+ft*Se+Et*We,p[15]=Je*D+lt*ue+ft*Ce+Et*st,p}Math.hypot||(Math.hypot=function(){for(var p=0,c=arguments.length;c--;)p+=arguments[c]*arguments[c];return Math.sqrt(p)});var Rv,YQ=G3;function q1(p,c,m){var E=c[0],I=c[1],k=c[2],D=c[3];return p[0]=m[0]*E+m[4]*I+m[8]*k+m[12]*D,p[1]=m[1]*E+m[5]*I+m[9]*k+m[13]*D,p[2]=m[2]*E+m[6]*I+m[10]*k+m[14]*D,p[3]=m[3]*E+m[7]*I+m[11]*k+m[15]*D,p}Rv=new fm(4),fm!=Float32Array&&(Rv[0]=0,Rv[1]=0,Rv[2]=0,Rv[3]=0);class HQ extends na{constructor(c){super(c,XQ)}createBucket(c){return new DA(c)}queryRadius(c){const m=c;return Lv("circle-radius",this,m)+Lv("circle-stroke-width",this,m)+V1(this.paint.get("circle-translate"))}queryIntersectsFeature(c,m,E,I,k,D,j,q){const te=G1(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),D.angle,j),ue=this.paint.get("circle-radius").evaluate(m,E)+this.paint.get("circle-stroke-width").evaluate(m,E),de=this.paint.get("circle-pitch-alignment")==="map",_e=de?te:function(Ce,Fe){return Ce.map(Ue=>q3(Ue,Fe))}(te,q),Se=de?ue*j:ue;for(const Ce of I)for(const Fe of Ce){const Ue=de?Fe:q3(Fe,q);let We=Se;const st=q1([],[Fe.x,Fe.y,0,1],q);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?We*=st[3]/D.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(We*=D.cameraToCenterDistance/st[3]),VQ(_e,Ue,We))return!0}return!1}}function q3(p,c){const m=q1([],[p.x,p.y,0,1],c);return new _(m[0]/m[3],m[1]/m[3])}class W3 extends DA{}let X3;Jt("HeatmapBucket",W3,{omit:["layers"]});var ZQ={get paint(){return X3=X3||new ga({"heatmap-radius":new Ir(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ir(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gr(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ul(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gr(Ze.paint_heatmap["heatmap-opacity"])})}};function zA(p,{width:c,height:m},E,I){if(I){if(I instanceof Uint8ClampedArray)I=new Uint8Array(I.buffer);else if(I.length!==c*m*E)throw new RangeError(`mismatched image size. expected: ${I.length} but got: ${c*m*E}`)}else I=new Uint8Array(c*m*E);return p.width=c,p.height=m,p.data=I,p}function Y3(p,{width:c,height:m},E){if(c===p.width&&m===p.height)return;const I=zA({},{width:c,height:m},E);BA(p,I,{x:0,y:0},{x:0,y:0},{width:Math.min(p.width,c),height:Math.min(p.height,m)},E),p.width=c,p.height=m,p.data=I.data}function BA(p,c,m,E,I,k){if(I.width===0||I.height===0)return c;if(I.width>p.width||I.height>p.height||m.x>p.width-I.width||m.y>p.height-I.height)throw new RangeError("out of range source coordinates for image copy");if(I.width>c.width||I.height>c.height||E.x>c.width-I.width||E.y>c.height-I.height)throw new RangeError("out of range destination coordinates for image copy");const D=p.data,j=c.data;if(D===j)throw new Error("srcData equals dstData, so image is already copied");for(let q=0;q<I.height;q++){const te=((m.y+q)*p.width+m.x)*k,ue=((E.y+q)*c.width+E.x)*k;for(let de=0;de<I.width*k;de++)j[ue+de]=D[te+de]}return c}class kv{constructor(c,m){zA(this,c,1,m)}resize(c){Y3(this,c,1)}clone(){return new kv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,E,I,k){BA(c,m,E,I,k,1)}}class ml{constructor(c,m){zA(this,c,4,m)}resize(c){Y3(this,c,4)}replace(c,m){m?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new ml({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,E,I,k){BA(c,m,E,I,k,4)}}function H3(p){const c={},m=p.resolution||256,E=p.clips?p.clips.length:1,I=p.image||new ml({width:m,height:E});if(Math.log(m)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${m}`);const k=(D,j,q)=>{c[p.evaluationKey]=q;const te=p.expression.evaluate(c);I.data[D+j+0]=Math.floor(255*te.r/te.a),I.data[D+j+1]=Math.floor(255*te.g/te.a),I.data[D+j+2]=Math.floor(255*te.b/te.a),I.data[D+j+3]=Math.floor(255*te.a)};if(p.clips)for(let D=0,j=0;D<E;++D,j+=4*m)for(let q=0,te=0;q<m;q++,te+=4){const ue=q/(m-1),{start:de,end:_e}=p.clips[D];k(j,te,de*(1-ue)+_e*ue)}else for(let D=0,j=0;D<m;D++,j+=4)k(0,j,D/(m-1));return I}Jt("AlphaImage",kv),Jt("RGBAImage",ml);class KQ extends na{createBucket(c){return new W3(c)}constructor(c){super(c,ZQ),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=H3({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Z3;var JQ={get paint(){return Z3=Z3||new ga({"hillshade-illumination-direction":new gr(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gr(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gr(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gr(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gr(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gr(Ze.paint_hillshade["hillshade-accent-color"])})}};class QQ extends na{constructor(c){super(c,JQ)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const eee=nr([{name:"a_pos",components:2,type:"Int16"}],4),{members:tee}=eee;var jA={exports:{}};function W1(p,c,m){m=m||2;var E,I,k,D,j,q,te,ue=c&&c.length,de=ue?c[0]*m:p.length,_e=K3(p,0,de,m,!0),Se=[];if(!_e||_e.next===_e.prev)return Se;if(ue&&(_e=function(Fe,Ue,We,st){var Je,lt,ft,Et=[];for(Je=0,lt=Ue.length;Je<lt;Je++)(ft=K3(Fe,Ue[Je]*st,Je<lt-1?Ue[Je+1]*st:Fe.length,st,!1))===ft.next&&(ft.steiner=!0),Et.push(lee(ft));for(Et.sort(aee),Je=0;Je<Et.length;Je++)We=see(Et[Je],We);return We}(p,c,_e,m)),p.length>80*m){E=k=p[0],I=D=p[1];for(var Ce=m;Ce<de;Ce+=m)(j=p[Ce])<E&&(E=j),(q=p[Ce+1])<I&&(I=q),j>k&&(k=j),q>D&&(D=q);te=(te=Math.max(k-E,D-I))!==0?32767/te:0}return Dv(_e,Se,m,E,I,te,0),Se}function K3(p,c,m,E,I){var k,D;if(I===GA(p,c,m,E)>0)for(k=c;k<m;k+=E)D=eF(k,p[k],p[k+1],D);else for(k=m-E;k>=c;k-=E)D=eF(k,p[k],p[k+1],D);return D&&X1(D,D.next)&&(Fv(D),D=D.next),D}function Nd(p,c){if(!p)return p;c||(c=p);var m,E=p;do if(m=!1,E.steiner||!X1(E,E.next)&&ko(E.prev,E,E.next)!==0)E=E.next;else{if(Fv(E),(E=c=E.prev)===E.next)break;m=!0}while(m||E!==c);return c}function Dv(p,c,m,E,I,k,D){if(p){!D&&k&&function(ue,de,_e,Se){var Ce=ue;do Ce.z===0&&(Ce.z=UA(Ce.x,Ce.y,de,_e,Se)),Ce.prevZ=Ce.prev,Ce.nextZ=Ce.next,Ce=Ce.next;while(Ce!==ue);Ce.prevZ.nextZ=null,Ce.prevZ=null,function(Fe){var Ue,We,st,Je,lt,ft,Et,Yt,mr=1;do{for(We=Fe,Fe=null,lt=null,ft=0;We;){for(ft++,st=We,Et=0,Ue=0;Ue<mr&&(Et++,st=st.nextZ);Ue++);for(Yt=mr;Et>0||Yt>0&&st;)Et!==0&&(Yt===0||!st||We.z<=st.z)?(Je=We,We=We.nextZ,Et--):(Je=st,st=st.nextZ,Yt--),lt?lt.nextZ=Je:Fe=Je,Je.prevZ=lt,lt=Je;We=st}lt.nextZ=null,mr*=2}while(ft>1)}(Ce)}(p,E,I,k);for(var j,q,te=p;p.prev!==p.next;)if(j=p.prev,q=p.next,k?nee(p,E,I,k):ree(p))c.push(j.i/m|0),c.push(p.i/m|0),c.push(q.i/m|0),Fv(p),p=q.next,te=q.next;else if((p=q)===te){D?D===1?Dv(p=iee(Nd(p),c,m),c,m,E,I,k,2):D===2&&oee(p,c,m,E,I,k):Dv(Nd(p),c,m,E,I,k,1);break}}}function ree(p){var c=p.prev,m=p,E=p.next;if(ko(c,m,E)>=0)return!1;for(var I=c.x,k=m.x,D=E.x,j=c.y,q=m.y,te=E.y,ue=I<k?I<D?I:D:k<D?k:D,de=j<q?j<te?j:te:q<te?q:te,_e=I>k?I>D?I:D:k>D?k:D,Se=j>q?j>te?j:te:q>te?q:te,Ce=E.next;Ce!==c;){if(Ce.x>=ue&&Ce.x<=_e&&Ce.y>=de&&Ce.y<=Se&&hm(I,j,k,q,D,te,Ce.x,Ce.y)&&ko(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.next}return!0}function nee(p,c,m,E){var I=p.prev,k=p,D=p.next;if(ko(I,k,D)>=0)return!1;for(var j=I.x,q=k.x,te=D.x,ue=I.y,de=k.y,_e=D.y,Se=j<q?j<te?j:te:q<te?q:te,Ce=ue<de?ue<_e?ue:_e:de<_e?de:_e,Fe=j>q?j>te?j:te:q>te?q:te,Ue=ue>de?ue>_e?ue:_e:de>_e?de:_e,We=UA(Se,Ce,c,m,E),st=UA(Fe,Ue,c,m,E),Je=p.prevZ,lt=p.nextZ;Je&&Je.z>=We&&lt&&lt.z<=st;){if(Je.x>=Se&&Je.x<=Fe&&Je.y>=Ce&&Je.y<=Ue&&Je!==I&&Je!==D&&hm(j,ue,q,de,te,_e,Je.x,Je.y)&&ko(Je.prev,Je,Je.next)>=0||(Je=Je.prevZ,lt.x>=Se&&lt.x<=Fe&&lt.y>=Ce&&lt.y<=Ue&&lt!==I&&lt!==D&&hm(j,ue,q,de,te,_e,lt.x,lt.y)&&ko(lt.prev,lt,lt.next)>=0))return!1;lt=lt.nextZ}for(;Je&&Je.z>=We;){if(Je.x>=Se&&Je.x<=Fe&&Je.y>=Ce&&Je.y<=Ue&&Je!==I&&Je!==D&&hm(j,ue,q,de,te,_e,Je.x,Je.y)&&ko(Je.prev,Je,Je.next)>=0)return!1;Je=Je.prevZ}for(;lt&&lt.z<=st;){if(lt.x>=Se&&lt.x<=Fe&&lt.y>=Ce&&lt.y<=Ue&&lt!==I&&lt!==D&&hm(j,ue,q,de,te,_e,lt.x,lt.y)&&ko(lt.prev,lt,lt.next)>=0)return!1;lt=lt.nextZ}return!0}function iee(p,c,m){var E=p;do{var I=E.prev,k=E.next.next;!X1(I,k)&&J3(I,E,E.next,k)&&Nv(I,k)&&Nv(k,I)&&(c.push(I.i/m|0),c.push(E.i/m|0),c.push(k.i/m|0),Fv(E),Fv(E.next),E=p=k),E=E.next}while(E!==p);return Nd(E)}function oee(p,c,m,E,I,k){var D=p;do{for(var j=D.next.next;j!==D.prev;){if(D.i!==j.i&&cee(D,j)){var q=Q3(D,j);return D=Nd(D,D.next),q=Nd(q,q.next),Dv(D,c,m,E,I,k,0),void Dv(q,c,m,E,I,k,0)}j=j.next}D=D.next}while(D!==p)}function aee(p,c){return p.x-c.x}function see(p,c){var m=function(I,k){var D,j=k,q=I.x,te=I.y,ue=-1/0;do{if(te<=j.y&&te>=j.next.y&&j.next.y!==j.y){var de=j.x+(te-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(de<=q&&de>ue&&(ue=de,D=j.x<j.next.x?j:j.next,de===q))return D}j=j.next}while(j!==k);if(!D)return null;var _e,Se=D,Ce=D.x,Fe=D.y,Ue=1/0;j=D;do q>=j.x&&j.x>=Ce&&q!==j.x&&hm(te<Fe?q:ue,te,Ce,Fe,te<Fe?ue:q,te,j.x,j.y)&&(_e=Math.abs(te-j.y)/(q-j.x),Nv(j,I)&&(_e<Ue||_e===Ue&&(j.x>D.x||j.x===D.x&&uee(D,j)))&&(D=j,Ue=_e)),j=j.next;while(j!==Se);return D}(p,c);if(!m)return c;var E=Q3(m,p);return Nd(E,E.next),Nd(m,m.next)}function uee(p,c){return ko(p.prev,p,c.prev)<0&&ko(c.next,p,p.next)<0}function UA(p,c,m,E,I){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-m)*I|0)|p<<8))|p<<4))|p<<2))|p<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-E)*I|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function lee(p){var c=p,m=p;do(c.x<m.x||c.x===m.x&&c.y<m.y)&&(m=c),c=c.next;while(c!==p);return m}function hm(p,c,m,E,I,k,D,j){return(I-D)*(c-j)>=(p-D)*(k-j)&&(p-D)*(E-j)>=(m-D)*(c-j)&&(m-D)*(k-j)>=(I-D)*(E-j)}function cee(p,c){return p.next.i!==c.i&&p.prev.i!==c.i&&!function(m,E){var I=m;do{if(I.i!==m.i&&I.next.i!==m.i&&I.i!==E.i&&I.next.i!==E.i&&J3(I,I.next,m,E))return!0;I=I.next}while(I!==m);return!1}(p,c)&&(Nv(p,c)&&Nv(c,p)&&function(m,E){var I=m,k=!1,D=(m.x+E.x)/2,j=(m.y+E.y)/2;do I.y>j!=I.next.y>j&&I.next.y!==I.y&&D<(I.next.x-I.x)*(j-I.y)/(I.next.y-I.y)+I.x&&(k=!k),I=I.next;while(I!==m);return k}(p,c)&&(ko(p.prev,p,c.prev)||ko(p,c.prev,c))||X1(p,c)&&ko(p.prev,p,p.next)>0&&ko(c.prev,c,c.next)>0)}function ko(p,c,m){return(c.y-p.y)*(m.x-c.x)-(c.x-p.x)*(m.y-c.y)}function X1(p,c){return p.x===c.x&&p.y===c.y}function J3(p,c,m,E){var I=H1(ko(p,c,m)),k=H1(ko(p,c,E)),D=H1(ko(m,E,p)),j=H1(ko(m,E,c));return I!==k&&D!==j||!(I!==0||!Y1(p,m,c))||!(k!==0||!Y1(p,E,c))||!(D!==0||!Y1(m,p,E))||!(j!==0||!Y1(m,c,E))}function Y1(p,c,m){return c.x<=Math.max(p.x,m.x)&&c.x>=Math.min(p.x,m.x)&&c.y<=Math.max(p.y,m.y)&&c.y>=Math.min(p.y,m.y)}function H1(p){return p>0?1:p<0?-1:0}function Nv(p,c){return ko(p.prev,p,p.next)<0?ko(p,c,p.next)>=0&&ko(p,p.prev,c)>=0:ko(p,c,p.prev)<0||ko(p,p.next,c)<0}function Q3(p,c){var m=new VA(p.i,p.x,p.y),E=new VA(c.i,c.x,c.y),I=p.next,k=c.prev;return p.next=c,c.prev=p,m.next=I,I.prev=m,E.next=m,m.prev=E,k.next=E,E.prev=k,E}function eF(p,c,m,E){var I=new VA(p,c,m);return E?(I.next=E.next,I.prev=E,E.next.prev=I,E.next=I):(I.prev=I,I.next=I),I}function Fv(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function VA(p,c,m){this.i=p,this.x=c,this.y=m,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function GA(p,c,m,E){for(var I=0,k=c,D=m-E;k<m;k+=E)I+=(p[D]-p[k])*(p[k+1]+p[D+1]),D=k;return I}jA.exports=W1,jA.exports.default=W1,W1.deviation=function(p,c,m,E){var I=c&&c.length,k=Math.abs(GA(p,0,I?c[0]*m:p.length,m));if(I)for(var D=0,j=c.length;D<j;D++)k-=Math.abs(GA(p,c[D]*m,D<j-1?c[D+1]*m:p.length,m));var q=0;for(D=0;D<E.length;D+=3){var te=E[D]*m,ue=E[D+1]*m,de=E[D+2]*m;q+=Math.abs((p[te]-p[de])*(p[ue+1]-p[te+1])-(p[te]-p[ue])*(p[de+1]-p[te+1]))}return k===0&&q===0?0:Math.abs((q-k)/k)},W1.flatten=function(p){for(var c=p[0][0].length,m={vertices:[],holes:[],dimensions:c},E=0,I=0;I<p.length;I++){for(var k=0;k<p[I].length;k++)for(var D=0;D<c;D++)m.vertices.push(p[I][k][D]);I>0&&m.holes.push(E+=p[I-1].length)}return m};var tF=d(jA.exports);function fee(p,c,m,E,I){rF(p,c,m||0,E||p.length-1,I||hee)}function rF(p,c,m,E,I){for(;E>m;){if(E-m>600){var k=E-m+1,D=c-m+1,j=Math.log(k),q=.5*Math.exp(2*j/3),te=.5*Math.sqrt(j*q*(k-q)/k)*(D-k/2<0?-1:1);rF(p,c,Math.max(m,Math.floor(c-D*q/k+te)),Math.min(E,Math.floor(c+(k-D)*q/k+te)),I)}var ue=p[c],de=m,_e=E;for($v(p,m,c),I(p[E],ue)>0&&$v(p,m,E);de<_e;){for($v(p,de,_e),de++,_e--;I(p[de],ue)<0;)de++;for(;I(p[_e],ue)>0;)_e--}I(p[m],ue)===0?$v(p,m,_e):$v(p,++_e,E),_e<=c&&(m=_e+1),c<=_e&&(E=_e-1)}}function $v(p,c,m){var E=p[c];p[c]=p[m],p[m]=E}function hee(p,c){return p<c?-1:p>c?1:0}function qA(p,c){const m=p.length;if(m<=1)return[p];const E=[];let I,k;for(let D=0;D<m;D++){const j=me(p[D]);j!==0&&(p[D].area=Math.abs(j),k===void 0&&(k=j<0),k===j<0?(I&&E.push(I),I=[p[D]]):I.push(p[D]))}if(I&&E.push(I),c>1)for(let D=0;D<E.length;D++)E[D].length<=c||(fee(E[D],c,1,E[D].length-1,dee),E[D]=E[D].slice(0,c));return E}function dee(p,c){return c.area-p.area}function WA(p,c,m){const E=m.patternDependencies;let I=!1;for(const k of c){const D=k.paint.get(`${p}-pattern`);D.isConstant()||(I=!0);const j=D.constantOr(null);j&&(I=!0,E[j.to]=!0,E[j.from]=!0)}return I}function XA(p,c,m,E,I){const k=I.patternDependencies;for(const D of c){const j=D.paint.get(`${p}-pattern`).value;if(j.kind!=="constant"){let q=j.evaluate({zoom:E-1},m,{},I.availableImages),te=j.evaluate({zoom:E},m,{},I.availableImages),ue=j.evaluate({zoom:E+1},m,{},I.availableImages);q=q&&q.name?q.name:q,te=te&&te.name?te.name:te,ue=ue&&ue.name?ue.name:ue,k[q]=!0,k[te]=!0,k[ue]=!0,m.patterns[D.id]={min:q,mid:te,max:ue}}}return m}class YA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new it,this.indexArray=new xr,this.indexArray2=new fr,this.programConfigurations=new Rf(c.layers,c.zoom),this.segments=new Sr,this.segments2=new Sr,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,E){this.hasPattern=WA("fill",this.layers,m);const I=this.layers[0].layout.get("fill-sort-key"),k=!I.isConstant(),D=[];for(const{feature:j,id:q,index:te,sourceLayerIndex:ue}of c){const de=this.layers[0]._featureFilter.needGeometry,_e=Wc(j,de);if(!this.layers[0]._featureFilter.filter(new fi(this.zoom),_e,E))continue;const Se=k?I.evaluate(_e,{},E,m.availableImages):void 0,Ce={id:q,properties:j.properties,type:j.type,sourceLayerIndex:ue,index:te,geometry:de?_e.geometry:fc(j),patterns:{},sortKey:Se};D.push(Ce)}k&&D.sort((j,q)=>j.sortKey-q.sortKey);for(const j of D){const{geometry:q,index:te,sourceLayerIndex:ue}=j;if(this.hasPattern){const de=XA("fill",this.layers,j,this.zoom,m);this.patternFeatures.push(de)}else this.addFeature(j,q,te,E,{});m.featureIndex.insert(c[te].feature,q,te,ue,this.index)}}update(c,m,E){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,E)}addFeatures(c,m,E){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,m,E)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,tee),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,m,E,I,k){for(const D of qA(m,500)){let j=0;for(const Se of D)j+=Se.length;const q=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),te=q.vertexLength,ue=[],de=[];for(const Se of D){if(Se.length===0)continue;Se!==D[0]&&de.push(ue.length/2);const Ce=this.segments2.prepareSegment(Se.length,this.layoutVertexArray,this.indexArray2),Fe=Ce.vertexLength;this.layoutVertexArray.emplaceBack(Se[0].x,Se[0].y),this.indexArray2.emplaceBack(Fe+Se.length-1,Fe),ue.push(Se[0].x),ue.push(Se[0].y);for(let Ue=1;Ue<Se.length;Ue++)this.layoutVertexArray.emplaceBack(Se[Ue].x,Se[Ue].y),this.indexArray2.emplaceBack(Fe+Ue-1,Fe+Ue),ue.push(Se[Ue].x),ue.push(Se[Ue].y);Ce.vertexLength+=Se.length,Ce.primitiveLength+=Se.length}const _e=tF(ue,de);for(let Se=0;Se<_e.length;Se+=3)this.indexArray.emplaceBack(te+_e[Se],te+_e[Se+1],te+_e[Se+2]);q.vertexLength+=j,q.primitiveLength+=_e.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,E,k,I)}}let nF,iF;Jt("FillBucket",YA,{omit:["layers","patternFeatures"]});var pee={get paint(){return iF=iF||new ga({"fill-antialias":new gr(Ze.paint_fill["fill-antialias"]),"fill-opacity":new Ir(Ze.paint_fill["fill-opacity"]),"fill-color":new Ir(Ze.paint_fill["fill-color"]),"fill-outline-color":new Ir(Ze.paint_fill["fill-outline-color"]),"fill-translate":new gr(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new gr(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ha(Ze.paint_fill["fill-pattern"])})},get layout(){return nF=nF||new ga({"fill-sort-key":new Ir(Ze.layout_fill["fill-sort-key"])})}};class mee extends na{constructor(c){super(c,pee)}recalculate(c,m){super.recalculate(c,m);const E=this.paint._values["fill-outline-color"];E.value.kind==="constant"&&E.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new YA(c)}queryRadius(){return V1(this.paint.get("fill-translate"))}queryIntersectsFeature(c,m,E,I,k,D,j){return z3(G1(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),D.angle,j),I)}isTileClipped(){return!0}}const gee=nr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vee=nr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:yee}=gee;var Ch={},_ee=f,oF=dm;function dm(p,c,m,E,I){this.properties={},this.extent=m,this.type=0,this._pbf=p,this._geometry=-1,this._keys=E,this._values=I,p.readFields(bee,this,c)}function bee(p,c,m){p==1?c.id=m.readVarint():p==2?function(E,I){for(var k=E.readVarint()+E.pos;E.pos<k;){var D=I._keys[E.readVarint()],j=I._values[E.readVarint()];I.properties[D]=j}}(m,c):p==3?c.type=m.readVarint():p==4&&(c._geometry=m.pos)}function xee(p){for(var c,m,E=0,I=0,k=p.length,D=k-1;I<k;D=I++)E+=((m=p[D]).x-(c=p[I]).x)*(c.y+m.y);return E}dm.types=["Unknown","Point","LineString","Polygon"],dm.prototype.loadGeometry=function(){var p=this._pbf;p.pos=this._geometry;for(var c,m=p.readVarint()+p.pos,E=1,I=0,k=0,D=0,j=[];p.pos<m;){if(I<=0){var q=p.readVarint();E=7&q,I=q>>3}if(I--,E===1||E===2)k+=p.readSVarint(),D+=p.readSVarint(),E===1&&(c&&j.push(c),c=[]),c.push(new _ee(k,D));else{if(E!==7)throw new Error("unknown command "+E);c&&c.push(c[0].clone())}}return c&&j.push(c),j},dm.prototype.bbox=function(){var p=this._pbf;p.pos=this._geometry;for(var c=p.readVarint()+p.pos,m=1,E=0,I=0,k=0,D=1/0,j=-1/0,q=1/0,te=-1/0;p.pos<c;){if(E<=0){var ue=p.readVarint();m=7&ue,E=ue>>3}if(E--,m===1||m===2)(I+=p.readSVarint())<D&&(D=I),I>j&&(j=I),(k+=p.readSVarint())<q&&(q=k),k>te&&(te=k);else if(m!==7)throw new Error("unknown command "+m)}return[D,q,j,te]},dm.prototype.toGeoJSON=function(p,c,m){var E,I,k=this.extent*Math.pow(2,m),D=this.extent*p,j=this.extent*c,q=this.loadGeometry(),te=dm.types[this.type];function ue(Se){for(var Ce=0;Ce<Se.length;Ce++){var Fe=Se[Ce];Se[Ce]=[360*(Fe.x+D)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(Fe.y+j)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(E=0;E<q.length;E++)de[E]=q[E][0];ue(q=de);break;case 2:for(E=0;E<q.length;E++)ue(q[E]);break;case 3:for(q=function(Se){var Ce=Se.length;if(Ce<=1)return[Se];for(var Fe,Ue,We=[],st=0;st<Ce;st++){var Je=xee(Se[st]);Je!==0&&(Ue===void 0&&(Ue=Je<0),Ue===Je<0?(Fe&&We.push(Fe),Fe=[Se[st]]):Fe.push(Se[st]))}return Fe&&We.push(Fe),We}(q),E=0;E<q.length;E++)for(I=0;I<q[E].length;I++)ue(q[E][I])}q.length===1?q=q[0]:te="Multi"+te;var _e={type:"Feature",geometry:{type:te,coordinates:q},properties:this.properties};return"id"in this&&(_e.id=this.id),_e};var wee=oF,aF=sF;function sF(p,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(Eee,this,c),this.length=this._features.length}function Eee(p,c,m){p===15?c.version=m.readVarint():p===1?c.name=m.readString():p===5?c.extent=m.readVarint():p===2?c._features.push(m.pos):p===3?c._keys.push(m.readString()):p===4&&c._values.push(function(E){for(var I=null,k=E.readVarint()+E.pos;E.pos<k;){var D=E.readVarint()>>3;I=D===1?E.readString():D===2?E.readFloat():D===3?E.readDouble():D===4?E.readVarint64():D===5?E.readVarint():D===6?E.readSVarint():D===7?E.readBoolean():null}return I}(m))}sF.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var c=this._pbf.readVarint()+this._pbf.pos;return new wee(this._pbf,c,this.extent,this._keys,this._values)};var See=aF;function Pee(p,c,m){if(p===3){var E=new See(m,m.readVarint()+m.pos);E.length&&(c[E.name]=E)}}Ch.VectorTile=function(p,c){this.layers=p.readFields(Pee,{},c)},Ch.VectorTileFeature=oF,Ch.VectorTileLayer=aF;const Aee=Ch.VectorTileFeature.types,HA=Math.pow(2,13);function zv(p,c,m,E,I,k,D,j){p.emplaceBack(c,m,2*Math.floor(E*HA)+D,I*HA*2,k*HA*2,Math.round(j))}class ZA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new ht,this.centroidVertexArray=new ct,this.indexArray=new xr,this.programConfigurations=new Rf(c.layers,c.zoom),this.segments=new Sr,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,E){this.features=[],this.hasPattern=WA("fill-extrusion",this.layers,m);for(const{feature:I,id:k,index:D,sourceLayerIndex:j}of c){const q=this.layers[0]._featureFilter.needGeometry,te=Wc(I,q);if(!this.layers[0]._featureFilter.filter(new fi(this.zoom),te,E))continue;const ue={id:k,sourceLayerIndex:j,index:D,geometry:q?te.geometry:fc(I),properties:I.properties,type:I.type,patterns:{}};this.hasPattern?this.features.push(XA("fill-extrusion",this.layers,ue,this.zoom,m)):this.addFeature(ue,ue.geometry,D,E,{}),m.featureIndex.insert(I,ue.geometry,D,j,this.index,!0)}}addFeatures(c,m,E){for(const I of this.features){const{geometry:k}=I;this.addFeature(I,k,I.index,m,E)}}update(c,m,E){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,E)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,yee),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,vee.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,m,E,I,k){const D={x:0,y:0,vertexCount:0};for(const j of qA(m,500)){let q=0;for(const Ce of j)q+=Ce.length;let te=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ce of j){if(Ce.length===0||Iee(Ce))continue;let Fe=0;for(let Ue=0;Ue<Ce.length;Ue++){const We=Ce[Ue];if(Ue>=1){const st=Ce[Ue-1];if(!Cee(We,st)){te.vertexLength+4>Sr.MAX_VERTEX_ARRAY_LENGTH&&(te=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Je=We.sub(st)._perp()._unit(),lt=st.dist(We);Fe+lt>32768&&(Fe=0),zv(this.layoutVertexArray,We.x,We.y,Je.x,Je.y,0,0,Fe),zv(this.layoutVertexArray,We.x,We.y,Je.x,Je.y,0,1,Fe),D.x+=2*We.x,D.y+=2*We.y,D.vertexCount+=2,Fe+=lt,zv(this.layoutVertexArray,st.x,st.y,Je.x,Je.y,0,0,Fe),zv(this.layoutVertexArray,st.x,st.y,Je.x,Je.y,0,1,Fe),D.x+=2*st.x,D.y+=2*st.y,D.vertexCount+=2;const ft=te.vertexLength;this.indexArray.emplaceBack(ft,ft+2,ft+1),this.indexArray.emplaceBack(ft+1,ft+2,ft+3),te.vertexLength+=4,te.primitiveLength+=2}}}}if(te.vertexLength+q>Sr.MAX_VERTEX_ARRAY_LENGTH&&(te=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray)),Aee[c.type]!=="Polygon")continue;const ue=[],de=[],_e=te.vertexLength;for(const Ce of j)if(Ce.length!==0){Ce!==j[0]&&de.push(ue.length/2);for(let Fe=0;Fe<Ce.length;Fe++){const Ue=Ce[Fe];zv(this.layoutVertexArray,Ue.x,Ue.y,0,0,1,1,0),D.x+=Ue.x,D.y+=Ue.y,D.vertexCount+=1,ue.push(Ue.x),ue.push(Ue.y)}}const Se=tF(ue,de);for(let Ce=0;Ce<Se.length;Ce+=3)this.indexArray.emplaceBack(_e+Se[Ce],_e+Se[Ce+2],_e+Se[Ce+1]);te.primitiveLength+=Se.length/3,te.vertexLength+=q}for(let j=0;j<D.vertexCount;j++)this.centroidVertexArray.emplaceBack(Math.floor(D.x/D.vertexCount),Math.floor(D.y/D.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,E,k,I)}}function Cee(p,c){return p.x===c.x&&(p.x<0||p.x>co)||p.y===c.y&&(p.y<0||p.y>co)}function Iee(p){return p.every(c=>c.x<0)||p.every(c=>c.x>co)||p.every(c=>c.y<0)||p.every(c=>c.y>co)}let uF;Jt("FillExtrusionBucket",ZA,{omit:["layers","features"]});var Oee={get paint(){return uF=uF||new ga({"fill-extrusion-opacity":new gr(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ir(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gr(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gr(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ha(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ir(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ir(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gr(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Tee extends na{constructor(c){super(c,Oee)}createBucket(c){return new ZA(c)}queryRadius(){return V1(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,m,E,I,k,D,j,q){const te=G1(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),D.angle,j),ue=this.paint.get("fill-extrusion-height").evaluate(m,E),de=this.paint.get("fill-extrusion-base").evaluate(m,E),_e=function(Ce,Fe,Ue,We){const st=[];for(const Je of Ce){const lt=[Je.x,Je.y,0,1];q1(lt,lt,Fe),st.push(new _(lt[0]/lt[3],lt[1]/lt[3]))}return st}(te,q),Se=function(Ce,Fe,Ue,We){const st=[],Je=[],lt=We[8]*Fe,ft=We[9]*Fe,Et=We[10]*Fe,Yt=We[11]*Fe,mr=We[8]*Ue,Xt=We[9]*Ue,Ut=We[10]*Ue,Ft=We[11]*Ue;for(const tr of Ce){const Bt=[],Tt=[];for(const Pr of tr){const vr=Pr.x,sn=Pr.y,Di=We[0]*vr+We[4]*sn+We[12],Vi=We[1]*vr+We[5]*sn+We[13],ua=We[2]*vr+We[6]*sn+We[14],Bu=We[3]*vr+We[7]*sn+We[15],js=ua+Et,Wo=Bu+Yt,va=Di+mr,Qa=Vi+Xt,pu=ua+Ut,Us=Bu+Ft,Xo=new _((Di+lt)/Wo,(Vi+ft)/Wo);Xo.z=js/Wo,Bt.push(Xo);const la=new _(va/Us,Qa/Us);la.z=pu/Us,Tt.push(la)}st.push(Bt),Je.push(Tt)}return[st,Je]}(I,de,ue,q);return function(Ce,Fe,Ue){let We=1/0;z3(Ue,Fe)&&(We=lF(Ue,Fe[0]));for(let st=0;st<Fe.length;st++){const Je=Fe[st],lt=Ce[st];for(let ft=0;ft<Je.length-1;ft++){const Et=Je[ft],Yt=[Et,Je[ft+1],lt[ft+1],lt[ft],Et];$3(Ue,Yt)&&(We=Math.min(We,lF(Ue,Yt)))}}return We!==1/0&&We}(Se[0],Se[1],_e)}}function Bv(p,c){return p.x*c.x+p.y*c.y}function lF(p,c){if(p.length===1){let m=0;const E=c[m++];let I;for(;!I||E.equals(I);)if(I=c[m++],!I)return 1/0;for(;m<c.length;m++){const k=c[m],D=p[0],j=I.sub(E),q=k.sub(E),te=D.sub(E),ue=Bv(j,j),de=Bv(j,q),_e=Bv(q,q),Se=Bv(te,j),Ce=Bv(te,q),Fe=ue*_e-de*de,Ue=(_e*Se-de*Ce)/Fe,We=(ue*Ce-de*Se)/Fe,st=E.z*(1-Ue-We)+I.z*Ue+k.z*We;if(isFinite(st))return st}return 1/0}{let m=1/0;for(const E of c)m=Math.min(m,E.z);return m}}const Mee=nr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Lee}=Mee,Ree=nr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:kee}=Ree,Dee=Ch.VectorTileFeature.types,Nee=Math.cos(Math.PI/180*37.5),cF=Math.pow(2,14)/.5;class KA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(m=>{this.gradients[m.id]={}}),this.layoutVertexArray=new dt,this.layoutVertexArray2=new wt,this.indexArray=new xr,this.programConfigurations=new Rf(c.layers,c.zoom),this.segments=new Sr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,E){this.hasPattern=WA("line",this.layers,m);const I=this.layers[0].layout.get("line-sort-key"),k=!I.isConstant(),D=[];for(const{feature:j,id:q,index:te,sourceLayerIndex:ue}of c){const de=this.layers[0]._featureFilter.needGeometry,_e=Wc(j,de);if(!this.layers[0]._featureFilter.filter(new fi(this.zoom),_e,E))continue;const Se=k?I.evaluate(_e,{},E):void 0,Ce={id:q,properties:j.properties,type:j.type,sourceLayerIndex:ue,index:te,geometry:de?_e.geometry:fc(j),patterns:{},sortKey:Se};D.push(Ce)}k&&D.sort((j,q)=>j.sortKey-q.sortKey);for(const j of D){const{geometry:q,index:te,sourceLayerIndex:ue}=j;if(this.hasPattern){const de=XA("line",this.layers,j,this.zoom,m);this.patternFeatures.push(de)}else this.addFeature(j,q,te,E,{});m.featureIndex.insert(c[te].feature,q,te,ue,this.index)}}update(c,m,E){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,E)}addFeatures(c,m,E){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,m,E)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,kee)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Lee),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,m,E,I,k){const D=this.layers[0].layout,j=D.get("line-join").evaluate(c,{}),q=D.get("line-cap"),te=D.get("line-miter-limit"),ue=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const de of m)this.addLine(de,c,j,q,te,ue);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,E,k,I)}addLine(c,m,E,I,k,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let We=0;We<c.length-1;We++)this.totalDistance+=c[We].dist(c[We+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=Dee[m.type]==="Polygon";let q=c.length;for(;q>=2&&c[q-1].equals(c[q-2]);)q--;let te=0;for(;te<q-1&&c[te].equals(c[te+1]);)te++;if(q<(j?3:2))return;E==="bevel"&&(k=1.05);const ue=this.overscaling<=16?15*co/(512*this.overscaling):0,de=this.segments.prepareSegment(10*q,this.layoutVertexArray,this.indexArray);let _e,Se,Ce,Fe,Ue;this.e1=this.e2=-1,j&&(_e=c[q-2],Ue=c[te].sub(_e)._unit()._perp());for(let We=te;We<q;We++){if(Ce=We===q-1?j?c[te+1]:void 0:c[We+1],Ce&&c[We].equals(Ce))continue;Ue&&(Fe=Ue),_e&&(Se=_e),_e=c[We],Ue=Ce?Ce.sub(_e)._unit()._perp():Fe,Fe=Fe||Ue;let st=Fe.add(Ue);st.x===0&&st.y===0||st._unit();const Je=Fe.x*Ue.x+Fe.y*Ue.y,lt=st.x*Ue.x+st.y*Ue.y,ft=lt!==0?1/lt:1/0,Et=2*Math.sqrt(2-2*lt),Yt=lt<Nee&&Se&&Ce,mr=Fe.x*Ue.y-Fe.y*Ue.x>0;if(Yt&&We>te){const Ft=_e.dist(Se);if(Ft>2*ue){const tr=_e.sub(_e.sub(Se)._mult(ue/Ft)._round());this.updateDistance(Se,tr),this.addCurrentVertex(tr,Fe,0,0,de),Se=tr}}const Xt=Se&&Ce;let Ut=Xt?E:j?"butt":I;if(Xt&&Ut==="round"&&(ft<D?Ut="miter":ft<=2&&(Ut="fakeround")),Ut==="miter"&&ft>k&&(Ut="bevel"),Ut==="bevel"&&(ft>2&&(Ut="flipbevel"),ft<k&&(Ut="miter")),Se&&this.updateDistance(Se,_e),Ut==="miter")st._mult(ft),this.addCurrentVertex(_e,st,0,0,de);else if(Ut==="flipbevel"){if(ft>100)st=Ue.mult(-1);else{const Ft=ft*Fe.add(Ue).mag()/Fe.sub(Ue).mag();st._perp()._mult(Ft*(mr?-1:1))}this.addCurrentVertex(_e,st,0,0,de),this.addCurrentVertex(_e,st.mult(-1),0,0,de)}else if(Ut==="bevel"||Ut==="fakeround"){const Ft=-Math.sqrt(ft*ft-1),tr=mr?Ft:0,Bt=mr?0:Ft;if(Se&&this.addCurrentVertex(_e,Fe,tr,Bt,de),Ut==="fakeround"){const Tt=Math.round(180*Et/Math.PI/20);for(let Pr=1;Pr<Tt;Pr++){let vr=Pr/Tt;if(vr!==.5){const Di=vr-.5;vr+=vr*Di*(vr-1)*((1.0904+Je*(Je*(3.55645-1.43519*Je)-3.2452))*Di*Di+(.848013+Je*(.215638*Je-1.06021)))}const sn=Ue.sub(Fe)._mult(vr)._add(Fe)._unit()._mult(mr?-1:1);this.addHalfVertex(_e,sn.x,sn.y,!1,mr,0,de)}}Ce&&this.addCurrentVertex(_e,Ue,-tr,-Bt,de)}else if(Ut==="butt")this.addCurrentVertex(_e,st,0,0,de);else if(Ut==="square"){const Ft=Se?1:-1;this.addCurrentVertex(_e,st,Ft,Ft,de)}else Ut==="round"&&(Se&&(this.addCurrentVertex(_e,Fe,0,0,de),this.addCurrentVertex(_e,Fe,1,1,de,!0)),Ce&&(this.addCurrentVertex(_e,Ue,-1,-1,de,!0),this.addCurrentVertex(_e,Ue,0,0,de)));if(Yt&&We<q-1){const Ft=_e.dist(Ce);if(Ft>2*ue){const tr=_e.add(Ce.sub(_e)._mult(ue/Ft)._round());this.updateDistance(_e,tr),this.addCurrentVertex(tr,Ue,0,0,de),_e=tr}}}}addCurrentVertex(c,m,E,I,k,D=!1){const j=m.y*I-m.x,q=-m.y-m.x*I;this.addHalfVertex(c,m.x+m.y*E,m.y-m.x*E,D,!1,E,k),this.addHalfVertex(c,j,q,D,!0,-I,k),this.distance>cF/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,m,E,I,k,D))}addHalfVertex({x:c,y:m},E,I,k,D,j,q){const te=.5*(this.lineClips?this.scaledDistance*(cF-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(k?1:0),(m<<1)+(D?1:0),Math.round(63*E)+128,Math.round(63*I)+128,1+(j===0?0:j<0?-1:1)|(63&te)<<2,te>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ue=q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ue),q.primitiveLength++),D?this.e2=ue:this.e1=ue}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,m){this.distance+=c.dist(m),this.updateScaledDistance()}}let fF,hF;Jt("LineBucket",KA,{omit:["layers","patternFeatures"]});var dF={get paint(){return hF=hF||new ga({"line-opacity":new Ir(Ze.paint_line["line-opacity"]),"line-color":new Ir(Ze.paint_line["line-color"]),"line-translate":new gr(Ze.paint_line["line-translate"]),"line-translate-anchor":new gr(Ze.paint_line["line-translate-anchor"]),"line-width":new Ir(Ze.paint_line["line-width"]),"line-gap-width":new Ir(Ze.paint_line["line-gap-width"]),"line-offset":new Ir(Ze.paint_line["line-offset"]),"line-blur":new Ir(Ze.paint_line["line-blur"]),"line-dasharray":new jl(Ze.paint_line["line-dasharray"]),"line-pattern":new Ha(Ze.paint_line["line-pattern"]),"line-gradient":new Ul(Ze.paint_line["line-gradient"])})},get layout(){return fF=fF||new ga({"line-cap":new gr(Ze.layout_line["line-cap"]),"line-join":new Ir(Ze.layout_line["line-join"]),"line-miter-limit":new gr(Ze.layout_line["line-miter-limit"]),"line-round-limit":new gr(Ze.layout_line["line-round-limit"]),"line-sort-key":new Ir(Ze.layout_line["line-sort-key"])})}};class Fee extends Ir{possiblyEvaluate(c,m){return m=new fi(Math.floor(m.zoom),{now:m.now,fadeDuration:m.fadeDuration,zoomHistory:m.zoomHistory,transition:m.transition}),super.possiblyEvaluate(c,m)}evaluate(c,m,E,I){return m=x({},m,{zoom:Math.floor(m.zoom)}),super.evaluate(c,m,E,I)}}let Z1;class $ee extends na{constructor(c){super(c,dF),this.gradientVersion=0,Z1||(Z1=new Fee(dF.paint.properties["line-width"].specification),Z1.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof cs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,m){super.recalculate(c,m),this.paint._values["line-floorwidth"]=Z1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new KA(c)}queryRadius(c){const m=c,E=pF(Lv("line-width",this,m),Lv("line-gap-width",this,m)),I=Lv("line-offset",this,m);return E/2+Math.abs(I)+V1(this.paint.get("line-translate"))}queryIntersectsFeature(c,m,E,I,k,D,j){const q=G1(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),D.angle,j),te=j/2*pF(this.paint.get("line-width").evaluate(m,E),this.paint.get("line-gap-width").evaluate(m,E)),ue=this.paint.get("line-offset").evaluate(m,E);return ue&&(I=function(de,_e){const Se=[];for(let Ce=0;Ce<de.length;Ce++){const Fe=de[Ce],Ue=[];for(let We=0;We<Fe.length;We++){const st=Fe[We-1],Je=Fe[We],lt=Fe[We+1],ft=We===0?new _(0,0):Je.sub(st)._unit()._perp(),Et=We===Fe.length-1?new _(0,0):lt.sub(Je)._unit()._perp(),Yt=ft._add(Et)._unit(),mr=Yt.x*Et.x+Yt.y*Et.y;mr!==0&&Yt._mult(1/mr),Ue.push(Yt._mult(_e)._add(Je))}Se.push(Ue)}return Se}(I,ue*j)),function(de,_e,Se){for(let Ce=0;Ce<_e.length;Ce++){const Fe=_e[Ce];if(de.length>=3){for(let Ue=0;Ue<Fe.length;Ue++)if(cm(de,Fe[Ue]))return!0}if(GQ(de,Fe,Se))return!0}return!1}(q,I,te)}isTileClipped(){return!0}}function pF(p,c){return c>0?c+2*p:p}const zee=nr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Bee=nr([{name:"a_projected_pos",components:3,type:"Float32"}],4);nr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jee=nr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);nr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const mF=nr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Uee=nr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Vee(p,c,m){return p.sections.forEach(E=>{E.text=function(I,k,D){const j=k.layout.get("text-transform").evaluate(D,{});return j==="uppercase"?I=I.toLocaleUpperCase():j==="lowercase"&&(I=I.toLocaleLowerCase()),ci.applyArabicShaping&&(I=ci.applyArabicShaping(I)),I}(E.text,c,m)}),p}nr([{name:"triangle",components:3,type:"Uint16"}]),nr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),nr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),nr([{type:"Float32",name:"offsetX"}]),nr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),nr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const jv={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var sa=24,gF=bi,vF=function(p,c,m,E,I){var k,D,j=8*I-E-1,q=(1<<j)-1,te=q>>1,ue=-7,de=m?I-1:0,_e=m?-1:1,Se=p[c+de];for(de+=_e,k=Se&(1<<-ue)-1,Se>>=-ue,ue+=j;ue>0;k=256*k+p[c+de],de+=_e,ue-=8);for(D=k&(1<<-ue)-1,k>>=-ue,ue+=E;ue>0;D=256*D+p[c+de],de+=_e,ue-=8);if(k===0)k=1-te;else{if(k===q)return D?NaN:1/0*(Se?-1:1);D+=Math.pow(2,E),k-=te}return(Se?-1:1)*D*Math.pow(2,k-E)},yF=function(p,c,m,E,I,k){var D,j,q,te=8*k-I-1,ue=(1<<te)-1,de=ue>>1,_e=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,Se=E?0:k-1,Ce=E?1:-1,Fe=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(j=isNaN(c)?1:0,D=ue):(D=Math.floor(Math.log(c)/Math.LN2),c*(q=Math.pow(2,-D))<1&&(D--,q*=2),(c+=D+de>=1?_e/q:_e*Math.pow(2,1-de))*q>=2&&(D++,q/=2),D+de>=ue?(j=0,D=ue):D+de>=1?(j=(c*q-1)*Math.pow(2,I),D+=de):(j=c*Math.pow(2,de-1)*Math.pow(2,I),D=0));I>=8;p[m+Se]=255&j,Se+=Ce,j/=256,I-=8);for(D=D<<I|j,te+=I;te>0;p[m+Se]=255&D,Se+=Ce,D/=256,te-=8);p[m+Se-Ce]|=128*Fe};function bi(p){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(p)?p:new Uint8Array(p||0),this.pos=0,this.type=0,this.length=this.buf.length}bi.Varint=0,bi.Fixed64=1,bi.Bytes=2,bi.Fixed32=5;var JA=4294967296,_F=1/JA,bF=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Df(p){return p.type===bi.Bytes?p.readVarint()+p.pos:p.pos+1}function pm(p,c,m){return m?4294967296*c+(p>>>0):4294967296*(c>>>0)+(p>>>0)}function xF(p,c,m){var E=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));m.realloc(E);for(var I=m.pos-1;I>=p;I--)m.buf[I+E]=m.buf[I]}function Gee(p,c){for(var m=0;m<p.length;m++)c.writeVarint(p[m])}function qee(p,c){for(var m=0;m<p.length;m++)c.writeSVarint(p[m])}function Wee(p,c){for(var m=0;m<p.length;m++)c.writeFloat(p[m])}function Xee(p,c){for(var m=0;m<p.length;m++)c.writeDouble(p[m])}function Yee(p,c){for(var m=0;m<p.length;m++)c.writeBoolean(p[m])}function Hee(p,c){for(var m=0;m<p.length;m++)c.writeFixed32(p[m])}function Zee(p,c){for(var m=0;m<p.length;m++)c.writeSFixed32(p[m])}function Kee(p,c){for(var m=0;m<p.length;m++)c.writeFixed64(p[m])}function Jee(p,c){for(var m=0;m<p.length;m++)c.writeSFixed64(p[m])}function K1(p,c){return(p[c]|p[c+1]<<8|p[c+2]<<16)+16777216*p[c+3]}function mm(p,c,m){p[m]=c,p[m+1]=c>>>8,p[m+2]=c>>>16,p[m+3]=c>>>24}function wF(p,c){return(p[c]|p[c+1]<<8|p[c+2]<<16)+(p[c+3]<<24)}bi.prototype={destroy:function(){this.buf=null},readFields:function(p,c,m){for(m=m||this.length;this.pos<m;){var E=this.readVarint(),I=E>>3,k=this.pos;this.type=7&E,p(I,c,this),this.pos===k&&this.skip(E)}return c},readMessage:function(p,c){return this.readFields(p,c,this.readVarint()+this.pos)},readFixed32:function(){var p=K1(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=wF(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=K1(this.buf,this.pos)+K1(this.buf,this.pos+4)*JA;return this.pos+=8,p},readSFixed64:function(){var p=K1(this.buf,this.pos)+wF(this.buf,this.pos+4)*JA;return this.pos+=8,p},readFloat:function(){var p=vF(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=vF(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var c,m,E=this.buf;return c=127&(m=E[this.pos++]),m<128?c:(c|=(127&(m=E[this.pos++]))<<7,m<128?c:(c|=(127&(m=E[this.pos++]))<<14,m<128?c:(c|=(127&(m=E[this.pos++]))<<21,m<128?c:function(I,k,D){var j,q,te=D.buf;if(j=(112&(q=te[D.pos++]))>>4,q<128||(j|=(127&(q=te[D.pos++]))<<3,q<128)||(j|=(127&(q=te[D.pos++]))<<10,q<128)||(j|=(127&(q=te[D.pos++]))<<17,q<128)||(j|=(127&(q=te[D.pos++]))<<24,q<128)||(j|=(1&(q=te[D.pos++]))<<31,q<128))return pm(I,j,k);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(m=E[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var p=this.readVarint()+this.pos,c=this.pos;return this.pos=p,p-c>=12&&bF?function(m,E,I){return bF.decode(m.subarray(E,I))}(this.buf,c,p):function(m,E,I){for(var k="",D=E;D<I;){var j,q,te,ue=m[D],de=null,_e=ue>239?4:ue>223?3:ue>191?2:1;if(D+_e>I)break;_e===1?ue<128&&(de=ue):_e===2?(192&(j=m[D+1]))==128&&(de=(31&ue)<<6|63&j)<=127&&(de=null):_e===3?(q=m[D+2],(192&(j=m[D+1]))==128&&(192&q)==128&&((de=(15&ue)<<12|(63&j)<<6|63&q)<=2047||de>=55296&&de<=57343)&&(de=null)):_e===4&&(q=m[D+2],te=m[D+3],(192&(j=m[D+1]))==128&&(192&q)==128&&(192&te)==128&&((de=(15&ue)<<18|(63&j)<<12|(63&q)<<6|63&te)<=65535||de>=1114112)&&(de=null)),de===null?(de=65533,_e=1):de>65535&&(de-=65536,k+=String.fromCharCode(de>>>10&1023|55296),de=56320|1023&de),k+=String.fromCharCode(de),D+=_e}return k}(this.buf,c,p)},readBytes:function(){var p=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,p);return this.pos=p,c},readPackedVarint:function(p,c){if(this.type!==bi.Bytes)return p.push(this.readVarint(c));var m=Df(this);for(p=p||[];this.pos<m;)p.push(this.readVarint(c));return p},readPackedSVarint:function(p){if(this.type!==bi.Bytes)return p.push(this.readSVarint());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==bi.Bytes)return p.push(this.readBoolean());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==bi.Bytes)return p.push(this.readFloat());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==bi.Bytes)return p.push(this.readDouble());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==bi.Bytes)return p.push(this.readFixed32());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==bi.Bytes)return p.push(this.readSFixed32());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==bi.Bytes)return p.push(this.readFixed64());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==bi.Bytes)return p.push(this.readSFixed64());var c=Df(this);for(p=p||[];this.pos<c;)p.push(this.readSFixed64());return p},skip:function(p){var c=7&p;if(c===bi.Varint)for(;this.buf[this.pos++]>127;);else if(c===bi.Bytes)this.pos=this.readVarint()+this.pos;else if(c===bi.Fixed32)this.pos+=4;else{if(c!==bi.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(p,c){this.writeVarint(p<<3|c)},realloc:function(p){for(var c=this.length||16;c<this.pos+p;)c*=2;if(c!==this.length){var m=new Uint8Array(c);m.set(this.buf),this.buf=m,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),mm(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),mm(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),mm(this.buf,-1&p,this.pos),mm(this.buf,Math.floor(p*_F),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),mm(this.buf,-1&p,this.pos),mm(this.buf,Math.floor(p*_F),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(c,m){var E,I;if(c>=0?(E=c%4294967296|0,I=c/4294967296|0):(I=~(-c/4294967296),4294967295^(E=~(-c%4294967296))?E=E+1|0:(E=0,I=I+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(k,D,j){j.buf[j.pos++]=127&k|128,k>>>=7,j.buf[j.pos++]=127&k|128,k>>>=7,j.buf[j.pos++]=127&k|128,k>>>=7,j.buf[j.pos++]=127&k|128,j.buf[j.pos]=127&(k>>>=7)}(E,0,m),function(k,D){var j=(7&k)<<4;D.buf[D.pos++]|=j|((k>>>=3)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k)))))}(I,m)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(!!p)},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var c=this.pos;this.pos=function(E,I,k){for(var D,j,q=0;q<I.length;q++){if((D=I.charCodeAt(q))>55295&&D<57344){if(!j){D>56319||q+1===I.length?(E[k++]=239,E[k++]=191,E[k++]=189):j=D;continue}if(D<56320){E[k++]=239,E[k++]=191,E[k++]=189,j=D;continue}D=j-55296<<10|D-56320|65536,j=null}else j&&(E[k++]=239,E[k++]=191,E[k++]=189,j=null);D<128?E[k++]=D:(D<2048?E[k++]=D>>6|192:(D<65536?E[k++]=D>>12|224:(E[k++]=D>>18|240,E[k++]=D>>12&63|128),E[k++]=D>>6&63|128),E[k++]=63&D|128)}return k}(this.buf,p,this.pos);var m=this.pos-c;m>=128&&xF(c,m,this),this.pos=c-1,this.writeVarint(m),this.pos+=m},writeFloat:function(p){this.realloc(4),yF(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),yF(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var c=p.length;this.writeVarint(c),this.realloc(c);for(var m=0;m<c;m++)this.buf[this.pos++]=p[m]},writeRawMessage:function(p,c){this.pos++;var m=this.pos;p(c,this);var E=this.pos-m;E>=128&&xF(m,E,this),this.pos=m-1,this.writeVarint(E),this.pos+=E},writeMessage:function(p,c,m){this.writeTag(p,bi.Bytes),this.writeRawMessage(c,m)},writePackedVarint:function(p,c){c.length&&this.writeMessage(p,Gee,c)},writePackedSVarint:function(p,c){c.length&&this.writeMessage(p,qee,c)},writePackedBoolean:function(p,c){c.length&&this.writeMessage(p,Yee,c)},writePackedFloat:function(p,c){c.length&&this.writeMessage(p,Wee,c)},writePackedDouble:function(p,c){c.length&&this.writeMessage(p,Xee,c)},writePackedFixed32:function(p,c){c.length&&this.writeMessage(p,Hee,c)},writePackedSFixed32:function(p,c){c.length&&this.writeMessage(p,Zee,c)},writePackedFixed64:function(p,c){c.length&&this.writeMessage(p,Kee,c)},writePackedSFixed64:function(p,c){c.length&&this.writeMessage(p,Jee,c)},writeBytesField:function(p,c){this.writeTag(p,bi.Bytes),this.writeBytes(c)},writeFixed32Field:function(p,c){this.writeTag(p,bi.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(p,c){this.writeTag(p,bi.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(p,c){this.writeTag(p,bi.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(p,c){this.writeTag(p,bi.Fixed64),this.writeSFixed64(c)},writeVarintField:function(p,c){this.writeTag(p,bi.Varint),this.writeVarint(c)},writeSVarintField:function(p,c){this.writeTag(p,bi.Varint),this.writeSVarint(c)},writeStringField:function(p,c){this.writeTag(p,bi.Bytes),this.writeString(c)},writeFloatField:function(p,c){this.writeTag(p,bi.Fixed32),this.writeFloat(c)},writeDoubleField:function(p,c){this.writeTag(p,bi.Fixed64),this.writeDouble(c)},writeBooleanField:function(p,c){this.writeVarintField(p,!!c)}};var QA=d(gF);const eC=3;function Qee(p,c,m){p===1&&m.readMessage(ete,c)}function ete(p,c,m){if(p===3){const{id:E,bitmap:I,width:k,height:D,left:j,top:q,advance:te}=m.readMessage(tte,{});c.push({id:E,bitmap:new kv({width:k+2*eC,height:D+2*eC},I),metrics:{width:k,height:D,left:j,top:q,advance:te}})}}function tte(p,c,m){p===1?c.id=m.readVarint():p===2?c.bitmap=m.readBytes():p===3?c.width=m.readVarint():p===4?c.height=m.readVarint():p===5?c.left=m.readSVarint():p===6?c.top=m.readSVarint():p===7&&(c.advance=m.readVarint())}const EF=eC;function SF(p){let c=0,m=0;for(const D of p)c+=D.w*D.h,m=Math.max(m,D.w);p.sort((D,j)=>j.h-D.h);const E=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),m),h:1/0}];let I=0,k=0;for(const D of p)for(let j=E.length-1;j>=0;j--){const q=E[j];if(!(D.w>q.w||D.h>q.h)){if(D.x=q.x,D.y=q.y,k=Math.max(k,D.y+D.h),I=Math.max(I,D.x+D.w),D.w===q.w&&D.h===q.h){const te=E.pop();j<E.length&&(E[j]=te)}else D.h===q.h?(q.x+=D.w,q.w-=D.w):D.w===q.w?(q.y+=D.h,q.h-=D.h):(E.push({x:q.x+D.w,y:q.y,w:q.w-D.w,h:D.h}),q.y+=D.h,q.h-=D.h);break}}return{w:I,h:k,fill:c/(I*k)||0}}const du=1;class tC{constructor(c,{pixelRatio:m,version:E,stretchX:I,stretchY:k,content:D}){this.paddedRect=c,this.pixelRatio=m,this.stretchX=I,this.stretchY=k,this.content=D,this.version=E}get tl(){return[this.paddedRect.x+du,this.paddedRect.y+du]}get br(){return[this.paddedRect.x+this.paddedRect.w-du,this.paddedRect.y+this.paddedRect.h-du]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*du)/this.pixelRatio,(this.paddedRect.h-2*du)/this.pixelRatio]}}class PF{constructor(c,m){const E={},I={};this.haveRenderCallbacks=[];const k=[];this.addImages(c,E,k),this.addImages(m,I,k);const{w:D,h:j}=SF(k),q=new ml({width:D||1,height:j||1});for(const te in c){const ue=c[te],de=E[te].paddedRect;ml.copy(ue.data,q,{x:0,y:0},{x:de.x+du,y:de.y+du},ue.data)}for(const te in m){const ue=m[te],de=I[te].paddedRect,_e=de.x+du,Se=de.y+du,Ce=ue.data.width,Fe=ue.data.height;ml.copy(ue.data,q,{x:0,y:0},{x:_e,y:Se},ue.data),ml.copy(ue.data,q,{x:0,y:Fe-1},{x:_e,y:Se-1},{width:Ce,height:1}),ml.copy(ue.data,q,{x:0,y:0},{x:_e,y:Se+Fe},{width:Ce,height:1}),ml.copy(ue.data,q,{x:Ce-1,y:0},{x:_e-1,y:Se},{width:1,height:Fe}),ml.copy(ue.data,q,{x:0,y:0},{x:_e+Ce,y:Se},{width:1,height:Fe})}this.image=q,this.iconPositions=E,this.patternPositions=I}addImages(c,m,E){for(const I in c){const k=c[I],D={x:0,y:0,w:k.data.width+2*du,h:k.data.height+2*du};E.push(D),m[I]=new tC(D,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(I)}}patchUpdatedImages(c,m){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const E in c.updatedImages)this.patchUpdatedImage(this.iconPositions[E],c.getImage(E),m),this.patchUpdatedImage(this.patternPositions[E],c.getImage(E),m)}patchUpdatedImage(c,m,E){if(!c||!m||c.version===m.version)return;c.version=m.version;const[I,k]=c.tl;E.update(m.data,void 0,{x:I,y:k})}}var Ih;Jt("ImagePosition",tC),Jt("ImageAtlas",PF),a.WritingMode=void 0,(Ih=a.WritingMode||(a.WritingMode={}))[Ih.none=0]="none",Ih[Ih.horizontal=1]="horizontal",Ih[Ih.vertical=2]="vertical",Ih[Ih.horizontalOnly=3]="horizontalOnly";const Uv=-17;class Vv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,m){const E=new Vv;return E.scale=c||1,E.fontStack=m,E}static forImage(c){const m=new Vv;return m.imageName=c,m}}class gm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,m){const E=new gm;for(let I=0;I<c.sections.length;I++){const k=c.sections[I];k.image?E.addImageSection(k):E.addTextSection(k,m)}return E}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let m="";for(let E=0;E<c.length;E++){const I=c.charCodeAt(E+1)||null,k=c.charCodeAt(E-1)||null;m+=I&&ks(I)&&!jv[c[E+1]]||k&&ks(k)&&!jv[c[E-1]]||!jv[c[E]]?c[E]:jv[c[E]]}return m}(this.text)}trim(){let c=0;for(let E=0;E<this.text.length&&Q1[this.text.charCodeAt(E)];E++)c++;let m=this.text.length;for(let E=this.text.length-1;E>=0&&E>=c&&Q1[this.text.charCodeAt(E)];E--)m--;this.text=this.text.substring(c,m),this.sectionIndex=this.sectionIndex.slice(c,m)}substring(c,m){const E=new gm;return E.text=this.text.substring(c,m),E.sectionIndex=this.sectionIndex.slice(c,m),E.sections=this.sections,E}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,m)=>Math.max(c,this.sections[m].scale),0)}addTextSection(c,m){this.text+=c.text,this.sections.push(Vv.forText(c.scale,c.fontStack||m));const E=this.sections.length-1;for(let I=0;I<c.text.length;++I)this.sectionIndex.push(E)}addImageSection(c){const m=c.image?c.image.name:"";if(m.length===0)return void W("Can't add FormattedSection with an empty image.");const E=this.getNextImageSectionCharCode();E?(this.text+=String.fromCharCode(E),this.sections.push(Vv.forImage(m)),this.sectionIndex.push(this.sections.length-1)):W("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function J1(p,c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe){const Ue=gm.fromFeature(p,I);let We;de===a.WritingMode.vertical&&Ue.verticalizePunctuation();const{processBidirectionalText:st,processStyledBidirectionalText:Je}=ci;if(st&&Ue.sections.length===1){We=[];const Et=st(Ue.toString(),rC(Ue,te,k,c,E,Se,Ce));for(const Yt of Et){const mr=new gm;mr.text=Yt,mr.sections=Ue.sections;for(let Xt=0;Xt<Yt.length;Xt++)mr.sectionIndex.push(0);We.push(mr)}}else if(Je){We=[];const Et=Je(Ue.text,Ue.sectionIndex,rC(Ue,te,k,c,E,Se,Ce));for(const Yt of Et){const mr=new gm;mr.text=Yt[0],mr.sectionIndex=Yt[1],mr.sections=Ue.sections,We.push(mr)}}else We=function(Et,Yt){const mr=[],Xt=Et.text;let Ut=0;for(const Ft of Yt)mr.push(Et.substring(Ut,Ft)),Ut=Ft;return Ut<Xt.length&&mr.push(Et.substring(Ut,Xt.length)),mr}(Ue,rC(Ue,te,k,c,E,Se,Ce));const lt=[],ft={positionedLines:lt,text:Ue.toString(),top:ue[1],bottom:ue[1],left:ue[0],right:ue[0],writingMode:de,iconsInText:!1,verticalizable:!1};return function(Et,Yt,mr,Xt,Ut,Ft,tr,Bt,Tt,Pr,vr,sn){let Di=0,Vi=Uv,ua=0,Bu=0;const js=Bt==="right"?1:Bt==="left"?0:.5;let Wo=0;for(const Xo of Ut){Xo.trim();const la=Xo.getMaxScale(),gs=(la-1)*sa,Vs={positionedGlyphs:[],lineOffset:0};Et.positionedLines[Wo]=Vs;const mu=Vs.positionedGlyphs;let gu=0;if(!Xo.length()){Vi+=Ft,++Wo;continue}for(let es=0;es<Xo.length();es++){const pn=Xo.getSection(es),ju=Xo.getSectionIndex(es),ts=Xo.getCharCode(es);let Gs=0,ql=null,hc=null,dc=null,Nf=sa;const Wl=!(Tt===a.WritingMode.horizontal||!vr&&!ra(ts)||vr&&(Q1[ts]||(va=ts,Mt.Arabic(va)||Mt["Arabic Supplement"](va)||Mt["Arabic Extended-A"](va)||Mt["Arabic Presentation Forms-A"](va)||Mt["Arabic Presentation Forms-B"](va))));if(pn.imageName){const vl=Xt[pn.imageName];if(!vl)continue;dc=pn.imageName,Et.iconsInText=Et.iconsInText||!0,hc=vl.paddedRect;const vu=vl.displaySize;pn.scale=pn.scale*sa/sn,ql={width:vu[0],height:vu[1],left:du,top:-EF,advance:Wl?vu[1]:vu[0]},Gs=gs+(sa-vu[1]*pn.scale),Nf=ql.advance;const Ff=Wl?vu[0]*pn.scale-sa*la:vu[1]*pn.scale-sa*la;Ff>0&&Ff>gu&&(gu=Ff)}else{const vl=mr[pn.fontStack],vu=vl&&vl[ts];if(vu&&vu.rect)hc=vu.rect,ql=vu.metrics;else{const Ff=Yt[pn.fontStack],Yv=Ff&&Ff[ts];if(!Yv)continue;ql=Yv.metrics}Gs=(la-pn.scale)*sa}Wl?(Et.verticalizable=!0,mu.push({glyph:ts,imageName:dc,x:Di,y:Vi+Gs,vertical:Wl,scale:pn.scale,fontStack:pn.fontStack,sectionIndex:ju,metrics:ql,rect:hc}),Di+=Nf*pn.scale+Pr):(mu.push({glyph:ts,imageName:dc,x:Di,y:Vi+Gs,vertical:Wl,scale:pn.scale,fontStack:pn.fontStack,sectionIndex:ju,metrics:ql,rect:hc}),Di+=ql.advance*pn.scale+Pr)}mu.length!==0&&(ua=Math.max(Di-Pr,ua),ite(mu,0,mu.length-1,js,gu)),Di=0;const So=Ft*la+gu;Vs.lineOffset=Math.max(gu,gs),Vi+=So,Bu=Math.max(So,Bu),++Wo}var va;const Qa=Vi-Uv,{horizontalAlign:pu,verticalAlign:Us}=nC(tr);(function(Xo,la,gs,Vs,mu,gu,So,es,pn){const ju=(la-gs)*mu;let ts=0;ts=gu!==So?-es*Vs-Uv:(-Vs*pn+.5)*So;for(const Gs of Xo)for(const ql of Gs.positionedGlyphs)ql.x+=ju,ql.y+=ts})(Et.positionedLines,js,pu,Us,ua,Bu,Ft,Qa,Ut.length),Et.top+=-Us*Qa,Et.bottom=Et.top+Qa,Et.left+=-pu*ua,Et.right=Et.left+ua}(ft,c,m,E,We,D,j,q,de,te,_e,Fe),!function(Et){for(const Yt of Et)if(Yt.positionedGlyphs.length!==0)return!1;return!0}(lt)&&ft}const Q1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rte={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function AF(p,c,m,E,I,k){if(c.imageName){const D=E[c.imageName];return D?D.displaySize[0]*c.scale*sa/k+I:0}{const D=m[c.fontStack],j=D&&D[p];return j?j.metrics.advance*c.scale+I:0}}function CF(p,c,m,E){const I=Math.pow(p-c,2);return E?p<c?I/2:2*I:I+Math.abs(m)*m}function nte(p,c,m){let E=0;return p===10&&(E-=1e4),m&&(E+=150),p!==40&&p!==65288||(E+=50),c!==41&&c!==65289||(E+=50),E}function IF(p,c,m,E,I,k){let D=null,j=CF(c,m,I,k);for(const q of E){const te=CF(c-q.x,m,I,k)+q.badness;te<=j&&(D=q,j=te)}return{index:p,x:c,priorBreak:D,badness:j}}function OF(p){return p?OF(p.priorBreak).concat(p.index):[]}function rC(p,c,m,E,I,k,D){if(k!=="point")return[];if(!p)return[];const j=[],q=function(_e,Se,Ce,Fe,Ue,We){let st=0;for(let Je=0;Je<_e.length();Je++){const lt=_e.getSection(Je);st+=AF(_e.getCharCode(Je),lt,Fe,Ue,Se,We)}return st/Math.max(1,Math.ceil(st/Ce))}(p,c,m,E,I,D),te=p.text.indexOf("")>=0;let ue=0;for(let _e=0;_e<p.length();_e++){const Se=p.getSection(_e),Ce=p.getCharCode(_e);if(Q1[Ce]||(ue+=AF(Ce,Se,E,I,c,D)),_e<p.length()-1){const Fe=!((de=Ce)<11904||!(Mt["Bopomofo Extended"](de)||Mt.Bopomofo(de)||Mt["CJK Compatibility Forms"](de)||Mt["CJK Compatibility Ideographs"](de)||Mt["CJK Compatibility"](de)||Mt["CJK Radicals Supplement"](de)||Mt["CJK Strokes"](de)||Mt["CJK Symbols and Punctuation"](de)||Mt["CJK Unified Ideographs Extension A"](de)||Mt["CJK Unified Ideographs"](de)||Mt["Enclosed CJK Letters and Months"](de)||Mt["Halfwidth and Fullwidth Forms"](de)||Mt.Hiragana(de)||Mt["Ideographic Description Characters"](de)||Mt["Kangxi Radicals"](de)||Mt["Katakana Phonetic Extensions"](de)||Mt.Katakana(de)||Mt["Vertical Forms"](de)||Mt["Yi Radicals"](de)||Mt["Yi Syllables"](de)));(rte[Ce]||Fe||Se.imageName)&&j.push(IF(_e+1,ue,q,j,nte(Ce,p.getCharCode(_e+1),Fe&&te),!1))}}var de;return OF(IF(p.length(),ue,q,j,0,!0))}function nC(p){let c=.5,m=.5;switch(p){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(p){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:c,verticalAlign:m}}function ite(p,c,m,E,I){if(!E&&!I)return;const k=p[m],D=(p[m].x+k.metrics.advance*k.scale)*E;for(let j=c;j<=m;j++)p[j].x-=D,p[j].y+=I}function ote(p,c,m){const{horizontalAlign:E,verticalAlign:I}=nC(m),k=c[0]-p.displaySize[0]*E,D=c[1]-p.displaySize[1]*I;return{image:p,top:D,bottom:D+p.displaySize[1],left:k,right:k+p.displaySize[0]}}function TF(p,c,m,E,I,k){const D=p.image;let j;if(D.content){const Ue=D.content,We=D.pixelRatio||1;j=[Ue[0]/We,Ue[1]/We,D.displaySize[0]-Ue[2]/We,D.displaySize[1]-Ue[3]/We]}const q=c.left*k,te=c.right*k;let ue,de,_e,Se;m==="width"||m==="both"?(Se=I[0]+q-E[3],de=I[0]+te+E[1]):(Se=I[0]+(q+te-D.displaySize[0])/2,de=Se+D.displaySize[0]);const Ce=c.top*k,Fe=c.bottom*k;return m==="height"||m==="both"?(ue=I[1]+Ce-E[0],_e=I[1]+Fe+E[2]):(ue=I[1]+(Ce+Fe-D.displaySize[1])/2,_e=ue+D.displaySize[1]),{image:D,top:ue,right:de,bottom:_e,left:Se,collisionPadding:j}}const Gv=255,Xc=128,Oh=Gv*Xc;function MF(p,c){const{expression:m}=c;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new fi(p+1))};if(m.kind==="source")return{kind:"source"};{const{zoomStops:E,interpolationType:I}=m;let k=0;for(;k<E.length&&E[k]<=p;)k++;k=Math.max(0,k-1);let D=k;for(;D<E.length&&E[D]<p+1;)D++;D=Math.min(E.length-1,D);const j=E[k],q=E[D];return m.kind==="composite"?{kind:"composite",minZoom:j,maxZoom:q,interpolationType:I}:{kind:"camera",minZoom:j,maxZoom:q,minSize:m.evaluate(new fi(j)),maxSize:m.evaluate(new fi(q)),interpolationType:I}}}function iC(p,c,m){let E="never";const I=p.get(c);return I?E=I:p.get(m)&&(E="always"),E}const ate=Ch.VectorTileFeature.types,ste=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function eb(p,c,m,E,I,k,D,j,q,te,ue,de,_e){const Se=j?Math.min(Oh,Math.round(j[0])):0,Ce=j?Math.min(Oh,Math.round(j[1])):0;p.emplaceBack(c,m,Math.round(32*E),Math.round(32*I),k,D,(Se<<1)+(q?1:0),Ce,16*te,16*ue,256*de,256*_e)}function oC(p,c,m){p.emplaceBack(c.x,c.y,m),p.emplaceBack(c.x,c.y,m),p.emplaceBack(c.x,c.y,m),p.emplaceBack(c.x,c.y,m)}function ute(p){for(const c of p.sections)if(zl(c.text))return!0;return!1}class aC{constructor(c){this.layoutVertexArray=new St,this.indexArray=new xr,this.programConfigurations=c,this.segments=new Sr,this.dynamicLayoutVertexArray=new Dt,this.opacityVertexArray=new pr,this.hasVisibleVertices=!1,this.placedSymbolArray=new ee}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,m,E,I){this.isEmpty()||(E&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,zee.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,m),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,Bee.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,ste,!0),this.opacityVertexBuffer.itemSize=1),(E||I)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Jt("SymbolBuffers",aC);class sC{constructor(c,m,E){this.layoutVertexArray=new c,this.layoutAttributes=m,this.indexArray=new E,this.segments=new Sr,this.collisionVertexArray=new jt}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,jee.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Jt("CollisionBuffers",sC);class vm{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(D=>D.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$A([]),this.placementViewportMatrix=$A([]);const m=this.layers[0]._unevaluatedLayout._values;this.textSizeData=MF(this.zoom,m["text-size"]),this.iconSizeData=MF(this.zoom,m["icon-size"]);const E=this.layers[0].layout,I=E.get("symbol-sort-key"),k=E.get("symbol-z-order");this.canOverlap=iC(E,"text-overlap","text-allow-overlap")!=="never"||iC(E,"icon-overlap","icon-allow-overlap")!=="never"||E.get("text-ignore-placement")||E.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!I.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,E.get("symbol-placement")==="point"&&(this.writingModes=E.get("text-writing-mode").map(D=>a.WritingMode[D])),this.stateDependentLayerIds=this.layers.filter(D=>D.isStateDependent()).map(D=>D.id),this.sourceID=c.sourceID}createArrays(){this.text=new aC(new Rf(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new aC(new Rf(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new we,this.lineVertexArray=new De,this.symbolInstances=new le,this.textAnchorOffsets=new Be}calculateGlyphDependencies(c,m,E,I,k){for(let D=0;D<c.length;D++)if(m[c.charCodeAt(D)]=!0,(E||I)&&k){const j=jv[c.charAt(D)];j&&(m[j.charCodeAt(0)]=!0)}}populate(c,m,E){const I=this.layers[0],k=I.layout,D=k.get("text-font"),j=k.get("text-field"),q=k.get("icon-image"),te=(j.value.kind!=="constant"||j.value.value instanceof Jr&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),ue=q.value.kind!=="constant"||!!q.value.value||Object.keys(q.parameters).length>0,de=k.get("symbol-sort-key");if(this.features=[],!te&&!ue)return;const _e=m.iconDependencies,Se=m.glyphDependencies,Ce=m.availableImages,Fe=new fi(this.zoom);for(const{feature:Ue,id:We,index:st,sourceLayerIndex:Je}of c){const lt=I._featureFilter.needGeometry,ft=Wc(Ue,lt);if(!I._featureFilter.filter(Fe,ft,E))continue;let Et,Yt;if(lt||(ft.geometry=fc(Ue)),te){const Xt=I.getValueAndResolveTokens("text-field",ft,E,Ce),Ut=Jr.factory(Xt);ute(Ut)&&(this.hasRTLText=!0),(!this.hasRTLText||lu()==="unavailable"||this.hasRTLText&&ci.isParsed())&&(Et=Vee(Ut,I,ft))}if(ue){const Xt=I.getValueAndResolveTokens("icon-image",ft,E,Ce);Yt=Xt instanceof Pi?Xt:Pi.fromString(Xt)}if(!Et&&!Yt)continue;const mr=this.sortFeaturesByKey?de.evaluate(ft,{},E):void 0;if(this.features.push({id:We,text:Et,icon:Yt,index:st,sourceLayerIndex:Je,geometry:ft.geometry,properties:Ue.properties,type:ate[Ue.type],sortKey:mr}),Yt&&(_e[Yt.name]=!0),Et){const Xt=D.evaluate(ft,{},E).join(","),Ut=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const Ft of Et.sections)if(Ft.image)_e[Ft.image.name]=!0;else{const tr=Vc(Et.toString()),Bt=Ft.fontStack||Xt,Tt=Se[Bt]=Se[Bt]||{};this.calculateGlyphDependencies(Ft.text,Tt,Ut,this.allowVerticalPlacement,tr)}}}k.get("symbol-placement")==="line"&&(this.features=function(Ue){const We={},st={},Je=[];let lt=0;function ft(Xt){Je.push(Ue[Xt]),lt++}function Et(Xt,Ut,Ft){const tr=st[Xt];return delete st[Xt],st[Ut]=tr,Je[tr].geometry[0].pop(),Je[tr].geometry[0]=Je[tr].geometry[0].concat(Ft[0]),tr}function Yt(Xt,Ut,Ft){const tr=We[Ut];return delete We[Ut],We[Xt]=tr,Je[tr].geometry[0].shift(),Je[tr].geometry[0]=Ft[0].concat(Je[tr].geometry[0]),tr}function mr(Xt,Ut,Ft){const tr=Ft?Ut[0][Ut[0].length-1]:Ut[0][0];return`${Xt}:${tr.x}:${tr.y}`}for(let Xt=0;Xt<Ue.length;Xt++){const Ut=Ue[Xt],Ft=Ut.geometry,tr=Ut.text?Ut.text.toString():null;if(!tr){ft(Xt);continue}const Bt=mr(tr,Ft),Tt=mr(tr,Ft,!0);if(Bt in st&&Tt in We&&st[Bt]!==We[Tt]){const Pr=Yt(Bt,Tt,Ft),vr=Et(Bt,Tt,Je[Pr].geometry);delete We[Bt],delete st[Tt],st[mr(tr,Je[vr].geometry,!0)]=vr,Je[Pr].geometry=null}else Bt in st?Et(Bt,Tt,Ft):Tt in We?Yt(Bt,Tt,Ft):(ft(Xt),We[Bt]=lt-1,st[Tt]=lt-1)}return Je.filter(Xt=>Xt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ue,We)=>Ue.sortKey-We.sortKey)}update(c,m,E){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,m,this.layers,E),this.icon.programConfigurations.updatePaintArrays(c,m,this.layers,E))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,m){const E=this.lineVertexArray.length;if(c.segment!==void 0){let I=c.dist(m[c.segment+1]),k=c.dist(m[c.segment]);const D={};for(let j=c.segment+1;j<m.length;j++)D[j]={x:m[j].x,y:m[j].y,tileUnitDistanceFromAnchor:I},j<m.length-1&&(I+=m[j+1].dist(m[j]));for(let j=c.segment||0;j>=0;j--)D[j]={x:m[j].x,y:m[j].y,tileUnitDistanceFromAnchor:k},j>0&&(k+=m[j-1].dist(m[j]));for(let j=0;j<m.length;j++){const q=D[j];this.lineVertexArray.emplaceBack(q.x,q.y,q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:E,lineLength:this.lineVertexArray.length-E}}addSymbols(c,m,E,I,k,D,j,q,te,ue,de,_e){const Se=c.indexArray,Ce=c.layoutVertexArray,Fe=c.segments.prepareSegment(4*m.length,Ce,Se,this.canOverlap?D.sortKey:void 0),Ue=this.glyphOffsetArray.length,We=Fe.vertexLength,st=this.allowVerticalPlacement&&j===a.WritingMode.vertical?Math.PI/2:0,Je=D.text&&D.text.sections;for(let lt=0;lt<m.length;lt++){const{tl:ft,tr:Et,bl:Yt,br:mr,tex:Xt,pixelOffsetTL:Ut,pixelOffsetBR:Ft,minFontScaleX:tr,minFontScaleY:Bt,glyphOffset:Tt,isSDF:Pr,sectionIndex:vr}=m[lt],sn=Fe.vertexLength,Di=Tt[1];eb(Ce,q.x,q.y,ft.x,Di+ft.y,Xt.x,Xt.y,E,Pr,Ut.x,Ut.y,tr,Bt),eb(Ce,q.x,q.y,Et.x,Di+Et.y,Xt.x+Xt.w,Xt.y,E,Pr,Ft.x,Ut.y,tr,Bt),eb(Ce,q.x,q.y,Yt.x,Di+Yt.y,Xt.x,Xt.y+Xt.h,E,Pr,Ut.x,Ft.y,tr,Bt),eb(Ce,q.x,q.y,mr.x,Di+mr.y,Xt.x+Xt.w,Xt.y+Xt.h,E,Pr,Ft.x,Ft.y,tr,Bt),oC(c.dynamicLayoutVertexArray,q,st),Se.emplaceBack(sn,sn+1,sn+2),Se.emplaceBack(sn+1,sn+2,sn+3),Fe.vertexLength+=4,Fe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Tt[0]),lt!==m.length-1&&vr===m[lt+1].sectionIndex||c.programConfigurations.populatePaintArrays(Ce.length,D,D.index,{},_e,Je&&Je[vr])}c.placedSymbolArray.emplaceBack(q.x,q.y,Ue,this.glyphOffsetArray.length-Ue,We,te,ue,q.segment,E?E[0]:0,E?E[1]:0,I[0],I[1],j,0,!1,0,de)}_addCollisionDebugVertex(c,m,E,I,k,D){return m.emplaceBack(0,0),c.emplaceBack(E.x,E.y,I,k,Math.round(D.x),Math.round(D.y))}addCollisionDebugVertices(c,m,E,I,k,D,j){const q=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),te=q.vertexLength,ue=k.layoutVertexArray,de=k.collisionVertexArray,_e=j.anchorX,Se=j.anchorY;this._addCollisionDebugVertex(ue,de,D,_e,Se,new _(c,m)),this._addCollisionDebugVertex(ue,de,D,_e,Se,new _(E,m)),this._addCollisionDebugVertex(ue,de,D,_e,Se,new _(E,I)),this._addCollisionDebugVertex(ue,de,D,_e,Se,new _(c,I)),q.vertexLength+=4;const Ce=k.indexArray;Ce.emplaceBack(te,te+1),Ce.emplaceBack(te+1,te+2),Ce.emplaceBack(te+2,te+3),Ce.emplaceBack(te+3,te),q.primitiveLength+=4}addDebugCollisionBoxes(c,m,E,I){for(let k=c;k<m;k++){const D=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,I?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,E)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sC(cn,mF.members,fr),this.iconCollisionBox=new sC(cn,mF.members,fr);for(let c=0;c<this.symbolInstances.length;c++){const m=this.symbolInstances.get(c);this.addDebugCollisionBoxes(m.textBoxStartIndex,m.textBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.iconBoxStartIndex,m.iconBoxEndIndex,m,!1),this.addDebugCollisionBoxes(m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m,!1)}}_deserializeCollisionBoxesForSymbol(c,m,E,I,k,D,j,q,te){const ue={};for(let de=m;de<E;de++){const _e=c.get(de);ue.textBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ue.textFeatureIndex=_e.featureIndex;break}for(let de=I;de<k;de++){const _e=c.get(de);ue.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ue.verticalTextFeatureIndex=_e.featureIndex;break}for(let de=D;de<j;de++){const _e=c.get(de);ue.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ue.iconFeatureIndex=_e.featureIndex;break}for(let de=q;de<te;de++){const _e=c.get(de);ue.verticalIconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ue.verticalIconFeatureIndex=_e.featureIndex;break}return ue}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let m=0;m<this.symbolInstances.length;m++){const E=this.symbolInstances.get(m);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,E.textBoxStartIndex,E.textBoxEndIndex,E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E.iconBoxStartIndex,E.iconBoxEndIndex,E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,m){const E=c.placedSymbolArray.get(m),I=E.vertexStartIndex+4*E.numGlyphs;for(let k=E.vertexStartIndex;k<I;k+=4)c.indexArray.emplaceBack(k,k+1,k+2),c.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const m=Math.sin(c),E=Math.cos(c),I=[],k=[],D=[];for(let j=0;j<this.symbolInstances.length;++j){D.push(j);const q=this.symbolInstances.get(j);I.push(0|Math.round(m*q.anchorX+E*q.anchorY)),k.push(q.featureIndex)}return D.sort((j,q)=>I[j]-I[q]||k[q]-k[j]),D}addToSortKeyRanges(c,m){const E=this.sortKeyRanges[this.sortKeyRanges.length-1];E&&E.sortKey===m?E.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:m,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const m of this.symbolInstanceIndexes){const E=this.symbolInstances.get(m);this.featureSortOrder.push(E.featureIndex),[E.rightJustifiedTextSymbolIndex,E.centerJustifiedTextSymbolIndex,E.leftJustifiedTextSymbolIndex].forEach((I,k,D)=>{I>=0&&D.indexOf(I)===k&&this.addIndicesForPlacedSymbol(this.text,I)}),E.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,E.verticalPlacedTextSymbolIndex),E.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,E.placedIconSymbolIndex),E.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,E.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let LF,RF;Jt("SymbolBucket",vm,{omit:["layers","collisionBoxArray","features","compareText"]}),vm.MAX_GLYPHS=65535,vm.addDynamicAttributes=oC;var uC={get paint(){return RF=RF||new ga({"icon-opacity":new Ir(Ze.paint_symbol["icon-opacity"]),"icon-color":new Ir(Ze.paint_symbol["icon-color"]),"icon-halo-color":new Ir(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ir(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ir(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new gr(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new gr(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ir(Ze.paint_symbol["text-opacity"]),"text-color":new Ir(Ze.paint_symbol["text-color"],{runtimeType:Lr,getOverride:p=>p.textColor,hasOverride:p=>!!p.textColor}),"text-halo-color":new Ir(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new Ir(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new Ir(Ze.paint_symbol["text-halo-blur"]),"text-translate":new gr(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new gr(Ze.paint_symbol["text-translate-anchor"])})},get layout(){return LF=LF||new ga({"symbol-placement":new gr(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new gr(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gr(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ir(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gr(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gr(Ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gr(Ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gr(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new gr(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gr(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ir(Ze.layout_symbol["icon-size"]),"icon-text-fit":new gr(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gr(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ir(Ze.layout_symbol["icon-image"]),"icon-rotate":new Ir(Ze.layout_symbol["icon-rotate"]),"icon-padding":new Ir(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new gr(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new Ir(Ze.layout_symbol["icon-offset"]),"icon-anchor":new Ir(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gr(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gr(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gr(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new Ir(Ze.layout_symbol["text-field"]),"text-font":new Ir(Ze.layout_symbol["text-font"]),"text-size":new Ir(Ze.layout_symbol["text-size"]),"text-max-width":new Ir(Ze.layout_symbol["text-max-width"]),"text-line-height":new gr(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new Ir(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new Ir(Ze.layout_symbol["text-justify"]),"text-radial-offset":new Ir(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gr(Ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ir(Ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ir(Ze.layout_symbol["text-anchor"]),"text-max-angle":new gr(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new gr(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new Ir(Ze.layout_symbol["text-rotate"]),"text-padding":new gr(Ze.layout_symbol["text-padding"]),"text-keep-upright":new gr(Ze.layout_symbol["text-keep-upright"]),"text-transform":new Ir(Ze.layout_symbol["text-transform"]),"text-offset":new Ir(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new gr(Ze.layout_symbol["text-allow-overlap"]),"text-overlap":new gr(Ze.layout_symbol["text-overlap"]),"text-ignore-placement":new gr(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new gr(Ze.layout_symbol["text-optional"])})}};class kF{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:lr,this.defaultValue=c}evaluate(c){if(c.formattedSection){const m=this.defaultValue.property.overrides;if(m&&m.hasOverride(c.formattedSection))return m.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt("FormatSectionOverride",kF,{omit:["defaultValue"]});class tb extends na{constructor(c){super(c,uC)}recalculate(c,m){if(super.recalculate(c,m),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const E=this.layout.get("text-writing-mode");if(E){const I=[];for(const k of E)I.indexOf(k)<0&&I.push(k);this.layout._values["text-writing-mode"]=I}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,m,E,I){const k=this.layout.get(c).evaluate(m,{},E,I),D=this._unevaluatedLayout._values[c];return D.isDataDriven()||Xi(D.value)||!k?k:function(j,q){return q.replace(/{([^{}]+)}/g,(te,ue)=>ue in j?String(j[ue]):"")}(m.properties,k)}createBucket(c){return new vm(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of uC.paint.overridableProperties){if(!tb.hasPaintOverride(this.layout,c))continue;const m=this.paint.get(c),E=new kF(m),I=new li(E,m.property.specification);let k=null;k=m.value.kind==="constant"||m.value.kind==="source"?new Fl("source",I):new bn("composite",I,m.value.zoomStops),this.paint._values[c]=new Ns(m.property,k,m.parameters)}}_handleOverridablePaintPropertyUpdate(c,m,E){return!(!this.layout||m.isDataDriven()||E.isDataDriven())&&tb.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,m){const E=c.get("text-field"),I=uC.paint.properties[m];let k=!1;const D=j=>{for(const q of j)if(I.overrides&&I.overrides.hasOverride(q))return void(k=!0)};if(E.value.kind==="constant"&&E.value.value instanceof Jr)D(E.value.value.sections);else if(E.value.kind==="source"){const j=te=>{k||(te instanceof Ea&&di(te.value)===_n?D(te.value.sections):te instanceof Cs?D(te.sections):te.eachChild(j))},q=E.value;q._styleExpression&&j(q._styleExpression.expression)}return k}}let DF;var lte={get paint(){return DF=DF||new ga({"background-color":new gr(Ze.paint_background["background-color"]),"background-pattern":new jl(Ze.paint_background["background-pattern"]),"background-opacity":new gr(Ze.paint_background["background-opacity"])})}};class cte extends na{constructor(c){super(c,lte)}}let NF;var fte={get paint(){return NF=NF||new ga({"raster-opacity":new gr(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new gr(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gr(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gr(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new gr(Ze.paint_raster["raster-saturation"]),"raster-contrast":new gr(Ze.paint_raster["raster-contrast"]),"raster-resampling":new gr(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new gr(Ze.paint_raster["raster-fade-duration"])})}};class hte extends na{constructor(c){super(c,fte)}}class dte extends na{constructor(c){super(c,{}),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class pte{constructor(c){this._callback=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const lC=63710088e-1;class Th{constructor(c,m){if(isNaN(c)||isNaN(m))throw new Error(`Invalid LngLat object: (${c}, ${m})`);if(this.lng=+c,this.lat=+m,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Th(T(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const m=Math.PI/180,E=this.lat*m,I=c.lat*m,k=Math.sin(E)*Math.sin(I)+Math.cos(E)*Math.cos(I)*Math.cos((c.lng-this.lng)*m);return lC*Math.acos(Math.min(k,1))}static convert(c){if(c instanceof Th)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Th(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Th(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const FF=2*Math.PI*lC;function $F(p){return FF*Math.cos(p*Math.PI/180)}function zF(p){return(180+p)/360}function BF(p){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p*Math.PI/360)))/360}function jF(p,c){return p/$F(c)}function cC(p){return 360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90}class rb{constructor(c,m,E=0){this.x=+c,this.y=+m,this.z=+E}static fromLngLat(c,m=0){const E=Th.convert(c);return new rb(zF(E.lng),BF(E.lat),jF(m,E.lat))}toLngLat(){return new Th(360*this.x-180,cC(this.y))}toAltitude(){return this.z*$F(cC(this.y))}meterInMercatorCoordinateUnits(){return 1/FF*(c=cC(this.y),1/Math.cos(c*Math.PI/180));var c}}function UF(p,c,m){var E=2*Math.PI*6378137/256/Math.pow(2,m);return[p*E-2*Math.PI*6378137/2,c*E-2*Math.PI*6378137/2]}class fC{constructor(c,m,E){if(c<0||c>25||E<0||E>=Math.pow(2,c)||m<0||m>=Math.pow(2,c))throw new Error(`x=${m}, y=${E}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=m,this.y=E,this.key=qv(0,c,c,m,E)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,m,E){const I=(D=this.y,j=this.z,q=UF(256*(k=this.x),256*(D=Math.pow(2,j)-D-1),j),te=UF(256*(k+1),256*(D+1),j),q[0]+","+q[1]+","+te[0]+","+te[1]);var k,D,j,q,te;const ue=function(de,_e,Se){let Ce,Fe="";for(let Ue=de;Ue>0;Ue--)Ce=1<<Ue-1,Fe+=(_e&Ce?1:0)+(Se&Ce?2:0);return Fe}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(E==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,m>1?"@2x":"").replace(/{quadkey}/g,ue).replace(/{bbox-epsg-3857}/g,I)}isChildOf(c){const m=this.z-c.z;return m>0&&c.x===this.x>>m&&c.y===this.y>>m}getTilePoint(c){const m=Math.pow(2,this.z);return new _((c.x*m-this.x)*co,(c.y*m-this.y)*co)}toString(){return`${this.z}/${this.x}/${this.y}`}}class VF{constructor(c,m){this.wrap=c,this.canonical=m,this.key=qv(c,m.z,m.z,m.x,m.y)}}class gl{constructor(c,m,E,I,k){if(c<E)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${E}`);this.overscaledZ=c,this.wrap=m,this.canonical=new fC(E,+I,+k),this.key=qv(m,c,E,I,k)}clone(){return new gl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-c;return c>this.canonical.z?new gl(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gl(c,this.wrap,c,this.canonical.x>>m,this.canonical.y>>m)}calculateScaledKey(c,m){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const E=this.canonical.z-c;return c>this.canonical.z?qv(this.wrap*+m,c,this.canonical.z,this.canonical.x,this.canonical.y):qv(this.wrap*+m,c,c,this.canonical.x>>E,this.canonical.y>>E)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const m=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>m&&c.canonical.y===this.canonical.y>>m}children(c){if(this.overscaledZ>=c)return[new gl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const m=this.canonical.z+1,E=2*this.canonical.x,I=2*this.canonical.y;return[new gl(m,this.wrap,m,E,I),new gl(m,this.wrap,m,E+1,I),new gl(m,this.wrap,m,E,I+1),new gl(m,this.wrap,m,E+1,I+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new gl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new gl(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new VF(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new rb(c.x-this.wrap,c.y))}}function qv(p,c,m,E,I){(p*=2)<0&&(p=-1*p-1);const k=1<<m;return(k*k*p+k*I+E).toString(36)+m.toString(36)+c.toString(36)}Jt("CanonicalTileID",fC),Jt("OverscaledTileID",gl,{omit:["posMatrix"]});class GF{constructor(c,m,E){if(this.uid=c,m.height!==m.width)throw new RangeError("DEM tiles must be square");if(E&&E!=="mapbox"&&E!=="terrarium")return void W(`"${E}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=m.height;const I=this.dim=m.height-2;this.data=new Uint32Array(m.data.buffer),this.encoding=E||"mapbox";for(let k=0;k<I;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(I,k)]=this.data[this._idx(I-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,I)]=this.data[this._idx(k,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<I;k++)for(let D=0;D<I;D++){const j=this.get(k,D);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(c,m){const E=new Uint8Array(this.data.buffer),I=4*this._idx(c,m);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(E[I],E[I+1],E[I+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(c,m){if(c<-1||c>=this.dim+1||m<-1||m>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(m+1)*this.stride+(c+1)}_unpackMapbox(c,m,E){return(256*c*256+256*m+E)/10-1e4}_unpackTerrarium(c,m,E){return 256*c+m+E/256-32768}getPixels(){return new ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,m,E){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let I=m*this.dim,k=m*this.dim+this.dim,D=E*this.dim,j=E*this.dim+this.dim;switch(m){case-1:I=k-1;break;case 1:k=I+1}switch(E){case-1:D=j-1;break;case 1:j=D+1}const q=-m*this.dim,te=-E*this.dim;for(let ue=D;ue<j;ue++)for(let de=I;de<k;de++)this.data[this._idx(de,ue)]=c.data[this._idx(de+q,ue+te)]}}Jt("DEMData",GF);class qF{constructor(c){this._stringToNumber={},this._numberToString=[];for(let m=0;m<c.length;m++){const E=c[m];this._stringToNumber[E]=m,this._numberToString[m]=E}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class WF{constructor(c,m,E,I,k){this.type="Feature",this._vectorTileFeature=c,c._z=m,c._x=E,c._y=I,this.properties=c.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const m in this)m!=="_geometry"&&m!=="_vectorTileFeature"&&(c[m]=this[m]);return c}}class XF{constructor(c,m){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new ma(co,16,0),this.grid3D=new ma(co,16,0),this.featureIndexArray=new et,this.promoteId=m}insert(c,m,E,I,k,D){const j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(E,I,k);const q=D?this.grid3D:this.grid;for(let te=0;te<m.length;te++){const ue=m[te],de=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ue.length;_e++){const Se=ue[_e];de[0]=Math.min(de[0],Se.x),de[1]=Math.min(de[1],Se.y),de[2]=Math.max(de[2],Se.x),de[3]=Math.max(de[3],Se.y)}de[0]<co&&de[1]<co&&de[2]>=0&&de[3]>=0&&q.insert(j,de[0],de[1],de[2],de[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ch.VectorTile(new QA(this.rawTileData)).layers,this.sourceLayerCoder=new qF(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,m,E,I){this.loadVTLayers();const k=c.params||{},D=co/c.tileSize/c.scale,j=zi(k.filter),q=c.queryGeometry,te=c.queryPadding*D,ue=HF(q),de=this.grid.query(ue.minX-te,ue.minY-te,ue.maxX+te,ue.maxY+te),_e=HF(c.cameraQueryGeometry),Se=this.grid3D.query(_e.minX-te,_e.minY-te,_e.maxX+te,_e.maxY+te,(Ue,We,st,Je)=>function(lt,ft,Et,Yt,mr){for(const Ut of lt)if(ft<=Ut.x&&Et<=Ut.y&&Yt>=Ut.x&&mr>=Ut.y)return!0;const Xt=[new _(ft,Et),new _(ft,mr),new _(Yt,mr),new _(Yt,Et)];if(lt.length>2){for(const Ut of Xt)if(cm(lt,Ut))return!0}for(let Ut=0;Ut<lt.length-1;Ut++)if(WQ(lt[Ut],lt[Ut+1],Xt))return!0;return!1}(c.cameraQueryGeometry,Ue-te,We-te,st+te,Je+te));for(const Ue of Se)de.push(Ue);de.sort(mte);const Ce={};let Fe;for(let Ue=0;Ue<de.length;Ue++){const We=de[Ue];if(We===Fe)continue;Fe=We;const st=this.featureIndexArray.get(We);let Je=null;this.loadMatchingFeature(Ce,st.bucketIndex,st.sourceLayerIndex,st.featureIndex,j,k.layers,k.availableImages,m,E,I,(lt,ft,Et)=>(Je||(Je=fc(lt)),ft.queryIntersectsFeature(q,lt,Et,Je,this.z,c.transform,D,c.pixelPosMatrix)))}return Ce}loadMatchingFeature(c,m,E,I,k,D,j,q,te,ue,de){const _e=this.bucketLayerIDs[m];if(D&&!function(Ue,We){for(let st=0;st<Ue.length;st++)if(We.indexOf(Ue[st])>=0)return!0;return!1}(D,_e))return;const Se=this.sourceLayerCoder.decode(E),Ce=this.vtLayers[Se].feature(I);if(k.needGeometry){const Ue=Wc(Ce,!0);if(!k.filter(new fi(this.tileID.overscaledZ),Ue,this.tileID.canonical))return}else if(!k.filter(new fi(this.tileID.overscaledZ),Ce))return;const Fe=this.getId(Ce,Se);for(let Ue=0;Ue<_e.length;Ue++){const We=_e[Ue];if(D&&D.indexOf(We)<0)continue;const st=q[We];if(!st)continue;let Je={};Fe&&ue&&(Je=ue.getState(st.sourceLayer||"_geojsonTileLayer",Fe));const lt=x({},te[We]);lt.paint=YF(lt.paint,st.paint,Ce,Je,j),lt.layout=YF(lt.layout,st.layout,Ce,Je,j);const ft=!de||de(Ce,st,Je);if(!ft)continue;const Et=new WF(Ce,this.z,this.x,this.y,Fe);Et.layer=lt;let Yt=c[We];Yt===void 0&&(Yt=c[We]=[]),Yt.push({featureIndex:I,feature:Et,intersectionZ:ft})}}lookupSymbolFeatures(c,m,E,I,k,D,j,q){const te={};this.loadVTLayers();const ue=zi(k);for(const de of c)this.loadMatchingFeature(te,E,I,de,ue,D,j,q,m);return te}hasLayer(c){for(const m of this.bucketLayerIDs)for(const E of m)if(c===E)return!0;return!1}getId(c,m){let E=c.id;return this.promoteId&&(E=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[m]],typeof E=="boolean"&&(E=Number(E))),E}}function YF(p,c,m,E,I){return B(p,(k,D)=>{const j=c instanceof hl?c.get(D):null;return j&&j.evaluate?j.evaluate(m,E,I):j})}function HF(p){let c=1/0,m=1/0,E=-1/0,I=-1/0;for(const k of p)c=Math.min(c,k.x),m=Math.min(m,k.y),E=Math.max(E,k.x),I=Math.max(I,k.y);return{minX:c,minY:m,maxX:E,maxY:I}}function mte(p,c){return c-p}function ZF(p,c,m,E,I){const k=[];for(let D=0;D<p.length;D++){const j=p[D];let q;for(let te=0;te<j.length-1;te++){let ue=j[te],de=j[te+1];ue.x<c&&de.x<c||(ue.x<c?ue=new _(c,ue.y+(c-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round():de.x<c&&(de=new _(c,ue.y+(c-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round()),ue.y<m&&de.y<m||(ue.y<m?ue=new _(ue.x+(m-ue.y)/(de.y-ue.y)*(de.x-ue.x),m)._round():de.y<m&&(de=new _(ue.x+(m-ue.y)/(de.y-ue.y)*(de.x-ue.x),m)._round()),ue.x>=E&&de.x>=E||(ue.x>=E?ue=new _(E,ue.y+(E-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round():de.x>=E&&(de=new _(E,ue.y+(E-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round()),ue.y>=I&&de.y>=I||(ue.y>=I?ue=new _(ue.x+(I-ue.y)/(de.y-ue.y)*(de.x-ue.x),I)._round():de.y>=I&&(de=new _(ue.x+(I-ue.y)/(de.y-ue.y)*(de.x-ue.x),I)._round()),q&&ue.equals(q[q.length-1])||(q=[ue],k.push(q)),q.push(de)))))}}return k}Jt("FeatureIndex",XF,{omit:["rawTileData","sourceLayerCoder"]});class Mh extends _{constructor(c,m,E,I){super(c,m),this.angle=E,I!==void 0&&(this.segment=I)}clone(){return new Mh(this.x,this.y,this.angle,this.segment)}}function KF(p,c,m,E,I){if(c.segment===void 0||m===0)return!0;let k=c,D=c.segment+1,j=0;for(;j>-m/2;){if(D--,D<0)return!1;j-=p[D].dist(k),k=p[D]}j+=p[D].dist(p[D+1]),D++;const q=[];let te=0;for(;j<m/2;){const ue=p[D],de=p[D+1];if(!de)return!1;let _e=p[D-1].angleTo(ue)-ue.angleTo(de);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),q.push({distance:j,angleDelta:_e}),te+=_e;j-q[0].distance>E;)te-=q.shift().angleDelta;if(te>I)return!1;D++,j+=ue.dist(de)}return!0}function JF(p){let c=0;for(let m=0;m<p.length-1;m++)c+=p[m].dist(p[m+1]);return c}function QF(p,c,m){return p?.6*c*m:0}function e4(p,c){return Math.max(p?p.right-p.left:0,c?c.right-c.left:0)}function gte(p,c,m,E,I,k){const D=QF(m,I,k),j=e4(m,E)*k;let q=0;const te=JF(p)/2;for(let ue=0;ue<p.length-1;ue++){const de=p[ue],_e=p[ue+1],Se=de.dist(_e);if(q+Se>te){const Ce=(te-q)/Se,Fe=qi.number(de.x,_e.x,Ce),Ue=qi.number(de.y,_e.y,Ce),We=new Mh(Fe,Ue,_e.angleTo(de),ue);return We._round(),!D||KF(p,We,j,D,c)?We:void 0}q+=Se}}function vte(p,c,m,E,I,k,D,j,q){const te=QF(E,k,D),ue=e4(E,I),de=ue*D,_e=p[0].x===0||p[0].x===q||p[0].y===0||p[0].y===q;return c-de<c/4&&(c=de+c/4),t4(p,_e?c/2*j%c:(ue/2+2*k)*D*j%c,c,te,m,de,_e,!1,q)}function t4(p,c,m,E,I,k,D,j,q){const te=k/2,ue=JF(p);let de=0,_e=c-m,Se=[];for(let Ce=0;Ce<p.length-1;Ce++){const Fe=p[Ce],Ue=p[Ce+1],We=Fe.dist(Ue),st=Ue.angleTo(Fe);for(;_e+m<de+We;){_e+=m;const Je=(_e-de)/We,lt=qi.number(Fe.x,Ue.x,Je),ft=qi.number(Fe.y,Ue.y,Je);if(lt>=0&&lt<q&&ft>=0&&ft<q&&_e-te>=0&&_e+te<=ue){const Et=new Mh(lt,ft,st,Ce);Et._round(),E&&!KF(p,Et,k,E,I)||Se.push(Et)}}de+=We}return j||Se.length||D||(Se=t4(p,de/2,m,E,I,k,D,!0,q)),Se}Jt("Anchor",Mh);const ym=du;function r4(p,c,m,E){const I=[],k=p.image,D=k.pixelRatio,j=k.paddedRect.w-2*ym,q=k.paddedRect.h-2*ym,te=p.right-p.left,ue=p.bottom-p.top,de=k.stretchX||[[0,j]],_e=k.stretchY||[[0,q]],Se=(Ft,tr)=>Ft+tr[1]-tr[0],Ce=de.reduce(Se,0),Fe=_e.reduce(Se,0),Ue=j-Ce,We=q-Fe;let st=0,Je=Ce,lt=0,ft=Fe,Et=0,Yt=Ue,mr=0,Xt=We;if(k.content&&E){const Ft=k.content;st=nb(de,0,Ft[0]),lt=nb(_e,0,Ft[1]),Je=nb(de,Ft[0],Ft[2]),ft=nb(_e,Ft[1],Ft[3]),Et=Ft[0]-st,mr=Ft[1]-lt,Yt=Ft[2]-Ft[0]-Je,Xt=Ft[3]-Ft[1]-ft}const Ut=(Ft,tr,Bt,Tt)=>{const Pr=ib(Ft.stretch-st,Je,te,p.left),vr=ob(Ft.fixed-Et,Yt,Ft.stretch,Ce),sn=ib(tr.stretch-lt,ft,ue,p.top),Di=ob(tr.fixed-mr,Xt,tr.stretch,Fe),Vi=ib(Bt.stretch-st,Je,te,p.left),ua=ob(Bt.fixed-Et,Yt,Bt.stretch,Ce),Bu=ib(Tt.stretch-lt,ft,ue,p.top),js=ob(Tt.fixed-mr,Xt,Tt.stretch,Fe),Wo=new _(Pr,sn),va=new _(Vi,sn),Qa=new _(Vi,Bu),pu=new _(Pr,Bu),Us=new _(vr/D,Di/D),Xo=new _(ua/D,js/D),la=c*Math.PI/180;if(la){const mu=Math.sin(la),gu=Math.cos(la),So=[gu,-mu,mu,gu];Wo._matMult(So),va._matMult(So),pu._matMult(So),Qa._matMult(So)}const gs=Ft.stretch+Ft.fixed,Vs=tr.stretch+tr.fixed;return{tl:Wo,tr:va,bl:pu,br:Qa,tex:{x:k.paddedRect.x+ym+gs,y:k.paddedRect.y+ym+Vs,w:Bt.stretch+Bt.fixed-gs,h:Tt.stretch+Tt.fixed-Vs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Us,pixelOffsetBR:Xo,minFontScaleX:Yt/D/te,minFontScaleY:Xt/D/ue,isSDF:m}};if(E&&(k.stretchX||k.stretchY)){const Ft=n4(de,Ue,Ce),tr=n4(_e,We,Fe);for(let Bt=0;Bt<Ft.length-1;Bt++){const Tt=Ft[Bt],Pr=Ft[Bt+1];for(let vr=0;vr<tr.length-1;vr++)I.push(Ut(Tt,tr[vr],Pr,tr[vr+1]))}}else I.push(Ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:j+1},{fixed:0,stretch:q+1}));return I}function nb(p,c,m){let E=0;for(const I of p)E+=Math.max(c,Math.min(m,I[1]))-Math.max(c,Math.min(m,I[0]));return E}function n4(p,c,m){const E=[{fixed:-ym,stretch:0}];for(const[I,k]of p){const D=E[E.length-1];E.push({fixed:I-D.stretch,stretch:D.stretch}),E.push({fixed:I-D.stretch,stretch:D.stretch+(k-I)})}return E.push({fixed:c+ym,stretch:m}),E}function ib(p,c,m,E){return p/c*m+E}function ob(p,c,m,E){return p-c*m/E}class ab{constructor(c,m,E,I,k,D,j,q,te,ue){if(this.boxStartIndex=c.length,te){let de=D.top,_e=D.bottom;const Se=D.collisionPadding;Se&&(de-=Se[1],_e+=Se[3]);let Ce=_e-de;Ce>0&&(Ce=Math.max(10,Ce),this.circleDiameter=Ce)}else{let de=D.top*j-q[0],_e=D.bottom*j+q[2],Se=D.left*j-q[3],Ce=D.right*j+q[1];const Fe=D.collisionPadding;if(Fe&&(Se-=Fe[0]*j,de-=Fe[1]*j,Ce+=Fe[2]*j,_e+=Fe[3]*j),ue){const Ue=new _(Se,de),We=new _(Ce,de),st=new _(Se,_e),Je=new _(Ce,_e),lt=ue*Math.PI/180;Ue._rotate(lt),We._rotate(lt),st._rotate(lt),Je._rotate(lt),Se=Math.min(Ue.x,We.x,st.x,Je.x),Ce=Math.max(Ue.x,We.x,st.x,Je.x),de=Math.min(Ue.y,We.y,st.y,Je.y),_e=Math.max(Ue.y,We.y,st.y,Je.y)}c.emplaceBack(m.x,m.y,Se,de,Ce,_e,E,I,k)}this.boxEndIndex=c.length}}class yte{constructor(c=[],m=_te){if(this.data=c,this.length=this.data.length,this.compare=m,this.length>0)for(let E=(this.length>>1)-1;E>=0;E--)this._down(E)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const c=this.data[0],m=this.data.pop();return this.length--,this.length>0&&(this.data[0]=m,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:m,compare:E}=this,I=m[c];for(;c>0;){const k=c-1>>1,D=m[k];if(E(I,D)>=0)break;m[c]=D,c=k}m[c]=I}_down(c){const{data:m,compare:E}=this,I=this.length>>1,k=m[c];for(;c<I;){let D=1+(c<<1),j=m[D];const q=D+1;if(q<this.length&&E(m[q],j)<0&&(D=q,j=m[q]),E(j,k)>=0)break;m[c]=j,c=D}m[c]=k}}function _te(p,c){return p<c?-1:p>c?1:0}function bte(p,c=1,m=!1){let E=1/0,I=1/0,k=-1/0,D=-1/0;const j=p[0];for(let Se=0;Se<j.length;Se++){const Ce=j[Se];(!Se||Ce.x<E)&&(E=Ce.x),(!Se||Ce.y<I)&&(I=Ce.y),(!Se||Ce.x>k)&&(k=Ce.x),(!Se||Ce.y>D)&&(D=Ce.y)}const q=Math.min(k-E,D-I);let te=q/2;const ue=new yte([],xte);if(q===0)return new _(E,I);for(let Se=E;Se<k;Se+=q)for(let Ce=I;Ce<D;Ce+=q)ue.push(new _m(Se+te,Ce+te,te,p));let de=function(Se){let Ce=0,Fe=0,Ue=0;const We=Se[0];for(let st=0,Je=We.length,lt=Je-1;st<Je;lt=st++){const ft=We[st],Et=We[lt],Yt=ft.x*Et.y-Et.x*ft.y;Fe+=(ft.x+Et.x)*Yt,Ue+=(ft.y+Et.y)*Yt,Ce+=3*Yt}return new _m(Fe/Ce,Ue/Ce,0,Se)}(p),_e=ue.length;for(;ue.length;){const Se=ue.pop();(Se.d>de.d||!de.d)&&(de=Se),Se.max-de.d<=c||(te=Se.h/2,ue.push(new _m(Se.p.x-te,Se.p.y-te,te,p)),ue.push(new _m(Se.p.x+te,Se.p.y-te,te,p)),ue.push(new _m(Se.p.x-te,Se.p.y+te,te,p)),ue.push(new _m(Se.p.x+te,Se.p.y+te,te,p)),_e+=4)}return de.p}function xte(p,c){return c.max-p.max}function _m(p,c,m,E){this.p=new _(p,c),this.h=m,this.d=function(I,k){let D=!1,j=1/0;for(let q=0;q<k.length;q++){const te=k[q];for(let ue=0,de=te.length,_e=de-1;ue<de;_e=ue++){const Se=te[ue],Ce=te[_e];Se.y>I.y!=Ce.y>I.y&&I.x<(Ce.x-Se.x)*(I.y-Se.y)/(Ce.y-Se.y)+Se.x&&(D=!D),j=Math.min(j,B3(I,Se,Ce))}}return(D?1:-1)*Math.sqrt(j)}(this.p,E),this.max=this.d+this.h*Math.SQRT2}var Ja;a.TextAnchorEnum=void 0,(Ja=a.TextAnchorEnum||(a.TextAnchorEnum={}))[Ja.center=1]="center",Ja[Ja.left=2]="left",Ja[Ja.right=3]="right",Ja[Ja.top=4]="top",Ja[Ja.bottom=5]="bottom",Ja[Ja["top-left"]=6]="top-left",Ja[Ja["top-right"]=7]="top-right",Ja[Ja["bottom-left"]=8]="bottom-left",Ja[Ja["bottom-right"]=9]="bottom-right";const Lh=7,hC=Number.POSITIVE_INFINITY;function i4(p,c){return c[1]!==hC?function(m,E,I){let k=0,D=0;switch(E=Math.abs(E),I=Math.abs(I),m){case"top-right":case"top-left":case"top":D=I-Lh;break;case"bottom-right":case"bottom-left":case"bottom":D=-I+Lh}switch(m){case"top-right":case"bottom-right":case"right":k=-E;break;case"top-left":case"bottom-left":case"left":k=E}return[k,D]}(p,c[0],c[1]):function(m,E){let I=0,k=0;E<0&&(E=0);const D=E/Math.SQRT2;switch(m){case"top-right":case"top-left":k=D-Lh;break;case"bottom-right":case"bottom-left":k=-D+Lh;break;case"bottom":k=-E+Lh;break;case"top":k=E-Lh}switch(m){case"top-right":case"bottom-right":I=-D;break;case"top-left":case"bottom-left":I=D;break;case"left":I=E;break;case"right":I=-E}return[I,k]}(p,c[0])}function o4(p,c,m){var E;const I=p.layout,k=(E=I.get("text-variable-anchor-offset"))===null||E===void 0?void 0:E.evaluate(c,{},m);if(k){const j=k.values,q=[];for(let te=0;te<j.length;te+=2){const ue=q[te]=j[te],de=j[te+1].map(_e=>_e*sa);ue.startsWith("top")?de[1]-=Lh:ue.startsWith("bottom")&&(de[1]+=Lh),q[te+1]=de}return new Si(q)}const D=I.get("text-variable-anchor");if(D){let j;j=p._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[I.get("text-radial-offset").evaluate(c,{},m)*sa,hC]:I.get("text-offset").evaluate(c,{},m).map(te=>te*sa);const q=[];for(const te of D)q.push(te,i4(te,j));return new Si(q)}return null}function dC(p){switch(p){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wte(p,c,m,E,I,k,D,j,q,te,ue){let de=k.textMaxSize.evaluate(c,{});de===void 0&&(de=D);const _e=p.layers[0].layout,Se=_e.get("icon-offset").evaluate(c,{},ue),Ce=s4(m.horizontal),Fe=D/24,Ue=p.tilePixelRatio*Fe,We=p.tilePixelRatio*de/24,st=p.tilePixelRatio*j,Je=p.tilePixelRatio*_e.get("symbol-spacing"),lt=_e.get("text-padding")*p.tilePixelRatio,ft=function(Tt,Pr,vr,sn=1){const Di=Tt.get("icon-padding").evaluate(Pr,{},vr),Vi=Di&&Di.values;return[Vi[0]*sn,Vi[1]*sn,Vi[2]*sn,Vi[3]*sn]}(_e,c,ue,p.tilePixelRatio),Et=_e.get("text-max-angle")/180*Math.PI,Yt=_e.get("text-rotation-alignment")!=="viewport"&&_e.get("symbol-placement")!=="point",mr=_e.get("icon-rotation-alignment")==="map"&&_e.get("symbol-placement")!=="point",Xt=_e.get("symbol-placement"),Ut=Je/2,Ft=_e.get("icon-text-fit");let tr;E&&Ft!=="none"&&(p.allowVerticalPlacement&&m.vertical&&(tr=TF(E,m.vertical,Ft,_e.get("icon-text-fit-padding"),Se,Fe)),Ce&&(E=TF(E,Ce,Ft,_e.get("icon-text-fit-padding"),Se,Fe)));const Bt=(Tt,Pr)=>{Pr.x<0||Pr.x>=co||Pr.y<0||Pr.y>=co||function(vr,sn,Di,Vi,ua,Bu,js,Wo,va,Qa,pu,Us,Xo,la,gs,Vs,mu,gu,So,es,pn,ju,ts,Gs,ql){const hc=vr.addToLineVertexArray(sn,Di);let dc,Nf,Wl,vl,vu=0,Ff=0,Yv=0,f4=0,xC=-1,wC=-1;const $f={};let h4=dl("");if(vr.allowVerticalPlacement&&Vi.vertical){const vs=Wo.layout.get("text-rotate").evaluate(pn,{},Gs)+90;Wl=new ab(va,sn,Qa,pu,Us,Vi.vertical,Xo,la,gs,vs),js&&(vl=new ab(va,sn,Qa,pu,Us,js,mu,gu,gs,vs))}if(ua){const vs=Wo.layout.get("icon-rotate").evaluate(pn,{}),yl=Wo.layout.get("icon-text-fit")!=="none",Fd=r4(ua,vs,ts,yl),mc=js?r4(js,vs,ts,yl):void 0;Nf=new ab(va,sn,Qa,pu,Us,ua,mu,gu,!1,vs),vu=4*Fd.length;const $d=vr.iconSizeData;let Yc=null;$d.kind==="source"?(Yc=[Xc*Wo.layout.get("icon-size").evaluate(pn,{})],Yc[0]>Oh&&W(`${vr.layerIds[0]}: Value for "icon-size" is >= ${Gv}. Reduce your "icon-size".`)):$d.kind==="composite"&&(Yc=[Xc*ju.compositeIconSizes[0].evaluate(pn,{},Gs),Xc*ju.compositeIconSizes[1].evaluate(pn,{},Gs)],(Yc[0]>Oh||Yc[1]>Oh)&&W(`${vr.layerIds[0]}: Value for "icon-size" is >= ${Gv}. Reduce your "icon-size".`)),vr.addSymbols(vr.icon,Fd,Yc,es,So,pn,a.WritingMode.none,sn,hc.lineStartIndex,hc.lineLength,-1,Gs),xC=vr.icon.placedSymbolArray.length-1,mc&&(Ff=4*mc.length,vr.addSymbols(vr.icon,mc,Yc,es,So,pn,a.WritingMode.vertical,sn,hc.lineStartIndex,hc.lineLength,-1,Gs),wC=vr.icon.placedSymbolArray.length-1)}const d4=Object.keys(Vi.horizontal);for(const vs of d4){const yl=Vi.horizontal[vs];if(!dc){h4=dl(yl.text);const mc=Wo.layout.get("text-rotate").evaluate(pn,{},Gs);dc=new ab(va,sn,Qa,pu,Us,yl,Xo,la,gs,mc)}const Fd=yl.positionedLines.length===1;if(Yv+=a4(vr,sn,yl,Bu,Wo,gs,pn,Vs,hc,Vi.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,Fd?d4:[vs],$f,xC,ju,Gs),Fd)break}Vi.vertical&&(f4+=a4(vr,sn,Vi.vertical,Bu,Wo,gs,pn,Vs,hc,a.WritingMode.vertical,["vertical"],$f,wC,ju,Gs));const Pte=dc?dc.boxStartIndex:vr.collisionBoxArray.length,Ate=dc?dc.boxEndIndex:vr.collisionBoxArray.length,Cte=Wl?Wl.boxStartIndex:vr.collisionBoxArray.length,Ite=Wl?Wl.boxEndIndex:vr.collisionBoxArray.length,Ote=Nf?Nf.boxStartIndex:vr.collisionBoxArray.length,Tte=Nf?Nf.boxEndIndex:vr.collisionBoxArray.length,Mte=vl?vl.boxStartIndex:vr.collisionBoxArray.length,Lte=vl?vl.boxEndIndex:vr.collisionBoxArray.length;let pc=-1;const ub=(vs,yl)=>vs&&vs.circleDiameter?Math.max(vs.circleDiameter,yl):yl;pc=ub(dc,pc),pc=ub(Wl,pc),pc=ub(Nf,pc),pc=ub(vl,pc);const p4=pc>-1?1:0;p4&&(pc*=ql/sa),vr.glyphOffsetArray.length>=vm.MAX_GLYPHS&&W("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pn.sortKey!==void 0&&vr.addToSortKeyRanges(vr.symbolInstances.length,pn.sortKey);const Rte=o4(Wo,pn,Gs),[kte,Dte]=function(vs,yl){const Fd=vs.length,mc=yl==null?void 0:yl.values;if((mc==null?void 0:mc.length)>0)for(let $d=0;$d<mc.length;$d+=2){const Yc=mc[$d+1];vs.emplaceBack(a.TextAnchorEnum[mc[$d]],Yc[0],Yc[1])}return[Fd,vs.length]}(vr.textAnchorOffsets,Rte);vr.symbolInstances.emplaceBack(sn.x,sn.y,$f.right>=0?$f.right:-1,$f.center>=0?$f.center:-1,$f.left>=0?$f.left:-1,$f.vertical||-1,xC,wC,h4,Pte,Ate,Cte,Ite,Ote,Tte,Mte,Lte,Qa,Yv,f4,vu,Ff,p4,0,Xo,pc,kte,Dte)}(p,Pr,Tt,m,E,I,tr,p.layers[0],p.collisionBoxArray,c.index,c.sourceLayerIndex,p.index,Ue,[lt,lt,lt,lt],Yt,q,st,ft,mr,Se,c,k,te,ue,D)};if(Xt==="line")for(const Tt of ZF(c.geometry,0,0,co,co)){const Pr=vte(Tt,Je,Et,m.vertical||Ce,E,24,We,p.overscaling,co);for(const vr of Pr)Ce&&Ete(p,Ce.text,Ut,vr)||Bt(Tt,vr)}else if(Xt==="line-center"){for(const Tt of c.geometry)if(Tt.length>1){const Pr=gte(Tt,Et,m.vertical||Ce,E,24,We);Pr&&Bt(Tt,Pr)}}else if(c.type==="Polygon")for(const Tt of qA(c.geometry,0)){const Pr=bte(Tt,16);Bt(Tt[0],new Mh(Pr.x,Pr.y,0))}else if(c.type==="LineString")for(const Tt of c.geometry)Bt(Tt,new Mh(Tt[0].x,Tt[0].y,0));else if(c.type==="Point")for(const Tt of c.geometry)for(const Pr of Tt)Bt([Pr],new Mh(Pr.x,Pr.y,0))}function a4(p,c,m,E,I,k,D,j,q,te,ue,de,_e,Se,Ce){const Fe=function(st,Je,lt,ft,Et,Yt,mr,Xt){const Ut=ft.layout.get("text-rotate").evaluate(Yt,{})*Math.PI/180,Ft=[];for(const tr of Je.positionedLines)for(const Bt of tr.positionedGlyphs){if(!Bt.rect)continue;const Tt=Bt.rect||{};let Pr=EF+1,vr=!0,sn=1,Di=0;const Vi=(Et||Xt)&&Bt.vertical,ua=Bt.metrics.advance*Bt.scale/2;if(Xt&&Je.verticalizable&&(Di=tr.lineOffset/2-(Bt.imageName?-(sa-Bt.metrics.width*Bt.scale)/2:(Bt.scale-1)*sa)),Bt.imageName){const So=mr[Bt.imageName];vr=So.sdf,sn=So.pixelRatio,Pr=du/sn}const Bu=Et?[Bt.x+ua,Bt.y]:[0,0];let js=Et?[0,0]:[Bt.x+ua+lt[0],Bt.y+lt[1]-Di],Wo=[0,0];Vi&&(Wo=js,js=[0,0]);const va=(Bt.metrics.left-Pr)*Bt.scale-ua+js[0],Qa=(-Bt.metrics.top-Pr)*Bt.scale+js[1],pu=va+Tt.w*Bt.scale/sn,Us=Qa+Tt.h*Bt.scale/sn,Xo=new _(va,Qa),la=new _(pu,Qa),gs=new _(va,Us),Vs=new _(pu,Us);if(Vi){const So=new _(-ua,ua-Uv),es=-Math.PI/2,pn=sa/2-ua,ju=new _(5-Uv-pn,-(Bt.imageName?pn:0)),ts=new _(...Wo);Xo._rotateAround(es,So)._add(ju)._add(ts),la._rotateAround(es,So)._add(ju)._add(ts),gs._rotateAround(es,So)._add(ju)._add(ts),Vs._rotateAround(es,So)._add(ju)._add(ts)}if(Ut){const So=Math.sin(Ut),es=Math.cos(Ut),pn=[es,-So,So,es];Xo._matMult(pn),la._matMult(pn),gs._matMult(pn),Vs._matMult(pn)}const mu=new _(0,0),gu=new _(0,0);Ft.push({tl:Xo,tr:la,bl:gs,br:Vs,tex:Tt,writingMode:Je.writingMode,glyphOffset:Bu,sectionIndex:Bt.sectionIndex,isSDF:vr,pixelOffsetTL:mu,pixelOffsetBR:gu,minFontScaleX:0,minFontScaleY:0})}return Ft}(0,m,j,I,k,D,E,p.allowVerticalPlacement),Ue=p.textSizeData;let We=null;Ue.kind==="source"?(We=[Xc*I.layout.get("text-size").evaluate(D,{})],We[0]>Oh&&W(`${p.layerIds[0]}: Value for "text-size" is >= ${Gv}. Reduce your "text-size".`)):Ue.kind==="composite"&&(We=[Xc*Se.compositeTextSizes[0].evaluate(D,{},Ce),Xc*Se.compositeTextSizes[1].evaluate(D,{},Ce)],(We[0]>Oh||We[1]>Oh)&&W(`${p.layerIds[0]}: Value for "text-size" is >= ${Gv}. Reduce your "text-size".`)),p.addSymbols(p.text,Fe,We,j,k,D,te,c,q.lineStartIndex,q.lineLength,_e,Ce);for(const st of ue)de[st]=p.text.placedSymbolArray.length-1;return 4*Fe.length}function s4(p){for(const c in p)return p[c];return null}function Ete(p,c,m,E){const I=p.compareText;if(c in I){const k=I[c];for(let D=k.length-1;D>=0;D--)if(E.dist(k[D])<m)return!0}else I[c]=[];return I[c].push(E),!1}const u4=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pC{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[m,E]=new Uint8Array(c,0,2);if(m!==219)throw new Error("Data does not appear to be in a KDBush format.");const I=E>>4;if(I!==1)throw new Error(`Got v${I} data when expected v1.`);const k=u4[15&E];if(!k)throw new Error("Unrecognized array type.");const[D]=new Uint16Array(c,2,1),[j]=new Uint32Array(c,4,1);return new pC(j,D,k,c)}constructor(c,m=64,E=Float64Array,I){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+m,2),65535),this.ArrayType=E,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const k=u4.indexOf(this.ArrayType),D=2*c*this.ArrayType.BYTES_PER_ELEMENT,j=c*this.IndexArrayType.BYTES_PER_ELEMENT,q=(8-j%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${E}.`);I&&I instanceof ArrayBuffer?(this.data=I,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+j+q,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+D+j+q),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+j+q,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=m,new Uint32Array(this.data,4,1)[0]=c)}add(c,m){const E=this._pos>>1;return this.ids[E]=E,this.coords[this._pos++]=c,this.coords[this._pos++]=m,E}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return mC(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,m,E,I){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:D,nodeSize:j}=this,q=[0,k.length-1,0],te=[];for(;q.length;){const ue=q.pop()||0,de=q.pop()||0,_e=q.pop()||0;if(de-_e<=j){for(let Ue=_e;Ue<=de;Ue++){const We=D[2*Ue],st=D[2*Ue+1];We>=c&&We<=E&&st>=m&&st<=I&&te.push(k[Ue])}continue}const Se=_e+de>>1,Ce=D[2*Se],Fe=D[2*Se+1];Ce>=c&&Ce<=E&&Fe>=m&&Fe<=I&&te.push(k[Se]),(ue===0?c<=Ce:m<=Fe)&&(q.push(_e),q.push(Se-1),q.push(1-ue)),(ue===0?E>=Ce:I>=Fe)&&(q.push(Se+1),q.push(de),q.push(1-ue))}return te}within(c,m,E){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:I,coords:k,nodeSize:D}=this,j=[0,I.length-1,0],q=[],te=E*E;for(;j.length;){const ue=j.pop()||0,de=j.pop()||0,_e=j.pop()||0;if(de-_e<=D){for(let Ue=_e;Ue<=de;Ue++)c4(k[2*Ue],k[2*Ue+1],c,m)<=te&&q.push(I[Ue]);continue}const Se=_e+de>>1,Ce=k[2*Se],Fe=k[2*Se+1];c4(Ce,Fe,c,m)<=te&&q.push(I[Se]),(ue===0?c-E<=Ce:m-E<=Fe)&&(j.push(_e),j.push(Se-1),j.push(1-ue)),(ue===0?c+E>=Ce:m+E>=Fe)&&(j.push(Se+1),j.push(de),j.push(1-ue))}return q}}function mC(p,c,m,E,I,k){if(I-E<=m)return;const D=E+I>>1;l4(p,c,D,E,I,k),mC(p,c,m,E,D-1,1-k),mC(p,c,m,D+1,I,1-k)}function l4(p,c,m,E,I,k){for(;I>E;){if(I-E>600){const te=I-E+1,ue=m-E+1,de=Math.log(te),_e=.5*Math.exp(2*de/3),Se=.5*Math.sqrt(de*_e*(te-_e)/te)*(ue-te/2<0?-1:1);l4(p,c,m,Math.max(E,Math.floor(m-ue*_e/te+Se)),Math.min(I,Math.floor(m+(te-ue)*_e/te+Se)),k)}const D=c[2*m+k];let j=E,q=I;for(Wv(p,c,E,m),c[2*I+k]>D&&Wv(p,c,E,I);j<q;){for(Wv(p,c,j,q),j++,q--;c[2*j+k]<D;)j++;for(;c[2*q+k]>D;)q--}c[2*E+k]===D?Wv(p,c,E,q):(q++,Wv(p,c,q,I)),q<=m&&(E=q+1),m<=q&&(I=q-1)}}function Wv(p,c,m,E){gC(p,m,E),gC(c,2*m,2*E),gC(c,2*m+1,2*E+1)}function gC(p,c,m){const E=p[c];p[c]=p[m],p[m]=E}function c4(p,c,m,E){const I=p-m,k=c-E;return I*I+k*k}var vC;a.PerformanceMarkers=void 0,(vC=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",vC.load="load",vC.fullLoad="fullLoad";let sb=null,Xv=[];const yC=1e3/60,_C="loadTime",bC="fullLoadTime",Ste={mark(p){performance.mark(p)},frame(p){const c=p;sb!=null&&Xv.push(c-sb),sb=c},clearMetrics(){sb=null,Xv=[],performance.clearMeasures(_C),performance.clearMeasures(bC);for(const p in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[p])},getPerformanceMetrics(){performance.measure(_C,a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure(bC,a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const p=performance.getEntriesByName(_C)[0].duration,c=performance.getEntriesByName(bC)[0].duration,m=Xv.length,E=1/(Xv.reduce((k,D)=>k+D,0)/m/1e3),I=Xv.filter(k=>k>yC).reduce((k,D)=>k+(D-yC)/yC,0);return{loadTime:p,fullLoadTime:c,fps:E,percentDroppedFrames:I/(m+I)*100,totalFrames:m}}};a.AJAXError=he,a.ARRAY_TYPE=fm,a.Actor=class{constructor(p,c,m){this.receive=E=>{const I=E.data,k=I.id;if(k&&(!I.targetMapId||this.mapId===I.targetMapId))if(I.type==="<cancel>"){delete this.tasks[k];const D=this.cancelCallbacks[k];delete this.cancelCallbacks[k],D&&D()}else ge()||I.mustQueue?(this.tasks[k]=I,this.taskQueue.push(k),this.invoker.trigger()):this.processTask(k,I)},this.process=()=>{if(!this.taskQueue.length)return;const E=this.taskQueue.shift(),I=this.tasks[E];delete this.tasks[E],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(E,I)},this.target=p,this.parent=c,this.mapId=m,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new pte(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ge()?p:window}send(p,c,m,E,I=!1){const k=Math.round(1e18*Math.random()).toString(36).substring(0,10);m&&(this.callbacks[k]=m);const D=oe(this.globalScope)?void 0:[];return this.target.postMessage({id:k,type:p,hasCallback:!!m,targetMapId:E,mustQueue:I,sourceMapId:this.mapId,data:ps(c,D)},D),{cancel:()=>{m&&delete this.callbacks[k],this.target.postMessage({id:k,type:"<cancel>",targetMapId:E,sourceMapId:this.mapId})}}}processTask(p,c){if(c.type==="<response>"){const m=this.callbacks[p];delete this.callbacks[p],m&&(c.error?m(Ki(c.error)):m(null,Ki(c.data)))}else{let m=!1;const E=oe(this.globalScope)?void 0:[],I=c.hasCallback?(j,q)=>{m=!0,delete this.cancelCallbacks[p],this.target.postMessage({id:p,type:"<response>",sourceMapId:this.mapId,error:j?ps(j):null,data:ps(q,E)},E)}:j=>{m=!0};let k=null;const D=Ki(c.data);if(this.parent[c.type])k=this.parent[c.type](c.sourceMapId,D,I);else if(this.parent.getWorkerSource){const j=c.type.split(".");k=this.parent.getWorkerSource(c.sourceMapId,j[0],D.source)[j[1]](D,I)}else I(new Error(`Could not find function ${c.type}`));!m&&k&&k.cancel&&(this.cancelCallbacks[p]=k.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=kv,a.CanonicalTileID=fC,a.CollisionBoxArray=V,a.CollisionCircleLayoutArray=class extends O{},a.Color=Wt,a.DEMData=GF,a.DataConstantProperty=gr,a.DictionaryCoder=qF,a.EXTENT=co,a.ErrorEvent=Ot,a.EvaluationParameters=fi,a.Event=pt,a.Evented=vt,a.FeatureIndex=XF,a.FillBucket=YA,a.FillExtrusionBucket=ZA,a.GeoJSONFeature=WF,a.ImageAtlas=PF,a.ImagePosition=tC,a.KDBush=pC,a.LineBucket=KA,a.LineStripIndexArray=class extends C{},a.LngLat=Th,a.MercatorCoordinate=rb,a.ONE_EM=sa,a.OverscaledTileID=gl,a.PerformanceUtils=Ste,a.Point=_,a.Pos3dArray=class extends $s{},a.PosArray=ct,a.Properties=ga,a.Protobuf=QA,a.QuadTriangleArray=class extends J{},a.RGBAImage=ml,a.RasterBoundsArray=class extends Mo{},a.RequestPerformance=class{constructor(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let p=performance.getEntriesByName(this._marks.measure);return p.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),p=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),p}},a.SegmentVector=Sr,a.SymbolBucket=vm,a.Transitionable=Tf,a.TriangleIndexArray=xr,a.Uniform1f=oa,a.Uniform1i=class extends Ro{constructor(p,c){super(p,c),this.current=0}set(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}},a.Uniform2f=class extends Ro{constructor(p,c){super(p,c),this.current=[0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))}},a.Uniform3f=class extends Ro{constructor(p,c){super(p,c),this.current=[0,0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))}},a.Uniform4f=Za,a.UniformColor=Ph,a.UniformMatrix4f=class extends Ro{constructor(p,c){super(p,c),this.current=aa}set(p){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let c=1;c<16;c++)if(p[c]!==this.current[c]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}},a.UnwrappedTileID=VF,a.ValidationError=qe,a.ZoomHistory=If,a.addDynamicAttributes=oC,a.arrayBufferToImage=function(p,c){const m=new Image;m.onload=()=>{c(null,m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=fe})},m.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const E=new Blob([new Uint8Array(p)],{type:"image/png"});m.src=p.byteLength?URL.createObjectURL(E):fe},a.arrayBufferToImageBitmap=function(p,c){const m=new Blob([new Uint8Array(p)],{type:"image/png"});createImageBitmap(m).then(E=>{c(null,E)}).catch(E=>{c(new Error(`Could not load image because of ${E.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.asyncAll=function(p,c,m){if(!p.length)return m(null,[]);let E=p.length;const I=new Array(p.length);let k=null;p.forEach((D,j)=>{c(D,(q,te)=>{q&&(k=q),I[j]=te,--E==0&&m(k,I)})})},a.bezier=R,a.browser=re,a.clamp=F,a.clipLine=ZF,a.clone=function(p){var c=new fm(16);return c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=p[6],c[7]=p[7],c[8]=p[8],c[9]=p[9],c[10]=p[10],c[11]=p[11],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15],c},a.clone$1=Z,a.collisionCircleLayout=Uee,a.config=ie,a.copy=function(p,c){return p[0]=c[0],p[1]=c[1],p[2]=c[2],p[3]=c[3],p[4]=c[4],p[5]=c[5],p[6]=c[6],p[7]=c[7],p[8]=c[8],p[9]=c[9],p[10]=c[10],p[11]=c[11],p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15],p},a.create=function(){var p=new fm(16);return fm!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0),p[0]=1,p[5]=1,p[10]=1,p[15]=1,p},a.createExpression=qr,a.createFilter=zi,a.createLayout=nr,a.createStyleLayer=function(p){if(p.type==="custom")return new dte(p);switch(p.type){case"background":return new cte(p);case"circle":return new HQ(p);case"fill":return new mee(p);case"fill-extrusion":return new Tee(p);case"heatmap":return new KQ(p);case"hillshade":return new QQ(p);case"line":return new $ee(p);case"raster":return new hte(p);case"symbol":return new tb(p)}},a.deepEqual=function p(c,m){if(Array.isArray(c)){if(!Array.isArray(m)||c.length!==m.length)return!1;for(let E=0;E<c.length;E++)if(!p(c[E],m[E]))return!1;return!0}if(typeof c=="object"&&c!==null&&m!==null){if(typeof m!="object"||Object.keys(c).length!==Object.keys(m).length)return!1;for(const E in c)if(!p(c[E],m[E]))return!1;return!0}return c===m},a.defaultEasing=$,a.derefLayers=function(p){p=p.slice();const c=Object.create(null);for(let m=0;m<p.length;m++)c[p[m].id]=p[m];for(let m=0;m<p.length;m++)"ref"in p[m]&&(p[m]=rr(p[m],c[p[m].ref]));return p},a.diffStyles=function(p,c){if(!p)return[{command:br.setStyle,args:[c]}];let m=[];try{if(!Gt(p.version,c.version))return[{command:br.setStyle,args:[c]}];Gt(p.center,c.center)||m.push({command:br.setCenter,args:[c.center]}),Gt(p.zoom,c.zoom)||m.push({command:br.setZoom,args:[c.zoom]}),Gt(p.bearing,c.bearing)||m.push({command:br.setBearing,args:[c.bearing]}),Gt(p.pitch,c.pitch)||m.push({command:br.setPitch,args:[c.pitch]}),Gt(p.sprite,c.sprite)||m.push({command:br.setSprite,args:[c.sprite]}),Gt(p.glyphs,c.glyphs)||m.push({command:br.setGlyphs,args:[c.glyphs]}),Gt(p.transition,c.transition)||m.push({command:br.setTransition,args:[c.transition]}),Gt(p.light,c.light)||m.push({command:br.setLight,args:[c.light]});const E={},I=[];(function(D,j,q,te){let ue;for(ue in j=j||{},D=D||{})Object.prototype.hasOwnProperty.call(D,ue)&&(Object.prototype.hasOwnProperty.call(j,ue)||ot(ue,q,te));for(ue in j)Object.prototype.hasOwnProperty.call(j,ue)&&(Object.prototype.hasOwnProperty.call(D,ue)?Gt(D[ue],j[ue])||(D[ue].type==="geojson"&&j[ue].type==="geojson"&&ve(D,j,ue)?q.push({command:br.setGeoJSONSourceData,args:[ue,j[ue].data]}):Oe(ue,j,q,te)):un(ue,j,q))})(p.sources,c.sources,I,E);const k=[];p.layers&&p.layers.forEach(D=>{E[D.source]?m.push({command:br.removeLayer,args:[D.id]}):k.push(D)}),m=m.concat(I),function(D,j,q){j=j||[];const te=(D=D||[]).map(je),ue=j.map(je),de=D.reduce(Ke,{}),_e=j.reduce(Ke,{}),Se=te.slice(),Ce=Object.create(null);let Fe,Ue,We,st,Je,lt,ft;for(Fe=0,Ue=0;Fe<te.length;Fe++)We=te[Fe],Object.prototype.hasOwnProperty.call(_e,We)?Ue++:(q.push({command:br.removeLayer,args:[We]}),Se.splice(Se.indexOf(We,Ue),1));for(Fe=0,Ue=0;Fe<ue.length;Fe++)We=ue[ue.length-1-Fe],Se[Se.length-1-Fe]!==We&&(Object.prototype.hasOwnProperty.call(de,We)?(q.push({command:br.removeLayer,args:[We]}),Se.splice(Se.lastIndexOf(We,Se.length-Ue),1)):Ue++,lt=Se[Se.length-Fe],q.push({command:br.addLayer,args:[_e[We],lt]}),Se.splice(Se.length-Fe,0,We),Ce[We]=!0);for(Fe=0;Fe<ue.length;Fe++)if(We=ue[Fe],st=de[We],Je=_e[We],!Ce[We]&&!Gt(st,Je))if(Gt(st.source,Je.source)&&Gt(st["source-layer"],Je["source-layer"])&&Gt(st.type,Je.type)){for(ft in xe(st.layout,Je.layout,q,We,null,br.setLayoutProperty),xe(st.paint,Je.paint,q,We,null,br.setPaintProperty),Gt(st.filter,Je.filter)||q.push({command:br.setFilter,args:[We,Je.filter]}),Gt(st.minzoom,Je.minzoom)&&Gt(st.maxzoom,Je.maxzoom)||q.push({command:br.setLayerZoomRange,args:[We,Je.minzoom,Je.maxzoom]}),st)Object.prototype.hasOwnProperty.call(st,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?xe(st[ft],Je[ft],q,We,ft.slice(6),br.setPaintProperty):Gt(st[ft],Je[ft])||q.push({command:br.setLayerProperty,args:[We,ft,Je[ft]]}));for(ft in Je)Object.prototype.hasOwnProperty.call(Je,ft)&&!Object.prototype.hasOwnProperty.call(st,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?xe(st[ft],Je[ft],q,We,ft.slice(6),br.setPaintProperty):Gt(st[ft],Je[ft])||q.push({command:br.setLayerProperty,args:[We,ft,Je[ft]]}))}else q.push({command:br.removeLayer,args:[We]}),lt=Se[Se.lastIndexOf(We)+1],q.push({command:br.addLayer,args:[Je,lt]})}(k,c.layers,m)}catch{m=[{command:br.setStyle,args:[c]}]}return m},a.dot=function(p,c){return p[0]*c[0]+p[1]*c[1]+p[2]*c[2]+p[3]*c[3]},a.earthRadius=lC,a.emitValidationErrors=Zi,a.emptyStyle=function(){const p={},c=Ze.$version;for(const m in Ze.$root){const E=Ze.$root[m];if(E.required){let I=null;I=m==="version"?c:E.type==="array"?[]:{},I!=null&&(p[m]=I)}}return p},a.equals=function(p,c){var m=p[0],E=p[1],I=p[2],k=p[3],D=p[4],j=p[5],q=p[6],te=p[7],ue=p[8],de=p[9],_e=p[10],Se=p[11],Ce=p[12],Fe=p[13],Ue=p[14],We=p[15],st=c[0],Je=c[1],lt=c[2],ft=c[3],Et=c[4],Yt=c[5],mr=c[6],Xt=c[7],Ut=c[8],Ft=c[9],tr=c[10],Bt=c[11],Tt=c[12],Pr=c[13],vr=c[14],sn=c[15];return Math.abs(m-st)<=Bs*Math.max(1,Math.abs(m),Math.abs(st))&&Math.abs(E-Je)<=Bs*Math.max(1,Math.abs(E),Math.abs(Je))&&Math.abs(I-lt)<=Bs*Math.max(1,Math.abs(I),Math.abs(lt))&&Math.abs(k-ft)<=Bs*Math.max(1,Math.abs(k),Math.abs(ft))&&Math.abs(D-Et)<=Bs*Math.max(1,Math.abs(D),Math.abs(Et))&&Math.abs(j-Yt)<=Bs*Math.max(1,Math.abs(j),Math.abs(Yt))&&Math.abs(q-mr)<=Bs*Math.max(1,Math.abs(q),Math.abs(mr))&&Math.abs(te-Xt)<=Bs*Math.max(1,Math.abs(te),Math.abs(Xt))&&Math.abs(ue-Ut)<=Bs*Math.max(1,Math.abs(ue),Math.abs(Ut))&&Math.abs(de-Ft)<=Bs*Math.max(1,Math.abs(de),Math.abs(Ft))&&Math.abs(_e-tr)<=Bs*Math.max(1,Math.abs(_e),Math.abs(tr))&&Math.abs(Se-Bt)<=Bs*Math.max(1,Math.abs(Se),Math.abs(Bt))&&Math.abs(Ce-Tt)<=Bs*Math.max(1,Math.abs(Ce),Math.abs(Tt))&&Math.abs(Fe-Pr)<=Bs*Math.max(1,Math.abs(Fe),Math.abs(Pr))&&Math.abs(Ue-vr)<=Bs*Math.max(1,Math.abs(Ue),Math.abs(vr))&&Math.abs(We-sn)<=Bs*Math.max(1,Math.abs(We),Math.abs(sn))},a.evaluateSizeForFeature=function(p,{uSize:c,uSizeT:m},{lowerSize:E,upperSize:I}){return p.kind==="source"?E/Xc:p.kind==="composite"?qi.number(E/Xc,I/Xc,m):c},a.evaluateSizeForZoom=function(p,c){let m=0,E=0;if(p.kind==="constant")E=p.layoutSize;else if(p.kind!=="source"){const{interpolationType:I,minZoom:k,maxZoom:D}=p,j=I?F(rn.interpolationFactor(I,c,k,D),0,1):0;p.kind==="camera"?E=qi.number(p.minSize,p.maxSize,j):m=j}return{uSizeT:m,uSize:E}},a.evented=fl,a.extend=x,a.filterObject=H,a.findLineIntersection=function(p,c,m,E){const I=c.y-p.y,k=c.x-p.x,D=E.y-m.y,j=E.x-m.x,q=D*k-j*I;if(q===0)return null;const te=(j*(p.y-m.y)-D*(p.x-m.x))/q;return new _(p.x+te*k,p.y+te*I)},a.fromScaling=function(p,c){return p[0]=c[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=c[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=c[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p},a.getAnchorAlignment=nC,a.getAnchorJustification=dC,a.getArrayBuffer=$e,a.getDefaultExportFromCjs=d,a.getJSON=function(p,c){return Xe(x(p,{type:"json"}),c)},a.getOverlapMode=iC,a.getProtocolAction=Te,a.getRTLTextPluginStatus=lu,a.getReferrer=ae,a.getVideo=function(p,c){const m=window.document.createElement("video");m.muted=!0,m.onloadstart=function(){c(null,m)};for(let E=0;E<p.length;E++){const I=window.document.createElement("source");at(p[E])||(m.crossOrigin="Anonymous"),I.src=p[E],m.appendChild(I)}return{cancel:()=>{}}},a.groupByLayout=function(p,c){const m={};for(let I=0;I<p.length;I++){const k=c&&c[p[I].id]||hs(p[I]);c&&(c[p[I].id]=k);let D=m[k];D||(D=m[k]=[]),D.push(p[I])}const E=[];for(const I in m)E.push(m[I]);return E},a.identity=$A,a.interpolate=qi,a.invert=function(p,c){var m=c[0],E=c[1],I=c[2],k=c[3],D=c[4],j=c[5],q=c[6],te=c[7],ue=c[8],de=c[9],_e=c[10],Se=c[11],Ce=c[12],Fe=c[13],Ue=c[14],We=c[15],st=m*j-E*D,Je=m*q-I*D,lt=m*te-k*D,ft=E*q-I*j,Et=E*te-k*j,Yt=I*te-k*q,mr=ue*Fe-de*Ce,Xt=ue*Ue-_e*Ce,Ut=ue*We-Se*Ce,Ft=de*Ue-_e*Fe,tr=de*We-Se*Fe,Bt=_e*We-Se*Ue,Tt=st*Bt-Je*tr+lt*Ft+ft*Ut-Et*Xt+Yt*mr;return Tt?(p[0]=(j*Bt-q*tr+te*Ft)*(Tt=1/Tt),p[1]=(I*tr-E*Bt-k*Ft)*Tt,p[2]=(Fe*Yt-Ue*Et+We*ft)*Tt,p[3]=(_e*Et-de*Yt-Se*ft)*Tt,p[4]=(q*Ut-D*Bt-te*Xt)*Tt,p[5]=(m*Bt-I*Ut+k*Xt)*Tt,p[6]=(Ue*lt-Ce*Yt-We*Je)*Tt,p[7]=(ue*Yt-_e*lt+Se*Je)*Tt,p[8]=(D*tr-j*Ut+te*mr)*Tt,p[9]=(E*Ut-m*tr-k*mr)*Tt,p[10]=(Ce*Et-Fe*lt+We*st)*Tt,p[11]=(de*lt-ue*Et-Se*st)*Tt,p[12]=(j*Xt-D*Ft-q*mr)*Tt,p[13]=(m*Ft-E*Xt+I*mr)*Tt,p[14]=(Fe*Je-Ce*ft-Ue*st)*Tt,p[15]=(ue*ft-de*Je+_e*st)*Tt,p):null},a.isImageBitmap=Ie,a.isSafari=oe,a.isWorker=ge,a.keysDifference=function(p,c){const m=[];for(const E in p)E in c||m.push(E);return m},a.lazyLoadRTLTextPlugin=function(){ci.isLoading()||ci.isLoaded()||lu()!=="deferred"||Ji()},a.makeRequest=Xe,a.mapObject=B,a.mercatorXfromLng=zF,a.mercatorYfromLat=BF,a.mercatorZfromAltitude=jF,a.mul=YQ,a.mul$1=function(p,c,m){return p[0]=c[0]*m[0],p[1]=c[1]*m[1],p[2]=c[2]*m[2],p[3]=c[3]*m[3],p},a.multiply=G3,a.nextPowerOfTwo=function(p){return p<=1?1:Math.pow(2,Math.ceil(Math.log(p)/Math.LN2))},a.operations=br,a.ortho=function(p,c,m,E,I,k,D){var j=1/(c-m),q=1/(E-I),te=1/(k-D);return p[0]=-2*j,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*q,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*te,p[11]=0,p[12]=(c+m)*j,p[13]=(I+E)*q,p[14]=(D+k)*te,p[15]=1,p},a.parseCacheControl=function(p){const c={};if(p.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(m,E,I,k)=>{const D=I||k;return c[E]=!D||D.toLowerCase(),""}),c["max-age"]){const m=parseInt(c["max-age"],10);isNaN(m)?delete c["max-age"]:c["max-age"]=m}return c},a.parseGlyphPbf=function(p){return new QA(p).readFields(Qee,[])},a.pbf=gF,a.performSymbolLayout=function(p){p.bucket.createArrays(),p.bucket.tilePixelRatio=co/(512*p.bucket.overscaling),p.bucket.compareText={},p.bucket.iconsNeedLinear=!1;const c=p.bucket.layers[0],m=c.layout,E=c._unevaluatedLayout._values,I={layoutIconSize:E["icon-size"].possiblyEvaluate(new fi(p.bucket.zoom+1),p.canonical),layoutTextSize:E["text-size"].possiblyEvaluate(new fi(p.bucket.zoom+1),p.canonical),textMaxSize:E["text-size"].possiblyEvaluate(new fi(18))};if(p.bucket.textSizeData.kind==="composite"){const{minZoom:te,maxZoom:ue}=p.bucket.textSizeData;I.compositeTextSizes=[E["text-size"].possiblyEvaluate(new fi(te),p.canonical),E["text-size"].possiblyEvaluate(new fi(ue),p.canonical)]}if(p.bucket.iconSizeData.kind==="composite"){const{minZoom:te,maxZoom:ue}=p.bucket.iconSizeData;I.compositeIconSizes=[E["icon-size"].possiblyEvaluate(new fi(te),p.canonical),E["icon-size"].possiblyEvaluate(new fi(ue),p.canonical)]}const k=m.get("text-line-height")*sa,D=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point",j=m.get("text-keep-upright"),q=m.get("text-size");for(const te of p.bucket.features){const ue=m.get("text-font").evaluate(te,{},p.canonical).join(","),de=q.evaluate(te,{},p.canonical),_e=I.layoutTextSize.evaluate(te,{},p.canonical),Se=I.layoutIconSize.evaluate(te,{},p.canonical),Ce={horizontal:{},vertical:void 0},Fe=te.text;let Ue,We=[0,0];if(Fe){const lt=Fe.toString(),ft=m.get("text-letter-spacing").evaluate(te,{},p.canonical)*sa,Et=ms(lt)?ft:0,Yt=m.get("text-anchor").evaluate(te,{},p.canonical),mr=o4(c,te,p.canonical);if(!mr){const Bt=m.get("text-radial-offset").evaluate(te,{},p.canonical);We=Bt?i4(Yt,[Bt*sa,hC]):m.get("text-offset").evaluate(te,{},p.canonical).map(Tt=>Tt*sa)}let Xt=D?"center":m.get("text-justify").evaluate(te,{},p.canonical);const Ut=m.get("symbol-placement"),Ft=Ut==="point"?m.get("text-max-width").evaluate(te,{},p.canonical)*sa:0,tr=()=>{p.bucket.allowVerticalPlacement&&Vc(lt)&&(Ce.vertical=J1(Fe,p.glyphMap,p.glyphPositions,p.imagePositions,ue,Ft,k,Yt,"left",Et,We,a.WritingMode.vertical,!0,Ut,_e,de))};if(!D&&mr){const Bt=new Set;if(Xt==="auto")for(let Pr=0;Pr<mr.values.length;Pr+=2)Bt.add(dC(mr.values[Pr]));else Bt.add(Xt);let Tt=!1;for(const Pr of Bt)if(!Ce.horizontal[Pr])if(Tt)Ce.horizontal[Pr]=Ce.horizontal[0];else{const vr=J1(Fe,p.glyphMap,p.glyphPositions,p.imagePositions,ue,Ft,k,"center",Pr,Et,We,a.WritingMode.horizontal,!1,Ut,_e,de);vr&&(Ce.horizontal[Pr]=vr,Tt=vr.positionedLines.length===1)}tr()}else{Xt==="auto"&&(Xt=dC(Yt));const Bt=J1(Fe,p.glyphMap,p.glyphPositions,p.imagePositions,ue,Ft,k,Yt,Xt,Et,We,a.WritingMode.horizontal,!1,Ut,_e,de);Bt&&(Ce.horizontal[Xt]=Bt),tr(),Vc(lt)&&D&&j&&(Ce.vertical=J1(Fe,p.glyphMap,p.glyphPositions,p.imagePositions,ue,Ft,k,Yt,Xt,Et,We,a.WritingMode.vertical,!1,Ut,_e,de))}}let st=!1;if(te.icon&&te.icon.name){const lt=p.imageMap[te.icon.name];lt&&(Ue=ote(p.imagePositions[te.icon.name],m.get("icon-offset").evaluate(te,{},p.canonical),m.get("icon-anchor").evaluate(te,{},p.canonical)),st=!!lt.sdf,p.bucket.sdfIcons===void 0?p.bucket.sdfIcons=st:p.bucket.sdfIcons!==st&&W("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lt.pixelRatio!==p.bucket.pixelRatio||m.get("icon-rotate").constantOr(1)!==0)&&(p.bucket.iconsNeedLinear=!0))}const Je=s4(Ce.horizontal)||Ce.vertical;p.bucket.iconsInText=!!Je&&Je.iconsInText,(Je||Ue)&&wte(p.bucket,te,Ce,Ue,p.imageMap,I,_e,Se,We,st,p.canonical)}p.showCollisionBoxes&&p.bucket.generateCollisionDebugBuffers()},a.perspective=function(p,c,m,E,I){var k,D=1/Math.tan(c/2);return p[0]=D/m,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=D,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=-1,p[12]=0,p[13]=0,p[15]=0,I!=null&&I!==1/0?(p[10]=(I+E)*(k=1/(E-I)),p[14]=2*I*E*k):(p[10]=-1,p[14]=-2*E),p},a.pick=function(p,c){const m={};for(let E=0;E<c.length;E++){const I=c[E];I in p&&(m[I]=p[I])}return m},a.plugin=ci,a.pointGeometry=f,a.polygonIntersectsPolygon=$3,a.potpack=SF,a.register=Jt,a.registerForPluginStateChange=function(p){return p({pluginStatus:ka,pluginURL:Li}),fl.on("pluginStateChange",p),p},a.renderColorRamp=H3,a.rotateX=function(p,c,m){var E=Math.sin(m),I=Math.cos(m),k=c[4],D=c[5],j=c[6],q=c[7],te=c[8],ue=c[9],de=c[10],_e=c[11];return c!==p&&(p[0]=c[0],p[1]=c[1],p[2]=c[2],p[3]=c[3],p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15]),p[4]=k*I+te*E,p[5]=D*I+ue*E,p[6]=j*I+de*E,p[7]=q*I+_e*E,p[8]=te*I-k*E,p[9]=ue*I-D*E,p[10]=de*I-j*E,p[11]=_e*I-q*E,p},a.rotateZ=function(p,c,m){var E=Math.sin(m),I=Math.cos(m),k=c[0],D=c[1],j=c[2],q=c[3],te=c[4],ue=c[5],de=c[6],_e=c[7];return c!==p&&(p[8]=c[8],p[9]=c[9],p[10]=c[10],p[11]=c[11],p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15]),p[0]=k*I+te*E,p[1]=D*I+ue*E,p[2]=j*I+de*E,p[3]=q*I+_e*E,p[4]=te*I-k*E,p[5]=ue*I-D*E,p[6]=de*I-j*E,p[7]=_e*I-q*E,p},a.sameOrigin=at,a.scale=function(p,c,m){var E=m[0],I=m[1],k=m[2];return p[0]=c[0]*E,p[1]=c[1]*E,p[2]=c[2]*E,p[3]=c[3]*E,p[4]=c[4]*I,p[5]=c[5]*I,p[6]=c[6]*I,p[7]=c[7]*I,p[8]=c[8]*k,p[9]=c[9]*k,p[10]=c[10]*k,p[11]=c[11]*k,p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15],p},a.setRTLTextPlugin=function(p,c,m=!1){if(ka===Oo||ka===Ra||ka===_i)throw new Error("setRTLTextPlugin cannot be called multiple times.");Li=re.resolveURL(p),ka=Oo,Eh=c,Of(),m||Ji()},a.sphericalToCartesian=function([p,c,m]){return c+=90,c*=Math.PI/180,m*=Math.PI/180,{x:p*Math.cos(c)*Math.sin(m),y:p*Math.sin(c)*Math.sin(m),z:p*Math.cos(m)}},a.toEvaluationFeature=Wc,a.transformMat4=q1,a.translate=function(p,c,m){var E,I,k,D,j,q,te,ue,de,_e,Se,Ce,Fe=m[0],Ue=m[1],We=m[2];return c===p?(p[12]=c[0]*Fe+c[4]*Ue+c[8]*We+c[12],p[13]=c[1]*Fe+c[5]*Ue+c[9]*We+c[13],p[14]=c[2]*Fe+c[6]*Ue+c[10]*We+c[14],p[15]=c[3]*Fe+c[7]*Ue+c[11]*We+c[15]):(I=c[1],k=c[2],D=c[3],j=c[4],q=c[5],te=c[6],ue=c[7],de=c[8],_e=c[9],Se=c[10],Ce=c[11],p[0]=E=c[0],p[1]=I,p[2]=k,p[3]=D,p[4]=j,p[5]=q,p[6]=te,p[7]=ue,p[8]=de,p[9]=_e,p[10]=Se,p[11]=Ce,p[12]=E*Fe+j*Ue+de*We+c[12],p[13]=I*Fe+q*Ue+_e*We+c[13],p[14]=k*Fe+te*Ue+Se*We+c[14],p[15]=D*Fe+ue*Ue+Ce*We+c[15]),p},a.triggerPluginCompletionEvent=uu,a.unicodeBlockLookup=Mt,a.uniqueId=function(){return N++},a.v8Spec=Ze,a.validateCustomStyleLayer=function(p){const c=[],m=p.id;return m===void 0&&c.push({message:`layers.${m}: missing required property "id"`}),p.render===void 0&&c.push({message:`layers.${m}: missing required method "render"`}),p.renderingMode&&p.renderingMode!=="2d"&&p.renderingMode!=="3d"&&c.push({message:`layers.${m}: property "renderingMode" must be either "2d" or "3d"`}),c},a.validateLight=ll,a.validateStyle=Uc,a.vectorTile=Ch,a.warnOnce=W,a.wrap=T}),o(["./shared"],function(a){class d{constructor(ce){this.keyCache={},ce&&this.replace(ce)}replace(ce){this._layerConfigs={},this._layers={},this.update(ce,[])}update(ce,ye){for(const ze of ce){this._layerConfigs[ze.id]=ze;const Ge=this._layers[ze.id]=a.createStyleLayer(ze);Ge._featureFilter=a.createFilter(Ge.filter),this.keyCache[ze.id]&&delete this.keyCache[ze.id]}for(const ze of ye)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const Me=a.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const ze of Me){const Ge=ze.map(bt=>this._layers[bt.id]),nt=Ge[0];if(nt.visibility==="none")continue;const He=nt.source||"";let Ye=this.familiesBySource[He];Ye||(Ye=this.familiesBySource[He]={});const tt=nt.sourceLayer||"_geojsonTileLayer";let yt=Ye[tt];yt||(yt=Ye[tt]=[]),yt.push(Ge)}}}class f{constructor(ce){const ye={},Me=[];for(const He in ce){const Ye=ce[He],tt=ye[He]={};for(const yt in Ye){const bt=Ye[+yt];if(!bt||bt.bitmap.width===0||bt.bitmap.height===0)continue;const gt={x:0,y:0,w:bt.bitmap.width+2,h:bt.bitmap.height+2};Me.push(gt),tt[yt]={rect:gt,metrics:bt.metrics}}}const{w:ze,h:Ge}=a.potpack(Me),nt=new a.AlphaImage({width:ze||1,height:Ge||1});for(const He in ce){const Ye=ce[He];for(const tt in Ye){const yt=Ye[+tt];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const bt=ye[He][tt].rect;a.AlphaImage.copy(yt.bitmap,nt,{x:0,y:0},{x:bt.x+1,y:bt.y+1},yt.bitmap)}}this.image=nt,this.positions=ye}}a.register("GlyphAtlas",f);class g{constructor(ce){this.tileID=new a.OverscaledTileID(ce.tileID.overscaledZ,ce.tileID.wrap,ce.tileID.canonical.z,ce.tileID.canonical.x,ce.tileID.canonical.y),this.uid=ce.uid,this.zoom=ce.zoom,this.pixelRatio=ce.pixelRatio,this.tileSize=ce.tileSize,this.source=ce.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ce.showCollisionBoxes,this.collectResourceTiming=!!ce.collectResourceTiming,this.returnDependencies=!!ce.returnDependencies,this.promoteId=ce.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(ce,ye,Me,ze,Ge){this.status="parsing",this.data=ce,this.collisionBoxArray=new a.CollisionBoxArray;const nt=new a.DictionaryCoder(Object.keys(ce.layers).sort()),He=new a.FeatureIndex(this.tileID,this.promoteId);He.bucketLayerIDs=[];const Ye={},tt={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Me},yt=ye.familiesBySource[this.source];for(const Wr in yt){const Dr=ce.layers[Wr];if(!Dr)continue;Dr.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${Wr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const go=nt.encode(Wr),Wt=[];for(let Vr=0;Vr<Dr.length;Vr++){const xt=Dr.feature(Vr),Jr=He.getId(xt,Wr);Wt.push({feature:xt,id:Jr,index:Vr,sourceLayerIndex:go})}for(const Vr of yt[Wr]){const xt=Vr[0];xt.source!==this.source&&a.warnOnce(`layer.source = ${xt.source} does not equal this.source = ${this.source}`),xt.minzoom&&this.zoom<Math.floor(xt.minzoom)||xt.maxzoom&&this.zoom>=xt.maxzoom||xt.visibility!=="none"&&(_(Vr,this.zoom,Me),(Ye[xt.id]=xt.createBucket({index:He.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:go,sourceID:this.source})).populate(Wt,tt,this.tileID.canonical),He.bucketLayerIDs.push(Vr.map(Jr=>Jr.id)))}}let bt,gt,Rt,dr;const qt=a.mapObject(tt.glyphDependencies,Wr=>Object.keys(Wr).map(Number));this.inFlightDependencies.forEach(Wr=>Wr==null?void 0:Wr.cancel()),this.inFlightDependencies=[];const Kt=++this.dependencySentinel;Object.keys(qt).length?this.inFlightDependencies.push(ze.send("getGlyphs",{uid:this.uid,stacks:qt,source:this.source,tileID:this.tileID,type:"glyphs"},(Wr,Dr)=>{Kt===this.dependencySentinel&&(bt||(bt=Wr,gt=Dr,Hr.call(this)))})):gt={};const er=Object.keys(tt.iconDependencies);er.length?this.inFlightDependencies.push(ze.send("getImages",{icons:er,source:this.source,tileID:this.tileID,type:"icons"},(Wr,Dr)=>{Kt===this.dependencySentinel&&(bt||(bt=Wr,Rt=Dr,Hr.call(this)))})):Rt={};const Yr=Object.keys(tt.patternDependencies);function Hr(){if(bt)return Ge(bt);if(gt&&Rt&&dr){const Wr=new f(gt),Dr=new a.ImageAtlas(Rt,dr);for(const go in Ye){const Wt=Ye[go];Wt instanceof a.SymbolBucket?(_(Wt.layers,this.zoom,Me),a.performSymbolLayout({bucket:Wt,glyphMap:gt,glyphPositions:Wr.positions,imageMap:Rt,imagePositions:Dr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Wt.hasPattern&&(Wt instanceof a.LineBucket||Wt instanceof a.FillBucket||Wt instanceof a.FillExtrusionBucket)&&(_(Wt.layers,this.zoom,Me),Wt.addFeatures(tt,this.tileID.canonical,Dr.patternPositions))}this.status="done",Ge(null,{buckets:Object.values(Ye).filter(go=>!go.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wr.image,imageAtlas:Dr,glyphMap:this.returnDependencies?gt:null,iconMap:this.returnDependencies?Rt:null,glyphPositions:this.returnDependencies?Wr.positions:null})}}Yr.length?this.inFlightDependencies.push(ze.send("getImages",{icons:Yr,source:this.source,tileID:this.tileID,type:"patterns"},(Wr,Dr)=>{Kt===this.dependencySentinel&&(bt||(bt=Wr,dr=Dr,Hr.call(this)))})):dr={},Hr.call(this)}}function _(Ne,ce,ye){const Me=new a.EvaluationParameters(ce);for(const ze of Ne)ze.recalculate(Me,ye)}function b(Ne,ce){const ye=a.getArrayBuffer(Ne.request,(Me,ze,Ge,nt)=>{Me?ce(Me):ze&&ce(null,{vectorTile:new a.vectorTile.VectorTile(new a.Protobuf(ze)),rawData:ze,cacheControl:Ge,expires:nt})});return()=>{ye.cancel(),ce()}}class P{constructor(ce,ye,Me,ze){this.actor=ce,this.layerIndex=ye,this.availableImages=Me,this.loadVectorData=ze||b,this.fetching={},this.loading={},this.loaded={}}loadTile(ce,ye){const Me=ce.uid;this.loading||(this.loading={});const ze=!!(ce&&ce.request&&ce.request.collectResourceTiming)&&new a.RequestPerformance(ce.request),Ge=this.loading[Me]=new g(ce);Ge.abort=this.loadVectorData(ce,(nt,He)=>{if(delete this.loading[Me],nt||!He)return Ge.status="done",this.loaded[Me]=Ge,ye(nt);const Ye=He.rawData,tt={};He.expires&&(tt.expires=He.expires),He.cacheControl&&(tt.cacheControl=He.cacheControl);const yt={};if(ze){const bt=ze.finish();bt&&(yt.resourceTiming=JSON.parse(JSON.stringify(bt)))}Ge.vectorTile=He.vectorTile,Ge.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,(bt,gt)=>{if(delete this.fetching[Me],bt||!gt)return ye(bt);ye(null,a.extend({rawTileData:Ye.slice(0)},gt,tt,yt))}),this.loaded=this.loaded||{},this.loaded[Me]=Ge,this.fetching[Me]={rawTileData:Ye,cacheControl:tt,resourceTiming:yt}})}reloadTile(ce,ye){const Me=this.loaded,ze=ce.uid;if(Me&&Me[ze]){const Ge=Me[ze];Ge.showCollisionBoxes=ce.showCollisionBoxes,Ge.status==="parsing"?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,(nt,He)=>{if(nt||!He)return ye(nt,He);let Ye;if(this.fetching[ze]){const{rawTileData:tt,cacheControl:yt,resourceTiming:bt}=this.fetching[ze];delete this.fetching[ze],Ye=a.extend({rawTileData:tt.slice(0)},He,yt,bt)}else Ye=He;ye(null,Ye)}):Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,ye):ye())}}abortTile(ce,ye){const Me=this.loading,ze=ce.uid;Me&&Me[ze]&&Me[ze].abort&&(Me[ze].abort(),delete Me[ze]),ye()}removeTile(ce,ye){const Me=this.loaded,ze=ce.uid;Me&&Me[ze]&&delete Me[ze],ye()}}class L{constructor(){this.loaded={}}loadTile(ce,ye){const{uid:Me,encoding:ze,rawImageData:Ge}=ce,nt=a.isImageBitmap(Ge)?this.getImageData(Ge):Ge,He=new a.DEMData(Me,nt,ze);this.loaded=this.loaded||{},this.loaded[Me]=He,ye(null,He)}getImageData(ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ce.width,ce.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ce.width,this.offscreenCanvas.height=ce.height,this.offscreenCanvasContext.drawImage(ce,0,0,ce.width,ce.height);const ye=this.offscreenCanvasContext.getImageData(-1,-1,ce.width+2,ce.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:ye.width,height:ye.height},ye.data)}removeTile(ce){const ye=this.loaded,Me=ce.uid;ye&&ye[Me]&&delete ye[Me]}}function R(Ne,ce){if(Ne.length!==0){$(Ne[0],ce);for(var ye=1;ye<Ne.length;ye++)$(Ne[ye],!ce)}}function $(Ne,ce){for(var ye=0,Me=0,ze=0,Ge=Ne.length,nt=Ge-1;ze<Ge;nt=ze++){var He=(Ne[ze][0]-Ne[nt][0])*(Ne[nt][1]+Ne[ze][1]),Ye=ye+He;Me+=Math.abs(ye)>=Math.abs(He)?ye-Ye+He:He-Ye+ye,ye=Ye}ye+Me>=0!=!!ce&&Ne.reverse()}var F=a.getDefaultExportFromCjs(function Ne(ce,ye){var Me,ze=ce&&ce.type;if(ze==="FeatureCollection")for(Me=0;Me<ce.features.length;Me++)Ne(ce.features[Me],ye);else if(ze==="GeometryCollection")for(Me=0;Me<ce.geometries.length;Me++)Ne(ce.geometries[Me],ye);else if(ze==="Feature")Ne(ce.geometry,ye);else if(ze==="Polygon")R(ce.coordinates,ye);else if(ze==="MultiPolygon")for(Me=0;Me<ce.coordinates.length;Me++)R(ce.coordinates[Me],ye);return ce});const T=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;var x={exports:{}},N=a.pointGeometry,B=a.vectorTile.VectorTileFeature,H=Z;function Z(Ne,ce){this.options=ce||{},this.features=Ne,this.length=Ne.length}function Y(Ne,ce){this.id=typeof Ne.id=="number"?Ne.id:void 0,this.type=Ne.type,this.rawGeometry=Ne.type===1?[Ne.geometry]:Ne.geometry,this.properties=Ne.tags,this.extent=ce||4096}Z.prototype.feature=function(Ne){return new Y(this.features[Ne],this.options.extent)},Y.prototype.loadGeometry=function(){var Ne=this.rawGeometry;this.geometry=[];for(var ce=0;ce<Ne.length;ce++){for(var ye=Ne[ce],Me=[],ze=0;ze<ye.length;ze++)Me.push(new N(ye[ze][0],ye[ze][1]));this.geometry.push(Me)}return this.geometry},Y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ne=this.geometry,ce=1/0,ye=-1/0,Me=1/0,ze=-1/0,Ge=0;Ge<Ne.length;Ge++)for(var nt=Ne[Ge],He=0;He<nt.length;He++){var Ye=nt[He];ce=Math.min(ce,Ye.x),ye=Math.max(ye,Ye.x),Me=Math.min(Me,Ye.y),ze=Math.max(ze,Ye.y)}return[ce,Me,ye,ze]},Y.prototype.toGeoJSON=B.prototype.toGeoJSON;var W=a.pbf,Q=H;function me(Ne){var ce=new W;return function(ye,Me){for(var ze in ye.layers)Me.writeMessage(3,ge,ye.layers[ze])}(Ne,ce),ce.finish()}function ge(Ne,ce){var ye;ce.writeVarintField(15,Ne.version||1),ce.writeStringField(1,Ne.name||""),ce.writeVarintField(5,Ne.extent||4096);var Me={keys:[],values:[],keycache:{},valuecache:{}};for(ye=0;ye<Ne.length;ye++)Me.feature=Ne.feature(ye),ce.writeMessage(2,be,Me);var ze=Me.keys;for(ye=0;ye<ze.length;ye++)ce.writeStringField(3,ze[ye]);var Ge=Me.values;for(ye=0;ye<Ge.length;ye++)ce.writeMessage(4,K,Ge[ye])}function be(Ne,ce){var ye=Ne.feature;ye.id!==void 0&&ce.writeVarintField(1,ye.id),ce.writeMessage(2,oe,Ne),ce.writeVarintField(3,ye.type),ce.writeMessage(4,G,ye)}function oe(Ne,ce){var ye=Ne.feature,Me=Ne.keys,ze=Ne.values,Ge=Ne.keycache,nt=Ne.valuecache;for(var He in ye.properties){var Ye=ye.properties[He],tt=Ge[He];if(Ye!==null){tt===void 0&&(Me.push(He),Ge[He]=tt=Me.length-1),ce.writeVarint(tt);var yt=typeof Ye;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Ye=JSON.stringify(Ye));var bt=yt+":"+Ye,gt=nt[bt];gt===void 0&&(ze.push(Ye),nt[bt]=gt=ze.length-1),ce.writeVarint(gt)}}}function Ie(Ne,ce){return(ce<<3)+(7&Ne)}function fe(Ne){return Ne<<1^Ne>>31}function G(Ne,ce){for(var ye=Ne.loadGeometry(),Me=Ne.type,ze=0,Ge=0,nt=ye.length,He=0;He<nt;He++){var Ye=ye[He],tt=1;Me===1&&(tt=Ye.length),ce.writeVarint(Ie(1,tt));for(var yt=Me===3?Ye.length-1:Ye.length,bt=0;bt<yt;bt++){bt===1&&Me!==1&&ce.writeVarint(Ie(2,yt-1));var gt=Ye[bt].x-ze,Rt=Ye[bt].y-Ge;ce.writeVarint(fe(gt)),ce.writeVarint(fe(Rt)),ze+=gt,Ge+=Rt}Me===3&&ce.writeVarint(Ie(7,1))}}function K(Ne,ce){var ye=typeof Ne;ye==="string"?ce.writeStringField(1,Ne):ye==="boolean"?ce.writeBooleanField(7,Ne):ye==="number"&&(Ne%1!=0?ce.writeDoubleField(3,Ne):Ne<0?ce.writeSVarintField(6,Ne):ce.writeVarintField(5,Ne))}x.exports=me,x.exports.fromVectorTileJs=me,x.exports.fromGeojsonVt=function(Ne,ce){ce=ce||{};var ye={};for(var Me in Ne)ye[Me]=new Q(Ne[Me].features,ce),ye[Me].name=Me,ye[Me].version=ce.version,ye[Me].extent=ce.extent;return me({layers:ye})},x.exports.GeoJSONWrapper=Q;var re=a.getDefaultExportFromCjs(x.exports);const ie={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ne=>Ne},he=Math.fround||(ae=new Float32Array(1),Ne=>(ae[0]=+Ne,ae[0]));var ae;const Te=3,Le=5,Xe=6;class $e{constructor(ce){this.options=Object.assign(Object.create(ie),ce),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ce){const{log:ye,minZoom:Me,maxZoom:ze}=this.options,Ge=`prepare ${ce.length} points`;this.points=ce;const nt=[];for(let Ye=0;Ye<ce.length;Ye++){const tt=ce[Ye];if(!tt.geometry)continue;const[yt,bt]=tt.geometry.coordinates,gt=he(Lt(yt)),Rt=he(pt(bt));nt.push(gt,Rt,1/0,Ye,-1,1),this.options.reduce&&nt.push(0)}let He=this.trees[ze+1]=this._createTree(nt);for(let Ye=ze;Ye>=Me;Ye--){const tt=+Date.now();He=this.trees[Ye]=this._createTree(this._cluster(He,Ye))}return this}getClusters(ce,ye){let Me=((ce[0]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,ce[1]));let Ge=ce[2]===180?180:((ce[2]+180)%360+360)%360-180;const nt=Math.max(-90,Math.min(90,ce[3]));if(ce[2]-ce[0]>=360)Me=-180,Ge=180;else if(Me>Ge){const bt=this.getClusters([Me,ze,180,nt],ye),gt=this.getClusters([-180,ze,Ge,nt],ye);return bt.concat(gt)}const He=this.trees[this._limitZoom(ye)],Ye=He.range(Lt(Me),pt(nt),Lt(Ge),pt(ze)),tt=He.data,yt=[];for(const bt of Ye){const gt=this.stride*bt;yt.push(tt[gt+Le]>1?at(tt,gt,this.clusterProps):this.points[tt[gt+Te]])}return yt}getChildren(ce){const ye=this._getOriginId(ce),Me=this._getOriginZoom(ce),ze="No cluster with the specified id.",Ge=this.trees[Me];if(!Ge)throw new Error(ze);const nt=Ge.data;if(ye*this.stride>=nt.length)throw new Error(ze);const He=this.options.radius/(this.options.extent*Math.pow(2,Me-1)),Ye=Ge.within(nt[ye*this.stride],nt[ye*this.stride+1],He),tt=[];for(const yt of Ye){const bt=yt*this.stride;nt[bt+4]===ce&&tt.push(nt[bt+Le]>1?at(nt,bt,this.clusterProps):this.points[nt[bt+Te]])}if(tt.length===0)throw new Error(ze);return tt}getLeaves(ce,ye,Me){const ze=[];return this._appendLeaves(ze,ce,ye=ye||10,Me=Me||0,0),ze}getTile(ce,ye,Me){const ze=this.trees[this._limitZoom(ce)],Ge=Math.pow(2,ce),{extent:nt,radius:He}=this.options,Ye=He/nt,tt=(Me-Ye)/Ge,yt=(Me+1+Ye)/Ge,bt={features:[]};return this._addTileFeatures(ze.range((ye-Ye)/Ge,tt,(ye+1+Ye)/Ge,yt),ze.data,ye,Me,Ge,bt),ye===0&&this._addTileFeatures(ze.range(1-Ye/Ge,tt,1,yt),ze.data,Ge,Me,Ge,bt),ye===Ge-1&&this._addTileFeatures(ze.range(0,tt,Ye/Ge,yt),ze.data,-1,Me,Ge,bt),bt.features.length?bt:null}getClusterExpansionZoom(ce){let ye=this._getOriginZoom(ce)-1;for(;ye<=this.options.maxZoom;){const Me=this.getChildren(ce);if(ye++,Me.length!==1)break;ce=Me[0].properties.cluster_id}return ye}_appendLeaves(ce,ye,Me,ze,Ge){const nt=this.getChildren(ye);for(const He of nt){const Ye=He.properties;if(Ye&&Ye.cluster?Ge+Ye.point_count<=ze?Ge+=Ye.point_count:Ge=this._appendLeaves(ce,Ye.cluster_id,Me,ze,Ge):Ge<ze?Ge++:ce.push(He),ce.length===Me)break}return Ge}_createTree(ce){const ye=new a.KDBush(ce.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Me=0;Me<ce.length;Me+=this.stride)ye.add(ce[Me],ce[Me+1]);return ye.finish(),ye.data=ce,ye}_addTileFeatures(ce,ye,Me,ze,Ge,nt){for(const He of ce){const Ye=He*this.stride,tt=ye[Ye+Le]>1;let yt,bt,gt;if(tt)yt=_t(ye,Ye,this.clusterProps),bt=ye[Ye],gt=ye[Ye+1];else{const qt=this.points[ye[Ye+Te]];yt=qt.properties;const[Kt,er]=qt.geometry.coordinates;bt=Lt(Kt),gt=pt(er)}const Rt={type:1,geometry:[[Math.round(this.options.extent*(bt*Ge-Me)),Math.round(this.options.extent*(gt*Ge-ze))]],tags:yt};let dr;dr=tt||this.options.generateId?ye[Ye+Te]:this.points[ye[Ye+Te]].id,dr!==void 0&&(Rt.id=dr),nt.features.push(Rt)}}_limitZoom(ce){return Math.max(this.options.minZoom,Math.min(Math.floor(+ce),this.options.maxZoom+1))}_cluster(ce,ye){const{radius:Me,extent:ze,reduce:Ge,minPoints:nt}=this.options,He=Me/(ze*Math.pow(2,ye)),Ye=ce.data,tt=[],yt=this.stride;for(let bt=0;bt<Ye.length;bt+=yt){if(Ye[bt+2]<=ye)continue;Ye[bt+2]=ye;const gt=Ye[bt],Rt=Ye[bt+1],dr=ce.within(Ye[bt],Ye[bt+1],He),qt=Ye[bt+Le];let Kt=qt;for(const er of dr){const Yr=er*yt;Ye[Yr+2]>ye&&(Kt+=Ye[Yr+Le])}if(Kt>qt&&Kt>=nt){let er,Yr=gt*qt,Hr=Rt*qt,Wr=-1;const Dr=((bt/yt|0)<<5)+(ye+1)+this.points.length;for(const go of dr){const Wt=go*yt;if(Ye[Wt+2]<=ye)continue;Ye[Wt+2]=ye;const Vr=Ye[Wt+Le];Yr+=Ye[Wt]*Vr,Hr+=Ye[Wt+1]*Vr,Ye[Wt+4]=Dr,Ge&&(er||(er=this._map(Ye,bt,!0),Wr=this.clusterProps.length,this.clusterProps.push(er)),Ge(er,this._map(Ye,Wt)))}Ye[bt+4]=Dr,tt.push(Yr/Kt,Hr/Kt,1/0,Dr,-1,Kt),Ge&&tt.push(Wr)}else{for(let er=0;er<yt;er++)tt.push(Ye[bt+er]);if(Kt>1)for(const er of dr){const Yr=er*yt;if(!(Ye[Yr+2]<=ye)){Ye[Yr+2]=ye;for(let Hr=0;Hr<yt;Hr++)tt.push(Ye[Yr+Hr])}}}}return tt}_getOriginId(ce){return ce-this.points.length>>5}_getOriginZoom(ce){return(ce-this.points.length)%32}_map(ce,ye,Me){if(ce[ye+Le]>1){const nt=this.clusterProps[ce[ye+Xe]];return Me?Object.assign({},nt):nt}const ze=this.points[ce[ye+Te]].properties,Ge=this.options.map(ze);return Me&&Ge===ze?Object.assign({},Ge):Ge}}function at(Ne,ce,ye){return{type:"Feature",id:Ne[ce+Te],properties:_t(Ne,ce,ye),geometry:{type:"Point",coordinates:[(Me=Ne[ce],360*(Me-.5)),Ot(Ne[ce+1])]}};var Me}function _t(Ne,ce,ye){const Me=Ne[ce+Le],ze=Me>=1e4?`${Math.round(Me/1e3)}k`:Me>=1e3?Math.round(Me/100)/10+"k":Me,Ge=Ne[ce+Xe],nt=Ge===-1?{}:Object.assign({},ye[Ge]);return Object.assign(nt,{cluster:!0,cluster_id:Ne[ce+Te],point_count:Me,point_count_abbreviated:ze})}function Lt(Ne){return Ne/360+.5}function pt(Ne){const ce=Math.sin(Ne*Math.PI/180),ye=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return ye<0?0:ye>1?1:ye}function Ot(Ne){const ce=(180-360*Ne)*Math.PI/180;return 360*Math.atan(Math.exp(ce))/Math.PI-90}function vt(Ne,ce,ye,Me){for(var ze,Ge=Me,nt=ye-ce>>1,He=ye-ce,Ye=Ne[ce],tt=Ne[ce+1],yt=Ne[ye],bt=Ne[ye+1],gt=ce+3;gt<ye;gt+=3){var Rt=Ze(Ne[gt],Ne[gt+1],Ye,tt,yt,bt);if(Rt>Ge)ze=gt,Ge=Rt;else if(Rt===Ge){var dr=Math.abs(gt-nt);dr<He&&(ze=gt,He=dr)}}Ge>Me&&(ze-ce>3&&vt(Ne,ce,ze,Me),Ne[ze+2]=Ge,ye-ze>3&&vt(Ne,ze,ye,Me))}function Ze(Ne,ce,ye,Me,ze,Ge){var nt=ze-ye,He=Ge-Me;if(nt!==0||He!==0){var Ye=((Ne-ye)*nt+(ce-Me)*He)/(nt*nt+He*He);Ye>1?(ye=ze,Me=Ge):Ye>0&&(ye+=nt*Ye,Me+=He*Ye)}return(nt=Ne-ye)*nt+(He=ce-Me)*He}function Zt(Ne,ce,ye,Me){var ze={id:Ne===void 0?null:Ne,type:ce,geometry:ye,tags:Me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ge){var nt=Ge.geometry,He=Ge.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")rr(Ge,nt);else if(He==="Polygon"||He==="MultiLineString")for(var Ye=0;Ye<nt.length;Ye++)rr(Ge,nt[Ye]);else if(He==="MultiPolygon")for(Ye=0;Ye<nt.length;Ye++)for(var tt=0;tt<nt[Ye].length;tt++)rr(Ge,nt[Ye][tt])}(ze),ze}function rr(Ne,ce){for(var ye=0;ye<ce.length;ye+=3)Ne.minX=Math.min(Ne.minX,ce[ye]),Ne.minY=Math.min(Ne.minY,ce[ye+1]),Ne.maxX=Math.max(Ne.maxX,ce[ye]),Ne.maxY=Math.max(Ne.maxY,ce[ye+1])}function Gt(Ne,ce,ye,Me){if(ce.geometry){var ze=ce.geometry.coordinates,Ge=ce.geometry.type,nt=Math.pow(ye.tolerance/((1<<ye.maxZoom)*ye.extent),2),He=[],Ye=ce.id;if(ye.promoteId?Ye=ce.properties[ye.promoteId]:ye.generateId&&(Ye=Me||0),Ge==="Point")br(ze,He);else if(Ge==="MultiPoint")for(var tt=0;tt<ze.length;tt++)br(ze[tt],He);else if(Ge==="LineString")un(ze,He,nt,!1);else if(Ge==="MultiLineString"){if(ye.lineMetrics){for(tt=0;tt<ze.length;tt++)un(ze[tt],He=[],nt,!1),Ne.push(Zt(Ye,"LineString",He,ce.properties));return}ot(ze,He,nt,!1)}else if(Ge==="Polygon")ot(ze,He,nt,!0);else{if(Ge!=="MultiPolygon"){if(Ge==="GeometryCollection"){for(tt=0;tt<ce.geometry.geometries.length;tt++)Gt(Ne,{id:Ye,geometry:ce.geometry.geometries[tt],properties:ce.properties},ye,Me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<ze.length;tt++){var yt=[];ot(ze[tt],yt,nt,!0),He.push(yt)}}Ne.push(Zt(Ye,Ge,He,ce.properties))}}function br(Ne,ce){ce.push(Oe(Ne[0])),ce.push(ve(Ne[1])),ce.push(0)}function un(Ne,ce,ye,Me){for(var ze,Ge,nt=0,He=0;He<Ne.length;He++){var Ye=Oe(Ne[He][0]),tt=ve(Ne[He][1]);ce.push(Ye),ce.push(tt),ce.push(0),He>0&&(nt+=Me?(ze*tt-Ye*Ge)/2:Math.sqrt(Math.pow(Ye-ze,2)+Math.pow(tt-Ge,2))),ze=Ye,Ge=tt}var yt=ce.length-3;ce[2]=1,vt(ce,0,yt,ye),ce[yt+2]=1,ce.size=Math.abs(nt),ce.start=0,ce.end=ce.size}function ot(Ne,ce,ye,Me){for(var ze=0;ze<Ne.length;ze++){var Ge=[];un(Ne[ze],Ge,ye,Me),ce.push(Ge)}}function Oe(Ne){return Ne/360+.5}function ve(Ne){var ce=Math.sin(Ne*Math.PI/180),ye=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return ye<0?0:ye>1?1:ye}function xe(Ne,ce,ye,Me,ze,Ge,nt,He){if(Me/=ce,Ge>=(ye/=ce)&&nt<Me)return Ne;if(nt<ye||Ge>=Me)return null;for(var Ye=[],tt=0;tt<Ne.length;tt++){var yt=Ne[tt],bt=yt.geometry,gt=yt.type,Rt=ze===0?yt.minX:yt.minY,dr=ze===0?yt.maxX:yt.maxY;if(Rt>=ye&&dr<Me)Ye.push(yt);else if(!(dr<ye||Rt>=Me)){var qt=[];if(gt==="Point"||gt==="MultiPoint")je(bt,qt,ye,Me,ze);else if(gt==="LineString")Ke(bt,qt,ye,Me,ze,!1,He.lineMetrics);else if(gt==="MultiLineString")mt(bt,qt,ye,Me,ze,!1);else if(gt==="Polygon")mt(bt,qt,ye,Me,ze,!0);else if(gt==="MultiPolygon")for(var Kt=0;Kt<bt.length;Kt++){var er=[];mt(bt[Kt],er,ye,Me,ze,!0),er.length&&qt.push(er)}if(qt.length){if(He.lineMetrics&&gt==="LineString"){for(Kt=0;Kt<qt.length;Kt++)Ye.push(Zt(yt.id,gt,qt[Kt],yt.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(qt.length===1?(gt="LineString",qt=qt[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=qt.length===3?"Point":"MultiPoint"),Ye.push(Zt(yt.id,gt,qt,yt.tags))}}}return Ye.length?Ye:null}function je(Ne,ce,ye,Me,ze){for(var Ge=0;Ge<Ne.length;Ge+=3){var nt=Ne[Ge+ze];nt>=ye&&nt<=Me&&(ce.push(Ne[Ge]),ce.push(Ne[Ge+1]),ce.push(Ne[Ge+2]))}}function Ke(Ne,ce,ye,Me,ze,Ge,nt){for(var He,Ye,tt=qe(Ne),yt=ze===0?Ht:lr,bt=Ne.start,gt=0;gt<Ne.length-3;gt+=3){var Rt=Ne[gt],dr=Ne[gt+1],qt=Ne[gt+2],Kt=Ne[gt+3],er=Ne[gt+4],Yr=ze===0?Rt:dr,Hr=ze===0?Kt:er,Wr=!1;nt&&(He=Math.sqrt(Math.pow(Rt-Kt,2)+Math.pow(dr-er,2))),Yr<ye?Hr>ye&&(Ye=yt(tt,Rt,dr,Kt,er,ye),nt&&(tt.start=bt+He*Ye)):Yr>Me?Hr<Me&&(Ye=yt(tt,Rt,dr,Kt,er,Me),nt&&(tt.start=bt+He*Ye)):rt(tt,Rt,dr,qt),Hr<ye&&Yr>=ye&&(Ye=yt(tt,Rt,dr,Kt,er,ye),Wr=!0),Hr>Me&&Yr<=Me&&(Ye=yt(tt,Rt,dr,Kt,er,Me),Wr=!0),!Ge&&Wr&&(nt&&(tt.end=bt+He*Ye),ce.push(tt),tt=qe(Ne)),nt&&(bt+=He)}var Dr=Ne.length-3;Rt=Ne[Dr],dr=Ne[Dr+1],qt=Ne[Dr+2],(Yr=ze===0?Rt:dr)>=ye&&Yr<=Me&&rt(tt,Rt,dr,qt),Dr=tt.length-3,Ge&&Dr>=3&&(tt[Dr]!==tt[0]||tt[Dr+1]!==tt[1])&&rt(tt,tt[0],tt[1],tt[2]),tt.length&&ce.push(tt)}function qe(Ne){var ce=[];return ce.size=Ne.size,ce.start=Ne.start,ce.end=Ne.end,ce}function mt(Ne,ce,ye,Me,ze,Ge){for(var nt=0;nt<Ne.length;nt++)Ke(Ne[nt],ce,ye,Me,ze,Ge,!1)}function rt(Ne,ce,ye,Me){Ne.push(ce),Ne.push(ye),Ne.push(Me)}function Ht(Ne,ce,ye,Me,ze,Ge){var nt=(Ge-ce)/(Me-ce);return Ne.push(Ge),Ne.push(ye+(ze-ye)*nt),Ne.push(1),nt}function lr(Ne,ce,ye,Me,ze,Ge){var nt=(Ge-ye)/(ze-ye);return Ne.push(ce+(Me-ce)*nt),Ne.push(Ge),Ne.push(1),nt}function ut(Ne,ce){for(var ye=[],Me=0;Me<Ne.length;Me++){var ze,Ge=Ne[Me],nt=Ge.type;if(nt==="Point"||nt==="MultiPoint"||nt==="LineString")ze=kt(Ge.geometry,ce);else if(nt==="MultiLineString"||nt==="Polygon"){ze=[];for(var He=0;He<Ge.geometry.length;He++)ze.push(kt(Ge.geometry[He],ce))}else if(nt==="MultiPolygon")for(ze=[],He=0;He<Ge.geometry.length;He++){for(var Ye=[],tt=0;tt<Ge.geometry[He].length;tt++)Ye.push(kt(Ge.geometry[He][tt],ce));ze.push(Ye)}ye.push(Zt(Ge.id,nt,ze,Ge.tags))}return ye}function kt(Ne,ce){var ye=[];ye.size=Ne.size,Ne.start!==void 0&&(ye.start=Ne.start,ye.end=Ne.end);for(var Me=0;Me<Ne.length;Me+=3)ye.push(Ne[Me]+ce,Ne[Me+1],Ne[Me+2]);return ye}function $t(Ne,ce){if(Ne.transformed)return Ne;var ye,Me,ze,Ge=1<<Ne.z,nt=Ne.x,He=Ne.y;for(ye=0;ye<Ne.features.length;ye++){var Ye=Ne.features[ye],tt=Ye.geometry,yt=Ye.type;if(Ye.geometry=[],yt===1)for(Me=0;Me<tt.length;Me+=2)Ye.geometry.push(Lr(tt[Me],tt[Me+1],ce,Ge,nt,He));else for(Me=0;Me<tt.length;Me++){var bt=[];for(ze=0;ze<tt[Me].length;ze+=2)bt.push(Lr(tt[Me][ze],tt[Me][ze+1],ce,Ge,nt,He));Ye.geometry.push(bt)}}return Ne.transformed=!0,Ne}function Lr(Ne,ce,ye,Me,ze,Ge){return[Math.round(ye*(Ne*Me-ze)),Math.round(ye*(ce*Me-Ge))]}function Rr(Ne,ce,ye,Me,ze){for(var Ge=ce===ze.maxZoom?0:ze.tolerance/((1<<ce)*ze.extent),nt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ye,y:Me,z:ce,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},He=0;He<Ne.length;He++){nt.numFeatures++,Nt(nt,Ne[He],Ge,ze);var Ye=Ne[He].minX,tt=Ne[He].minY,yt=Ne[He].maxX,bt=Ne[He].maxY;Ye<nt.minX&&(nt.minX=Ye),tt<nt.minY&&(nt.minY=tt),yt>nt.maxX&&(nt.maxX=yt),bt>nt.maxY&&(nt.maxY=bt)}return nt}function Nt(Ne,ce,ye,Me){var ze=ce.geometry,Ge=ce.type,nt=[];if(Ge==="Point"||Ge==="MultiPoint")for(var He=0;He<ze.length;He+=3)nt.push(ze[He]),nt.push(ze[He+1]),Ne.numPoints++,Ne.numSimplified++;else if(Ge==="LineString")yn(nt,ze,Ne,ye,!1,!1);else if(Ge==="MultiLineString"||Ge==="Polygon")for(He=0;He<ze.length;He++)yn(nt,ze[He],Ne,ye,Ge==="Polygon",He===0);else if(Ge==="MultiPolygon")for(var Ye=0;Ye<ze.length;Ye++){var tt=ze[Ye];for(He=0;He<tt.length;He++)yn(nt,tt[He],Ne,ye,!0,He===0)}if(nt.length){var yt=ce.tags||null;if(Ge==="LineString"&&Me.lineMetrics){for(var bt in yt={},ce.tags)yt[bt]=ce.tags[bt];yt.mapbox_clip_start=ze.start/ze.size,yt.mapbox_clip_end=ze.end/ze.size}var gt={geometry:nt,type:Ge==="Polygon"||Ge==="MultiPolygon"?3:Ge==="LineString"||Ge==="MultiLineString"?2:1,tags:yt};ce.id!==null&&(gt.id=ce.id),Ne.features.push(gt)}}function yn(Ne,ce,ye,Me,ze,Ge){var nt=Me*Me;if(Me>0&&ce.size<(ze?nt:Me))ye.numPoints+=ce.length/3;else{for(var He=[],Ye=0;Ye<ce.length;Ye+=3)(Me===0||ce[Ye+2]>nt)&&(ye.numSimplified++,He.push(ce[Ye]),He.push(ce[Ye+1])),ye.numPoints++;ze&&function(tt,yt){for(var bt=0,gt=0,Rt=tt.length,dr=Rt-2;gt<Rt;dr=gt,gt+=2)bt+=(tt[gt]-tt[dr])*(tt[gt+1]+tt[dr+1]);if(bt>0===yt)for(gt=0,Rt=tt.length;gt<Rt/2;gt+=2){var qt=tt[gt],Kt=tt[gt+1];tt[gt]=tt[Rt-2-gt],tt[gt+1]=tt[Rt-1-gt],tt[Rt-2-gt]=qt,tt[Rt-1-gt]=Kt}}(He,Ge),Ne.push(He)}}function _n(Ne,ce){var ye=(ce=this.options=function(ze,Ge){for(var nt in Ge)ze[nt]=Ge[nt];return ze}(Object.create(this.options),ce)).debug;if(ce.maxZoom<0||ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ce.promoteId&&ce.generateId)throw new Error("promoteId and generateId cannot be used together.");var Me=function(ze,Ge){var nt=[];if(ze.type==="FeatureCollection")for(var He=0;He<ze.features.length;He++)Gt(nt,ze.features[He],Ge,He);else Gt(nt,ze.type==="Feature"?ze:{geometry:ze},Ge);return nt}(Ne,ce);this.tiles={},this.tileCoords=[],ye&&(this.stats={},this.total=0),Me=function(ze,Ge){var nt=Ge.buffer/Ge.extent,He=ze,Ye=xe(ze,1,-1-nt,nt,0,-1,2,Ge),tt=xe(ze,1,1-nt,2+nt,0,-1,2,Ge);return(Ye||tt)&&(He=xe(ze,1,-nt,1+nt,0,-1,2,Ge)||[],Ye&&(He=ut(Ye,1).concat(He)),tt&&(He=He.concat(ut(tt,-1)))),He}(Me,ce),Me.length&&this.splitTile(Me,0,0,0),ye&&Me.length}function ti(Ne,ce,ye){return 32*((1<<Ne)*ye+ce)+Ne}function dn(Ne,ce){return ce?Ne.properties[ce]:Ne.id}function Kr(Ne,ce){if(Ne==null)return!0;if(Ne.type==="Feature")return dn(Ne,ce)!=null;if(Ne.type==="FeatureCollection"){const ye=new Set;for(const Me of Ne.features){const ze=dn(Me,ce);if(ze==null||ye.has(ze))return!1;ye.add(ze)}return!0}return!1}function Xn(Ne,ce){const ye=new Map;if(Ne!=null)if(Ne.type==="Feature")ye.set(dn(Ne,ce),Ne);else for(const Me of Ne.features)ye.set(dn(Me,ce),Me);return ye}function $r(Ne,ce){const ye=Ne.tileID.canonical;if(!this._geoJSONIndex)return ce(null,null);const Me=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!Me)return ce(null,null);const ze=new class{constructor(nt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=nt.length,this._features=nt}feature(nt){return new class{constructor(He){this._feature=He,this.extent=a.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))}loadGeometry(){if(this._feature.type===1){const He=[];for(const Ye of this._feature.geometry)He.push([new a.Point(Ye[0],Ye[1])]);return He}{const He=[];for(const Ye of this._feature.geometry){const tt=[];for(const yt of Ye)tt.push(new a.Point(yt[0],yt[1]));He.push(tt)}return He}}toGeoJSON(He,Ye,tt){return T.call(this,He,Ye,tt)}}(this._features[nt])}}(Me.features);let Ge=re(ze);Ge.byteOffset===0&&Ge.byteLength===Ge.buffer.byteLength||(Ge=new Uint8Array(Ge)),ce(null,{vectorTile:ze,rawData:Ge.buffer})}_n.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_n.prototype.splitTile=function(Ne,ce,ye,Me,ze,Ge,nt){for(var He=[Ne,ce,ye,Me],Ye=this.options,tt=Ye.debug;He.length;){Me=He.pop(),ye=He.pop(),ce=He.pop(),Ne=He.pop();var yt=1<<ce,bt=ti(ce,ye,Me),gt=this.tiles[bt];if(!gt&&(tt>1,gt=this.tiles[bt]=Rr(Ne,ce,ye,Me,Ye),this.tileCoords.push({z:ce,x:ye,y:Me}),tt)){tt>1;var Rt="z"+ce;this.stats[Rt]=(this.stats[Rt]||0)+1,this.total++}if(gt.source=Ne,ze){if(ce===Ye.maxZoom||ce===ze)continue;var dr=1<<ze-ce;if(ye!==Math.floor(Ge/dr)||Me!==Math.floor(nt/dr))continue}else if(ce===Ye.indexMaxZoom||gt.numPoints<=Ye.indexMaxPoints)continue;if(gt.source=null,Ne.length!==0){tt>1;var qt,Kt,er,Yr,Hr,Wr,Dr=.5*Ye.buffer/Ye.extent,go=.5-Dr,Wt=.5+Dr,Vr=1+Dr;qt=Kt=er=Yr=null,Hr=xe(Ne,yt,ye-Dr,ye+Wt,0,gt.minX,gt.maxX,Ye),Wr=xe(Ne,yt,ye+go,ye+Vr,0,gt.minX,gt.maxX,Ye),Ne=null,Hr&&(qt=xe(Hr,yt,Me-Dr,Me+Wt,1,gt.minY,gt.maxY,Ye),Kt=xe(Hr,yt,Me+go,Me+Vr,1,gt.minY,gt.maxY,Ye),Hr=null),Wr&&(er=xe(Wr,yt,Me-Dr,Me+Wt,1,gt.minY,gt.maxY,Ye),Yr=xe(Wr,yt,Me+go,Me+Vr,1,gt.minY,gt.maxY,Ye),Wr=null),tt>1,He.push(qt||[],ce+1,2*ye,2*Me),He.push(Kt||[],ce+1,2*ye,2*Me+1),He.push(er||[],ce+1,2*ye+1,2*Me),He.push(Yr||[],ce+1,2*ye+1,2*Me+1)}}},_n.prototype.getTile=function(Ne,ce,ye){var Me=this.options,ze=Me.extent,Ge=Me.debug;if(Ne<0||Ne>24)return null;var nt=1<<Ne,He=ti(Ne,ce=(ce%nt+nt)%nt,ye);if(this.tiles[He])return $t(this.tiles[He],ze);Ge>1;for(var Ye,tt=Ne,yt=ce,bt=ye;!Ye&&tt>0;)tt--,yt=Math.floor(yt/2),bt=Math.floor(bt/2),Ye=this.tiles[ti(tt,yt,bt)];return Ye&&Ye.source?(Ge>1,Ge>1,this.splitTile(Ye.source,tt,yt,bt,Ne,ce,ye),Ge>1,this.tiles[He]?$t(this.tiles[He],ze):null):null};class Pt extends P{constructor(ce,ye,Me,ze){super(ce,ye,Me,$r),this._dataUpdateable=new Map,this.loadGeoJSON=(Ge,nt)=>{const{promoteId:He}=Ge;if(Ge.request)return a.getJSON(Ge.request,(Ye,tt,yt,bt)=>{this._dataUpdateable=Kr(tt,He)?Xn(tt,He):void 0,nt(Ye,tt,yt,bt)});if(typeof Ge.data=="string")try{const Ye=JSON.parse(Ge.data);this._dataUpdateable=Kr(Ye,He)?Xn(Ye,He):void 0,nt(null,Ye)}catch{nt(new Error(`Input data given to '${Ge.source}' is not a valid GeoJSON object.`))}else Ge.dataDiff?this._dataUpdateable?(function(Ye,tt,yt){var bt,gt,Rt,dr;if(tt.removeAll&&Ye.clear(),tt.remove)for(const qt of tt.remove)Ye.delete(qt);if(tt.add)for(const qt of tt.add){const Kt=dn(qt,yt);Kt!=null&&Ye.set(Kt,qt)}if(tt.update)for(const qt of tt.update){let Kt=Ye.get(qt.id);if(Kt==null)continue;const er=!qt.removeAllProperties&&(((bt=qt.removeProperties)===null||bt===void 0?void 0:bt.length)>0||((gt=qt.addOrUpdateProperties)===null||gt===void 0?void 0:gt.length)>0);if((qt.newGeometry||qt.removeAllProperties||er)&&(Kt={...Kt},Ye.set(qt.id,Kt),er&&(Kt.properties={...Kt.properties})),qt.newGeometry&&(Kt.geometry=qt.newGeometry),qt.removeAllProperties)Kt.properties={};else if(((Rt=qt.removeProperties)===null||Rt===void 0?void 0:Rt.length)>0)for(const Yr of qt.removeProperties)Object.prototype.hasOwnProperty.call(Kt.properties,Yr)&&delete Kt.properties[Yr];if(((dr=qt.addOrUpdateProperties)===null||dr===void 0?void 0:dr.length)>0)for(const{key:Yr,value:Hr}of qt.addOrUpdateProperties)Kt.properties[Yr]=Hr}}(this._dataUpdateable,Ge.dataDiff,He),nt(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):nt(new Error(`Cannot update existing geojson data in ${Ge.source}`)):nt(new Error(`Input data given to '${Ge.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},ze&&(this.loadGeoJSON=ze)}loadData(ce,ye){var Me;(Me=this._pendingRequest)===null||Me===void 0||Me.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ze=!!(ce&&ce.request&&ce.request.collectResourceTiming)&&new a.RequestPerformance(ce.request);this._pendingCallback=ye,this._pendingRequest=this.loadGeoJSON(ce,(Ge,nt)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ge||!nt)return ye(Ge);if(typeof nt!="object")return ye(new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`));{F(nt,!0);try{if(ce.filter){const Ye=a.createExpression(ce.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ye.result==="error")throw new Error(Ye.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));nt={type:"FeatureCollection",features:nt.features.filter(yt=>Ye.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=ce.cluster?new $e(function({superclusterOptions:Ye,clusterProperties:tt}){if(!tt||!Ye)return Ye;const yt={},bt={},gt={accumulated:null,zoom:0},Rt={properties:null},dr=Object.keys(tt);for(const qt of dr){const[Kt,er]=tt[qt],Yr=a.createExpression(er),Hr=a.createExpression(typeof Kt=="string"?[Kt,["accumulated"],["get",qt]]:Kt);yt[qt]=Yr.value,bt[qt]=Hr.value}return Ye.map=qt=>{Rt.properties=qt;const Kt={};for(const er of dr)Kt[er]=yt[er].evaluate(gt,Rt);return Kt},Ye.reduce=(qt,Kt)=>{Rt.properties=Kt;for(const er of dr)gt.accumulated=qt[er],qt[er]=bt[er].evaluate(gt,Rt)},Ye}(ce)).load(nt.features):function(Ye,tt){return new _n(Ye,tt)}(nt,ce.geojsonVtOptions)}catch(Ye){return ye(Ye)}this.loaded={};const He={};if(ze){const Ye=ze.finish();Ye&&(He.resourceTiming={},He.resourceTiming[ce.source]=JSON.parse(JSON.stringify(Ye)))}ye(null,He)}})}reloadTile(ce,ye){const Me=this.loaded;return Me&&Me[ce.uid]?super.reloadTile(ce,ye):this.loadTile(ce,ye)}removeSource(ce,ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ye()}getClusterExpansionZoom(ce,ye){try{ye(null,this._geoJSONIndex.getClusterExpansionZoom(ce.clusterId))}catch(Me){ye(Me)}}getClusterChildren(ce,ye){try{ye(null,this._geoJSONIndex.getChildren(ce.clusterId))}catch(Me){ye(Me)}}getClusterLeaves(ce,ye){try{ye(null,this._geoJSONIndex.getLeaves(ce.clusterId,ce.limit,ce.offset))}catch(Me){ye(Me)}}}class Ei{constructor(ce){this.self=ce,this.actor=new a.Actor(ce,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:P,geojson:Pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ye,Me)=>{if(this.workerSourceTypes[ye])throw new Error(`Worker source with name "${ye}" already registered.`);this.workerSourceTypes[ye]=Me},this.self.registerRTLTextPlugin=ye=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ye.applyArabicShaping,a.plugin.processBidirectionalText=ye.processBidirectionalText,a.plugin.processStyledBidirectionalText=ye.processStyledBidirectionalText}}setReferrer(ce,ye){this.referrer=ye}setImages(ce,ye,Me){this.availableImages[ce]=ye;for(const ze in this.workerSources[ce]){const Ge=this.workerSources[ce][ze];for(const nt in Ge)Ge[nt].availableImages=ye}Me()}setLayers(ce,ye,Me){this.getLayerIndex(ce).replace(ye),Me()}updateLayers(ce,ye,Me){this.getLayerIndex(ce).update(ye.layers,ye.removedIds),Me()}loadTile(ce,ye,Me){this.getWorkerSource(ce,ye.type,ye.source).loadTile(ye,Me)}loadDEMTile(ce,ye,Me){this.getDEMWorkerSource(ce,ye.source).loadTile(ye,Me)}reloadTile(ce,ye,Me){this.getWorkerSource(ce,ye.type,ye.source).reloadTile(ye,Me)}abortTile(ce,ye,Me){this.getWorkerSource(ce,ye.type,ye.source).abortTile(ye,Me)}removeTile(ce,ye,Me){this.getWorkerSource(ce,ye.type,ye.source).removeTile(ye,Me)}removeDEMTile(ce,ye){this.getDEMWorkerSource(ce,ye.source).removeTile(ye)}removeSource(ce,ye,Me){if(!this.workerSources[ce]||!this.workerSources[ce][ye.type]||!this.workerSources[ce][ye.type][ye.source])return;const ze=this.workerSources[ce][ye.type][ye.source];delete this.workerSources[ce][ye.type][ye.source],ze.removeSource!==void 0?ze.removeSource(ye,Me):Me()}loadWorkerSource(ce,ye,Me){try{this.self.importScripts(ye.url),Me()}catch(ze){Me(ze.toString())}}syncRTLPluginState(ce,ye,Me){try{a.plugin.setState(ye);const ze=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&ze!=null){this.self.importScripts(ze);const Ge=a.plugin.isParsed();Me(Ge?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ze}`),Ge)}}catch(ze){Me(ze.toString())}}getAvailableImages(ce){let ye=this.availableImages[ce];return ye||(ye=[]),ye}getLayerIndex(ce){let ye=this.layerIndexes[ce];return ye||(ye=this.layerIndexes[ce]=new d),ye}getWorkerSource(ce,ye,Me){if(this.workerSources[ce]||(this.workerSources[ce]={}),this.workerSources[ce][ye]||(this.workerSources[ce][ye]={}),!this.workerSources[ce][ye][Me]){const ze={send:(Ge,nt,He)=>{this.actor.send(Ge,nt,He,ce)}};this.workerSources[ce][ye][Me]=new this.workerSourceTypes[ye](ze,this.getLayerIndex(ce),this.getAvailableImages(ce))}return this.workerSources[ce][ye][Me]}getDEMWorkerSource(ce,ye){return this.demWorkerSources[ce]||(this.demWorkerSources[ce]={}),this.demWorkerSources[ce][ye]||(this.demWorkerSources[ce][ye]=new L),this.demWorkerSources[ce][ye]}}return a.isWorker()&&(self.worker=new Ei(self)),Ei}),o(["./shared"],function(a){var d="3.3.1";class f{static testProp(l){if(!f.docStyle)return l[0];for(let v=0;v<l.length;v++)if(l[v]in f.docStyle)return l[v];return l[0]}static create(l,v,S){const C=window.document.createElement(l);return v!==void 0&&(C.className=v),S&&S.appendChild(C),C}static createNS(l,v){return window.document.createElementNS(l,v)}static disableDrag(){f.docStyle&&f.selectProp&&(f.userSelect=f.docStyle[f.selectProp],f.docStyle[f.selectProp]="none")}static enableDrag(){f.docStyle&&f.selectProp&&(f.docStyle[f.selectProp]=f.userSelect)}static setTransform(l,v){l.style[f.transformProp]=v}static addEventListener(l,v,S,C={}){l.addEventListener(v,S,"passive"in C?C:C.capture)}static removeEventListener(l,v,S,C={}){l.removeEventListener(v,S,"passive"in C?C:C.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",f.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",f.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",f.suppressClickInternal,!0)},0)}static mousePos(l,v){const S=l.getBoundingClientRect();return new a.Point(v.clientX-S.left-l.clientLeft,v.clientY-S.top-l.clientTop)}static touchPos(l,v){const S=l.getBoundingClientRect(),C=[];for(let M=0;M<v.length;M++)C.push(new a.Point(v[M].clientX-S.left-l.clientLeft,v[M].clientY-S.top-l.clientTop));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}f.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,f.selectProp=f.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),f.transformProp=f.testProp(["transform","WebkitTransform"]);const g={supported:!1,testSupport:function(A){!P&&b&&(L?R(A):_=A)}};let _,b,P=!1,L=!1;function R(A){const l=A.createTexture();A.bindTexture(A.TEXTURE_2D,l);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,b),A.isContextLost())return;g.supported=!0}catch{}A.deleteTexture(l),P=!0}var $,F;typeof document<"u"&&(b=document.createElement("img"),b.onload=function(){_&&R(_),_=null,L=!0},b.onerror=function(){P=!0,_=null},b.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(A){let l,v,S,C;A.resetRequestQueue=()=>{l=[],v=0,S=0,C={}},A.addThrottleControl=ee=>{const se=S++;return C[se]=ee,se},A.removeThrottleControl=ee=>{delete C[ee],V()},A.getImage=(ee,se,le=!0)=>{g.supported&&(ee.headers||(ee.headers={}),ee.headers.accept="image/webp,*/*");const we={requestParameters:ee,supportImageRefresh:le,callback:se,cancelled:!1,completed:!1,cancel:()=>{we.completed||we.cancelled||(we.cancelled=!0,we.innerRequest&&(we.innerRequest.cancel(),v--),V())}};return l.push(we),V(),we};const M=ee=>{const{requestParameters:se,supportImageRefresh:le,callback:we}=ee;return a.extend(se,{type:"image"}),(le!==!1||a.isWorker()||a.getProtocolAction(se.url)||se.headers&&!Object.keys(se.headers).reduce((De,ke)=>De&&ke==="accept",!0)?a.makeRequest:X)(se,(De,ke,Be,Re)=>{z(ee,we,De,ke,Be,Re)})},z=(ee,se,le,we,De,ke)=>{le?se(le):we instanceof HTMLImageElement||a.isImageBitmap(we)?se(null,we):we&&((Be,Re)=>{typeof createImageBitmap=="function"?a.arrayBufferToImageBitmap(Be,Re):a.arrayBufferToImage(Be,Re)})(we,(Be,Re)=>{Be!=null?se(Be):Re!=null&&se(null,Re,{cacheControl:De,expires:ke})}),ee.cancelled||(ee.completed=!0,v--,V())},V=()=>{const ee=(()=>{const se=Object.keys(C);let le=!1;if(se.length>0){for(const we of se)if(le=C[we](),le)break}return le})()?a.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let se=v;se<ee&&l.length>0;se++){const le=l.shift();if(le.cancelled){se--;continue}const we=M(le);v++,le.innerRequest=we}},X=(ee,se)=>{const le=new Image,we=ee.url;let De=!1;const ke=ee.credentials;return ke&&ke==="include"?le.crossOrigin="use-credentials":(ke&&ke==="same-origin"||!a.sameOrigin(we))&&(le.crossOrigin="anonymous"),le.fetchPriority="high",le.onload=()=>{se(null,le),le.onerror=le.onload=null},le.onerror=()=>{De||se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),le.onerror=le.onload=null},le.src=we,{cancel:()=>{De=!0,le.src=""}}}}($||($={})),$.resetRequestQueue(),function(A){A.Glyphs="Glyphs",A.Image="Image",A.Source="Source",A.SpriteImage="SpriteImage",A.SpriteJSON="SpriteJSON",A.Style="Style",A.Tile="Tile",A.Unknown="Unknown"}(F||(F={}));class T{constructor(l){this._transformRequestFn=l}transformRequest(l,v){return this._transformRequestFn&&this._transformRequestFn(l,v)||{url:l}}normalizeSpriteURL(l,v,S){const C=function(M){const z=M.match(x);if(!z)throw new Error(`Unable to parse URL "${M}"`);return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}(l);return C.path+=`${v}${S}`,function(M){const z=M.params.length?`?${M.params.join("&")}`:"";return`${M.protocol}://${M.authority}${M.path}${z}`}(C)}setTransformRequest(l){this._transformRequestFn=l}}const x=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function N(A){var l=new a.ARRAY_TYPE(3);return l[0]=A[0],l[1]=A[1],l[2]=A[2],l}var B,H=function(A,l,v){return A[0]=l[0]-v[0],A[1]=l[1]-v[1],A[2]=l[2]-v[2],A};B=new a.ARRAY_TYPE(3),a.ARRAY_TYPE!=Float32Array&&(B[0]=0,B[1]=0,B[2]=0);var Z=function(A){var l=A[0],v=A[1];return l*l+v*v};function Y(A){const l=[];if(typeof A=="string")l.push({id:"default",url:A});else if(A&&A.length>0){const v=[];for(const{id:S,url:C}of A){const M=`${S}${C}`;v.indexOf(M)===-1&&(v.push(M),l.push({id:S,url:C}))}}return l}function W(A,l,v,S,C){if(S)return void A(S);if(C!==Object.values(l).length||C!==Object.values(v).length)return;const M={};for(const z in l){M[z]={};const V=a.browser.getImageCanvasContext(v[z]),X=l[z];for(const ee in X){const{width:se,height:le,x:we,y:De,sdf:ke,pixelRatio:Be,stretchX:Re,stretchY:et,content:ct}=X[ee];M[z][ee]={data:null,pixelRatio:Be,sdf:ke,stretchX:Re,stretchY:et,content:ct,spriteData:{width:se,height:le,x:we,y:De,context:V}}}}A(null,M)}(function(){var A=new a.ARRAY_TYPE(2);a.ARRAY_TYPE!=Float32Array&&(A[0]=0,A[1]=0)})();class Q{constructor(l,v,S,C){this.context=l,this.format=S,this.texture=l.gl.createTexture(),this.update(v,C)}update(l,v,S){const{width:C,height:M}=l,z=!(this.size&&this.size[0]===C&&this.size[1]===M||S),{context:V}=this,{gl:X}=V;if(this.useMipmap=!!(v&&v.useMipmap),X.bindTexture(X.TEXTURE_2D,this.texture),V.pixelStoreUnpackFlipY.set(!1),V.pixelStoreUnpack.set(1),V.pixelStoreUnpackPremultiplyAlpha.set(this.format===X.RGBA&&(!v||v.premultiply!==!1)),z)this.size=[C,M],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.isImageBitmap(l)?X.texImage2D(X.TEXTURE_2D,0,this.format,this.format,X.UNSIGNED_BYTE,l):X.texImage2D(X.TEXTURE_2D,0,this.format,C,M,0,this.format,X.UNSIGNED_BYTE,l.data);else{const{x:ee,y:se}=S||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.isImageBitmap(l)?X.texSubImage2D(X.TEXTURE_2D,0,ee,se,X.RGBA,X.UNSIGNED_BYTE,l):X.texSubImage2D(X.TEXTURE_2D,0,ee,se,C,M,X.RGBA,X.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&X.generateMipmap(X.TEXTURE_2D)}bind(l,v,S){const{context:C}=this,{gl:M}=C;M.bindTexture(M.TEXTURE_2D,this.texture),S!==M.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(S=M.LINEAR),l!==this.filter&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,l),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,S||l),this.filter=l),v!==this.wrap&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,v),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,v),this.wrap=v)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function me(A){const{userImage:l}=A;return!!(l&&l.render&&l.render())&&(A.data.replace(new Uint8Array(l.data.buffer)),!0)}class ge extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:v,callback:S}of this.requestors)this._notify(v,S);this.requestors=[]}}getImage(l){const v=this.images[l];if(v&&!v.data&&v.spriteData){const S=v.spriteData;v.data=new a.RGBAImage({width:S.width,height:S.height},S.context.getImageData(S.x,S.y,S.width,S.height).data),v.spriteData=null}return v}addImage(l,v){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,v)&&(this.images[l]=v)}_validate(l,v){let S=!0;const C=v.data||v.spriteData;return this._validateStretch(v.stretchX,C&&C.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),S=!1),this._validateStretch(v.stretchY,C&&C.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),S=!1),this._validateContent(v.content,v)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),S=!1),S}_validateStretch(l,v){if(!l)return!0;let S=0;for(const C of l){if(C[0]<S||C[1]<C[0]||v<C[1])return!1;S=C[1]}return!0}_validateContent(l,v){if(!l)return!0;if(l.length!==4)return!1;const S=v.spriteData,C=S&&S.width||v.data.width,M=S&&S.height||v.data.height;return!(l[0]<0||C<l[0]||l[1]<0||M<l[1]||l[2]<0||C<l[2]||l[3]<0||M<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,v,S=!0){const C=this.getImage(l);if(S&&(C.data.width!==v.data.width||C.data.height!==v.data.height))throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${v.data.width}x${v.data.height}).`);v.version=C.version+1,this.images[l]=v,this.updatedImages[l]=!0}removeImage(l){const v=this.images[l];delete this.images[l],delete this.patterns[l],v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,v){let S=!0;if(!this.isLoaded())for(const C of l)this.images[C]||(S=!1);this.isLoaded()||S?this._notify(l,v):this.requestors.push({ids:l,callback:v})}_notify(l,v){const S={};for(const C of l){let M=this.getImage(C);M||(this.fire(new a.Event("styleimagemissing",{id:C})),M=this.getImage(C)),M?S[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:a.warnOnce(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}v(null,S)}getPixelSize(){const{width:l,height:v}=this.atlasImage;return{width:l,height:v}}getPattern(l){const v=this.patterns[l],S=this.getImage(l);if(!S)return null;if(v&&v.position.version===S.version)return v.position;if(v)v.position.version=S.version;else{const C={w:S.data.width+2,h:S.data.height+2,x:0,y:0},M=new a.ImagePosition(C,S);this.patterns[l]={bin:C,position:M}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const v=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Q(l,this.atlasImage,v.RGBA),this.atlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const M in this.patterns)l.push(this.patterns[M].bin);const{w:v,h:S}=a.potpack(l),C=this.atlasImage;C.resize({width:v||1,height:S||1});for(const M in this.patterns){const{bin:z}=this.patterns[M],V=z.x+1,X=z.y+1,ee=this.getImage(M).data,se=ee.width,le=ee.height;a.RGBAImage.copy(ee,C,{x:0,y:0},{x:V,y:X},{width:se,height:le}),a.RGBAImage.copy(ee,C,{x:0,y:le-1},{x:V,y:X-1},{width:se,height:1}),a.RGBAImage.copy(ee,C,{x:0,y:0},{x:V,y:X+le},{width:se,height:1}),a.RGBAImage.copy(ee,C,{x:se-1,y:0},{x:V-1,y:X},{width:1,height:le}),a.RGBAImage.copy(ee,C,{x:0,y:0},{x:V+se,y:X},{width:1,height:le})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const v of l){if(this.callbackDispatchedThisFrame[v])continue;this.callbackDispatchedThisFrame[v]=!0;const S=this.getImage(v);S||a.warnOnce(`Image with ID: "${v}" was not found`),me(S)&&this.updateImage(v,S)}}}const be=1e20;function oe(A,l,v,S,C,M,z,V,X){for(let ee=l;ee<l+S;ee++)Ie(A,v*M+ee,M,C,z,V,X);for(let ee=v;ee<v+C;ee++)Ie(A,ee*M+l,1,S,z,V,X)}function Ie(A,l,v,S,C,M,z){M[0]=0,z[0]=-be,z[1]=be,C[0]=A[l];for(let V=1,X=0,ee=0;V<S;V++){C[V]=A[l+V*v];const se=V*V;do{const le=M[X];ee=(C[V]-C[le]+se-le*le)/(V-le)/2}while(ee<=z[X]&&--X>-1);X++,M[X]=V,z[X]=ee,z[X+1]=be}for(let V=0,X=0;V<S;V++){for(;z[X+1]<V;)X++;const ee=M[X],se=V-ee;A[l+V*v]=C[ee]+se*se}}class fe{constructor(l,v){this.requestManager=l,this.localIdeographFontFamily=v,this.entries={}}setURL(l){this.url=l}getGlyphs(l,v){const S=[];for(const C in l)for(const M of l[C])S.push({stack:C,id:M});a.asyncAll(S,({stack:C,id:M},z)=>{let V=this.entries[C];V||(V=this.entries[C]={glyphs:{},requests:{},ranges:{}});let X=V.glyphs[M];if(X!==void 0)return void z(null,{stack:C,id:M,glyph:X});if(X=this._tinySDF(V,C,M),X)return V.glyphs[M]=X,void z(null,{stack:C,id:M,glyph:X});const ee=Math.floor(M/256);if(256*ee>65535)return void z(new Error("glyphs > 65535 not supported"));if(V.ranges[ee])return void z(null,{stack:C,id:M,glyph:X});if(!this.url)return void z(new Error("glyphsUrl is not set"));let se=V.requests[ee];se||(se=V.requests[ee]=[],fe.loadGlyphRange(C,ee,this.url,this.requestManager,(le,we)=>{if(we){for(const De in we)this._doesCharSupportLocalGlyph(+De)||(V.glyphs[+De]=we[+De]);V.ranges[ee]=!0}for(const De of se)De(le,we);delete V.requests[ee]})),se.push((le,we)=>{le?z(le):we&&z(null,{stack:C,id:M,glyph:we[M]||null})})},(C,M)=>{if(C)v(C);else if(M){const z={};for(const{stack:V,id:X,glyph:ee}of M)(z[V]||(z[V]={}))[X]=ee&&{id:ee.id,bitmap:ee.bitmap.clone(),metrics:ee.metrics};v(null,z)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](l)||a.unicodeBlockLookup["Hangul Syllables"](l)||a.unicodeBlockLookup.Hiragana(l)||a.unicodeBlockLookup.Katakana(l))}_tinySDF(l,v,S){const C=this.localIdeographFontFamily;if(!C||!this._doesCharSupportLocalGlyph(S))return;let M=l.tinySDF;if(!M){let V="400";/bold/i.test(v)?V="900":/medium/i.test(v)?V="500":/light/i.test(v)&&(V="200"),M=l.tinySDF=new fe.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:C,fontWeight:V})}const z=M.draw(String.fromCharCode(S));return{id:S,bitmap:new a.AlphaImage({width:z.width||30,height:z.height||30},z.data),metrics:{width:z.glyphWidth||24,height:z.glyphHeight||24,left:z.glyphLeft||0,top:z.glyphTop-27||-8,advance:z.glyphAdvance||24}}}}fe.loadGlyphRange=function(A,l,v,S,C){const M=256*l,z=M+255,V=S.transformRequest(v.replace("{fontstack}",A).replace("{range}",`${M}-${z}`),F.Glyphs);a.getArrayBuffer(V,(X,ee)=>{if(X)C(X);else if(ee){const se={};for(const le of a.parseGlyphPbf(ee))se[le.id]=le;C(null,se)}})},fe.TinySDF=class{constructor({fontSize:A=24,buffer:l=3,radius:v=8,cutoff:S=.25,fontFamily:C="sans-serif",fontWeight:M="normal",fontStyle:z="normal"}={}){this.buffer=l,this.cutoff=S,this.radius=v;const V=this.size=A+4*l,X=this._createCanvas(V),ee=this.ctx=X.getContext("2d",{willReadFrequently:!0});ee.font=`${z} ${M} ${A}px ${C}`,ee.textBaseline="alphabetic",ee.textAlign="left",ee.fillStyle="black",this.gridOuter=new Float64Array(V*V),this.gridInner=new Float64Array(V*V),this.f=new Float64Array(V),this.z=new Float64Array(V+1),this.v=new Uint16Array(V)}_createCanvas(A){const l=document.createElement("canvas");return l.width=l.height=A,l}draw(A){const{width:l,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,actualBoundingBoxLeft:C,actualBoundingBoxRight:M}=this.ctx.measureText(A),z=Math.ceil(v),V=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(M-C))),X=Math.min(this.size-this.buffer,z+Math.ceil(S)),ee=V+2*this.buffer,se=X+2*this.buffer,le=Math.max(ee*se,0),we=new Uint8ClampedArray(le),De={data:we,width:ee,height:se,glyphWidth:V,glyphHeight:X,glyphTop:z,glyphLeft:0,glyphAdvance:l};if(V===0||X===0)return De;const{ctx:ke,buffer:Be,gridInner:Re,gridOuter:et}=this;ke.clearRect(Be,Be,V,X),ke.fillText(A,Be,Be+z);const ct=ke.getImageData(Be,Be,V,X);et.fill(be,0,le),Re.fill(0,0,le);for(let Ve=0;Ve<X;Ve++)for(let it=0;it<V;it++){const ht=ct.data[4*(Ve*V+it)+3]/255;if(ht===0)continue;const dt=(Ve+Be)*ee+it+Be;if(ht===1)et[dt]=0,Re[dt]=be;else{const wt=.5-ht;et[dt]=wt>0?wt*wt:0,Re[dt]=wt<0?wt*wt:0}}oe(et,0,0,ee,se,ee,this.f,this.v,this.z),oe(Re,Be,Be,V,X,ee,this.f,this.v,this.z);for(let Ve=0;Ve<le;Ve++){const it=Math.sqrt(et[Ve])-Math.sqrt(Re[Ve]);we[Ve]=Math.round(255-255*(it/this.radius+this.cutoff))}return De}};class G{constructor(){this.specification=a.v8Spec.light.position}possiblyEvaluate(l,v){return a.sphericalToCartesian(l.expression.evaluate(v))}interpolate(l,v,S){return{x:a.interpolate.number(l.x,v.x,S),y:a.interpolate.number(l.y,v.y,S),z:a.interpolate.number(l.z,v.z,S)}}}let K,re;class ie extends a.Evented{constructor(l){super(),K=K||new a.Properties({anchor:new a.DataConstantProperty(a.v8Spec.light.anchor),position:new G,color:new a.DataConstantProperty(a.v8Spec.light.color),intensity:new a.DataConstantProperty(a.v8Spec.light.intensity)}),this._transitionable=new a.Transitionable(K),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,v={}){if(!this._validate(a.validateLight,l,v))for(const S in l){const C=l[S];S.endsWith("-transition")?this._transitionable.setTransition(S.slice(0,-11),C):this._transitionable.setValue(S,C)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,v,S){return(!S||S.validate!==!1)&&a.emitValidationErrors(this,l.call(a.validateStyle,a.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:a.v8Spec})))}}class he{constructor(l,v){this.width=l,this.height=v,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,v){const S=l.join(",")+String(v);return this.dashEntry[S]||(this.dashEntry[S]=this.addDash(l,v)),this.dashEntry[S]}getDashRanges(l,v,S){const C=[];let M=l.length%2==1?-l[l.length-1]*S:0,z=l[0]*S,V=!0;C.push({left:M,right:z,isDash:V,zeroLength:l[0]===0});let X=l[0];for(let ee=1;ee<l.length;ee++){V=!V;const se=l[ee];M=X*S,X+=se,z=X*S,C.push({left:M,right:z,isDash:V,zeroLength:se===0})}return C}addRoundDash(l,v,S){const C=v/2;for(let M=-S;M<=S;M++){const z=this.width*(this.nextRow+S+M);let V=0,X=l[V];for(let ee=0;ee<this.width;ee++){ee/X.right>1&&(X=l[++V]);const se=Math.abs(ee-X.left),le=Math.abs(ee-X.right),we=Math.min(se,le);let De;const ke=M/S*(C+1);if(X.isDash){const Be=C-Math.abs(ke);De=Math.sqrt(we*we+Be*Be)}else De=C-Math.sqrt(we*we+ke*ke);this.data[z+ee]=Math.max(0,Math.min(255,De+128))}}}addRegularDash(l){for(let V=l.length-1;V>=0;--V){const X=l[V],ee=l[V+1];X.zeroLength?l.splice(V,1):ee&&ee.isDash===X.isDash&&(ee.left=X.left,l.splice(V,1))}const v=l[0],S=l[l.length-1];v.isDash===S.isDash&&(v.left=S.left-this.width,S.right=v.right+this.width);const C=this.width*this.nextRow;let M=0,z=l[M];for(let V=0;V<this.width;V++){V/z.right>1&&(z=l[++M]);const X=Math.abs(V-z.left),ee=Math.abs(V-z.right),se=Math.min(X,ee);this.data[C+V]=Math.max(0,Math.min(255,(z.isDash?se:-se)+128))}}addDash(l,v){const S=v?7:0,C=2*S+1;if(this.nextRow+C>this.height)return a.warnOnce("LineAtlas out of space"),null;let M=0;for(let V=0;V<l.length;V++)M+=l[V];if(M!==0){const V=this.width/M,X=this.getDashRanges(l,this.width,V);v?this.addRoundDash(X,V,S):this.addRegularDash(X)}const z={y:(this.nextRow+S+.5)/this.height,height:2*S/this.height,width:M};return this.nextRow+=C,this.dirty=!0,z}bind(l){const v=l.gl;this.texture?(v.bindTexture(v.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,v.texSubImage2D(v.TEXTURE_2D,0,0,0,this.width,this.height,v.ALPHA,v.UNSIGNED_BYTE,this.data))):(this.texture=v.createTexture(),v.bindTexture(v.TEXTURE_2D,this.texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texImage2D(v.TEXTURE_2D,0,v.ALPHA,this.width,this.height,0,v.ALPHA,v.UNSIGNED_BYTE,this.data))}}class ae{constructor(l,v,S){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=S;const C=this.workerPool.acquire(S);for(let M=0;M<C.length;M++){const z=new ae.Actor(C[M],v,S);z.name=`Worker ${M}`,this.actors.push(z)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,v,S){a.asyncAll(this.actors,(C,M)=>{C.send(l,v,M)},S=S||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(v=>{v.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}}function Te(A,l,v){const S=function(C,M){if(C)return v(C);if(M){const z=a.pick(a.extend(M,A),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(z.vectorLayers=M.vector_layers,z.vectorLayerIds=z.vectorLayers.map(V=>V.id)),v(null,z)}};return A.url?a.getJSON(l.transformRequest(A.url,F.Source),S):a.browser.frame(()=>S(null,A))}ae.Actor=a.Actor;class Le{constructor(l,v){l&&(v?this.setSouthWest(l).setNorthEast(v):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.LngLat?new a.LngLat(l.lng,l.lat):a.LngLat.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.LngLat?new a.LngLat(l.lng,l.lat):a.LngLat.convert(l),this}extend(l){const v=this._sw,S=this._ne;let C,M;if(l instanceof a.LngLat)C=l,M=l;else{if(!(l instanceof Le))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Le.convert(l)):this.extend(a.LngLat.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.LngLat.convert(l)):this;if(C=l._sw,M=l._ne,!C||!M)return this}return v||S?(v.lng=Math.min(C.lng,v.lng),v.lat=Math.min(C.lat,v.lat),S.lng=Math.max(M.lng,S.lng),S.lat=Math.max(M.lat,S.lat)):(this._sw=new a.LngLat(C.lng,C.lat),this._ne=new a.LngLat(M.lng,M.lat)),this}getCenter(){return new a.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new a.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:v,lat:S}=a.LngLat.convert(l);let C=this._sw.lng<=v&&v<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=v&&v>=this._ne.lng),this._sw.lat<=S&&S<=this._ne.lat&&C}static convert(l){return l instanceof Le?l:l&&new Le(l)}static fromLngLat(l,v=0){const S=360*v/40075017,C=S/Math.cos(Math.PI/180*l.lat);return new Le(new a.LngLat(l.lng-C,l.lat-S),new a.LngLat(l.lng+C,l.lat+S))}}class Xe{constructor(l,v,S){this.bounds=Le.convert(this.validateBounds(l)),this.minzoom=v||0,this.maxzoom=S||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const v=Math.pow(2,l.z),S=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*v),C=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*v),M=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*v),z=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*v);return l.x>=S&&l.x<M&&l.y>=C&&l.y<z}}class $e extends a.Evented{constructor(l,v,S,C){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Te(this._options,this.map._requestManager,(M,z)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),M?this.fire(new a.ErrorEvent(M)):z&&(a.extend(this,z),z.bounds&&(this.tileBounds=new Xe(z.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>a.extend({},this._options),this.id=l,this.dispatcher=S,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(v,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},v),this._collectResourceTiming=v.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(l,v){const S=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(S,F.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function M(z,V){return delete l.request,l.aborted?v(null):z&&z.status!==404?v(z):(V&&V.resourceTiming&&(l.resourceTiming=V.resourceTiming),this.map._refreshExpiredTiles&&V&&l.setExpiryData(V),l.loadVectorData(V,this.map.painter),v(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}C.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=v:l.request=l.actor.send("reloadTile",C,M.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",C,M.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class at extends a.Evented{constructor(l,v,S,C){super(),this.id=l,this.dispatcher=S,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},v),a.extend(this,a.pick(v,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Te(this._options,this.map._requestManager,(l,v)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new a.ErrorEvent(l)):v&&(a.extend(this,v),v.bounds&&(this.tileBounds=new Xe(v.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,v){const S=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=$.getImage(this.map._requestManager.transformRequest(S,F.Tile),(C,M,z)=>{if(delete l.request,l.aborted)l.state="unloaded",v(null);else if(C)l.state="errored",v(C);else if(M){this.map._refreshExpiredTiles&&z&&l.setExpiryData(z);const V=this.map.painter.context,X=V.gl;l.texture=this.map.painter.getTileTexture(M.width),l.texture?l.texture.update(M,{useMipmap:!0}):(l.texture=new Q(V,M,X.RGBA,{useMipmap:!0}),l.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),V.extTextureFilterAnisotropic&&X.texParameterf(X.TEXTURE_2D,V.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V.extTextureFilterAnisotropicMax)),l.state="loaded",v(null)}},this.map._refreshExpiredTiles)}abortTile(l,v){l.request&&(l.request.cancel(),delete l.request),v()}unloadTile(l,v){l.texture&&this.map.painter.saveTileTexture(l.texture),v()}hasTransition(){return!1}}class _t extends at{constructor(l,v,S,C){super(l,v,S,C),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},v),this.encoding=v.encoding||"mapbox"}loadTile(l,v){const S=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function C(M,z){M&&(l.state="errored",v(M)),z&&(l.dem=z,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded",v(null))}l.request=$.getImage(this.map._requestManager.transformRequest(S,F.Tile),(function(M,z){if(delete l.request,l.aborted)l.state="unloaded",v(null);else if(M)l.state="errored",v(M);else if(z){this.map._refreshExpiredTiles&&l.setExpiryData(z),delete z.cacheControl,delete z.expires;const V=a.isImageBitmap(z)&&(re==null&&(re=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),re)?z:a.browser.getImageData(z,1),X={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:V,encoding:this.encoding};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",X,C.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),l.neighboringTiles=this._getNeighboringTiles(l.tileID)}_getNeighboringTiles(l){const v=l.canonical,S=Math.pow(2,v.z),C=(v.x-1+S)%S,M=v.x===0?l.wrap-1:l.wrap,z=(v.x+1+S)%S,V=v.x+1===S?l.wrap+1:l.wrap,X={};return X[new a.OverscaledTileID(l.overscaledZ,M,v.z,C,v.y).key]={backfilled:!1},X[new a.OverscaledTileID(l.overscaledZ,V,v.z,z,v.y).key]={backfilled:!1},v.y>0&&(X[new a.OverscaledTileID(l.overscaledZ,M,v.z,C,v.y-1).key]={backfilled:!1},X[new a.OverscaledTileID(l.overscaledZ,l.wrap,v.z,v.x,v.y-1).key]={backfilled:!1},X[new a.OverscaledTileID(l.overscaledZ,V,v.z,z,v.y-1).key]={backfilled:!1}),v.y+1<S&&(X[new a.OverscaledTileID(l.overscaledZ,M,v.z,C,v.y+1).key]={backfilled:!1},X[new a.OverscaledTileID(l.overscaledZ,l.wrap,v.z,v.x,v.y+1).key]={backfilled:!1},X[new a.OverscaledTileID(l.overscaledZ,V,v.z,z,v.y+1).key]={backfilled:!1}),X}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class Lt extends a.Evented{constructor(l,v,S,C){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.extend({},this._options,{type:this.type,data:this._data}),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=S.getActor(),this.setEventedParent(C),this._data=v.data,this._options=a.extend({},v),this._collectResourceTiming=v.collectResourceTiming,v.maxzoom!==void 0&&(this.maxzoom=v.maxzoom),v.type&&(this.type=v.type),v.attribution&&(this.attribution=v.attribution),this.promoteId=v.promoteId;const M=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:v.cluster||!1,geojsonVtOptions:{buffer:(v.buffer!==void 0?v.buffer:128)*M,tolerance:(v.tolerance!==void 0?v.tolerance:.375)*M,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:v.lineMetrics||!1,generateId:v.generateId||!1},superclusterOptions:{maxZoom:v.clusterMaxZoom!==void 0?v.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,v.clusterMinPoints||2),extent:a.EXTENT,radius:(v.clusterRadius||50)*M,log:!1,generateId:v.generateId||!1},clusterProperties:v.clusterProperties,filter:v.filter},v.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=l.clusterRadius),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l,v){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},v),this}getClusterChildren(l,v){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},v),this}getClusterLeaves(l,v,S,C){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:v,offset:S},C),this}_updateWorkerData(l){const v=a.extend({},this.workerOptions);l?v.dataDiff=l:typeof this._data=="string"?(v.request=this.map._requestManager.transformRequest(a.browser.resolveURL(this._data),F.Source),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,v,(S,C)=>{if(this._pendingLoads--,this._removed||C&&C.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source"}));let M=null;if(C&&C.resourceTiming&&C.resourceTiming[this.id]&&(M=C.resourceTiming[this.id].slice(0)),S)return void this.fire(new a.ErrorEvent(S));const z={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&a.extend(z,{resourceTiming:M}),this.fire(new a.Event("data",{...z,sourceDataType:"metadata"})),this.fire(new a.Event("data",{...z,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(l,v){const S=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(S,C,(M,z)=>(delete l.request,l.unloadVectorData(),l.aborted?v(null):M?v(M):(l.loadVectorData(z,this.map.painter,S==="reloadTile"),v(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var pt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ot extends a.Evented{constructor(l,v,S,C){super(),this.load=(M,z)=>{this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=$.getImage(this.map._requestManager.transformRequest(this.url,F.Image),(V,X)=>{this._request=null,this._loaded=!0,V?this.fire(new a.ErrorEvent(V)):X&&(this.image=X,M&&(this.coordinates=M),z&&z(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const M=this.map.painter.context,z=M.gl;this.boundsBuffer||(this.boundsBuffer=M.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Q(M,this.image,z.RGBA),this.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE));let V=!1;for(const X in this.tiles){const ee=this.tiles[X];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture,V=!0)}V&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=l,this.dispatcher=S,this.coordinates=v.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=v}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(l){this.coordinates=l;const v=l.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(C){let M=1/0,z=1/0,V=-1/0,X=-1/0;for(const we of C)M=Math.min(M,we.x),z=Math.min(z,we.y),V=Math.max(V,we.x),X=Math.max(X,we.y);const ee=Math.max(V-M,X-z),se=Math.max(0,Math.floor(-Math.log(ee)/Math.LN2)),le=Math.pow(2,se);return new a.CanonicalTileID(se,Math.floor((M+V)/2*le),Math.floor((z+X)/2*le))}(v),this.minzoom=this.maxzoom=this.tileID.z;const S=v.map(C=>this.tileID.getTilePoint(C)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(S[0].x,S[0].y,0,0),this._boundsArray.emplaceBack(S[1].x,S[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(S[3].x,S[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(S[2].x,S[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(l,v){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},v(null)):(l.state="errored",v(null))}hasTransition(){return!1}}class vt extends Ot{constructor(l,v,S,C){super(l,v,S,C),this.load=()=>{this._loaded=!1;const M=this.options;this.urls=[];for(const z of M.urls)this.urls.push(this.map._requestManager.transformRequest(z,F.Source).url);a.getVideo(this.urls,(z,V)=>{this._loaded=!0,z?this.fire(new a.ErrorEvent(z)):V&&(this.video=V,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const M=this.map.painter.context,z=M.gl;this.boundsBuffer||(this.boundsBuffer=M.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE),z.texSubImage2D(z.TEXTURE_2D,0,0,0,z.RGBA,z.UNSIGNED_BYTE,this.video)):(this.texture=new Q(M,this.video,z.RGBA),this.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE));let V=!1;for(const X in this.tiles){const ee=this.tiles[X];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture,V=!0)}V&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=v}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const v=this.video.seekable;l<v.start(0)||l>v.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${v.start(0)} and ${v.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Ze extends Ot{constructor(l,v,S,C){super(l,v,S,C),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let M=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,M=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,M=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const z=this.map.painter.context,V=z.gl;this.boundsBuffer||(this.boundsBuffer=z.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(M||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Q(z,this.canvas,V.RGBA,{premultiply:!0});let X=!1;for(const ee in this.tiles){const se=this.tiles[ee];se.state!=="loaded"&&(se.state="loaded",se.texture=this.texture,X=!0)}X&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),v.coordinates?Array.isArray(v.coordinates)&&v.coordinates.length===4&&!v.coordinates.some(M=>!Array.isArray(M)||M.length!==2||M.some(z=>typeof z!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),v.animate&&typeof v.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),v.canvas?typeof v.canvas=="string"||v.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=v,this.animate=v.animate===void 0||v.animate}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Zt={},rr=A=>{switch(A){case"geojson":return Lt;case"image":return Ot;case"raster":return at;case"raster-dem":return _t;case"vector":return $e;case"video":return vt;case"canvas":return Ze}return Zt[A]};function Gt(A,l){const v=a.create();return a.translate(v,v,[1,1,0]),a.scale(v,v,[.5*A.width,.5*A.height,1]),a.multiply(v,v,A.calculatePosMatrix(l.toUnwrapped()))}function br(A,l,v,S,C,M){const z=function(le,we,De){if(le)for(const ke of le){const Be=we[ke];if(Be&&Be.source===De&&Be.type==="fill-extrusion")return!0}else for(const ke in we){const Be=we[ke];if(Be.source===De&&Be.type==="fill-extrusion")return!0}return!1}(C&&C.layers,l,A.id),V=M.maxPitchScaleFactor(),X=A.tilesIn(S,V,z);X.sort(un);const ee=[];for(const le of X)ee.push({wrappedTileID:le.tileID.wrapped().key,queryResults:le.tile.queryRenderedFeatures(l,v,A._state,le.queryGeometry,le.cameraQueryGeometry,le.scale,C,M,V,Gt(A.transform,le.tileID))});const se=function(le){const we={},De={};for(const ke of le){const Be=ke.queryResults,Re=ke.wrappedTileID,et=De[Re]=De[Re]||{};for(const ct in Be){const Ve=Be[ct],it=et[ct]=et[ct]||{},ht=we[ct]=we[ct]||[];for(const dt of Ve)it[dt.featureIndex]||(it[dt.featureIndex]=!0,ht.push(dt))}}return we}(ee);for(const le in se)se[le].forEach(we=>{const De=we.feature,ke=A.getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=ke});return se}function un(A,l){const v=A.tileID,S=l.tileID;return v.overscaledZ-S.overscaledZ||v.canonical.y-S.canonical.y||v.wrap-S.wrap||v.canonical.x-S.canonical.x}class ot{constructor(l,v){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=a.uniqueId(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const v=l+this.timeAdded;v<this.fadeEndTime||(this.fadeEndTime=v)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,v,S){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(C,M){const z={};if(!M)return z;for(const V of C){const X=V.layerIds.map(ee=>M.getLayer(ee)).filter(Boolean);if(X.length!==0){V.layers=X,V.stateDependentLayerIds&&(V.stateDependentLayers=V.stateDependentLayerIds.map(ee=>X.filter(se=>se.id===ee)[0]));for(const ee of X)z[ee.id]=V}}return z}(l.buckets,v.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const M=this.buckets[C];if(M instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!S)break;M.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const M=this.buckets[C];if(M instanceof a.SymbolBucket&&M.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const C in this.buckets){const M=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(C).queryRadius(M))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const S in this.buckets){const C=this.buckets[S];C.uploadPending()&&C.upload(l)}const v=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Q(l,this.imageAtlas.image,v.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Q(l,this.glyphAtlasImage,v.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,v,S,C,M,z,V,X,ee,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:M,scale:z,tileSize:this.tileSize,pixelPosMatrix:se,transform:X,params:V,queryPadding:this.queryPadding*ee},l,v,S):{}}querySourceFeatures(l,v){const S=this.latestFeatureIndex;if(!S||!S.rawTileData)return;const C=S.loadVTLayers(),M=v&&v.sourceLayer?v.sourceLayer:"",z=C._geojsonTileLayer||C[M];if(!z)return;const V=a.createFilter(v&&v.filter),{z:X,x:ee,y:se}=this.tileID.canonical,le={z:X,x:ee,y:se};for(let we=0;we<z.length;we++){const De=z.feature(we);if(V.needGeometry){const Re=a.toEvaluationFeature(De,!0);if(!V.filter(new a.EvaluationParameters(this.tileID.overscaledZ),Re,this.tileID.canonical))continue}else if(!V.filter(new a.EvaluationParameters(this.tileID.overscaledZ),De))continue;const ke=S.getId(De,M),Be=new a.GeoJSONFeature(De,X,ee,se,ke);Be.tile=le,l.push(Be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const v=this.expirationTime;if(l.cacheControl){const S=a.parseCacheControl(l.cacheControl);S["max-age"]&&(this.expirationTime=Date.now()+1e3*S["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const S=Date.now();let C=!1;if(this.expirationTime>S)C=!1;else if(v)if(this.expirationTime<v)C=!0;else{const M=this.expirationTime-v;M?this.expirationTime=S+Math.max(M,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,v){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const S=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!v.style.hasLayer(C))continue;const M=this.buckets[C],z=M.layers[0].sourceLayer||"_geojsonTileLayer",V=S[z],X=l[z];if(!V||!X||Object.keys(X).length===0)continue;M.update(X,V,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ee=v&&v.style&&v.style.getLayer(C);ee&&(this.queryPadding=Math.max(this.queryPadding,ee.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=a.browser.now()+l}setDependencies(l,v){const S={};for(const C of v)S[C]=!0;this.dependencies[l]=S}hasDependency(l,v){for(const S of l){const C=this.dependencies[S];if(C){for(const M of v)if(C[M])return!0}}return!1}}class Oe{constructor(l,v){this.max=l,this.onRemove=v,this.reset()}reset(){for(const l in this.data)for(const v of this.data[l])v.timeout&&clearTimeout(v.timeout),this.onRemove(v.value);return this.data={},this.order=[],this}add(l,v,S){const C=l.wrapped().key;this.data[C]===void 0&&(this.data[C]=[]);const M={value:v,timeout:void 0};if(S!==void 0&&(M.timeout=setTimeout(()=>{this.remove(l,M)},S)),this.data[C].push(M),this.order.push(C),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const v=this.data[l].shift();return v.timeout&&clearTimeout(v.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),v.value}getByKey(l){const v=this.data[l];return v?v[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,v){if(!this.has(l))return this;const S=l.wrapped().key,C=v===void 0?0:this.data[S].indexOf(v),M=this.data[S][C];return this.data[S].splice(C,1),M.timeout&&clearTimeout(M.timeout),this.data[S].length===0&&delete this.data[S],this.onRemove(M.value),this.order.splice(this.order.indexOf(S),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}filter(l){const v=[];for(const S in this.data)for(const C of this.data[S])l(C.value)||v.push(C);for(const S of v)this.remove(S.value.tileID,S)}}class ve{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,v,S){const C=String(v);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][C]=this.stateChanges[l][C]||{},a.extend(this.stateChanges[l][C],S),this.deletedStates[l]===null){this.deletedStates[l]={};for(const M in this.state[l])M!==C&&(this.deletedStates[l][M]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][C]===null){this.deletedStates[l][C]={};for(const M in this.state[l][C])S[M]||(this.deletedStates[l][C][M]=null)}else for(const M in S)this.deletedStates[l]&&this.deletedStates[l][C]&&this.deletedStates[l][C][M]===null&&delete this.deletedStates[l][C][M]}removeFeatureState(l,v,S){if(this.deletedStates[l]===null)return;const C=String(v);if(this.deletedStates[l]=this.deletedStates[l]||{},S&&v!==void 0)this.deletedStates[l][C]!==null&&(this.deletedStates[l][C]=this.deletedStates[l][C]||{},this.deletedStates[l][C][S]=null);else if(v!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][C])for(S in this.deletedStates[l][C]={},this.stateChanges[l][C])this.deletedStates[l][C][S]=null;else this.deletedStates[l][C]=null;else this.deletedStates[l]=null}getState(l,v){const S=String(v),C=a.extend({},(this.state[l]||{})[S],(this.stateChanges[l]||{})[S]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const M=this.deletedStates[l][v];if(M===null)return{};for(const z in M)delete C[z]}return C}initializeTileState(l,v){l.setFeatureState(this.state,v)}coalesceChanges(l,v){const S={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const M={};for(const z in this.stateChanges[C])this.state[C][z]||(this.state[C][z]={}),a.extend(this.state[C][z],this.stateChanges[C][z]),M[z]=this.state[C][z];S[C]=M}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const M={};if(this.deletedStates[C]===null)for(const z in this.state[C])M[z]={},this.state[C][z]={};else for(const z in this.deletedStates[C]){if(this.deletedStates[C][z]===null)this.state[C][z]={};else for(const V of Object.keys(this.deletedStates[C][z]))delete this.state[C][z][V];M[z]=this.state[C][z]}S[C]=S[C]||{},a.extend(S[C],M)}if(this.stateChanges={},this.deletedStates={},Object.keys(S).length!==0)for(const C in l)l[C].setFeatureState(S,v)}}class xe extends a.Evented{constructor(l,v,S){super(),this.id=l,this.dispatcher=S,this.on("data",C=>{C.dataType==="source"&&C.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&C.dataType==="source"&&C.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((C,M,z,V)=>{const X=new(rr(M.type))(C,M,z,V);if(X.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${X.id}`);return X})(l,v,S,this),this._tiles={},this._cache=new Oe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ve,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const v=this._tiles[l];if(v.state!=="loaded"&&v.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,v){return this._source.loadTile(l,v)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new a.Event("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const v in this._tiles){const S=this._tiles[v];S.upload(l),S.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(je).map(l=>l.key)}getRenderableIds(l){const v=[];for(const S in this._tiles)this._isIdRenderable(S,l)&&v.push(this._tiles[S]);return l?v.sort((S,C)=>{const M=S.tileID,z=C.tileID,V=new a.Point(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),X=new a.Point(z.canonical.x,z.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-z.overscaledZ||X.y-V.y||X.x-V.x}).map(S=>S.tileID.key):v.map(S=>S.tileID).sort(je).map(S=>S.key)}hasRenderableParent(l){const v=this.findLoadedParent(l,0);return!!v&&this._isIdRenderable(v.tileID.key)}_isIdRenderable(l,v){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(v||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,v){const S=this._tiles[l];S&&(S.state!=="loading"&&(S.state=v),this._loadTile(S,this._tileLoaded.bind(this,S,l,v)))}_tileLoaded(l,v,S,C){if(C)return l.state="errored",void(C.status!==404?this._source.fire(new a.ErrorEvent(C,{tile:l})):this.update(this.transform,this.terrain));l.timeAdded=a.browser.now(),S==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(v,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const v=this.getRenderableIds();for(let C=0;C<v.length;C++){const M=v[C];if(l.neighboringTiles&&l.neighboringTiles[M]){const z=this.getTileByID(M);S(l,z),S(z,l)}}function S(C,M){C.needsHillshadePrepare=!0,C.needsTerrainPrepare=!0;let z=M.tileID.canonical.x-C.tileID.canonical.x;const V=M.tileID.canonical.y-C.tileID.canonical.y,X=Math.pow(2,C.tileID.canonical.z),ee=M.tileID.key;z===0&&V===0||Math.abs(V)>1||(Math.abs(z)>1&&(Math.abs(z+X)===1?z+=X:Math.abs(z-X)===1&&(z-=X)),M.dem&&C.dem&&(C.dem.backfillBorder(M.dem,z,V),C.neighboringTiles&&C.neighboringTiles[ee]&&(C.neighboringTiles[ee].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,v,S,C){for(const M in this._tiles){let z=this._tiles[M];if(C[M]||!z.hasData()||z.tileID.overscaledZ<=v||z.tileID.overscaledZ>S)continue;let V=z.tileID;for(;z&&z.tileID.overscaledZ>v+1;){const ee=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[ee.key],z&&z.hasData()&&(V=ee)}let X=V;for(;X.overscaledZ>v;)if(X=X.scaledTo(X.overscaledZ-1),l[X.key]){C[V.key]=V;break}}}findLoadedParent(l,v){if(l.key in this._loadedParentTiles){const S=this._loadedParentTiles[l.key];return S&&S.tileID.overscaledZ>=v?S:null}for(let S=l.overscaledZ-1;S>=v;S--){const C=l.scaledTo(S),M=this._getLoadedTile(C);if(M)return M}}_getLoadedTile(l){const v=this._tiles[l.key];return v&&v.hasData()?v:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const v=Math.ceil(l.width/this._source.tileSize)+1,S=Math.ceil(l.height/this._source.tileSize)+1,C=Math.floor(v*S*(this._maxTileCacheZoomLevels===null?a.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),M=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(M)}handleWrapJump(l){const v=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,v){const S={};for(const C in this._tiles){const M=this._tiles[C];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+v),S[M.tileID.key]=M}this._tiles=S;for(const C in this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(const C in this._tiles)this._setTileReloadTimer(C,this._tiles[C])}}update(l,v){if(this.transform=l,this.terrain=v,!this._sourceLoaded||this._paused)return;let S;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?S=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(se=>new a.OverscaledTileID(se.canonical.z,se.wrap,se.canonical.z,se.canonical.x,se.canonical.y)):(S=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:v}),this._source.hasTile&&(S=S.filter(se=>this._source.hasTile(se)))):S=[];const C=l.coveringZoomLevel(this._source),M=Math.max(C-xe.maxOverzooming,this._source.minzoom),z=Math.max(C+xe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const se={};for(const le of S)if(le.canonical.z>this._source.minzoom){const we=le.scaledTo(le.canonical.z-1);se[we.key]=we;const De=le.scaledTo(Math.max(this._source.minzoom,Math.min(le.canonical.z,5)));se[De.key]=De}S=S.concat(Object.values(se))}const V=S.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,V&&this.fire(new a.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const X=this._updateRetainedTiles(S,C);if(Ke(this._source.type)){const se={},le={},we=Object.keys(X),De=a.browser.now();for(const ke of we){const Be=X[ke],Re=this._tiles[ke];if(!Re||Re.fadeEndTime!==0&&Re.fadeEndTime<=De)continue;const et=this.findLoadedParent(Be,M);et&&(this._addTile(et.tileID),se[et.tileID.key]=et.tileID),le[ke]=Be}this._retainLoadedChildren(le,C,z,X);for(const ke in se)X[ke]||(this._coveredTiles[ke]=!0,X[ke]=se[ke]);if(v){const ke={},Be={};for(const Re of S)this._tiles[Re.key].hasData()?ke[Re.key]=Re:Be[Re.key]=Re;for(const Re in Be){const et=Be[Re].children(this._source.maxzoom);this._tiles[et[0].key]&&this._tiles[et[1].key]&&this._tiles[et[2].key]&&this._tiles[et[3].key]&&(ke[et[0].key]=X[et[0].key]=et[0],ke[et[1].key]=X[et[1].key]=et[1],ke[et[2].key]=X[et[2].key]=et[2],ke[et[3].key]=X[et[3].key]=et[3],delete Be[Re])}for(const Re in Be){const et=this.findLoadedParent(Be[Re],this._source.minzoom);if(et){ke[et.tileID.key]=X[et.tileID.key]=et.tileID;for(const ct in ke)ke[ct].isChildOf(et.tileID)&&delete ke[ct]}}for(const Re in this._tiles)ke[Re]||(this._coveredTiles[Re]=!0)}}for(const se in X)this._tiles[se].clearFadeHold();const ee=a.keysDifference(this._tiles,X);for(const se of ee){const le=this._tiles[se];le.hasSymbolBuckets&&!le.holdingForFade()?le.setHoldDuration(this.map._fadeDuration):le.hasSymbolBuckets&&!le.symbolFadeFinished()||this._removeTile(se)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,v){const S={},C={},M=Math.max(v-xe.maxOverzooming,this._source.minzoom),z=Math.max(v+xe.maxUnderzooming,this._source.minzoom),V={};for(const X of l){const ee=this._addTile(X);S[X.key]=X,ee.hasData()||v<this._source.maxzoom&&(V[X.key]=X)}this._retainLoadedChildren(V,v,z,S);for(const X of l){let ee=this._tiles[X.key];if(ee.hasData())continue;if(v+1>this._source.maxzoom){const le=X.children(this._source.maxzoom)[0],we=this.getTile(le);if(we&&we.hasData()){S[le.key]=le;continue}}else{const le=X.children(this._source.maxzoom);if(S[le[0].key]&&S[le[1].key]&&S[le[2].key]&&S[le[3].key])continue}let se=ee.wasRequested();for(let le=X.overscaledZ-1;le>=M;--le){const we=X.scaledTo(le);if(C[we.key])break;if(C[we.key]=!0,ee=this.getTile(we),!ee&&se&&(ee=this._addTile(we)),ee){const De=ee.hasData();if((se||De)&&(S[we.key]=we),se=ee.wasRequested(),De)break}}}return S}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const v=[];let S,C=this._tiles[l].tileID;for(;C.overscaledZ>0;){if(C.key in this._loadedParentTiles){S=this._loadedParentTiles[C.key];break}v.push(C.key);const M=C.scaledTo(C.overscaledZ-1);if(S=this._getLoadedTile(M),S)break;C=M}for(const M of v)this._loadedParentTiles[M]=S}}_addTile(l){let v=this._tiles[l.key];if(v)return v;v=this._cache.getAndRemove(l),v&&(this._setTileReloadTimer(l.key,v),v.tileID=l,this._state.initializeTileState(v,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,v)));const S=v;return v||(v=new ot(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(v,this._tileLoaded.bind(this,v,l.key,v.state))),v.uses++,this._tiles[l.key]=v,S||this._source.fire(new a.Event("dataloading",{tile:v,coord:v.tileID,dataType:"source"})),v}_setTileReloadTimer(l,v){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const S=v.getExpiryTimeout();S&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},S))}_removeTile(l){const v=this._tiles[l];v&&(v.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),v.uses>0||(v.hasData()&&v.state!=="reloading"?this._cache.add(v.tileID,v,v.getExpiryTimeout()):(v.aborted=!0,this._abortTile(v),this._unloadTile(v))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,v,S){const C=[],M=this.transform;if(!M)return C;const z=S?M.getCameraQueryGeometry(l):l,V=l.map(ke=>M.pointCoordinate(ke,this.terrain)),X=z.map(ke=>M.pointCoordinate(ke,this.terrain)),ee=this.getIds();let se=1/0,le=1/0,we=-1/0,De=-1/0;for(const ke of X)se=Math.min(se,ke.x),le=Math.min(le,ke.y),we=Math.max(we,ke.x),De=Math.max(De,ke.y);for(let ke=0;ke<ee.length;ke++){const Be=this._tiles[ee[ke]];if(Be.holdingForFade())continue;const Re=Be.tileID,et=Math.pow(2,M.zoom-Be.tileID.overscaledZ),ct=v*Be.queryPadding*a.EXTENT/Be.tileSize/et,Ve=[Re.getTilePoint(new a.MercatorCoordinate(se,le)),Re.getTilePoint(new a.MercatorCoordinate(we,De))];if(Ve[0].x-ct<a.EXTENT&&Ve[0].y-ct<a.EXTENT&&Ve[1].x+ct>=0&&Ve[1].y+ct>=0){const it=V.map(dt=>Re.getTilePoint(dt)),ht=X.map(dt=>Re.getTilePoint(dt));C.push({tile:Be,tileID:Re,queryGeometry:it,cameraQueryGeometry:ht,scale:et})}}return C}getVisibleCoordinates(l){const v=this.getRenderableIds(l).map(S=>this._tiles[S].tileID);for(const S of v)S.posMatrix=this.transform.calculatePosMatrix(S.toUnwrapped());return v}hasTransition(){if(this._source.hasTransition())return!0;if(Ke(this._source.type)){const l=a.browser.now();for(const v in this._tiles)if(this._tiles[v].fadeEndTime>=l)return!0}return!1}setFeatureState(l,v,S){this._state.updateState(l=l||"_geojsonTileLayer",v,S)}removeFeatureState(l,v,S){this._state.removeFeatureState(l=l||"_geojsonTileLayer",v,S)}getFeatureState(l,v){return this._state.getState(l=l||"_geojsonTileLayer",v)}setDependencies(l,v,S){const C=this._tiles[l];C&&C.setDependencies(v,S)}reloadTilesForDependencies(l,v){for(const S in this._tiles)this._tiles[S].hasDependency(l,v)&&this._reloadTile(S,"reloading");this._cache.filter(S=>!S.hasDependency(l,v))}}function je(A,l){const v=Math.abs(2*A.wrap)-+(A.wrap<0),S=Math.abs(2*l.wrap)-+(l.wrap<0);return A.overscaledZ-l.overscaledZ||S-v||l.canonical.y-A.canonical.y||l.canonical.x-A.canonical.x}function Ke(A){return A==="raster"||A==="image"||A==="video"}xe.maxOverzooming=10,xe.maxUnderzooming=3;const qe="mapboxgl_preloaded_worker_pool";class mt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<mt.workerCount;)this.workers.push(new Worker(a.config.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(v=>{v.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qe]}numActive(){return Object.keys(this.active).length}}const rt=Math.floor(a.browser.hardwareConcurrency/2);let Ht;function lr(){return Ht||(Ht=new mt),Ht}mt.workerCount=a.isSafari(globalThis)?Math.max(Math.min(rt,3),1):1;class ut{constructor(l,v){this.reset(l,v)}reset(l,v){this.points=l||[],this._distances=[0];for(let S=1;S<this.points.length;S++)this._distances[S]=this._distances[S-1]+this.points[S].dist(this.points[S-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(v||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.clamp(l,0,1);let v=1,S=this._distances[v];const C=l*this.paddedLength+this.padding;for(;S<C&&v<this._distances.length;)S=this._distances[++v];const M=v-1,z=this._distances[M],V=S-z,X=V>0?(C-z)/V:0;return this.points[M].mult(1-X).add(this.points[v].mult(X))}}function kt(A,l){let v=!0;return A==="always"||A!=="never"&&l!=="never"||(v=!1),v}class $t{constructor(l,v,S){const C=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(l/S),this.yCellCount=Math.ceil(v/S);for(let z=0;z<this.xCellCount*this.yCellCount;z++)C.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=v,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/v,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,v,S,C,M){this._forEachCell(v,S,C,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(v),this.bboxes.push(S),this.bboxes.push(C),this.bboxes.push(M)}insertCircle(l,v,S,C){this._forEachCell(v-C,S-C,v+C,S+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(v),this.circles.push(S),this.circles.push(C)}_insertBoxCell(l,v,S,C,M,z){this.boxCells[M].push(z)}_insertCircleCell(l,v,S,C,M,z){this.circleCells[M].push(z)}_query(l,v,S,C,M,z,V){if(S<0||l>this.width||C<0||v>this.height)return[];const X=[];if(l<=0&&v<=0&&this.width<=S&&this.height<=C){if(M)return[{key:null,x1:l,y1:v,x2:S,y2:C}];for(let ee=0;ee<this.boxKeys.length;ee++)X.push({key:this.boxKeys[ee],x1:this.bboxes[4*ee],y1:this.bboxes[4*ee+1],x2:this.bboxes[4*ee+2],y2:this.bboxes[4*ee+3]});for(let ee=0;ee<this.circleKeys.length;ee++){const se=this.circles[3*ee],le=this.circles[3*ee+1],we=this.circles[3*ee+2];X.push({key:this.circleKeys[ee],x1:se-we,y1:le-we,x2:se+we,y2:le+we})}}else this._forEachCell(l,v,S,C,this._queryCell,X,{hitTest:M,overlapMode:z,seenUids:{box:{},circle:{}}},V);return X}query(l,v,S,C){return this._query(l,v,S,C,!1,null)}hitTest(l,v,S,C,M,z){return this._query(l,v,S,C,!0,M,z).length>0}hitTestCircle(l,v,S,C,M){const z=l-S,V=l+S,X=v-S,ee=v+S;if(V<0||z>this.width||ee<0||X>this.height)return!1;const se=[];return this._forEachCell(z,X,V,ee,this._queryCellCircle,se,{hitTest:!0,overlapMode:C,circle:{x:l,y:v,radius:S},seenUids:{box:{},circle:{}}},M),se.length>0}_queryCell(l,v,S,C,M,z,V,X){const{seenUids:ee,hitTest:se,overlapMode:le}=V,we=this.boxCells[M];if(we!==null){const ke=this.bboxes;for(const Be of we)if(!ee.box[Be]){ee.box[Be]=!0;const Re=4*Be,et=this.boxKeys[Be];if(l<=ke[Re+2]&&v<=ke[Re+3]&&S>=ke[Re+0]&&C>=ke[Re+1]&&(!X||X(et))&&(!se||!kt(le,et.overlapMode))&&(z.push({key:et,x1:ke[Re],y1:ke[Re+1],x2:ke[Re+2],y2:ke[Re+3]}),se))return!0}}const De=this.circleCells[M];if(De!==null){const ke=this.circles;for(const Be of De)if(!ee.circle[Be]){ee.circle[Be]=!0;const Re=3*Be,et=this.circleKeys[Be];if(this._circleAndRectCollide(ke[Re],ke[Re+1],ke[Re+2],l,v,S,C)&&(!X||X(et))&&(!se||!kt(le,et.overlapMode))){const ct=ke[Re],Ve=ke[Re+1],it=ke[Re+2];if(z.push({key:et,x1:ct-it,y1:Ve-it,x2:ct+it,y2:Ve+it}),se)return!0}}}return!1}_queryCellCircle(l,v,S,C,M,z,V,X){const{circle:ee,seenUids:se,overlapMode:le}=V,we=this.boxCells[M];if(we!==null){const ke=this.bboxes;for(const Be of we)if(!se.box[Be]){se.box[Be]=!0;const Re=4*Be,et=this.boxKeys[Be];if(this._circleAndRectCollide(ee.x,ee.y,ee.radius,ke[Re+0],ke[Re+1],ke[Re+2],ke[Re+3])&&(!X||X(et))&&!kt(le,et.overlapMode))return z.push(!0),!0}}const De=this.circleCells[M];if(De!==null){const ke=this.circles;for(const Be of De)if(!se.circle[Be]){se.circle[Be]=!0;const Re=3*Be,et=this.circleKeys[Be];if(this._circlesCollide(ke[Re],ke[Re+1],ke[Re+2],ee.x,ee.y,ee.radius)&&(!X||X(et))&&!kt(le,et.overlapMode))return z.push(!0),!0}}}_forEachCell(l,v,S,C,M,z,V,X){const ee=this._convertToXCellCoord(l),se=this._convertToYCellCoord(v),le=this._convertToXCellCoord(S),we=this._convertToYCellCoord(C);for(let De=ee;De<=le;De++)for(let ke=se;ke<=we;ke++)if(M.call(this,l,v,S,C,this.xCellCount*ke+De,z,V,X))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,v,S,C,M,z){const V=C-l,X=M-v,ee=S+z;return ee*ee>V*V+X*X}_circleAndRectCollide(l,v,S,C,M,z,V){const X=(z-C)/2,ee=Math.abs(l-(C+X));if(ee>X+S)return!1;const se=(V-M)/2,le=Math.abs(v-(M+se));if(le>se+S)return!1;if(ee<=X||le<=se)return!0;const we=ee-X,De=le-se;return we*we+De*De<=S*S}}function Lr(A,l,v,S,C){const M=a.create();return l?(a.scale(M,M,[1/C,1/C,1]),v||a.rotateZ(M,M,S.angle)):a.multiply(M,S.labelPlaneMatrix,A),M}function Rr(A,l,v,S,C){if(l){const M=a.clone(A);return a.scale(M,M,[C,C,1]),v||a.rotateZ(M,M,-S.angle),M}return S.glCoordMatrix}function Nt(A,l,v){let S;v?(S=[A.x,A.y,v(A.x,A.y),1],a.transformMat4(S,S,l)):(S=[A.x,A.y,0,1],ze(S,S,l));const C=S[3];return{point:new a.Point(S[0]/C,S[1]/C),signedDistanceFromCamera:C}}function yn(A,l){return .5+A/l*.5}function _n(A,l){const v=A[0]/A[3],S=A[1]/A[3];return v>=-l[0]&&v<=l[0]&&S>=-l[1]&&S<=l[1]}function ti(A,l,v,S,C,M,z,V,X,ee){const se=S?A.textSizeData:A.iconSizeData,le=a.evaluateSizeForZoom(se,v.transform.zoom),we=[256/v.width*2+1,256/v.height*2+1],De=S?A.text.dynamicLayoutVertexArray:A.icon.dynamicLayoutVertexArray;De.clear();const ke=A.lineVertexArray,Be=S?A.text.placedSymbolArray:A.icon.placedSymbolArray,Re=v.transform.width/v.transform.height;let et=!1;for(let ct=0;ct<Be.length;ct++){const Ve=Be.get(ct);if(Ve.hidden||Ve.writingMode===a.WritingMode.vertical&&!et){Me(Ve.numGlyphs,De);continue}let it;if(et=!1,ee?(it=[Ve.anchorX,Ve.anchorY,ee(Ve.anchorX,Ve.anchorY),1],a.transformMat4(it,it,l)):(it=[Ve.anchorX,Ve.anchorY,0,1],ze(it,it,l)),!_n(it,we)){Me(Ve.numGlyphs,De);continue}const ht=yn(v.transform.cameraToCenterDistance,it[3]),dt=a.evaluateSizeForFeature(se,le,Ve),wt=z?dt/ht:dt*ht,At=new a.Point(Ve.anchorX,Ve.anchorY),St=Nt(At,C,ee).point,Dt={projections:{},offsets:{}},pr=Xn(Ve,wt,!1,V,l,C,M,A.glyphOffsetArray,ke,De,St,At,Dt,Re,X,ee);et=pr.useVertical,(pr.notEnoughRoom||et||pr.needsFlipping&&Xn(Ve,wt,!0,V,l,C,M,A.glyphOffsetArray,ke,De,St,At,Dt,Re,X,ee).notEnoughRoom)&&Me(Ve.numGlyphs,De)}S?A.text.dynamicLayoutVertexBuffer.updateData(De):A.icon.dynamicLayoutVertexBuffer.updateData(De)}function dn(A,l,v,S,C,M,z,V,X,ee,se,le,we){const De=V.glyphStartIndex+V.numGlyphs,ke=V.lineStartIndex,Be=V.lineStartIndex+V.lineLength,Re=l.getoffsetX(V.glyphStartIndex),et=l.getoffsetX(De-1),ct=ce(A*Re,v,S,C,M,z,V.segment,ke,Be,X,ee,se,le,we);if(!ct)return null;const Ve=ce(A*et,v,S,C,M,z,V.segment,ke,Be,X,ee,se,le,we);return Ve?{first:ct,last:Ve}:null}function Kr(A,l,v,S){return A===a.WritingMode.horizontal&&Math.abs(v.y-l.y)>Math.abs(v.x-l.x)*S?{useVertical:!0}:(A===a.WritingMode.vertical?l.y<v.y:l.x>v.x)?{needsFlipping:!0}:null}function Xn(A,l,v,S,C,M,z,V,X,ee,se,le,we,De,ke,Be){const Re=l/24,et=A.lineOffsetX*Re,ct=A.lineOffsetY*Re;let Ve;if(A.numGlyphs>1){const it=A.glyphStartIndex+A.numGlyphs,ht=A.lineStartIndex,dt=A.lineStartIndex+A.lineLength,wt=dn(Re,V,et,ct,v,se,le,A,X,M,we,ke,Be);if(!wt)return{notEnoughRoom:!0};const At=Nt(wt.first.point,z,Be).point,St=Nt(wt.last.point,z,Be).point;if(S&&!v){const Dt=Kr(A.writingMode,At,St,De);if(Dt)return Dt}Ve=[wt.first];for(let Dt=A.glyphStartIndex+1;Dt<it-1;Dt++)Ve.push(ce(Re*V.getoffsetX(Dt),et,ct,v,se,le,A.segment,ht,dt,X,M,we,ke,Be));Ve.push(wt.last)}else{if(S&&!v){const ht=Nt(le,C,Be).point,dt=A.lineStartIndex+A.segment+1,wt=new a.Point(X.getx(dt),X.gety(dt)),At=Nt(wt,C,Be),St=At.signedDistanceFromCamera>0?At.point:$r(le,wt,ht,1,C,Be),Dt=Kr(A.writingMode,ht,St,De);if(Dt)return Dt}const it=ce(Re*V.getoffsetX(A.glyphStartIndex),et,ct,v,se,le,A.segment,A.lineStartIndex,A.lineStartIndex+A.lineLength,X,M,we,ke,Be);if(!it)return{notEnoughRoom:!0};Ve=[it]}for(const it of Ve)a.addDynamicAttributes(ee,it.point,it.angle);return{}}function $r(A,l,v,S,C,M){const z=Nt(A.add(A.sub(l)._unit()),C,M).point,V=v.sub(z);return v.add(V._mult(S/V.mag()))}function Pt(A,l){const{projectionCache:v,lineVertexArray:S,labelPlaneMatrix:C,tileAnchorPoint:M,distanceFromAnchor:z,getElevation:V,previousVertex:X,direction:ee,absOffsetX:se}=l;if(v.projections[A])return v.projections[A];const le=new a.Point(S.getx(A),S.gety(A)),we=Nt(le,C,V);if(we.signedDistanceFromCamera>0)return v.projections[A]=we.point,we.point;const De=A-ee;return $r(z===0?M:new a.Point(S.getx(De),S.gety(De)),le,X,se-z+1,C,V)}function Ei(A,l,v){return A._unit()._perp()._mult(l*v)}function Ne(A,l,v,S,C,M,z,V){const{projectionCache:X,direction:ee}=V;if(X.offsets[A])return X.offsets[A];const se=v.add(l);if(A+ee<S||A+ee>=C)return X.offsets[A]=se,se;const le=Pt(A+ee,V),we=Ei(le.sub(v),z,ee),De=v.add(we),ke=le.add(we);return X.offsets[A]=a.findLineIntersection(M,se,De,ke)||se,X.offsets[A]}function ce(A,l,v,S,C,M,z,V,X,ee,se,le,we,De){const ke=S?A-l:A+l;let Be=ke>0?1:-1,Re=0;S&&(Be*=-1,Re=Math.PI),Be<0&&(Re+=Math.PI);let et,ct,Ve=Be>0?V+z:V+z+1,it=C,ht=C,dt=0,wt=0;const At=Math.abs(ke),St=[];let Dt;for(;dt+wt<=At;){if(Ve+=Be,Ve<V||Ve>=X)return null;dt+=wt,ht=it,ct=et;const jt={projectionCache:le,lineVertexArray:ee,labelPlaneMatrix:se,tileAnchorPoint:M,distanceFromAnchor:dt,getElevation:De,previousVertex:ht,direction:Be,absOffsetX:At};if(it=Pt(Ve,jt),v===0)St.push(ht),Dt=it.sub(ht);else{let xr;const fr=it.sub(ht);xr=fr.mag()===0?Ei(Pt(Ve+Be,jt).sub(it),v,Be):Ei(fr,v,Be),ct||(ct=ht.add(xr)),et=Ne(Ve,xr,it,V,X,ct,v,jt),St.push(ct),Dt=et.sub(ct)}wt=Dt.mag()}const pr=Dt._mult((At-dt)/wt)._add(ct||ht),cn=Re+Math.atan2(it.y-ht.y,it.x-ht.x);return St.push(pr),{point:pr,angle:we?cn:0,path:St}}const ye=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Me(A,l){for(let v=0;v<A;v++){const S=l.length;l.resize(S+4),l.float32.set(ye,3*S)}}function ze(A,l,v){const S=l[0],C=l[1];return A[0]=v[0]*S+v[4]*C+v[12],A[1]=v[1]*S+v[5]*C+v[13],A[3]=v[3]*S+v[7]*C+v[15],A}const Ge=100;class nt{constructor(l,v=new $t(l.width+200,l.height+200,25),S=new $t(l.width+200,l.height+200,25)){this.transform=l,this.grid=v,this.ignoredGrid=S,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Ge,this.screenBottomBoundary=l.height+Ge,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,v,S,C,M,z){const V=this.projectAndGetPerspectiveRatio(C,l.anchorPointX,l.anchorPointY,z),X=S*V.perspectiveRatio,ee=l.x1*X+V.point.x,se=l.y1*X+V.point.y,le=l.x2*X+V.point.x,we=l.y2*X+V.point.y;return!this.isInsideGrid(ee,se,le,we)||v!=="always"&&this.grid.hitTest(ee,se,le,we,v,M)||V.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ee,se,le,we],offscreen:this.isOffscreen(ee,se,le,we)}}placeCollisionCircles(l,v,S,C,M,z,V,X,ee,se,le,we,De,ke){const Be=[],Re=new a.Point(v.anchorX,v.anchorY),et=Nt(Re,z,ke),ct=yn(this.transform.cameraToCenterDistance,et.signedDistanceFromCamera),Ve=(se?M/ct:M*ct)/a.ONE_EM,it=Nt(Re,V,ke).point,ht=dn(Ve,C,v.lineOffsetX*Ve,v.lineOffsetY*Ve,!1,it,Re,v,S,V,{projections:{},offsets:{}},!1,ke);let dt=!1,wt=!1,At=!0;if(ht){const St=.5*we*ct+De,Dt=new a.Point(-100,-100),pr=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),cn=new ut,jt=ht.first,xr=ht.last;let fr=[];for(let Sr=jt.path.length-1;Sr>=1;Sr--)fr.push(jt.path[Sr]);for(let Sr=1;Sr<xr.path.length;Sr++)fr.push(xr.path[Sr]);const Ui=2.5*St;if(X){const Sr=fr.map(hn=>Nt(hn,X,ke));fr=Sr.some(hn=>hn.signedDistanceFromCamera<=0)?[]:Sr.map(hn=>hn.point)}let fn=[];if(fr.length>0){const Sr=fr[0].clone(),hn=fr[0].clone();for(let Qi=1;Qi<fr.length;Qi++)Sr.x=Math.min(Sr.x,fr[Qi].x),Sr.y=Math.min(Sr.y,fr[Qi].y),hn.x=Math.max(hn.x,fr[Qi].x),hn.y=Math.max(hn.y,fr[Qi].y);fn=Sr.x>=Dt.x&&hn.x<=pr.x&&Sr.y>=Dt.y&&hn.y<=pr.y?[fr]:hn.x<Dt.x||Sr.x>pr.x||hn.y<Dt.y||Sr.y>pr.y?[]:a.clipLine([fr],Dt.x,Dt.y,pr.x,pr.y)}for(const Sr of fn){cn.reset(Sr,.25*St);let hn=0;hn=cn.length<=.5*St?1:Math.ceil(cn.paddedLength/Ui)+1;for(let Qi=0;Qi<hn;Qi++){const gi=Qi/Math.max(hn-1,1),hu=cn.lerp(gi),Da=hu.x+Ge,Eo=hu.y+Ge;Be.push(Da,Eo,St,0);const zs=Da-St,Vl=Eo-St,dl=Da+St,Gl=Eo+St;if(At=At&&this.isOffscreen(zs,Vl,dl,Gl),wt=wt||this.isInsideGrid(zs,Vl,dl,Gl),l!=="always"&&this.grid.hitTestCircle(Da,Eo,St,l,le)&&(dt=!0,!ee))return{circles:[],offscreen:!1,collisionDetected:dt}}}}return{circles:!ee&&dt||!wt||ct<this.perspectiveRatioCutoff?[]:Be,offscreen:At,collisionDetected:dt}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const v=[];let S=1/0,C=1/0,M=-1/0,z=-1/0;for(const se of l){const le=new a.Point(se.x+Ge,se.y+Ge);S=Math.min(S,le.x),C=Math.min(C,le.y),M=Math.max(M,le.x),z=Math.max(z,le.y),v.push(le)}const V=this.grid.query(S,C,M,z).concat(this.ignoredGrid.query(S,C,M,z)),X={},ee={};for(const se of V){const le=se.key;if(X[le.bucketInstanceId]===void 0&&(X[le.bucketInstanceId]={}),X[le.bucketInstanceId][le.featureIndex])continue;const we=[new a.Point(se.x1,se.y1),new a.Point(se.x2,se.y1),new a.Point(se.x2,se.y2),new a.Point(se.x1,se.y2)];a.polygonIntersectsPolygon(v,we)&&(X[le.bucketInstanceId][le.featureIndex]=!0,ee[le.bucketInstanceId]===void 0&&(ee[le.bucketInstanceId]=[]),ee[le.bucketInstanceId].push(le.featureIndex))}return ee}insertCollisionBox(l,v,S,C,M,z){(S?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:M,collisionGroupID:z,overlapMode:v},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,v,S,C,M,z){const V=S?this.ignoredGrid:this.grid,X={bucketInstanceId:C,featureIndex:M,collisionGroupID:z,overlapMode:v};for(let ee=0;ee<l.length;ee+=4)V.insertCircle(X,l[ee],l[ee+1],l[ee+2])}projectAndGetPerspectiveRatio(l,v,S,C){let M;return C?(M=[v,S,C(v,S),1],a.transformMat4(M,M,l)):(M=[v,S,0,1],ze(M,M,l)),{point:new a.Point((M[0]/M[3]+1)/2*this.transform.width+Ge,(-M[1]/M[3]+1)/2*this.transform.height+Ge),perspectiveRatio:.5+this.transform.cameraToCenterDistance/M[3]*.5}}isOffscreen(l,v,S,C){return S<Ge||l>=this.screenRightBoundary||C<Ge||v>this.screenBottomBoundary}isInsideGrid(l,v,S,C){return S>=0&&l<this.gridRightBoundary&&C>=0&&v<this.gridBottomBoundary}getViewportMatrix(){const l=a.identity([]);return a.translate(l,l,[-100,-100,0]),l}}function He(A,l,v){return l*(a.EXTENT/(A.tileSize*Math.pow(2,v-A.tileID.overscaledZ)))}class Ye{constructor(l,v,S,C){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?v:-v))):C&&S?1:0,this.placed=S}isHidden(){return this.opacity===0&&!this.placed}}class tt{constructor(l,v,S,C,M){this.text=new Ye(l?l.text:null,v,S,M),this.icon=new Ye(l?l.icon:null,v,C,M)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yt{constructor(l,v,S){this.text=l,this.icon=v,this.skipFade=S}}class bt{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class gt{constructor(l,v,S,C,M){this.bucketInstanceId=l,this.featureIndex=v,this.sourceLayerIndex=S,this.bucketIndex=C,this.tileID=M}}class Rt{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const v=++this.maxGroupID;this.collisionGroups[l]={ID:v,predicate:S=>S.collisionGroupID===v}}return this.collisionGroups[l]}}function dr(A,l,v,S,C){const{horizontalAlign:M,verticalAlign:z}=a.getAnchorAlignment(A);return new a.Point(-(M-.5)*l+S[0]*C,-(z-.5)*v+S[1]*C)}function qt(A,l,v,S,C,M){const{x1:z,x2:V,y1:X,y2:ee,anchorPointX:se,anchorPointY:le}=A,we=new a.Point(l,v);return S&&we._rotate(C?M:-M),{x1:z+we.x,y1:X+we.y,x2:V+we.x,y2:ee+we.y,anchorPointX:se,anchorPointY:le}}class Kt{constructor(l,v,S,C,M){this.transform=l.clone(),this.terrain=v,this.collisionIndex=new nt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new Rt(C),this.collisionCircleArrays={},this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,v,S,C){const M=S.getBucket(v),z=S.latestFeatureIndex;if(!M||!z||v.id!==M.layerIds[0])return;const V=S.collisionBoxArray,X=M.layers[0].layout,ee=Math.pow(2,this.transform.zoom-S.tileID.overscaledZ),se=S.tileSize/a.EXTENT,le=this.transform.calculatePosMatrix(S.tileID.toUnwrapped()),we=X.get("text-pitch-alignment")==="map",De=X.get("text-rotation-alignment")==="map",ke=He(S,1,this.transform.zoom),Be=Lr(le,we,De,this.transform,ke);let Re=null;if(we){const ct=Rr(le,we,De,this.transform,ke);Re=a.multiply([],this.transform.labelPlaneMatrix,ct)}this.retainedQueryData[M.bucketInstanceId]=new gt(M.bucketInstanceId,z,M.sourceLayerIndex,M.index,S.tileID);const et={bucket:M,layout:X,posMatrix:le,textLabelPlaneMatrix:Be,labelToScreenMatrix:Re,scale:ee,textPixelRatio:se,holdingForFade:S.holdingForFade(),collisionBoxArray:V,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(C)for(const ct of M.sortKeyRanges){const{sortKey:Ve,symbolInstanceStart:it,symbolInstanceEnd:ht}=ct;l.push({sortKey:Ve,symbolInstanceStart:it,symbolInstanceEnd:ht,parameters:et})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:et})}attemptAnchorPlacement(l,v,S,C,M,z,V,X,ee,se,le,we,De,ke,Be,Re){const et=a.TextAnchorEnum[l.textAnchor],ct=[l.textOffset0,l.textOffset1],Ve=dr(et,S,C,ct,M),it=this.collisionIndex.placeCollisionBox(qt(v,Ve.x,Ve.y,z,V,this.transform.angle),le,X,ee,se.predicate,Re);if((!Be||this.collisionIndex.placeCollisionBox(qt(Be,Ve.x,Ve.y,z,V,this.transform.angle),le,X,ee,se.predicate,Re).box.length!==0)&&it.box.length>0){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:ct,width:S,height:C,anchor:et,textBoxScale:M,prevAnchor:ht},this.markUsedJustification(De,et,we,ke),De.allowVerticalPlacement&&(this.markUsedOrientation(De,ke,we),this.placedOrientations[we.crossTileID]=ke),{shift:Ve,placedGlyphBoxes:it}}}placeLayerBucketPart(l,v,S){const{bucket:C,layout:M,posMatrix:z,textLabelPlaneMatrix:V,labelToScreenMatrix:X,textPixelRatio:ee,holdingForFade:se,collisionBoxArray:le,partiallyEvaluatedTextSize:we,collisionGroup:De}=l.parameters,ke=M.get("text-optional"),Be=M.get("icon-optional"),Re=a.getOverlapMode(M,"text-overlap","text-allow-overlap"),et=Re==="always",ct=a.getOverlapMode(M,"icon-overlap","icon-allow-overlap"),Ve=ct==="always",it=M.get("text-rotation-alignment")==="map",ht=M.get("text-pitch-alignment")==="map",dt=M.get("icon-text-fit")!=="none",wt=M.get("symbol-z-order")==="viewport-y",At=et&&(Ve||!C.hasIconData()||Be),St=Ve&&(et||!C.hasTextData()||ke);!C.collisionArrays&&le&&C.deserializeCollisionBoxes(le);const Dt=this.retainedQueryData[C.bucketInstanceId].tileID,pr=this.terrain?(jt,xr)=>this.terrain.getElevation(Dt,jt,xr):null,cn=(jt,xr)=>{var fr,Ui;if(v[jt.crossTileID])return;if(se)return void(this.placements[jt.crossTileID]=new yt(!1,!1,!1));let fn=!1,Sr=!1,hn=!0,Qi=null,gi={box:null,offscreen:null},hu={box:null,offscreen:null},Da=null,Eo=null,zs=null,Vl=0,dl=0,Gl=0;xr.textFeatureIndex?Vl=xr.textFeatureIndex:jt.useRuntimeCollisionCircles&&(Vl=jt.featureIndex),xr.verticalTextFeatureIndex&&(dl=xr.verticalTextFeatureIndex);const Sh=xr.textBox;if(Sh){const Ro=aa=>{let qo=a.WritingMode.horizontal;if(C.allowVerticalPlacement&&!aa&&this.prevPlacement){const Ka=this.prevPlacement.placedOrientations[jt.crossTileID];Ka&&(this.placedOrientations[jt.crossTileID]=Ka,qo=Ka,this.markUsedOrientation(C,qo,jt))}return qo},oa=(aa,qo)=>{if(C.allowVerticalPlacement&&jt.numVerticalGlyphVertices>0&&xr.verticalTextBox){for(const Ka of C.writingModes)if(Ka===a.WritingMode.vertical?(gi=qo(),hu=gi):gi=aa(),gi&&gi.box&&gi.box.length)break}else gi=aa()},Za=jt.textAnchorOffsetStartIndex,Ph=jt.textAnchorOffsetEndIndex;if(Ph===Za){const aa=(qo,Ka)=>{const eo=this.collisionIndex.placeCollisionBox(qo,Re,ee,z,De.predicate,pr);return eo&&eo.box&&eo.box.length&&(this.markUsedOrientation(C,Ka,jt),this.placedOrientations[jt.crossTileID]=Ka),eo};oa(()=>aa(Sh,a.WritingMode.horizontal),()=>{const qo=xr.verticalTextBox;return C.allowVerticalPlacement&&jt.numVerticalGlyphVertices>0&&qo?aa(qo,a.WritingMode.vertical):{box:null,offscreen:null}}),Ro(gi&&gi.box&&gi.box.length)}else{let aa=a.TextAnchorEnum[(Ui=(fr=this.prevPlacement)===null||fr===void 0?void 0:fr.variableOffsets[jt.crossTileID])===null||Ui===void 0?void 0:Ui.anchor];const qo=(eo,cc,pl)=>{const qc=eo.x2-eo.x1,U1=eo.y2-eo.y1,Rf=jt.textBoxScale,kA=dt&&ct==="never"?cc:null;let kf={box:[],offscreen:!1},co=Re==="never"?1:2,lm="never";aa&&co++;for(let Mv=0;Mv<co;Mv++){for(let fc=Za;fc<Ph;fc++){const Wc=C.textAnchorOffsets.get(fc);if(aa&&Wc.textAnchor!==aa)continue;const Ah=this.attemptAnchorPlacement(Wc,eo,qc,U1,Rf,it,ht,ee,z,De,lm,jt,C,pl,kA,pr);if(Ah&&(kf=Ah.placedGlyphBoxes,kf&&kf.box&&kf.box.length))return fn=!0,Qi=Ah.shift,kf}aa?aa=null:lm=Re}return kf};oa(()=>qo(Sh,xr.iconBox,a.WritingMode.horizontal),()=>{const eo=xr.verticalTextBox;return C.allowVerticalPlacement&&!(gi&&gi.box&&gi.box.length)&&jt.numVerticalGlyphVertices>0&&eo?qo(eo,xr.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),gi&&(fn=gi.box,hn=gi.offscreen);const Ka=Ro(gi&&gi.box);if(!fn&&this.prevPlacement){const eo=this.prevPlacement.variableOffsets[jt.crossTileID];eo&&(this.variableOffsets[jt.crossTileID]=eo,this.markUsedJustification(C,eo.anchor,jt,Ka))}}}if(Da=gi,fn=Da&&Da.box&&Da.box.length>0,hn=Da&&Da.offscreen,jt.useRuntimeCollisionCircles){const Ro=C.text.placedSymbolArray.get(jt.centerJustifiedTextSymbolIndex),oa=a.evaluateSizeForFeature(C.textSizeData,we,Ro),Za=M.get("text-padding");Eo=this.collisionIndex.placeCollisionCircles(Re,Ro,C.lineVertexArray,C.glyphOffsetArray,oa,z,V,X,S,ht,De.predicate,jt.collisionCircleDiameter,Za,pr),Eo.circles.length&&Eo.collisionDetected&&!S&&a.warnOnce("Collisions detected, but collision boxes are not shown"),fn=et||Eo.circles.length>0&&!Eo.collisionDetected,hn=hn&&Eo.offscreen}if(xr.iconFeatureIndex&&(Gl=xr.iconFeatureIndex),xr.iconBox){const Ro=oa=>{const Za=dt&&Qi?qt(oa,Qi.x,Qi.y,it,ht,this.transform.angle):oa;return this.collisionIndex.placeCollisionBox(Za,ct,ee,z,De.predicate,pr)};hu&&hu.box&&hu.box.length&&xr.verticalIconBox?(zs=Ro(xr.verticalIconBox),Sr=zs.box.length>0):(zs=Ro(xr.iconBox),Sr=zs.box.length>0),hn=hn&&zs.offscreen}const Gc=ke||jt.numHorizontalGlyphVertices===0&&jt.numVerticalGlyphVertices===0,lc=Be||jt.numIconVertices===0;if(Gc||lc?lc?Gc||(Sr=Sr&&fn):fn=Sr&&fn:Sr=fn=Sr&&fn,fn&&Da&&Da.box&&this.collisionIndex.insertCollisionBox(Da.box,Re,M.get("text-ignore-placement"),C.bucketInstanceId,hu&&hu.box&&dl?dl:Vl,De.ID),Sr&&zs&&this.collisionIndex.insertCollisionBox(zs.box,ct,M.get("icon-ignore-placement"),C.bucketInstanceId,Gl,De.ID),Eo&&(fn&&this.collisionIndex.insertCollisionCircles(Eo.circles,Re,M.get("text-ignore-placement"),C.bucketInstanceId,Vl,De.ID),S)){const Ro=C.bucketInstanceId;let oa=this.collisionCircleArrays[Ro];oa===void 0&&(oa=this.collisionCircleArrays[Ro]=new bt);for(let Za=0;Za<Eo.circles.length;Za+=4)oa.circles.push(Eo.circles[Za+0]),oa.circles.push(Eo.circles[Za+1]),oa.circles.push(Eo.circles[Za+2]),oa.circles.push(Eo.collisionDetected?1:0)}if(jt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[jt.crossTileID]=new yt(fn||At,Sr||St,hn||C.justReloaded),v[jt.crossTileID]=!0};if(wt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const jt=C.getSortedSymbolIndexes(this.transform.angle);for(let xr=jt.length-1;xr>=0;--xr){const fr=jt[xr];cn(C.symbolInstances.get(fr),C.collisionArrays[fr])}}else for(let jt=l.symbolInstanceStart;jt<l.symbolInstanceEnd;jt++)cn(C.symbolInstances.get(jt),C.collisionArrays[jt]);if(S&&C.bucketInstanceId in this.collisionCircleArrays){const jt=this.collisionCircleArrays[C.bucketInstanceId];a.invert(jt.invProjMatrix,z),jt.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(l,v,S,C){let M;M=C===a.WritingMode.vertical?S.verticalPlacedTextSymbolIndex:{left:S.leftJustifiedTextSymbolIndex,center:S.centerJustifiedTextSymbolIndex,right:S.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(v)];const z=[S.leftJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.rightJustifiedTextSymbolIndex,S.verticalPlacedTextSymbolIndex];for(const V of z)V>=0&&(l.text.placedSymbolArray.get(V).crossTileID=M>=0&&V!==M?0:S.crossTileID)}markUsedOrientation(l,v,S){const C=v===a.WritingMode.horizontal||v===a.WritingMode.horizontalOnly?v:0,M=v===a.WritingMode.vertical?v:0,z=[S.leftJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.rightJustifiedTextSymbolIndex];for(const V of z)l.text.placedSymbolArray.get(V).placedOrientation=C;S.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(S.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const v=this.prevPlacement;let S=!1;this.prevZoomAdjustment=v?v.zoomAdjustment(this.transform.zoom):0;const C=v?v.symbolFadeChange(l):1,M=v?v.opacities:{},z=v?v.variableOffsets:{},V=v?v.placedOrientations:{};for(const X in this.placements){const ee=this.placements[X],se=M[X];se?(this.opacities[X]=new tt(se,C,ee.text,ee.icon),S=S||ee.text!==se.text.placed||ee.icon!==se.icon.placed):(this.opacities[X]=new tt(null,C,ee.text,ee.icon,ee.skipFade),S=S||ee.text||ee.icon)}for(const X in M){const ee=M[X];if(!this.opacities[X]){const se=new tt(ee,C,!1,!1);se.isHidden()||(this.opacities[X]=se,S=S||ee.text.placed||ee.icon.placed)}}for(const X in z)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=z[X]);for(const X in V)this.placedOrientations[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.placedOrientations[X]=V[X]);if(v&&v.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");S?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=v?v.lastPlacementChangeTime:l)}updateLayerOpacities(l,v){const S={};for(const C of v){const M=C.getBucket(l);M&&C.latestFeatureIndex&&l.id===M.layerIds[0]&&this.updateBucketOpacities(M,S,C.collisionBoxArray)}}updateBucketOpacities(l,v,S){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const C=l.layers[0],M=C.layout,z=new tt(null,0,!1,!1,!0),V=M.get("text-allow-overlap"),X=M.get("icon-allow-overlap"),ee=C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"),se=M.get("text-rotation-alignment")==="map",le=M.get("text-pitch-alignment")==="map",we=M.get("icon-text-fit")!=="none",De=new tt(null,0,V&&(X||!l.hasIconData()||M.get("icon-optional")),X&&(V||!l.hasTextData()||M.get("text-optional")),!0);!l.collisionArrays&&S&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(S);const ke=(Be,Re,et)=>{for(let ct=0;ct<Re/4;ct++)Be.opacityVertexArray.emplaceBack(et);Be.hasVisibleVertices=Be.hasVisibleVertices||et!==Jr};for(let Be=0;Be<l.symbolInstances.length;Be++){const Re=l.symbolInstances.get(Be),{numHorizontalGlyphVertices:et,numVerticalGlyphVertices:ct,crossTileID:Ve}=Re;let it=this.opacities[Ve];v[Ve]?it=z:it||(it=De,this.opacities[Ve]=it),v[Ve]=!0;const ht=Re.numIconVertices>0,dt=this.placedOrientations[Re.crossTileID],wt=dt===a.WritingMode.vertical,At=dt===a.WritingMode.horizontal||dt===a.WritingMode.horizontalOnly;if(et>0||ct>0){const St=xt(it.text);ke(l.text,et,wt?Jr:St),ke(l.text,ct,At?Jr:St);const Dt=it.text.isHidden();[Re.rightJustifiedTextSymbolIndex,Re.centerJustifiedTextSymbolIndex,Re.leftJustifiedTextSymbolIndex].forEach(jt=>{jt>=0&&(l.text.placedSymbolArray.get(jt).hidden=Dt||wt?1:0)}),Re.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Re.verticalPlacedTextSymbolIndex).hidden=Dt||At?1:0);const pr=this.variableOffsets[Re.crossTileID];pr&&this.markUsedJustification(l,pr.anchor,Re,dt);const cn=this.placedOrientations[Re.crossTileID];cn&&(this.markUsedJustification(l,"left",Re,cn),this.markUsedOrientation(l,cn,Re))}if(ht){const St=xt(it.icon),Dt=!(we&&Re.verticalPlacedIconSymbolIndex&&wt);Re.placedIconSymbolIndex>=0&&(ke(l.icon,Re.numIconVertices,Dt?St:Jr),l.icon.placedSymbolArray.get(Re.placedIconSymbolIndex).hidden=it.icon.isHidden()),Re.verticalPlacedIconSymbolIndex>=0&&(ke(l.icon,Re.numVerticalIconVertices,Dt?Jr:St),l.icon.placedSymbolArray.get(Re.verticalPlacedIconSymbolIndex).hidden=it.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const St=l.collisionArrays[Be];if(St){let Dt=new a.Point(0,0);if(St.textBox||St.verticalTextBox){let cn=!0;if(ee){const jt=this.variableOffsets[Ve];jt?(Dt=dr(jt.anchor,jt.width,jt.height,jt.textOffset,jt.textBoxScale),se&&Dt._rotate(le?this.transform.angle:-this.transform.angle)):cn=!1}St.textBox&&er(l.textCollisionBox.collisionVertexArray,it.text.placed,!cn||wt,Dt.x,Dt.y),St.verticalTextBox&&er(l.textCollisionBox.collisionVertexArray,it.text.placed,!cn||At,Dt.x,Dt.y)}const pr=!!(!At&&St.verticalIconBox);St.iconBox&&er(l.iconCollisionBox.collisionVertexArray,it.icon.placed,pr,we?Dt.x:0,we?Dt.y:0),St.verticalIconBox&&er(l.iconCollisionBox.collisionVertexArray,it.icon.placed,!pr,we?Dt.x:0,we?Dt.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Be.invProjMatrix,l.placementViewportMatrix=Be.viewportMatrix,l.collisionCircleArray=Be.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,v){const S=this.zoomAtLastRecencyCheck===v?1-this.zoomAdjustment(v):1;return this.zoomAtLastRecencyCheck=v,this.commitTime+this.fadeDuration*S>l}setStale(){this.stale=!0}}function er(A,l,v,S,C){A.emplaceBack(l?1:0,v?1:0,S||0,C||0),A.emplaceBack(l?1:0,v?1:0,S||0,C||0),A.emplaceBack(l?1:0,v?1:0,S||0,C||0),A.emplaceBack(l?1:0,v?1:0,S||0,C||0)}const Yr=Math.pow(2,25),Hr=Math.pow(2,24),Wr=Math.pow(2,17),Dr=Math.pow(2,16),go=Math.pow(2,9),Wt=Math.pow(2,8),Vr=Math.pow(2,1);function xt(A){if(A.opacity===0&&!A.placed)return 0;if(A.opacity===1&&A.placed)return 4294967295;const l=A.placed?1:0,v=Math.floor(127*A.opacity);return v*Yr+l*Hr+v*Wr+l*Dr+v*go+l*Wt+v*Vr+l}const Jr=0;class Mi{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,v,S,C,M){const z=this._bucketParts;for(;this._currentTileIndex<l.length;)if(v.getBucketParts(z,C,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((V,X)=>V.sortKey-X.sortKey));this._currentPartIndex<z.length;)if(v.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,S),this._currentPartIndex++,M())return!0;return!1}}class yi{constructor(l,v,S,C,M,z,V,X){this.placement=new Kt(l,v,z,V,X),this._currentPlacementIndex=S.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(l,v,S){const C=a.browser.now(),M=()=>!this._forceFullPlacement&&a.browser.now()-C>2;for(;this._currentPlacementIndex>=0;){const z=v[l[this._currentPlacementIndex]],V=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=V)&&(!z.maxzoom||z.maxzoom>V)){if(this._inProgressLayer||(this._inProgressLayer=new Mi(z)),this._inProgressLayer.continuePlacement(S[z.source],this.placement,this._showCollisionBoxes,z,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Si=512/a.EXTENT/2;class Pi{constructor(l,v,S){this.tileID=l,this.bucketInstanceId=S,this._symbolsByKey={};const C=new Map;for(let M=0;M<v.length;M++){const z=v.get(M),V=z.key,X=C.get(V);X?X.push(z):C.set(V,[z])}for(const[M,z]of C){const V={positions:z.map(X=>({x:Math.floor(X.anchorX*Si),y:Math.floor(X.anchorY*Si)})),crossTileIDs:z.map(X=>X.crossTileID)};if(V.positions.length>128){const X=new a.KDBush(V.positions.length,16,Uint16Array);for(const{x:ee,y:se}of V.positions)X.add(ee,se);X.finish(),delete V.positions,V.index=X}this._symbolsByKey[M]=V}}getScaledCoordinates(l,v){const{x:S,y:C,z:M}=this.tileID.canonical,{x:z,y:V,z:X}=v.canonical,ee=Si/Math.pow(2,X-M),se=(V*a.EXTENT+l.anchorY)*ee,le=C*a.EXTENT*Si;return{x:Math.floor((z*a.EXTENT+l.anchorX)*ee-S*a.EXTENT*Si),y:Math.floor(se-le)}}findMatches(l,v,S){const C=this.tileID.canonical.z<v.canonical.z?1:Math.pow(2,this.tileID.canonical.z-v.canonical.z);for(let M=0;M<l.length;M++){const z=l.get(M);if(z.crossTileID)continue;const V=this._symbolsByKey[z.key];if(!V)continue;const X=this.getScaledCoordinates(z,v);if(V.index){const ee=V.index.range(X.x-C,X.y-C,X.x+C,X.y+C).sort();for(const se of ee){const le=V.crossTileIDs[se];if(!S[le]){S[le]=!0,z.crossTileID=le;break}}}else if(V.positions)for(let ee=0;ee<V.positions.length;ee++){const se=V.positions[ee],le=V.crossTileIDs[ee];if(Math.abs(se.x-X.x)<=C&&Math.abs(se.y-X.y)<=C&&!S[le]){S[le]=!0,z.crossTileID=le;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class da{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class no{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const v=Math.round((l-this.lng)/360);if(v!==0)for(const S in this.indexes){const C=this.indexes[S],M={};for(const z in C){const V=C[z];V.tileID=V.tileID.unwrapTo(V.tileID.wrap+v),M[V.tileID.key]=V}this.indexes[S]=M}this.lng=l}addBucket(l,v,S){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===v.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let M=0;M<v.symbolInstances.length;M++)v.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const C=this.usedCrossTileIDs[l.overscaledZ];for(const M in this.indexes){const z=this.indexes[M];if(Number(M)>l.overscaledZ)for(const V in z){const X=z[V];X.tileID.isChildOf(l)&&X.findMatches(v.symbolInstances,l,C)}else{const V=z[l.scaledTo(Number(M)).key];V&&V.findMatches(v.symbolInstances,l,C)}}for(let M=0;M<v.symbolInstances.length;M++){const z=v.symbolInstances.get(M);z.crossTileID||(z.crossTileID=S.generate(),C[z.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Pi(l,v.symbolInstances,v.bucketInstanceId),!0}removeBucketCrossTileIDs(l,v){for(const S of v.getCrossTileIDsLists())for(const C of S)delete this.usedCrossTileIDs[l][C]}removeStaleBuckets(l){let v=!1;for(const S in this.indexes){const C=this.indexes[S];for(const M in C)l[C[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(S,C[M]),delete C[M],v=!0)}return v}}class di{constructor(){this.layerIndexes={},this.crossTileIDs=new da,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,v,S){let C=this.layerIndexes[l.id];C===void 0&&(C=this.layerIndexes[l.id]=new no);let M=!1;const z={};C.handleWrapJump(S);for(const V of v){const X=V.getBucket(l);X&&l.id===X.layerIds[0]&&(X.bucketInstanceId||(X.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(V.tileID,X,this.crossTileIDs)&&(M=!0),z[X.bucketInstanceId]=!0)}return C.removeStaleBuckets(z)&&(M=!0),M}pruneUnusedLayers(l){const v={};l.forEach(S=>{v[S]=!0});for(const S in this.layerIndexes)v[S]||delete this.layerIndexes[S]}}const Ko=(A,l)=>a.emitValidationErrors(A,l&&l.filter(v=>v.identifier!=="source.canvas")),Ea=a.pick(a.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),oi=a.pick(a.operations,["setCenter","setZoom","setBearing","setPitch"]),Yn=a.emptyStyle();class io extends a.Evented{constructor(l,v={}){super(),this.map=l,this.dispatcher=new ae(lr(),this,l._getMapId()),this.imageManager=new ge,this.imageManager.setEventedParent(this),this.glyphManager=new fe(l._requestManager,v.localIdeographFontFamily),this.lineAtlas=new he(256,512),this.crossTileSymbolIndex=new di,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const S=this;this._rtlTextPluginCallback=io.registerForPluginStateChange(C=>{S.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:C.pluginStatus,pluginURL:C.pluginURL},(M,z)=>{if(a.triggerPluginCompletionEvent(M),z&&z.every(V=>V))for(const V in S.sourceCaches){const X=S.sourceCaches[V].getSource().type;X!=="vector"&&X!=="geojson"||S.sourceCaches[V].reload()}})}),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const M=this.sourceCaches[C.sourceId];if(!M)return;const z=M.getSource();if(z&&z.vectorLayerIds)for(const V in this._layers){const X=this._layers[V];X.source===z.id&&this._validateLayer(X)}})}loadURL(l,v={},S){this.fire(new a.Event("dataloading",{dataType:"style"})),v.validate=typeof v.validate!="boolean"||v.validate;const C=this.map._requestManager.transformRequest(l,F.Style);this._request=a.getJSON(C,(M,z)=>{this._request=null,M?this.fire(new a.ErrorEvent(M)):z&&this._load(z,v,S)})}loadJSON(l,v={},S){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(()=>{this._request=null,v.validate=v.validate!==!1,this._load(l,v,S)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Yn,{validate:!1})}_load(l,v,S){var C;const M=v.transformStyle?v.transformStyle(S,l):l;if(!v.validate||!Ko(this,a.validateStyle(M))){this._loaded=!0,this.stylesheet=M;for(const z in M.sources)this.addSource(z,M.sources[z],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new ie(this.stylesheet.light),this.map.setTerrain((C=this.stylesheet.terrain)!==null&&C!==void 0?C:null),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}}_createLayers(){const l=a.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",l),this._order=l.map(v=>v.id),this._layers={},this._serializedLayers=null;for(const v of l){const S=a.createStyleLayer(v);S.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=S}}_loadSprite(l,v=!1,S=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(C,M,z,V){const X=Y(C),ee=X.length,se=z>1?"@2x":"",le={},we={},De={};for(const{id:ke,url:Be}of X){const Re=M.transformRequest(M.normalizeSpriteURL(Be,se,".json"),F.SpriteJSON),et=`${ke}_${Re.url}`;le[et]=a.getJSON(Re,(it,ht)=>{delete le[et],we[ke]=ht,W(V,we,De,it,ee)});const ct=M.transformRequest(M.normalizeSpriteURL(Be,se,".png"),F.SpriteImage),Ve=`${ke}_${ct.url}`;le[Ve]=$.getImage(ct,(it,ht)=>{delete le[Ve],De[ke]=ht,W(V,we,De,it,ee)})}return{cancel(){for(const ke of Object.values(le))ke.cancel()}}}(l,this.map._requestManager,this.map.getPixelRatio(),(C,M)=>{if(this._spriteRequest=null,C)this.fire(new a.ErrorEvent(C));else if(M)for(const z in M){this._spritesImagesIds[z]=[];const V=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(X=>!(X in M)):[];for(const X of V)this.imageManager.removeImage(X),this._changedImages[X]=!0;for(const X in M[z]){const ee=z==="default"?X:`${z}:${X}`;this._spritesImagesIds[z].push(ee),ee in this.imageManager.images?this.imageManager.updateImage(ee,M[z][X],!1):this.imageManager.addImage(ee,M[z][X]),v&&(this._changedImages[ee]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),v&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"})),S&&S(C)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}_validateLayer(l){const v=this.sourceCaches[l.source];if(!v)return;const S=l.sourceLayer;if(!S)return;const C=v.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(S)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${S}" does not exist on source "${C.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l){const v=this._serializedAllLayers();if(!l||l.length===0)return Object.values(v);const S=[];for(const C of l)v[C]&&S.push(v[C]);return S}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const v=Object.keys(this._layers);for(const S of v){const C=this._layers[S];C.type!=="custom"&&(l[S]=C.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const v=this._changed;if(this._changed){const C=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(C.length||M.length)&&this._updateWorkerLayers(C,M);for(const z in this._updatedSources){const V=this._updatedSources[z];if(V==="reload")this._reloadSource(z);else{if(V!=="clear")throw new Error(`Invalid action ${V}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const S={};for(const C in this.sourceCaches){const M=this.sourceCaches[C];S[C]=M.used,M.used=!1}for(const C of this._order){const M=this._layers[C];M.recalculate(l,this._availableImages),!M.isHidden(l.zoom)&&M.source&&(this.sourceCaches[M.source].used=!0)}for(const C in S){const M=this.sourceCaches[C];S[C]!==M.used&&M.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(l),this.z=l.zoom,v&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const v in this.sourceCaches)this.sourceCaches[v].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,v){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(l),removedIds:v})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,v={}){this._checkLoaded();const S=this.serialize();if(l=v.transformStyle?v.transformStyle(S,l):l,Ko(this,a.validateStyle(l)))return!1;(l=a.clone$1(l)).layers=a.derefLayers(l.layers);const C=a.diffStyles(S,l).filter(z=>!(z.command in oi));if(C.length===0)return!1;const M=C.filter(z=>!(z.command in Ea));if(M.length>0)throw new Error(`Unimplemented: ${M.map(z=>z.command).join(", ")}.`);for(const z of C)z.command!=="setTransition"&&this[z.command].apply(this,z.args);return this.stylesheet=l,!0}addImage(l,v){if(this.getImage(l))return this.fire(new a.ErrorEvent(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,v),this._afterImageUpdated(l)}updateImage(l,v){this.imageManager.updateImage(l,v)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.ErrorEvent(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,v,S={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!v.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(v).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(v.type)>=0&&this._validate(a.validateStyle.source,`sources.${l}`,v,null,S))return;this.map&&this.map._collectResourceTiming&&(v.collectResourceTiming=!0);const C=this.sourceCaches[l]=new xe(l,v,this.dispatcher);C.style=this,C.setEventedParent(this,()=>({isSourceLoaded:C.loaded(),source:C.serialize(),sourceId:l})),C.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===l)return this.fire(new a.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${S}" is using it.`)));const v=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],v.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),v.setEventedParent(null),v.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,v){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const S=this.sourceCaches[l].getSource();if(S.type!=="geojson")throw new Error(`geojsonSource.type is ${S.type}, which is !== 'geojson`);S.setData(v),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,v,S={}){this._checkLoaded();const C=l.id;if(this.getLayer(C))return void this.fire(new a.ErrorEvent(new Error(`Layer "${C}" already exists on this map.`)));let M;if(l.type==="custom"){if(Ko(this,a.validateCustomStyleLayer(l)))return;M=a.createStyleLayer(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(C,l.source),l=a.clone$1(l),l=a.extend(l,{source:C})),this._validate(a.validateStyle.layer,`layers.${C}`,l,{arrayIndex:-1},S))return;M=a.createStyleLayer(l),this._validateLayer(M),M.setEventedParent(this,{layer:{id:C}})}const z=v?this._order.indexOf(v):this._order.length;if(v&&z===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${C}" before non-existing layer "${v}".`)));else{if(this._order.splice(z,0,C),this._layerOrderChanged=!0,this._layers[C]=M,this._removedLayers[C]&&M.source&&M.type!=="custom"){const V=this._removedLayers[C];delete this._removedLayers[C],V.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",this.sourceCaches[M.source].pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map)}}moveLayer(l,v){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===v)return;const S=this._order.indexOf(l);this._order.splice(S,1);const C=v?this._order.indexOf(v):this._order.length;v&&C===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${l}" before non-existing layer "${v}".`))):(this._order.splice(C,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const v=this._layers[l];if(!v)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${l}".`)));v.setEventedParent(null);const S=this._order.indexOf(l);this._order.splice(S,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=v,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],v.onRemove&&v.onRemove(this.map)}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,v,S){this._checkLoaded();const C=this.getLayer(l);C?C.minzoom===v&&C.maxzoom===S||(v!=null&&(C.minzoom=v),S!=null&&(C.maxzoom=S),this._updateLayer(C)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,v,S={}){this._checkLoaded();const C=this.getLayer(l);if(C){if(!a.deepEqual(C.filter,v))return v==null?(C.filter=void 0,void this._updateLayer(C)):void(this._validate(a.validateStyle.filter,`layers.${C.id}.filter`,v,null,S)||(C.filter=a.clone$1(v),this._updateLayer(C)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.clone$1(this.getLayer(l).filter)}setLayoutProperty(l,v,S,C={}){this._checkLoaded();const M=this.getLayer(l);M?a.deepEqual(M.getLayoutProperty(v),S)||(M.setLayoutProperty(v,S,C),this._updateLayer(M)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,v){const S=this.getLayer(l);if(S)return S.getLayoutProperty(v);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,v,S,C={}){this._checkLoaded();const M=this.getLayer(l);M?a.deepEqual(M.getPaintProperty(v),S)||(M.setPaintProperty(v,S,C)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,v){return this.getLayer(l).getPaintProperty(v)}setFeatureState(l,v){this._checkLoaded();const S=l.source,C=l.sourceLayer,M=this.sourceCaches[S];if(M===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${S}' does not exist in the map's style.`)));const z=M.getSource().type;z==="geojson"&&C?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||C?(l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),M.setFeatureState(C,l.id,v)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,v){this._checkLoaded();const S=l.source,C=this.sourceCaches[S];if(C===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${S}' does not exist in the map's style.`)));const M=C.getSource().type,z=M==="vector"?l.sourceLayer:void 0;M!=="vector"||z?v&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(z,l.id,v):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const v=l.source,S=l.sourceLayer,C=this.sourceCaches[v];if(C!==void 0)return C.getSource().type!=="vector"||S?(l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),C.getFeatureState(S,l.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.mapObject(this.sourceCaches,C=>C.serialize()),v=this._serializeByIds(this._order),S=this.stylesheet;return a.filterObject({version:S.version,name:S.name,metadata:S.metadata,light:S.light,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,sources:l,layers:v},C=>C!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const v=z=>this._layers[z].type==="fill-extrusion",S={},C=[];for(let z=this._order.length-1;z>=0;z--){const V=this._order[z];if(v(V)){S[V]=z;for(const X of l){const ee=X[V];if(ee)for(const se of ee)C.push(se)}}}C.sort((z,V)=>V.intersectionZ-z.intersectionZ);const M=[];for(let z=this._order.length-1;z>=0;z--){const V=this._order[z];if(v(V))for(let X=C.length-1;X>=0;X--){const ee=C[X].feature;if(S[ee.layer.id]<z)break;M.push(ee),C.pop()}else for(const X of l){const ee=X[V];if(ee)for(const se of ee)M.push(se.feature)}}return M}queryRenderedFeatures(l,v,S){v&&v.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",v.filter,null,v);const C={};if(v&&v.layers){if(!Array.isArray(v.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const V of v.layers){const X=this._layers[V];if(!X)return this.fire(new a.ErrorEvent(new Error(`The layer '${V}' does not exist in the map's style and cannot be queried for features.`))),[];C[X.source]=!0}}const M=[];v.availableImages=this._availableImages;const z=this._serializedAllLayers();for(const V in this.sourceCaches)v.layers&&!C[V]||M.push(br(this.sourceCaches[V],this._layers,z,l,v,S));return this.placement&&M.push(function(V,X,ee,se,le,we,De){const ke={},Be=we.queryRenderedSymbols(se),Re=[];for(const et of Object.keys(Be).map(Number))Re.push(De[et]);Re.sort(un);for(const et of Re){const ct=et.featureIndex.lookupSymbolFeatures(Be[et.bucketInstanceId],X,et.bucketIndex,et.sourceLayerIndex,le.filter,le.layers,le.availableImages,V);for(const Ve in ct){const it=ke[Ve]=ke[Ve]||[],ht=ct[Ve];ht.sort((dt,wt)=>{const At=et.featureSortOrder;if(At){const St=At.indexOf(dt.featureIndex);return At.indexOf(wt.featureIndex)-St}return wt.featureIndex-dt.featureIndex});for(const dt of ht)it.push(dt)}}for(const et in ke)ke[et].forEach(ct=>{const Ve=ct.feature,it=ee[V[et].source].getFeatureState(Ve.layer["source-layer"],Ve.id);Ve.source=Ve.layer.source,Ve.layer["source-layer"]&&(Ve.sourceLayer=Ve.layer["source-layer"]),Ve.state=it});return ke}(this._layers,z,this.sourceCaches,l,v,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(l,v){v&&v.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",v.filter,null,v);const S=this.sourceCaches[l];return S?function(C,M){const z=C.getRenderableIds().map(ee=>C.getTileByID(ee)),V=[],X={};for(let ee=0;ee<z.length;ee++){const se=z[ee],le=se.tileID.canonical.key;X[le]||(X[le]=!0,se.querySourceFeatures(V,M))}return V}(S,v):[]}addSourceType(l,v,S){return rr(l)?S(new Error(`A source type called "${l}" already exists.`)):(((C,M)=>{Zt[C]=M})(l,v),v.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:v.workerSourceURL},S):S(null,null))}getLight(){return this.light.getLight()}setLight(l,v={}){this._checkLoaded();const S=this.light.getLight();let C=!1;for(const z in l)if(!a.deepEqual(l[z],S[z])){C=!0;break}if(!C)return;const M={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,v),this.light.updateTransitions(M)}_validate(l,v,S,C,M={}){return(!M||M.validate!==!1)&&Ko(this,l.call(a.validateStyle,a.extend({key:v,style:this.serialize(),value:S,styleSpec:a.v8Spec},C)))}_remove(l=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const v in this._layers)this._layers[v].setEventedParent(null);for(const v in this.sourceCaches){const S=this.sourceCaches[v];S.setEventedParent(null),S.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const v in this.sourceCaches)this.sourceCaches[v].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,v,S,C,M=!1){let z=!1,V=!1;const X={};for(const ee of this._order){const se=this._layers[ee];if(se.type!=="symbol")continue;if(!X[se.source]){const we=this.sourceCaches[se.source];X[se.source]=we.getRenderableIds(!0).map(De=>we.getTileByID(De)).sort((De,ke)=>ke.tileID.overscaledZ-De.tileID.overscaledZ||(De.tileID.isLessThan(ke.tileID)?-1:1))}const le=this.crossTileSymbolIndex.addLayer(se,X[se.source],l.center.lng);z=z||le}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((M=M||this._layerOrderChanged||S===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),l.zoom))&&(this.pauseablePlacement=new yi(l,this.map.terrain,this._order,M,v,S,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,X),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),V=!0),z&&this.pauseablePlacement.placement.setStale()),V||z)for(const ee of this._order){const se=this._layers[ee];se.type==="symbol"&&this.placement.updateLayerOpacities(se,X[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,v,S){this.imageManager.getImages(v.icons,S),this._updateTilesForChangedImages();const C=this.sourceCaches[v.source];C&&C.setDependencies(v.tileID.key,v.type,v.icons)}getGlyphs(l,v,S){this.glyphManager.getGlyphs(v.stacks,S);const C=this.sourceCaches[v.source];C&&C.setDependencies(v.tileID.key,v.type,[""])}getResource(l,v,S){return a.makeRequest(v,S)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,v={}){this._checkLoaded(),l&&this._validate(a.validateStyle.glyphs,"glyphs",l,null,v)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,v,S={},C){this._checkLoaded();const M=[{id:l,url:v}],z=[...Y(this.stylesheet.sprite),...M];this._validate(a.validateStyle.sprite,"sprite",z,null,S)||(this.stylesheet.sprite=z,this._loadSprite(M,!0,C))}removeSprite(l){this._checkLoaded();const v=Y(this.stylesheet.sprite);if(v.find(S=>S.id===l)){if(this._spritesImagesIds[l])for(const S of this._spritesImagesIds[l])this.imageManager.removeImage(S),this._changedImages[S]=!0;v.splice(v.findIndex(S=>S.id===l),1),this.stylesheet.sprite=v.length>0?v:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}else this.fire(new a.ErrorEvent(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return Y(this.stylesheet.sprite)}setSprite(l,v={},S){this._checkLoaded(),l&&this._validate(a.validateStyle.sprite,"sprite",l,null,v)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,S):(this._unloadSprite(),S&&S(null)))}}io.registerForPluginStateChange=a.registerForPluginStateChange;var Uo=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),pa="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ou={prelude:or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:or(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:or(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:or("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:or(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:or(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:or("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",pa),terrainDepth:or("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",pa),terrainCoords:or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",pa)};function or(A,l){const v=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,S=l.match(/attribute ([\w]+) ([\w]+)/g),C=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=M?M.concat(C):C,V={};return{fragmentSource:A=A.replace(v,(X,ee,se,le,we)=>(V[we]=!0,ee==="define"?`
#ifndef HAS_UNIFORM_u_${we}
varying ${se} ${le} ${we};
#else
uniform ${se} ${le} u_${we};
#endif
`:`
#ifdef HAS_UNIFORM_u_${we}
    ${se} ${le} ${we} = u_${we};
#endif
`)),vertexSource:l=l.replace(v,(X,ee,se,le,we)=>{const De=le==="float"?"vec2":"vec4",ke=we.match(/color/)?"color":De;return V[we]?ee==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${De} a_${we};
varying ${se} ${le} ${we};
#else
uniform ${se} ${le} u_${we};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = a_${we};
#else
    ${se} ${le} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = unpack_mix_${ke}(a_${we}, u_${we}_t);
#else
    ${se} ${le} ${we} = u_${we};
#endif
`:ee==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${De} a_${we};
#else
uniform ${se} ${le} u_${we};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${le} ${we} = a_${we};
#else
    ${se} ${le} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${le} ${we} = unpack_mix_${ke}(a_${we}, u_${we}_t);
#else
    ${se} ${le} ${we} = u_${we};
#endif
`}),staticAttributes:S,staticUniforms:z}}class Tu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,v,S,C,M,z,V,X,ee){this.context=l;let se=this.boundPaintVertexBuffers.length!==C.length;for(let le=0;!se&&le<C.length;le++)this.boundPaintVertexBuffers[le]!==C[le]&&(se=!0);!this.vao||this.boundProgram!==v||this.boundLayoutVertexBuffer!==S||se||this.boundIndexBuffer!==M||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==V||this.boundDynamicVertexBuffer2!==X||this.boundDynamicVertexBuffer3!==ee?this.freshBind(v,S,C,M,z,V,X,ee):(l.bindVertexArray.set(this.vao),V&&V.bind(),M&&M.dynamicDraw&&M.bind(),X&&X.bind(),ee&&ee.bind())}freshBind(l,v,S,C,M,z,V,X){const ee=l.numAttributes,se=this.context,le=se.gl;this.vao&&this.destroy(),this.vao=se.createVertexArray(),se.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=v,this.boundPaintVertexBuffers=S,this.boundIndexBuffer=C,this.boundVertexOffset=M,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=V,this.boundDynamicVertexBuffer3=X,v.enableAttributes(le,l);for(const we of S)we.enableAttributes(le,l);z&&z.enableAttributes(le,l),V&&V.enableAttributes(le,l),X&&X.enableAttributes(le,l),v.bind(),v.setVertexAttribPointers(le,l,M);for(const we of S)we.bind(),we.setVertexAttribPointers(le,l,M);z&&(z.bind(),z.setVertexAttribPointers(le,l,M)),C&&C.bind(),V&&(V.bind(),V.setVertexAttribPointers(le,l,M)),X&&(X.bind(),X.setVertexAttribPointers(le,l,M)),se.currentNumAttributes=ee}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function oo(A){const l=[];for(let v=0;v<A.length;v++){if(A[v]===null)continue;const S=A[v].split(" ");l.push(S.pop())}return l}class Ga{constructor(l,v,S,C,M,z){const V=l.gl;this.program=V.createProgram();const X=oo(v.staticAttributes),ee=S?S.getBinderAttributes():[],se=X.concat(ee),le=Ou.prelude.staticUniforms?oo(Ou.prelude.staticUniforms):[],we=v.staticUniforms?oo(v.staticUniforms):[],De=S?S.getBinderUniforms():[],ke=le.concat(we).concat(De),Be=[];for(const dt of ke)Be.indexOf(dt)<0&&Be.push(dt);const Re=S?S.defines():[];M&&Re.push("#define OVERDRAW_INSPECTOR;"),z&&Re.push("#define TERRAIN3D;");const et=Re.concat(Ou.prelude.fragmentSource,v.fragmentSource).join(`
`),ct=Re.concat(Ou.prelude.vertexSource,v.vertexSource).join(`
`),Ve=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ve,et),V.compileShader(Ve),!V.getShaderParameter(Ve,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(Ve)}`);V.attachShader(this.program,Ve);const it=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(it,ct),V.compileShader(it),!V.getShaderParameter(it,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(it)}`);V.attachShader(this.program,it),this.attributes={};const ht={};this.numAttributes=se.length;for(let dt=0;dt<this.numAttributes;dt++)se[dt]&&(V.bindAttribLocation(this.program,dt,se[dt]),this.attributes[se[dt]]=dt);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(it),V.deleteShader(Ve);for(let dt=0;dt<Be.length;dt++){const wt=Be[dt];if(wt&&!ht[wt]){const At=V.getUniformLocation(this.program,wt);At&&(ht[wt]=At)}}this.fixedUniforms=C(l,ht),this.terrainUniforms=((dt,wt)=>({u_depth:new a.Uniform1i(dt,wt.u_depth),u_terrain:new a.Uniform1i(dt,wt.u_terrain),u_terrain_dim:new a.Uniform1f(dt,wt.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(dt,wt.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(dt,wt.u_terrain_unpack),u_terrain_exaggeration:new a.Uniform1f(dt,wt.u_terrain_exaggeration)}))(l,ht),this.binderUniforms=S?S.getUniforms(l,ht):[]}draw(l,v,S,C,M,z,V,X,ee,se,le,we,De,ke,Be,Re,et,ct){const Ve=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(S),l.setStencilMode(C),l.setColorMode(M),l.setCullFace(z),X){l.activeTexture.set(Ve.TEXTURE2),Ve.bindTexture(Ve.TEXTURE_2D,X.depthTexture),l.activeTexture.set(Ve.TEXTURE3),Ve.bindTexture(Ve.TEXTURE_2D,X.texture);for(const ht in this.terrainUniforms)this.terrainUniforms[ht].set(X[ht])}for(const ht in this.fixedUniforms)this.fixedUniforms[ht].set(V[ht]);Be&&Be.setUniforms(l,this.binderUniforms,De,{zoom:ke});let it=0;switch(v){case Ve.LINES:it=2;break;case Ve.TRIANGLES:it=3;break;case Ve.LINE_STRIP:it=1}for(const ht of we.get()){const dt=ht.vaos||(ht.vaos={});(dt[ee]||(dt[ee]=new Tu)).bind(l,this,se,Be?Be.getPaintVertexBuffers():[],le,ht.vertexOffset,Re,et,ct),Ve.drawElements(v,ht.primitiveLength*it,Ve.UNSIGNED_SHORT,ht.primitiveOffset*it*2)}}}function zr(A,l,v){const S=1/He(v,1,l.transform.tileZoom),C=Math.pow(2,v.tileID.overscaledZ),M=v.tileSize*Math.pow(2,l.transform.tileZoom)/C,z=M*(v.tileID.canonical.x+v.tileID.wrap*C),V=M*v.tileID.canonical.y;return{u_image:0,u_texsize:v.imageAtlasTexture.size,u_scale:[S,A.fromScale,A.toScale],u_fade:A.t,u_pixel_coord_upper:[z>>16,V>>16],u_pixel_coord_lower:[65535&z,65535&V]}}const Mu=(A,l,v,S)=>{const C=l.style.light,M=C.properties.get("position"),z=[M.x,M.y,M.z],V=function(){var ee=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(ee[1]=0,ee[2]=0,ee[3]=0,ee[5]=0,ee[6]=0,ee[7]=0),ee[0]=1,ee[4]=1,ee[8]=1,ee}();C.properties.get("anchor")==="viewport"&&function(ee,se){var le=Math.sin(se),we=Math.cos(se);ee[0]=we,ee[1]=le,ee[2]=0,ee[3]=-le,ee[4]=we,ee[5]=0,ee[6]=0,ee[7]=0,ee[8]=1}(V,-l.transform.angle),function(ee,se,le){var we=se[0],De=se[1],ke=se[2];ee[0]=we*le[0]+De*le[3]+ke*le[6],ee[1]=we*le[1]+De*le[4]+ke*le[7],ee[2]=we*le[2]+De*le[5]+ke*le[8]}(z,z,V);const X=C.properties.get("color");return{u_matrix:A,u_lightpos:z,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+v,u_opacity:S}},Ef=(A,l,v,S,C,M,z)=>a.extend(Mu(A,l,v,S),zr(M,l,z),{u_height_factor:-Math.pow(2,C.overscaledZ)/z.tileSize/8}),el=A=>({u_matrix:A}),vo=(A,l,v,S)=>a.extend(el(A),zr(v,l,S)),Sa=(A,l)=>({u_matrix:A,u_world:l}),tl=(A,l,v,S,C)=>a.extend(vo(A,l,v,S),{u_world:C}),Dc=(A,l,v,S)=>{const C=A.transform;let M,z;if(S.paint.get("circle-pitch-alignment")==="map"){const V=He(v,1,C.zoom);M=!0,z=[V,V]}else M=!1,z=C.pixelsToGLUnits;return{u_camera_to_center_distance:C.cameraToCenterDistance,u_scale_with_map:+(S.paint.get("circle-pitch-scale")==="map"),u_matrix:A.translatePosMatrix(l.posMatrix,v,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_pitch_with_map:+M,u_device_pixel_ratio:A.pixelRatio,u_extrude_scale:z}},It=(A,l,v)=>{const S=He(v,1,l.zoom),C=Math.pow(2,l.zoom-v.tileID.overscaledZ),M=v.tileID.overscaleFactor();return{u_matrix:A,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:S,u_extrude_scale:[l.pixelsToGLUnits[0]/(S*C),l.pixelsToGLUnits[1]/(S*C)],u_overscale_factor:M}},rl=(A,l,v=1)=>({u_matrix:A,u_color:l,u_overlay:0,u_overlay_scale:v}),Ao=A=>({u_matrix:A}),Pa=(A,l,v,S)=>({u_matrix:A,u_extrude_scale:He(l,1,v),u_intensity:S});function nl(A,l){const v=Math.pow(2,l.canonical.z),S=l.canonical.y;return[new a.MercatorCoordinate(0,S/v).toLngLat().lat,new a.MercatorCoordinate(0,(S+1)/v).toLngLat().lat]}const Ai=(A,l,v,S)=>{const C=A.transform;return{u_matrix:il(A,l,v,S),u_ratio:1/He(l,1,C.zoom),u_device_pixel_ratio:A.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},gn=(A,l,v,S,C)=>a.extend(Ai(A,l,v,C),{u_image:0,u_image_height:S}),Qr=(A,l,v,S,C)=>{const M=A.transform,z=Jo(l,M);return{u_matrix:il(A,l,v,C),u_texsize:l.imageAtlasTexture.size,u_ratio:1/He(l,1,M.zoom),u_device_pixel_ratio:A.pixelRatio,u_image:0,u_scale:[z,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},Hn=(A,l,v,S,C,M)=>{const z=A.lineAtlas,V=Jo(l,A.transform),X=v.layout.get("line-cap")==="round",ee=z.getDash(S.from,X),se=z.getDash(S.to,X),le=ee.width*C.fromScale,we=se.width*C.toScale;return a.extend(Ai(A,l,v,M),{u_patternscale_a:[V/le,-ee.height/2],u_patternscale_b:[V/we,-se.height/2],u_sdfgamma:z.width/(256*Math.min(le,we)*A.pixelRatio)/2,u_image:0,u_tex_y_a:ee.y,u_tex_y_b:se.y,u_mix:C.t})};function Jo(A,l){return 1/He(A,1,l.tileZoom)}function il(A,l,v,S){return A.translatePosMatrix(S?S.posMatrix:l.tileID.posMatrix,l,v.paint.get("line-translate"),v.paint.get("line-translate-anchor"))}const Gi=(A,l,v,S,C)=>{return{u_matrix:A,u_tl_parent:l,u_scale_parent:v,u_buffer_scale:1,u_fade_t:S.mix,u_opacity:S.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(z=C.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(M=C.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:As(C.paint.get("raster-hue-rotate"))};var M,z};function As(A){A*=Math.PI/180;const l=Math.sin(A),v=Math.cos(A);return[(2*v+1)/3,(-Math.sqrt(3)*l-v+1)/3,(Math.sqrt(3)*l-v+1)/3]}const yo=(A,l,v,S,C,M,z,V,X,ee)=>{const se=C.transform;return{u_is_size_zoom_constant:+(A==="constant"||A==="source"),u_is_size_feature_constant:+(A==="constant"||A==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+v,u_aspect_ratio:se.width/se.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:z,u_coord_matrix:V,u_is_text:+X,u_pitch_with_map:+S,u_texsize:ee,u_texture:0}},on=(A,l,v,S,C,M,z,V,X,ee,se)=>{const le=C.transform;return a.extend(yo(A,l,v,S,C,M,z,V,X,ee),{u_gamma_scale:S?Math.cos(le._pitch)*le.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+se})},cs=(A,l,v,S,C,M,z,V,X,ee)=>a.extend(on(A,l,v,S,C,M,z,V,!0,X,!0),{u_texsize_icon:ee,u_texture_icon:1}),ai=(A,l,v)=>({u_matrix:A,u_opacity:l,u_color:v}),Lu=(A,l,v,S,C,M)=>a.extend(function(z,V,X,ee){const se=X.imageManager.getPattern(z.from.toString()),le=X.imageManager.getPattern(z.to.toString()),{width:we,height:De}=X.imageManager.getPixelSize(),ke=Math.pow(2,ee.tileID.overscaledZ),Be=ee.tileSize*Math.pow(2,X.transform.tileZoom)/ke,Re=Be*(ee.tileID.canonical.x+ee.tileID.wrap*ke),et=Be*ee.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[we,De],u_mix:V.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:V.fromScale,u_scale_b:V.toScale,u_tile_units_to_pixels:1/He(ee,1,X.transform.tileZoom),u_pixel_coord_upper:[Re>>16,et>>16],u_pixel_coord_lower:[65535&Re,65535&et]}}(S,M,v,C),{u_matrix:A,u_opacity:l}),qi={fillExtrusion:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_lightpos:new a.Uniform3f(A,l.u_lightpos),u_lightintensity:new a.Uniform1f(A,l.u_lightintensity),u_lightcolor:new a.Uniform3f(A,l.u_lightcolor),u_vertical_gradient:new a.Uniform1f(A,l.u_vertical_gradient),u_opacity:new a.Uniform1f(A,l.u_opacity)}),fillExtrusionPattern:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_lightpos:new a.Uniform3f(A,l.u_lightpos),u_lightintensity:new a.Uniform1f(A,l.u_lightintensity),u_lightcolor:new a.Uniform3f(A,l.u_lightcolor),u_vertical_gradient:new a.Uniform1f(A,l.u_vertical_gradient),u_height_factor:new a.Uniform1f(A,l.u_height_factor),u_image:new a.Uniform1i(A,l.u_image),u_texsize:new a.Uniform2f(A,l.u_texsize),u_pixel_coord_upper:new a.Uniform2f(A,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(A,l.u_pixel_coord_lower),u_scale:new a.Uniform3f(A,l.u_scale),u_fade:new a.Uniform1f(A,l.u_fade),u_opacity:new a.Uniform1f(A,l.u_opacity)}),fill:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix)}),fillPattern:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_image:new a.Uniform1i(A,l.u_image),u_texsize:new a.Uniform2f(A,l.u_texsize),u_pixel_coord_upper:new a.Uniform2f(A,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(A,l.u_pixel_coord_lower),u_scale:new a.Uniform3f(A,l.u_scale),u_fade:new a.Uniform1f(A,l.u_fade)}),fillOutline:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_world:new a.Uniform2f(A,l.u_world)}),fillOutlinePattern:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_world:new a.Uniform2f(A,l.u_world),u_image:new a.Uniform1i(A,l.u_image),u_texsize:new a.Uniform2f(A,l.u_texsize),u_pixel_coord_upper:new a.Uniform2f(A,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(A,l.u_pixel_coord_lower),u_scale:new a.Uniform3f(A,l.u_scale),u_fade:new a.Uniform1f(A,l.u_fade)}),circle:(A,l)=>({u_camera_to_center_distance:new a.Uniform1f(A,l.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(A,l.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(A,l.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(A,l.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(A,l.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(A,l.u_matrix)}),collisionBox:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_camera_to_center_distance:new a.Uniform1f(A,l.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(A,l.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(A,l.u_extrude_scale),u_overscale_factor:new a.Uniform1f(A,l.u_overscale_factor)}),collisionCircle:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_inv_matrix:new a.UniformMatrix4f(A,l.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(A,l.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(A,l.u_viewport_size)}),debug:(A,l)=>({u_color:new a.UniformColor(A,l.u_color),u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_overlay:new a.Uniform1i(A,l.u_overlay),u_overlay_scale:new a.Uniform1f(A,l.u_overlay_scale)}),clippingMask:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix)}),heatmap:(A,l)=>({u_extrude_scale:new a.Uniform1f(A,l.u_extrude_scale),u_intensity:new a.Uniform1f(A,l.u_intensity),u_matrix:new a.UniformMatrix4f(A,l.u_matrix)}),heatmapTexture:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_world:new a.Uniform2f(A,l.u_world),u_image:new a.Uniform1i(A,l.u_image),u_color_ramp:new a.Uniform1i(A,l.u_color_ramp),u_opacity:new a.Uniform1f(A,l.u_opacity)}),hillshade:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_image:new a.Uniform1i(A,l.u_image),u_latrange:new a.Uniform2f(A,l.u_latrange),u_light:new a.Uniform2f(A,l.u_light),u_shadow:new a.UniformColor(A,l.u_shadow),u_highlight:new a.UniformColor(A,l.u_highlight),u_accent:new a.UniformColor(A,l.u_accent)}),hillshadePrepare:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_image:new a.Uniform1i(A,l.u_image),u_dimension:new a.Uniform2f(A,l.u_dimension),u_zoom:new a.Uniform1f(A,l.u_zoom),u_unpack:new a.Uniform4f(A,l.u_unpack)}),line:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_ratio:new a.Uniform1f(A,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(A,l.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(A,l.u_units_to_pixels)}),lineGradient:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_ratio:new a.Uniform1f(A,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(A,l.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(A,l.u_units_to_pixels),u_image:new a.Uniform1i(A,l.u_image),u_image_height:new a.Uniform1f(A,l.u_image_height)}),linePattern:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_texsize:new a.Uniform2f(A,l.u_texsize),u_ratio:new a.Uniform1f(A,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(A,l.u_device_pixel_ratio),u_image:new a.Uniform1i(A,l.u_image),u_units_to_pixels:new a.Uniform2f(A,l.u_units_to_pixels),u_scale:new a.Uniform3f(A,l.u_scale),u_fade:new a.Uniform1f(A,l.u_fade)}),lineSDF:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_ratio:new a.Uniform1f(A,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(A,l.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(A,l.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(A,l.u_patternscale_a),u_patternscale_b:new a.Uniform2f(A,l.u_patternscale_b),u_sdfgamma:new a.Uniform1f(A,l.u_sdfgamma),u_image:new a.Uniform1i(A,l.u_image),u_tex_y_a:new a.Uniform1f(A,l.u_tex_y_a),u_tex_y_b:new a.Uniform1f(A,l.u_tex_y_b),u_mix:new a.Uniform1f(A,l.u_mix)}),raster:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_tl_parent:new a.Uniform2f(A,l.u_tl_parent),u_scale_parent:new a.Uniform1f(A,l.u_scale_parent),u_buffer_scale:new a.Uniform1f(A,l.u_buffer_scale),u_fade_t:new a.Uniform1f(A,l.u_fade_t),u_opacity:new a.Uniform1f(A,l.u_opacity),u_image0:new a.Uniform1i(A,l.u_image0),u_image1:new a.Uniform1i(A,l.u_image1),u_brightness_low:new a.Uniform1f(A,l.u_brightness_low),u_brightness_high:new a.Uniform1f(A,l.u_brightness_high),u_saturation_factor:new a.Uniform1f(A,l.u_saturation_factor),u_contrast_factor:new a.Uniform1f(A,l.u_contrast_factor),u_spin_weights:new a.Uniform3f(A,l.u_spin_weights)}),symbolIcon:(A,l)=>({u_is_size_zoom_constant:new a.Uniform1i(A,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(A,l.u_is_size_feature_constant),u_size_t:new a.Uniform1f(A,l.u_size_t),u_size:new a.Uniform1f(A,l.u_size),u_camera_to_center_distance:new a.Uniform1f(A,l.u_camera_to_center_distance),u_pitch:new a.Uniform1f(A,l.u_pitch),u_rotate_symbol:new a.Uniform1i(A,l.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(A,l.u_aspect_ratio),u_fade_change:new a.Uniform1f(A,l.u_fade_change),u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(A,l.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(A,l.u_coord_matrix),u_is_text:new a.Uniform1i(A,l.u_is_text),u_pitch_with_map:new a.Uniform1i(A,l.u_pitch_with_map),u_texsize:new a.Uniform2f(A,l.u_texsize),u_texture:new a.Uniform1i(A,l.u_texture)}),symbolSDF:(A,l)=>({u_is_size_zoom_constant:new a.Uniform1i(A,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(A,l.u_is_size_feature_constant),u_size_t:new a.Uniform1f(A,l.u_size_t),u_size:new a.Uniform1f(A,l.u_size),u_camera_to_center_distance:new a.Uniform1f(A,l.u_camera_to_center_distance),u_pitch:new a.Uniform1f(A,l.u_pitch),u_rotate_symbol:new a.Uniform1i(A,l.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(A,l.u_aspect_ratio),u_fade_change:new a.Uniform1f(A,l.u_fade_change),u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(A,l.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(A,l.u_coord_matrix),u_is_text:new a.Uniform1i(A,l.u_is_text),u_pitch_with_map:new a.Uniform1i(A,l.u_pitch_with_map),u_texsize:new a.Uniform2f(A,l.u_texsize),u_texture:new a.Uniform1i(A,l.u_texture),u_gamma_scale:new a.Uniform1f(A,l.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(A,l.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(A,l.u_is_halo)}),symbolTextAndIcon:(A,l)=>({u_is_size_zoom_constant:new a.Uniform1i(A,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(A,l.u_is_size_feature_constant),u_size_t:new a.Uniform1f(A,l.u_size_t),u_size:new a.Uniform1f(A,l.u_size),u_camera_to_center_distance:new a.Uniform1f(A,l.u_camera_to_center_distance),u_pitch:new a.Uniform1f(A,l.u_pitch),u_rotate_symbol:new a.Uniform1i(A,l.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(A,l.u_aspect_ratio),u_fade_change:new a.Uniform1f(A,l.u_fade_change),u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(A,l.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(A,l.u_coord_matrix),u_is_text:new a.Uniform1i(A,l.u_is_text),u_pitch_with_map:new a.Uniform1i(A,l.u_pitch_with_map),u_texsize:new a.Uniform2f(A,l.u_texsize),u_texsize_icon:new a.Uniform2f(A,l.u_texsize_icon),u_texture:new a.Uniform1i(A,l.u_texture),u_texture_icon:new a.Uniform1i(A,l.u_texture_icon),u_gamma_scale:new a.Uniform1f(A,l.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(A,l.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(A,l.u_is_halo)}),background:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_opacity:new a.Uniform1f(A,l.u_opacity),u_color:new a.UniformColor(A,l.u_color)}),backgroundPattern:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_opacity:new a.Uniform1f(A,l.u_opacity),u_image:new a.Uniform1i(A,l.u_image),u_pattern_tl_a:new a.Uniform2f(A,l.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(A,l.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(A,l.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(A,l.u_pattern_br_b),u_texsize:new a.Uniform2f(A,l.u_texsize),u_mix:new a.Uniform1f(A,l.u_mix),u_pattern_size_a:new a.Uniform2f(A,l.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(A,l.u_pattern_size_b),u_scale_a:new a.Uniform1f(A,l.u_scale_a),u_scale_b:new a.Uniform1f(A,l.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(A,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(A,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(A,l.u_tile_units_to_pixels)}),terrain:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_texture:new a.Uniform1i(A,l.u_texture),u_ele_delta:new a.Uniform1f(A,l.u_ele_delta)}),terrainDepth:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_ele_delta:new a.Uniform1f(A,l.u_ele_delta)}),terrainCoords:(A,l)=>({u_matrix:new a.UniformMatrix4f(A,l.u_matrix),u_texture:new a.Uniform1i(A,l.u_texture),u_terrain_coords_id:new a.Uniform1f(A,l.u_terrain_coords_id),u_ele_delta:new a.Uniform1f(A,l.u_ele_delta)})};class rn{constructor(l,v,S){this.context=l;const C=l.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!S,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const v=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),v.bufferSubData(v.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class qa{constructor(l,v,S,C){this.length=v.length,this.attributes=S,this.itemSize=v.bytesPerElement,this.dynamicDraw=C,this.context=l;const M=l.gl;this.buffer=M.createBuffer(),l.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const v=this.context.gl;this.bind(),v.bufferSubData(v.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,v){for(let S=0;S<this.attributes.length;S++){const C=v.attributes[this.attributes[S].name];C!==void 0&&l.enableVertexAttribArray(C)}}setVertexAttribPointers(l,v,S){for(let C=0;C<this.attributes.length;C++){const M=this.attributes[C],z=v.attributes[M.name];z!==void 0&&l.vertexAttribPointer(z,M.components,l[Wi[M.type]],!1,this.itemSize,M.offset+this.itemSize*(S||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fi=new WeakMap;function Co(A){if(Fi.has(A))return Fi.get(A);{const l=A.getParameter(A.VERSION).startsWith("WebGL 2.0");return Fi.set(A,l),l}}class Zr{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Wa extends Zr{getDefault(){return a.Color.transparent}set(l){const v=this.current;(l.r!==v.r||l.g!==v.g||l.b!==v.b||l.a!==v.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class si extends Zr{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Dl extends Zr{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class _o extends Zr{getDefault(){return[!0,!0,!0,!0]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||l[2]!==v[2]||l[3]!==v[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ui extends Zr{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Ci extends Zr{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class fs extends Zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const v=this.current;(l.func!==v.func||l.ref!==v.ref||l.mask!==v.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Sf extends Zr{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||l[2]!==v[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Ru extends Zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),this.current=l,this.dirty=!1}}class Nc extends Zr{getDefault(){return[0,1]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class ou extends Zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),this.current=l,this.dirty=!1}}class Ii extends Zr{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class ao extends Zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.BLEND):v.disable(v.BLEND),this.current=l,this.dirty=!1}}class ri extends Zr{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Cs extends Zr{getDefault(){return a.Color.transparent}set(l){const v=this.current;(l.r!==v.r||l.g!==v.g||l.b!==v.b||l.a!==v.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Aa extends Zr{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class ol extends Zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;l?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),this.current=l,this.dirty=!1}}class Zn extends Zr{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class cr extends Zr{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Pf extends Zr{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class al extends Zr{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class ki extends Zr{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const v=this.current;(l[0]!==v[0]||l[1]!==v[1]||l[2]!==v[2]||l[3]!==v[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Ca extends Zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Ia extends Zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindRenderbuffer(v.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Is extends Zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindTexture(v.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Fc extends Zr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class $c extends Zr{getDefault(){return null}set(l){const v=this.gl;v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ar extends Zr{getDefault(){return null}set(l){var v;if(l===this.current&&!this.dirty)return;const S=this.gl;Co(S)?S.bindVertexArray(l):(v=S.getExtension("OES_vertex_array_object"))===null||v===void 0||v.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Oa extends Zr{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class pi extends Zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Nl extends Zr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class $i extends Zr{constructor(l,v){super(l),this.context=l,this.parent=v}getDefault(){return null}}class xh extends $i{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const v=this.gl;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class nn extends $i{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ku extends $i{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Qn{constructor(l,v,S,C,M){this.context=l,this.width=v,this.height=S;const z=l.gl,V=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new xh(l,V),C)this.depthAttachment=M?new ku(l,V):new nn(l,V);else if(M)throw new Error("Stencil cannot be setted without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,v=this.colorAttachment.get();if(v&&l.deleteTexture(v),this.depthAttachment){const S=this.depthAttachment.get();S&&l.deleteRenderbuffer(S)}l.deleteFramebuffer(this.framebuffer)}}class li{constructor(l,v,S){this.blendFunction=l,this.blendColor=v,this.mask=S}}li.Replace=[1,0],li.disabled=new li(li.Replace,a.Color.transparent,[!1,!1,!1,!1]),li.unblended=new li(li.Replace,a.Color.transparent,[!0,!0,!0,!0]),li.alphaBlended=new li([1,771],a.Color.transparent,[!0,!0,!0,!0]);class Xi{constructor(l){var v,S;if(this.gl=l,this.clearColor=new Wa(this),this.clearDepth=new si(this),this.clearStencil=new Dl(this),this.colorMask=new _o(this),this.depthMask=new ui(this),this.stencilMask=new Ci(this),this.stencilFunc=new fs(this),this.stencilOp=new Sf(this),this.stencilTest=new Ru(this),this.depthRange=new Nc(this),this.depthTest=new ou(this),this.depthFunc=new Ii(this),this.blend=new ao(this),this.blendFunc=new ri(this),this.blendColor=new Cs(this),this.blendEquation=new Aa(this),this.cullFace=new ol(this),this.cullFaceSide=new Zn(this),this.frontFace=new cr(this),this.program=new Pf(this),this.activeTexture=new al(this),this.viewport=new ki(this),this.bindFramebuffer=new Ca(this),this.bindRenderbuffer=new Ia(this),this.bindTexture=new Is(this),this.bindVertexBuffer=new Fc(this),this.bindElementBuffer=new $c(this),this.bindVertexArray=new ar(this),this.pixelStoreUnpack=new Oa(this),this.pixelStoreUnpackPremultiplyAlpha=new pi(this),this.pixelStoreUnpackFlipY=new Nl(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Co(l)){this.HALF_FLOAT=l.HALF_FLOAT;const C=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(v=l.RGBA16F)!==null&&v!==void 0?v:C==null?void 0:C.RGBA16F_EXT,this.RGB16F=(S=l.RGB16F)!==null&&S!==void 0?S:C==null?void 0:C.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const C=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=C==null?void 0:C.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,v){return new rn(this,l,v)}createVertexBuffer(l,v,S){return new qa(this,l,v,S)}createRenderbuffer(l,v,S){const C=this.gl,M=C.createRenderbuffer();return this.bindRenderbuffer.set(M),C.renderbufferStorage(C.RENDERBUFFER,l,v,S),this.bindRenderbuffer.set(null),M}createFramebuffer(l,v,S,C){return new Qn(this,l,v,S,C)}clear({color:l,depth:v,stencil:S}){const C=this.gl;let M=0;l&&(M|=C.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),v!==void 0&&(M|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(v),this.depthMask.set(!0)),S!==void 0&&(M|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(S),this.stencilMask.set(255)),C.clear(M)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.deepEqual(l.blendFunction,li.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Co(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var v;return Co(this.gl)?this.gl.deleteVertexArray(l):(v=this.gl.getExtension("OES_vertex_array_object"))===null||v===void 0?void 0:v.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}class qr{constructor(l,v,S){this.func=l,this.mask=v,this.range=S}}qr.ReadOnly=!1,qr.ReadWrite=!0,qr.disabled=new qr(519,qr.ReadOnly,[0,1]);const Fl=7680;class bn{constructor(l,v,S,C,M,z){this.test=l,this.ref=v,this.mask=S,this.fail=C,this.depthFail=M,this.pass=z}}bn.disabled=new bn({func:519,mask:0},0,0,Fl,Fl,Fl);class yr{constructor(l,v,S){this.enable=l,this.mode=v,this.frontFace=S}}let Yi;function Os(A,l,v,S,C,M,z){const V=A.context,X=V.gl,ee=A.useProgram("collisionBox"),se=[];let le=0,we=0;for(let Ve=0;Ve<S.length;Ve++){const it=S[Ve],ht=l.getTile(it),dt=ht.getBucket(v);if(!dt)continue;let wt=it.posMatrix;C[0]===0&&C[1]===0||(wt=A.translatePosMatrix(it.posMatrix,ht,C,M));const At=z?dt.textCollisionBox:dt.iconCollisionBox,St=dt.collisionCircleArray;if(St.length>0){const Dt=a.create(),pr=wt;a.mul(Dt,dt.placementInvProjMatrix,A.transform.glCoordMatrix),a.mul(Dt,Dt,dt.placementViewportMatrix),se.push({circleArray:St,circleOffset:we,transform:pr,invTransform:Dt,coord:it}),le+=St.length/4,we=le}At&&ee.draw(V,X.LINES,qr.disabled,bn.disabled,A.colorModeForRenderPass(),yr.disabled,It(wt,A.transform,ht),A.style.map.terrain&&A.style.map.terrain.getTerrainData(it),v.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,null,A.transform.zoom,null,null,At.collisionVertexBuffer)}if(!z||!se.length)return;const De=A.useProgram("collisionCircle"),ke=new a.CollisionCircleLayoutArray;ke.resize(4*le),ke._trim();let Be=0;for(const Ve of se)for(let it=0;it<Ve.circleArray.length/4;it++){const ht=4*it,dt=Ve.circleArray[ht+0],wt=Ve.circleArray[ht+1],At=Ve.circleArray[ht+2],St=Ve.circleArray[ht+3];ke.emplace(Be++,dt,wt,At,St,0),ke.emplace(Be++,dt,wt,At,St,1),ke.emplace(Be++,dt,wt,At,St,2),ke.emplace(Be++,dt,wt,At,St,3)}(!Yi||Yi.length<2*le)&&(Yi=function(Ve){const it=2*Ve,ht=new a.QuadTriangleArray;ht.resize(it),ht._trim();for(let dt=0;dt<it;dt++){const wt=6*dt;ht.uint16[wt+0]=4*dt+0,ht.uint16[wt+1]=4*dt+1,ht.uint16[wt+2]=4*dt+2,ht.uint16[wt+3]=4*dt+2,ht.uint16[wt+4]=4*dt+3,ht.uint16[wt+5]=4*dt+0}return ht}(le));const Re=V.createIndexBuffer(Yi,!0),et=V.createVertexBuffer(ke,a.collisionCircleLayout.members,!0);for(const Ve of se){const it={u_matrix:Ve.transform,u_inv_matrix:Ve.invTransform,u_camera_to_center_distance:(ct=A.transform).cameraToCenterDistance,u_viewport_size:[ct.width,ct.height]};De.draw(V,X.TRIANGLES,qr.disabled,bn.disabled,A.colorModeForRenderPass(),yr.disabled,it,A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ve.coord),v.id,et,Re,a.SegmentVector.simpleSegment(0,2*Ve.circleOffset,Ve.circleArray.length,Ve.circleArray.length/2),null,A.transform.zoom,null,null,null)}var ct;et.destroy(),Re.destroy()}yr.disabled=new yr(!1,1029,2305),yr.backCCW=new yr(!0,1029,2305);const Ta=a.identity(new Float32Array(16));function Qo(A,l,v,S,C,M){const{horizontalAlign:z,verticalAlign:V}=a.getAnchorAlignment(A);return new a.Point((-(z-.5)*l/C+S[0])*M,(-(V-.5)*v/C+S[1])*M)}function zi(A,l,v,S,C,M,z,V,X,ee,se){const le=A.text.placedSymbolArray,we=A.text.dynamicLayoutVertexArray,De=A.icon.dynamicLayoutVertexArray,ke={};we.clear();for(let Be=0;Be<le.length;Be++){const Re=le.get(Be),et=Re.hidden||!Re.crossTileID||A.allowVerticalPlacement&&!Re.placedOrientation?null:S[Re.crossTileID];if(et){const ct=new a.Point(Re.anchorX,Re.anchorY),Ve=Nt(ct,v?z:M,se),it=yn(C.cameraToCenterDistance,Ve.signedDistanceFromCamera);let ht=a.evaluateSizeForFeature(A.textSizeData,X,Re)*it/a.ONE_EM;v&&(ht*=A.tilePixelRatio/V);const{width:dt,height:wt,anchor:At,textOffset:St,textBoxScale:Dt}=et,pr=Qo(At,dt,wt,St,Dt,ht),cn=v?Nt(ct.add(pr),M,se).point:Ve.point.add(l?pr.rotate(-C.angle):pr),jt=A.allowVerticalPlacement&&Re.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let xr=0;xr<Re.numGlyphs;xr++)a.addDynamicAttributes(we,cn,jt);ee&&Re.associatedIconIndex>=0&&(ke[Re.associatedIconIndex]={shiftedAnchor:cn,angle:jt})}else Me(Re.numGlyphs,we)}if(ee){De.clear();const Be=A.icon.placedSymbolArray;for(let Re=0;Re<Be.length;Re++){const et=Be.get(Re);if(et.hidden)Me(et.numGlyphs,De);else{const ct=ke[Re];if(ct)for(let Ve=0;Ve<et.numGlyphs;Ve++)a.addDynamicAttributes(De,ct.shiftedAnchor,ct.angle);else Me(et.numGlyphs,De)}}A.icon.dynamicLayoutVertexBuffer.updateData(De)}A.text.dynamicLayoutVertexBuffer.updateData(we)}function Dd(A,l,v){return v.iconsInText&&l?"symbolTextAndIcon":A?"symbolSDF":"symbolIcon"}function zc(A,l,v,S,C,M,z,V,X,ee,se,le){const we=A.context,De=we.gl,ke=A.transform,Be=V==="map",Re=X==="map",et=V!=="viewport"&&v.layout.get("symbol-placement")!=="point",ct=Be&&!Re&&!et,Ve=!v.layout.get("symbol-sort-key").isConstant();let it=!1;const ht=A.depthModeForSublayer(0,qr.ReadOnly),dt=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),wt=[];for(const At of S){const St=l.getTile(At),Dt=St.getBucket(v);if(!Dt)continue;const pr=C?Dt.text:Dt.icon;if(!pr||!pr.segments.get().length||!pr.hasVisibleVertices)continue;const cn=pr.programConfigurations.get(v.id),jt=C||Dt.sdfIcons,xr=C?Dt.textSizeData:Dt.iconSizeData,fr=Re||ke.pitch!==0,Ui=A.useProgram(Dd(jt,C,Dt),cn),fn=a.evaluateSizeForZoom(xr,ke.zoom),Sr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(At);let hn,Qi,gi,hu,Da=[0,0],Eo=null;if(C)Qi=St.glyphAtlasTexture,gi=De.LINEAR,hn=St.glyphAtlasTexture.size,Dt.iconsInText&&(Da=St.imageAtlasTexture.size,Eo=St.imageAtlasTexture,hu=fr||A.options.rotating||A.options.zooming||xr.kind==="composite"||xr.kind==="camera"?De.LINEAR:De.NEAREST);else{const aa=v.layout.get("icon-size").constantOr(0)!==1||Dt.iconsNeedLinear;Qi=St.imageAtlasTexture,gi=jt||A.options.rotating||A.options.zooming||aa||fr?De.LINEAR:De.NEAREST,hn=St.imageAtlasTexture.size}const zs=He(St,1,A.transform.zoom),Vl=Lr(At.posMatrix,Re,Be,A.transform,zs),dl=Rr(At.posMatrix,Re,Be,A.transform,zs),Gl=dt&&Dt.hasTextData(),Sh=v.layout.get("icon-text-fit")!=="none"&&Gl&&Dt.hasIconData();if(et){const aa=A.style.map.terrain?(Ka,eo)=>A.style.map.terrain.getElevation(At,Ka,eo):null,qo=v.layout.get("text-rotation-alignment")==="map";ti(Dt,At.posMatrix,A,C,Vl,dl,Re,ee,qo,aa)}const Gc=A.translatePosMatrix(At.posMatrix,St,M,z),lc=et||C&&dt||Sh?Ta:Vl,Ro=A.translatePosMatrix(dl,St,M,z,!0),oa=jt&&v.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Za;Za=jt?Dt.iconsInText?cs(xr.kind,fn,ct,Re,A,Gc,lc,Ro,hn,Da):on(xr.kind,fn,ct,Re,A,Gc,lc,Ro,C,hn,!0):yo(xr.kind,fn,ct,Re,A,Gc,lc,Ro,C,hn);const Ph={program:Ui,buffers:pr,uniformValues:Za,atlasTexture:Qi,atlasTextureIcon:Eo,atlasInterpolation:gi,atlasInterpolationIcon:hu,isSDF:jt,hasHalo:oa};if(Ve&&Dt.canOverlap){it=!0;const aa=pr.segments.get();for(const qo of aa)wt.push({segments:new a.SegmentVector([qo]),sortKey:qo.sortKey,state:Ph,terrainData:Sr})}else wt.push({segments:pr.segments,sortKey:0,state:Ph,terrainData:Sr})}it&&wt.sort((At,St)=>At.sortKey-St.sortKey);for(const At of wt){const St=At.state;if(we.activeTexture.set(De.TEXTURE0),St.atlasTexture.bind(St.atlasInterpolation,De.CLAMP_TO_EDGE),St.atlasTextureIcon&&(we.activeTexture.set(De.TEXTURE1),St.atlasTextureIcon&&St.atlasTextureIcon.bind(St.atlasInterpolationIcon,De.CLAMP_TO_EDGE)),St.isSDF){const Dt=St.uniformValues;St.hasHalo&&(Dt.u_is_halo=1,Ma(St.buffers,At.segments,v,A,St.program,ht,se,le,Dt,At.terrainData)),Dt.u_is_halo=0}Ma(St.buffers,At.segments,v,A,St.program,ht,se,le,St.uniformValues,At.terrainData)}}function Ma(A,l,v,S,C,M,z,V,X,ee){const se=S.context;C.draw(se,se.gl.TRIANGLES,M,z,V,yr.disabled,X,ee,v.id,A.layoutVertexBuffer,A.indexBuffer,l,v.paint,S.transform.zoom,A.programConfigurations.get(v.id),A.dynamicLayoutVertexBuffer,A.opacityVertexBuffer)}function Vo(A,l,v,S,C){if(!v||!S||!S.imageAtlas)return;const M=S.imageAtlas.patternPositions;let z=M[v.to.toString()],V=M[v.from.toString()];if(!z||!V){const X=C.getPaintProperty(l);z=M[X],V=M[X]}z&&V&&A.setConstantPatternPositions(z,V)}function Ts(A,l,v,S,C,M,z){const V=A.context.gl,X="fill-pattern",ee=v.paint.get(X),se=ee&&ee.constantOr(1),le=v.getCrossfadeParameters();let we,De,ke,Be,Re;z?(De=se&&!v.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=V.LINES):(De=se?"fillPattern":"fill",we=V.TRIANGLES);const et=ee.constantOr(null);for(const ct of S){const Ve=l.getTile(ct);if(se&&!Ve.patternsLoaded())continue;const it=Ve.getBucket(v);if(!it)continue;const ht=it.programConfigurations.get(v.id),dt=A.useProgram(De,ht),wt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(ct);se&&(A.context.activeTexture.set(V.TEXTURE0),Ve.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),ht.updatePaintBuffers(le)),Vo(ht,X,et,Ve,v);const At=wt?ct:null,St=A.translatePosMatrix(At?At.posMatrix:ct.posMatrix,Ve,v.paint.get("fill-translate"),v.paint.get("fill-translate-anchor"));if(z){Be=it.indexBuffer2,Re=it.segments2;const Dt=[V.drawingBufferWidth,V.drawingBufferHeight];ke=De==="fillOutlinePattern"&&se?tl(St,A,le,Ve,Dt):Sa(St,Dt)}else Be=it.indexBuffer,Re=it.segments,ke=se?vo(St,A,le,Ve):el(St);dt.draw(A.context,we,C,A.stencilModeForClipping(ct),M,yr.disabled,ke,wt,v.id,it.layoutVertexBuffer,Be,Re,v.paint,A.transform.zoom,ht)}}function bo(A,l,v,S,C,M,z){const V=A.context,X=V.gl,ee="fill-extrusion-pattern",se=v.paint.get(ee),le=se.constantOr(1),we=v.getCrossfadeParameters(),De=v.paint.get("fill-extrusion-opacity"),ke=se.constantOr(null);for(const Be of S){const Re=l.getTile(Be),et=Re.getBucket(v);if(!et)continue;const ct=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Be),Ve=et.programConfigurations.get(v.id),it=A.useProgram(le?"fillExtrusionPattern":"fillExtrusion",Ve);le&&(A.context.activeTexture.set(X.TEXTURE0),Re.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ve.updatePaintBuffers(we)),Vo(Ve,ee,ke,Re,v);const ht=A.translatePosMatrix(Be.posMatrix,Re,v.paint.get("fill-extrusion-translate"),v.paint.get("fill-extrusion-translate-anchor")),dt=v.paint.get("fill-extrusion-vertical-gradient"),wt=le?Ef(ht,A,dt,De,Be,we,Re):Mu(ht,A,dt,De);it.draw(V,V.gl.TRIANGLES,C,M,z,yr.backCCW,wt,ct,v.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,v.paint,A.transform.zoom,Ve,A.style.map.terrain&&et.centroidVertexBuffer)}}function kr(A,l,v,S,C,M,z){const V=A.context,X=V.gl,ee=v.fbo;if(!ee)return;const se=A.useProgram("hillshade"),le=A.style.map.terrain&&A.style.map.terrain.getTerrainData(l);V.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ee.colorAttachment.get()),se.draw(V,X.TRIANGLES,C,M,z,yr.disabled,((we,De,ke,Be)=>{const Re=ke.paint.get("hillshade-shadow-color"),et=ke.paint.get("hillshade-highlight-color"),ct=ke.paint.get("hillshade-accent-color");let Ve=ke.paint.get("hillshade-illumination-direction")*(Math.PI/180);ke.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ve-=we.transform.angle);const it=!we.options.moving;return{u_matrix:Be?Be.posMatrix:we.transform.calculatePosMatrix(De.tileID.toUnwrapped(),it),u_image:0,u_latrange:nl(0,De.tileID),u_light:[ke.paint.get("hillshade-exaggeration"),Ve],u_shadow:Re,u_highlight:et,u_accent:ct}})(A,v,S,le?l:null),le,S.id,A.rasterBoundsBuffer,A.quadTriangleIndexBuffer,A.rasterBoundsSegments)}function ea(A,l,v,S,C,M){const z=A.context,V=z.gl,X=l.dem;if(X&&X.data){const ee=X.dim,se=X.stride,le=X.getPixels();if(z.activeTexture.set(V.TEXTURE1),z.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||A.getTileTexture(se),l.demTexture){const De=l.demTexture;De.update(le,{premultiply:!1}),De.bind(V.NEAREST,V.CLAMP_TO_EDGE)}else l.demTexture=new Q(z,le,V.RGBA,{premultiply:!1}),l.demTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE);z.activeTexture.set(V.TEXTURE0);let we=l.fbo;if(!we){const De=new Q(z,{width:ee,height:ee,data:null},V.RGBA);De.bind(V.LINEAR,V.CLAMP_TO_EDGE),we=l.fbo=z.createFramebuffer(ee,ee,!0,!1),we.colorAttachment.set(De.texture)}z.bindFramebuffer.set(we.framebuffer),z.viewport.set([0,0,ee,ee]),A.useProgram("hillshadePrepare").draw(z,V.TRIANGLES,S,C,M,yr.disabled,((De,ke)=>{const Be=ke.stride,Re=a.create();return a.ortho(Re,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Re,Re,[0,-a.EXTENT,0]),{u_matrix:Re,u_image:1,u_dimension:[Be,Be],u_zoom:De.overscaledZ,u_unpack:ke.getUnpackVector()}})(l.tileID,X),null,v.id,A.rasterBoundsBuffer,A.quadTriangleIndexBuffer,A.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function hs(A,l,v,S,C,M){const z=S.paint.get("raster-fade-duration");if(!M&&z>0){const V=a.browser.now(),X=(V-A.timeAdded)/z,ee=l?(V-l.timeAdded)/z:-1,se=v.getSource(),le=C.coveringZoomLevel({tileSize:se.tileSize,roundZoom:se.roundZoom}),we=!l||Math.abs(l.tileID.overscaledZ-le)>Math.abs(A.tileID.overscaledZ-le),De=we&&A.refreshedUponExpiration?1:a.clamp(we?X:1-ee,0,1);return A.refreshedUponExpiration&&X>=1&&(A.refreshedUponExpiration=!1),l?{opacity:1,mix:1-De}:{opacity:De,mix:0}}return{opacity:1,mix:0}}const Xa=new a.Color(1,0,0,1),an=new a.Color(0,1,0,1),$l=new a.Color(0,0,1,1),La=new a.Color(1,0,1,1),xo=new a.Color(0,1,1,1);function Ms(A,l,v,S){Du(A,0,l+v/2,A.transform.width,v,S)}function Ya(A,l,v,S){Du(A,l-v/2,0,v,A.transform.height,S)}function Du(A,l,v,S,C,M){const z=A.context,V=z.gl;V.enable(V.SCISSOR_TEST),V.scissor(l*A.pixelRatio,v*A.pixelRatio,S*A.pixelRatio,C*A.pixelRatio),z.clear({color:M}),V.disable(V.SCISSOR_TEST)}function so(A,l,v){const S=A.context,C=S.gl,M=v.posMatrix,z=A.useProgram("debug"),V=qr.disabled,X=bn.disabled,ee=A.colorModeForRenderPass(),se="$debug",le=A.style.map.terrain&&A.style.map.terrain.getTerrainData(v);S.activeTexture.set(C.TEXTURE0);const we=l.getTileByID(v.key).latestRawTileData,De=Math.floor((we&&we.byteLength||0)/1024),ke=l.getTile(v).tileSize,Be=512/Math.min(ke,512)*(v.overscaledZ/A.transform.zoom)*.5;let Re=v.canonical.toString();v.overscaledZ!==v.canonical.z&&(Re+=` => ${v.overscaledZ}`),function(et,ct){et.initDebugOverlayCanvas();const Ve=et.debugOverlayCanvas,it=et.context.gl,ht=et.debugOverlayCanvas.getContext("2d");ht.clearRect(0,0,Ve.width,Ve.height),ht.shadowColor="white",ht.shadowBlur=2,ht.lineWidth=1.5,ht.strokeStyle="white",ht.textBaseline="top",ht.font="bold 36px Open Sans, sans-serif",ht.fillText(ct,5,5),ht.strokeText(ct,5,5),et.debugOverlayTexture.update(Ve),et.debugOverlayTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE)}(A,`${Re} ${De}kB`),z.draw(S,C.TRIANGLES,V,X,li.alphaBlended,yr.disabled,rl(M,a.Color.transparent,Be),null,se,A.debugBuffer,A.quadTriangleIndexBuffer,A.debugSegments),z.draw(S,C.LINE_STRIP,V,X,ee,yr.disabled,rl(M,a.Color.red),le,se,A.debugBuffer,A.tileBorderIndexBuffer,A.debugSegments)}function Af(A,l,v){const S=A.context,C=S.gl,M=A.colorModeForRenderPass(),z=new qr(C.LEQUAL,qr.ReadWrite,A.depthRangeFor3D),V=A.useProgram("terrain"),X=l.getTerrainMesh();S.bindFramebuffer.set(null),S.viewport.set([0,0,A.width,A.height]);for(const ee of v){const se=A.renderToTexture.getTexture(ee),le=l.getTerrainData(ee.tileID);S.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,se.texture);const we={u_matrix:A.transform.calculatePosMatrix(ee.tileID.toUnwrapped()),u_texture:0,u_ele_delta:l.getMeshFrameDelta(A.transform.zoom)};V.draw(S,C.TRIANGLES,z,bn.disabled,M,yr.backCCW,we,le,"terrain",X.vertexBuffer,X.indexBuffer,X.segments)}}class Bc{constructor(l,v){this.context=new Xi(l),this.transform=v,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=xe.maxUnderzooming+xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new di}resize(l,v,S){if(this.width=Math.floor(l*S),this.height=Math.floor(v*S),this.pixelRatio=S,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const l=this.context,v=new a.PosArray;v.emplaceBack(0,0),v.emplaceBack(a.EXTENT,0),v.emplaceBack(0,a.EXTENT),v.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(v,Uo.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const S=new a.PosArray;S.emplaceBack(0,0),S.emplaceBack(a.EXTENT,0),S.emplaceBack(0,a.EXTENT),S.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=l.createVertexBuffer(S,Uo.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const C=new a.RasterBoundsArray;C.emplaceBack(0,0,0,0),C.emplaceBack(a.EXTENT,0,a.EXTENT,0),C.emplaceBack(0,a.EXTENT,0,a.EXTENT),C.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(C,pt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const M=new a.PosArray;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(M,Uo.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const z=new a.LineStripIndexArray;z.emplaceBack(0),z.emplaceBack(1),z.emplaceBack(3),z.emplaceBack(2),z.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(z);const V=new a.TriangleIndexArray;V.emplaceBack(0,1,2),V.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(V);const X=this.context.gl;this.stencilClearMode=new bn({func:X.ALWAYS,mask:0},0,255,X.ZERO,X.ZERO,X.ZERO)}clearStencil(){const l=this.context,v=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const S=a.create();a.ortho(S,0,this.width,this.height,0,0,1),a.scale(S,S,[v.drawingBufferWidth,v.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,v.TRIANGLES,qr.disabled,this.stencilClearMode,li.disabled,yr.disabled,Ao(S),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,v){if(this.currentStencilSource===l.source||!l.isTileClipped()||!v||!v.length)return;this.currentStencilSource=l.source;const S=this.context,C=S.gl;this.nextStencilID+v.length>256&&this.clearStencil(),S.setColorMode(li.disabled),S.setDepthMode(qr.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of v){const V=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,X=this.style.map.terrain&&this.style.map.terrain.getTerrainData(z);M.draw(S,C.TRIANGLES,qr.disabled,new bn({func:C.ALWAYS,mask:0},V,255,C.KEEP,C.KEEP,C.REPLACE),li.disabled,yr.disabled,Ao(z.posMatrix),X,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,v=this.context.gl;return new bn({func:v.NOTEQUAL,mask:255},l,255,v.KEEP,v.KEEP,v.REPLACE)}stencilModeForClipping(l){const v=this.context.gl;return new bn({func:v.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,v.KEEP,v.KEEP,v.REPLACE)}stencilConfigForOverlap(l){const v=this.context.gl,S=l.sort((z,V)=>V.overscaledZ-z.overscaledZ),C=S[S.length-1].overscaledZ,M=S[0].overscaledZ-C+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const z={};for(let V=0;V<M;V++)z[V+C]=new bn({func:v.GEQUAL,mask:255},V+this.nextStencilID,255,v.KEEP,v.KEEP,v.REPLACE);return this.nextStencilID+=M,[z,S]}return[{[C]:bn.disabled},S]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new li([l.CONSTANT_COLOR,l.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?li.unblended:li.alphaBlended}depthModeForSublayer(l,v,S){if(!this.opaquePassEnabledForLayer())return qr.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new qr(S||this.context.gl.LEQUAL,v,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,v){this.style=l,this.options=v,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();const S=this.style._order,C=this.style.sourceCaches,M={},z={},V={};for(const X in C){const ee=C[X];ee.used&&ee.prepare(this.context),M[X]=ee.getVisibleCoordinates(),z[X]=M[X].slice().reverse(),V[X]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let X=0;X<S.length;X++)if(this.style._layers[S[X]].is3D()){this.opaquePassCutoff=X;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const X=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||X.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ee,se){const le=ee.context,we=le.gl,De=li.unblended,ke=new qr(we.LEQUAL,qr.ReadWrite,[0,1]),Be=se.getTerrainMesh(),Re=se.sourceCache.getRenderableTiles(),et=ee.useProgram("terrainDepth");le.bindFramebuffer.set(se.getFramebuffer("depth").framebuffer),le.viewport.set([0,0,ee.width/devicePixelRatio,ee.height/devicePixelRatio]),le.clear({color:a.Color.transparent,depth:1});for(const ct of Re){const Ve=se.getTerrainData(ct.tileID),it={u_matrix:ee.transform.calculatePosMatrix(ct.tileID.toUnwrapped()),u_ele_delta:se.getMeshFrameDelta(ee.transform.zoom)};et.draw(le,we.TRIANGLES,ke,bn.disabled,De,yr.backCCW,it,Ve,"terrain",Be.vertexBuffer,Be.indexBuffer,Be.segments)}le.bindFramebuffer.set(null),le.viewport.set([0,0,ee.width,ee.height])}(this,this.style.map.terrain),function(ee,se){const le=ee.context,we=le.gl,De=li.unblended,ke=new qr(we.LEQUAL,qr.ReadWrite,[0,1]),Be=se.getTerrainMesh(),Re=se.getCoordsTexture(),et=se.sourceCache.getRenderableTiles(),ct=ee.useProgram("terrainCoords");le.bindFramebuffer.set(se.getFramebuffer("coords").framebuffer),le.viewport.set([0,0,ee.width/devicePixelRatio,ee.height/devicePixelRatio]),le.clear({color:a.Color.transparent,depth:1}),se.coordsIndex=[];for(const Ve of et){const it=se.getTerrainData(Ve.tileID);le.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,Re.texture);const ht={u_matrix:ee.transform.calculatePosMatrix(Ve.tileID.toUnwrapped()),u_terrain_coords_id:(255-se.coordsIndex.length)/255,u_texture:0,u_ele_delta:se.getMeshFrameDelta(ee.transform.zoom)};ct.draw(le,we.TRIANGLES,ke,bn.disabled,De,yr.backCCW,ht,it,"terrain",Be.vertexBuffer,Be.indexBuffer,Be.segments),se.coordsIndex.push(Ve.tileID.key)}le.bindFramebuffer.set(null),le.viewport.set([0,0,ee.width,ee.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const X of S){const ee=this.style._layers[X];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const se=z[ee.source];(ee.type==="custom"||se.length)&&this.renderLayer(this,C[ee.source],ee,se)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:v.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=v.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const X=this.style._layers[S[this.currentLayer]],ee=C[X.source],se=M[X.source];this._renderTileClippingMasks(X,se),this.renderLayer(this,ee,X,se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const X=this.style._layers[S[this.currentLayer]],ee=C[X.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(X))continue;const se=(X.type==="symbol"?V:z)[X.source];this._renderTileClippingMasks(X,M[X.source]),this.renderLayer(this,ee,X,se)}if(this.options.showTileBoundaries){const X=function(ee,se){let le=null;const we=Object.values(ee._layers).flatMap(Re=>Re.source&&!Re.isHidden(se)?[ee.sourceCaches[Re.source]]:[]),De=we.filter(Re=>Re.getSource().type==="vector"),ke=we.filter(Re=>Re.getSource().type!=="vector"),Be=Re=>{(!le||le.getSource().maxzoom<Re.getSource().maxzoom)&&(le=Re)};return De.forEach(Re=>Be(Re)),le||ke.forEach(Re=>Be(Re)),le}(this.style,this.transform.zoom);X&&function(ee,se,le){for(let we=0;we<le.length;we++)so(ee,se,le[we])}(this,X,X.getVisibleCoordinates())}this.options.showPadding&&function(X){const ee=X.transform.padding;Ms(X,X.transform.height-(ee.top||0),3,Xa),Ms(X,ee.bottom||0,3,an),Ya(X,ee.left||0,3,$l),Ya(X,X.transform.width-(ee.right||0),3,La);const se=X.transform.centerPoint;(function(le,we,De,ke){Du(le,we-1,De-10,2,20,ke),Du(le,we-10,De-1,20,2,ke)})(X,se.x,X.transform.height-se.y,xo)}(this),this.context.setDefault()}renderLayer(l,v,S,C){if(!S.isHidden(this.transform.zoom)&&(S.type==="background"||S.type==="custom"||(C||[]).length))switch(this.id=S.id,S.type){case"symbol":(function(M,z,V,X,ee){if(M.renderPass!=="translucent")return;const se=bn.disabled,le=M.colorModeForRenderPass();(V._unevaluatedLayout.hasValue("text-variable-anchor")||V._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(we,De,ke,Be,Re,et,ct){const Ve=De.transform,it=Re==="map",ht=et==="map";for(const dt of we){const wt=Be.getTile(dt),At=wt.getBucket(ke);if(!At||!At.text||!At.text.segments.get().length)continue;const St=a.evaluateSizeForZoom(At.textSizeData,Ve.zoom),Dt=He(wt,1,De.transform.zoom),pr=Lr(dt.posMatrix,ht,it,De.transform,Dt),cn=ke.layout.get("icon-text-fit")!=="none"&&At.hasIconData();if(St){const jt=Math.pow(2,Ve.zoom-wt.tileID.overscaledZ);zi(At,it,ht,ct,Ve,pr,dt.posMatrix,jt,St,cn,De.style.map.terrain?(xr,fr)=>De.style.map.terrain.getElevation(dt,xr,fr):null)}}}(X,M,V,z,V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),ee),V.paint.get("icon-opacity").constantOr(1)!==0&&zc(M,z,V,X,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),se,le),V.paint.get("text-opacity").constantOr(1)!==0&&zc(M,z,V,X,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),se,le),z.map.showCollisionBoxes&&(Os(M,z,V,X,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),!0),Os(M,z,V,X,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),!1))})(l,v,S,C,this.style.placement.variableOffsets);break;case"circle":(function(M,z,V,X){if(M.renderPass!=="translucent")return;const ee=V.paint.get("circle-opacity"),se=V.paint.get("circle-stroke-width"),le=V.paint.get("circle-stroke-opacity"),we=!V.layout.get("circle-sort-key").isConstant();if(ee.constantOr(1)===0&&(se.constantOr(1)===0||le.constantOr(1)===0))return;const De=M.context,ke=De.gl,Be=M.depthModeForSublayer(0,qr.ReadOnly),Re=bn.disabled,et=M.colorModeForRenderPass(),ct=[];for(let Ve=0;Ve<X.length;Ve++){const it=X[Ve],ht=z.getTile(it),dt=ht.getBucket(V);if(!dt)continue;const wt=dt.programConfigurations.get(V.id),At=M.useProgram("circle",wt),St=dt.layoutVertexBuffer,Dt=dt.indexBuffer,pr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(it),cn={programConfiguration:wt,program:At,layoutVertexBuffer:St,indexBuffer:Dt,uniformValues:Dc(M,it,ht,V),terrainData:pr};if(we){const jt=dt.segments.get();for(const xr of jt)ct.push({segments:new a.SegmentVector([xr]),sortKey:xr.sortKey,state:cn})}else ct.push({segments:dt.segments,sortKey:0,state:cn})}we&&ct.sort((Ve,it)=>Ve.sortKey-it.sortKey);for(const Ve of ct){const{programConfiguration:it,program:ht,layoutVertexBuffer:dt,indexBuffer:wt,uniformValues:At,terrainData:St}=Ve.state;ht.draw(De,ke.TRIANGLES,Be,Re,et,yr.disabled,At,St,V.id,dt,wt,Ve.segments,V.paint,M.transform.zoom,it)}})(l,v,S,C);break;case"heatmap":(function(M,z,V,X){if(V.paint.get("heatmap-opacity")!==0)if(M.renderPass==="offscreen"){const ee=M.context,se=ee.gl,le=bn.disabled,we=new li([se.ONE,se.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(De,ke,Be){const Re=De.gl;De.activeTexture.set(Re.TEXTURE1),De.viewport.set([0,0,ke.width/4,ke.height/4]);let et=Be.heatmapFbo;if(et)Re.bindTexture(Re.TEXTURE_2D,et.colorAttachment.get()),De.bindFramebuffer.set(et.framebuffer);else{const ct=Re.createTexture();Re.bindTexture(Re.TEXTURE_2D,ct),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_WRAP_S,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_WRAP_T,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_MIN_FILTER,Re.LINEAR),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_MAG_FILTER,Re.LINEAR),et=Be.heatmapFbo=De.createFramebuffer(ke.width/4,ke.height/4,!1,!1),function(Ve,it,ht,dt){var wt,At;const St=Ve.gl,Dt=(wt=Ve.HALF_FLOAT)!==null&&wt!==void 0?wt:St.UNSIGNED_BYTE,pr=(At=Ve.RGBA16F)!==null&&At!==void 0?At:St.RGBA;St.texImage2D(St.TEXTURE_2D,0,pr,it.width/4,it.height/4,0,St.RGBA,Dt,null),dt.colorAttachment.set(ht)}(De,ke,ct,et)}})(ee,M,V),ee.clear({color:a.Color.transparent});for(let De=0;De<X.length;De++){const ke=X[De];if(z.hasRenderableParent(ke))continue;const Be=z.getTile(ke),Re=Be.getBucket(V);if(!Re)continue;const et=Re.programConfigurations.get(V.id),ct=M.useProgram("heatmap",et),{zoom:Ve}=M.transform;ct.draw(ee,se.TRIANGLES,qr.disabled,le,we,yr.disabled,Pa(ke.posMatrix,Be,Ve,V.paint.get("heatmap-intensity")),null,V.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,V.paint,M.transform.zoom,et)}ee.viewport.set([0,0,M.width,M.height])}else M.renderPass==="translucent"&&(M.context.setColorMode(M.colorModeForRenderPass()),function(ee,se){const le=ee.context,we=le.gl,De=se.heatmapFbo;if(!De)return;le.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,De.colorAttachment.get()),le.activeTexture.set(we.TEXTURE1);let ke=se.colorRampTexture;ke||(ke=se.colorRampTexture=new Q(le,se.colorRamp,we.RGBA)),ke.bind(we.LINEAR,we.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(le,we.TRIANGLES,qr.disabled,bn.disabled,ee.colorModeForRenderPass(),yr.disabled,((Be,Re,et,ct)=>{const Ve=a.create();a.ortho(Ve,0,Be.width,Be.height,0,0,1);const it=Be.context.gl;return{u_matrix:Ve,u_world:[it.drawingBufferWidth,it.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Re.paint.get("heatmap-opacity")}})(ee,se),null,se.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,se.paint,ee.transform.zoom)}(M,V))})(l,v,S,C);break;case"line":(function(M,z,V,X){if(M.renderPass!=="translucent")return;const ee=V.paint.get("line-opacity"),se=V.paint.get("line-width");if(ee.constantOr(1)===0||se.constantOr(1)===0)return;const le=M.depthModeForSublayer(0,qr.ReadOnly),we=M.colorModeForRenderPass(),De=V.paint.get("line-dasharray"),ke=V.paint.get("line-pattern"),Be=ke.constantOr(1),Re=V.paint.get("line-gradient"),et=V.getCrossfadeParameters(),ct=Be?"linePattern":De?"lineSDF":Re?"lineGradient":"line",Ve=M.context,it=Ve.gl;let ht=!0;for(const dt of X){const wt=z.getTile(dt);if(Be&&!wt.patternsLoaded())continue;const At=wt.getBucket(V);if(!At)continue;const St=At.programConfigurations.get(V.id),Dt=M.context.program.get(),pr=M.useProgram(ct,St),cn=ht||pr.program!==Dt,jt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(dt),xr=ke.constantOr(null);if(xr&&wt.imageAtlas){const fn=wt.imageAtlas,Sr=fn.patternPositions[xr.to.toString()],hn=fn.patternPositions[xr.from.toString()];Sr&&hn&&St.setConstantPatternPositions(Sr,hn)}const fr=jt?dt:null,Ui=Be?Qr(M,wt,V,et,fr):De?Hn(M,wt,V,De,et,fr):Re?gn(M,wt,V,At.lineClipsArray.length,fr):Ai(M,wt,V,fr);if(Be)Ve.activeTexture.set(it.TEXTURE0),wt.imageAtlasTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE),St.updatePaintBuffers(et);else if(De&&(cn||M.lineAtlas.dirty))Ve.activeTexture.set(it.TEXTURE0),M.lineAtlas.bind(Ve);else if(Re){const fn=At.gradients[V.id];let Sr=fn.texture;if(V.gradientVersion!==fn.version){let hn=256;if(V.stepInterpolant){const Qi=z.getSource().maxzoom,gi=dt.canonical.z===Qi?Math.ceil(1<<M.transform.maxZoom-dt.canonical.z):1;hn=a.clamp(a.nextPowerOfTwo(At.maxLineLength/a.EXTENT*1024*gi),256,Ve.maxTextureSize)}fn.gradient=a.renderColorRamp({expression:V.gradientExpression(),evaluationKey:"lineProgress",resolution:hn,image:fn.gradient||void 0,clips:At.lineClipsArray}),fn.texture?fn.texture.update(fn.gradient):fn.texture=new Q(Ve,fn.gradient,it.RGBA),fn.version=V.gradientVersion,Sr=fn.texture}Ve.activeTexture.set(it.TEXTURE0),Sr.bind(V.stepInterpolant?it.NEAREST:it.LINEAR,it.CLAMP_TO_EDGE)}pr.draw(Ve,it.TRIANGLES,le,M.stencilModeForClipping(dt),we,yr.disabled,Ui,jt,V.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,V.paint,M.transform.zoom,St,At.layoutVertexBuffer2),ht=!1}})(l,v,S,C);break;case"fill":(function(M,z,V,X){const ee=V.paint.get("fill-color"),se=V.paint.get("fill-opacity");if(se.constantOr(1)===0)return;const le=M.colorModeForRenderPass(),we=V.paint.get("fill-pattern"),De=M.opaquePassEnabledForLayer()&&!we.constantOr(1)&&ee.constantOr(a.Color.transparent).a===1&&se.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===De){const ke=M.depthModeForSublayer(1,M.renderPass==="opaque"?qr.ReadWrite:qr.ReadOnly);Ts(M,z,V,X,ke,le,!1)}if(M.renderPass==="translucent"&&V.paint.get("fill-antialias")){const ke=M.depthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,qr.ReadOnly);Ts(M,z,V,X,ke,le,!0)}})(l,v,S,C);break;case"fill-extrusion":(function(M,z,V,X){const ee=V.paint.get("fill-extrusion-opacity");if(ee!==0&&M.renderPass==="translucent"){const se=new qr(M.context.gl.LEQUAL,qr.ReadWrite,M.depthRangeFor3D);if(ee!==1||V.paint.get("fill-extrusion-pattern").constantOr(1))bo(M,z,V,X,se,bn.disabled,li.disabled),bo(M,z,V,X,se,M.stencilModeFor3D(),M.colorModeForRenderPass());else{const le=M.colorModeForRenderPass();bo(M,z,V,X,se,bn.disabled,le)}}})(l,v,S,C);break;case"hillshade":(function(M,z,V,X){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const ee=M.context,se=M.depthModeForSublayer(0,qr.ReadOnly),le=M.colorModeForRenderPass(),[we,De]=M.renderPass==="translucent"?M.stencilConfigForOverlap(X):[{},X];for(const ke of De){const Be=z.getTile(ke);Be.needsHillshadePrepare!==void 0&&Be.needsHillshadePrepare&&M.renderPass==="offscreen"?ea(M,Be,V,se,bn.disabled,le):M.renderPass==="translucent"&&kr(M,ke,Be,V,se,we[ke.overscaledZ],le)}ee.viewport.set([0,0,M.width,M.height])})(l,v,S,C);break;case"raster":(function(M,z,V,X){if(M.renderPass!=="translucent"||V.paint.get("raster-opacity")===0||!X.length)return;const ee=M.context,se=ee.gl,le=z.getSource(),we=M.useProgram("raster"),De=M.colorModeForRenderPass(),[ke,Be]=le instanceof Ot?[{},X]:M.stencilConfigForOverlap(X),Re=Be[Be.length-1].overscaledZ,et=!M.options.moving;for(const ct of Be){const Ve=M.depthModeForSublayer(ct.overscaledZ-Re,V.paint.get("raster-opacity")===1?qr.ReadWrite:qr.ReadOnly,se.LESS),it=z.getTile(ct);it.registerFadeDuration(V.paint.get("raster-fade-duration"));const ht=z.findLoadedParent(ct,0),dt=hs(it,ht,z,V,M.transform,M.style.map.terrain);let wt,At;const St=V.paint.get("raster-resampling")==="nearest"?se.NEAREST:se.LINEAR;ee.activeTexture.set(se.TEXTURE0),it.texture.bind(St,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),ee.activeTexture.set(se.TEXTURE1),ht?(ht.texture.bind(St,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,ht.tileID.overscaledZ-it.tileID.overscaledZ),At=[it.tileID.canonical.x*wt%1,it.tileID.canonical.y*wt%1]):it.texture.bind(St,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST);const Dt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(ct),pr=Dt?ct:null,cn=pr?pr.posMatrix:M.transform.calculatePosMatrix(ct.toUnwrapped(),et),jt=Gi(cn,At||[0,0],wt||1,dt,V);le instanceof Ot?we.draw(ee,se.TRIANGLES,Ve,bn.disabled,De,yr.disabled,jt,Dt,V.id,le.boundsBuffer,M.quadTriangleIndexBuffer,le.boundsSegments):we.draw(ee,se.TRIANGLES,Ve,ke[ct.overscaledZ],De,yr.disabled,jt,Dt,V.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments)}})(l,v,S,C);break;case"background":(function(M,z,V,X){const ee=V.paint.get("background-color"),se=V.paint.get("background-opacity");if(se===0)return;const le=M.context,we=le.gl,De=M.transform,ke=De.tileSize,Be=V.paint.get("background-pattern");if(M.isPatternMissing(Be))return;const Re=!Be&&ee.a===1&&se===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==Re)return;const et=bn.disabled,ct=M.depthModeForSublayer(0,Re==="opaque"?qr.ReadWrite:qr.ReadOnly),Ve=M.colorModeForRenderPass(),it=M.useProgram(Be?"backgroundPattern":"background"),ht=X||De.coveringTiles({tileSize:ke,terrain:M.style.map.terrain});Be&&(le.activeTexture.set(we.TEXTURE0),M.imageManager.bind(M.context));const dt=V.getCrossfadeParameters();for(const wt of ht){const At=X?wt.posMatrix:M.transform.calculatePosMatrix(wt.toUnwrapped()),St=Be?Lu(At,se,M,Be,{tileID:wt,tileSize:ke},dt):ai(At,se,ee),Dt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(wt);it.draw(le,we.TRIANGLES,ct,et,Ve,yr.disabled,St,Dt,V.id,M.tileExtentBuffer,M.quadTriangleIndexBuffer,M.tileExtentSegments)}})(l,0,S,C);break;case"custom":(function(M,z,V){const X=M.context,ee=V.implementation;if(M.renderPass==="offscreen"){const se=ee.prerender;se&&(M.setCustomLayerDefaults(),X.setColorMode(M.colorModeForRenderPass()),se.call(ee,X.gl,M.transform.customLayerMatrix()),X.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),X.setColorMode(M.colorModeForRenderPass()),X.setStencilMode(bn.disabled);const se=ee.renderingMode==="3d"?new qr(M.context.gl.LEQUAL,qr.ReadWrite,M.depthRangeFor3D):M.depthModeForSublayer(0,qr.ReadOnly);X.setDepthMode(se),ee.render(X.gl,M.transform.customLayerMatrix()),X.setDirty(),M.setBaseState(),X.bindFramebuffer.set(null)}})(l,0,S)}}translatePosMatrix(l,v,S,C,M){if(!S[0]&&!S[1])return l;const z=M?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(z){const ee=Math.sin(z),se=Math.cos(z);S=[S[0]*se-S[1]*ee,S[0]*ee+S[1]*se]}const V=[M?S[0]:He(v,S[0],this.transform.zoom),M?S[1]:He(v,S[1],this.transform.zoom),0],X=new Float32Array(16);return a.translate(X,l,V),X}saveTileTexture(l){const v=this._tileTextures[l.size[0]];v?v.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const v=this._tileTextures[l];return v&&v.length>0?v.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const v=this.imageManager.getPattern(l.from.toString()),S=this.imageManager.getPattern(l.to.toString());return!v||!S}useProgram(l,v){this.cache=this.cache||{};const S=l+(v?v.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[S]||(this.cache[S]=new Ga(this.context,Ou[l],v,qi[l],this._showOverdrawInspector,this.style.map.terrain)),this.cache[S]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:v}=this.context.gl;return this.width!==l||this.height!==v}}class sl{constructor(l,v){this.points=l,this.planes=v}static fromInvProjectionMatrix(l,v,S){const C=Math.pow(2,S),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(V=>{const X=1/(V=a.transformMat4([],V,l))[3]/v*C;return a.mul$1(V,V,[X,X,1/V[3],X])}),z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(V=>{const X=function(we,De){var ke=De[0],Be=De[1],Re=De[2],et=ke*ke+Be*Be+Re*Re;return et>0&&(et=1/Math.sqrt(et)),we[0]=De[0]*et,we[1]=De[1]*et,we[2]=De[2]*et,we}([],function(we,De,ke){var Be=De[0],Re=De[1],et=De[2],ct=ke[0],Ve=ke[1],it=ke[2];return we[0]=Re*it-et*Ve,we[1]=et*ct-Be*it,we[2]=Be*Ve-Re*ct,we}([],H([],M[V[0]],M[V[1]]),H([],M[V[2]],M[V[1]]))),ee=-((se=X)[0]*(le=M[V[1]])[0]+se[1]*le[1]+se[2]*le[2]);var se,le;return X.concat(ee)});return new sl(M,z)}}class jc{constructor(l,v){this.min=l,this.max=v,this.center=function(S,C,M){return S[0]=.5*C[0],S[1]=.5*C[1],S[2]=.5*C[2],S}([],function(S,C,M){return S[0]=C[0]+M[0],S[1]=C[1]+M[1],S[2]=C[2]+M[2],S}([],this.min,this.max))}quadrant(l){const v=[l%2==0,l<2],S=N(this.min),C=N(this.max);for(let M=0;M<v.length;M++)S[M]=v[M]?this.min[M]:this.center[M],C[M]=v[M]?this.center[M]:this.max[M];return C[2]=this.max[2],new jc(S,C)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const v=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let S=!0;for(let C=0;C<l.planes.length;C++){const M=l.planes[C];let z=0;for(let V=0;V<v.length;V++)a.dot(M,v[V])>=0&&z++;if(z===0)return 0;z!==v.length&&(S=!1)}if(S)return 2;for(let C=0;C<3;C++){let M=Number.MAX_VALUE,z=-Number.MAX_VALUE;for(let V=0;V<l.points.length;V++){const X=l.points[V][C]-this.min[C];M=Math.min(M,X),z=Math.max(z,X)}if(z<0||M>this.max[C]-this.min[C])return 0}return 1}}class Cf{constructor(l=0,v=0,S=0,C=0){if(isNaN(l)||l<0||isNaN(v)||v<0||isNaN(S)||S<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=v,this.left=S,this.right=C}interpolate(l,v,S){return v.top!=null&&l.top!=null&&(this.top=a.interpolate.number(l.top,v.top,S)),v.bottom!=null&&l.bottom!=null&&(this.bottom=a.interpolate.number(l.bottom,v.bottom,S)),v.left!=null&&l.left!=null&&(this.left=a.interpolate.number(l.left,v.left,S)),v.right!=null&&l.right!=null&&(this.right=a.interpolate.number(l.right,v.right,S)),this}getCenter(l,v){const S=a.clamp((this.left+l-this.right)/2,0,l),C=a.clamp((this.top+v-this.bottom)/2,0,v);return new a.Point(S,C)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Cf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Nu{constructor(l,v,S,C,M){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=M===void 0||!!M,this._minZoom=l||0,this._maxZoom=v||22,this._minPitch=S??0,this._maxPitch=C??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Cf,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const l=new Nu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.apply(this),l}apply(l){this.tileSize=l.tileSize,this.latRange=l.latRange,this.width=l.width,this.height=l.height,this._center=l._center,this._elevation=l._elevation,this._minEleveationForCurrentTile=l._minEleveationForCurrentTile,this.zoom=l.zoom,this.angle=l.angle,this._fov=l._fov,this._pitch=l._pitch,this._unmodified=l._unmodified,this._edgeInsets=l._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const v=-a.wrap(l,-180,180)*Math.PI/180;this.angle!==v&&(this._unmodified=!1,this.angle=v,this._calcMatrices(),this.rotationMatrix=function(){var S=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}(),function(S,C,M){var z=C[0],V=C[1],X=C[2],ee=C[3],se=Math.sin(M),le=Math.cos(M);S[0]=z*le+X*se,S[1]=V*le+ee*se,S[2]=z*-se+X*le,S[3]=V*-se+ee*le}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const v=a.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==v&&(this._unmodified=!1,this._pitch=v,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const v=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==v&&(this._unmodified=!1,this._zoom=v,this.tileZoom=Math.max(0,Math.floor(v)),this.scale=this.zoomScale(v),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,v,S){this._unmodified=!1,this._edgeInsets.interpolate(l,v,S),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const v=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,v)}getVisibleUnwrappedCoordinates(l){const v=[new a.UnwrappedTileID(0,l)];if(this._renderWorldCopies){const S=this.pointCoordinate(new a.Point(0,0)),C=this.pointCoordinate(new a.Point(this.width,0)),M=this.pointCoordinate(new a.Point(this.width,this.height)),z=this.pointCoordinate(new a.Point(0,this.height)),V=Math.floor(Math.min(S.x,C.x,M.x,z.x)),X=Math.floor(Math.max(S.x,C.x,M.x,z.x)),ee=1;for(let se=V-ee;se<=X+ee;se++)se!==0&&v.push(new a.UnwrappedTileID(se,l))}return v}coveringTiles(l){var v,S;let C=this.coveringZoomLevel(l);const M=C;if(l.minzoom!==void 0&&C<l.minzoom)return[];l.maxzoom!==void 0&&C>l.maxzoom&&(C=l.maxzoom);const z=this.pointCoordinate(this.getCameraPoint()),V=a.MercatorCoordinate.fromLngLat(this.center),X=Math.pow(2,C),ee=[X*z.x,X*z.y,0],se=[X*V.x,X*V.y,0],le=sl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,C);let we=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(we=C);const De=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,ke=Ve=>({aabb:new jc([Ve*X,0,0],[(Ve+1)*X,X,0]),zoom:0,x:0,y:0,wrap:Ve,fullyVisible:!1}),Be=[],Re=[],et=C,ct=l.reparseOverscaled?M:C;if(this._renderWorldCopies)for(let Ve=1;Ve<=3;Ve++)Be.push(ke(-Ve)),Be.push(ke(Ve));for(Be.push(ke(0));Be.length>0;){const Ve=Be.pop(),it=Ve.x,ht=Ve.y;let dt=Ve.fullyVisible;if(!dt){const pr=Ve.aabb.intersects(le);if(pr===0)continue;dt=pr===2}const wt=l.terrain?ee:se,At=Ve.aabb.distanceX(wt),St=Ve.aabb.distanceY(wt),Dt=Math.max(Math.abs(At),Math.abs(St));if(Ve.zoom===et||Dt>De+(1<<et-Ve.zoom)-2&&Ve.zoom>=we){const pr=et-Ve.zoom,cn=ee[0]-.5-(it<<pr),jt=ee[1]-.5-(ht<<pr);Re.push({tileID:new a.OverscaledTileID(Ve.zoom===et?ct:Ve.zoom,Ve.wrap,Ve.zoom,it,ht),distanceSq:Z([se[0]-.5-it,se[1]-.5-ht]),tileDistanceToCamera:Math.sqrt(cn*cn+jt*jt)})}else for(let pr=0;pr<4;pr++){const cn=(it<<1)+pr%2,jt=(ht<<1)+(pr>>1),xr=Ve.zoom+1;let fr=Ve.aabb.quadrant(pr);if(l.terrain){const Ui=new a.OverscaledTileID(xr,Ve.wrap,xr,cn,jt),fn=l.terrain.getMinMaxElevation(Ui),Sr=(v=fn.minElevation)!==null&&v!==void 0?v:this.elevation,hn=(S=fn.maxElevation)!==null&&S!==void 0?S:this.elevation;fr=new jc([fr.min[0],fr.min[1],Sr],[fr.max[0],fr.max[1],hn])}Be.push({aabb:fr,zoom:xr,x:cn,y:jt,wrap:Ve.wrap,fullyVisible:dt})}}return Re.sort((Ve,it)=>Ve.distanceSq-it.distanceSq).map(Ve=>Ve.tileID)}resize(l,v){this.width=l,this.height=v,this.pixelsToGLUnits=[2/l,-2/v],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const v=a.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(l.lng)*this.worldSize,a.mercatorYfromLat(v)*this.worldSize)}unproject(l){return new a.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const v=this.pointLocation(this.centerPoint,l),S=l.getElevationForLngLatZoom(v,this.tileZoom);if(!(this.elevation-S))return;const C=this.getCameraPosition(),M=a.MercatorCoordinate.fromLngLat(C.lngLat,C.altitude),z=a.MercatorCoordinate.fromLngLat(v,S),V=M.x-z.x,X=M.y-z.y,ee=M.z-z.z,se=Math.sqrt(V*V+X*X+ee*ee),le=this.scaleZoom(this.cameraToCenterDistance/se/this.tileSize);this._elevation=S,this._center=v,this.zoom=le}setLocationAtPoint(l,v){const S=this.pointCoordinate(v),C=this.pointCoordinate(this.centerPoint),M=this.locationCoordinate(l),z=new a.MercatorCoordinate(M.x-(S.x-C.x),M.y-(S.y-C.y));this.center=this.coordinateLocation(z),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,v){return v?this.coordinatePoint(this.locationCoordinate(l),v.getElevationForLngLatZoom(l,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,v){return this.coordinateLocation(this.pointCoordinate(l,v))}locationCoordinate(l){return a.MercatorCoordinate.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,v){if(v){const we=v.pointCoordinate(l);if(we!=null)return we}const S=[l.x,l.y,0,1],C=[l.x,l.y,1,1];a.transformMat4(S,S,this.pixelMatrixInverse),a.transformMat4(C,C,this.pixelMatrixInverse);const M=S[3],z=C[3],V=S[1]/M,X=C[1]/z,ee=S[2]/M,se=C[2]/z,le=ee===se?0:(0-ee)/(se-ee);return new a.MercatorCoordinate(a.interpolate.number(S[0]/M,C[0]/z,le)/this.worldSize,a.interpolate.number(V,X,le)/this.worldSize)}coordinatePoint(l,v=0,S=this.pixelMatrix){const C=[l.x*this.worldSize,l.y*this.worldSize,v,1];return a.transformMat4(C,C,S),new a.Point(C[0]/C[3],C[1]/C[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new Le().extend(this.pointLocation(new a.Point(0,l))).extend(this.pointLocation(new a.Point(this.width,l))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Le([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,v=!1){const S=l.key,C=v?this._alignedPosMatrixCache:this._posMatrixCache;if(C[S])return C[S];const M=l.canonical,z=this.worldSize/this.zoomScale(M.z),V=M.x+Math.pow(2,M.z)*l.wrap,X=a.identity(new Float64Array(16));return a.translate(X,X,[V*z,M.y*z,0]),a.scale(X,X,[z/a.EXTENT,z/a.EXTENT,1]),a.multiply(X,v?this.alignedProjMatrix:this.projMatrix,X),C[S]=new Float32Array(X),C[S]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,v,S,C,M=-90,z=90,V=-180,X=180;const ee=this.size,se=this._unmodified;if(this.latRange){const De=this.latRange;M=a.mercatorYfromLat(De[1])*this.worldSize,z=a.mercatorYfromLat(De[0])*this.worldSize,l=z-M<ee.y?ee.y/(z-M):0}if(this.lngRange){const De=this.lngRange;V=a.wrap(a.mercatorXfromLng(De[0])*this.worldSize,0,this.worldSize),X=a.wrap(a.mercatorXfromLng(De[1])*this.worldSize,0,this.worldSize),X<V&&(X+=this.worldSize),v=X-V<ee.x?ee.x/(X-V):0}const le=this.point,we=Math.max(v||0,l||0);if(we)return this.center=this.unproject(new a.Point(v?(X+V)/2:le.x,l?(z+M)/2:le.y)),this.zoom+=this.scaleZoom(we),this._unmodified=se,void(this._constraining=!1);if(this.latRange){const De=le.y,ke=ee.y/2;De-ke<M&&(C=M+ke),De+ke>z&&(C=z-ke)}if(this.lngRange){const De=(V+X)/2,ke=a.wrap(le.x,De-this.worldSize/2,De+this.worldSize/2),Be=ee.x/2;ke-Be<V&&(S=V+Be),ke+Be>X&&(S=X-Be)}S===void 0&&C===void 0||(this.center=this.unproject(new a.Point(S!==void 0?S:le.x,C!==void 0?C:le.y)).wrap()),this._unmodified=se,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,v=this.point.x,S=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let C=a.identity(new Float64Array(16));a.scale(C,C,[this.width/2,-this.height/2,1]),a.translate(C,C,[1,-1,0]),this.labelPlaneMatrix=C,C=a.identity(new Float64Array(16)),a.scale(C,C,[1,-1,1]),a.translate(C,C,[-1,-1,0]),a.scale(C,C,[2/this.width,2/this.height,1]),this.glCoordMatrix=C;const M=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),z=Math.min(this.elevation,this._minEleveationForCurrentTile),V=M-z*this._pixelPerMeter/Math.cos(this._pitch),X=z<0?V:M,ee=Math.PI/2+this._pitch,se=this._fov*(.5+l.y/this.height),le=Math.sin(se)*X/Math.sin(a.clamp(Math.PI-ee-se,.01,Math.PI-.01)),we=this.getHorizon(),De=2*Math.atan(we/this.cameraToCenterDistance)*(.5+l.y/(2*we)),ke=Math.sin(De)*X/Math.sin(a.clamp(Math.PI-ee-De,.01,Math.PI-.01)),Be=Math.min(le,ke),Re=1.01*(Math.cos(Math.PI/2-this._pitch)*Be+X),et=this.height/50;C=new Float64Array(16),a.perspective(C,this._fov,this.width/this.height,et,Re),C[8]=2*-l.x/this.width,C[9]=2*l.y/this.height,a.scale(C,C,[1,-1,1]),a.translate(C,C,[0,0,-this.cameraToCenterDistance]),a.rotateX(C,C,this._pitch),a.rotateZ(C,C,this.angle),a.translate(C,C,[-v,-S,0]),this.mercatorMatrix=a.scale([],C,[this.worldSize,this.worldSize,this.worldSize]),a.scale(C,C,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,C),a.translate(C,C,[0,0,-this.elevation]),this.projMatrix=C,this.invProjMatrix=a.invert([],C),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,C);const ct=this.width%2/2,Ve=this.height%2/2,it=Math.cos(this.angle),ht=Math.sin(this.angle),dt=v-Math.round(v)+it*ct+ht*Ve,wt=S-Math.round(S)+it*Ve+ht*ct,At=new Float64Array(C);if(a.translate(At,At,[dt>.5?dt-1:dt,wt>.5?wt-1:wt,0]),this.alignedProjMatrix=At,C=a.invert(new Float64Array(16),this.pixelMatrix),!C)throw new Error("failed to invert matrix");this.pixelMatrixInverse=C,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new a.Point(0,0)),v=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.transformMat4(v,v,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,l))}getCameraQueryGeometry(l){const v=this.getCameraPoint();if(l.length===1)return[l[0],v];{let S=v.x,C=v.y,M=v.x,z=v.y;for(const V of l)S=Math.min(S,V.x),C=Math.min(C,V.y),M=Math.max(M,V.x),z=Math.max(z,V.y);return[new a.Point(S,C),new a.Point(M,C),new a.Point(M,z),new a.Point(S,z),new a.Point(S,C)]}}}function Go(A,l){let v,S=!1,C=null,M=null;const z=()=>{C=null,S&&(A.apply(M,v),C=setTimeout(z,l),S=!1)};return(...V)=>(S=!0,M=this,v=V,C||z(),C)}class uo{constructor(l){this._getCurrentHash=()=>{const v=window.location.hash.replace("#","");if(this._hashName){let S;return v.split("&").map(C=>C.split("=")).forEach(C=>{C[0]===this._hashName&&(S=C)}),(S&&S[1]||"").split("/")}return v.split("/")},this._onHashChange=()=>{const v=this._getCurrentHash();if(v.length>=3&&!v.some(S=>isNaN(S))){const S=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(v[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+v[2],+v[1]],zoom:+v[0],bearing:S,pitch:+(v[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const v=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,v)}catch{}},this._updateHash=Go(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const v=this._map.getCenter(),S=Math.round(100*this._map.getZoom())/100,C=Math.ceil((S*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,C),z=Math.round(v.lng*M)/M,V=Math.round(v.lat*M)/M,X=this._map.getBearing(),ee=this._map.getPitch();let se="";if(se+=l?`/${z}/${V}/${S}`:`${S}/${V}/${z}`,(X||ee)&&(se+="/"+Math.round(10*X)/10),ee&&(se+=`/${Math.round(ee)}`),this._hashName){const le=this._hashName;let we=!1;const De=window.location.hash.slice(1).split("&").map(ke=>{const Be=ke.split("=")[0];return Be===le?(we=!0,`${Be}=${se}`):ke}).filter(ke=>ke);return we||De.push(`${le}=${se}`),`#${De.join("&")}`}return`#${se}`}}const Fu={linearity:.3,easing:a.bezier(0,0,.3,1)},Io=a.extend({deceleration:2500,maxSpeed:1400},Fu),Ls=a.extend({deceleration:20,maxSpeed:1400},Fu),ul=a.extend({deceleration:1e3,maxSpeed:360},Fu),wh=a.extend({deceleration:1e3,maxSpeed:90},Fu);class au{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,v=a.browser.now();for(;l.length>0&&v-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const v={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)v.zoom+=M.zoomDelta||0,v.bearing+=M.bearingDelta||0,v.pitch+=M.pitchDelta||0,M.panDelta&&v.pan._add(M.panDelta),M.around&&(v.around=M.around),M.pinchAround&&(v.pinchAround=M.pinchAround);const S=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(v.pan.mag()){const M=Hi(v.pan.mag(),S,a.extend({},Io,l||{}));C.offset=v.pan.mult(M.amount/v.pan.mag()),C.center=this._map.transform.center,ds(C,M)}if(v.zoom){const M=Hi(v.zoom,S,Ls);C.zoom=this._map.transform.zoom+M.amount,ds(C,M)}if(v.bearing){const M=Hi(v.bearing,S,ul);C.bearing=this._map.transform.bearing+a.clamp(M.amount,-179,179),ds(C,M)}if(v.pitch){const M=Hi(v.pitch,S,wh);C.pitch=this._map.transform.pitch+M.amount,ds(C,M)}if(C.zoom||C.bearing){const M=v.pinchAround===void 0?v.around:v.pinchAround;C.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),a.extend(C,{noMoveStart:!0})}}function ds(A,l){(!A.duration||A.duration<l.duration)&&(A.duration=l.duration,A.easing=l.easing)}function Hi(A,l,v){const{maxSpeed:S,linearity:C,deceleration:M}=v,z=a.clamp(A*C/(l/1e3),-S,S),V=Math.abs(z)/(M*C);return{easing:v.easing,duration:1e3*V,amount:z*(V/2)}}class ln extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,v,S,C={}){const M=f.mousePos(v.getCanvasContainer(),S),z=v.unproject(M);super(l,a.extend({point:M,lngLat:z,originalEvent:S},C)),this._defaultPrevented=!1,this.target=v}}class ta extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,v,S){const C=l==="touchend"?S.changedTouches:S.touches,M=f.touchPos(v.getCanvasContainer(),C),z=M.map(X=>v.unproject(X)),V=M.reduce((X,ee,se,le)=>X.add(ee.div(le.length)),new a.Point(0,0));super(l,{points:M,point:V,lngLats:z,lngLat:v.unproject(V),originalEvent:S}),this._defaultPrevented=!1}}class Oi extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,v,S){super(l,{originalEvent:S}),this._defaultPrevented=!1}}class Uc{constructor(l,v){this._map=l,this._clickTolerance=v.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Oi(l.type,this._map,l))}mousedown(l,v){return this._mousedownPos=v,this._firePreventable(new ln(l.type,this._map,l))}mouseup(l){this._map.fire(new ln(l.type,this._map,l))}click(l,v){this._mousedownPos&&this._mousedownPos.dist(v)>=this._clickTolerance||this._map.fire(new ln(l.type,this._map,l))}dblclick(l){return this._firePreventable(new ln(l.type,this._map,l))}mouseover(l){this._map.fire(new ln(l.type,this._map,l))}mouseout(l){this._map.fire(new ln(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ta(l.type,this._map,l))}touchmove(l){this._map.fire(new ta(l.type,this._map,l))}touchend(l){this._map.fire(new ta(l.type,this._map,l))}touchcancel(l){this._map.fire(new ta(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ll{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new ln(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new ln(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class su{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.pointLocation(a.Point.convert(l),this._map.terrain)}}class wo{constructor(l,v){this._map=l,this._tr=new su(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=v.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,v){this.isEnabled()&&l.shiftKey&&l.button===0&&(f.disableDrag(),this._startPos=this._lastPos=v,this._active=!0)}mousemoveWindow(l,v){if(!this._active)return;const S=v;if(this._lastPos.equals(S)||!this._box&&S.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=S,this._box||(this._box=f.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const M=Math.min(C.x,S.x),z=Math.max(C.x,S.x),V=Math.min(C.y,S.y),X=Math.max(C.y,S.y);f.setTransform(this._box,`translate(${M}px,${V}px)`),this._box.style.width=z-M+"px",this._box.style.height=X-V+"px"}mouseupWindow(l,v){if(!this._active||l.button!==0)return;const S=this._startPos,C=v;if(this.reset(),f.suppressClick(),S.x!==C.x||S.y!==C.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:M=>M.fitScreenCoordinates(S,C,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(f.remove(this._box),this._box=null),f.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,v){return this._map.fire(new a.Event(l,{originalEvent:v}))}}function Zi(A,l){if(A.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${A.length}, points ${l.length}`);const v={};for(let S=0;S<A.length;S++)v[A[S].identifier]=l[S];return v}class ma{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,v,S){(this.centroid||S.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),S.length===this.numTouches&&(this.centroid=function(C){const M=new a.Point(0,0);for(const z of C)M._add(z);return M.div(C.length)}(v),this.touches=Zi(S,v)))}touchmove(l,v,S){if(this.aborted||!this.centroid)return;const C=Zi(S,v);for(const M in this.touches){const z=C[M];(!z||z.dist(this.touches[M])>30)&&(this.aborted=!0)}}touchend(l,v,S){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),S.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class Bi{constructor(l){this.singleTap=new ma(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,v,S){this.singleTap.touchstart(l,v,S)}touchmove(l,v,S){this.singleTap.touchmove(l,v,S)}touchend(l,v,S){const C=this.singleTap.touchend(l,v,S);if(C){const M=l.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(C)<30;if(M&&z||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class Jt{constructor(l){this._tr=new su(l),this._zoomIn=new Bi({numTouches:1,numTaps:2}),this._zoomOut=new Bi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,v,S){this._zoomIn.touchstart(l,v,S),this._zoomOut.touchstart(l,v,S)}touchmove(l,v,S){this._zoomIn.touchmove(l,v,S),this._zoomOut.touchmove(l,v,S)}touchend(l,v,S){const C=this._zoomIn.touchend(l,v,S),M=this._zoomOut.touchend(l,v,S),z=this._tr;return C?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(C)},{originalEvent:l})}):M?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(M)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rs{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const v=this._moveFunction(...l);if(v.bearingDelta||v.pitchDelta||v.around||v.panDelta)return this._active=!0,v}dragStart(l,v){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=v.length?v[0]:v,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,v){if(!this.isEnabled())return;const S=this._lastPoint;if(!S)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const C=v.length?v[0]:v;return!this._moved&&C.dist(S)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=C,this._move(S,C))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&f.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ps={0:1,2:2};class Ki{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const v=f.mouseButton(l);this._eventButton=v}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(v,S){const C=ps[S];return v.buttons===void 0||(v.buttons&C)!==C}(l,this._eventButton)}isValidEndEvent(l){return f.mouseButton(l)===this._eventButton}}class If{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}const Mt=A=>{A.mousedown=A.dragStart,A.mousemoveWindow=A.dragMove,A.mouseup=A.dragEnd,A.contextmenu=function(l){l.preventDefault()}},Vc=({enable:A,clickTolerance:l,bearingDegreesPerPixelMoved:v=.8})=>{const S=new Ki({checkCorrectEvent:C=>f.mouseButton(C)===0&&C.ctrlKey||f.mouseButton(C)===2});return new Rs({clickTolerance:l,move:(C,M)=>({bearingDelta:(M.x-C.x)*v}),moveStateManager:S,enable:A,assignEvents:Mt})},ms=({enable:A,clickTolerance:l,pitchDegreesPerPixelMoved:v=-.5})=>{const S=new Ki({checkCorrectEvent:C=>f.mouseButton(C)===0&&C.ctrlKey||f.mouseButton(C)===2});return new Rs({clickTolerance:l,move:(C,M)=>({pitchDelta:(M.y-C.y)*v}),moveStateManager:S,enable:A,assignEvents:Mt})};class lo{constructor(l,v){this._minTouches=l.cooperativeGestures?2:1,this._clickTolerance=l.clickTolerance||1,this._map=v,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(l,v,S){return this._calculateTransform(l,v,S)}touchmove(l,v,S){if(this._map._cooperativeGestures&&(this._minTouches===2&&S.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(l,!1,S.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(S.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,v,S)}touchend(l,v,S){this._calculateTransform(l,v,S),this._active&&S.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,v,S){S.length>0&&(this._active=!0);const C=Zi(S,v),M=new a.Point(0,0),z=new a.Point(0,0);let V=0;for(const ee in C){const se=C[ee],le=this._touches[ee];le&&(M._add(se),z._add(se.sub(le)),V++,C[ee]=se)}if(this._touches=C,V<this._minTouches||!z.mag())return;const X=z.div(V);return this._sum._add(X),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(V),panDelta:X}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ra{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,v,S){this._firstTwoTouches||S.length<2||(this._firstTwoTouches=[S[0].identifier,S[1].identifier],this._start([v[0],v[1]]))}touchmove(l,v,S){if(!this._firstTwoTouches)return;l.preventDefault();const[C,M]=this._firstTwoTouches,z=ks(S,v,C),V=ks(S,v,M);if(!z||!V)return;const X=this._aroundCenter?null:z.add(V).div(2);return this._move([z,V],X,l)}touchend(l,v,S){if(!this._firstTwoTouches)return;const[C,M]=this._firstTwoTouches,z=ks(S,v,C),V=ks(S,v,M);z&&V||(this._active&&f.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ks(A,l,v){for(let S=0;S<A.length;S++)if(A[S].identifier===v)return l[S]}function cl(A,l){return Math.log(A/l)/Math.LN2}class Ds extends ra{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,v){const S=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(cl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:cl(this._distance,S),pinchAround:v}}}function zl(A,l){return 180*A.angleWith(l)/Math.PI}class Oo extends ra{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,v){const S=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zl(this._vector,S),pinchAround:v}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const v=25/(Math.PI*this._minDiameter)*360,S=zl(l,this._startVector);return Math.abs(S)<v}}function Ra(A){return Math.abs(A.y)>Math.abs(A.x)}class _i extends ra{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,v,S){super.touchstart(l,v,S),this._currentTouchCount=S.length}_start(l){this._lastPoints=l,Ra(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,v,S){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const C=l[0].sub(this._lastPoints[0]),M=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,M,S.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(C.y+M.y)/2*-.5}):void 0}gestureBeginsVertically(l,v,S){if(this._valid!==void 0)return this._valid;const C=l.mag()>=2,M=v.mag()>=2;if(!C&&!M)return;if(!C||!M)return this._firstMove===void 0&&(this._firstMove=S),S-this._firstMove<100&&void 0;const z=l.y>0==v.y>0;return Ra(l)&&Ra(v)&&z}}const Eh={panStep:100,bearingStep:15,pitchStep:10};class ka{constructor(l){this._tr=new su(l);const v=Eh;this._panStep=v.panStep,this._bearingStep=v.bearingStep,this._pitchStep=v.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let v=0,S=0,C=0,M=0,z=0;switch(l.keyCode){case 61:case 107:case 171:case 187:v=1;break;case 189:case 109:case 173:v=-1;break;case 37:l.shiftKey?S=-1:(l.preventDefault(),M=-1);break;case 39:l.shiftKey?S=1:(l.preventDefault(),M=1);break;case 38:l.shiftKey?C=1:(l.preventDefault(),z=-1);break;case 40:l.shiftKey?C=-1:(l.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(S=0,C=0),{cameraAnimation:V=>{const X=this._tr;V.easeTo({duration:300,easeId:"keyboardHandler",easing:Li,zoom:v?Math.round(X.zoom)+v*(l.shiftKey?2:1):X.zoom,bearing:X.bearing+S*this._bearingStep,pitch:X.pitch+C*this._pitchStep,offset:[-M*this._panStep,-z*this._panStep],center:X.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Li(A){return A*(2-A)}const uu=4.000244140625;class Of{constructor(l,v){this._onTimeout=S=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(S)},this._map=l,this._tr=new su(l),this._el=l.getCanvasContainer(),this._triggerRenderFrame=v,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!l[this._map._metaKey])return;l.preventDefault()}let v=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const S=a.browser.now(),C=S-(this._lastWheelEventTime||0);this._lastWheelEventTime=S,v!==0&&v%uu==0?this._type="wheel":v!==0&&Math.abs(v)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=v,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(C*v)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,v+=this._lastValue)),l.shiftKey&&v&&(v/=4),this._type&&(this._lastWheelEvent=l,this._delta-=v,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const v=f.mousePos(this._el,l),S=this._tr;this._around=a.LngLat.convert(this._aroundCenter?S.center:S.unproject(v)),this._aroundPoint=S.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(this._delta!==0){const V=this._type==="wheel"&&Math.abs(this._delta)>uu?this._wheelZoomRate:this._defaultZoomRate;let X=2/(1+Math.exp(-Math.abs(this._delta*V)));this._delta<0&&X!==0&&(X=1/X);const ee=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ee*X))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,S=this._startZoom,C=this._easing;let M,z=!1;if(this._type==="wheel"&&S&&C){const V=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),X=C(V);M=a.interpolate.number(S,v,X),V<1?this._frameId||(this._frameId=!0):z=!0}else M=v,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!z,zoomDelta:M-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let v=a.defaultEasing;if(this._prevEase){const S=this._prevEase,C=(a.browser.now()-S.start)/S.duration,M=S.easing(C+.01)-S.easing(C),z=.27/Math.sqrt(M*M+1e-4)*.01,V=Math.sqrt(.0729-z*z);v=a.bezier(z,V,.25,1)}return this._prevEase={start:a.browser.now(),duration:l,easing:v},v}reset(){this._active=!1}}class fl{constructor(l,v){this._clickZoom=l,this._tapZoom=v}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class lu{constructor(l){this._tr=new su(l),this.reset()}reset(){this._active=!1}dblclick(l,v){return l.preventDefault(),{cameraAnimation:S=>{S.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(v)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ji{constructor(){this._tap=new Bi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,v,S){if(!this._swipePoint)if(this._tapTime){const C=v[0],M=l.timeStamp-this._tapTime<500,z=this._tapPoint.dist(C)<30;M&&z?S.length>0&&(this._swipePoint=C,this._swipeTouch=S[0].identifier):this.reset()}else this._tap.touchstart(l,v,S)}touchmove(l,v,S){if(this._tapTime){if(this._swipePoint){if(S[0].identifier!==this._swipeTouch)return;const C=v[0],M=C.y-this._swipePoint.y;return this._swipePoint=C,l.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(l,v,S)}touchend(l,v,S){if(this._tapTime)this._swipePoint&&S.length===0&&this.reset();else{const C=this._tap.touchend(l,v,S);C&&(this._tapTime=l.timeStamp,this._tapPoint=C)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ci{constructor(l,v,S){this._el=l,this._mousePan=v,this._touchPan=S}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fi{constructor(l,v,S){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=v,this._mousePitch=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class To{constructor(l,v,S,C){this._el=l,this._touchZoom=v,this._touchRotate=S,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Bl=A=>A.zoom||A.drag||A.pitch||A.rotate;class Tf extends a.Event{}function ji(A){return A.panDelta&&A.panDelta.mag()||A.zoomDelta||A.bearingDelta||A.pitchDelta}class um{constructor(l,v){this.handleWindowEvent=C=>{this.handleEvent(C,`${C.type}Window`)},this.handleEvent=(C,M)=>{if(C.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=C.type==="renderFrame"?void 0:C,V={needsRenderFrame:!1},X={},ee={},se=C.touches,le=se?this._getMapTouches(se):void 0,we=le?f.touchPos(this._el,le):f.mousePos(this._el,C);for(const{handlerName:Be,handler:Re,allowed:et}of this._handlers){if(!Re.isEnabled())continue;let ct;this._blockedByActive(ee,et,Be)?Re.reset():Re[M||C.type]&&(ct=Re[M||C.type](C,we,le),this.mergeHandlerResult(V,X,ct,Be,z),ct&&ct.needsRenderFrame&&this._triggerRenderFrame()),(ct||Re.isActive())&&(ee[Be]=Re)}const De={};for(const Be in this._previousActiveHandlers)ee[Be]||(De[Be]=z);this._previousActiveHandlers=ee,(Object.keys(De).length||ji(V))&&(this._changes.push([V,X,De]),this._triggerRenderFrame()),(Object.keys(ee).length||ji(V))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ke}=V;ke&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ke(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new au(l),this._bearingSnap=v.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(v);const S=this._el;this._listeners=[[S,"touchstart",{passive:!0}],[S,"touchmove",{passive:!1}],[S,"touchend",void 0],[S,"touchcancel",void 0],[S,"mousedown",void 0],[S,"mousemove",void 0],[S,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[S,"mouseover",void 0],[S,"mouseout",void 0],[S,"dblclick",void 0],[S,"click",void 0],[S,"keydown",{capture:!1}],[S,"keyup",void 0],[S,"wheel",{passive:!1}],[S,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,M,z]of this._listeners)f.addEventListener(C,M,C===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[l,v,S]of this._listeners)f.removeEventListener(l,v,l===document?this.handleWindowEvent:this.handleEvent,S)}_addDefaultHandlers(l){const v=this._map,S=v.getCanvasContainer();this._add("mapEvent",new Uc(v,l));const C=v.boxZoom=new wo(v,l);this._add("boxZoom",C),l.interactive&&l.boxZoom&&C.enable();const M=new Jt(v),z=new lu(v);v.doubleClickZoom=new fl(z,M),this._add("tapZoom",M),this._add("clickZoom",z),l.interactive&&l.doubleClickZoom&&v.doubleClickZoom.enable();const V=new Ji;this._add("tapDragZoom",V);const X=v.touchPitch=new _i(v);this._add("touchPitch",X),l.interactive&&l.touchPitch&&v.touchPitch.enable(l.touchPitch);const ee=Vc(l),se=ms(l);v.dragRotate=new fi(l,ee,se),this._add("mouseRotate",ee,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]),l.interactive&&l.dragRotate&&v.dragRotate.enable();const le=(({enable:et,clickTolerance:ct})=>{const Ve=new Ki({checkCorrectEvent:it=>f.mouseButton(it)===0&&!it.ctrlKey});return new Rs({clickTolerance:ct,move:(it,ht)=>({around:ht,panDelta:ht.sub(it)}),activateOnStart:!0,moveStateManager:Ve,enable:et,assignEvents:Mt})})(l),we=new lo(l,v);v.dragPan=new ci(S,le,we),this._add("mousePan",le),this._add("touchPan",we,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&v.dragPan.enable(l.dragPan);const De=new Oo,ke=new Ds;v.touchZoomRotate=new To(S,ke,De,V),this._add("touchRotate",De,["touchPan","touchZoom"]),this._add("touchZoom",ke,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&v.touchZoomRotate.enable(l.touchZoomRotate);const Be=v.scrollZoom=new Of(v,()=>this._triggerRenderFrame());this._add("scrollZoom",Be,["mousePan"]),l.interactive&&l.scrollZoom&&v.scrollZoom.enable(l.scrollZoom);const Re=v.keyboard=new ka(v);this._add("keyboard",Re),l.interactive&&l.keyboard&&v.keyboard.enable(),this._add("blockableMapEvent",new ll(v))}_add(l,v,S){this._handlers.push({handlerName:l,handler:v,allowed:S}),this._handlersById[l]=v}stop(l){if(!this._updatingCamera){for(const{handler:v}of this._handlers)v.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bl(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,v,S){for(const C in l)if(C!==S&&(!v||v.indexOf(C)<0))return!0;return!1}_getMapTouches(l){const v=[];for(const S of l)this._el.contains(S.target)&&v.push(S);return v}mergeHandlerResult(l,v,S,C,M){if(!S)return;a.extend(l,S);const z={handlerName:C,originalEvent:S.originalEvent||M};S.zoomDelta!==void 0&&(v.zoom=z),S.panDelta!==void 0&&(v.drag=z),S.pitchDelta!==void 0&&(v.pitch=z),S.bearingDelta!==void 0&&(v.rotate=z)}_applyChanges(){const l={},v={},S={};for(const[C,M,z]of this._changes)C.panDelta&&(l.panDelta=(l.panDelta||new a.Point(0,0))._add(C.panDelta)),C.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+C.pitchDelta),C.around!==void 0&&(l.around=C.around),C.pinchAround!==void 0&&(l.pinchAround=C.pinchAround),C.noInertia&&(l.noInertia=C.noInertia),a.extend(v,M),a.extend(S,z);this._updateMapTransform(l,v,S),this._changes=[]}_updateMapTransform(l,v,S){const C=this._map,M=C._getTransformForUpdate(),z=C.terrain;if(!(ji(l)||z&&this._terrainMovement))return this._fireEvents(v,S,!0);let{panDelta:V,zoomDelta:X,bearingDelta:ee,pitchDelta:se,around:le,pinchAround:we}=l;we!==void 0&&(le=we),C._stop(!0),le=le||C.transform.centerPoint;const De=M.pointLocation(V?le.sub(V):le);ee&&(M.bearing+=ee),se&&(M.pitch+=se),X&&(M.zoom+=X),z?this._terrainMovement||!v.drag&&!v.zoom?v.drag&&this._terrainMovement?M.center=M.pointLocation(M.centerPoint.sub(V)):M.setLocationAtPoint(De,le):(this._terrainMovement=!0,this._map._elevationFreeze=!0,M.setLocationAtPoint(De,le),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,M.recalculateZoom(C.terrain)})):M.setLocationAtPoint(De,le),C._applyUpdatedTransform(M),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(v,S,!0)}_fireEvents(l,v,S){const C=Bl(this._eventsInProgress),M=Bl(l),z={};for(const se in l){const{originalEvent:le}=l[se];this._eventsInProgress[se]||(z[`${se}start`]=le),this._eventsInProgress[se]=l[se]}!C&&M&&this._fireEvent("movestart",M.originalEvent);for(const se in z)this._fireEvent(se,z[se]);M&&this._fireEvent("move",M.originalEvent);for(const se in l){const{originalEvent:le}=l[se];this._fireEvent(se,le)}const V={};let X;for(const se in this._eventsInProgress){const{handlerName:le,originalEvent:we}=this._eventsInProgress[se];this._handlersById[le].isActive()||(delete this._eventsInProgress[se],X=v[le]||we,V[`${se}end`]=X)}for(const se in V)this._fireEvent(se,V[se]);const ee=Bl(this._eventsInProgress);if(S&&(C||M)&&!ee){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),le=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;se?(le(se.bearing||this._map.getBearing())&&(se.bearing=0),se.freezeElevation=!0,this._map.easeTo(se,{originalEvent:X})):(this._map.fire(new a.Event("moveend",{originalEvent:X})),le(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,v){this._map.fire(new a.Event(l,v?{originalEvent:v}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new Tf("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class cu extends a.Evented{constructor(l,v){super(),this._renderFrameCallback=()=>{const S=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(S)),S<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=v.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,v){return this.jumpTo({center:l},v)}panBy(l,v,S){return l=a.Point.convert(l).mult(-1),this.panTo(this.transform.center,a.extend({offset:l},v),S)}panTo(l,v,S){return this.easeTo(a.extend({center:l},v),S)}getZoom(){return this.transform.zoom}setZoom(l,v){return this.jumpTo({zoom:l},v),this}zoomTo(l,v,S){return this.easeTo(a.extend({zoom:l},v),S)}zoomIn(l,v){return this.zoomTo(this.getZoom()+1,l,v),this}zoomOut(l,v){return this.zoomTo(this.getZoom()-1,l,v),this}getBearing(){return this.transform.bearing}setBearing(l,v){return this.jumpTo({bearing:l},v),this}getPadding(){return this.transform.padding}setPadding(l,v){return this.jumpTo({padding:l},v),this}rotateTo(l,v,S){return this.easeTo(a.extend({bearing:l},v),S)}resetNorth(l,v){return this.rotateTo(0,a.extend({duration:1e3},l),v),this}resetNorthPitch(l,v){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},l),v),this}snapToNorth(l,v){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,v):this}getPitch(){return this.transform.pitch}setPitch(l,v){return this.jumpTo({pitch:l},v),this}cameraForBounds(l,v){l=Le.convert(l);const S=v&&v.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),S,v)}_cameraForBoxAndBearing(l,v,S,C){const M={top:0,bottom:0,right:0,left:0};if(typeof(C=a.extend({padding:M,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const ht=C.padding;C.padding={top:ht,bottom:ht,right:ht,left:ht}}C.padding=a.extend(M,C.padding);const z=this.transform,V=z.padding,X=z.project(a.LngLat.convert(l)),ee=z.project(a.LngLat.convert(v)),se=X.rotate(-S*Math.PI/180),le=ee.rotate(-S*Math.PI/180),we=new a.Point(Math.max(se.x,le.x),Math.max(se.y,le.y)),De=new a.Point(Math.min(se.x,le.x),Math.min(se.y,le.y)),ke=we.sub(De),Be=(z.width-(V.left+V.right+C.padding.left+C.padding.right))/ke.x,Re=(z.height-(V.top+V.bottom+C.padding.top+C.padding.bottom))/ke.y;if(Re<0||Be<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const et=Math.min(z.scaleZoom(z.scale*Math.min(Be,Re)),C.maxZoom),ct=a.Point.convert(C.offset),Ve=new a.Point((C.padding.left-C.padding.right)/2,(C.padding.top-C.padding.bottom)/2).rotate(S*Math.PI/180),it=ct.add(Ve).mult(z.scale/z.zoomScale(et));return{center:z.unproject(X.add(ee).div(2).sub(it)),zoom:et,bearing:S}}fitBounds(l,v,S){return this._fitInternal(this.cameraForBounds(l,v),v,S)}fitScreenCoordinates(l,v,S,C,M){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(l)),this.transform.pointLocation(a.Point.convert(v)),S,C),C,M)}_fitInternal(l,v,S){return l?(delete(v=a.extend(l,v)).padding,v.linear?this.easeTo(v,S):this.flyTo(v,S)):this}jumpTo(l,v){this.stop();const S=this._getTransformForUpdate();let C=!1,M=!1,z=!1;return"zoom"in l&&S.zoom!==+l.zoom&&(C=!0,S.zoom=+l.zoom),l.center!==void 0&&(S.center=a.LngLat.convert(l.center)),"bearing"in l&&S.bearing!==+l.bearing&&(M=!0,S.bearing=+l.bearing),"pitch"in l&&S.pitch!==+l.pitch&&(z=!0,S.pitch=+l.pitch),l.padding==null||S.isPaddingEqual(l.padding)||(S.padding=l.padding),this._applyUpdatedTransform(S),this.fire(new a.Event("movestart",v)).fire(new a.Event("move",v)),C&&this.fire(new a.Event("zoomstart",v)).fire(new a.Event("zoom",v)).fire(new a.Event("zoomend",v)),M&&this.fire(new a.Event("rotatestart",v)).fire(new a.Event("rotate",v)).fire(new a.Event("rotateend",v)),z&&this.fire(new a.Event("pitchstart",v)).fire(new a.Event("pitch",v)).fire(new a.Event("pitchend",v)),this.fire(new a.Event("moveend",v))}calculateCameraOptionsFromTo(l,v,S,C=0){const M=a.MercatorCoordinate.fromLngLat(l,v),z=a.MercatorCoordinate.fromLngLat(S,C),V=z.x-M.x,X=z.y-M.y,ee=z.z-M.z,se=Math.hypot(V,X,ee);if(se===0)throw new Error("Can't calculate camera options with same From and To");const le=Math.hypot(V,X),we=this.transform.scaleZoom(this.transform.cameraToCenterDistance/se/this.transform.tileSize),De=180*Math.atan2(V,-X)/Math.PI;let ke=180*Math.acos(le/se)/Math.PI;return ke=ee<0?90-ke:90+ke,{center:z.toLngLat(),zoom:we,pitch:ke,bearing:De}}easeTo(l,v){this._stop(!1,l.easeId),((l=a.extend({offset:[0,0],duration:500,easing:a.defaultEasing},l)).animate===!1||!l.essential&&a.browser.prefersReducedMotion)&&(l.duration=0);const S=this._getTransformForUpdate(),C=this.getZoom(),M=this.getBearing(),z=this.getPitch(),V=this.getPadding(),X="zoom"in l?+l.zoom:C,ee="bearing"in l?this._normalizeBearing(l.bearing,M):M,se="pitch"in l?+l.pitch:z,le="padding"in l?l.padding:S.padding,we=a.Point.convert(l.offset);let De=S.centerPoint.add(we);const ke=S.pointLocation(De),Be=a.LngLat.convert(l.center||ke);this._normalizeCenter(Be);const Re=S.project(ke),et=S.project(Be).sub(Re),ct=S.zoomScale(X-C);let Ve,it;l.around&&(Ve=a.LngLat.convert(l.around),it=S.locationPoint(Ve));const ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||X!==C,this._rotating=this._rotating||M!==ee,this._pitching=this._pitching||se!==z,this._padding=!S.isPaddingEqual(le),this._easeId=l.easeId,this._prepareEase(v,l.noMoveStart,ht),this.terrain&&this._prepareElevation(Be),this._ease(dt=>{if(this._zooming&&(S.zoom=a.interpolate.number(C,X,dt)),this._rotating&&(S.bearing=a.interpolate.number(M,ee,dt)),this._pitching&&(S.pitch=a.interpolate.number(z,se,dt)),this._padding&&(S.interpolatePadding(V,le,dt),De=S.centerPoint.add(we)),this.terrain&&!l.freezeElevation&&this._updateElevation(dt),Ve)S.setLocationAtPoint(Ve,it);else{const wt=S.zoomScale(S.zoom-C),At=X>C?Math.min(2,ct):Math.max(.5,ct),St=Math.pow(At,1-dt),Dt=S.unproject(Re.add(et.mult(dt*St)).mult(wt));S.setLocationAtPoint(S.renderWorldCopies?Dt.wrap():Dt,De)}this._applyUpdatedTransform(S),this._fireMoveEvents(v)},dt=>{this.terrain&&this._finalizeElevation(),this._afterEase(v,dt)},l),this}_prepareEase(l,v,S={}){this._moving=!0,v||S.moving||this.fire(new a.Event("movestart",l)),this._zooming&&!S.zooming&&this.fire(new a.Event("zoomstart",l)),this._rotating&&!S.rotating&&this.fire(new a.Event("rotatestart",l)),this._pitching&&!S.pitching&&this.fire(new a.Event("pitchstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const v=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&v!==this._elevationTarget){const S=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(S-(v-(S*l+this._elevationStart))/(1-l)),this._elevationTarget=v}this.transform.elevation=a.interpolate.number(this._elevationStart,this._elevationTarget,l)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(l){if(!this.transformCameraUpdate)return;const v=l.clone(),{center:S,zoom:C,pitch:M,bearing:z,elevation:V}=this.transformCameraUpdate(v);S&&(v.center=S),C!==void 0&&(v.zoom=C),M!==void 0&&(v.pitch=M),z!==void 0&&(v.bearing=z),V!==void 0&&(v.elevation=V),this.transform.apply(v)}_fireMoveEvents(l){this.fire(new a.Event("move",l)),this._zooming&&this.fire(new a.Event("zoom",l)),this._rotating&&this.fire(new a.Event("rotate",l)),this._pitching&&this.fire(new a.Event("pitch",l))}_afterEase(l,v){if(this._easeId&&v&&this._easeId===v)return;delete this._easeId;const S=this._zooming,C=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,S&&this.fire(new a.Event("zoomend",l)),C&&this.fire(new a.Event("rotateend",l)),M&&this.fire(new a.Event("pitchend",l)),this.fire(new a.Event("moveend",l))}flyTo(l,v){if(!l.essential&&a.browser.prefersReducedMotion){const fr=a.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(fr,v)}this.stop(),l=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.defaultEasing},l);const S=this._getTransformForUpdate(),C=this.getZoom(),M=this.getBearing(),z=this.getPitch(),V=this.getPadding(),X="zoom"in l?a.clamp(+l.zoom,S.minZoom,S.maxZoom):C,ee="bearing"in l?this._normalizeBearing(l.bearing,M):M,se="pitch"in l?+l.pitch:z,le="padding"in l?l.padding:S.padding,we=S.zoomScale(X-C),De=a.Point.convert(l.offset);let ke=S.centerPoint.add(De);const Be=S.pointLocation(ke),Re=a.LngLat.convert(l.center||Be);this._normalizeCenter(Re);const et=S.project(Be),ct=S.project(Re).sub(et);let Ve=l.curve;const it=Math.max(S.width,S.height),ht=it/we,dt=ct.mag();if("minZoom"in l){const fr=a.clamp(Math.min(l.minZoom,C,X),S.minZoom,S.maxZoom),Ui=it/S.zoomScale(fr-C);Ve=Math.sqrt(Ui/dt*2)}const wt=Ve*Ve;function At(fr){const Ui=(ht*ht-it*it+(fr?-1:1)*wt*wt*dt*dt)/(2*(fr?ht:it)*wt*dt);return Math.log(Math.sqrt(Ui*Ui+1)-Ui)}function St(fr){return(Math.exp(fr)-Math.exp(-fr))/2}function Dt(fr){return(Math.exp(fr)+Math.exp(-fr))/2}const pr=At(!1);let cn=function(fr){return Dt(pr)/Dt(pr+Ve*fr)},jt=function(fr){return it*((Dt(pr)*(St(Ui=pr+Ve*fr)/Dt(Ui))-St(pr))/wt)/dt;var Ui},xr=(At(!0)-pr)/Ve;if(Math.abs(dt)<1e-6||!isFinite(xr)){if(Math.abs(it-ht)<1e-6)return this.easeTo(l,v);const fr=ht<it?-1:1;xr=Math.abs(Math.log(ht/it))/Ve,jt=function(){return 0},cn=function(Ui){return Math.exp(fr*Ve*Ui)}}return l.duration="duration"in l?+l.duration:1e3*xr/("screenSpeed"in l?+l.screenSpeed/Ve:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=M!==ee,this._pitching=se!==z,this._padding=!S.isPaddingEqual(le),this._prepareEase(v,!1),this.terrain&&this._prepareElevation(Re),this._ease(fr=>{const Ui=fr*xr,fn=1/cn(Ui);S.zoom=fr===1?X:C+S.scaleZoom(fn),this._rotating&&(S.bearing=a.interpolate.number(M,ee,fr)),this._pitching&&(S.pitch=a.interpolate.number(z,se,fr)),this._padding&&(S.interpolatePadding(V,le,fr),ke=S.centerPoint.add(De)),this.terrain&&!l.freezeElevation&&this._updateElevation(fr);const Sr=fr===1?Re:S.unproject(et.add(ct.mult(jt(Ui))).mult(fn));S.setLocationAtPoint(S.renderWorldCopies?Sr.wrap():Sr,ke),this._applyUpdatedTransform(S),this._fireMoveEvents(v)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(v)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,v){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,v)}if(!l){const S=this.handlers;S&&S.stop(!1)}return this}_ease(l,v,S){S.animate===!1||S.duration===0?(l(1),v()):(this._easeStart=a.browser.now(),this._easeOptions=S,this._onEaseFrame=l,this._onEaseEnd=v,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,v){l=a.wrap(l,-180,180);const S=Math.abs(l-v);return Math.abs(l-360-v)<S&&(l-=360),Math.abs(l+360-v)<S&&(l+=360),l}_normalizeCenter(l){const v=this.transform;if(!v.renderWorldCopies||v.lngRange)return;const S=l.lng-v.center.lng;l.lng+=S>180?-360:S<-180?360:0}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.LngLat.convert(l),this.transform.tileZoom)-this.transform.elevation:null}}class Ns{constructor(l={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=v=>{!v||v.sourceDataType!=="metadata"&&v.sourceDataType!=="visibility"&&v.dataType!=="style"&&v.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=f.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=f.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=f.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){f.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,v){const S=this._map._getUIString(`AttributionControl.${v}`);l.title=S,l.setAttribute("aria-label",S)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(C=>typeof C!="string"?"":C)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const v=this._map.style.sourceCaches;for(const C in v){const M=v[C];if(M.used||M.usedForTerrain){const z=M.getSource();z.attribution&&l.indexOf(z.attribution)<0&&l.push(z.attribution)}}l=l.filter(C=>String(C).trim()),l.sort((C,M)=>C.length-M.length),l=l.filter((C,M)=>{for(let z=M+1;z<l.length;z++)if(l[z].indexOf(C)>=0)return!1;return!0});const S=l.join(" | ");S!==this._attribHTML&&(this._attribHTML=S,l.length?(this._innerContainer.innerHTML=S,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class hl{constructor(l={}){this._updateCompact=()=>{const v=this._container.children;if(v.length){const S=v[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&S.classList.add("maplibregl-compact"):S.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=f.create("div","maplibregl-ctrl");const v=f.create("a","maplibregl-ctrl-logo");return v.target="_blank",v.rel="noopener nofollow",v.href="https://maplibre.org/",v.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),v.setAttribute("rel","noopener nofollow"),this._container.appendChild(v),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){f.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class gr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const v=++this._id;return this._queue.push({callback:l,id:v,cancelled:!1}),v}remove(l){const v=this._currentlyRunning,S=v?this._queue.concat(v):this._queue;for(const C of S)if(C.id===l)return void(C.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const v=this._currentlyRunning=this._queue;this._queue=[];for(const S of v)if(!S.cancelled&&(S.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ir={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Ha=a.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class jl extends a.Evented{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,v){this.sourceCache.update(l,v),this._renderableTilesKeys=[];const S={};for(const C of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:v}))S[C.key]=!0,this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.posMatrix=new Float64Array(16),a.ortho(C.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[C.key]=new ot(C,this.tileSize));for(const C in this._tiles)S[C]||delete this._tiles[C]}freeRtt(l){for(const v in this._tiles){const S=this._tiles[v];(!l||S.tileID.equals(l)||S.tileID.isChildOf(l)||l.isChildOf(S.tileID))&&(S.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const v={};for(const S of this._renderableTilesKeys){const C=this._tiles[S].tileID;if(C.canonical.equals(l.canonical)){const M=l.clone();M.posMatrix=new Float64Array(16),a.ortho(M.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),v[S]=M}else if(C.canonical.isChildOf(l.canonical)){const M=l.clone();M.posMatrix=new Float64Array(16);const z=C.canonical.z-l.canonical.z,V=C.canonical.x-(C.canonical.x>>z<<z),X=C.canonical.y-(C.canonical.y>>z<<z),ee=a.EXTENT>>z;a.ortho(M.posMatrix,0,ee,0,ee,0,1),a.translate(M.posMatrix,M.posMatrix,[-V*ee,-X*ee,0]),v[S]=M}else if(l.canonical.isChildOf(C.canonical)){const M=l.clone();M.posMatrix=new Float64Array(16);const z=l.canonical.z-C.canonical.z,V=l.canonical.x-(l.canonical.x>>z<<z),X=l.canonical.y-(l.canonical.y>>z<<z),ee=a.EXTENT>>z;a.ortho(M.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(M.posMatrix,M.posMatrix,[V*ee,X*ee,0]),a.scale(M.posMatrix,M.posMatrix,[1/2**z,1/2**z,0]),v[S]=M}}return v}getSourceTile(l,v){const S=this.sourceCache._source;let C=l.overscaledZ-this.deltaZoom;if(C>S.maxzoom&&(C=S.maxzoom),C<S.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(C).key);let M=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!M||!M.dem)&&v)for(;C>=S.minzoom&&(!M||!M.dem);)M=this.sourceCache.getTileByID(l.scaledTo(C--).key);return M}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(v=>v.timeAdded>=l)}}class Ul{constructor(l,v,S){this.painter=l,this.sourceCache=new jl(v),this.options=S,this.exaggeration=typeof S.exaggeration=="number"?S.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,v,S,C=a.EXTENT){var M;if(!(v>=0&&v<C&&S>=0&&S<C))return 0;const z=this.getTerrainData(l),V=(M=z.tile)===null||M===void 0?void 0:M.dem;if(!V)return 0;const X=function(ke,Be,Re){var et=Be[0],ct=Be[1];return ke[0]=Re[0]*et+Re[4]*ct+Re[12],ke[1]=Re[1]*et+Re[5]*ct+Re[13],ke}([],[v/C*a.EXTENT,S/C*a.EXTENT],z.u_terrain_matrix),ee=[X[0]*V.dim,X[1]*V.dim],se=Math.floor(ee[0]),le=Math.floor(ee[1]),we=ee[0]-se,De=ee[1]-le;return V.get(se,le)*(1-we)*(1-De)+V.get(se+1,le)*we*(1-De)+V.get(se,le+1)*(1-we)*De+V.get(se+1,le+1)*we*De}getElevationForLngLatZoom(l,v){const{tileID:S,mercatorX:C,mercatorY:M}=this._getOverscaledTileIDFromLngLatZoom(l,v);return this.getElevation(S,C%a.EXTENT,M%a.EXTENT,a.EXTENT)}getElevation(l,v,S,C=a.EXTENT){return this.getDEMElevation(l,v,S,C)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const C=this.painter.context,M=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Q(C,M,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Q(C,new a.RGBAImage({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const v=this.sourceCache.getSourceTile(l,!0);if(v&&v.dem&&(!v.demTexture||v.needsTerrainPrepare)){const C=this.painter.context;v.demTexture=this.painter.getTileTexture(v.dem.stride),v.demTexture?v.demTexture.update(v.dem.getPixels(),{premultiply:!1}):v.demTexture=new Q(C,v.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),v.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),v.needsTerrainPrepare=!1}const S=v&&v+v.tileID.key+l.key;if(S&&!this._demMatrixCache[S]){const C=this.sourceCache.sourceCache._source.maxzoom;let M=l.canonical.z-v.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=C?M=l.canonical.z-C:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=l.canonical.x-(l.canonical.x>>M<<M),V=l.canonical.y-(l.canonical.y>>M<<M),X=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<M),1/(a.EXTENT<<M),0]);a.translate(X,X,[z*a.EXTENT,V*a.EXTENT,0]),this._demMatrixCache[l.key]={matrix:X,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:v&&v.dem&&v.dem.dim||1,u_terrain_matrix:S?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:v&&v.dem&&v.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(v&&v.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:v}}getFramebuffer(l){const v=this.painter,S=v.width/devicePixelRatio,C=v.height/devicePixelRatio;return!this._fbo||this._fbo.width===S&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Q(v.context,{width:S,height:C,data:null},v.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(v.context.gl.NEAREST,v.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Q(v.context,{width:S,height:C,data:null},v.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(v.context.gl.NEAREST,v.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=v.context.createFramebuffer(S,C,!0,!1),this._fbo.depthAttachment.set(v.context.createRenderbuffer(v.context.gl.DEPTH_COMPONENT16,S,C))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const v=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let M=0,z=0;M<this._coordsTextureSize;M++)for(let V=0;V<this._coordsTextureSize;V++,z+=4)v[z+0]=255&V,v[z+1]=255&M,v[z+2]=V>>8<<4|M>>8,v[z+3]=0;const S=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(v.buffer)),C=new Q(l,S,l.gl.RGBA,{premultiply:!1});return C.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(l){const v=new Uint8Array(4),S=this.painter.context,C=S.gl;S.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,v),S.bindFramebuffer.set(null);const M=v[0]+(v[2]>>4<<8),z=v[1]+((15&v[2])<<8),V=this.coordsIndex[255-v[3]],X=V&&this.sourceCache.getTileByID(V);if(!X)return null;const ee=this._coordsTextureSize,se=(1<<X.tileID.canonical.z)*ee;return new a.MercatorCoordinate((X.tileID.canonical.x*ee+M)/se,(X.tileID.canonical.y*ee+z)/se,this.getElevation(X.tileID,M,z,ee))}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.painter.context,v=new a.Pos3dArray,S=new a.TriangleIndexArray,C=this.meshSize,M=a.EXTENT/C,z=C*C;for(let le=0;le<=C;le++)for(let we=0;we<=C;we++)v.emplaceBack(we*M,le*M,0);for(let le=0;le<z;le+=C+1)for(let we=0;we<C;we++)S.emplaceBack(we+le,C+we+le+1,C+we+le+2),S.emplaceBack(we+le,C+we+le+2,we+le+1);const V=v.length,X=V+2*(C+1);for(const le of[0,1])for(let we=0;we<=C;we++)for(const De of[0,1])v.emplaceBack(we*M,le*a.EXTENT,De);for(let le=0;le<2*C;le+=2)S.emplaceBack(X+le,X+le+1,X+le+3),S.emplaceBack(X+le,X+le+3,X+le+2),S.emplaceBack(V+le,V+le+3,V+le+1),S.emplaceBack(V+le,V+le+2,V+le+3);const ee=v.length,se=ee+2*(C+1);for(const le of[0,1])for(let we=0;we<=C;we++)for(const De of[0,1])v.emplaceBack(le*a.EXTENT,we*M,De);for(let le=0;le<2*C;le+=2)S.emplaceBack(ee+le,ee+le+1,ee+le+3),S.emplaceBack(ee+le,ee+le+3,ee+le+2),S.emplaceBack(se+le,se+le+3,se+le+1),S.emplaceBack(se+le,se+le+2,se+le+3);return this._mesh={indexBuffer:l.createIndexBuffer(S),vertexBuffer:l.createVertexBuffer(v,Ha.members),segments:a.SegmentVector.simpleSegment(0,0,v.length,S.length)},this._mesh}getMeshFrameDelta(l){return 2*Math.PI*a.earthRadius/Math.pow(2,l)/5}getMinTileElevationForLngLatZoom(l,v){var S;const{tileID:C}=this._getOverscaledTileIDFromLngLatZoom(l,v);return(S=this.getMinMaxElevation(C).minElevation)!==null&&S!==void 0?S:0}getMinMaxElevation(l){const v=this.getTerrainData(l).tile,S={minElevation:null,maxElevation:null};return v&&v.dem&&(S.minElevation=v.dem.min*this.exaggeration,S.maxElevation=v.dem.max*this.exaggeration),S}_getOverscaledTileIDFromLngLatZoom(l,v){const S=a.MercatorCoordinate.fromLngLat(l.wrap()),C=(1<<v)*a.EXTENT,M=S.x*C,z=S.y*C,V=Math.floor(M/a.EXTENT),X=Math.floor(z/a.EXTENT);return{tileID:new a.OverscaledTileID(v,0,v,V,X),mercatorX:M,mercatorY:z}}}class ga{constructor(l,v,S){this._context=l,this._size=v,this._tileSize=S,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const v=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),S=new Q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return S.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),v.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),v.colorAttachment.set(S.texture),{id:l,fbo:v,texture:S,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(v=>l.id!==v),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const v of this._recentlyUsed)if(!this._objects[v].inUse)return this._objects[v];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const Fs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class na{constructor(l,v){this.painter=l,this.terrain=v,this.pool=new ga(l.context,30,v.sourceCache.tileSize*v.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,v){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(S=>!l._layers[S].isHidden(v)),this._coordsDescendingInv={};for(const S in l.sourceCaches){this._coordsDescendingInv[S]={};const C=l.sourceCaches[S].getVisibleCoordinates();for(const M of C){const z=this.terrain.sourceCache.getTerrainCoords(M);for(const V in z)this._coordsDescendingInv[S][V]||(this._coordsDescendingInv[S][V]=[]),this._coordsDescendingInv[S][V].push(z[V])}}this._coordsDescendingInvStr={};for(const S of l._order){const C=l._layers[S],M=C.source;if(Fs[C.type]&&!this._coordsDescendingInvStr[M]){this._coordsDescendingInvStr[M]={};for(const z in this._coordsDescendingInv[M])this._coordsDescendingInvStr[M][z]=this._coordsDescendingInv[M][z].map(V=>V.key).sort().join()}}for(const S of this._renderableTiles)for(const C in this._coordsDescendingInvStr){const M=this._coordsDescendingInvStr[C][S.tileID.key];M&&M!==S.rttCoords[C]&&(S.rtt=[])}}renderLayer(l){if(l.isHidden(this.painter.transform.zoom))return!1;const v=l.type,S=this.painter,C=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(Fs[v]&&(this._prevType&&Fs[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(l.id),!C))return!0;if(Fs[this._prevType]||Fs[v]&&C){this._prevType=v;const M=this._stacks.length-1,z=this._stacks[M]||[];for(const V of this._renderableTiles){if(this.pool.isFull()&&(Af(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(V),V.rtt[M]){const ee=this.pool.getObjectForId(V.rtt[M].id);if(ee.stamp===V.rtt[M].stamp){this.pool.useObject(ee);continue}}const X=this.pool.getOrCreateFreeObject();this.pool.useObject(X),this.pool.stampObject(X),V.rtt[M]={id:X.id,stamp:X.stamp},S.context.bindFramebuffer.set(X.fbo.framebuffer),S.context.clear({color:a.Color.transparent,stencil:0}),S.currentStencilSource=void 0;for(let ee=0;ee<z.length;ee++){const se=S.style._layers[z[ee]],le=se.source?this._coordsDescendingInv[se.source][V.tileID.key]:[V.tileID];S.context.viewport.set([0,0,X.fbo.width,X.fbo.height]),S._renderTileClippingMasks(se,le),S.renderLayer(S,S.style.sourceCaches[se.source],se,le),se.source&&(V.rttCoords[se.source]=this._coordsDescendingInvStr[se.source][V.tileID.key])}}return Af(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Fs[v]}return!1}}const Mf=d,$u={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},ei=A=>{A.touchstart=A.dragStart,A.touchmoveWindow=A.dragMove,A.touchend=A.dragEnd},nr={showCompass:!0,showZoom:!0,visualizePitch:!1};class zu{constructor(l,v,S=!1){this.mousedown=z=>{this.startMouse(a.extend({},z,{ctrlKey:!0,preventDefault:()=>z.preventDefault()}),f.mousePos(this.element,z)),f.addEventListener(window,"mousemove",this.mousemove),f.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=z=>{this.moveMouse(z,f.mousePos(this.element,z))},this.mouseup=z=>{this.mouseRotate.dragEnd(z),this.mousePitch&&this.mousePitch.dragEnd(z),this.offTemp()},this.touchstart=z=>{z.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=f.touchPos(this.element,z.targetTouches)[0],this.startTouch(z,this._startPos),f.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),f.addEventListener(window,"touchend",this.touchend))},this.touchmove=z=>{z.targetTouches.length!==1?this.reset():(this._lastPos=f.touchPos(this.element,z.targetTouches)[0],this.moveTouch(z,this._lastPos))},this.touchend=z=>{z.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const C=l.dragRotate._mouseRotate.getClickTolerance(),M=l.dragRotate._mousePitch.getClickTolerance();this.element=v,this.mouseRotate=Vc({clickTolerance:C,enable:!0}),this.touchRotate=(({enable:z,clickTolerance:V,bearingDegreesPerPixelMoved:X=.8})=>{const ee=new If;return new Rs({clickTolerance:V,move:(se,le)=>({bearingDelta:(le.x-se.x)*X}),moveStateManager:ee,enable:z,assignEvents:ei})})({clickTolerance:C,enable:!0}),this.map=l,S&&(this.mousePitch=ms({clickTolerance:M,enable:!0}),this.touchPitch=(({enable:z,clickTolerance:V,pitchDegreesPerPixelMoved:X=-.5})=>{const ee=new If;return new Rs({clickTolerance:V,move:(se,le)=>({pitchDelta:(le.y-se.y)*X}),moveStateManager:ee,enable:z,assignEvents:ei})})({clickTolerance:M,enable:!0})),f.addEventListener(v,"mousedown",this.mousedown),f.addEventListener(v,"touchstart",this.touchstart,{passive:!1}),f.addEventListener(v,"touchcancel",this.reset)}startMouse(l,v){this.mouseRotate.dragStart(l,v),this.mousePitch&&this.mousePitch.dragStart(l,v),f.disableDrag()}startTouch(l,v){this.touchRotate.dragStart(l,v),this.touchPitch&&this.touchPitch.dragStart(l,v),f.disableDrag()}moveMouse(l,v){const S=this.map,{bearingDelta:C}=this.mouseRotate.dragMove(l,v)||{};if(C&&S.setBearing(S.getBearing()+C),this.mousePitch){const{pitchDelta:M}=this.mousePitch.dragMove(l,v)||{};M&&S.setPitch(S.getPitch()+M)}}moveTouch(l,v){const S=this.map,{bearingDelta:C}=this.touchRotate.dragMove(l,v)||{};if(C&&S.setBearing(S.getBearing()+C),this.touchPitch){const{pitchDelta:M}=this.touchPitch.dragMove(l,v)||{};M&&S.setPitch(S.getPitch()+M)}}off(){const l=this.element;f.removeEventListener(l,"mousedown",this.mousedown),f.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),f.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),f.removeEventListener(window,"touchend",this.touchend),f.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){f.enableDrag(),f.removeEventListener(window,"mousemove",this.mousemove),f.removeEventListener(window,"mouseup",this.mouseup),f.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),f.removeEventListener(window,"touchend",this.touchend)}}let ia;function $s(A,l,v){if(A=new a.LngLat(A.lng,A.lat),l){const S=new a.LngLat(A.lng-360,A.lat),C=new a.LngLat(A.lng+360,A.lat),M=v.locationPoint(A).distSqr(l);v.locationPoint(S).distSqr(l)<M?A=S:v.locationPoint(C).distSqr(l)<M&&(A=C)}for(;Math.abs(A.lng-v.center.lng)>180;){const S=v.locationPoint(A);if(S.x>=0&&S.y>=0&&S.x<=v.width&&S.y<=v.height)break;A.lng>v.center.lng?A.lng-=360:A.lng+=360}return A}const Mo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lf(A,l,v){const S=A.classList;for(const C in Mo)S.remove(`maplibregl-${v}-anchor-${C}`);S.add(`maplibregl-${v}-anchor-${l}`)}class Lo extends a.Evented{constructor(l){if(super(),this._onKeyPress=v=>{const S=v.code,C=v.charCode||v.keyCode;S!=="Space"&&S!=="Enter"&&C!==32&&C!==13||this.togglePopup()},this._onMapClick=v=>{const S=v.originalEvent.target,C=this._element;this._popup&&(S===C||C.contains(S))&&this.togglePopup()},this._update=v=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=$s(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),v&&v.type!=="moveend"||(this._pos=this._pos.round()),f.setTransform(this._element,`${Mo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${S}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const M=this._map.unproject(this._pos),z=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=M.distanceTo(this._lngLat)>20*z?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=v=>{if(!this._isDragging){const S=this._clickTolerance||this._map._clickTolerance;this._isDragging=v.point.dist(this._pointerdownPos)>=S}this._isDragging&&(this._pos=v.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},this._addDragHandler=v=>{this._element.contains(v.originalEvent.target)&&(v.preventDefault(),this._positionDelta=v.point.sub(this._pos).add(this._offset),this._pointerdownPos=v.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=a.Point.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=f.create("div"),this._element.setAttribute("aria-label","Map marker");const v=f.createNS("http://www.w3.org/2000/svg","svg"),S=41,C=27;v.setAttributeNS(null,"display","block"),v.setAttributeNS(null,"height",`${S}px`),v.setAttributeNS(null,"width",`${C}px`),v.setAttributeNS(null,"viewBox",`0 0 ${C} ${S}`);const M=f.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"stroke","none"),M.setAttributeNS(null,"stroke-width","1"),M.setAttributeNS(null,"fill","none"),M.setAttributeNS(null,"fill-rule","evenodd");const z=f.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const V=f.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(3.0, 29.0)"),V.setAttributeNS(null,"fill","#000000");const X=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const et of X){const ct=f.createNS("http://www.w3.org/2000/svg","ellipse");ct.setAttributeNS(null,"opacity","0.04"),ct.setAttributeNS(null,"cx","10.5"),ct.setAttributeNS(null,"cy","5.80029008"),ct.setAttributeNS(null,"rx",et.rx),ct.setAttributeNS(null,"ry",et.ry),V.appendChild(ct)}const ee=f.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"fill",this._color);const se=f.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ee.appendChild(se);const le=f.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");const we=f.createNS("http://www.w3.org/2000/svg","path");we.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(we);const De=f.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"transform","translate(6.0, 7.0)"),De.setAttributeNS(null,"fill","#FFFFFF");const ke=f.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Be=f.createNS("http://www.w3.org/2000/svg","circle");Be.setAttributeNS(null,"fill","#000000"),Be.setAttributeNS(null,"opacity","0.25"),Be.setAttributeNS(null,"cx","5.5"),Be.setAttributeNS(null,"cy","5.5"),Be.setAttributeNS(null,"r","5.4999962");const Re=f.createNS("http://www.w3.org/2000/svg","circle");Re.setAttributeNS(null,"fill","#FFFFFF"),Re.setAttributeNS(null,"cx","5.5"),Re.setAttributeNS(null,"cy","5.5"),Re.setAttributeNS(null,"r","5.4999962"),ke.appendChild(Be),ke.appendChild(Re),z.appendChild(V),z.appendChild(ee),z.appendChild(le),z.appendChild(De),z.appendChild(ke),v.appendChild(z),v.setAttributeNS(null,"height",S*this._scale+"px"),v.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(v),this._offset=a.Point.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()}),Lf(this._element,this._anchor,"marker"),l&&l.className)for(const v of l.className.split(" "))this._element.classList.add(v);this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),f.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const C=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(l){return this._offset=a.Point.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const mi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let uc=0,fu=!1;const u={maxWidth:100,unit:"metric"};function h(A,l,v){const S=v&&v.maxWidth||100,C=A._container.clientHeight/2,M=A.unproject([0,C]),z=A.unproject([S,C]),V=M.distanceTo(z);if(v&&v.unit==="imperial"){const X=3.2808*V;X>5280?y(l,S,X/5280,A._getUIString("ScaleControl.Miles")):y(l,S,X,A._getUIString("ScaleControl.Feet"))}else v&&v.unit==="nautical"?y(l,S,V/1852,A._getUIString("ScaleControl.NauticalMiles")):V>=1e3?y(l,S,V/1e3,A._getUIString("ScaleControl.Kilometers")):y(l,S,V,A._getUIString("ScaleControl.Meters"))}function y(A,l,v,S){const C=function(M){const z=Math.pow(10,`${Math.floor(M)}`.length-1);let V=M/z;return V=V>=10?10:V>=5?5:V>=3?3:V>=2?2:V>=1?1:function(X){const ee=Math.pow(10,Math.ceil(-Math.log(X)/Math.LN10));return Math.round(X*ee)/ee}(V),z*V}(v);A.style.width=l*(C/v)+"px",A.innerHTML=`${C}&nbsp;${S}`}const w={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},O=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function U(A){if(A){if(typeof A=="number"){const l=Math.round(Math.abs(A)/Math.SQRT2);return{center:new a.Point(0,0),top:new a.Point(0,A),"top-left":new a.Point(l,l),"top-right":new a.Point(-l,l),bottom:new a.Point(0,-A),"bottom-left":new a.Point(l,-l),"bottom-right":new a.Point(-l,-l),left:new a.Point(A,0),right:new a.Point(-A,0)}}if(A instanceof a.Point||Array.isArray(A)){const l=a.Point.convert(A);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.Point.convert(A.center||[0,0]),top:a.Point.convert(A.top||[0,0]),"top-left":a.Point.convert(A["top-left"]||[0,0]),"top-right":a.Point.convert(A["top-right"]||[0,0]),bottom:a.Point.convert(A.bottom||[0,0]),"bottom-left":a.Point.convert(A["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(A["bottom-right"]||[0,0]),left:a.Point.convert(A.left||[0,0]),right:a.Point.convert(A.right||[0,0])}}return U(new a.Point(0,0))}const J={extend:(A,...l)=>a.extend(A,...l),run(A){A()},logToElement(A,l=!1,v="log"){const S=window.document.getElementById(v);S&&(l&&(S.innerHTML=""),S.innerHTML+=`<br>${A}`)}},pe=d;class Ae{static get version(){return pe}static get workerCount(){return mt.workerCount}static set workerCount(l){mt.workerCount=l}static get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(l){a.config.MAX_PARALLEL_IMAGE_REQUESTS=l}static get workerUrl(){return a.config.WORKER_URL}static set workerUrl(l){a.config.WORKER_URL=l}static addProtocol(l,v){a.config.REGISTERED_PROTOCOLS[l]=v}static removeProtocol(l){delete a.config.REGISTERED_PROTOCOLS[l]}}return Ae.Map=class extends cu{constructor(A){if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(A=a.extend({},$u,A)).minZoom!=null&&A.maxZoom!=null&&A.minZoom>A.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(A.minPitch!=null&&A.maxPitch!=null&&A.minPitch>A.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(A.minPitch!=null&&A.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(A.maxPitch!=null&&A.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Nu(A.minZoom,A.maxZoom,A.minPitch,A.maxPitch,A.renderWorldCopies),{bearingSnap:A.bearingSnap}),this._cooperativeGesturesOnWheel=l=>{this._onCooperativeGesture(l,l[this._metaKey],1)},this._contextLost=l=>{l.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=A.interactive,this._cooperativeGestures=A.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=A.maxTileCacheSize,this._maxTileCacheZoomLevels=A.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=A.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=A.preserveDrawingBuffer,this._antialias=A.antialias,this._trackResize=A.trackResize,this._bearingSnap=A.bearingSnap,this._refreshExpiredTiles=A.refreshExpiredTiles,this._fadeDuration=A.fadeDuration,this._crossSourceCollisions=A.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=A.collectResourceTiming,this._renderTaskQueue=new gr,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Ir,A.locale),this._clickTolerance=A.clickTolerance,this._overridePixelRatio=A.pixelRatio,this._maxCanvasSize=A.maxCanvasSize,this.transformCameraUpdate=A.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new T(A.transformRequest),typeof A.container=="string"){if(this._container=document.getElementById(A.container),!this._container)throw new Error(`Container '${A.container}' not found.`)}else{if(!(A.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=A.container}if(A.maxBounds&&this.setMaxBounds(A.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;const v=Go(S=>{this._trackResize&&!this._removed&&this.resize(S)._update()},50);this._resizeObserver=new ResizeObserver(S=>{l?v(S):l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new um(this,A),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=A.hash&&new uo(typeof A.hash=="string"&&A.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:A.center,zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}),A.bounds&&(this.resize(),this.fitBounds(A.bounds,a.extend({},A.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=A.localIdeographFontFamily,this._validateStyle=A.validateStyle,A.style&&this.setStyle(A.style,{localIdeographFontFamily:A.localIdeographFontFamily}),A.attributionControl&&this.addControl(new Ns({customAttribution:A.customAttribution})),A.maplibreLogo&&this.addControl(new hl,A.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new a.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new a.Event(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new a.Event("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(A,l){if(l===void 0&&(l=A.getDefaultPosition?A.getDefaultPosition():"top-right"),!A||!A.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const v=A.onAdd(this);this._controls.push(A);const S=this._controlPositions[l];return l.indexOf("bottom")!==-1?S.insertBefore(v,S.firstChild):S.appendChild(v),this}removeControl(A){if(!A||!A.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(A);return l>-1&&this._controls.splice(l,1),A.onRemove(this),this}hasControl(A){return this._controls.indexOf(A)>-1}calculateCameraOptionsFromTo(A,l,v,S){return S==null&&this.terrain&&(S=this.terrain.getElevationForLngLatZoom(v,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(A,l,v,S)}resize(A){var l;const v=this._containerDimensions(),S=v[0],C=v[1],M=this._getClampedPixelRatio(S,C);if(this._resizeCanvas(S,C,M),this.painter.resize(S,C,M),this.painter.overLimit()){const V=this.painter.context.gl;this._maxCanvasSize=[V.drawingBufferWidth,V.drawingBufferHeight];const X=this._getClampedPixelRatio(S,C);this._resizeCanvas(S,C,X),this.painter.resize(S,C,X)}this.transform.resize(S,C),(l=this._requestedCameraState)===null||l===void 0||l.resize(S,C);const z=!this._moving;return z&&(this.stop(),this.fire(new a.Event("movestart",A)).fire(new a.Event("move",A))),this.fire(new a.Event("resize",A)),z&&this.fire(new a.Event("moveend",A)),this}_getClampedPixelRatio(A,l){const{0:v,1:S}=this._maxCanvasSize,C=this.getPixelRatio(),M=A*C,z=l*C;return Math.min(M>v?v/M:1,z>S?S/z:1)*C}getPixelRatio(){var A;return(A=this._overridePixelRatio)!==null&&A!==void 0?A:devicePixelRatio}setPixelRatio(A){this._overridePixelRatio=A,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(A){return this.transform.setMaxBounds(Le.convert(A)),this._update()}setMinZoom(A){if((A=A??-2)>=-2&&A<=this.transform.maxZoom)return this.transform.minZoom=A,this._update(),this.getZoom()<A&&this.setZoom(A),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(A){if((A=A??22)>=this.transform.minZoom)return this.transform.maxZoom=A,this._update(),this.getZoom()>A&&this.setZoom(A),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(A){if((A=A??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(A>=0&&A<=this.transform.maxPitch)return this.transform.minPitch=A,this._update(),this.getPitch()<A&&this.setPitch(A),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(A){if((A=A??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(A>=this.transform.minPitch)return this.transform.maxPitch=A,this._update(),this.getPitch()>A&&this.setPitch(A),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(A){return this.transform.renderWorldCopies=A,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(A){return this._cooperativeGestures=A,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(A){return this.transform.locationPoint(a.LngLat.convert(A),this.style&&this.terrain)}unproject(A){return this.transform.pointLocation(a.Point.convert(A),this.terrain)}isMoving(){var A;return this._moving||((A=this.handlers)===null||A===void 0?void 0:A.isMoving())}isZooming(){var A;return this._zooming||((A=this.handlers)===null||A===void 0?void 0:A.isZooming())}isRotating(){var A;return this._rotating||((A=this.handlers)===null||A===void 0?void 0:A.isRotating())}_createDelegatedListener(A,l,v){if(A==="mouseenter"||A==="mouseover"){let S=!1;return{layer:l,listener:v,delegates:{mousemove:M=>{const z=this.getLayer(l)?this.queryRenderedFeatures(M.point,{layers:[l]}):[];z.length?S||(S=!0,v.call(this,new ln(A,this,M.originalEvent,{features:z}))):S=!1},mouseout:()=>{S=!1}}}}if(A==="mouseleave"||A==="mouseout"){let S=!1;return{layer:l,listener:v,delegates:{mousemove:z=>{(this.getLayer(l)?this.queryRenderedFeatures(z.point,{layers:[l]}):[]).length?S=!0:S&&(S=!1,v.call(this,new ln(A,this,z.originalEvent)))},mouseout:z=>{S&&(S=!1,v.call(this,new ln(A,this,z.originalEvent)))}}}}{const S=C=>{const M=this.getLayer(l)?this.queryRenderedFeatures(C.point,{layers:[l]}):[];M.length&&(C.features=M,v.call(this,C),delete C.features)};return{layer:l,listener:v,delegates:{[A]:S}}}}on(A,l,v){if(v===void 0)return super.on(A,l);const S=this._createDelegatedListener(A,l,v);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[A]=this._delegatedListeners[A]||[],this._delegatedListeners[A].push(S);for(const C in S.delegates)this.on(C,S.delegates[C]);return this}once(A,l,v){if(v===void 0)return super.once(A,l);const S=this._createDelegatedListener(A,l,v);for(const C in S.delegates)this.once(C,S.delegates[C]);return this}off(A,l,v){return v===void 0?super.off(A,l):(this._delegatedListeners&&this._delegatedListeners[A]&&(S=>{const C=this._delegatedListeners[A];for(let M=0;M<C.length;M++){const z=C[M];if(z.layer===l&&z.listener===v){for(const V in z.delegates)this.off(V,z.delegates[V]);return C.splice(M,1),this}}})(),this)}queryRenderedFeatures(A,l){if(!this.style)return[];let v;const S=A instanceof a.Point||Array.isArray(A),C=S?A:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(S?{}:A)||{},C instanceof a.Point||typeof C[0]=="number")v=[a.Point.convert(C)];else{const M=a.Point.convert(C[0]),z=a.Point.convert(C[1]);v=[M,new a.Point(z.x,M.y),z,new a.Point(M.x,z.y),M]}return this.style.queryRenderedFeatures(v,l,this.transform)}querySourceFeatures(A,l){return this.style.querySourceFeatures(A,l)}setStyle(A,l){return(l=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&A?(this._diffStyle(A,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(A,l))}setTransformRequest(A){return this._requestManager.setTransformRequest(A),this}_getUIString(A){const l=this._locale[A];if(l==null)throw new Error(`Missing UI string '${A}'`);return l}_updateStyle(A,l){if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(A,l));const v=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!A)),A?(this.style=new io(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof A=="string"?this.style.loadURL(A,l,v):this.style.loadJSON(A,l,v),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new io(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(A,l){if(typeof A=="string"){const v=this._requestManager.transformRequest(A,F.Style);a.getJSON(v,(S,C)=>{S?this.fire(new a.ErrorEvent(S)):C&&this._updateDiff(C,l)})}else typeof A=="object"&&this._updateDiff(A,l)}_updateDiff(A,l){try{this.style.setState(A,l)&&this._update(!0)}catch(v){a.warnOnce(`Unable to perform style diff: ${v.message||v.error||v}.  Rebuilding the style from scratch.`),this._updateStyle(A,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(A,l){return this._lazyInitEmptyStyle(),this.style.addSource(A,l),this._update(!0)}isSourceLoaded(A){const l=this.style&&this.style.sourceCaches[A];if(l!==void 0)return l.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${A}'`)))}setTerrain(A){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),A){const l=this.style.sourceCaches[A.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${A.source}`);for(const v in this.style._layers){const S=this.style._layers[v];S.type==="hillshade"&&S.source===A.source&&a.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ul(this.painter,l,A),this.painter.renderToTexture=new na(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=v=>{v.dataType==="style"?this.terrain.sourceCache.freeRtt():v.dataType==="source"&&v.tile&&(v.sourceId!==A.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(v.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.Event("terrain",{terrain:A})),this}getTerrain(){var A,l;return(l=(A=this.terrain)===null||A===void 0?void 0:A.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const A=this.style&&this.style.sourceCaches;for(const l in A){const v=A[l]._tiles;for(const S in v){const C=v[S];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}addSourceType(A,l,v){return this._lazyInitEmptyStyle(),this.style.addSourceType(A,l,v)}removeSource(A){return this.style.removeSource(A),this._update(!0)}getSource(A){return this.style.getSource(A)}addImage(A,l,v={}){const{pixelRatio:S=1,sdf:C=!1,stretchX:M,stretchY:z,content:V}=v;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.isImageBitmap(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:X,height:ee,data:se}=l,le=l;return this.style.addImage(A,{data:new a.RGBAImage({width:X,height:ee},new Uint8Array(se)),pixelRatio:S,stretchX:M,stretchY:z,content:V,sdf:C,version:0,userImage:le}),le.onAdd&&le.onAdd(this,A),this}}{const{width:X,height:ee,data:se}=a.browser.getImageData(l);this.style.addImage(A,{data:new a.RGBAImage({width:X,height:ee},se),pixelRatio:S,stretchX:M,stretchY:z,content:V,sdf:C,version:0})}}updateImage(A,l){const v=this.style.getImage(A);if(!v)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const S=l instanceof HTMLImageElement||a.isImageBitmap(l)?a.browser.getImageData(l):l,{width:C,height:M,data:z}=S;if(C===void 0||M===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==v.data.width||M!==v.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const V=!(l instanceof HTMLImageElement||a.isImageBitmap(l));return v.data.replace(z,V),this.style.updateImage(A,v),this}getImage(A){return this.style.getImage(A)}hasImage(A){return A?!!this.style.getImage(A):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(A){this.style.removeImage(A)}loadImage(A,l){$.getImage(this._requestManager.transformRequest(A,F.Image),l)}listImages(){return this.style.listImages()}addLayer(A,l){return this._lazyInitEmptyStyle(),this.style.addLayer(A,l),this._update(!0)}moveLayer(A,l){return this.style.moveLayer(A,l),this._update(!0)}removeLayer(A){return this.style.removeLayer(A),this._update(!0)}getLayer(A){return this.style.getLayer(A)}setLayerZoomRange(A,l,v){return this.style.setLayerZoomRange(A,l,v),this._update(!0)}setFilter(A,l,v={}){return this.style.setFilter(A,l,v),this._update(!0)}getFilter(A){return this.style.getFilter(A)}setPaintProperty(A,l,v,S={}){return this.style.setPaintProperty(A,l,v,S),this._update(!0)}getPaintProperty(A,l){return this.style.getPaintProperty(A,l)}setLayoutProperty(A,l,v,S={}){return this.style.setLayoutProperty(A,l,v,S),this._update(!0)}getLayoutProperty(A,l){return this.style.getLayoutProperty(A,l)}setGlyphs(A,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(A,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(A,l,v={}){return this._lazyInitEmptyStyle(),this.style.addSprite(A,l,v,S=>{S||this._update(!0)}),this}removeSprite(A){return this._lazyInitEmptyStyle(),this.style.removeSprite(A),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(A,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(A,l,v=>{v||this._update(!0)}),this}setLight(A,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(A,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(A,l){return this.style.setFeatureState(A,l),this._update()}removeFeatureState(A,l){return this.style.removeFeatureState(A,l),this._update()}getFeatureState(A){return this.style.getFeatureState(A)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let A=0,l=0;return this._container&&(A=this._container.clientWidth||400,l=this._container.clientHeight||300),[A,l]}_setupContainer(){const A=this._container;A.classList.add("maplibregl-map");const l=this._canvasContainer=f.create("div","maplibregl-canvas-container",A);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=f.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const v=this._containerDimensions(),S=this._getClampedPixelRatio(v[0],v[1]);this._resizeCanvas(v[0],v[1],S);const C=this._controlContainer=f.create("div","maplibregl-control-container",A),M=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{M[z]=f.create("div",`maplibregl-ctrl-${z} `,C)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=f.create("div","maplibregl-cooperative-gesture-screen",this._container);let A=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(A=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${A}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){f.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(A,l,v){this._canvas.width=Math.floor(v*A),this._canvas.height=Math.floor(v*l),this._canvas.style.width=`${A}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const A={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let l=null;this._canvas.addEventListener("webglcontextcreationerror",S=>{l={requestedAttributes:A},S&&(l.statusMessage=S.statusMessage,l.type=S.type)},{once:!0});const v=this._canvas.getContext("webgl2",A)||this._canvas.getContext("webgl",A);if(!v){const S="Failed to initialize WebGL";throw l?(l.message=S,new Error(JSON.stringify(l))):new Error(S)}this.painter=new Bc(v,this.transform),g.testSupport(v)}_onCooperativeGesture(A,l,v){return!l&&v<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(A){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||A,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(A){return this._update(),this._renderTaskQueue.add(A)}_cancelRenderFrame(A){this._renderTaskQueue.remove(A)}_render(A){const l=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(A),this._removed)return;let v=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const C=this.transform.zoom,M=a.browser.now();this.style.zoomHistory.update(C,M);const z=new a.EvaluationParameters(C,{now:M,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),V=z.crossFadingFactor();V===1&&V===this._crossFadingFactor||(v=!0,this._crossFadingFactor=V),this.style.update(z)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const S=this._sourcesDirty||this._styleDirty||this._placementDirty;return S||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||S||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var A;this._hash&&this._hash.remove();for(const v of this._controls)v.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(A=this._resizeObserver)===null||A===void 0||A.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),f.remove(this._canvasContainer),f.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.browser.frame(A=>{a.PerformanceUtils.frame(A),this._frame=null,this._render(A)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(A){this._showTileBoundaries!==A&&(this._showTileBoundaries=A,this._update())}get showPadding(){return!!this._showPadding}set showPadding(A){this._showPadding!==A&&(this._showPadding=A,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(A){this._showCollisionBoxes!==A&&(this._showCollisionBoxes=A,A?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(A){this._showOverdrawInspector!==A&&(this._showOverdrawInspector=A,this._update())}get repaint(){return!!this._repaint}set repaint(A){this._repaint!==A&&(this._repaint=A,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(A){this._vertices=A,this._update()}get version(){return Mf}getCameraTargetElevation(){return this.transform.elevation}},Ae.NavigationControl=class{constructor(A){this._updateZoomButtons=()=>{const l=this._map.getZoom(),v=l===this._map.getMaxZoom(),S=l===this._map.getMinZoom();this._zoomInButton.disabled=v,this._zoomOutButton.disabled=S,this._zoomInButton.setAttribute("aria-disabled",v.toString()),this._zoomOutButton.setAttribute("aria-disabled",S.toString())},this._rotateCompassArrow=()=>{const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=l},this._setButtonTitle=(l,v)=>{const S=this._map._getUIString(`NavigationControl.${v}`);l.title=S,l.setAttribute("aria-label",S)},this.options=a.extend({},nr,A),this._container=f.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),f.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),f.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=f.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(A){return this._map=A,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){f.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(A,l){const v=f.create("button",A,this._container);return v.type="button",v.addEventListener("click",l),v}},Ae.GeolocateControl=class extends a.Evented{constructor(A){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.Event("geolocate",l)),this._finish()}},this._updateCamera=l=>{const v=new a.LngLat(l.coords.longitude,l.coords.latitude),S=l.coords.accuracy,C=this._map.getBearing(),M=a.extend({bearing:C},this.options.fitBoundsOptions),z=Le.fromLngLat(v,S);this._map.fitBounds(z,M,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const v=new a.LngLat(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(v).addTo(this._map),this._userLocationDotMarker.setLngLat(v).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const v=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&fu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.Event("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=l=>{if(this._map){if(this._container.addEventListener("contextmenu",v=>v.preventDefault()),this._geolocateButton=f.create("button","maplibregl-ctrl-geolocate",this._container),f.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",l===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const v=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v)}else{const v=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=f.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Lo({element:this._dotElement}),this._circleElement=f.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Lo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",v=>{v.geolocateSource||this._watchState!=="ACTIVE_LOCK"||v.originalEvent&&v.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}},this.options=a.extend({},mi,A)}onAdd(A){return this._map=A,this._container=f.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(l,v=!1){ia===void 0||v?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(S=>{ia=S.state!=="denied",l(ia)}).catch(()=>{ia=!!window.navigator.geolocation,l(ia)}):(ia=!!window.navigator.geolocation,l(ia)):l(ia)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),f.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,uc=0,fu=!1}_isOutOfMapMaxBounds(A){const l=this._map.getMaxBounds(),v=A.coords;return l&&(v.longitude<l.getWest()||v.longitude>l.getEast()||v.latitude<l.getSouth()||v.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const A=this._map.getBounds(),l=A.getSouthEast(),v=A.getNorthEast(),S=l.distanceTo(v),C=Math.ceil(this._accuracy/(S/this._map._container.clientHeight)*2);this._circleElement.style.width=`${C}px`,this._circleElement.style.height=`${C}px`}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":uc--,fu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let A;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),uc++,uc>1?(A={maximumAge:6e5,timeout:0},fu=!0):(A=this.options.positionOptions,fu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,A)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Ae.AttributionControl=Ns,Ae.LogoControl=hl,Ae.ScaleControl=class{constructor(A){this._onMove=()=>{h(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,h(this._map,this._container,this.options)},this.options=a.extend({},u,A)}getDefaultPosition(){return"bottom-left"}onAdd(A){return this._map=A,this._container=f.create("div","maplibregl-ctrl maplibregl-ctrl-scale",A.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){f.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Ae.FullscreenControl=class extends a.Evented{constructor(A={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,A&&A.container&&(A.container instanceof HTMLElement?this._container=A.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(A){return this._map=A,this._container||(this._container=this._map.getContainer()),this._controlContainer=f.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){f.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const A=this._fullscreenButton=f.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);f.create("span","maplibregl-ctrl-icon",A).setAttribute("aria-hidden","true"),A.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const A=this._getTitle();this._fullscreenButton.setAttribute("aria-label",A),this._fullscreenButton.title=A}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Ae.TerrainControl=class{constructor(A){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=A}onAdd(A){return this._map=A,this._container=f.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=f.create("button","maplibregl-ctrl-terrain",this._container),f.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){f.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Ae.Popup=class extends a.Evented{constructor(A){super(),this.remove=()=>(this._content&&f.remove(this._content),this._container&&(f.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=f.create("div","maplibregl-popup",this._map.getContainer()),this._tip=f.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=$s(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!l)return;const v=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);let S=this.options.anchor;const C=U(this.options.offset);if(!S){const z=this._container.offsetWidth,V=this._container.offsetHeight;let X;X=v.y+C.bottom.y<V?["top"]:v.y>this._map.transform.height-V?["bottom"]:[],v.x<z/2?X.push("left"):v.x>this._map.transform.width-z/2&&X.push("right"),S=X.length===0?"bottom":X.join("-")}const M=v.add(C[S]).round();f.setTransform(this._container,`${Mo[S]} translate(${M.x}px,${M.y}px)`),Lf(this._container,S,"popup")},this._onClose=()=>{this.remove()},this.options=a.extend(Object.create(w),A)}addTo(A){return this._map&&this.remove(),this._map=A,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(A){return this._lngLat=a.LngLat.convert(A),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(A){return this.setDOMContent(document.createTextNode(A))}setHTML(A){const l=document.createDocumentFragment(),v=document.createElement("body");let S;for(v.innerHTML=A;S=v.firstChild,S;)l.appendChild(S);return this.setDOMContent(l)}getMaxWidth(){var A;return(A=this._container)===null||A===void 0?void 0:A.style.maxWidth}setMaxWidth(A){return this.options.maxWidth=A,this._update(),this}setDOMContent(A){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=f.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(A),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(A){this._container&&this._container.classList.add(A)}removeClassName(A){this._container&&this._container.classList.remove(A)}setOffset(A){return this.options.offset=A,this._update(),this}toggleClassName(A){if(this._container)return this._container.classList.toggle(A)}_createCloseButton(){this.options.closeButton&&(this._closeButton=f.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const A=this._container.querySelector(O);A&&A.focus()}},Ae.Marker=Lo,Ae.Style=io,Ae.LngLat=a.LngLat,Ae.LngLatBounds=Le,Ae.Point=a.Point,Ae.MercatorCoordinate=a.MercatorCoordinate,Ae.Evented=a.Evented,Ae.AJAXError=a.AJAXError,Ae.config=a.config,Ae.CanvasSource=Ze,Ae.GeoJSONSource=Lt,Ae.ImageSource=Ot,Ae.RasterDEMTileSource=_t,Ae.RasterTileSource=at,Ae.VectorTileSource=$e,Ae.VideoSource=vt,Ae.setRTLTextPlugin=a.setRTLTextPlugin,Ae.getRTLTextPluginStatus=a.getRTLTextPluginStatus,Ae.prewarm=function(){lr().acquire(qe)},Ae.clearPrewarmedResources=function(){const A=Ht;A&&(A.isPreloaded()&&A.numActive()===1&&(A.release(qe),Ht=null))},J.extend(Ae,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),Ae});var s=i;return s})})(pG);var gG=pG.exports;const Ioe=bd(gG);var hI={},nd={},VE={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.Serializable=void 0;var Ooe=Tc,Toe=function(){function e(){}return Object.defineProperty(e.prototype,"json",{get:function(){return(0,Ooe.kebabize)(this)},enumerable:!1,configurable:!0}),e}();Hu.Serializable=Toe;var Moe=function(){function e(t){this.id=t.id,this.type=t.type,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.metadata=t.metadata}return Object.defineProperty(e.prototype,"json",{get:function(){var t=this,r=t.id,n=t.type,i=t.source,o=t.sourceLayer,s=t.minzoom,a=t.maxzoom,d=t.filter,f=t.metadata,g={id:r,type:n};return i&&(g.source=i),o&&(g["source-layer"]=o),s&&(g.minzoom=s),a&&(g.maxzoom=a),d&&(g.filter=d),this.metadata&&(g.metadata=f),this.paint&&(g.paint=this.paint.json),this.layout&&(g.layout=this.layout.json),g},enumerable:!1,configurable:!0}),e.prototype.setFilterLevel=function(t){var r=this;this.filter.forEach(function(n,i){if(r.id==="proximiio-levelchangers"){var o="__level_".concat(t);i===3&&(n[1]=o),i===4&&(n[1][1]=o)}if(Array.isArray(n)){var s=!1;if(n[0]==="=="){var a=n[1];a[0]==="to-number"&&a[1][0]==="get"&&a[1][1]==="level"&&(n[2]=t,s=!0),a[0]==="get"&&a[1]==="level"&&(n[2]=t,s=!0)}if(n[0]==="<="){var a=n[1];a[0]==="to-number"&&a[1][0]==="get"&&a[1][1]==="level_min"&&(n[2]=t,s=!0),a[0]==="get"&&a[1]==="level_min"&&(n[2]=t,s=!0)}if(n[0]===">="){var a=n[1];a[0]==="to-number"&&a[1][0]==="get"&&a[1][1]==="level_max"&&(n[2]=t,s=!0),a[0]==="get"&&a[1]==="level_max"&&(n[2]=t,s=!0)}s&&(r.filter[i]=n)}})},e}();Hu.default=Moe;var gp={},jR=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(gp,"__esModule",{value:!0});gp.LayoutProperties=gp.PaintProperties=void 0;var UR=Hu,vG=function(e){jR(t,e);function t(r){var n=e.call(this)||this;return n.backgroundColor=r["background-color"]||"#000000",n.backgroundPattern=r["background-pattern"],n.backgroundOpacity=r["background-opacity"]||1,n}return t}(UR.Serializable);gp.PaintProperties=vG;var yG=function(e){jR(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n}return t}(UR.Serializable);gp.LayoutProperties=yG;var Loe=function(e){jR(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new vG(r.paint||{}),n.layout=new yG(r.layout||{}),n}return t}(UR.default);gp.default=Loe;var vp={},VR=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(vp,"__esModule",{value:!0});vp.LayoutProperties=vp.PaintProperties=void 0;var GR=Hu,_G=function(e){VR(t,e);function t(r){var n=e.call(this)||this;return n.rasterOpacity=r["raster-opacity"]||1,n.rasterHueRotate=r["raster-hue-rotate"]||0,n.rasterBrightnessMin=r["raster-brightness-min"]||0,n.rasterBrightnessMax=r["raster-brightness-max"]||1,n.rasterSaturation=r["raster-saturation"]||0,n.rasterContrast=r["raster-contrast"]||0,n.rasterResampling=r["raster-resampling"]||"linear",n.rasterFadeDuration=r["raster-fade-duration"]||300,n}return t}(GR.Serializable);vp.PaintProperties=_G;var bG=function(e){VR(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n}return t}(GR.Serializable);vp.LayoutProperties=bG;var Roe=function(e){VR(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new _G(r.paint||{}),n.layout=new bG(r.layout||{}),n}return t}(GR.default);vp.default=Roe;var yp={},qR=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(yp,"__esModule",{value:!0});yp.LayoutProperties=yp.PaintProperties=void 0;var WR=Hu,xG=function(e){qR(t,e);function t(r){var n=e.call(this)||this;return n.fillAntialias=r["fill-antialias"]||!0,n.fillOpacity=r["fill-opacity"]||1,n.fillColor=r["fill-color"]||"#000000",n.fillOutlineColor=r["fill-outline-color"],n.fillTranslate=r["fill-translate"]||[0,0],n.fillTranslateAnchor=r["fill-translate-anchor"]||"map",n.fillPattern=r["fill-pattern"],n}return t}(WR.Serializable);yp.PaintProperties=xG;var wG=function(e){qR(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n}return t}(WR.Serializable);yp.LayoutProperties=wG;var koe=function(e){qR(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new xG(r.paint||{}),n.layout=new wG(r.layout||{}),n}return t}(WR.default);yp.default=koe;var ld={},XR=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ld,"__esModule",{value:!0});ld.LayoutProperties=ld.PaintProperties=void 0;var YR=Hu,EG=function(e){XR(t,e);function t(r){var n=e.call(this)||this;return n.lineColor=r["line-color"]||"#000000",n.lineOpacity=r["line-opacity"]||1,n.lineTranslate=r["line-translate"]||[0,0],n.lineTranslateAnchor=r["line-translate-anchor"]||"map",n.lineWidth=r["line-width"]||1,n.lineGapWidth=r["line-gap-width"]||0,n.lineOffset=r["line-offset"]||0,n.lineBlur=r["line-blur"]||0,n.lineDasharray=r["line-dasharray"],n.linePattern=r["line-pattern"],n.lineGradient=r["line-gradient"],n}return t}(YR.Serializable);ld.PaintProperties=EG;var SG=function(e){XR(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n.lineCap=r["line-cap"]||"butt",n.lineJoin=r["line-join"]||"miter",n.lineMiterLimit=r["line-miter-limit"]||2,n.lineRoundLimit=r["line-round-limit"]||1.05,n}return t}(YR.Serializable);ld.LayoutProperties=SG;var Doe=function(e){XR(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new EG(r.paint||{}),n.layout=new SG(r.layout||{}),n}return t}(YR.default);ld.default=Doe;var cd={},HR=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(cd,"__esModule",{value:!0});cd.LayoutProperties=cd.PaintProperties=void 0;var ZR=Hu,PG=function(e){HR(t,e);function t(r){var n=e.call(this)||this;return n.fillExtrusionColor=r["fill-extrusion-color"]||"#000000",n.fillExtrusionOpacity=r["fill-extrusion-opacity"]||1,n.fillExtrusionTranslate=r["fill-extrusion-translate"]||[0,0],n.fillExtrusionTranslateAnchor=r["fill-extrusion-translate-anchor"]||"map",n.fillExtrusionPattern=r["fill-extrusion-pattern"],n.fillExtrusionHeight=r["fill-extrusion-height"]||0,n.fillExtrusionBase=r["fill-extrusion-base"]||0,n.fillExtrusionVerticalGradient=r["fill-extrusion-vertical-gradient"]||!0,n}return t}(ZR.Serializable);cd.PaintProperties=PG;var AG=function(e){HR(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n}return t}(ZR.Serializable);cd.LayoutProperties=AG;var Noe=function(e){HR(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new PG(r.paint||{}),n.layout=new AG(r.layout||{}),n}return t}(ZR.default);cd.default=Noe;var fd={},KR=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(fd,"__esModule",{value:!0});fd.LayoutProperties=fd.PaintProperties=void 0;var JR=Hu,Foe=Tc,CG=function(e){KR(t,e);function t(r){var n=e.call(this)||this;return n.iconColor=r["icon-color"]||"#000000",n.iconOpacity=r["icon-opacity"]||1,n.iconHaloColor=r["icon-halo-color"]||"rgba(0, 0, 0, 0)",n.iconHaloWidth=r["icon-halo-width"]||0,n.iconHaloBlur=r["icon-halo-blur"]||0,n.iconTranslate=r["icon-translate"]||[0,0],n.iconTranslateAnchor=r["icon-translate-anchor"]||"map",n.textOpacity=r["text-opacity"]||1,n.textColor=r["text-color"]||"#000000",n.textHaloColor=r["text-halo-color"]||"rgba(0, 0, 0, 0)",n.textHaloWidth=r["text-halo-width"]||0,n.textHaloBlur=r["text-halo-blur"]||0,n.textTranslate=r["text-translate"]||[0,0],n.textTranslateAnchor=r["text-translate-anchor"]||"map",n}return t}(JR.Serializable);fd.PaintProperties=CG;var IG=function(e){KR(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n.symbolPlacement=r["symbol-placement"]||"point",n.symbolSpacing=r["symbol-spacing"]||250,n.symbolAvoidEdges=r["symbol-avoid-edges"]||!1,n.symbolSortKey=r["symbol-sort-key"],n.symbolZOrder=r["symbol-z-order"]||"auto",n.iconAllowOverlap=r["icon-allow-overlap"]||!1,n.iconIgnorePlacement=r["icon-ignore-placement"]||!1,n.iconOptional=r["icon-optional"]||!1,n.iconRotationAlignment=r["icon-rotation-alignment"]||"auto",n.iconSize=r["icon-size"]||1,n.iconTextFit=r["icon-text-fit"]||"none",n.iconTextFitPadding=r["icon-text-fit-padding"]||[0,0,0,0],n.iconImage=r["icon-image"],n.iconRotate=r["icon-rotate"]||0,n.iconPadding=r["icon-padding"]||2,n.iconKeepUpright=r["icon-keep-upright"]||!1,n.iconOffset=r["icon-offset"]||[0,0],n.iconAnchor=r["icon-anchor"]||"center",n.iconPitchAlignment=r["icon-pitch-alignment"]||"auto",n.textPitchAlignment=r["text-pitch-alignment"]||"auto",n.textRotationAlignment=r["text-rotation-alignment"]||"auto",typeof r["text-font"]=="string"&&r["text-font"]==="{textFont}"||typeof r["text-font"]=="object"&&r["text-font"].property==="textFont"?n.textFont=["match",["string",["get","textFont"]],"Klokantech Noto Sans Bold",["literal",["Klokantech Noto Sans Bold"]],"Klokantech Noto Sans CJK Bold",["literal",["Klokantech Noto Sans CJK Bold"]],"Klokantech Noto Sans CJK Regular",["literal",["Klokantech Noto Sans CJK Regular"]],"Klokantech Noto Sans Italic",["literal",["Klokantech Noto Sans Italic"]],"Klokantech Noto Sans Regular",["literal",["Klokantech Noto Sans Regular"]],"Noto Sans Bold",["literal",["Noto Sans Bold"]],"Noto Sans Bold Italic",["literal",["Noto Sans Bold Italic"]],"Noto Sans Italic",["literal",["Noto Sans Italic"]],"Noto Sans Regular",["literal",["Noto Sans Regular"]],"Open Sans Bold",["literal",["Open Sans Bold"]],"Open Sans Italic",["literal",["Open Sans Italic"]],"Open Sans Regular",["literal",["Open Sans Regular"]],"Open Sans Semibold",["literal",["Open Sans Semibold"]],"Open Sans Semibold Italic",["literal",["Open Sans Semibold Italic"]],["literal",["Klokantech Noto Sans Bold"]]]:n.textFont=r["text-font"],n.textField=r["text-field"]||"",n.textSize=r["text-size"]||16,n.textMaxWidth=r["text-max-width"]||10,n.textLineHeight=r["text-line-height"]||1.2,n.textLetterSpacing=r["text-letter-spacing"]||0,n.textJustify=r["text-justify"]||"center",n.textRadialOffset=r["text-radial-offset"]||0,n.textVariableAnchor=r["text-variable-anchor"],n.textAnchor=r["text-anchor"]||"center",n.textMaxAngle=r["text-max-angle"]||45,n.textWritingMode=r["text-writing-mode"],n.textRotate=r["text-rotate"]||0,n.textPadding=r["text-padding"]||2,n.textKeepUpright=r["text-keep-upright"]||!0,n.textTransform=r["text-transform"]||"none",n.textOffset=r["text-offset"]||[0,0],n.textAllowOverlap=r["text-allow-overlap"]||!1,n.textIgnorePlacement=r["text-ignore-placement"]||!1,n.textOptional=r["text-optional"]||!1,n}return Object.defineProperty(t.prototype,"json",{get:function(){var r=(0,Foe.kebabize)(this);return r["symbol-z-order"]=this.symbolZOrder,delete r["symbol-zorder"],r},enumerable:!1,configurable:!0}),t}(JR.Serializable);fd.LayoutProperties=IG;var $oe=function(e){KR(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new CG(r.paint||{}),n.layout=new IG(r.layout||{}),n}return t}(JR.default);fd.default=$oe;var _p={},QR=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(_p,"__esModule",{value:!0});_p.LayoutProperties=_p.PaintProperties=void 0;var ek=Hu,OG=function(e){QR(t,e);function t(r){var n=e.call(this)||this;return n.heatmapRadius=r["heatmap-radius"]||30,n.heatmapWeight=r["heatmap-weight"]||1,n.heatmapIntensity=r["heatmap-intensity"]||1,n.heatmapOpacity=r["heatmap-opacity"]||1,n.heatmapColor=r["heatmap-color"]||"",n}return t}(ek.Serializable);_p.PaintProperties=OG;var TG=function(e){QR(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n}return t}(ek.Serializable);_p.LayoutProperties=TG;var zoe=function(e){QR(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new OG(r.paint||{}),n.layout=new TG(r.layout||{}),n}return t}(ek.default);_p.default=zoe;var bp={},tk=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(bp,"__esModule",{value:!0});bp.LayoutProperties=bp.PaintProperties=void 0;var rk=Hu,MG=function(e){tk(t,e);function t(r){var n=e.call(this)||this;return n.circleRadius=r["circle-radius"]||5,n.circleColor=r["circle-color"]||"#000000",n.circleBlur=r["circle-blur"]||0,n.circleOpacity=r["circle-opacity"]||1,n.circleTranslate=r["circle-translate"]||[0,0],n.circleTranslateAnchor=r["circle-translate-anchor"]||"map",n.circlePitchScale=r["circle-pitch-scale"]||"map",n.circlePitchAlignment=r["circle-pitch-alignment"]||"viewport",n.circleStrokeWidth=r["circle-stroke-width"]||1,n.circleStrokeColor=r["circle-stroke-color"]||"#000000",n.circleStrokeOpacity=r["circle-stroke-opacity"]||1,n}return t}(rk.Serializable);bp.PaintProperties=MG;var LG=function(e){tk(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n.circleSortKey=r["circle-sort-key"]||0,n}return t}(rk.Serializable);bp.LayoutProperties=LG;var Boe=function(e){tk(t,e);function t(r){var n=e.call(this,r)||this;return n.type="circle",n.paint=new MG(r.paint||{}),n.layout=new LG(r.layout||{}),n}return t}(rk.default);bp.default=Boe;var xp={},nk=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(xp,"__esModule",{value:!0});xp.LayoutProperties=xp.PaintProperties=void 0;var ik=Hu,RG=function(e){nk(t,e);function t(r){var n=e.call(this)||this;return n.hillshadeIlluminationDirection=r["hillshade-illumination-direction"]||335,n.hillshadeIlluminationAnchor=r["hillshade-illumination-anchor"]||"viewport",n.hillshadeExaggeration=r["hillshade-exaggeration"]||.5,n.hillshadeShadowColor=r["hillshade-shadow-color"]||'#000000"',n.hillshadeHighlightColor=r["hillshade-highlight-color"]||"#ffffff",n.hillshadeAccentColor=r["hillshade-accent-color"]||"#000000",n}return t}(ik.Serializable);xp.PaintProperties=RG;var kG=function(e){nk(t,e);function t(r){var n=e.call(this)||this;return n.visibility=r.visibility||"visible",n}return t}(ik.Serializable);xp.LayoutProperties=kG;var joe=function(e){nk(t,e);function t(r){var n=e.call(this,r)||this;return n.paint=new RG(r.paint||{}),n.layout=new kG(r.layout||{}),n}return t}(ik.default);xp.default=joe;var DG={exports:{}};(function(e,t){(function(r,n){var i=n(r);e.exports=i})(Pe,function(r){var n=["N","E","A","D"];function i(Y,W){Y.super_=W,Y.prototype=Object.create(W.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}})}function o(Y,W){Object.defineProperty(this,"kind",{value:Y,enumerable:!0}),W&&W.length&&Object.defineProperty(this,"path",{value:W,enumerable:!0})}function s(Y,W,Q){s.super_.call(this,"E",Y),Object.defineProperty(this,"lhs",{value:W,enumerable:!0}),Object.defineProperty(this,"rhs",{value:Q,enumerable:!0})}i(s,o);function a(Y,W){a.super_.call(this,"N",Y),Object.defineProperty(this,"rhs",{value:W,enumerable:!0})}i(a,o);function d(Y,W){d.super_.call(this,"D",Y),Object.defineProperty(this,"lhs",{value:W,enumerable:!0})}i(d,o);function f(Y,W,Q){f.super_.call(this,"A",Y),Object.defineProperty(this,"index",{value:W,enumerable:!0}),Object.defineProperty(this,"item",{value:Q,enumerable:!0})}i(f,o);function g(Y,W,Q){var me=Y.slice((Q||W)+1||Y.length);return Y.length=W<0?Y.length+W:W,Y.push.apply(Y,me),Y}function _(Y){var W=typeof Y;return W!=="object"?W:Y===Math?"math":Y===null?"null":Array.isArray(Y)?"array":Object.prototype.toString.call(Y)==="[object Date]"?"date":typeof Y.toString=="function"&&/^\/.*\//.test(Y.toString())?"regexp":"object"}function b(Y){var W=0;if(Y.length===0)return W;for(var Q=0;Q<Y.length;Q++){var me=Y.charCodeAt(Q);W=(W<<5)-W+me,W=W&W}return W}function P(Y){var W=0,Q=_(Y);if(Q==="array"){Y.forEach(function(Ie){W+=P(Ie)});var me="[type: array, hash: "+W+"]";return W+b(me)}if(Q==="object"){for(var ge in Y)if(Y.hasOwnProperty(ge)){var be="[ type: object, key: "+ge+", value hash: "+P(Y[ge])+"]";W+=b(be)}return W}var oe="[ type: "+Q+" ; value: "+Y+"]";return W+b(oe)}function L(Y,W,Q,me,ge,be,oe,Ie){Q=Q||[],ge=ge||[],oe=oe||[];var fe=ge.slice(0);if(typeof be<"u"&&be!==null){if(me){if(typeof me=="function"&&me(fe,be))return;if(typeof me=="object"){if(me.prefilter&&me.prefilter(fe,be))return;if(me.normalize){var G=me.normalize(fe,be,Y,W);G&&(Y=G[0],W=G[1])}}}fe.push(be)}_(Y)==="regexp"&&_(W)==="regexp"&&(Y=Y.toString(),W=W.toString());var K=typeof Y,re=typeof W,ie,he,ae,Te,Le=K!=="undefined"||oe&&oe.length>0&&oe[oe.length-1].lhs&&Object.getOwnPropertyDescriptor(oe[oe.length-1].lhs,be),Xe=re!=="undefined"||oe&&oe.length>0&&oe[oe.length-1].rhs&&Object.getOwnPropertyDescriptor(oe[oe.length-1].rhs,be);if(!Le&&Xe)Q.push(new a(fe,W));else if(!Xe&&Le)Q.push(new d(fe,Y));else if(_(Y)!==_(W))Q.push(new s(fe,Y,W));else if(_(Y)==="date"&&Y-W!==0)Q.push(new s(fe,Y,W));else if(K==="object"&&Y!==null&&W!==null){for(ie=oe.length-1;ie>-1;--ie)if(oe[ie].lhs===Y){Te=!0;break}if(Te)Y!==W&&Q.push(new s(fe,Y,W));else{if(oe.push({lhs:Y,rhs:W}),Array.isArray(Y)){for(Ie&&(Y.sort(function(_t,Lt){return P(_t)-P(Lt)}),W.sort(function(_t,Lt){return P(_t)-P(Lt)})),ie=W.length-1,he=Y.length-1;ie>he;)Q.push(new f(fe,ie,new a(void 0,W[ie--])));for(;he>ie;)Q.push(new f(fe,he,new d(void 0,Y[he--])));for(;ie>=0;--ie)L(Y[ie],W[ie],Q,me,fe,ie,oe,Ie)}else{var $e=Object.keys(Y),at=Object.keys(W);for(ie=0;ie<$e.length;++ie)ae=$e[ie],Te=at.indexOf(ae),Te>=0?(L(Y[ae],W[ae],Q,me,fe,ae,oe,Ie),at[Te]=null):L(Y[ae],void 0,Q,me,fe,ae,oe,Ie);for(ie=0;ie<at.length;++ie)ae=at[ie],ae&&L(void 0,W[ae],Q,me,fe,ae,oe,Ie)}oe.length=oe.length-1}}else Y!==W&&(K==="number"&&isNaN(Y)&&isNaN(W)||Q.push(new s(fe,Y,W)))}function R(Y,W,Q,me,ge){var be=[];if(L(Y,W,be,me,null,null,null,ge),Q)for(var oe=0;oe<be.length;++oe)Q(be[oe]);return be}function $(Y,W,Q,me,ge,be,oe){return L(Y,W,Q,me,ge,be,oe,!0)}function F(Y,W,Q,me){var ge=me?function(oe){oe&&me.push(oe)}:void 0,be=R(Y,W,ge,Q);return me||(be.length?be:void 0)}function T(Y,W,Q,me){var ge=me?function(oe){oe&&me.push(oe)}:void 0,be=R(Y,W,ge,Q,!0);return me||(be.length?be:void 0)}function x(Y,W,Q){if(Q.path&&Q.path.length){var me=Y[W],ge,be=Q.path.length-1;for(ge=0;ge<be;ge++)me=me[Q.path[ge]];switch(Q.kind){case"A":x(me[Q.path[ge]],Q.index,Q.item);break;case"D":delete me[Q.path[ge]];break;case"E":case"N":me[Q.path[ge]]=Q.rhs;break}}else switch(Q.kind){case"A":x(Y[W],Q.index,Q.item);break;case"D":Y=g(Y,W);break;case"E":case"N":Y[W]=Q.rhs;break}return Y}function N(Y,W,Q){if(typeof Q>"u"&&W&&~n.indexOf(W.kind)&&(Q=W),Y&&Q&&Q.kind){for(var me=Y,ge=-1,be=Q.path?Q.path.length-1:0;++ge<be;)typeof me[Q.path[ge]]>"u"&&(me[Q.path[ge]]=typeof Q.path[ge+1]<"u"&&typeof Q.path[ge+1]=="number"?[]:{}),me=me[Q.path[ge]];switch(Q.kind){case"A":Q.path&&typeof me[Q.path[ge]]>"u"&&(me[Q.path[ge]]=[]),x(Q.path?me[Q.path[ge]]:me,Q.index,Q.item);break;case"D":delete me[Q.path[ge]];break;case"E":case"N":me[Q.path[ge]]=Q.rhs;break}}}function B(Y,W,Q){if(Q.path&&Q.path.length){var me=Y[W],ge,be=Q.path.length-1;for(ge=0;ge<be;ge++)me=me[Q.path[ge]];switch(Q.kind){case"A":B(me[Q.path[ge]],Q.index,Q.item);break;case"D":me[Q.path[ge]]=Q.lhs;break;case"E":me[Q.path[ge]]=Q.lhs;break;case"N":delete me[Q.path[ge]];break}}else switch(Q.kind){case"A":B(Y[W],Q.index,Q.item);break;case"D":Y[W]=Q.lhs;break;case"E":Y[W]=Q.lhs;break;case"N":Y=g(Y,W);break}return Y}function H(Y,W,Q){if(Y&&W&&Q&&Q.kind){var me=Y,ge,be;for(be=Q.path.length-1,ge=0;ge<be;ge++)typeof me[Q.path[ge]]>"u"&&(me[Q.path[ge]]={}),me=me[Q.path[ge]];switch(Q.kind){case"A":B(me[Q.path[ge]],Q.index,Q.item);break;case"D":me[Q.path[ge]]=Q.lhs;break;case"E":me[Q.path[ge]]=Q.lhs;break;case"N":delete me[Q.path[ge]];break}}}function Z(Y,W,Q){if(Y&&W){var me=function(ge){(!Q||Q(Y,W,ge))&&N(Y,W,ge)};R(Y,W,me)}}return Object.defineProperties(F,{diff:{value:F,enumerable:!0},orderIndependentDiff:{value:T,enumerable:!0},observableDiff:{value:R,enumerable:!0},orderIndependentObservableDiff:{value:$,enumerable:!0},orderIndepHash:{value:P,enumerable:!0},applyDiff:{value:Z,enumerable:!0},applyChange:{value:N,enumerable:!0},revertChange:{value:H,enumerable:!0},isConflict:{value:function(){return typeof $conflict<"u"},enumerable:!0}}),F.DeepDiff=F,r&&(r.DeepDiff=F),F})})(DG);var Uoe=DG.exports,El={};Object.defineProperty(El,"__esModule",{value:!0});El.EDIT_FEATURE_DIALOG=El.NEW_FEATURE_DIALOG=El.METADATA_POLYGON_EDITING=El.DEFAULT_FONT=El.FONTS=void 0;El.FONTS=["Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular","Noto Sans Bold","Noto Sans Bold Italic","Noto Sans Italic","Noto Sans Regular","Open Sans Bold","Open Sans Italic","Open Sans Regular","Open Sans Semibold","Open Sans Semibold Italic"];El.DEFAULT_FONT="Klokantech Noto Sans Regular";El.METADATA_POLYGON_EDITING="proximiio:polygon-editing";var Voe=function(e,t){return`
    <h1>Add New Feature</h1>
    <form name="form" id="modal-form" class="modal-form" autocomplete="off" role="main">
      <div>
        <label class="label-id">
          <input type="text" class="text" name="id" placeholder="ID" />
          <span>ID</span>
        </label>
      </div>
      
      <div>
        <label class="label-title">
          <input type="text" class="text" name="title" placeholder="Title" required />
          <span class="required">Title</span>
        </label>
      </div>
      
      <div>
        <label class="label-level">
          <input type="number" class="text" name="level" placeholder="Level" value='`.concat(t||0,`' required />
          <span class="required">Level</span>
        </label>
      </div>
  
      <div>
        <label class="label-lat">
          <input type="text" class="text" name="lat" placeholder="Latitude" value='`).concat(e.lngLat.lat,`' required />
          <span class="required">Latitude</span>
        </label>
      </div>
      
      <div>
        <label class="label-lng">
          <input type="text" class="text" name="lng" placeholder="Longitude" value='`).concat(e.lngLat.lng,`' required />
          <span class="required">Longitude</span>
        </label>
      </div>
      
      <div>
        <label class="label-icon">
          <input type="file" class="text" name="icon" placeholder="Icon" accept="image/*"/>
          <span>Icon</span>
        </label>
      </div>
    </form>
  `)};El.NEW_FEATURE_DIALOG=Voe;var Goe=function(e,t){var r,n,i;return`
    <h1>Edit Feature</h1>
    <form name="form" id="modal-form" class="modal-form" autocomplete="off" role="main">
      <div>
        <label class="label-id">
          <input type="text" class="text" name="id" placeholder="ID" value='`.concat((r=t==null?void 0:t.properties)===null||r===void 0?void 0:r.id,`' readonly style="pointer-events: none;background-color: #E9ECEF"/>
          <span>ID</span>
        </label>
      </div>
      
      <div>
        <label class="label-title">
          <input type="text" class="text" name="title" placeholder="Title" value='`).concat((n=t==null?void 0:t.properties)===null||n===void 0?void 0:n.title,`' required />
          <span class="required">Title</span>
        </label>
      </div>
      
      <div>
        <label class="label-level">
          <input type="number" class="text" name="level" placeholder="Level" value='`).concat((i=t==null?void 0:t.properties)===null||i===void 0?void 0:i.level,`' required />
          <span class="required">Level</span>
        </label>
      </div>
  
      <div>
        <label class="label-lat">
          <input type="text" class="text" name="lat" placeholder="Latitude" value='`).concat(e.lngLat.lat,`' required />
          <span class="required">Latitude</span>
        </label>
      </div>
      
      <div>
        <label class="label-lng">
          <input type="text" class="text" name="lng" placeholder="Longitude" value='`).concat(e.lngLat.lng,`' required />
          <span class="required">Longitude</span>
        </label>
      </div>
      
      <div>
        <label class="label-icon">
          <input type="file" class="text" name="icon" placeholder="Icon" accept="image/*"/>
          <span>Icon</span>
        </label>
      </div>
    </form>
  `)};El.EDIT_FEATURE_DIALOG=Goe;var ok={};Object.defineProperty(ok,"__esModule",{value:!0});ok.default={"proximiio:languages":{en:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"},fi:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"}},en:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"}};var ns=Pe&&Pe.__assign||function(){return ns=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ns.apply(this,arguments)},X5=Pe&&Pe.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(VE,"__esModule",{value:!0});var qoe=Hu,Woe=gp,Xoe=vp,Em=yp,zd=ld,Yoe=cd,Hoe=fd,Zoe=_p,Koe=bp,Joe=xp,Qoe=Uoe,ny=El,eae=ok,tae=function(){function e(t){this._observers=[],this.overlay=!1,this.segments=!1,this.routable=!1,this.cluster=!0,this.rooms=!0,this.id=t.id,this.organization_id=t.organization_id,this.version=t.version||1,this.name=t.name||"New Style",this.metadata=Object.assign(eae.default,t.metadata||{}),this.center=t.center||[18.555,48.4437],this.zoom=t.zoom||8,this.bearing=t.bearing||0,this.pitch=t.pitch||0,this.sources=t.sources||[],this.glyphs=t.glyphs||"",this.layers=(t.layers||[]).map(function(r){return r.type==="background"?new Woe.default(r).json:r.type==="raster"?new Xoe.default(r).json:r.type==="fill"?new Em.default(r).json:r.type==="line"?new zd.default(r).json:r.type==="fill-extrusion"?new Yoe.default(r).json:r.type==="symbol"?new Hoe.default(r).json:r.type==="heatmap"?new Zoe.default(r).json:r.type==="circle"?new Koe.default(r).json:r.type==="hillshade"?new Joe.default(r).json:new qoe.default(r)}).concat(this.getUniversalLayers("main")).concat(this.getSyntheticLayers())}return e.prototype.on=function(t){this._observers&&this._observers.push(t)},e.prototype.off=function(t){var r=this._observers?this._observers.findIndex(function(n){return n===t}):0;r>=0&&this._observers&&this._observers.splice(r,1)},e.prototype.notify=function(t,r){var n=this;this._observers&&this._observers.forEach(function(i){return i(t,r,n)})},e.prototype.getUniversalLayers=function(t){var r=["all",["==",["geometry-type"],"Polygon"],["any",["==",["get","segment"],!1],["!",["has","segment"]]],["any",["==",["get","routable"],!1],["!",["has","routable"]]],["==",["get","level"],0]],n=["all",["==",["geometry-type"],"Polygon"],["has","segment"],["==",["get","segment"],!0],["==",["get","level"],0]],i=["all",["==",["geometry-type"],"Polygon"],["has","routable"],["==",["get","routable"],!0],["==",["get","level"],0]],o=["all",["==",["geometry-type"],"Polygon"],["has","room"],["==",["get","room"],!0],["==",["get","level"],0]],s={minzoom:1,maxzoom:24,source:t};return[new Em.default(ns(ns({},s),{id:"".concat(t,"-polygon-fill"),type:"fill",filter:r,layout:{visibility:"none"},paint:{"fill-color":"#08c","fill-opacity":.3}})).json,new zd.default(ns(ns({},s),{id:"".concat(t,"-polygon-outline"),type:"line",filter:r,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#08c","line-width":1,"line-opacity":1}})).json,new zd.default(ns(ns({},s),{id:"".concat(t,"-room-outline"),type:"line",roomFilter:o,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":["get","color"],"line-width":1,"line-opacity":1}})).json,new Em.default(ns(ns({},s),{id:"".concat(t,"-room-fill"),type:"fill",filter:o,layout:{visibility:"none"},paint:{"fill-color":["get","color"],"fill-opacity":.3}})).json,new Em.default(ns(ns({},s),{id:"".concat(t,"-segment-fill"),type:"fill",filter:n,layout:{visibility:"none"},paint:{"fill-color":"#0c8","fill-opacity":.3}})).json,new zd.default(ns(ns({},s),{id:"".concat(t,"-segment-outline"),type:"line",filter:n,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#0c8","line-width":1,"line-opacity":1}})).json,new Em.default(ns(ns({},s),{id:"".concat(t,"-routable-fill"),type:"fill",filter:i,layout:{visibility:"none"},paint:{"fill-color":"#c80","fill-opacity":.3}})).json,new zd.default(ns(ns({},s),{id:"".concat(t,"-routable-outline"),type:"line",filter:i,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#c80","line-width":1,"line-opacity":1}})).json]},e.prototype.getSyntheticLayers=function(){var t=new Em.default({type:"fill",minzoom:1,maxzoom:24,source:"synthetic",id:"synthetic-polygon-fill",filter:["all",["==",["geometry-type"],"Polygon"]],layout:{visibility:"visible"},paint:{"fill-color":"#08c","fill-opacity":.3}}).json,r=new zd.default({type:"line",minzoom:1,maxzoom:24,source:"synthetic",id:"synthetic-polygon-outline",filter:["all",["==",["geometry-type"],"Polygon"]],layout:{"line-join":"bevel",visibility:"visible"},paint:{"line-color":"#08c","line-width":1,"line-opacity":1}}).json;return[t,r]},e.prototype.usesPrefixes=function(){return typeof this.layers.find(function(t){return t.id==="proximiio-paths"})<"u"},e.prototype.addLayer=function(t,r){r?this.layers.splice(this.getLayerIndex(r)+1,0,t):this.layers.push(t)},e.prototype.getLayer=function(t){return this.layers.find(function(r){return r.id===t})},e.prototype.getLayerIndex=function(t){return this.layers.findIndex(function(r){return r.id===t})},e.prototype.getLayers=function(t){return this.layers.filter(function(r){return r.source&&r.source===t})},e.prototype.addSource=function(t,r){this.sources[t]=r},e.prototype.removeLayer=function(t){this.layers=this.layers.filter(function(r){return r.id!==t})},e.prototype.getSources=function(){var t=this,r=[];return Object.keys(this.sources).forEach(function(n){var i=t.sources[n];i.id=n,r.push(i)}),r},e.prototype.setSource=function(t,r){this.sources[t]=r.source},e.prototype.getSource=function(t){return this.sources[t]},e.prototype.removeSource=function(t){this.sources[t]&&delete this.sources[t]},e.prototype.setLevel=function(t){X5(X5([],this.getLayers("main"),!0),this.getLayers("route"),!0).forEach(function(r){r.filter&&r.filter.forEach(function(n,i){if(r.id==="proximiio-levelchangers"){var o="__level_".concat(t);i===3&&(n[1]=o),i===4&&(n[1][1]=o)}if(Array.isArray(n)){var s=!1;if(n[0]==="=="){var a=n[1];a[0]==="to-number"&&a[1][0]==="get"&&a[1][1]==="level"&&(n[2]=t,s=!0),a[0]==="get"&&a[1]==="level"&&(n[2]=t,s=!0)}if(n[0]==="<="){var a=n[1];a[0]==="to-number"&&a[1][0]==="get"&&a[1][1]==="level_min"&&(n[2]=t,s=!0),a[0]==="get"&&a[1]==="level_min"&&(n[2]=t,s=!0)}if(n[0]===">="){var a=n[1];a[0]==="to-number"&&a[1][0]==="get"&&a[1][1]==="level_max"&&(n[2]=t,s=!0),a[0]==="get"&&a[1]==="level_max"&&(n[2]=t,s=!0)}s&&(r.filter[i]=n)}})}),this.notify("filter-change")},Object.defineProperty(e.prototype,"polygonEditing",{get:function(){return this.metadata[ny.METADATA_POLYGON_EDITING]||!1},enumerable:!1,configurable:!0}),e.prototype.toggleCluster=function(){this.cluster=!this.cluster,this.notify("cluster-toggled")},e.prototype.togglePolygonEditing=function(){this.metadata[ny.METADATA_POLYGON_EDITING]?this.metadata[ny.METADATA_POLYGON_EDITING]=!this.metadata[ny.METADATA_POLYGON_EDITING]:this.metadata[ny.METADATA_POLYGON_EDITING]=!0,this.notify("polygon-editing-toggled")},e.prototype.toggleRooms=function(){this.rooms=!this.rooms,this.notify("roomsss-toggled")},e.prototype.toggleOverlay=function(){this.overlay=!this.overlay,this.notify("overlay-toggled")},e.prototype.toggleSegments=function(){this.segments=!this.segments,this.notify("segments-toggled")},e.prototype.toggleRoutable=function(){this.routable=!this.routable,this.notify("routable-toggled")},e.prototype.togglePaths=function(t){var r=this.layers.find(function(i){return i.id==="proximiio-paths"||i.id==="paths"});if(r){var n=new zd.default(Object.assign({},r.json));n.layout.visibility=t?"visible":"none",this.updateLayer(n)}},e.prototype.updateLayer=function(t){var r=this.getLayerIndex(t.id),n=[];if(r>=0){var i=this.layers[r],o=(0,Qoe.diff)(i.json,t.json);o&&(n.push(o),this.layers.splice(r,1,t),this.notify("layer-update",{layer:t,changes:n.length>0?n[0]:[]}))}},e.prototype.setMetadata=function(t,r,n){this.metadata["".concat(t,":").concat(r)]=n,this.notify("metadata-update")},Object.defineProperty(e.prototype,"namespaces",{get:function(){var t=Object.keys(this.metadata),r=t.filter(function(i){return i.indexOf(":")>0}),n=new Set(r.map(function(i){return i.split(":")[0]}));return Array.from(n).sort(function(i,o){return i.localeCompare(o)})},enumerable:!1,configurable:!0}),e.prototype.namespaceItems=function(t){return Object.keys(this.metadata).filter(function(r){return r.indexOf("".concat(t,":"))===0}).map(function(r){return r.split(":").slice(1).join(":")})},Object.defineProperty(e.prototype,"json",{get:function(){var t=Object.assign({},this);return delete t._observers,delete t.overlay,t.layers=this.layers.map(function(r){return r.json}),JSON.parse(JSON.stringify(t))},enumerable:!1,configurable:!0}),e}();VE.default=tae;var NG=Pe&&Pe.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(g){try{f(n.next(g))}catch(_){s(_)}}function d(g){try{f(n.throw(g))}catch(_){s(_)}}function f(g){g.done?o(g.value):i(g.value).then(a,d)}f((n=n.apply(e,t||[])).next())})},FG=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(nd,"__esModule",{value:!0});nd.getStyleUrl=nd.getStyles=nd.getStyle=void 0;var ak=Tc,$G=VE,rae=function(e){return NG(void 0,void 0,void 0,function(){var t,r;return FG(this,function(n){switch(n.label){case 0:return t="/v5/geo/style",e&&(t+="s/".concat(e)),[4,ak.axios.get(t)];case 1:return r=n.sent(),[2,new $G.default(r.data)]}})})};nd.getStyle=rae;var nae=function(){return NG(void 0,void 0,void 0,function(){var e,t;return FG(this,function(r){switch(r.label){case 0:return e="/v5/geo/styles",[4,ak.axios.get(e)];case 1:return t=r.sent(),[2,t.data.map(function(n){return new $G.default(n)})]}})})};nd.getStyles=nae;var iae=function(){return"https://api.proximi.fi/v5/geo/style?token=".concat(ak.axios.defaults.headers.common.Authorization)};nd.getStyleUrl=iae;var dI={},Su={},b_={};Object.defineProperty(b_,"__esModule",{value:!0});b_.POI_TYPE=void 0;b_.POI_TYPE={POI:"poi",HAZARD:"hazard",DOOR:"door",ENTRANCE:"entrance",TICKET_GATE:"ticket_gate",DECISION:"decision",LANDMARK:"landmark",ELEVATOR:"elevator",ESCALATOR:"escalator",STAIRCASE:"staircase",RAMP:"ramp",TEXT:"text"};var oae=function(){function e(t,r,n){this.type=t,this.title=r,this.icon=n}return e}();b_.default=oae;var aae=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Su,"__esModule",{value:!0});Su.FeatureCollection=Su.Geometry=void 0;var sae=Jg,Zc=b_,zG=function(){function e(t){this.type=t.type,this.coordinates=t.coordinates}return e}();Su.Geometry=zG;var uae=function(){function e(t){this.type="FeatureCollection",this.features=(t.features||[]).map(function(r){return new BG(r).json})}return Object.defineProperty(e.prototype,"json",{get:function(){return{type:"FeatureCollection",features:this.features.map(function(t){return t.json})}},enumerable:!1,configurable:!0}),e}();Su.FeatureCollection=uae;var BG=function(e){aae(t,e);function t(r){var n=e.call(this,r)||this;return n.type="Feature",n.id=r.id,n.geometry=new zG(r.geometry),n.properties=r.properties||{},typeof n.properties.title_i18n=="string"&&(n.properties.title_i18n=JSON.parse(n.properties.title_i18n)),n.isPoint&&(n.properties.images||(n.properties.images=[]),n.properties.range||(n.properties.range=3)),typeof n.properties.images=="string"&&(n.properties.images=JSON.parse(n.properties.images)),n.isLevelChanger&&Array.isArray(n.properties.levels)&&n.properties.levels.forEach(function(i){return n.properties["__level_".concat(i)]=!0}),n.properties.type==="text"&&Array.isArray(n.properties.textFont)&&(n.properties.textFont=n.properties.textFont[0]),n}return Object.defineProperty(t.prototype,"isEditable",{get:function(){return this.isPoint||this.isLineString||this.isPolygon},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPoint",{get:function(){return this.geometry.type==="Point"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPolygon",{get:function(){return this.geometry.type==="Polygon"||this.geometry.type==="MultiPolygon"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLineString",{get:function(){return this.geometry.type==="LineString"||this.geometry.type==="MultiLineString"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHazard",{get:function(){return this.properties.type===Zc.POI_TYPE.HAZARD},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLandmark",{get:function(){return this.properties.type===Zc.POI_TYPE.LANDMARK},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDoor",{get:function(){return this.properties.type===Zc.POI_TYPE.DOOR},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEntrance",{get:function(){return this.properties.type===Zc.POI_TYPE.ENTRANCE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDecisionPoint",{get:function(){return this.properties.type===Zc.POI_TYPE.DECISION},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTicketGate",{get:function(){return this.properties.type===Zc.POI_TYPE.TICKET_GATE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isElevator",{get:function(){return this.properties.type===Zc.POI_TYPE.ELEVATOR},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEscalator",{get:function(){return this.properties.type===Zc.POI_TYPE.ESCALATOR},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStairCase",{get:function(){return this.properties.type===Zc.POI_TYPE.STAIRCASE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRamp",{get:function(){return this.properties.type===Zc.POI_TYPE.RAMP},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLevelChanger",{get:function(){return this.isElevator||this.isEscalator||this.isStairCase||this.isRamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isText",{get:function(){return this.properties.type==="text"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSynthetic",{get:function(){var r=["id","place_id","floor_id","level"];return(this.geometry.type==="LineString"||this.geometry.type==="MultiLineString")&&r.push("class"),Object.keys(this.properties).map(function(n){return!r.includes(n)}).filter(function(n){return n}).length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoom",{get:function(){return this.properties.room},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRouting",{get:function(){return this.properties.usecase==="routing"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getTitle",{get:function(){return this.properties.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getTitleWithLevel",{get:function(){return"".concat(this.properties.title," - Level: ").concat(this.properties.level)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"json",{get:function(){this.properties.cameFrom&&delete this.properties.cameFrom,this.properties.fixedPointMap&&delete this.properties.fixedPointMap;var r=JSON.parse(JSON.stringify(this));if(r.properties.metadata&&typeof r.properties.metadata!="object")try{r.properties.metadata=JSON.parse(r.properties.metadata)}catch{}return Object.keys(r.properties).forEach(function(n){n.match("__level")&&delete r.properties.key}),r},enumerable:!1,configurable:!0}),t.point=function(r,n,i,o){return new t({id:r,geometry:{type:"Point",coordinates:[i,n]},properties:o})},t.prototype.setTitle=function(r,n){n===void 0&&(n="en"),typeof this.properties.title_18n>"u"&&(this.properties.title_18n={}),this.properties.title_18n[n]=r},t.prototype.hasLevel=function(r){return this.isLevelChanger?this.properties.levels.includes(r):this.properties.level===r},t}(sae.default),lae=Su.default=BG,GE={},cae=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(GE,"__esModule",{value:!0});GE.AmenityModel=void 0;var fae=Jg,hae=function(e){cae(t,e);function t(r){var n=e.call(this,r)||this;return n.category=r.category,n.iconOffset=r.iconOffset,n.list=r.list,n.title=r.title,n.description=r.description,n.icon=r.icon,n}return Object.defineProperty(t.prototype,"hasIcon",{get:function(){return!!this.icon},enumerable:!1,configurable:!0}),t}(fae.default);GE.AmenityModel=hae;var x_={},sk={exports:{}},Ps={},ur={},Vt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=63710088e-1,e.factors={centimeters:e.earthRadius*100,centimetres:e.earthRadius*100,degrees:e.earthRadius/111325,feet:e.earthRadius*3.28084,inches:e.earthRadius*39.37,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:e.earthRadius*1e3,millimetres:e.earthRadius*1e3,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius*1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(me,ge,be){be===void 0&&(be={});var oe={type:"Feature"};return(be.id===0||be.id)&&(oe.id=be.id),be.bbox&&(oe.bbox=be.bbox),oe.properties=ge||{},oe.geometry=me,oe}e.feature=t;function r(me,ge,be){switch(me){case"Point":return n(ge).geometry;case"LineString":return a(ge).geometry;case"Polygon":return o(ge).geometry;case"MultiPoint":return _(ge).geometry;case"MultiLineString":return g(ge).geometry;case"MultiPolygon":return b(ge).geometry;default:throw new Error(me+" is invalid")}}e.geometry=r;function n(me,ge,be){if(be===void 0&&(be={}),!me)throw new Error("coordinates is required");if(!Array.isArray(me))throw new Error("coordinates must be an Array");if(me.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Z(me[0])||!Z(me[1]))throw new Error("coordinates must contain numbers");var oe={type:"Point",coordinates:me};return t(oe,ge,be)}e.point=n;function i(me,ge,be){return be===void 0&&(be={}),f(me.map(function(oe){return n(oe,ge)}),be)}e.points=i;function o(me,ge,be){be===void 0&&(be={});for(var oe=0,Ie=me;oe<Ie.length;oe++){var fe=Ie[oe];if(fe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var G=0;G<fe[fe.length-1].length;G++)if(fe[fe.length-1][G]!==fe[0][G])throw new Error("First and last Position are not equivalent.")}var K={type:"Polygon",coordinates:me};return t(K,ge,be)}e.polygon=o;function s(me,ge,be){return be===void 0&&(be={}),f(me.map(function(oe){return o(oe,ge)}),be)}e.polygons=s;function a(me,ge,be){if(be===void 0&&(be={}),me.length<2)throw new Error("coordinates must be an array of two or more positions");var oe={type:"LineString",coordinates:me};return t(oe,ge,be)}e.lineString=a;function d(me,ge,be){return be===void 0&&(be={}),f(me.map(function(oe){return a(oe,ge)}),be)}e.lineStrings=d;function f(me,ge){ge===void 0&&(ge={});var be={type:"FeatureCollection"};return ge.id&&(be.id=ge.id),ge.bbox&&(be.bbox=ge.bbox),be.features=me,be}e.featureCollection=f;function g(me,ge,be){be===void 0&&(be={});var oe={type:"MultiLineString",coordinates:me};return t(oe,ge,be)}e.multiLineString=g;function _(me,ge,be){be===void 0&&(be={});var oe={type:"MultiPoint",coordinates:me};return t(oe,ge,be)}e.multiPoint=_;function b(me,ge,be){be===void 0&&(be={});var oe={type:"MultiPolygon",coordinates:me};return t(oe,ge,be)}e.multiPolygon=b;function P(me,ge,be){be===void 0&&(be={});var oe={type:"GeometryCollection",geometries:me};return t(oe,ge,be)}e.geometryCollection=P;function L(me,ge){if(ge===void 0&&(ge=0),ge&&!(ge>=0))throw new Error("precision must be a positive number");var be=Math.pow(10,ge||0);return Math.round(me*be)/be}e.round=L;function R(me,ge){ge===void 0&&(ge="kilometers");var be=e.factors[ge];if(!be)throw new Error(ge+" units is invalid");return me*be}e.radiansToLength=R;function $(me,ge){ge===void 0&&(ge="kilometers");var be=e.factors[ge];if(!be)throw new Error(ge+" units is invalid");return me/be}e.lengthToRadians=$;function F(me,ge){return x($(me,ge))}e.lengthToDegrees=F;function T(me){var ge=me%360;return ge<0&&(ge+=360),ge}e.bearingToAzimuth=T;function x(me){var ge=me%(2*Math.PI);return ge*180/Math.PI}e.radiansToDegrees=x;function N(me){var ge=me%360;return ge*Math.PI/180}e.degreesToRadians=N;function B(me,ge,be){if(ge===void 0&&(ge="kilometers"),be===void 0&&(be="kilometers"),!(me>=0))throw new Error("length must be a positive number");return R($(me,ge),be)}e.convertLength=B;function H(me,ge,be){if(ge===void 0&&(ge="meters"),be===void 0&&(be="kilometers"),!(me>=0))throw new Error("area must be a positive number");var oe=e.areaFactors[ge];if(!oe)throw new Error("invalid original units");var Ie=e.areaFactors[be];if(!Ie)throw new Error("invalid final units");return me/oe*Ie}e.convertArea=H;function Z(me){return!isNaN(me)&&me!==null&&!Array.isArray(me)}e.isNumber=Z;function Y(me){return!!me&&me.constructor===Object}e.isObject=Y;function W(me){if(!me)throw new Error("bbox is required");if(!Array.isArray(me))throw new Error("bbox must be an Array");if(me.length!==4&&me.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");me.forEach(function(ge){if(!Z(ge))throw new Error("bbox must only contain numbers")})}e.validateBBox=W;function Q(me){if(!me)throw new Error("id is required");if(["string","number"].indexOf(typeof me)===-1)throw new Error("id must be a number or a string")}e.validateId=Q})(Vt);Object.defineProperty(ur,"__esModule",{value:!0});var Qs=Vt;function w_(e,t,r){if(e!==null)for(var n,i,o,s,a,d,f,g=0,_=0,b,P=e.type,L=P==="FeatureCollection",R=P==="Feature",$=L?e.features.length:1,F=0;F<$;F++){f=L?e.features[F].geometry:R?e.geometry:e,b=f?f.type==="GeometryCollection":!1,a=b?f.geometries.length:1;for(var T=0;T<a;T++){var x=0,N=0;if(s=b?f.geometries[T]:f,s!==null){d=s.coordinates;var B=s.type;switch(g=r&&(B==="Polygon"||B==="MultiPolygon")?1:0,B){case null:break;case"Point":if(t(d,_,F,x,N)===!1)return!1;_++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<d.length;n++){if(t(d[n],_,F,x,N)===!1)return!1;_++,B==="MultiPoint"&&x++}B==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<d.length;n++){for(i=0;i<d[n].length-g;i++){if(t(d[n][i],_,F,x,N)===!1)return!1;_++}B==="MultiLineString"&&x++,B==="Polygon"&&N++}B==="Polygon"&&x++;break;case"MultiPolygon":for(n=0;n<d.length;n++){for(N=0,i=0;i<d[n].length;i++){for(o=0;o<d[n][i].length-g;o++){if(t(d[n][i][o],_,F,x,N)===!1)return!1;_++}N++}x++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(w_(s.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function dae(e,t,r,n){var i=r;return w_(e,function(o,s,a,d,f){s===0&&r===void 0?i=o:i=t(i,o,s,a,d,f)},n),i}function jG(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function pae(e,t,r){var n=r;return jG(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function UG(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function mae(e,t,r){var n=r;return UG(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function gae(e){var t=[];return w_(e,function(r){t.push(r)}),t}function uk(e,t){var r,n,i,o,s,a,d,f,g,_,b=0,P=e.type==="FeatureCollection",L=e.type==="Feature",R=P?e.features.length:1;for(r=0;r<R;r++){for(a=P?e.features[r].geometry:L?e.geometry:e,f=P?e.features[r].properties:L?e.properties:{},g=P?e.features[r].bbox:L?e.bbox:void 0,_=P?e.features[r].id:L?e.id:void 0,d=a?a.type==="GeometryCollection":!1,s=d?a.geometries.length:1,i=0;i<s;i++){if(o=d?a.geometries[i]:a,o===null){if(t(null,b,f,g,_)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,b,f,g,_)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],b,f,g,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function vae(e,t,r){var n=r;return uk(e,function(i,o,s,a,d){o===0&&r===void 0?n=i:n=t(n,i,o,s,a,d)}),n}function qE(e,t){uk(e,function(r,n,i,o,s){var a=r===null?null:r.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Qs.feature(r,i,{bbox:o,id:s}),n,0)===!1?!1:void 0}var d;switch(a){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var g=r.coordinates[f],_={type:d,coordinates:g};if(t(Qs.feature(_,i),n,f)===!1)return!1}})}function yae(e,t,r){var n=r;return qE(e,function(i,o,s){o===0&&s===0&&r===void 0?n=i:n=t(n,i,o,s)}),n}function VG(e,t){qE(e,function(r,n,i){var o=0;if(r.geometry){var s=r.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,d=0,f=0,g=0;if(w_(r,function(_,b,P,L,R){if(a===void 0||n>d||L>f||R>g){a=_,d=n,f=L,g=R,o=0;return}var $=Qs.lineString([a,_],r.properties);if(t($,n,i,R,o)===!1)return!1;o++,a=_})===!1)return!1}}})}function _ae(e,t,r){var n=r,i=!1;return VG(e,function(o,s,a,d,f){i===!1&&r===void 0?n=o:n=t(n,o,s,a,d,f),i=!0}),n}function GG(e,t){if(!e)throw new Error("geojson is required");qE(e,function(r,n,i){if(r.geometry!==null){var o=r.geometry.type,s=r.geometry.coordinates;switch(o){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(t(Qs.lineString(s[a],r.properties),n,i,a)===!1)return!1;break}}})}function bae(e,t,r){var n=r;return GG(e,function(i,o,s,a){o===0&&r===void 0?n=i:n=t(n,i,o,s,a)}),n}function xae(e,t){if(t=t||{},!Qs.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var d=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=d.length+o-1),Qs.lineString([d[o],d[o+1]],s,t);case"Polygon":return i<0&&(i=d.length+i),o<0&&(o=d[i].length+o-1),Qs.lineString([d[i][o],d[i][o+1]],s,t);case"MultiLineString":return n<0&&(n=d.length+n),o<0&&(o=d[n].length+o-1),Qs.lineString([d[n][o],d[n][o+1]],s,t);case"MultiPolygon":return n<0&&(n=d.length+n),i<0&&(i=d[n].length+i),o<0&&(o=d[n][i].length-o-1),Qs.lineString([d[n][i][o],d[n][i][o+1]],s,t)}throw new Error("geojson is invalid")}function wae(e,t){if(t=t||{},!Qs.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var d=a.coordinates;switch(a.type){case"Point":return Qs.point(d,s,t);case"MultiPoint":return n<0&&(n=d.length+n),Qs.point(d[n],s,t);case"LineString":return o<0&&(o=d.length+o),Qs.point(d[o],s,t);case"Polygon":return i<0&&(i=d.length+i),o<0&&(o=d[i].length+o),Qs.point(d[i][o],s,t);case"MultiLineString":return n<0&&(n=d.length+n),o<0&&(o=d[n].length+o),Qs.point(d[n][o],s,t);case"MultiPolygon":return n<0&&(n=d.length+n),i<0&&(i=d[n].length+i),o<0&&(o=d[n][i].length-o),Qs.point(d[n][i][o],s,t)}throw new Error("geojson is invalid")}ur.coordAll=gae;ur.coordEach=w_;ur.coordReduce=dae;ur.featureEach=UG;ur.featureReduce=mae;ur.findPoint=wae;ur.findSegment=xae;ur.flattenEach=qE;ur.flattenReduce=yae;ur.geomEach=uk;ur.geomReduce=vae;ur.lineEach=GG;ur.lineReduce=bae;ur.propEach=jG;ur.propReduce=pae;ur.segmentEach=VG;ur.segmentReduce=_ae;Object.defineProperty(Ps,"__esModule",{value:!0});var Eae=ur;function QT(e){var t=[1/0,1/0,-1/0,-1/0];return Eae.coordEach(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}QT.default=QT;Ps.default=QT;var Er={};Object.defineProperty(Er,"__esModule",{value:!0});var Y5=Vt;function Sae(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}Er.getCoord=Sae;function Pae(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}Er.getCoords=Pae;function qG(e){if(e.length>1&&Y5.isNumber(e[0])&&Y5.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return qG(e[0]);throw new Error("coordinates must only contain numbers")}Er.containsNumber=qG;function Aae(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)}Er.geojsonType=Aae;function Cae(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)}Er.featureOf=Cae;function Iae(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=e.features;n<i.length;n++){var o=i[n];if(!o||o.type!=="Feature"||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}}Er.collectionOf=Iae;function Oae(e){return e.type==="Feature"?e.geometry:e}Er.getGeom=Oae;function Tae(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}Er.getType=Tae;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var H5=Object.getOwnPropertySymbols,Mae=Object.prototype.hasOwnProperty,Lae=Object.prototype.propertyIsEnumerable;function Rae(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function kae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var lk=kae()?Object.assign:function(e,t){for(var r,n=Rae(e),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)Mae.call(r,s)&&(n[s]=r[s]);if(H5){i=H5(r);for(var a=0;a<i.length;a++)Lae.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n},Dae=Ps,WG=ur,Uf=Er,n0=Vt,Nae=lk;function XG(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Fae=XG(Dae),$ae=XG(Nae);/**
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var Z5={successCallback:null,verbose:!1},Ab={};function zae(e,t,r){r=r||{};for(var n=Object.keys(Z5),i=0;i<n.length;i++){var o=n[i],s=r[o];s=typeof s<"u"&&s!==null?s:Z5[o],Ab[o]=s}Ab.verbose;var a=Uae(Bae(e,t));return typeof Ab.successCallback=="function"&&Ab.successCallback(a),a}function vi(e,t,r){return(e-t)/(r-t)}function Bae(e,t){for(var r=e.length-1,n=e[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var s=0;s<n;++s){var a=0,d=e[o+1][s],f=e[o+1][s+1],g=e[o][s+1],_=e[o][s];if(!(isNaN(d)||isNaN(f)||isNaN(g)||isNaN(_))){a|=d>=t?8:0,a|=f>=t?4:0,a|=g>=t?2:0,a|=_>=t?1:0;var b=!1;if(a===5||a===10){var P=(d+f+g+_)/4;a===5&&P<t?(a=10,b=!0):a===10&&P<t&&(a=5,b=!0)}if(a!==0&&a!==15){var L,R,$,F;L=R=$=F=.5,a===1?($=1-vi(t,d,_),R=1-vi(t,g,_)):a===2?(R=vi(t,_,g),F=1-vi(t,f,g)):a===3?($=1-vi(t,d,_),F=1-vi(t,f,g)):a===4?(L=vi(t,d,f),F=vi(t,g,f)):a===5?(L=vi(t,d,f),F=vi(t,g,f),R=1-vi(t,g,_),$=1-vi(t,d,_)):a===6?(R=vi(t,_,g),L=vi(t,d,f)):a===7?($=1-vi(t,d,_),L=vi(t,d,f)):a===8?($=vi(t,_,d),L=1-vi(t,f,d)):a===9?(R=1-vi(t,g,_),L=1-vi(t,f,d)):a===10?(L=1-vi(t,f,d),F=1-vi(t,f,g),R=vi(t,_,g),$=vi(t,_,d)):a===11?(L=1-vi(t,f,d),F=1-vi(t,f,g)):a===12?($=vi(t,_,d),F=vi(t,g,f)):a===13?(R=1-vi(t,g,_),F=vi(t,g,f)):a===14&&($=vi(t,_,d),R=vi(t,_,g)),i.cells[o][s]={cval:a,flipped:b,top:L,right:F,bottom:R,left:$}}}}}return i}function jae(e){return e.cval===5||e.cval===10}function YG(e){return e.cval===0||e.cval===15}function K5(e){!YG(e)&&e.cval!==5&&e.cval!==10&&(e.cval=15)}function pI(e,t){if(t==="top")return[e.top,1];if(t==="bottom")return[e.bottom,0];if(t==="right")return[1,e.right];if(t==="left")return[0,e.left]}function Uae(e){var t=[],r=0,n=1e-7;return e.cells.forEach(function(i,o){i.forEach(function(s,a){if(typeof s<"u"&&!jae(s)&&!YG(s)){var d=Vae(e.cells,o,a),f=!1;if(d.info==="mergeable"){for(var g=d.path[d.path.length-1][0],_=d.path[d.path.length-1][1],b=r-1;b>=0;b--)if(Math.abs(t[b][0][0]-g)<=n&&Math.abs(t[b][0][1]-_)<=n){for(var P=d.path.length-2;P>=0;--P)t[b].unshift(d.path[P]);f=!0;break}}f||(t[r++]=d.path)}})}),t}function Vae(e,t,r){var n=e.length,i=[],o=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],s=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],a,d,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],g=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],P,_=e[t][r],b=_.cval,P=f[b],L=pI(_,P);i.push([r+L[0],t+L[1]]),P=g[b],L=pI(_,P),i.push([r+L[0],t+L[1]]),K5(_);for(var R=r+o[b],$=t+s[b],F=b;R>=0&&$>=0&&$<n&&(R!=r||$!=t)&&(_=e[$][R],!(typeof _>"u"));){if(b=_.cval,b===0||b===15)return{path:i,info:"mergeable"};P=g[b],a=o[b],d=s[b],(b===5||b===10)&&(b===5?_.flipped?s[F]===-1?(P="left",a=-1,d=0):(P="right",a=1,d=0):o[F]===-1&&(P="bottom",a=0,d=-1):b===10&&(_.flipped?o[F]===-1?(P="top",a=0,d=1):(P="bottom",a=0,d=-1):s[F]===1&&(P="left",a=-1,d=0))),L=pI(_,P),i.push([R+L[0],$+L[1]]),K5(_),R+=a,$+=d,F=b}return{path:i,info:"closed"}}function Gae(e,t){if(t=t||{},!n0.isObject(t))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;Uf.collectionOf(e,"Point","input must contain Points");for(var o=qae(e,n),s=[],a=0;a<o.length;a++){for(var d=o[a],f=[],g=0;g<d.length;g++){var _=d[g];_.properties[r]?f.push(_.properties[r]):f.push(0),i===!0&&(_.properties.matrixPosition=[a,g])}s.push(f)}return s}function qae(e,t){var r={};WG.featureEach(e,function(o){var s=Uf.getCoords(o)[1];r[s]||(r[s]=[]),r[s].push(o)});var n=Object.keys(r).map(function(o){var s=r[o],a=s.sort(function(d,f){return Uf.getCoords(d)[0]-Uf.getCoords(f)[0]});return a}),i=n.sort(function(o,s){return t?Uf.getCoords(o[0])[1]-Uf.getCoords(s[0])[1]:Uf.getCoords(s[0])[1]-Uf.getCoords(o[0])[1]});return i}function HG(e,t,r){if(r=r||{},!n0.isObject(r))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(Uf.collectionOf(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!n0.isObject(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=Gae(e,{zProperty:n,flip:!0}),a=Wae(s,t,n,i,o),d=Xae(a,s,e);return n0.featureCollection(d)}function Wae(e,t,r,n,i){for(var o=[],s=1;s<t.length;s++){var a=+t[s],d=$ae.default({},n,i[s]);d[r]=a;var f=n0.multiLineString(zae(e,a),d);o.push(f)}return o}function Xae(e,t,r){var n=Fae.default(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],d=t[0].length-1,f=t.length-1,g=i/d,_=o/f,b=function(P){P[0]=P[0]*g+s,P[1]=P[1]*_+a};return e.forEach(function(P){WG.coordEach(P,b)}),e}sk.exports=HG;sk.exports.default=HG;var Yae=sk.exports,WE={},ck={exports:{}},ZG={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Pe,function(){function r(T,x,N,B,H){(function Z(Y,W,Q,me,ge){for(;me>Q;){if(me-Q>600){var be=me-Q+1,oe=W-Q+1,Ie=Math.log(be),fe=.5*Math.exp(2*Ie/3),G=.5*Math.sqrt(Ie*fe*(be-fe)/be)*(oe-be/2<0?-1:1),K=Math.max(Q,Math.floor(W-oe*fe/be+G)),re=Math.min(me,Math.floor(W+(be-oe)*fe/be+G));Z(Y,W,K,re,ge)}var ie=Y[W],he=Q,ae=me;for(n(Y,Q,W),ge(Y[me],ie)>0&&n(Y,Q,me);he<ae;){for(n(Y,he,ae),he++,ae--;ge(Y[he],ie)<0;)he++;for(;ge(Y[ae],ie)>0;)ae--}ge(Y[Q],ie)===0?n(Y,Q,ae):n(Y,++ae,me),ae<=W&&(Q=ae+1),W<=ae&&(me=ae-1)}})(T,x,N||0,B||T.length-1,H||i)}function n(T,x,N){var B=T[x];T[x]=T[N],T[N]=B}function i(T,x){return T<x?-1:T>x?1:0}var o=function(T){T===void 0&&(T=9),this._maxEntries=Math.max(4,T),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(T,x,N){if(!N)return x.indexOf(T);for(var B=0;B<x.length;B++)if(N(T,x[B]))return B;return-1}function a(T,x){d(T,0,T.children.length,x,T)}function d(T,x,N,B,H){H||(H=$(null)),H.minX=1/0,H.minY=1/0,H.maxX=-1/0,H.maxY=-1/0;for(var Z=x;Z<N;Z++){var Y=T.children[Z];f(H,T.leaf?B(Y):Y)}return H}function f(T,x){return T.minX=Math.min(T.minX,x.minX),T.minY=Math.min(T.minY,x.minY),T.maxX=Math.max(T.maxX,x.maxX),T.maxY=Math.max(T.maxY,x.maxY),T}function g(T,x){return T.minX-x.minX}function _(T,x){return T.minY-x.minY}function b(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function P(T){return T.maxX-T.minX+(T.maxY-T.minY)}function L(T,x){return T.minX<=x.minX&&T.minY<=x.minY&&x.maxX<=T.maxX&&x.maxY<=T.maxY}function R(T,x){return x.minX<=T.maxX&&x.minY<=T.maxY&&x.maxX>=T.minX&&x.maxY>=T.minY}function $(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function F(T,x,N,B,H){for(var Z=[x,N];Z.length;)if(!((N=Z.pop())-(x=Z.pop())<=B)){var Y=x+Math.ceil((N-x)/B/2)*B;r(T,Y,x,N,H),Z.push(x,Y,Y,N)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(T){var x=this.data,N=[];if(!R(T,x))return N;for(var B=this.toBBox,H=[];x;){for(var Z=0;Z<x.children.length;Z++){var Y=x.children[Z],W=x.leaf?B(Y):Y;R(T,W)&&(x.leaf?N.push(Y):L(T,W)?this._all(Y,N):H.push(Y))}x=H.pop()}return N},o.prototype.collides=function(T){var x=this.data;if(!R(T,x))return!1;for(var N=[];x;){for(var B=0;B<x.children.length;B++){var H=x.children[B],Z=x.leaf?this.toBBox(H):H;if(R(T,Z)){if(x.leaf||L(T,Z))return!0;N.push(H)}}x=N.pop()}return!1},o.prototype.load=function(T){if(!T||!T.length)return this;if(T.length<this._minEntries){for(var x=0;x<T.length;x++)this.insert(T[x]);return this}var N=this._build(T.slice(),0,T.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var B=this.data;this.data=N,N=B}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},o.prototype.insert=function(T){return T&&this._insert(T,this.data.height-1),this},o.prototype.clear=function(){return this.data=$([]),this},o.prototype.remove=function(T,x){if(!T)return this;for(var N,B,H,Z=this.data,Y=this.toBBox(T),W=[],Q=[];Z||W.length;){if(Z||(Z=W.pop(),B=W[W.length-1],N=Q.pop(),H=!0),Z.leaf){var me=s(T,Z.children,x);if(me!==-1)return Z.children.splice(me,1),W.push(Z),this._condense(W),this}H||Z.leaf||!L(Z,Y)?B?(N++,Z=B.children[N],H=!1):Z=null:(W.push(Z),Q.push(N),N=0,B=Z,Z=Z.children[0])}return this},o.prototype.toBBox=function(T){return T},o.prototype.compareMinX=function(T,x){return T.minX-x.minX},o.prototype.compareMinY=function(T,x){return T.minY-x.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(T){return this.data=T,this},o.prototype._all=function(T,x){for(var N=[];T;)T.leaf?x.push.apply(x,T.children):N.push.apply(N,T.children),T=N.pop();return x},o.prototype._build=function(T,x,N,B){var H,Z=N-x+1,Y=this._maxEntries;if(Z<=Y)return a(H=$(T.slice(x,N+1)),this.toBBox),H;B||(B=Math.ceil(Math.log(Z)/Math.log(Y)),Y=Math.ceil(Z/Math.pow(Y,B-1))),(H=$([])).leaf=!1,H.height=B;var W=Math.ceil(Z/Y),Q=W*Math.ceil(Math.sqrt(Y));F(T,x,N,Q,this.compareMinX);for(var me=x;me<=N;me+=Q){var ge=Math.min(me+Q-1,N);F(T,me,ge,W,this.compareMinY);for(var be=me;be<=ge;be+=W){var oe=Math.min(be+W-1,ge);H.children.push(this._build(T,be,oe,B-1))}}return a(H,this.toBBox),H},o.prototype._chooseSubtree=function(T,x,N,B){for(;B.push(x),!x.leaf&&B.length-1!==N;){for(var H=1/0,Z=1/0,Y=void 0,W=0;W<x.children.length;W++){var Q=x.children[W],me=b(Q),ge=(be=T,oe=Q,(Math.max(oe.maxX,be.maxX)-Math.min(oe.minX,be.minX))*(Math.max(oe.maxY,be.maxY)-Math.min(oe.minY,be.minY))-me);ge<Z?(Z=ge,H=me<H?me:H,Y=Q):ge===Z&&me<H&&(H=me,Y=Q)}x=Y||x.children[0]}var be,oe;return x},o.prototype._insert=function(T,x,N){var B=N?T:this.toBBox(T),H=[],Z=this._chooseSubtree(B,this.data,x,H);for(Z.children.push(T),f(Z,B);x>=0&&H[x].children.length>this._maxEntries;)this._split(H,x),x--;this._adjustParentBBoxes(B,H,x)},o.prototype._split=function(T,x){var N=T[x],B=N.children.length,H=this._minEntries;this._chooseSplitAxis(N,H,B);var Z=this._chooseSplitIndex(N,H,B),Y=$(N.children.splice(Z,N.children.length-Z));Y.height=N.height,Y.leaf=N.leaf,a(N,this.toBBox),a(Y,this.toBBox),x?T[x-1].children.push(Y):this._splitRoot(N,Y)},o.prototype._splitRoot=function(T,x){this.data=$([T,x]),this.data.height=T.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(T,x,N){for(var B,H,Z,Y,W,Q,me,ge=1/0,be=1/0,oe=x;oe<=N-x;oe++){var Ie=d(T,0,oe,this.toBBox),fe=d(T,oe,N,this.toBBox),G=(H=Ie,Z=fe,Y=void 0,W=void 0,Q=void 0,me=void 0,Y=Math.max(H.minX,Z.minX),W=Math.max(H.minY,Z.minY),Q=Math.min(H.maxX,Z.maxX),me=Math.min(H.maxY,Z.maxY),Math.max(0,Q-Y)*Math.max(0,me-W)),K=b(Ie)+b(fe);G<ge?(ge=G,B=oe,be=K<be?K:be):G===ge&&K<be&&(be=K,B=oe)}return B||N-x},o.prototype._chooseSplitAxis=function(T,x,N){var B=T.leaf?this.compareMinX:g,H=T.leaf?this.compareMinY:_;this._allDistMargin(T,x,N,B)<this._allDistMargin(T,x,N,H)&&T.children.sort(B)},o.prototype._allDistMargin=function(T,x,N,B){T.children.sort(B);for(var H=this.toBBox,Z=d(T,0,x,H),Y=d(T,N-x,N,H),W=P(Z)+P(Y),Q=x;Q<N-x;Q++){var me=T.children[Q];f(Z,T.leaf?H(me):me),W+=P(Z)}for(var ge=N-x-1;ge>=x;ge--){var be=T.children[ge];f(Y,T.leaf?H(be):be),W+=P(Y)}return W},o.prototype._adjustParentBBoxes=function(T,x,N){for(var B=N;B>=0;B--)f(x[B],T)},o.prototype._condense=function(T){for(var x=T.length-1,N=void 0;x>=0;x--)T[x].children.length===0?x>0?(N=T[x-1].children).splice(N.indexOf(T[x]),1):this.clear():a(T[x],this.toBBox)},o})})(ZG);var Hae=ZG.exports;class Zae{constructor(t=[],r=Kae){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:n}=this,i=r[t];for(;t>0;){const o=t-1>>1,s=r[o];if(n(i,s)>=0)break;r[t]=s,t=o}r[t]=i}_down(t){const{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let s=(t<<1)+1,a=r[s];const d=s+1;if(d<this.length&&n(r[d],a)<0&&(s=d,a=r[d]),n(a,o)>=0)break;r[t]=a,t=s}r[t]=o}}function Kae(e,t){return e<t?-1:e>t?1:0}const Jae=Object.freeze(Object.defineProperty({__proto__:null,default:Zae},Symbol.toStringTag,{value:"Module"})),Qae=Yg(Jae);var XE={exports:{}},ese=function(t,r,n,i){var o=t[0],s=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var d=(i-n)/2,f=0,g=d-1;f<d;g=f++){var _=r[n+f*2+0],b=r[n+f*2+1],P=r[n+g*2+0],L=r[n+g*2+1],R=b>s!=L>s&&o<(P-_)*(s-b)/(L-b)+_;R&&(a=!a)}return a},tse=function(t,r,n,i){var o=t[0],s=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var d=i-n,f=0,g=d-1;f<d;g=f++){var _=r[f+n][0],b=r[f+n][1],P=r[g+n][0],L=r[g+n][1],R=b>s!=L>s&&o<(P-_)*(s-b)/(L-b)+_;R&&(a=!a)}return a},KG=ese,JG=tse;XE.exports=function(t,r,n,i){return r.length>0&&Array.isArray(r[0])?JG(t,r,n,i):KG(t,r,n,i)};XE.exports.nested=JG;XE.exports.flat=KG;var rse=XE.exports,eM={exports:{}};(function(e,t){(function(r,n){n(t)})(Pe,function(r){const i=33306690738754706e-32;function o(R,$,F,T,x){let N,B,H,Z,Y=$[0],W=T[0],Q=0,me=0;W>Y==W>-Y?(N=Y,Y=$[++Q]):(N=W,W=T[++me]);let ge=0;if(Q<R&&me<F)for(W>Y==W>-Y?(H=N-((B=Y+N)-Y),Y=$[++Q]):(H=N-((B=W+N)-W),W=T[++me]),N=B,H!==0&&(x[ge++]=H);Q<R&&me<F;)W>Y==W>-Y?(H=N-((B=N+Y)-(Z=B-N))+(Y-Z),Y=$[++Q]):(H=N-((B=N+W)-(Z=B-N))+(W-Z),W=T[++me]),N=B,H!==0&&(x[ge++]=H);for(;Q<R;)H=N-((B=N+Y)-(Z=B-N))+(Y-Z),Y=$[++Q],N=B,H!==0&&(x[ge++]=H);for(;me<F;)H=N-((B=N+W)-(Z=B-N))+(W-Z),W=T[++me],N=B,H!==0&&(x[ge++]=H);return N===0&&ge!==0||(x[ge++]=N),ge}function s(R){return new Float64Array(R)}const a=33306690738754716e-32,d=22204460492503146e-32,f=11093356479670487e-47,g=s(4),_=s(8),b=s(12),P=s(16),L=s(4);r.orient2d=function(R,$,F,T,x,N){const B=($-N)*(F-x),H=(R-x)*(T-N),Z=B-H;if(B===0||H===0||B>0!=H>0)return Z;const Y=Math.abs(B+H);return Math.abs(Z)>=a*Y?Z:-function(W,Q,me,ge,be,oe,Ie){let fe,G,K,re,ie,he,ae,Te,Le,Xe,$e,at,_t,Lt,pt,Ot,vt,Ze;const Zt=W-be,rr=me-be,Gt=Q-oe,br=ge-oe;ie=(pt=(Te=Zt-(ae=(he=134217729*Zt)-(he-Zt)))*(Xe=br-(Le=(he=134217729*br)-(he-br)))-((Lt=Zt*br)-ae*Le-Te*Le-ae*Xe))-($e=pt-(vt=(Te=Gt-(ae=(he=134217729*Gt)-(he-Gt)))*(Xe=rr-(Le=(he=134217729*rr)-(he-rr)))-((Ot=Gt*rr)-ae*Le-Te*Le-ae*Xe))),g[0]=pt-($e+ie)+(ie-vt),ie=(_t=Lt-((at=Lt+$e)-(ie=at-Lt))+($e-ie))-($e=_t-Ot),g[1]=_t-($e+ie)+(ie-Ot),ie=(Ze=at+$e)-at,g[2]=at-(Ze-ie)+($e-ie),g[3]=Ze;let un=function(je,Ke){let qe=Ke[0];for(let mt=1;mt<je;mt++)qe+=Ke[mt];return qe}(4,g),ot=d*Ie;if(un>=ot||-un>=ot||(fe=W-(Zt+(ie=W-Zt))+(ie-be),K=me-(rr+(ie=me-rr))+(ie-be),G=Q-(Gt+(ie=Q-Gt))+(ie-oe),re=ge-(br+(ie=ge-br))+(ie-oe),fe===0&&G===0&&K===0&&re===0)||(ot=f*Ie+i*Math.abs(un),(un+=Zt*re+br*fe-(Gt*K+rr*G))>=ot||-un>=ot))return un;ie=(pt=(Te=fe-(ae=(he=134217729*fe)-(he-fe)))*(Xe=br-(Le=(he=134217729*br)-(he-br)))-((Lt=fe*br)-ae*Le-Te*Le-ae*Xe))-($e=pt-(vt=(Te=G-(ae=(he=134217729*G)-(he-G)))*(Xe=rr-(Le=(he=134217729*rr)-(he-rr)))-((Ot=G*rr)-ae*Le-Te*Le-ae*Xe))),L[0]=pt-($e+ie)+(ie-vt),ie=(_t=Lt-((at=Lt+$e)-(ie=at-Lt))+($e-ie))-($e=_t-Ot),L[1]=_t-($e+ie)+(ie-Ot),ie=(Ze=at+$e)-at,L[2]=at-(Ze-ie)+($e-ie),L[3]=Ze;const Oe=o(4,g,4,L,_);ie=(pt=(Te=Zt-(ae=(he=134217729*Zt)-(he-Zt)))*(Xe=re-(Le=(he=134217729*re)-(he-re)))-((Lt=Zt*re)-ae*Le-Te*Le-ae*Xe))-($e=pt-(vt=(Te=Gt-(ae=(he=134217729*Gt)-(he-Gt)))*(Xe=K-(Le=(he=134217729*K)-(he-K)))-((Ot=Gt*K)-ae*Le-Te*Le-ae*Xe))),L[0]=pt-($e+ie)+(ie-vt),ie=(_t=Lt-((at=Lt+$e)-(ie=at-Lt))+($e-ie))-($e=_t-Ot),L[1]=_t-($e+ie)+(ie-Ot),ie=(Ze=at+$e)-at,L[2]=at-(Ze-ie)+($e-ie),L[3]=Ze;const ve=o(Oe,_,4,L,b);ie=(pt=(Te=fe-(ae=(he=134217729*fe)-(he-fe)))*(Xe=re-(Le=(he=134217729*re)-(he-re)))-((Lt=fe*re)-ae*Le-Te*Le-ae*Xe))-($e=pt-(vt=(Te=G-(ae=(he=134217729*G)-(he-G)))*(Xe=K-(Le=(he=134217729*K)-(he-K)))-((Ot=G*K)-ae*Le-Te*Le-ae*Xe))),L[0]=pt-($e+ie)+(ie-vt),ie=(_t=Lt-((at=Lt+$e)-(ie=at-Lt))+($e-ie))-($e=_t-Ot),L[1]=_t-($e+ie)+(ie-Ot),ie=(Ze=at+$e)-at,L[2]=at-(Ze-ie)+($e-ie),L[3]=Ze;const xe=o(ve,b,4,L,P);return P[xe-1]}(R,$,F,T,x,N,Y)},r.orient2dfast=function(R,$,F,T,x,N){return($-N)*(F-x)-(R-x)*(T-N)},Object.defineProperty(r,"__esModule",{value:!0})})})(eM,eM.exports);var nse=eM.exports,J5=Hae,Nx=Qae,ise=rse,ose=nse.orient2d;Nx.default&&(Nx=Nx.default);ck.exports=QG;ck.exports.default=QG;function QG(e,t,r){t=Math.max(0,t===void 0?2:t),r=r||0;var n=cse(e),i=new J5(16);i.toBBox=function(T){return{minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]}},i.compareMinX=function(T,x){return T[0]-x[0]},i.compareMinY=function(T,x){return T[1]-x[1]},i.load(e);for(var o=[],s=0,a;s<n.length;s++){var d=n[s];i.remove(d),a=t6(d,a),o.push(a)}var f=new J5(16);for(s=0;s<o.length;s++)f.insert(mI(o[s]));for(var g=t*t,_=r*r;o.length;){var b=o.shift(),P=b.p,L=b.next.p,R=gI(P,L);if(!(R<_)){var $=R/g;d=ase(i,b.prev.p,P,L,b.next.next.p,$,f),d&&Math.min(gI(d,P),gI(d,L))<=$&&(o.push(b),o.push(t6(d,b)),i.remove(d),f.remove(b),f.insert(mI(b)),f.insert(mI(b.next)))}}b=a;var F=[];do F.push(b.p),b=b.next;while(b!==a);return F.push(b.p),F}function ase(e,t,r,n,i,o,s){for(var a=new Nx([],sse),d=e.data;d;){for(var f=0;f<d.children.length;f++){var g=d.children[f],_=d.leaf?vI(g,r,n):use(r,n,g);_>o||a.push({node:g,dist:_})}for(;a.length&&!a.peek().node.children;){var b=a.pop(),P=b.node,L=vI(P,t,r),R=vI(P,n,i);if(b.dist<L&&b.dist<R&&e6(r,P,s)&&e6(n,P,s))return P}d=a.pop(),d&&(d=d.node)}return null}function sse(e,t){return e.dist-t.dist}function use(e,t,r){if(Q5(e,r)||Q5(t,r))return 0;var n=Cb(e[0],e[1],t[0],t[1],r.minX,r.minY,r.maxX,r.minY);if(n===0)return 0;var i=Cb(e[0],e[1],t[0],t[1],r.minX,r.minY,r.minX,r.maxY);if(i===0)return 0;var o=Cb(e[0],e[1],t[0],t[1],r.maxX,r.minY,r.maxX,r.maxY);if(o===0)return 0;var s=Cb(e[0],e[1],t[0],t[1],r.minX,r.maxY,r.maxX,r.maxY);return s===0?0:Math.min(n,i,o,s)}function Q5(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function e6(e,t,r){for(var n=Math.min(e[0],t[0]),i=Math.min(e[1],t[1]),o=Math.max(e[0],t[0]),s=Math.max(e[1],t[1]),a=r.search({minX:n,minY:i,maxX:o,maxY:s}),d=0;d<a.length;d++)if(lse(a[d].p,a[d].next.p,e,t))return!1;return!0}function tg(e,t,r){return ose(e[0],e[1],t[0],t[1],r[0],r[1])}function lse(e,t,r,n){return e!==n&&t!==r&&tg(e,t,r)>0!=tg(e,t,n)>0&&tg(r,n,e)>0!=tg(r,n,t)>0}function mI(e){var t=e.p,r=e.next.p;return e.minX=Math.min(t[0],r[0]),e.minY=Math.min(t[1],r[1]),e.maxX=Math.max(t[0],r[0]),e.maxY=Math.max(t[1],r[1]),e}function cse(e){for(var t=e[0],r=e[0],n=e[0],i=e[0],o=0;o<e.length;o++){var s=e[o];s[0]<t[0]&&(t=s),s[0]>n[0]&&(n=s),s[1]<r[1]&&(r=s),s[1]>i[1]&&(i=s)}var a=[t,r,n,i],d=a.slice();for(o=0;o<e.length;o++)ise(e[o],a)||d.push(e[o]);return hse(d)}function t6(e,t){var r={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function gI(e,t){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function vI(e,t,r){var n=t[0],i=t[1],o=r[0]-n,s=r[1]-i;if(o!==0||s!==0){var a=((e[0]-n)*o+(e[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return o=e[0]-n,s=e[1]-i,o*o+s*s}function Cb(e,t,r,n,i,o,s,a){var d=r-e,f=n-t,g=s-i,_=a-o,b=e-i,P=t-o,L=d*d+f*f,R=d*g+f*_,$=g*g+_*_,F=d*b+f*P,T=g*b+_*P,x=L*$-R*R,N,B,H,Z,Y=x,W=x;x===0?(B=0,Y=1,Z=T,W=$):(B=R*T-$*F,Z=L*T-R*F,B<0?(B=0,Z=T,W=$):B>Y&&(B=Y,Z=T+R,W=$)),Z<0?(Z=0,-F<0?B=0:-F>L?B=Y:(B=-F,Y=L)):Z>W&&(Z=W,-F+R<0?B=0:-F+R>L?B=Y:(B=-F+R,Y=L)),N=B===0?0:B/Y,H=Z===0?0:Z/W;var Q=(1-N)*e+N*r,me=(1-N)*t+N*n,ge=(1-H)*i+H*s,be=(1-H)*o+H*a,oe=ge-Q,Ie=be-me;return oe*oe+Ie*Ie}function fse(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function hse(e){e.sort(fse);for(var t=[],r=0;r<e.length;r++){for(;t.length>=2&&tg(t[t.length-2],t[t.length-1],e[r])<=0;)t.pop();t.push(e[r])}for(var n=[],i=e.length-1;i>=0;i--){for(;n.length>=2&&tg(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}return n.pop(),t.pop(),t.concat(n)}var dse=ck.exports,pse=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(WE,"__esModule",{value:!0});var mse=Vt,gse=ur,vse=pse(dse);function yse(e,t){t===void 0&&(t={}),t.concavity=t.concavity||1/0;var r=[];if(gse.coordEach(e,function(i){r.push([i[0],i[1]])}),!r.length)return null;var n=vse.default(r,t.concavity);return n.length>3?mse.polygon([n]):null}WE.default=yse;var fk={exports:{}},nu={};Object.defineProperty(nu,"__esModule",{value:!0});var r6=Er;function _se(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=r6.getCoord(e),i=r6.getGeom(t),o=i.type,s=t.bbox,a=i.coordinates;if(s&&bse(n,s)===!1)return!1;o==="Polygon"&&(a=[a]);for(var d=!1,f=0;f<a.length&&!d;f++)if(n6(n,a[f][0],r.ignoreBoundary)){for(var g=!1,_=1;_<a[f].length&&!g;)n6(n,a[f][_],!r.ignoreBoundary)&&(g=!0),_++;g||(d=!0)}return d}nu.default=_se;function n6(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var s=t[i][0],a=t[i][1],d=t[o][0],f=t[o][1],g=e[1]*(s-d)+a*(d-e[0])+f*(e[0]-s)===0&&(s-e[0])*(d-e[0])<=0&&(a-e[1])*(f-e[1])<=0;if(g)return!r;var _=a>e[1]!=f>e[1]&&e[0]<(d-s)*(e[1]-a)/(f-a)+s;_&&(n=!n)}return n}function bse(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var xse=nu,i6=Vt,Ib=ur;function wse(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var o6=wse(xse);function eq(e,t){var r=[];return Ib.featureEach(e,function(n){var i=!1;if(n.geometry.type==="Point")Ib.geomEach(t,function(s){o6.default(n,s)&&(i=!0)}),i&&r.push(n);else if(n.geometry.type==="MultiPoint"){var o=[];Ib.geomEach(t,function(s){Ib.coordEach(n,function(a){o6.default(a,s)&&(i=!0,o.push(a))})}),i&&r.push(i6.multiPoint(o))}else throw new Error("Input geometry must be a Point or MultiPoint")}),i6.featureCollection(r)}fk.exports=eq;fk.exports.default=eq;var tq=fk.exports,hk={},wa={};Object.defineProperty(wa,"__esModule",{value:!0});var a6=Er,iy=Vt;function Ese(e,t,r){r===void 0&&(r={});var n=a6.getCoord(e),i=a6.getCoord(t),o=iy.degreesToRadians(i[1]-n[1]),s=iy.degreesToRadians(i[0]-n[0]),a=iy.degreesToRadians(n[1]),d=iy.degreesToRadians(i[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(d);return iy.radiansToLength(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r.units)}wa.default=Ese;var YE={};Object.defineProperty(YE,"__esModule",{value:!0});var s6=Vt;function Sse(e,t){var r=!1;return s6.featureCollection(Cse(e.features.map(function(n){var i={x:n.geometry.coordinates[0],y:n.geometry.coordinates[1]};return t?i.z=n.properties[t]:n.geometry.coordinates.length===3&&(r=!0,i.z=n.geometry.coordinates[2]),i})).map(function(n){var i=[n.a.x,n.a.y],o=[n.b.x,n.b.y],s=[n.c.x,n.c.y],a={};return r?(i.push(n.a.z),o.push(n.b.z),s.push(n.c.z)):a={a:n.a.z,b:n.b.z,c:n.c.z},s6.polygon([[i,o,s,i]],a)}))}YE.default=Sse;var u6=function(){function e(t,r,n){this.a=t,this.b=r,this.c=n;var i=r.x-t.x,o=r.y-t.y,s=n.x-t.x,a=n.y-t.y,d=i*(t.x+r.x)+o*(t.y+r.y),f=s*(t.x+n.x)+a*(t.y+n.y),g=2*(i*(n.y-r.y)-o*(n.x-r.x)),_,b;this.x=(a*d-o*f)/g,this.y=(i*f-s*d)/g,_=this.x-t.x,b=this.y-t.y,this.r=_*_+b*b}return e}();function Pse(e,t){return t.x-e.x}function Ase(e){var t=e.length,r,n,i,o,s;e:for(;t;)for(n=e[--t],r=e[--t],i=t;i;)if(s=e[--i],o=e[--i],r===o&&n===s||r===s&&n===o){e.splice(t,2),e.splice(i,2),t-=2;continue e}}function Cse(e){if(e.length<3)return[];e.sort(Pse);for(var t=e.length-1,r=e[t].x,n=e[0].x,i=e[t].y,o=i,s=1e-12,a,d,f,g,_,b;t--;)e[t].y<i&&(i=e[t].y),e[t].y>o&&(o=e[t].y);var P=n-r,L=o-i,R=P>L?P:L,$=(n+r)*.5,F=(o+i)*.5,T=[new u6({__sentinel:!0,x:$-20*R,y:F-R},{__sentinel:!0,x:$,y:F+20*R},{__sentinel:!0,x:$+20*R,y:F-R})],x=[],N=[],B;for(t=e.length;t--;){for(N.length=0,B=T.length;B--;){if(P=e[t].x-T[B].x,P>0&&P*P>T[B].r){x.push(T[B]),T.splice(B,1);continue}L=e[t].y-T[B].y,!(P*P+L*L>T[B].r)&&(N.push(T[B].a,T[B].b,T[B].b,T[B].c,T[B].c,T[B].a),T.splice(B,1))}for(Ase(N),B=N.length;B;)d=N[--B],a=N[--B],f=e[t],g=d.x-a.x,_=d.y-a.y,b=2*(g*(f.y-d.y)-_*(f.x-d.x)),Math.abs(b)>s&&T.push(new u6(a,d,f))}for(Array.prototype.push.apply(x,T),t=x.length;t--;)(x[t].a.__sentinel||x[t].b.__sentinel||x[t].c.__sentinel)&&x.splice(t,1);return x}var dk={},ja={};Object.defineProperty(ja,"__esModule",{value:!0});function Ise(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return rq(e);case"FeatureCollection":return Ose(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return pk(e);default:throw new Error("unknown GeoJSON type")}}function rq(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=nq(e.properties),t.geometry=pk(e.geometry),t}function nq(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(i){return i}):t[r]=nq(n):t[r]=n}),t}function Ose(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return rq(r)}),t}function pk(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return pk(r)}),t):(t.coordinates=iq(e.coordinates),t)}function iq(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return iq(r)})}ja.default=Ise;var mk={},Tse=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mk,"__esModule",{value:!0});var Mse=Tse(ja),tM=Vt,Lse=Er,Rse=ur;function kse(e,t){if(t===void 0&&(t={}),t=t||{},!tM.isObject(t))throw new Error("options is invalid");var r=t.mutate;if(Lse.getType(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(r===!1||r===void 0)&&(e=Mse.default(e));var n=[],i=Rse.lineReduce(e,function(o,s){var a=Dse(o,s);return a||(n.push(o),s)});return i&&n.push(i),n.length?n.length===1?n[0]:tM.multiLineString(n.map(function(o){return o.coordinates})):null}function Ob(e){return e[0].toString()+","+e[1].toString()}function Dse(e,t){var r=e.geometry.coordinates,n=t.geometry.coordinates,i=Ob(r[0]),o=Ob(r[r.length-1]),s=Ob(n[0]),a=Ob(n[n.length-1]),d;if(i===a)d=n.concat(r.slice(1));else if(s===o)d=r.concat(n.slice(1));else if(i===s)d=r.slice(1).reverse().concat(n);else if(o===a)d=r.concat(n.reverse().slice(1));else return null;return tM.lineString(d)}mk.default=kse;var gk={};function oq(e){return e}function vk(e){if(e==null)return oq;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,d){d||(t=r=0);var f=2,g=a.length,_=new Array(g);for(_[0]=(t+=a[0])*n+o,_[1]=(r+=a[1])*i+s;f<g;)_[f]=a[f],++f;return _}}function aq(e){var t=vk(e.transform),r,n=1/0,i=n,o=-n,s=-n;function a(f){f=t(f),f[0]<n&&(n=f[0]),f[0]>o&&(o=f[0]),f[1]<i&&(i=f[1]),f[1]>s&&(s=f[1])}function d(f){switch(f.type){case"GeometryCollection":f.geometries.forEach(d);break;case"Point":a(f.coordinates);break;case"MultiPoint":f.coordinates.forEach(a);break}}e.arcs.forEach(function(f){for(var g=-1,_=f.length,b;++g<_;)b=t(f[g],g),b[0]<n&&(n=b[0]),b[0]>o&&(o=b[0]),b[1]<i&&(i=b[1]),b[1]>s&&(s=b[1])});for(r in e.objects)d(e.objects[r]);return[n,i,o,s]}function Nse(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}function Fse(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return l6(e,r)})}:l6(e,t)}function l6(e,t){var r=t.id,n=t.bbox,i=t.properties==null?{}:t.properties,o=HE(e,t);return r==null&&n==null?{type:"Feature",properties:i,geometry:o}:n==null?{type:"Feature",id:r,properties:i,geometry:o}:{type:"Feature",id:r,bbox:n,properties:i,geometry:o}}function HE(e,t){var r=vk(e.transform),n=e.arcs;function i(g,_){_.length&&_.pop();for(var b=n[g<0?~g:g],P=0,L=b.length;P<L;++P)_.push(r(b[P],P));g<0&&Nse(_,L)}function o(g){return r(g)}function s(g){for(var _=[],b=0,P=g.length;b<P;++b)i(g[b],_);return _.length<2&&_.push(_[0]),_}function a(g){for(var _=s(g);_.length<4;)_.push(_[0]);return _}function d(g){return g.map(a)}function f(g){var _=g.type,b;switch(_){case"GeometryCollection":return{type:_,geometries:g.geometries.map(f)};case"Point":b=o(g.coordinates);break;case"MultiPoint":b=g.coordinates.map(o);break;case"LineString":b=s(g.arcs);break;case"MultiLineString":b=g.arcs.map(s);break;case"Polygon":b=d(g.arcs);break;case"MultiPolygon":b=g.arcs.map(d);break;default:return null}return{type:_,coordinates:b}}return f(t)}function sq(e,t){var r={},n={},i={},o=[],s=-1;t.forEach(function(f,g){var _=e.arcs[f<0?~f:f],b;_.length<3&&!_[1][0]&&!_[1][1]&&(b=t[++s],t[s]=f,t[g]=b)}),t.forEach(function(f){var g=a(f),_=g[0],b=g[1],P,L;if(P=i[_])if(delete i[P.end],P.push(f),P.end=b,L=n[b]){delete n[L.start];var R=L===P?P:P.concat(L);n[R.start=P.start]=i[R.end=L.end]=R}else n[P.start]=i[P.end]=P;else if(P=n[b])if(delete n[P.start],P.unshift(f),P.start=_,L=i[_]){delete i[L.end];var $=L===P?P:L.concat(P);n[$.start=L.start]=i[$.end=P.end]=$}else n[P.start]=i[P.end]=P;else P=[f],n[P.start=_]=i[P.end=b]=P});function a(f){var g=e.arcs[f<0?~f:f],_=g[0],b;return e.transform?(b=[0,0],g.forEach(function(P){b[0]+=P[0],b[1]+=P[1]})):b=g[g.length-1],f<0?[b,_]:[_,b]}function d(f,g){for(var _ in f){var b=f[_];delete g[b.start],delete b.start,delete b.end,b.forEach(function(P){r[P<0?~P:P]=1}),o.push(b)}}return d(i,n),d(n,i),t.forEach(function(f){r[f<0?~f:f]||o.push([f])}),o}function $se(e){return HE(e,uq.apply(this,arguments))}function uq(e,t,r){var n,i,o;if(arguments.length>1)n=zse(e,t,r);else for(i=0,n=new Array(o=e.arcs.length);i<o;++i)n[i]=i;return{type:"MultiLineString",arcs:sq(e,n)}}function zse(e,t,r){var n=[],i=[],o;function s(_){var b=_<0?~_:_;(i[b]||(i[b]=[])).push({i:_,g:o})}function a(_){_.forEach(s)}function d(_){_.forEach(a)}function f(_){_.forEach(d)}function g(_){switch(o=_,_.type){case"GeometryCollection":_.geometries.forEach(g);break;case"LineString":a(_.arcs);break;case"MultiLineString":case"Polygon":d(_.arcs);break;case"MultiPolygon":f(_.arcs);break}}return g(t),i.forEach(r==null?function(_){n.push(_[0].i)}:function(_){r(_[0].g,_[_.length-1].g)&&n.push(_[0].i)}),n}function Bse(e){for(var t=-1,r=e.length,n,i=e[r-1],o=0;++t<r;)n=i,i=e[t],o+=n[0]*i[1]-n[1]*i[0];return Math.abs(o)}function jse(e){return HE(e,lq.apply(this,arguments))}function lq(e,t){var r={},n=[],i=[];t.forEach(o);function o(d){switch(d.type){case"GeometryCollection":d.geometries.forEach(o);break;case"Polygon":s(d.arcs);break;case"MultiPolygon":d.arcs.forEach(s);break}}function s(d){d.forEach(function(f){f.forEach(function(g){(r[g=g<0?~g:g]||(r[g]=[])).push(d)})}),n.push(d)}function a(d){return Bse(HE(e,{type:"Polygon",arcs:[d]}).coordinates[0])}return n.forEach(function(d){if(!d._){var f=[],g=[d];for(d._=1,i.push(f);d=g.pop();)f.push(d),d.forEach(function(_){_.forEach(function(b){r[b<0?~b:b].forEach(function(P){P._||(P._=1,g.push(P))})})})}}),n.forEach(function(d){delete d._}),{type:"MultiPolygon",arcs:i.map(function(d){var f=[],g;if(d.forEach(function(R){R.forEach(function($){$.forEach(function(F){r[F<0?~F:F].length<2&&f.push(F)})})}),f=sq(e,f),(g=f.length)>1)for(var _=1,b=a(f[0]),P,L;_<g;++_)(P=a(f[_]))>b&&(L=f[0],f[0]=f[_],f[_]=L,b=P);return f}).filter(function(d){return d.length>0})}}function c6(e,t){for(var r=0,n=e.length;r<n;){var i=r+n>>>1;e[i]<t?r=i+1:n=i}return r}function Use(e){var t={},r=e.map(function(){return[]});function n(R,$){R.forEach(function(F){F<0&&(F=~F);var T=t[F];T?T.push($):t[F]=[$]})}function i(R,$){R.forEach(function(F){n(F,$)})}function o(R,$){R.type==="GeometryCollection"?R.geometries.forEach(function(F){o(F,$)}):R.type in s&&s[R.type](R.arcs,$)}var s={LineString:n,MultiLineString:i,Polygon:i,MultiPolygon:function(R,$){R.forEach(function(F){i(F,$)})}};e.forEach(o);for(var a in t)for(var d=t[a],f=d.length,g=0;g<f;++g)for(var _=g+1;_<f;++_){var b=d[g],P=d[_],L;(L=r[b])[a=c6(L,P)]!==P&&L.splice(a,0,P),(L=r[P])[a=c6(L,b)]!==b&&L.splice(a,0,b)}return r}function cq(e){if(e==null)return oq;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,d){d||(t=r=0);var f=2,g=a.length,_=new Array(g),b=Math.round((a[0]-o)/n),P=Math.round((a[1]-s)/i);for(_[0]=b-t,t=b,_[1]=P-r,r=P;f<g;)_[f]=a[f],++f;return _}}function Vse(e,t){if(e.transform)throw new Error("already quantized");if(!t||!t.scale){if(!((s=Math.floor(t))>=2))throw new Error("n must be 2");d=e.bbox||aq(e);var r=d[0],n=d[1],i=d[2],o=d[3],s;t={scale:[i-r?(i-r)/(s-1):1,o-n?(o-n)/(s-1):1],translate:[r,n]}}else d=e.bbox;var a=cq(t),d,f,g=e.objects,_={};function b(R){return a(R)}function P(R){var $;switch(R.type){case"GeometryCollection":$={type:"GeometryCollection",geometries:R.geometries.map(P)};break;case"Point":$={type:"Point",coordinates:b(R.coordinates)};break;case"MultiPoint":$={type:"MultiPoint",coordinates:R.coordinates.map(b)};break;default:return R}return R.id!=null&&($.id=R.id),R.bbox!=null&&($.bbox=R.bbox),R.properties!=null&&($.properties=R.properties),$}function L(R){var $=0,F=1,T=R.length,x,N=new Array(T);for(N[0]=a(R[0],0);++$<T;)((x=a(R[$],$))[0]||x[1])&&(N[F++]=x);return F===1&&(N[F++]=[0,0]),N.length=F,N}for(f in g)_[f]=P(g[f]);return{type:"Topology",bbox:d,transform:t,objects:_,arcs:e.arcs.map(L)}}const Gse=Object.freeze(Object.defineProperty({__proto__:null,bbox:aq,feature:Fse,merge:jse,mergeArcs:lq,mesh:$se,meshArcs:uq,neighbors:Use,quantize:Vse,transform:vk,untransform:cq},Symbol.toStringTag,{value:"Module"})),qse=Yg(Gse);var ZE=Object.prototype.hasOwnProperty;function Wse(e){var t=1/0,r=1/0,n=-1/0,i=-1/0;function o(_){_!=null&&ZE.call(s,_.type)&&s[_.type](_)}var s={GeometryCollection:function(_){_.geometries.forEach(o)},Point:function(_){a(_.coordinates)},MultiPoint:function(_){_.coordinates.forEach(a)},LineString:function(_){d(_.arcs)},MultiLineString:function(_){_.arcs.forEach(d)},Polygon:function(_){_.arcs.forEach(d)},MultiPolygon:function(_){_.arcs.forEach(f)}};function a(_){var b=_[0],P=_[1];b<t&&(t=b),b>n&&(n=b),P<r&&(r=P),P>i&&(i=P)}function d(_){_.forEach(a)}function f(_){_.forEach(d)}for(var g in e)o(e[g]);return n>=t&&i>=r?[t,r,n,i]:void 0}function Xse(e,t,r,n,i){arguments.length===3&&(n=Array,i=null);for(var o=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),s=e-1,a=0;a<e;++a)o[a]=i;function d(_){for(var b=t(_)&s,P=o[b],L=0;P!=i;){if(r(P,_))return!0;if(++L>=e)throw new Error("full hashset");P=o[b=b+1&s]}return o[b]=_,!0}function f(_){for(var b=t(_)&s,P=o[b],L=0;P!=i;){if(r(P,_))return!0;if(++L>=e)break;P=o[b=b+1&s]}return!1}function g(){for(var _=[],b=0,P=o.length;b<P;++b){var L=o[b];L!=i&&_.push(L)}return _}return{add:d,has:f,values:g}}function yk(e,t,r,n,i,o){arguments.length===3&&(n=o=Array,i=null);for(var s=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),a=new o(e),d=e-1,f=0;f<e;++f)s[f]=i;function g(L,R){for(var $=t(L)&d,F=s[$],T=0;F!=i;){if(r(F,L))return a[$]=R;if(++T>=e)throw new Error("full hashmap");F=s[$=$+1&d]}return s[$]=L,a[$]=R,R}function _(L,R){for(var $=t(L)&d,F=s[$],T=0;F!=i;){if(r(F,L))return a[$];if(++T>=e)throw new Error("full hashmap");F=s[$=$+1&d]}return s[$]=L,a[$]=R,R}function b(L,R){for(var $=t(L)&d,F=s[$],T=0;F!=i;){if(r(F,L))return a[$];if(++T>=e)break;F=s[$=$+1&d]}return R}function P(){for(var L=[],R=0,$=s.length;R<$;++R){var F=s[R];F!=i&&L.push(F)}return L}return{set:g,maybeSet:_,get:b,keys:P}}function Zd(e,t){return e[0]===t[0]&&e[1]===t[1]}var fq=new ArrayBuffer(16),f6=new Float64Array(fq),Tb=new Uint32Array(fq);function rM(e){f6[0]=e[0],f6[1]=e[1];var t=Tb[0]^Tb[1];return t=t<<5^t>>7^Tb[2]^Tb[3],t&2147483647}function Yse(e){var t=e.coordinates,r=e.lines,n=e.rings,i=H(),o=new Int32Array(t.length),s=new Int32Array(t.length),a=new Int32Array(t.length),d=new Int8Array(t.length),f=0,g,_,b,P,L;for(g=0,_=t.length;g<_;++g)o[g]=s[g]=a[g]=-1;for(g=0,_=r.length;g<_;++g){var R=r[g],$=R[0],F=R[1];for(P=i[$],L=i[++$],++f,d[P]=1;++$<=F;)B(g,b=P,P=L,L=i[$]);++f,d[L]=1}for(g=0,_=t.length;g<_;++g)o[g]=-1;for(g=0,_=n.length;g<_;++g){var T=n[g],x=T[0]+1,N=T[1];for(b=i[N-1],P=i[x-1],L=i[x],B(g,b,P,L);++x<=N;)B(g,b=P,P=L,L=i[x])}function B(me,ge,be,oe){if(o[be]!==me){o[be]=me;var Ie=s[be];if(Ie>=0){var fe=a[be];(Ie!==ge||fe!==oe)&&(Ie!==oe||fe!==ge)&&(++f,d[be]=1)}else s[be]=ge,a[be]=oe}}function H(){for(var me=yk(t.length*1.4,Z,Y,Int32Array,-1,Int32Array),ge=new Int32Array(t.length),be=0,oe=t.length;be<oe;++be)ge[be]=me.maybeSet(be,be);return ge}function Z(me){return rM(t[me])}function Y(me,ge){return Zd(t[me],t[ge])}o=s=a=null;var W=Xse(f*1.4,rM,Zd),Q;for(g=0,_=t.length;g<_;++g)d[Q=i[g]]&&W.add(t[Q]);return W}function Hse(e){var t=Yse(e),r=e.coordinates,n=e.lines,i=e.rings,o,s,a;for(s=0,a=n.length;s<a;++s)for(var d=n[s],f=d[0],g=d[1];++f<g;)t.has(r[f])&&(o={0:f,1:d[1]},d[1]=f,d=d.next=o);for(s=0,a=i.length;s<a;++s)for(var _=i[s],b=_[0],P=b,L=_[1],R=t.has(r[b]);++P<L;)t.has(r[P])&&(R?(o={0:P,1:_[1]},_[1]=P,_=_.next=o):(Zse(r,b,L,L-P),r[L]=r[b],R=!0,P=b));return e}function Zse(e,t,r,n){yI(e,t,r),yI(e,t,t+n),yI(e,t+n,r)}function yI(e,t,r){for(var n=t+(r---t>>1),i;t<n;++t,--r)i=e[t],e[t]=e[r],e[r]=i}function Kse(e){var t=e.coordinates,r=e.lines,n,i=e.rings,o,s=r.length+i.length,a,d;for(delete e.lines,delete e.rings,a=0,d=r.length;a<d;++a)for(n=r[a];n=n.next;)++s;for(a=0,d=i.length;a<d;++a)for(o=i[a];o=o.next;)++s;var f=yk(s*2*1.4,rM,Zd),g=e.arcs=[];for(a=0,d=r.length;a<d;++a){n=r[a];do _(n);while(n=n.next)}for(a=0,d=i.length;a<d;++a)if(o=i[a],o.next)do _(o);while(o=o.next);else b(o);function _(T){var x,N,B,H,Z,Y,W,Q;if(B=f.get(x=t[T[0]])){for(W=0,Q=B.length;W<Q;++W)if(H=B[W],P(H,T)){T[0]=H[0],T[1]=H[1];return}}if(Z=f.get(N=t[T[1]])){for(W=0,Q=Z.length;W<Q;++W)if(Y=Z[W],L(Y,T)){T[1]=Y[0],T[0]=Y[1];return}}B?B.push(T):f.set(x,[T]),Z?Z.push(T):f.set(N,[T]),g.push(T)}function b(T){var x,N,B,H,Z;if(N=f.get(x=t[T[0]]))for(H=0,Z=N.length;H<Z;++H){if(B=N[H],R(B,T)){T[0]=B[0],T[1]=B[1];return}if($(B,T)){T[0]=B[1],T[1]=B[0];return}}if(N=f.get(x=t[T[0]+F(T)]))for(H=0,Z=N.length;H<Z;++H){if(B=N[H],R(B,T)){T[0]=B[0],T[1]=B[1];return}if($(B,T)){T[0]=B[1],T[1]=B[0];return}}N?N.push(T):f.set(x,[T]),g.push(T)}function P(T,x){var N=T[0],B=x[0],H=T[1],Z=x[1];if(N-H!==B-Z)return!1;for(;N<=H;++N,++B)if(!Zd(t[N],t[B]))return!1;return!0}function L(T,x){var N=T[0],B=x[0],H=T[1],Z=x[1];if(N-H!==B-Z)return!1;for(;N<=H;++N,--Z)if(!Zd(t[N],t[Z]))return!1;return!0}function R(T,x){var N=T[0],B=x[0],H=T[1],Z=x[1],Y=H-N;if(Y!==Z-B)return!1;for(var W=F(T),Q=F(x),me=0;me<Y;++me)if(!Zd(t[N+(me+W)%Y],t[B+(me+Q)%Y]))return!1;return!0}function $(T,x){var N=T[0],B=x[0],H=T[1],Z=x[1],Y=H-N;if(Y!==Z-B)return!1;for(var W=F(T),Q=Y-F(x),me=0;me<Y;++me)if(!Zd(t[N+(me+W)%Y],t[Z-(me+Q)%Y]))return!1;return!0}function F(T){for(var x=T[0],N=T[1],B=x,H=B,Z=t[B];++B<N;){var Y=t[B];(Y[0]<Z[0]||Y[0]===Z[0]&&Y[1]<Z[1])&&(H=B,Z=Y)}return H-x}return e}function Jse(e){for(var t=-1,r=e.length;++t<r;){for(var n=e[t],i=0,o=1,s=n.length,a=n[0],d=a[0],f=a[1],g,_;++i<s;)a=n[i],g=a[0],_=a[1],(g!==d||_!==f)&&(n[o++]=[g-d,_-f],d=g,f=_);o===1&&(n[o++]=[0,0]),n.length=o}return e}function Qse(e){var t=-1,r=[],n=[],i=[];function o(_){_&&ZE.call(s,_.type)&&s[_.type](_)}var s={GeometryCollection:function(_){_.geometries.forEach(o)},LineString:function(_){_.arcs=a(_.arcs)},MultiLineString:function(_){_.arcs=_.arcs.map(a)},Polygon:function(_){_.arcs=_.arcs.map(d)},MultiPolygon:function(_){_.arcs=_.arcs.map(f)}};function a(_){for(var b=0,P=_.length;b<P;++b)i[++t]=_[b];var L={0:t-P+1,1:t};return r.push(L),L}function d(_){for(var b=0,P=_.length;b<P;++b)i[++t]=_[b];var L={0:t-P+1,1:t};return n.push(L),L}function f(_){return _.map(d)}for(var g in e)o(e[g]);return{type:"Topology",coordinates:i,lines:r,rings:n,objects:e}}function eue(e){var t={},r;for(r in e)t[r]=tue(e[r]);return t}function tue(e){return e==null?{type:null}:(e.type==="FeatureCollection"?rue:e.type==="Feature"?hq:_k)(e)}function rue(e){var t={type:"GeometryCollection",geometries:e.features.map(hq)};return e.bbox!=null&&(t.bbox=e.bbox),t}function hq(e){var t=_k(e.geometry),r;e.id!=null&&(t.id=e.id),e.bbox!=null&&(t.bbox=e.bbox);for(r in e.properties){t.properties=e.properties;break}return t}function _k(e){if(e==null)return{type:null};var t=e.type==="GeometryCollection"?{type:"GeometryCollection",geometries:e.geometries.map(_k)}:e.type==="Point"||e.type==="MultiPoint"?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return e.bbox!=null&&(t.bbox=e.bbox),t}function nue(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=o-n?(r-1)/(o-n):1,d=s-i?(r-1)/(s-i):1;function f(F){return[Math.round((F[0]-n)*a),Math.round((F[1]-i)*d)]}function g(F,T){for(var x=-1,N=0,B=F.length,H=new Array(B),Z,Y,W,Q,me;++x<B;)Z=F[x],Q=Math.round((Z[0]-n)*a),me=Math.round((Z[1]-i)*d),(Q!==Y||me!==W)&&(H[N++]=[Y=Q,W=me]);for(H.length=N;N<T;)N=H.push([H[0][0],H[0][1]]);return H}function _(F){return g(F,2)}function b(F){return g(F,4)}function P(F){return F.map(b)}function L(F){F!=null&&ZE.call(R,F.type)&&R[F.type](F)}var R={GeometryCollection:function(F){F.geometries.forEach(L)},Point:function(F){F.coordinates=f(F.coordinates)},MultiPoint:function(F){F.coordinates=F.coordinates.map(f)},LineString:function(F){F.arcs=_(F.arcs)},MultiLineString:function(F){F.arcs=F.arcs.map(_)},Polygon:function(F){F.arcs=P(F.arcs)},MultiPolygon:function(F){F.arcs=F.arcs.map(P)}};for(var $ in e)L(e[$]);return{scale:[1/a,1/d],translate:[n,i]}}function iue(e,t){var r=Wse(e=eue(e)),n=t>0&&r&&nue(e,r,t),i=Kse(Hse(Qse(e))),o=i.coordinates,s=yk(i.arcs.length*1.4,oue,aue);e=i.objects,i.bbox=r,i.arcs=i.arcs.map(function(b,P){return s.set(b,P),o.slice(b[0],b[1]+1)}),delete i.coordinates,o=null;function a(b){b&&ZE.call(d,b.type)&&d[b.type](b)}var d={GeometryCollection:function(b){b.geometries.forEach(a)},LineString:function(b){b.arcs=f(b.arcs)},MultiLineString:function(b){b.arcs=b.arcs.map(f)},Polygon:function(b){b.arcs=b.arcs.map(f)},MultiPolygon:function(b){b.arcs=b.arcs.map(g)}};function f(b){var P=[];do{var L=s.get(b);P.push(b[0]<b[1]?L:~L)}while(b=b.next);return P}function g(b){return b.map(f)}for(var _ in e)a(e[_]);return n&&(i.transform=n,i.arcs=Jse(i.arcs)),i}function oue(e){var t=e[0],r=e[1],n;return r<t&&(n=t,t=r,r=n),t+31*r}function aue(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],s;return n<r&&(s=r,r=n,n=s),o<i&&(s=i,i=o,o=s),r===i&&n===o}const sue=Object.freeze(Object.defineProperty({__proto__:null,topology:iue},Symbol.toStringTag,{value:"Module"})),uue=Yg(sue);var lue=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gk,"__esModule",{value:!0});var cue=lue(ja),fue=Vt,hue=Er,due=ur,pue=qse,mue=uue;function gue(e,t){if(t===void 0&&(t={}),hue.getType(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(t.mutate===!1||t.mutate===void 0)&&(e=cue.default(e));var r=[];due.flattenEach(e,function(o){r.push(o.geometry)});var n=mue.topology({geoms:fue.geometryCollection(r).geometry}),i=pue.merge(n,n.objects.geoms.geometries);return i}gk.default=gue;var bk=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dk,"__esModule",{value:!0});var vue=bk(ja),yue=Vt,_ue=Er,bue=ur,xue=bk(mk),wue=bk(gk);function Eue(e,t){if(t===void 0&&(t={}),t=t||{},!yue.isObject(t))throw new Error("options is invalid");var r=t.mutate;if(_ue.getType(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(r===!1||r===void 0)&&(e=vue.default(e));var n=Sue(e);if(!n)throw new Error("geojson must be homogenous");var i=e;switch(n){case"LineString":return xue.default(i,t);case"Polygon":return wue.default(i,t);default:throw new Error(n+" is not supported")}}function Sue(e){var t={};bue.flattenEach(e,function(n){t[n.geometry.type]=!0});var r=Object.keys(t);return r.length===1?r[0]:null}dk.default=Eue;var xk=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hk,"__esModule",{value:!0});var _I=xk(wa),dq=Vt,Pue=ur,Aue=xk(YE),Cue=xk(dk);function Iue(e,t){t===void 0&&(t={});var r=t.maxEdge||1/0,n=Oue(e),i=Aue.default(n);if(i.features=i.features.filter(function(s){var a=s.geometry.coordinates[0][0],d=s.geometry.coordinates[0][1],f=s.geometry.coordinates[0][2],g=_I.default(a,d,t),_=_I.default(d,f,t),b=_I.default(a,f,t);return g<=r&&_<=r&&b<=r}),i.features.length<1)return null;var o=Cue.default(i);return o.coordinates.length===1&&(o.coordinates=o.coordinates[0],o.type="Polygon"),dq.feature(o)}function Oue(e){var t=[],r={};return Pue.featureEach(e,function(n){if(n.geometry){var i=n.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,i)||(t.push(n),r[i]=!0)}}),dq.featureCollection(t)}hk.default=Iue;var wk={},Ek={exports:{}},pq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Pe,function(){function r(s,a,d,f,g){n(s,a,d||0,f||s.length-1,g||o)}function n(s,a,d,f,g){for(;f>d;){if(f-d>600){var _=f-d+1,b=a-d+1,P=Math.log(_),L=.5*Math.exp(2*P/3),R=.5*Math.sqrt(P*L*(_-L)/_)*(b-_/2<0?-1:1),$=Math.max(d,Math.floor(a-b*L/_+R)),F=Math.min(f,Math.floor(a+(_-b)*L/_+R));n(s,a,$,F,g)}var T=s[a],x=d,N=f;for(i(s,d,a),g(s[f],T)>0&&i(s,d,f);x<N;){for(i(s,x,N),x++,N--;g(s[x],T)<0;)x++;for(;g(s[N],T)>0;)N--}g(s[d],T)===0?i(s,d,N):(N++,i(s,N,f)),N<=a&&(d=N+1),a<=N&&(f=N-1)}}function i(s,a,d){var f=s[a];s[a]=s[d],s[d]=f}function o(s,a){return s<a?-1:s>a?1:0}return r})})(pq);var Tue=pq.exports;Ek.exports=F0;Ek.exports.default=F0;var Mue=Tue;function F0(e,t){if(!(this instanceof F0))return new F0(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}F0.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!Lb(e,t))return r;for(var i=[],o,s,a,d;t;){for(o=0,s=t.children.length;o<s;o++)a=t.children[o],d=t.leaf?n(a):a,Lb(e,d)&&(t.leaf?r.push(a):xI(e,d)?this._all(a,r):i.push(a));t=i.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!Lb(e,t))return!1;for(var n=[],i,o,s,a;t;){for(i=0,o=t.children.length;i<o;i++)if(s=t.children[i],a=t.leaf?r(s):s,Lb(e,a)){if(t.leaf||xI(e,a))return!0;n.push(s)}t=n.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Bm([]),this},remove:function(e,t){if(!e)return this;for(var r=this.data,n=this.toBBox(e),i=[],o=[],s,a,d,f;r||i.length;){if(r||(r=i.pop(),a=i[i.length-1],s=o.pop(),f=!0),r.leaf&&(d=Lue(e,r.children,t),d!==-1))return r.children.splice(d,1),i.push(r),this._condense(i),this;!f&&!r.leaf&&xI(r,n)?(i.push(r),o.push(s),s=0,a=r,r=r.children[0]):a?(s++,r=a.children[s],f=!1):r=null}return this},toBBox:function(e){return e},compareMinX:h6,compareMinY:d6,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var i=r-t+1,o=this._maxEntries,s;if(i<=o)return s=Bm(e.slice(t,r+1)),Sm(s,this.toBBox),s;n||(n=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/Math.pow(o,n-1))),s=Bm([]),s.leaf=!1,s.height=n;var a=Math.ceil(i/o),d=a*Math.ceil(Math.sqrt(o)),f,g,_,b;for(p6(e,t,r,d,this.compareMinX),f=t;f<=r;f+=d)for(_=Math.min(f+d-1,r),p6(e,f,_,a,this.compareMinY),g=f;g<=_;g+=a)b=Math.min(g+a-1,_),s.children.push(this._build(e,g,b,n-1));return Sm(s,this.toBBox),s},_chooseSubtree:function(e,t,r,n){for(var i,o,s,a,d,f,g,_;n.push(t),!(t.leaf||n.length-1===r);){for(g=_=1/0,i=0,o=t.children.length;i<o;i++)s=t.children[i],d=bI(s),f=Rue(e,s)-d,f<_?(_=f,g=d<g?d:g,a=s):f===_&&d<g&&(g=d,a=s);t=a||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),o=[],s=this._chooseSubtree(i,this.data,t,o);for(s.children.push(e),Ly(s,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=Bm(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,Sm(r,this.toBBox),Sm(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=Bm([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Sm(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,i,o,s,a,d,f,g;for(d=f=1/0,n=t;n<=r-t;n++)i=My(e,0,n,this.toBBox),o=My(e,n,r,this.toBBox),s=kue(i,o),a=bI(i)+bI(o),s<d?(d=s,g=n,f=a<f?a:f):s===d&&a<f&&(f=a,g=n);return g},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:h6,i=e.leaf?this.compareMinY:d6,o=this._allDistMargin(e,t,r,n),s=this._allDistMargin(e,t,r,i);o<s&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var i=this.toBBox,o=My(e,0,t,i),s=My(e,r-t,r,i),a=Mb(o)+Mb(s),d,f;for(d=t;d<r-t;d++)f=e.children[d],Ly(o,e.leaf?i(f):f),a+=Mb(o);for(d=r-t-1;d>=t;d--)f=e.children[d],Ly(s,e.leaf?i(f):f),a+=Mb(s);return a},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)Ly(t[n],e)},_condense:function(e){for(var t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():Sm(e[t],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function Lue(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function Sm(e,t){My(e,0,e.children.length,t,e)}function My(e,t,r,n,i){i||(i=Bm(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t,s;o<r;o++)s=e.children[o],Ly(i,e.leaf?n(s):s);return i}function Ly(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function h6(e,t){return e.minX-t.minX}function d6(e,t){return e.minY-t.minY}function bI(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Mb(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Rue(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function kue(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function xI(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Lb(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Bm(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p6(e,t,r,n,i){for(var o=[t,r],s;o.length;)r=o.pop(),t=o.pop(),!(r-t<=n)&&(s=t+Math.ceil((r-t)/n/2)*n,Mue(e,s,t,r,i),o.push(t,s,s,r))}var mq=Ek.exports,Sk=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wk,"__esModule",{value:!0});var Due=Sk(Ps),Nue=Sk(nu),Fue=Sk(mq);function $ue(e,t,r,n){var i=Fue.default(6),o=t.features.map(function(s){var a;return{minX:s.geometry.coordinates[0],minY:s.geometry.coordinates[1],maxX:s.geometry.coordinates[0],maxY:s.geometry.coordinates[1],property:(a=s.properties)===null||a===void 0?void 0:a[r]}});return i.load(o),e.features.forEach(function(s){s.properties||(s.properties={});var a=Due.default(s),d=i.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}),f=[];d.forEach(function(g){Nue.default([g.minX,g.minY],s)&&f.push(g.property)}),s.properties[n]=f}),e}wk.default=$ue;var Pk={exports:{}},zue=ur,Bue=Vt,jue=ja;function Uue(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Vue=Uue(jue);function gq(e,t){if(t=t||{},!Bue.isObject(t))throw new Error("options is invalid");var r=t.mutate;if(!e)throw new Error("geojson is required");return(r===!1||r===void 0)&&(e=Vue.default(e)),zue.coordEach(e,function(n){var i=n[0],o=n[1];n[0]=o,n[1]=i}),e}Pk.exports=gq;Pk.exports.default=gq;var Gue=Pk.exports,Ak={exports:{}},Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});var que=Vt,Ry=Er;function Wue(e,t){t===void 0&&(t={});var r=typeof t=="object"?t.mutate:t;if(!e)throw new Error("geojson is required");var n=Ry.getType(e),i=[];switch(n){case"LineString":i=wI(e);break;case"MultiLineString":case"Polygon":Ry.getCoords(e).forEach(function(s){i.push(wI(s))});break;case"MultiPolygon":Ry.getCoords(e).forEach(function(s){var a=[];s.forEach(function(d){a.push(wI(d))}),i.push(a)});break;case"Point":return e;case"MultiPoint":var o={};Ry.getCoords(e).forEach(function(s){var a=s.join("-");Object.prototype.hasOwnProperty.call(o,a)||(i.push(s),o[a]=!0)});break;default:throw new Error(n+" geometry not supported")}return e.coordinates?r===!0?(e.coordinates=i,e):{type:n,coordinates:i}:r===!0?(e.geometry.coordinates=i,e):que.feature({type:n,coordinates:i},e.properties,{bbox:e.bbox,id:e.id})}function wI(e){var t=Ry.getCoords(e);if(t.length===2&&!m6(t[0],t[1]))return t;var r=[],n=t.length-1,i=r.length;r.push(t[0]);for(var o=1;o<n;o++){var s=r[r.length-1];t[o][0]===s[0]&&t[o][1]===s[1]||(r.push(t[o]),i=r.length,i>2&&g6(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1))}if(r.push(t[t.length-1]),i=r.length,m6(t[0],t[t.length-1])&&i<4)throw new Error("invalid polygon");return g6(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1),r}function m6(e,t){return e[0]===t[0]&&e[1]===t[1]}function g6(e,t,r){var n=r[0],i=r[1],o=e[0],s=e[1],a=t[0],d=t[1],f=n-o,g=i-s,_=a-o,b=d-s,P=f*b-g*_;return P!==0?!1:Math.abs(_)>=Math.abs(b)?_>0?o<=n&&n<=a:a<=n&&n<=o:b>0?s<=i&&i<=d:d<=i&&i<=s}Fp.default=Wue;var Xue=Fp,Yue=ja,Hue=ur,Zue=Vt;function vq(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Kue=vq(Xue),Jue=vq(Yue);function Que(e,t){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n}function ele(e,t,r){var n=t.x,i=t.y,o=r.x-n,s=r.y-i;if(o!==0||s!==0){var a=((e.x-n)*o+(e.y-i)*s)/(o*o+s*s);a>1?(n=r.x,i=r.y):a>0&&(n+=o*a,i+=s*a)}return o=e.x-n,s=e.y-i,o*o+s*s}function tle(e,t){for(var r=e[0],n=[r],i,o=1,s=e.length;o<s;o++)i=e[o],Que(i,r)>t&&(n.push(i),r=i);return r!==i&&n.push(i),n}function nM(e,t,r,n,i){for(var o=n,s,a=t+1;a<r;a++){var d=ele(e[a],e[t],e[r]);d>o&&(s=a,o=d)}o>n&&(s-t>1&&nM(e,t,s,n,i),i.push(e[s]),r-s>1&&nM(e,s,r,n,i))}function rle(e,t){var r=e.length-1,n=[e[0]];return nM(e,0,r,t,n),n.push(e[r]),n}function iM(e,t,r){if(e.length<=2)return e;var n=t!==void 0?t*t:1;return e=r?e:tle(e,n),e=rle(e,n),e}function yq(e,t){if(t=t||{},!Zue.isObject(t))throw new Error("options is invalid");var r=t.tolerance!==void 0?t.tolerance:1,n=t.highQuality||!1,i=t.mutate||!1;if(!e)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return i!==!0&&(e=Jue.default(e)),Hue.geomEach(e,function(o){nle(o,r,n)}),e}function nle(e,t,r){var n=e.type;if(n==="Point"||n==="MultiPoint")return e;Kue.default(e,!0);var i=e.coordinates;switch(n){case"LineString":e.coordinates=v6(i,t,r);break;case"MultiLineString":e.coordinates=i.map(function(o){return v6(o,t,r)});break;case"Polygon":e.coordinates=y6(i,t,r);break;case"MultiPolygon":e.coordinates=i.map(function(o){return y6(o,t,r)})}return e}function v6(e,t,r){return iM(e.map(function(n){return{x:n[0],y:n[1],z:n[2]}}),t,r).map(function(n){return n.z?[n.x,n.y,n.z]:[n.x,n.y]})}function y6(e,t,r){return e.map(function(n){var i=n.map(function(s){return{x:s[0],y:s[1]}});if(i.length<4)throw new Error("invalid polygon");for(var o=iM(i,t,r).map(function(s){return[s.x,s.y]});!ile(o);)t-=t*.01,o=iM(i,t,r).map(function(s){return[s.x,s.y]});return(o[o.length-1][0]!==o[0][0]||o[o.length-1][1]!==o[0][1])&&o.push(o[0]),o})}function ile(e){return e.length<3?!1:!(e.length===3&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}Ak.exports=yq;Ak.exports.default=yq;var ole=Ak.exports,Ck={},Ik={};Object.defineProperty(Ik,"__esModule",{value:!0});var ale=function(){function e(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var r=0;r<this.length;r++)this.points[r].z=this.points[r].z||0;for(var r=0;r<this.length-1;r++){var n=this.points[r],i=this.points[r+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var r=0;r<this.centers.length-1;r++){var o=this.points[r+1].x-(this.centers[r].x+this.centers[r+1].x)/2,s=this.points[r+1].y-(this.centers[r].y+this.centers[r+1].y)/2,a=this.points[r+1].z-(this.centers[r].y+this.centers[r+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r].x+o),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r].y+s),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r].z+a)},{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r+1].x+o),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r+1].y+s),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return e.prototype.cacheSteps=function(t){var r=[],n=this.pos(0);r.push(0);for(var i=0;i<this.duration;i+=10){var o=this.pos(i),s=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y)+(o.z-n.z)*(o.z-n.z));s>t&&(r.push(i),n=o)}return r},e.prototype.vector=function(t){var r=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(r.y-n.y,r.x-n.x)/3.14,speed:Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y)+(n.z-r.z)*(n.z-r.z))}},e.prototype.pos=function(t){var r=t-this.delay;r<0&&(r=0),r>this.duration&&(r=this.duration-1);var n=r/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n),o=(this.length-1)*n-i;return sle(o,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},e}();Ik.default=ale;function sle(e,t,r,n,i){var o=ule(e),s={x:i.x*o[0]+n.x*o[1]+r.x*o[2]+t.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+t.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+t.z*o[3]};return s}function ule(e){var t=e*e,r=t*e;return[r,3*t*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}var lle=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ck,"__esModule",{value:!0});var cle=Vt,fle=Er,hle=lle(Ik);function dle(e,t){t===void 0&&(t={});for(var r=t.resolution||1e4,n=t.sharpness||.85,i=[],o=fle.getGeom(e).coordinates.map(function(f){return{x:f[0],y:f[1]}}),s=new hle.default({duration:r,points:o,sharpness:n}),a=function(f){var g=s.pos(f);Math.floor(f/100)%2===0&&i.push([g.x,g.y])},d=0;d<s.duration;d+=10)a(d);return a(s.duration),cle.lineString(i,t.properties)}Ck.default=dle;var Ok={exports:{}},ple=nu,mle=ja,_6=ur;function _q(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var gle=_q(ple),b6=_q(mle);function bq(e,t,r,n){return e=b6.default(e),t=b6.default(t),_6.featureEach(e,function(i){i.properties||(i.properties={}),_6.featureEach(t,function(o){i.properties[n]===void 0&&gle.default(i,o)&&(i.properties[n]=o.properties[r])})}),e}Ok.exports=bq;Ok.exports.default=bq;var vle=Ok.exports,Tk={exports:{}},yle=Vt;function xq(e,t){if(!e)throw new Error("featurecollection is required");if(t==null)throw new Error("num is required");if(typeof t!="number")throw new Error("num must be a number");var r=yle.featureCollection(_le(e.features,t));return r}function _le(e,t){for(var r=e.slice(0),n=e.length,i=n-t,o,s;n-- >i;)s=Math.floor((n+1)*Math.random()),o=r[s],r[s]=r[n],r[n]=o;return r.slice(i)}Tk.exports=xq;Tk.exports.default=xq;var ble=Tk.exports,Mk={exports:{}},E_={};Object.defineProperty(E_,"__esModule",{value:!0});var xle=Vt;function wle(e,t){t===void 0&&(t={});var r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n],a=[r,o],d=[i,o],f=[i,n];return xle.polygon([[s,f,d,a,s]],t.properties,{bbox:e,id:t.id})}E_.default=wle;var Ele=Ps,Sle=E_;function wq(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Ple=wq(Ele),Ale=wq(Sle);function Eq(e){return Ale.default(Ple.default(e))}Mk.exports=Eq;Mk.exports.default=Eq;var Sq=Mk.exports,Lk={exports:{}},Cle=wa;function Ile(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var x6=Ile(Cle);function Pq(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=x6.default(e.slice(0,2),[n,r]),s=x6.default(e.slice(0,2),[t,i]);if(o>=s){var a=(r+i)/2;return[t,a-(n-t)/2,n,a+(n-t)/2]}else{var d=(t+n)/2;return[d-(i-r)/2,r,d+(i-r)/2,i]}}Lk.exports=Pq;Lk.exports.default=Pq;var Aq=Lk.exports,S_={},dh={};Object.defineProperty(dh,"__esModule",{value:!0});var Bd=Vt,Ole=Er;function Tle(e,t,r,n){n===void 0&&(n={});var i=Ole.getCoord(e),o=Bd.degreesToRadians(i[0]),s=Bd.degreesToRadians(i[1]),a=Bd.degreesToRadians(r),d=Bd.lengthToRadians(t,n.units),f=Math.asin(Math.sin(s)*Math.cos(d)+Math.cos(s)*Math.sin(d)*Math.cos(a)),g=o+Math.atan2(Math.sin(a)*Math.sin(d)*Math.cos(s),Math.cos(d)-Math.sin(s)*Math.sin(f)),_=Bd.radiansToDegrees(g),b=Bd.radiansToDegrees(f);return Bd.point([_,b],n.properties)}dh.default=Tle;var Mle=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(S_,"__esModule",{value:!0});var Lle=Mle(dh),Rle=Vt;function kle(e,t,r){r===void 0&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[],s=0;s<n;s++)o.push(Lle.default(e,t,s*-360/n,r).geometry.coordinates);return o.push(o[0]),Rle.polygon([o],i)}S_.default=kle;var Rk={exports:{}},Sd={};Object.defineProperty(Sd,"__esModule",{value:!0});var oy=Vt,w6=Er;function Cq(e,t,r){if(r===void 0&&(r={}),r.final===!0)return Dle(e,t);var n=w6.getCoord(e),i=w6.getCoord(t),o=oy.degreesToRadians(n[0]),s=oy.degreesToRadians(i[0]),a=oy.degreesToRadians(n[1]),d=oy.degreesToRadians(i[1]),f=Math.sin(s-o)*Math.cos(d),g=Math.cos(a)*Math.sin(d)-Math.sin(a)*Math.cos(d)*Math.cos(s-o);return oy.radiansToDegrees(Math.atan2(f,g))}Sd.default=Cq;function Dle(e,t){var r=Cq(t,e);return r=(r+180)%360,r}var Nle=Sd,Fle=dh,$le=wa;function kk(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var zle=kk(Nle),Ble=kk(Fle),jle=kk($le);function Iq(e,t){var r=jle.default(e,t),n=zle.default(e,t),i=Ble.default(e,r/2,n);return i}Rk.exports=Iq;Rk.exports.default=Iq;var Ule=Rk.exports,ev={},Vle=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ev,"__esModule",{value:!0});var Gle=Vle(Ps),qle=Vt;function Wle(e,t){t===void 0&&(t={});var r=Gle.default(e),n=(r[0]+r[2])/2,i=(r[1]+r[3])/2;return qle.point([n,i],t.properties,t)}ev.default=Wle;var Dk={},ph={};Object.defineProperty(ph,"__esModule",{value:!0});var Xle=ur,Yle=Vt;function Hle(e,t){t===void 0&&(t={});var r=0,n=0,i=0;return Xle.coordEach(e,function(o){r+=o[0],n+=o[1],i++},!0),Yle.point([r/i,n/i],t.properties)}ph.default=Hle;var Oq=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dk,"__esModule",{value:!0});var Zle=Oq(WE),E6=Oq(ph),S6=Vt,P6=Er,Kle=ur;function Tq(e,t){switch(t===void 0&&(t={}),P6.getType(e)){case"Point":return S6.point(P6.getCoord(e),t.properties);case"Polygon":var r=[];Kle.coordEach(e,function(N){r.push(N)});var n=E6.default(e,{properties:t.properties}),i=n.geometry.coordinates,o=0,s=0,a=0,d,f,g,_,b,P,L,R,$=r.map(function(N){return[N[0]-i[0],N[1]-i[1]]});for(d=0;d<r.length-1;d++)f=$[d],_=f[0],P=f[1],g=$[d+1],b=g[0],L=g[1],R=_*L-b*P,a+=R,o+=(_+b)*R,s+=(P+L)*R;if(a===0)return n;var F=a*.5,T=1/(6*F);return S6.point([i[0]+T*o,i[1]+T*s],t.properties);default:var x=Zle.default(e);return x?Tq(x,{properties:t.properties}):E6.default(e,{properties:t.properties})}}Dk.default=Tq;var Nk={};Object.defineProperty(Nk,"__esModule",{value:!0});var A6=Vt,Jle=ur;function Qle(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return Jle.featureEach(e,function(r){var n,i,o,s;switch((s=r.geometry)===null||s===void 0?void 0:s.type){case"Point":t.MultiPoint.coordinates.push(r.geometry.coordinates),t.MultiPoint.properties.push(r.properties);break;case"MultiPoint":(n=t.MultiPoint.coordinates).push.apply(n,r.geometry.coordinates),t.MultiPoint.properties.push(r.properties);break;case"LineString":t.MultiLineString.coordinates.push(r.geometry.coordinates),t.MultiLineString.properties.push(r.properties);break;case"MultiLineString":(i=t.MultiLineString.coordinates).push.apply(i,r.geometry.coordinates),t.MultiLineString.properties.push(r.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(r.geometry.coordinates),t.MultiPolygon.properties.push(r.properties);break;case"MultiPolygon":(o=t.MultiPolygon.coordinates).push.apply(o,r.geometry.coordinates),t.MultiPolygon.properties.push(r.properties);break}}),A6.featureCollection(Object.keys(t).filter(function(r){return t[r].coordinates.length}).sort().map(function(r){var n={type:r,coordinates:t[r].coordinates},i={collectedProperties:t[r].properties};return A6.feature(n,i)}))}Nk.default=Qle;var Fk={exports:{}},EI=ur,SI=Vt;function Mq(e){var t=[];return e.type==="FeatureCollection"?EI.featureEach(e,function(r){EI.coordEach(r,function(n){t.push(SI.point(n,r.properties))})}):EI.coordEach(e,function(r){t.push(SI.point(r,e.properties))}),SI.featureCollection(t)}Fk.exports=Mq;Fk.exports.default=Mq;var KE=Fk.exports,$k={exports:{}},zk={exports:{}};zk.exports=JE;zk.exports.default=JE;function JE(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=Lq(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,d,f,g,_,b,P;if(n&&(o=ice(e,t,o,r)),e.length>80*r){a=f=e[0],d=g=e[1];for(var L=r;L<i;L+=r)_=e[L],b=e[L+1],_<a&&(a=_),b<d&&(d=b),_>f&&(f=_),b>g&&(g=b);P=Math.max(f-a,g-d),P=P!==0?32767/P:0}return $0(o,s,r,a,d,P,0),s}function Lq(e,t,r,n,i){var o,s;if(i===sM(e,t,r,n)>0)for(o=t;o<r;o+=n)s=C6(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=C6(o,e[o],e[o+1],s);return s&&QE(s,s.next)&&(B0(s),s=s.next),s}function wp(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(QE(r,r.next)||No(r.prev,r,r.next)===0)){if(B0(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function $0(e,t,r,n,i,o,s){if(e){!s&&o&&lce(e,n,i,o);for(var a=e,d,f;e.prev!==e.next;){if(d=e.prev,f=e.next,o?tce(e,n,i,o):ece(e)){t.push(d.i/r|0),t.push(e.i/r|0),t.push(f.i/r|0),B0(e),e=f.next,a=f.next;continue}if(e=f,e===a){s?s===1?(e=rce(wp(e),t,r),$0(e,t,r,n,i,o,2)):s===2&&nce(e,t,r,n,i,o):$0(wp(e),t,r,n,i,o,1);break}}}}function ece(e){var t=e.prev,r=e,n=e.next;if(No(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,s=n.x,a=t.y,d=r.y,f=n.y,g=i<o?i<s?i:s:o<s?o:s,_=a<d?a<f?a:f:d<f?d:f,b=i>o?i>s?i:s:o>s?o:s,P=a>d?a>f?a:f:d>f?d:f,L=n.next;L!==t;){if(L.x>=g&&L.x<=b&&L.y>=_&&L.y<=P&&rg(i,a,o,d,s,f,L.x,L.y)&&No(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function tce(e,t,r,n){var i=e.prev,o=e,s=e.next;if(No(i,o,s)>=0)return!1;for(var a=i.x,d=o.x,f=s.x,g=i.y,_=o.y,b=s.y,P=a<d?a<f?a:f:d<f?d:f,L=g<_?g<b?g:b:_<b?_:b,R=a>d?a>f?a:f:d>f?d:f,$=g>_?g>b?g:b:_>b?_:b,F=oM(P,L,t,r,n),T=oM(R,$,t,r,n),x=e.prevZ,N=e.nextZ;x&&x.z>=F&&N&&N.z<=T;){if(x.x>=P&&x.x<=R&&x.y>=L&&x.y<=$&&x!==i&&x!==s&&rg(a,g,d,_,f,b,x.x,x.y)&&No(x.prev,x,x.next)>=0||(x=x.prevZ,N.x>=P&&N.x<=R&&N.y>=L&&N.y<=$&&N!==i&&N!==s&&rg(a,g,d,_,f,b,N.x,N.y)&&No(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;x&&x.z>=F;){if(x.x>=P&&x.x<=R&&x.y>=L&&x.y<=$&&x!==i&&x!==s&&rg(a,g,d,_,f,b,x.x,x.y)&&No(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;N&&N.z<=T;){if(N.x>=P&&N.x<=R&&N.y>=L&&N.y<=$&&N!==i&&N!==s&&rg(a,g,d,_,f,b,N.x,N.y)&&No(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function rce(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!QE(i,o)&&Rq(i,n,n.next,o)&&z0(i,o)&&z0(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),B0(n),B0(n.next),n=e=o),n=n.next}while(n!==e);return wp(n)}function nce(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&hce(s,a)){var d=kq(s,a);s=wp(s,s.next),d=wp(d,d.next),$0(s,t,r,n,i,o,0),$0(d,t,r,n,i,o,0);return}a=a.next}s=s.next}while(s!==e)}function ice(e,t,r,n){var i=[],o,s,a,d,f;for(o=0,s=t.length;o<s;o++)a=t[o]*n,d=o<s-1?t[o+1]*n:e.length,f=Lq(e,a,d,n,!1),f===f.next&&(f.steiner=!0),i.push(fce(f));for(i.sort(oce),o=0;o<i.length;o++)r=ace(i[o],r);return r}function oce(e,t){return e.x-t.x}function ace(e,t){var r=sce(e,t);if(!r)return t;var n=kq(r,e);return wp(n,n.next),wp(r,r.next)}function sce(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,s=r.x<r.next.x?r:r.next,a===n))return s}r=r.next}while(r!==t);if(!s)return null;var d=s,f=s.x,g=s.y,_=1/0,b;r=s;do n>=r.x&&r.x>=f&&n!==r.x&&rg(i<g?n:o,i,f,g,i<g?o:n,i,r.x,r.y)&&(b=Math.abs(i-r.y)/(n-r.x),z0(r,e)&&(b<_||b===_&&(r.x>s.x||r.x===s.x&&uce(s,r)))&&(s=r,_=b)),r=r.next;while(r!==d);return s}function uce(e,t){return No(e.prev,e,t.prev)<0&&No(t.next,e,e.next)<0}function lce(e,t,r,n){var i=e;do i.z===0&&(i.z=oM(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,cce(i)}function cce(e){var t,r,n,i,o,s,a,d,f=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<f&&(a++,n=n.nextZ,!!n);t++);for(d=f;a>0||d>0&&n;)a!==0&&(d===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,d--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,f*=2}while(s>1);return e}function oM(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function fce(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function rg(e,t,r,n,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(r-s)*(t-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function hce(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!dce(e,t)&&(z0(e,t)&&z0(t,e)&&pce(e,t)&&(No(e.prev,e,t.prev)||No(e,t.prev,t))||QE(e,t)&&No(e.prev,e,e.next)>0&&No(t.prev,t,t.next)>0)}function No(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function QE(e,t){return e.x===t.x&&e.y===t.y}function Rq(e,t,r,n){var i=kb(No(e,t,r)),o=kb(No(e,t,n)),s=kb(No(r,n,e)),a=kb(No(r,n,t));return!!(i!==o&&s!==a||i===0&&Rb(e,r,t)||o===0&&Rb(e,n,t)||s===0&&Rb(r,e,n)||a===0&&Rb(r,t,n))}function Rb(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function kb(e){return e>0?1:e<0?-1:0}function dce(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Rq(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function z0(e,t){return No(e.prev,e,e.next)<0?No(e,t,e.next)>=0&&No(e,e.prev,t)>=0:No(e,t,e.prev)<0||No(e,e.next,t)<0}function pce(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function kq(e,t){var r=new aM(e.i,e.x,e.y),n=new aM(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function C6(e,t,r,n){var i=new aM(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function B0(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function aM(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}JE.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(sM(e,0,o,r));if(i)for(var a=0,d=t.length;a<d;a++){var f=t[a]*r,g=a<d-1?t[a+1]*r:e.length;s-=Math.abs(sM(e,f,g,r))}var _=0;for(a=0;a<n.length;a+=3){var b=n[a]*r,P=n[a+1]*r,L=n[a+2]*r;_+=Math.abs((e[b]-e[L])*(e[P+1]-e[b+1])-(e[b]-e[P])*(e[L+1]-e[b+1]))}return s===0&&_===0?0:Math.abs((_-s)/s)};function sM(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}JE.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var mce=zk.exports,gce=mce,vce=Vt;function yce(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var _ce=yce(gce);function Dq(e){if(!e.geometry||e.geometry.type!=="Polygon"&&e.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return e.geometry.type==="Polygon"?t.features=I6(e.geometry.coordinates):e.geometry.coordinates.forEach(function(r){t.features=t.features.concat(I6(r))}),t}function I6(e){var t=bce(e),r=2,n=_ce.default(t.vertices,t.holes,r),i=[],o=[];n.forEach(function(d,f){var g=n[f];o.push([t.vertices[g*r],t.vertices[g*r+1]])});for(var s=0;s<o.length;s+=3){var a=o.slice(s,s+3);a.push(o[s]),i.push(vce.polygon([a]))}return i}function bce(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}$k.exports=Dq;$k.exports.default=Dq;var xce=$k.exports,P_={},Nq=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P_,"__esModule",{value:!0});var wce=Nq(ja),Ece=Nq(wa),Sce=ur;function Pce(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return Sce.featureEach(t,function(o,s){var a=Ece.default(e,o);a<n&&(i=s,n=a)}),r=wce.default(t.features[i]),r.properties.featureIndex=i,r.properties.distanceToPoint=n,r}P_.default=Pce;var tv={},Pd={},$p={};Object.defineProperty($p,"__esModule",{value:!0});var Fq=Vt,O6=Er,Ace=ur;function Cce(e){if(!e)throw new Error("geojson is required");var t=[];return Ace.flattenEach(e,function(r){Ice(r,t)}),Fq.featureCollection(t)}function Ice(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=O6.getCoords(n);break;case"LineString":r=[O6.getCoords(n)]}r.forEach(function(i){var o=Oce(i,e.properties);o.forEach(function(s){s.id=t.length,t.push(s)})})}}function Oce(e,t){var r=[];return e.reduce(function(n,i){var o=Fq.lineString([n,i],t);return o.bbox=Tce(n,i),r.push(o),i}),r}function Tce(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],s=r<i?r:i,a=n<o?n:o,d=r>i?r:i,f=n>o?n:o;return[s,a,d,f]}$p.default=Cce;var Bk={exports:{}},$q={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Pe,function(){function r(T,x,N,B,H){(function Z(Y,W,Q,me,ge){for(;me>Q;){if(me-Q>600){var be=me-Q+1,oe=W-Q+1,Ie=Math.log(be),fe=.5*Math.exp(2*Ie/3),G=.5*Math.sqrt(Ie*fe*(be-fe)/be)*(oe-be/2<0?-1:1),K=Math.max(Q,Math.floor(W-oe*fe/be+G)),re=Math.min(me,Math.floor(W+(be-oe)*fe/be+G));Z(Y,W,K,re,ge)}var ie=Y[W],he=Q,ae=me;for(n(Y,Q,W),ge(Y[me],ie)>0&&n(Y,Q,me);he<ae;){for(n(Y,he,ae),he++,ae--;ge(Y[he],ie)<0;)he++;for(;ge(Y[ae],ie)>0;)ae--}ge(Y[Q],ie)===0?n(Y,Q,ae):n(Y,++ae,me),ae<=W&&(Q=ae+1),W<=ae&&(me=ae-1)}})(T,x,N||0,B||T.length-1,H||i)}function n(T,x,N){var B=T[x];T[x]=T[N],T[N]=B}function i(T,x){return T<x?-1:T>x?1:0}var o=function(T){T===void 0&&(T=9),this._maxEntries=Math.max(4,T),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(T,x,N){if(!N)return x.indexOf(T);for(var B=0;B<x.length;B++)if(N(T,x[B]))return B;return-1}function a(T,x){d(T,0,T.children.length,x,T)}function d(T,x,N,B,H){H||(H=$(null)),H.minX=1/0,H.minY=1/0,H.maxX=-1/0,H.maxY=-1/0;for(var Z=x;Z<N;Z++){var Y=T.children[Z];f(H,T.leaf?B(Y):Y)}return H}function f(T,x){return T.minX=Math.min(T.minX,x.minX),T.minY=Math.min(T.minY,x.minY),T.maxX=Math.max(T.maxX,x.maxX),T.maxY=Math.max(T.maxY,x.maxY),T}function g(T,x){return T.minX-x.minX}function _(T,x){return T.minY-x.minY}function b(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function P(T){return T.maxX-T.minX+(T.maxY-T.minY)}function L(T,x){return T.minX<=x.minX&&T.minY<=x.minY&&x.maxX<=T.maxX&&x.maxY<=T.maxY}function R(T,x){return x.minX<=T.maxX&&x.minY<=T.maxY&&x.maxX>=T.minX&&x.maxY>=T.minY}function $(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function F(T,x,N,B,H){for(var Z=[x,N];Z.length;)if(!((N=Z.pop())-(x=Z.pop())<=B)){var Y=x+Math.ceil((N-x)/B/2)*B;r(T,Y,x,N,H),Z.push(x,Y,Y,N)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(T){var x=this.data,N=[];if(!R(T,x))return N;for(var B=this.toBBox,H=[];x;){for(var Z=0;Z<x.children.length;Z++){var Y=x.children[Z],W=x.leaf?B(Y):Y;R(T,W)&&(x.leaf?N.push(Y):L(T,W)?this._all(Y,N):H.push(Y))}x=H.pop()}return N},o.prototype.collides=function(T){var x=this.data;if(!R(T,x))return!1;for(var N=[];x;){for(var B=0;B<x.children.length;B++){var H=x.children[B],Z=x.leaf?this.toBBox(H):H;if(R(T,Z)){if(x.leaf||L(T,Z))return!0;N.push(H)}}x=N.pop()}return!1},o.prototype.load=function(T){if(!T||!T.length)return this;if(T.length<this._minEntries){for(var x=0;x<T.length;x++)this.insert(T[x]);return this}var N=this._build(T.slice(),0,T.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var B=this.data;this.data=N,N=B}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},o.prototype.insert=function(T){return T&&this._insert(T,this.data.height-1),this},o.prototype.clear=function(){return this.data=$([]),this},o.prototype.remove=function(T,x){if(!T)return this;for(var N,B,H,Z=this.data,Y=this.toBBox(T),W=[],Q=[];Z||W.length;){if(Z||(Z=W.pop(),B=W[W.length-1],N=Q.pop(),H=!0),Z.leaf){var me=s(T,Z.children,x);if(me!==-1)return Z.children.splice(me,1),W.push(Z),this._condense(W),this}H||Z.leaf||!L(Z,Y)?B?(N++,Z=B.children[N],H=!1):Z=null:(W.push(Z),Q.push(N),N=0,B=Z,Z=Z.children[0])}return this},o.prototype.toBBox=function(T){return T},o.prototype.compareMinX=function(T,x){return T.minX-x.minX},o.prototype.compareMinY=function(T,x){return T.minY-x.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(T){return this.data=T,this},o.prototype._all=function(T,x){for(var N=[];T;)T.leaf?x.push.apply(x,T.children):N.push.apply(N,T.children),T=N.pop();return x},o.prototype._build=function(T,x,N,B){var H,Z=N-x+1,Y=this._maxEntries;if(Z<=Y)return a(H=$(T.slice(x,N+1)),this.toBBox),H;B||(B=Math.ceil(Math.log(Z)/Math.log(Y)),Y=Math.ceil(Z/Math.pow(Y,B-1))),(H=$([])).leaf=!1,H.height=B;var W=Math.ceil(Z/Y),Q=W*Math.ceil(Math.sqrt(Y));F(T,x,N,Q,this.compareMinX);for(var me=x;me<=N;me+=Q){var ge=Math.min(me+Q-1,N);F(T,me,ge,W,this.compareMinY);for(var be=me;be<=ge;be+=W){var oe=Math.min(be+W-1,ge);H.children.push(this._build(T,be,oe,B-1))}}return a(H,this.toBBox),H},o.prototype._chooseSubtree=function(T,x,N,B){for(;B.push(x),!x.leaf&&B.length-1!==N;){for(var H=1/0,Z=1/0,Y=void 0,W=0;W<x.children.length;W++){var Q=x.children[W],me=b(Q),ge=(be=T,oe=Q,(Math.max(oe.maxX,be.maxX)-Math.min(oe.minX,be.minX))*(Math.max(oe.maxY,be.maxY)-Math.min(oe.minY,be.minY))-me);ge<Z?(Z=ge,H=me<H?me:H,Y=Q):ge===Z&&me<H&&(H=me,Y=Q)}x=Y||x.children[0]}var be,oe;return x},o.prototype._insert=function(T,x,N){var B=N?T:this.toBBox(T),H=[],Z=this._chooseSubtree(B,this.data,x,H);for(Z.children.push(T),f(Z,B);x>=0&&H[x].children.length>this._maxEntries;)this._split(H,x),x--;this._adjustParentBBoxes(B,H,x)},o.prototype._split=function(T,x){var N=T[x],B=N.children.length,H=this._minEntries;this._chooseSplitAxis(N,H,B);var Z=this._chooseSplitIndex(N,H,B),Y=$(N.children.splice(Z,N.children.length-Z));Y.height=N.height,Y.leaf=N.leaf,a(N,this.toBBox),a(Y,this.toBBox),x?T[x-1].children.push(Y):this._splitRoot(N,Y)},o.prototype._splitRoot=function(T,x){this.data=$([T,x]),this.data.height=T.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(T,x,N){for(var B,H,Z,Y,W,Q,me,ge=1/0,be=1/0,oe=x;oe<=N-x;oe++){var Ie=d(T,0,oe,this.toBBox),fe=d(T,oe,N,this.toBBox),G=(H=Ie,Z=fe,Y=void 0,W=void 0,Q=void 0,me=void 0,Y=Math.max(H.minX,Z.minX),W=Math.max(H.minY,Z.minY),Q=Math.min(H.maxX,Z.maxX),me=Math.min(H.maxY,Z.maxY),Math.max(0,Q-Y)*Math.max(0,me-W)),K=b(Ie)+b(fe);G<ge?(ge=G,B=oe,be=K<be?K:be):G===ge&&K<be&&(be=K,B=oe)}return B||N-x},o.prototype._chooseSplitAxis=function(T,x,N){var B=T.leaf?this.compareMinX:g,H=T.leaf?this.compareMinY:_;this._allDistMargin(T,x,N,B)<this._allDistMargin(T,x,N,H)&&T.children.sort(B)},o.prototype._allDistMargin=function(T,x,N,B){T.children.sort(B);for(var H=this.toBBox,Z=d(T,0,x,H),Y=d(T,N-x,N,H),W=P(Z)+P(Y),Q=x;Q<N-x;Q++){var me=T.children[Q];f(Z,T.leaf?H(me):me),W+=P(Z)}for(var ge=N-x-1;ge>=x;ge--){var be=T.children[ge];f(Y,T.leaf?H(be):be),W+=P(Y)}return W},o.prototype._adjustParentBBoxes=function(T,x,N){for(var B=N;B>=0;B--)f(x[B],T)},o.prototype._condense=function(T){for(var x=T.length-1,N=void 0;x>=0;x--)T[x].children.length===0?x>0?(N=T[x-1].children).splice(N.indexOf(T[x]),1):this.clear():a(T[x],this.toBBox)},o})})($q);var Mce=$q.exports,Kc=Mce,zq=Vt,Bq=ur,Pm=Ps.default,Lce=Bq.featureEach;Bq.coordEach;zq.polygon;var T6=zq.featureCollection;function jq(e){var t=new Kc(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Pm(r),Kc.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Pm(i),n.push(i)}):Lce(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Pm(i),n.push(i)}),Kc.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Pm(r),Kc.prototype.remove.call(this,r,n)},t.clear=function(){return Kc.prototype.clear.call(this)},t.search=function(r){var n=Kc.prototype.search.call(this,this.toBBox(r));return T6(n)},t.collides=function(r){return Kc.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=Kc.prototype.all.call(this);return T6(r)},t.toJSON=function(){return Kc.prototype.toJSON.call(this)},t.fromJSON=function(r){return Kc.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=Pm(r);else if(r.type==="FeatureCollection")n=Pm(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}Bk.exports=jq;Bk.exports.default=jq;var jk=Bk.exports,Uq=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pd,"__esModule",{value:!0});var ky=Vt,uM=Er,M6=Uq($p),L6=ur,Rce=Uq(jk);function kce(e,t){var r={},n=[];if(e.type==="LineString"&&(e=ky.feature(e)),t.type==="LineString"&&(t=ky.feature(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=R6(e,t);return i&&n.push(i),ky.featureCollection(n)}var o=Rce.default();return o.load(M6.default(t)),L6.featureEach(M6.default(e),function(s){L6.featureEach(o.search(s),function(a){var d=R6(s,a);if(d){var f=uM.getCoords(d).join(",");r[f]||(r[f]=!0,n.push(d))}})}),ky.featureCollection(n)}function R6(e,t){var r=uM.getCoords(e),n=uM.getCoords(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],d=n[0][0],f=n[0][1],g=n[1][0],_=n[1][1],b=(_-f)*(s-i)-(g-d)*(a-o),P=(g-d)*(o-f)-(_-f)*(i-d),L=(s-i)*(o-f)-(a-o)*(i-d);if(b===0)return null;var R=P/b,$=L/b;if(R>=0&&R<=1&&$>=0&&$<=1){var F=i+R*(s-i),T=o+R*(a-o);return ky.point([F,T])}return null}Pd.default=kce;var eS=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tv,"__esModule",{value:!0});var Dce=eS(Sd),ay=eS(wa),k6=eS(dh),Nce=eS(Pd),Fce=ur,sy=Vt,$ce=Er;function zce(e,t,r){r===void 0&&(r={});var n=sy.point([1/0,1/0],{dist:1/0}),i=0;return Fce.flattenEach(e,function(o){for(var s=$ce.getCoords(o),a=0;a<s.length-1;a++){var d=sy.point(s[a]);d.properties.dist=ay.default(t,d,r);var f=sy.point(s[a+1]);f.properties.dist=ay.default(t,f,r);var g=ay.default(d,f,r),_=Math.max(d.properties.dist,f.properties.dist),b=Dce.default(d,f),P=k6.default(t,_,b+90,r),L=k6.default(t,_,b-90,r),R=Nce.default(sy.lineString([P.geometry.coordinates,L.geometry.coordinates]),sy.lineString([d.geometry.coordinates,f.geometry.coordinates])),$=null;R.features.length>0&&($=R.features[0],$.properties.dist=ay.default(t,$,r),$.properties.location=i+ay.default(d,$,r)),d.properties.dist<n.properties.dist&&(n=d,n.properties.index=a,n.properties.location=i),f.properties.dist<n.properties.dist&&(n=f,n.properties.index=a+1,n.properties.location=i+g),$&&$.properties.dist<n.properties.dist&&(n=$,n.properties.index=a),i+=g}}),n}tv.default=zce;var Uk={},tS={},rv={};Object.defineProperty(rv,"__esModule",{value:!0});var Vq=Vt,D6=Er;function Bce(e,t,r){r===void 0&&(r={});var n=D6.getCoord(e),i=D6.getCoord(t);i[0]+=i[0]-n[0]>180?-360:n[0]-i[0]>180?360:0;var o=jce(n,i),s=Vq.convertLength(o,"meters",r.units);return s}function jce(e,t,r){r=r===void 0?Vq.earthRadius:Number(r);var n=r,i=e[1]*Math.PI/180,o=t[1]*Math.PI/180,s=o-i,a=Math.abs(t[0]-e[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var d=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),f=Math.abs(d)>1e-11?s/d:Math.cos(i),g=Math.sqrt(s*s+f*f*a*a),_=g*n;return _}rv.default=Bce;var Gq=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tS,"__esModule",{value:!0});var Uce=Gq(wa),uy=Vt,N6=Er,Vce=ur,Gce=Gq(rv);function qce(e,t,r){if(r===void 0&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!e)throw new Error("pt is required");if(Array.isArray(e)?e=uy.point(e):e.type==="Point"?e=uy.feature(e):N6.featureOf(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=uy.lineString(t):t.type==="LineString"?t=uy.feature(t):N6.featureOf(t,"LineString","line");var n=1/0,i=e.geometry.coordinates;return Vce.segmentEach(t,function(o){var s=o.geometry.coordinates[0],a=o.geometry.coordinates[1],d=Wce(i,s,a,r);d<n&&(n=d)}),uy.convertLength(n,"degrees",r.units)}function Wce(e,t,r,n){var i=[r[0]-t[0],r[1]-t[1]],o=[e[0]-t[0],e[1]-t[1]],s=F6(o,i);if(s<=0)return PI(e,t,{method:n.method,units:"degrees"});var a=F6(i,i);if(a<=s)return PI(e,r,{method:n.method,units:"degrees"});var d=s/a,f=[t[0]+d*i[0],t[1]+d*i[1]];return PI(e,f,{method:n.method,units:"degrees"})}function F6(e,t){return e[0]*t[0]+e[1]*t[1]}function PI(e,t,r){return r.method==="planar"?Gce.default(e,t,r):Uce.default(e,t,r)}tS.default=qce;var qq=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uk,"__esModule",{value:!0});var Xce=Er,Wq=ur,Yce=qq(tS),Hce=qq(lk);function Zce(e,t,r){r===void 0&&(r={});var n=r.units,i=r.properties||{},o=Kce(e);if(!o.features.length)throw new Error("points must contain features");if(!t)throw new Error("line is required");if(Xce.getType(t)!=="LineString")throw new Error("line must be a LineString");var s=1/0,a=null;return Wq.featureEach(o,function(d){var f=Yce.default(d,t,{units:n});f<s&&(s=f,a=d)}),a&&(a.properties=Hce.default({dist:s},a.properties,i)),a}function Kce(e){var t=[],r=e.geometry?e.geometry.type:e.type;switch(r){case"GeometryCollection":return Wq.geomEach(e,function(n){n.type==="Point"&&t.push({type:"Feature",properties:{},geometry:n})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return e.features=e.features.filter(function(n){return n.geometry.type==="Point"}),e;default:throw new Error("points must be a Point Collection")}}Uk.default=Zce;var Vk={exports:{}},$6=Er;function Xq(e,t){var r=$6.getCoord(e),n=$6.getGeom(t),i=n.coordinates,o=i[0];if(o.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var s=t.properties||{},a=s.a,d=s.b,f=s.c,g=r[0],_=r[1],b=o[0][0],P=o[0][1],L=a!==void 0?a:o[0][2],R=o[1][0],$=o[1][1],F=d!==void 0?d:o[1][2],T=o[2][0],x=o[2][1],N=f!==void 0?f:o[2][2],B=(N*(g-b)*(_-$)+L*(g-R)*(_-x)+F*(g-T)*(_-P)-F*(g-b)*(_-x)-N*(g-R)*(_-P)-L*(g-T)*(_-$))/((g-b)*(_-$)+(g-R)*(_-x)+(g-T)*(_-P)-(g-b)*(_-x)-(g-R)*(_-P)-(g-T)*(_-$));return B}Vk.exports=Xq;Vk.exports.default=Xq;var Jce=Vk.exports,Gk={};Object.defineProperty(Gk,"__esModule",{value:!0});var Qce=Vt;function efe(e){var t,r,n={type:"FeatureCollection",features:[]};if(e.type==="Feature"?r=e.geometry:r=e,r.type==="LineString")t=[r.coordinates];else if(r.type==="MultiLineString")t=r.coordinates;else if(r.type==="MultiPolygon")t=[].concat.apply([],r.coordinates);else if(r.type==="Polygon")t=r.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return t.forEach(function(i){t.forEach(function(o){for(var s=0;s<i.length-1;s++)for(var a=s;a<o.length-1;a++)if(!(i===o&&(Math.abs(s-a)===1||s===0&&a===i.length-2&&i[s][0]===i[i.length-1][0]&&i[s][1]===i[i.length-1][1]))){var d=tfe(i[s][0],i[s][1],i[s+1][0],i[s+1][1],o[a][0],o[a][1],o[a+1][0],o[a+1][1]);d&&n.features.push(Qce.point([d[0],d[1]]))}})}),n}Gk.default=efe;function tfe(e,t,r,n,i,o,s,a){var d,f,g,_,b,P={x:null,y:null,onLine1:!1,onLine2:!1};return d=(a-o)*(r-e)-(s-i)*(n-t),d===0?P.x!==null&&P.y!==null?P:!1:(f=t-o,g=e-i,_=(s-i)*f-(a-o)*g,b=(r-e)*f-(n-t)*g,f=_/d,g=b/d,P.x=e+f*(r-e),P.y=t+f*(n-t),f>=0&&f<=1&&(P.onLine1=!0),g>=0&&g<=1&&(P.onLine2=!0),P.onLine1&&P.onLine2?[P.x,P.y]:!1)}var qk={exports:{}},rfe=KE,nfe=ev,ife=P_,ofe=nu,i0=Vt;function rS(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var afe=rS(rfe),sfe=rS(nfe),ufe=rS(ife),lfe=rS(ofe);function Yq(e){for(var t=cfe(e),r=sfe.default(t),n=!1,i=0;!n&&i<t.features.length;){var o=t.features[i].geometry,s,a,d,f,g,_,b,P=!1;if(o.type==="Point")r.geometry.coordinates[0]===o.coordinates[0]&&r.geometry.coordinates[1]===o.coordinates[1]&&(n=!0);else if(o.type==="MultiPoint"){var L=!1;for(b=0;!L&&b<o.coordinates.length;)r.geometry.coordinates[0]===o.coordinates[b][0]&&r.geometry.coordinates[1]===o.coordinates[b][1]&&(n=!0,L=!0),b++}else if(o.type==="LineString")for(b=0;!P&&b<o.coordinates.length-1;)s=r.geometry.coordinates[0],a=r.geometry.coordinates[1],d=o.coordinates[b][0],f=o.coordinates[b][1],g=o.coordinates[b+1][0],_=o.coordinates[b+1][1],z6(s,a,d,f,g,_)&&(P=!0,n=!0),b++;else if(o.type==="MultiLineString")for(var R=0;R<o.coordinates.length;){P=!1,b=0;for(var $=o.coordinates[R];!P&&b<$.length-1;)s=r.geometry.coordinates[0],a=r.geometry.coordinates[1],d=$[b][0],f=$[b][1],g=$[b+1][0],_=$[b+1][1],z6(s,a,d,f,g,_)&&(P=!0,n=!0),b++;R++}else(o.type==="Polygon"||o.type==="MultiPolygon")&&lfe.default(r,o)&&(n=!0);i++}if(n)return r;var F=i0.featureCollection([]);for(i=0;i<t.features.length;i++)F.features=F.features.concat(afe.default(t.features[i]).features);return i0.point(ufe.default(r,F).geometry.coordinates)}function cfe(e){return e.type!=="FeatureCollection"?e.type!=="Feature"?i0.featureCollection([i0.feature(e)]):i0.featureCollection([e]):e}function z6(e,t,r,n,i,o){var s=Math.sqrt((i-r)*(i-r)+(o-n)*(o-n)),a=Math.sqrt((e-r)*(e-r)+(t-n)*(t-n)),d=Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));return s===a+d}qk.exports=Yq;qk.exports.default=Yq;var ffe=qk.exports,A_={};Object.defineProperty(A_,"__esModule",{value:!0});var hfe=ur,B6=6378137;function dfe(e){return hfe.geomReduce(e,function(t,r){return t+pfe(r)},0)}A_.default=dfe;function pfe(e){var t=0,r;switch(e.type){case"Polygon":return j6(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=j6(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function j6(e){var t=0;if(e&&e.length>0){t+=Math.abs(U6(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(U6(e[r]))}return t}function U6(e){var t,r,n,i,o,s,a,d=0,f=e.length;if(f>2){for(a=0;a<f;a++)a===f-2?(i=f-2,o=f-1,s=0):a===f-1?(i=f-1,o=0,s=1):(i=a,o=a+1,s=a+2),t=e[i],r=e[o],n=e[s],d+=(AI(n[0])-AI(t[0]))*Math.sin(AI(r[1]));d=d*B6*B6/2}return d}function AI(e){return e*Math.PI/180}var Wk={},Xk=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wk,"__esModule",{value:!0});var mfe=Xk(Sd),gfe=Xk(dh),vfe=Xk(wa),V6=Vt,yfe=Er;function _fe(e,t,r){r===void 0&&(r={});for(var n=yfe.getGeom(e),i=n.coordinates,o=0,s=0;s<i.length&&!(t>=o&&s===i.length-1);s++)if(o>=t){var a=t-o;if(a){var d=mfe.default(i[s],i[s-1])-180,f=gfe.default(i[s],a,d,r);return f}else return V6.point(i[s])}else o+=vfe.default(i[s],i[s+1],r);return V6.point(i[i.length-1])}Wk.default=_fe;var nS={},bfe=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nS,"__esModule",{value:!0});var xfe=bfe(wa),wfe=ur;function Efe(e,t){return t===void 0&&(t={}),wfe.segmentReduce(e,function(r,n){var i=n.geometry.coordinates;return r+xfe.default(i[0],i[1],t)},0)}nS.default=Efe;var Yk={exports:{}},G6=Er,Sfe=Vt,Pfe=tv;function Afe(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var q6=Afe(Pfe);function Hq(e,t,r){var n=G6.getCoords(r);if(G6.getType(r)!=="LineString")throw new Error("line must be a LineString");var i=q6.default(r,e),o=q6.default(r,t),s;i.properties.index<=o.properties.index?s=[i,o]:s=[o,i];for(var a=[s[0].geometry.coordinates],d=s[0].properties.index+1;d<s[1].properties.index+1;d++)a.push(n[d]);return a.push(s[1].geometry.coordinates),Sfe.lineString(a,r.properties)}Yk.exports=Hq;Yk.exports.default=Hq;var Cfe=Yk.exports,Hk={exports:{}},Ife=Sd,Ofe=wa,Tfe=dh,Am=Vt;function Zk(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var W6=Zk(Ife),Mfe=Zk(Ofe),X6=Zk(Tfe);function Zq(e,t,r,n){if(n=n||{},!Am.isObject(n))throw new Error("options is invalid");var i,o=[];if(e.type==="Feature")i=e.geometry.coordinates;else if(e.type==="LineString")i=e.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var s=i.length,a=0,d,f,g,_=0;_<i.length&&!(t>=a&&_===i.length-1);_++){if(a>t&&o.length===0){if(d=t-a,!d)return o.push(i[_]),Am.lineString(o);f=W6.default(i[_],i[_-1])-180,g=X6.default(i[_],d,f,n),o.push(g.geometry.coordinates)}if(a>=r)return d=r-a,d?(f=W6.default(i[_],i[_-1])-180,g=X6.default(i[_],d,f,n),o.push(g.geometry.coordinates),Am.lineString(o)):(o.push(i[_]),Am.lineString(o));if(a>=t&&o.push(i[_]),_===i.length-1)return Am.lineString(o);a+=Mfe.default(i[_],i[_+1],n)}if(a<t&&i.length===s)throw new Error("Start position is beyond line");var b=i[i.length-1];return Am.lineString([b,b])}Hk.exports=Zq;Hk.exports.default=Zq;var Kq=Hk.exports,iS={},oS={},nv={};Object.defineProperty(nv,"__esModule",{value:!0});var Y6=Er;function Lfe(e,t,r){r===void 0&&(r={});for(var n=Y6.getCoord(e),i=Y6.getCoords(t),o=0;o<i.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(o===0&&(s="start"),o===i.length-2&&(s="end"),o===0&&o+1===i.length-1&&(s="both")),Rfe(i[o],i[o+1],n,s,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function Rfe(e,t,r,n,i){var o=r[0],s=r[1],a=e[0],d=e[1],f=t[0],g=t[1],_=r[0]-a,b=r[1]-d,P=f-a,L=g-d,R=_*L-b*P;if(i!==null){if(Math.abs(R)>i)return!1}else if(R!==0)return!1;if(n){if(n==="start")return Math.abs(P)>=Math.abs(L)?P>0?a<o&&o<=f:f<=o&&o<a:L>0?d<s&&s<=g:g<=s&&s<d;if(n==="end")return Math.abs(P)>=Math.abs(L)?P>0?a<=o&&o<f:f<o&&o<=a:L>0?d<=s&&s<g:g<s&&s<=d;if(n==="both")return Math.abs(P)>=Math.abs(L)?P>0?a<o&&o<f:f<o&&o<a:L>0?d<s&&s<g:g<s&&s<d}else return Math.abs(P)>=Math.abs(L)?P>0?a<=o&&o<=f:f<=o&&o<=a:L>0?d<=s&&s<=g:g<=s&&s<=d;return!1}nv.default=Lfe;var Kk=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oS,"__esModule",{value:!0});var ww=Kk(Ps),Ew=Kk(nv),sp=Kk(nu),H6=Er;function kfe(e,t){var r=H6.getGeom(e),n=H6.getGeom(t),i=r.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return Dfe(r,n);case"LineString":return Ew.default(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return sp.default(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return Nfe(r,n);case"LineString":return Ffe(r,n);case"Polygon":case"MultiPolygon":return $fe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return zfe(r,n);case"Polygon":case"MultiPolygon":return Bfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return jfe(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Dfe(e,t){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(Qq(t.coordinates[r],e.coordinates)){n=!0;break}return n}function Nfe(e,t){for(var r=0;r<e.coordinates.length;r++){for(var n=!1,i=0;i<t.coordinates.length;i++)Qq(e.coordinates[r],t.coordinates[i])&&(n=!0);if(!n)return!1}return!0}function Ffe(e,t){for(var r=!1,n=0;n<e.coordinates.length;n++){if(!Ew.default(e.coordinates[n],t))return!1;r||(r=Ew.default(e.coordinates[n],t,{ignoreEndVertices:!0}))}return r}function $fe(e,t){for(var r=!0,n=!1,i=0;i<e.coordinates.length;i++){if(n=sp.default(e.coordinates[1],t),!n){r=!1;break}n=sp.default(e.coordinates[1],t,{ignoreBoundary:!0})}return r&&n}function zfe(e,t){for(var r=0;r<e.coordinates.length;r++)if(!Ew.default(e.coordinates[r],t))return!1;return!0}function Bfe(e,t){var r=ww.default(t),n=ww.default(e);if(!Jq(r,n))return!1;for(var i=!1,o=0;o<e.coordinates.length-1;o++){if(!sp.default(e.coordinates[o],t))return!1;if(i||(i=sp.default(e.coordinates[o],t,{ignoreBoundary:!0})),!i){var s=Ufe(e.coordinates[o],e.coordinates[o+1]);i=sp.default(s,t,{ignoreBoundary:!0})}}return i}function jfe(e,t){var r=ww.default(e),n=ww.default(t);if(!Jq(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!sp.default(e.coordinates[0][i],t))return!1;return!0}function Jq(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function Qq(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ufe(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}oS.default=kfe;var eW=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iS,"__esModule",{value:!0});var Vfe=eW(oS),Z6=eW(wa),K6=Vt;function Gfe(e,t,r){r===void 0&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var n=[],i=e[0],o=e[1],s=e[2],a=e[3],d=t/Z6.default([i,o],[s,o],r),f=d*(s-i),g=t/Z6.default([i,o],[i,a],r),_=g*(a-o),b=s-i,P=a-o,L=Math.floor(b/f),R=Math.floor(P/_),$=(b-L*f)/2,F=(P-R*_)/2,T=i+$;T<=s;){for(var x=o+F;x<=a;){var N=K6.point([T,x],r.properties);r.mask?Vfe.default(N,r.mask)&&n.push(N):n.push(N),x+=_}T+=f}return K6.featureCollection(n)}iS.default=Gfe;var aS={};Object.defineProperty(aS,"__esModule",{value:!0});var qfe=ur;function Wfe(e,t){t===void 0&&(t={});var r=t.precision,n=t.coordinates,i=t.mutate;if(r=r==null||isNaN(r)?6:r,n=n==null||isNaN(n)?3:n,!e)throw new Error("<geojson> is required");if(typeof r!="number")throw new Error("<precision> must be a number");if(typeof n!="number")throw new Error("<coordinates> must be a number");(i===!1||i===void 0)&&(e=JSON.parse(JSON.stringify(e)));var o=Math.pow(10,r);return qfe.coordEach(e,function(s){Xfe(s,o,n)}),e}function Xfe(e,t,r){e.length>r&&e.splice(r,e.length);for(var n=0;n<e.length;n++)e[n]=Math.round(e[n]*t)/t;return e}aS.default=Wfe;var Jk={exports:{}},Yfe=ur,Hfe=Vt;function tW(e){if(!e)throw new Error("geojson is required");var t=[];return Yfe.flattenEach(e,function(r){t.push(r)}),Hfe.featureCollection(t)}Jk.exports=tW;Jk.exports.default=tW;var rW=Jk.exports,Qk={exports:{}},Zfe=nS,Kfe=Kq,Jfe=ur,J6=Vt;function nW(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Qfe=nW(Zfe),ehe=nW(Kfe);function iW(e,t,r){if(r=r||{},!J6.isObject(r))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return Jfe.flattenEach(e,function(s){i&&(s.geometry.coordinates=s.geometry.coordinates.reverse()),the(s,t,n,function(a){o.push(a)})}),J6.featureCollection(o)}function the(e,t,r,n){var i=Qfe.default(e,{units:r});if(i<=t)return n(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=ehe.default(e,t*s,t*(s+1),{units:r});n(a,s)}}Qk.exports=iW;Qk.exports.default=iW;var rhe=Qk.exports,eD={exports:{}},Q6=ur,ng=Vt,nhe=mq,ihe=A_,ohe=nu;function tD(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var oW=tD(nhe),ahe=tD(ihe),she=tD(ohe);function uhe(e,t,r){if(e.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");r===void 0&&(r=1);var n=e.geometry.coordinates,i=[],o={};if(r){for(var s=[],a=0;a<n.length;a++)for(var d=0;d<n[a].length-1;d++)s.push($(a,d));var f=oW.default();f.load(s)}for(var g=0;g<n.length;g++)for(var _=0;_<n[g].length-1;_++)if(r){var b=f.search($(g,_));b.forEach(function(F){var T=F.ring,x=F.edge;R(g,_,T,x)})}else for(var P=0;P<n.length;P++)for(var L=0;L<n[P].length-1;L++)R(g,_,P,L);return t||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function R(F,T,x,N){var B=n[F][T],H=n[F][T+1],Z=n[x][N],Y=n[x][N+1],W=lhe(B,H,Z,Y);if(W!==null){var Q,me;if(H[0]!==B[0]?Q=(W[0]-B[0])/(H[0]-B[0]):Q=(W[1]-B[1])/(H[1]-B[1]),Y[0]!==Z[0]?me=(W[0]-Z[0])/(Y[0]-Z[0]):me=(W[1]-Z[1])/(Y[1]-Z[1]),!(Q>=1||Q<=0||me>=1||me<=0)){var ge=W,be=!o[ge];be&&(o[ge]=!0),t?i.push(t(W,F,T,B,H,Q,x,N,Z,Y,me,be)):i.push(W)}}}function $(F,T){var x=n[F][T],N=n[F][T+1],B,H,Z,Y;return x[0]<N[0]?(B=x[0],H=N[0]):(B=N[0],H=x[0]),x[1]<N[1]?(Z=x[1],Y=N[1]):(Z=N[1],Y=x[1]),{minX:B,minY:Z,maxX:H,maxY:Y,ring:F,edge:T}}}function lhe(e,t,r,n){if(Dy(e,r)||Dy(e,n)||Dy(t,r)||Dy(n,r))return null;var i=e[0],o=e[1],s=t[0],a=t[1],d=r[0],f=r[1],g=n[0],_=n[1],b=(i-s)*(f-_)-(o-a)*(d-g);if(b===0)return null;var P=((i*a-o*s)*(d-g)-(i-s)*(d*_-f*g))/b,L=((i*a-o*s)*(f-_)-(o-a)*(d*_-f*g))/b;return[P,L]}function Dy(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!Dy(e[r],t[r]))return!1}else if(e[r]!==t[r])return!1;return!0}function che(e){if(e.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(e.geometry===void 0||e.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(e.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,r=[],T=0;T<t;T++){var n=e.geometry.coordinates[T];Ny(n[0],n[n.length-1])||n.push(n[0]),r.push.apply(r,n.slice(0,n.length-1))}if(!hhe(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var i=r.length,o=uhe(e,function(Le,Xe,$e,at,_t,Lt,pt,Ot,vt,Ze,Zt,rr){return[Le,Xe,$e,at,_t,Lt,pt,Ot,vt,Ze,Zt,rr]}),s=o.length;if(s==0){for(var Z=[],T=0;T<t;T++)Z.push(ng.polygon([e.geometry.coordinates[T]],{parent:-1,winding:fhe(e.geometry.coordinates[T])}));var re=ng.featureCollection(Z);return ie(),he(),re}for(var a=[],d=[],T=0;T<t;T++){a.push([]);for(var f=0;f<e.geometry.coordinates[T].length-1;f++)a[T].push([new e$(e.geometry.coordinates[T][ig(f+1,e.geometry.coordinates[T].length-1)],1,[T,f],[T,ig(f+1,e.geometry.coordinates[T].length-1)],void 0)]),d.push(new t$(e.geometry.coordinates[T][f],[T,ig(f-1,e.geometry.coordinates[T].length-1)],[T,f],void 0,void 0,!1,!0))}for(var T=0;T<s;T++)a[o[T][1]][o[T][2]].push(new e$(o[T][0],o[T][5],[o[T][1],o[T][2]],[o[T][6],o[T][7]],void 0)),o[T][11]&&d.push(new t$(o[T][0],[o[T][1],o[T][2]],[o[T][6],o[T][7]],void 0,void 0,!0,!0));for(var g=d.length,T=0;T<a.length;T++)for(var f=0;f<a[T].length;f++)a[T][f].sort(function(Xe,$e){return Xe.param<$e.param?-1:1});for(var _=[],T=0;T<g;T++)_.push({minX:d[T].coord[0],minY:d[T].coord[1],maxX:d[T].coord[0],maxY:d[T].coord[1],index:T});var b=oW.default();b.load(_);for(var T=0;T<a.length;T++)for(var f=0;f<a[T].length;f++)for(var P=0;P<a[T][f].length;P++){var L;P==a[T][f].length-1?L=a[T][ig(f+1,e.geometry.coordinates[T].length-1)][0].coord:L=a[T][f][P+1].coord;var R=b.search({minX:L[0],minY:L[1],maxX:L[0],maxY:L[1]})[0];a[T][f][P].nxtIsectAlongEdgeIn=R.index}for(var T=0;T<a.length;T++)for(var f=0;f<a[T].length;f++)for(var P=0;P<a[T][f].length;P++){var L=a[T][f][P].coord,R=b.search({minX:L[0],minY:L[1],maxX:L[0],maxY:L[1]})[0],$=R.index;$<i?d[$].nxtIsectAlongRingAndEdge2=a[T][f][P].nxtIsectAlongEdgeIn:Ny(d[$].ringAndEdge1,a[T][f][P].ringAndEdgeIn)?d[$].nxtIsectAlongRingAndEdge1=a[T][f][P].nxtIsectAlongEdgeIn:d[$].nxtIsectAlongRingAndEdge2=a[T][f][P].nxtIsectAlongEdgeIn}for(var F=[],T=0,f=0;f<t;f++){for(var x=T,P=0;P<e.geometry.coordinates[f].length-1;P++)d[T].coord[0]<d[x].coord[0]&&(x=T),T++;for(var N=d[x].nxtIsectAlongRingAndEdge2,P=0;P<d.length;P++)if(d[P].nxtIsectAlongRingAndEdge1==x||d[P].nxtIsectAlongRingAndEdge2==x){var B=P;break}var H=Fx([d[B].coord,d[x].coord,d[N].coord],!0)?1:-1;F.push({isect:x,parent:-1,winding:H})}F.sort(function(Te,Le){return d[Te.isect].coord>d[Le.isect].coord?-1:1});for(var Z=[];F.length>0;){var Y=F.pop(),W=Y.isect,Q=Y.parent,me=Y.winding,ge=Z.length,be=[d[W].coord],oe=W;if(d[W].ringAndEdge1Walkable)var Ie=d[W].ringAndEdge1,fe=d[W].nxtIsectAlongRingAndEdge1;else var Ie=d[W].ringAndEdge2,fe=d[W].nxtIsectAlongRingAndEdge2;for(;!Ny(d[W].coord,d[fe].coord);){be.push(d[fe].coord);for(var G=void 0,T=0;T<F.length;T++)if(F[T].isect==fe){G=T;break}if(G!=null&&F.splice(G,1),Ny(Ie,d[fe].ringAndEdge1)){if(Ie=d[fe].ringAndEdge2,d[fe].ringAndEdge2Walkable=!1,d[fe].ringAndEdge1Walkable){var K={isect:fe};Fx([d[oe].coord,d[fe].coord,d[d[fe].nxtIsectAlongRingAndEdge2].coord],me==1)?(K.parent=Q,K.winding=-me):(K.parent=ge,K.winding=me),F.push(K)}oe=fe,fe=d[fe].nxtIsectAlongRingAndEdge2}else{if(Ie=d[fe].ringAndEdge1,d[fe].ringAndEdge1Walkable=!1,d[fe].ringAndEdge2Walkable){var K={isect:fe};Fx([d[oe].coord,d[fe].coord,d[d[fe].nxtIsectAlongRingAndEdge1].coord],me==1)?(K.parent=Q,K.winding=-me):(K.parent=ge,K.winding=me),F.push(K)}oe=fe,fe=d[fe].nxtIsectAlongRingAndEdge1}}be.push(d[fe].coord),Z.push(ng.polygon([be],{index:ge,parent:Q,winding:me,netWinding:void 0}))}var re=ng.featureCollection(Z);ie(),he();function ie(){for(var Te=[],Le=0;Le<re.features.length;Le++)re.features[Le].properties.parent==-1&&Te.push(Le);if(Te.length>1)for(var Le=0;Le<Te.length;Le++){for(var Xe=-1,$e=1/0,at=0;at<re.features.length;at++)Te[Le]!=at&&she.default(re.features[Te[Le]].geometry.coordinates[0][0],re.features[at],{ignoreBoundary:!0})&&ahe.default(re.features[at])<$e&&(Xe=at);re.features[Te[Le]].properties.parent=Xe}}function he(){for(var Te=0;Te<re.features.length;Te++)if(re.features[Te].properties.parent==-1){var Le=re.features[Te].properties.winding;re.features[Te].properties.netWinding=Le,ae(Te,Le)}}function ae(Te,Le){for(var Xe=0;Xe<re.features.length;Xe++)if(re.features[Xe].properties.parent==Te){var $e=Le+re.features[Xe].properties.winding;re.features[Xe].properties.netWinding=$e,ae(Xe,$e)}}return re}var e$=function(e,t,r,n,i){this.coord=e,this.param=t,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},t$=function(e,t,r,n,i,o,s){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Fx(e,t){if(typeof t>"u"&&(t=!0),e.length!=3)throw new Error("This function requires an array of three points [x,y]");var r=(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0]);return r>=0==t}function fhe(e){for(var t=0,r=0;r<e.length-1;r++)e[r][0]<e[t][0]&&(t=r);if(Fx([e[ig(t-1,e.length-1)],e[t],e[ig(t+1,e.length-1)]],!0))var n=1;else var n=-1;return n}function Ny(e,t){if(!e||!t||e.length!=t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!Ny(e[r],t[r]))return!1}else if(e[r]!=t[r])return!1;return!0}function ig(e,t){return(e%t+t)%t}function hhe(e){for(var t={},r=1,n=0,i=e.length;n<i;++n){if(Object.prototype.hasOwnProperty.call(t,e[n])){r=0;break}t[e[n]]=1}return r}function aW(e){var t=[];return Q6.flattenEach(e,function(r){r.geometry.type==="Polygon"&&Q6.featureEach(che(r),function(n){t.push(ng.polygon(n.geometry.coordinates,r.properties))})}),ng.featureCollection(t)}eD.exports=aW;eD.exports.default=aW;var dhe=eD.exports,rD={exports:{}},r$=Er,n$=Math.PI/180,i$=180/Math.PI,j0=function(e,t){this.lon=e,this.lat=t,this.x=n$*e,this.y=n$*t};j0.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};j0.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:(180-this.lon)*-1;return new j0(t,e)};var sW=function(){this.coords=[],this.length=0};sW.prototype.move_to=function(e){this.length++,this.coords.push(e)};var nD=function(e){this.properties=e||{},this.geometries=[]};nD.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}};nD.prototype.wkt=function(){for(var e="",t="LINESTRING(",r=function(o){t+=o[0]+" "+o[1]+","},n=0;n<this.geometries.length;n++){if(this.geometries[n].coords.length===0)return"LINESTRING(empty)";var i=this.geometries[n].coords;i.forEach(r),e+=t.substring(0,t.length-1)+")"}return e};var iD=function(e,t,r){if(!e||e.x===void 0||e.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||t.x===void 0||t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new j0(e.x,e.y),this.end=new j0(t.x,t.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};iD.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),r=Math.sin(e*this.g)/Math.sin(this.g),n=t*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=t*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=i$*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2))),a=i$*Math.atan2(i,n);return[a,s]};iD.prototype.Arc=function(e,t){var r=[];if(!e||e<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(e-1),i=0;i<e;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,d=0,f=t&&t.offset?t.offset:10,g=180-f,_=-180+f,b=360-f,P=1;P<r.length;++P){var L=r[P-1][0],R=r[P][0],$=Math.abs(R-L);$>b&&(R>g&&L<_||L>g&&R<_)?a=!0:$>d&&(d=$)}var F=[];if(a&&d<f){var T=[];F.push(T);for(var x=0;x<r.length;++x){var N=parseFloat(r[x][0]);if(x>0&&Math.abs(N-r[x-1][0])>b){var B=parseFloat(r[x-1][0]),H=parseFloat(r[x-1][1]),Z=parseFloat(r[x][0]),Y=parseFloat(r[x][1]);if(B>-180&&B<_&&Z===180&&x+1<r.length&&r[x-1][0]>-180&&r[x-1][0]<_){T.push([-180,r[x][1]]),x++,T.push([r[x][0],r[x][1]]);continue}else if(B>g&&B<180&&Z===-180&&x+1<r.length&&r[x-1][0]>g&&r[x-1][0]<180){T.push([180,r[x][1]]),x++,T.push([r[x][0],r[x][1]]);continue}if(B<_&&Z>g){var W=B;B=Z,Z=W;var Q=H;H=Y,Y=Q}if(B>g&&Z<_&&(Z+=360),B<=180&&Z>=180&&B<Z){var me=(180-B)/(Z-B),ge=me*Y+(1-me)*H;T.push([r[x-1][0]>g?180:-180,ge]),T=[],T.push([r[x-1][0]>g?-180:180,ge]),F.push(T)}else T=[],F.push(T);T.push([N,r[x][1]])}else T.push([r[x][0],r[x][1]])}}else{var be=[];F.push(be);for(var oe=0;oe<r.length;++oe)be.push([r[oe][0],r[oe][1]])}for(var Ie=new nD(this.properties),fe=0;fe<F.length;++fe){var G=new sW;Ie.geometries.push(G);for(var K=F[fe],re=0;re<K.length;++re)G.move_to(K[re])}return Ie};function uW(e,t,r){if(r=r||{},typeof r!="object")throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;e=r$.getCoord(e),t=r$.getCoord(t),n=n||{},i=i||100,o=o||10;var s=new iD({x:e[0],y:e[1]},{x:t[0],y:t[1]},n),a=s.Arc(i,{offset:o});return a.json()}rD.exports=uW;rD.exports.default=uW;var phe=rD.exports,oD={exports:{}},mhe=jk,ghe=Aq,vhe=Ps,yhe=aS,_he=$p,bhe=Pd,xhe=tv,jh=Er,Sw=ur,Kd=Vt;function zp(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var lW=zp(mhe),whe=zp(ghe),Ehe=zp(vhe),She=zp(yhe),Phe=zp(_he),Ahe=zp(bhe),Che=zp(xhe);function cW(e,t){if(!e)throw new Error("line is required");if(!t)throw new Error("splitter is required");var r=jh.getType(e),n=jh.getType(t);if(r!=="LineString")throw new Error("line must be LineString");if(n==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(n==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=She.default(t,{precision:7});switch(n){case"Point":return lM(e,i);case"MultiPoint":return o$(e,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return o$(e,Ahe.default(e,i))}}function o$(e,t){var r=[],n=lW.default();return Sw.flattenEach(t,function(i){if(r.forEach(function(a,d){a.id=d}),!r.length)r=lM(e,i).features,r.forEach(function(a){a.bbox||(a.bbox=whe.default(Ehe.default(a)))}),n.load(Kd.featureCollection(r));else{var o=n.search(i);if(o.features.length){var s=fW(i,o);r=r.filter(function(a){return a.id!==s.id}),n.remove(s),Sw.featureEach(lM(s,i),function(a){r.push(a),n.insert(a)})}}}),Kd.featureCollection(r)}function lM(e,t){var r=[],n=jh.getCoords(e)[0],i=jh.getCoords(e)[e.geometry.coordinates.length-1];if(CI(n,jh.getCoord(t))||CI(i,jh.getCoord(t)))return Kd.featureCollection([e]);var o=lW.default(),s=Phe.default(e);o.load(s);var a=o.search(t);if(!a.features.length)return Kd.featureCollection([e]);var d=fW(t,a),f=[n],g=Sw.featureReduce(s,function(_,b,P){var L=jh.getCoords(b)[1],R=jh.getCoord(t);return P===d.id?(_.push(R),r.push(Kd.lineString(_)),CI(R,L)?[R]:[R,L]):(_.push(L),_)},f);return g.length>1&&r.push(Kd.lineString(g)),Kd.featureCollection(r)}function fW(e,t){if(!t.features.length)throw new Error("lines must contain features");if(t.features.length===1)return t.features[0];var r,n=1/0;return Sw.featureEach(t,function(i){var o=Che.default(i,e),s=o.properties.dist;s<n&&(r=i,n=s)}),r}function CI(e,t){return e[0]===t[0]&&e[1]===t[1]}oD.exports=cW;oD.exports.default=cW;var Ihe=oD.exports,sS={},hW=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sS,"__esModule",{value:!0});var Ohe=hW(S_),a$=hW(dh),s$=Vt;function The(e,t,r,n,i){i===void 0&&(i={});var o=i.steps||64,s=u$(r),a=u$(n),d=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(s===a)return s$.lineString(Ohe.default(e,t,i).geometry.coordinates[0],d);for(var f=s,g=s<a?a:a+360,_=f,b=[],P=0;_<g;)b.push(a$.default(e,t,_,i).geometry.coordinates),P++,_=f+P*360/o;return _>g&&b.push(a$.default(e,t,g,i).geometry.coordinates),s$.lineString(b,d)}sS.default=The;function u$(e){var t=e%360;return t<0&&(t+=360),t}var Ad={};Object.defineProperty(Ad,"__esModule",{value:!0});var cM=Vt,aD=Er;function Mhe(e,t){t===void 0&&(t={});var r=aD.getGeom(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),r.type){case"Polygon":return dW(r,t);case"MultiPolygon":return pW(r,t);default:throw new Error("invalid poly")}}Ad.default=Mhe;function dW(e,t){t===void 0&&(t={});var r=aD.getGeom(e),n=r.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return sD(n,i)}Ad.polygonToLine=dW;function pW(e,t){t===void 0&&(t={});var r=aD.getGeom(e),n=r.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},o=[];return n.forEach(function(s){o.push(sD(s,i))}),cM.featureCollection(o)}Ad.multiPolygonToLine=pW;function sD(e,t){return e.length>1?cM.multiLineString(e,t):cM.lineString(e[0],t)}Ad.coordsToLine=sD;var uD={},mW=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uD,"__esModule",{value:!0});var Lhe=mW(Ps),gW=Er,$x=Vt,Rhe=mW(ja);function khe(e,t){t===void 0&&(t={});var r,n,i,o=t.properties,s=(r=t.autoComplete)!==null&&r!==void 0?r:!0,a=(n=t.orderCoords)!==null&&n!==void 0?n:!0,d=(i=t.mutate)!==null&&i!==void 0?i:!1;switch(d||(e=Rhe.default(e)),e.type){case"FeatureCollection":var f=[];return e.features.forEach(function(g){f.push(gW.getCoords(l$(g,{},s,a)))}),$x.multiPolygon(f,o);default:return l$(e,o,s,a)}}function l$(e,t,r,n){t=t||(e.type==="Feature"?e.properties:{});var i=gW.getGeom(e),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(o=c$(o)),$x.polygon([o],t);case"MultiLineString":var a=[],d=0;return o.forEach(function(f){if(r&&(f=c$(f)),n){var g=Dhe(Lhe.default($x.lineString(f)));g>d?(a.unshift(f),d=g):a.push(f)}else a.push(f)}),$x.polygon(a,t);default:throw new Error("geometry type "+s+" is not supported")}}function c$(e){var t=e[0],r=t[0],n=t[1],i=e[e.length-1],o=i[0],s=i[1];return(r!==o||n!==s)&&e.push(t),e}function Dhe(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.abs(t-n)*Math.abs(r-i)}uD.default=khe;var lD={},uS={};Object.defineProperty(uS,"__esModule",{value:!0});function Nhe(e,t,r){var n=e.length,i=og(e[0],t),o=[],s,a,d,f,g;for(r||(r=[]),s=1;s<n;s++){for(f=e[s-1],g=e[s],a=d=og(g,t);;)if(i|a){if(i&a)break;i?(f=fM(f,g,i,t),i=og(f,t)):(g=fM(f,g,a,t),a=og(g,t))}else{o.push(f),a!==d?(o.push(g),s<n-1&&(r.push(o),o=[])):s===n-1&&o.push(g);break}i=d}return o.length&&r.push(o),r}uS.lineclip=Nhe;function Fhe(e,t){var r,n,i,o,s,a,d;for(n=1;n<=8;n*=2){for(r=[],i=e[e.length-1],o=!(og(i,t)&n),s=0;s<e.length;s++)a=e[s],d=!(og(a,t)&n),d!==o&&r.push(fM(i,a,n,t)),d&&r.push(a),i=a,o=d;if(e=r,!e.length)break}return r}uS.polygonclip=Fhe;function fM(e,t,r,n){return r&8?[e[0]+(t[0]-e[0])*(n[3]-e[1])/(t[1]-e[1]),n[3]]:r&4?[e[0]+(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1]),n[1]]:r&2?[n[2],e[1]+(t[1]-e[1])*(n[2]-e[0])/(t[0]-e[0])]:r&1?[n[0],e[1]+(t[1]-e[1])*(n[0]-e[0])/(t[0]-e[0])]:null}function og(e,t){var r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}Object.defineProperty(lD,"__esModule",{value:!0});var Db=Vt,$he=Er,vW=uS;function zhe(e,t){var r=$he.getGeom(e),n=r.type,i=e.type==="Feature"?e.properties:{},o=r.coordinates;switch(n){case"LineString":case"MultiLineString":{var s=[];return n==="LineString"&&(o=[o]),o.forEach(function(a){vW.lineclip(a,t,s)}),s.length===1?Db.lineString(s[0],i):Db.multiLineString(s,i)}case"Polygon":return Db.polygon(f$(o,t),i);case"MultiPolygon":return Db.multiPolygon(o.map(function(a){return f$(a,t)}),i);default:throw new Error("geometry "+n+" not supported")}}lD.default=zhe;function f$(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],s=vW.polygonclip(o,t);s.length>0&&((s[0][0]!==s[s.length-1][0]||s[0][1]!==s[s.length-1][1])&&s.push(s[0]),s.length>=4&&r.push(s))}return r}var lS={},h$=Object.prototype.toString,yW=function(t){var r=h$.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&h$.call(t.callee)==="[object Function]"),n},II,d$;function Bhe(){if(d$)return II;d$=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=yW,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(b){var P=b.constructor;return P&&P.prototype===b},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},g=function(){if(typeof window>"u")return!1;for(var b in window)try{if(!f["$"+b]&&t.call(window,b)&&window[b]!==null&&typeof window[b]=="object")try{d(window[b])}catch{return!0}}catch{return!0}return!1}(),_=function(b){if(typeof window>"u"||!g)return d(b);try{return d(b)}catch{return!1}};e=function(P){var L=P!==null&&typeof P=="object",R=r.call(P)==="[object Function]",$=n(P),F=L&&r.call(P)==="[object String]",T=[];if(!L&&!R&&!$)throw new TypeError("Object.keys called on a non-object");var x=s&&R;if(F&&P.length>0&&!t.call(P,0))for(var N=0;N<P.length;++N)T.push(String(N));if($&&P.length>0)for(var B=0;B<P.length;++B)T.push(String(B));else for(var H in P)!(x&&H==="prototype")&&t.call(P,H)&&T.push(String(H));if(o)for(var Z=_(P),Y=0;Y<a.length;++Y)!(Z&&a[Y]==="constructor")&&t.call(P,a[Y])&&T.push(a[Y]);return T}}return II=e,II}var jhe=Array.prototype.slice,Uhe=yW,p$=Object.keys,zx=p$?function(t){return p$(t)}:Bhe(),m$=Object.keys;zx.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Uhe(n)?m$(jhe.call(n)):m$(n)})}else Object.keys=zx;return Object.keys||zx};var _W=zx,bW=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0},Vhe=bW,cD=function(){return Vhe()&&!!Symbol.toStringTag},g$=typeof Symbol<"u"&&Symbol,Ghe=bW,qhe=function(){return typeof g$!="function"||typeof Symbol!="function"||typeof g$("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ghe()},Whe="Function.prototype.bind called on incompatible ",OI=Array.prototype.slice,Xhe=Object.prototype.toString,Yhe="[object Function]",Hhe=function(t){var r=this;if(typeof r!="function"||Xhe.call(r)!==Yhe)throw new TypeError(Whe+r);for(var n=OI.call(arguments,1),i,o=function(){if(this instanceof i){var g=r.apply(this,n.concat(OI.call(arguments)));return Object(g)===g?g:this}else return r.apply(t,n.concat(OI.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],d=0;d<s;d++)a.push("$"+d);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var f=function(){};f.prototype=r.prototype,i.prototype=new f,f.prototype=null}return i},Zhe=Hhe,fD=Function.prototype.bind||Zhe,Khe=fD,Jhe=Khe.call(Function.call,Object.prototype.hasOwnProperty),Kn,Rg=SyntaxError,xW=Function,_g=TypeError,TI=function(e){try{return xW('"use strict"; return ('+e+").constructor;")()}catch{}},up=Object.getOwnPropertyDescriptor;if(up)try{up({},"")}catch{up=null}var MI=function(){throw new _g},Qhe=up?function(){try{return arguments.callee,MI}catch{try{return up(arguments,"callee").get}catch{return MI}}}():MI,Cm=qhe(),tf=Object.getPrototypeOf||function(e){return e.__proto__},jm={},ede=typeof Uint8Array>"u"?Kn:tf(Uint8Array),lp={"%AggregateError%":typeof AggregateError>"u"?Kn:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Kn:ArrayBuffer,"%ArrayIteratorPrototype%":Cm?tf([][Symbol.iterator]()):Kn,"%AsyncFromSyncIteratorPrototype%":Kn,"%AsyncFunction%":jm,"%AsyncGenerator%":jm,"%AsyncGeneratorFunction%":jm,"%AsyncIteratorPrototype%":jm,"%Atomics%":typeof Atomics>"u"?Kn:Atomics,"%BigInt%":typeof BigInt>"u"?Kn:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Kn:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Kn:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Kn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Kn:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Kn:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Kn:FinalizationRegistry,"%Function%":xW,"%GeneratorFunction%":jm,"%Int8Array%":typeof Int8Array>"u"?Kn:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Kn:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Kn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Cm?tf(tf([][Symbol.iterator]())):Kn,"%JSON%":typeof JSON=="object"?JSON:Kn,"%Map%":typeof Map>"u"?Kn:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Cm?Kn:tf(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Kn:Promise,"%Proxy%":typeof Proxy>"u"?Kn:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Kn:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Kn:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Cm?Kn:tf(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Kn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Cm?tf(""[Symbol.iterator]()):Kn,"%Symbol%":Cm?Symbol:Kn,"%SyntaxError%":Rg,"%ThrowTypeError%":Qhe,"%TypedArray%":ede,"%TypeError%":_g,"%Uint8Array%":typeof Uint8Array>"u"?Kn:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Kn:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Kn:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Kn:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Kn:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Kn:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Kn:WeakSet};try{null.error}catch(e){var tde=tf(tf(e));lp["%Error.prototype%"]=tde}var rde=function e(t){var r;if(t==="%AsyncFunction%")r=TI("async function () {}");else if(t==="%GeneratorFunction%")r=TI("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=TI("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&(r=tf(i.prototype))}return lp[t]=r,r},v$={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C_=fD,Pw=Jhe,nde=C_.call(Function.call,Array.prototype.concat),ide=C_.call(Function.apply,Array.prototype.splice),y$=C_.call(Function.call,String.prototype.replace),Aw=C_.call(Function.call,String.prototype.slice),ode=C_.call(Function.call,RegExp.prototype.exec),ade=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,sde=/\\(\\)?/g,ude=function(t){var r=Aw(t,0,1),n=Aw(t,-1);if(r==="%"&&n!=="%")throw new Rg("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Rg("invalid intrinsic syntax, expected opening `%`");var i=[];return y$(t,ade,function(o,s,a,d){i[i.length]=a?y$(d,sde,"$1"):s||o}),i},lde=function(t,r){var n=t,i;if(Pw(v$,n)&&(i=v$[n],n="%"+i[0]+"%"),Pw(lp,n)){var o=lp[n];if(o===jm&&(o=rde(n)),typeof o>"u"&&!r)throw new _g("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Rg("intrinsic "+t+" does not exist!")},hD=function(t,r){if(typeof t!="string"||t.length===0)throw new _g("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new _g('"allowMissing" argument must be a boolean');if(ode(/^%?[^%]*%?$/,t)===null)throw new Rg("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ude(t),i=n.length>0?n[0]:"",o=lde("%"+i+"%",r),s=o.name,a=o.value,d=!1,f=o.alias;f&&(i=f[0],ide(n,nde([0,1],f)));for(var g=1,_=!0;g<n.length;g+=1){var b=n[g],P=Aw(b,0,1),L=Aw(b,-1);if((P==='"'||P==="'"||P==="`"||L==='"'||L==="'"||L==="`")&&P!==L)throw new Rg("property names with quotes must have matching quotes");if((b==="constructor"||!_)&&(d=!0),i+="."+b,s="%"+i+"%",Pw(lp,s))a=lp[s];else if(a!=null){if(!(b in a)){if(!r)throw new _g("base intrinsic for "+t+" exists, but the property is not available.");return}if(up&&g+1>=n.length){var R=up(a,b);_=!!R,_&&"get"in R&&!("originalValue"in R.get)?a=R.get:a=a[b]}else _=Pw(a,b),a=a[b];_&&!d&&(lp[s]=a)}}return a},wW={exports:{}};(function(e){var t=fD,r=hD,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||t.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),d=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}e.exports=function(_){var b=o(t,i,arguments);if(s&&a){var P=s(b,"length");P.configurable&&a(b,"length",{value:1+d(0,_.length-(arguments.length-1))})}return b};var f=function(){return o(t,n,arguments)};a?a(e.exports,"apply",{value:f}):e.exports.apply=f})(wW);var dD=wW.exports,EW=hD,SW=dD,cde=SW(EW("String.prototype.indexOf")),PW=function(t,r){var n=EW(t,!!r);return typeof n=="function"&&cde(t,".prototype.")>-1?SW(n):n},fde=cD(),hde=PW,hM=hde("Object.prototype.toString"),cS=function(t){return fde&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:hM(t)==="[object Arguments]"},AW=function(t){return cS(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&hM(t)!=="[object Array]"&&hM(t.callee)==="[object Function]"},dde=function(){return cS(arguments)}();cS.isLegacyArguments=AW;var pde=dde?cS:AW,mde=hD,dM=mde("%Object.defineProperty%",!0),pM=function(){if(dM)try{return dM({},"a",{value:1}),!0}catch{return!1}return!1};pM.hasArrayLengthDefineBug=function(){if(!pM())return null;try{return dM([],"length",{value:1}).length!==1}catch{return!0}};var gde=pM,vde=_W,yde=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",_de=Object.prototype.toString,bde=Array.prototype.concat,CW=Object.defineProperty,xde=function(e){return typeof e=="function"&&_de.call(e)==="[object Function]"},wde=gde(),IW=CW&&wde,Ede=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!xde(n)||!n())return}IW?CW(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},OW=function(e,t){var r=arguments.length>2?arguments[2]:{},n=vde(t);yde&&(n=bde.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)Ede(e,n[i],t[n[i]],r[n[i]])};OW.supportsDescriptors=!!IW;var I_=OW,_$=function(e){return e!==e},TW=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||_$(t)&&_$(r))},Sde=TW,MW=function(){return typeof Object.is=="function"?Object.is:Sde},Pde=MW,Ade=I_,Cde=function(){var t=Pde();return Ade(Object,{is:t},{is:function(){return Object.is!==t}}),t},Ide=I_,Ode=dD,Tde=TW,LW=MW,Mde=Cde,RW=Ode(LW(),Object);Ide(RW,{getPolyfill:LW,implementation:Tde,shim:Mde});var Lde=RW,mM=PW,kW=cD(),DW,NW,gM,vM;if(kW){DW=mM("Object.prototype.hasOwnProperty"),NW=mM("RegExp.prototype.exec"),gM={};var LI=function(){throw gM};vM={toString:LI,valueOf:LI},typeof Symbol.toPrimitive=="symbol"&&(vM[Symbol.toPrimitive]=LI)}var Rde=mM("Object.prototype.toString"),kde=Object.getOwnPropertyDescriptor,Dde="[object RegExp]",Nde=kW?function(t){if(!t||typeof t!="object")return!1;var r=kde(t,"lastIndex"),n=r&&DW(r,"value");if(!n)return!1;try{NW(t,vM)}catch(i){return i===gM}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:Rde(t)===Dde},FW={exports:{}},U0=function(){return typeof(function(){}).name=="string"},o0=Object.getOwnPropertyDescriptor;if(o0)try{o0([],"length")}catch{o0=null}U0.functionsHaveConfigurableNames=function(){if(!U0()||!o0)return!1;var t=o0(function(){},"name");return!!t&&!!t.configurable};var Fde=Function.prototype.bind;U0.boundFunctionsHaveNames=function(){return U0()&&typeof Fde=="function"&&(function(){}).bind().name!==""};var $de=U0;(function(e){var t=$de.functionsHaveConfigurableNames(),r=Object,n=TypeError;e.exports=function(){if(this!=null&&this!==r(this))throw new n("RegExp.prototype.flags getter called on non-object");var o="";return this.hasIndices&&(o+="d"),this.global&&(o+="g"),this.ignoreCase&&(o+="i"),this.multiline&&(o+="m"),this.dotAll&&(o+="s"),this.unicode&&(o+="u"),this.unicodeSets&&(o+="v"),this.sticky&&(o+="y"),o},t&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})})(FW);var $W=FW.exports,zde=$W,Bde=I_.supportsDescriptors,jde=Object.getOwnPropertyDescriptor,zW=function(){if(Bde&&/a/mig.flags==="gim"){var t=jde(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return t.get}}return zde},Ude=I_.supportsDescriptors,Vde=zW,Gde=Object.getOwnPropertyDescriptor,qde=Object.defineProperty,Wde=TypeError,b$=Object.getPrototypeOf,Xde=/a/,Yde=function(){if(!Ude||!b$)throw new Wde("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=Vde(),r=b$(Xde),n=Gde(r,"flags");return(!n||n.get!==t)&&qde(r,"flags",{configurable:!0,enumerable:!1,get:t}),t},Hde=I_,Zde=dD,Kde=$W,BW=zW,Jde=Yde,jW=Zde(BW());Hde(jW,{getPolyfill:BW,implementation:Kde,shim:Jde});var Qde=jW,epe=Date.prototype.getDay,tpe=function(t){try{return epe.call(t),!0}catch{return!1}},rpe=Object.prototype.toString,npe="[object Date]",ipe=cD(),ope=function(t){return typeof t!="object"||t===null?!1:ipe?tpe(t):rpe.call(t)===npe},x$=_W,w$=pde,E$=Lde,S$=Nde,P$=Qde,A$=ope,C$=Date.prototype.getTime;function UW(e,t,r){var n=r||{};return(n.strict?E$(e,t):e===t)?!0:!e||!t||typeof e!="object"&&typeof t!="object"?n.strict?E$(e,t):e==t:ape(e,t,n)}function I$(e){return e==null}function O$(e){return!(!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number")}function ape(e,t,r){var n,i;if(typeof e!=typeof t||I$(e)||I$(t)||e.prototype!==t.prototype||w$(e)!==w$(t))return!1;var o=S$(e),s=S$(t);if(o!==s)return!1;if(o||s)return e.source===t.source&&P$(e)===P$(t);if(A$(e)&&A$(t))return C$.call(e)===C$.call(t);var a=O$(e),d=O$(t);if(a!==d)return!1;if(a||d){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(typeof e!=typeof t)return!1;try{var f=x$(e),g=x$(t)}catch{return!1}if(f.length!==g.length)return!1;for(f.sort(),g.sort(),n=f.length-1;n>=0;n--)if(f[n]!=g[n])return!1;for(n=f.length-1;n>=0;n--)if(i=f[n],!UW(e[i],t[i],r))return!1;return!0}var VW=UW,O_=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lS,"__esModule",{value:!0});var spe=O_(jk),upe=O_($p),Nb=O_(tv),Fb=O_(nv),Cw=Er,T$=ur,M$=Vt,Fy=O_(VW);function lpe(e,t,r){if(r===void 0&&(r={}),r=r||{},!M$.isObject(r))throw new Error("options is invalid");var n=r.tolerance||0,i=[],o=spe.default(),s=upe.default(e);o.load(s);var a;return T$.segmentEach(t,function(d){var f=!1;d&&(T$.featureEach(o.search(d),function(g){if(f===!1){var _=Cw.getCoords(d).sort(),b=Cw.getCoords(g).sort();Fy.default(_,b)||(n===0?Fb.default(_[0],g)&&Fb.default(_[1],g):Nb.default(g,_[0]).properties.dist<=n&&Nb.default(g,_[1]).properties.dist<=n)?(f=!0,a?a=RI(a,d):a=d):(n===0?Fb.default(b[0],d)&&Fb.default(b[1],d):Nb.default(d,b[0]).properties.dist<=n&&Nb.default(d,b[1]).properties.dist<=n)&&(a?a=RI(a,g):a=g)}}),f===!1&&a&&(i.push(a),a=void 0))}),a&&i.push(a),M$.featureCollection(i)}function RI(e,t){var r=Cw.getCoords(t),n=Cw.getCoords(e),i=n[0],o=n[n.length-1],s=e.geometry.coordinates;return Fy.default(r[0],i)?s.unshift(r[1]):Fy.default(r[0],o)?s.push(r[1]):Fy.default(r[1],i)?s.unshift(r[0]):Fy.default(r[1],o)&&s.push(r[0]),e}lS.default=lpe;var pD={exports:{}},cpe=S_,fpe=sS,hpe=ur,L$=Vt,dpe=Er;function GW(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var ppe=GW(cpe),mpe=GW(fpe);function qW(e,t,r,n,i){if(i=i||{},!L$.isObject(i))throw new Error("options is invalid");var o=i.properties;if(!e)throw new Error("center is required");if(r==null)throw new Error("bearing1 is required");if(n==null)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if(typeof i!="object")throw new Error("options must be an object");if(R$(r)===R$(n))return ppe.default(e,t,i);var s=dpe.getCoords(e),a=mpe.default(e,t,r,n,i),d=[[s]];return hpe.coordEach(a,function(f){d[0].push(f)}),d[0].push(s),L$.polygon(d,o)}function R$(e){var t=e%360;return t<0&&(t+=360),t}pD.exports=qW;pD.exports.default=qW;var gpe=pD.exports,Bp={};Object.defineProperty(Bp,"__esModule",{value:!0});var $b=Vt,zb=Er;function vpe(e,t,r){r===void 0&&(r={});var n;r.final?n=k$(zb.getCoord(t),zb.getCoord(e)):n=k$(zb.getCoord(e),zb.getCoord(t));var i=n>180?-(360-n):n;return i}function k$(e,t){var r=$b.degreesToRadians(e[1]),n=$b.degreesToRadians(t[1]),i=$b.degreesToRadians(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),s=Math.atan2(i,o);return($b.radiansToDegrees(s)+360)%360}Bp.default=vpe;var jp={};Object.defineProperty(jp,"__esModule",{value:!0});var a0=Vt,ype=Er;function _pe(e,t,r,n){n===void 0&&(n={});var i=t<0,o=a0.convertLength(Math.abs(t),n.units,"meters");i&&(o=-Math.abs(o));var s=ype.getCoord(e),a=bpe(s,o,r);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,a0.point(a,n.properties)}function bpe(e,t,r,n){n=n===void 0?a0.earthRadius:Number(n);var i=t/n,o=e[0]*Math.PI/180,s=a0.degreesToRadians(e[1]),a=a0.degreesToRadians(r),d=i*Math.cos(a),f=s+d;Math.abs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f);var g=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),_=Math.abs(g)>1e-11?d/g:Math.cos(s),b=i*Math.sin(a)/_,P=o+b;return[(P*180/Math.PI+540)%360-180,f*180/Math.PI]}jp.default=_pe;var mD={exports:{}},kI=Er,DI=Vt,xpe=Ps,wpe=KE,Epe=P_;function gD(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Spe=gD(xpe),Ppe=gD(wpe),Ape=gD(Epe);function WW(e,t){var r=kI.getCoords(e),n=kI.getCoords(t),i,o,s,a,d=Spe.default(t),f=0,g=null;r[0]>d[0]&&r[0]<d[2]&&r[1]>d[1]&&r[1]<d[3]&&(g=Ape.default(e,Ppe.default(t)),f=g.properties.featureIndex);var _=kI.getType(t);switch(_){case"Polygon":i=n[0][f],o=n[0][0],g!==null&&g.geometry.coordinates[1]<r[1]&&(o=n[0][f]),a=V0(n[0][0],n[0][n[0].length-1],r);var b=D$(n[0],r,a,s,i,o);i=b[0],o=b[1];break;case"MultiPolygon":for(var P=0,L=0,R=0,$=0;$<n[0].length;$++){P=$;for(var F=!1,T=0;T<n[0][$].length;T++){if(L=T,R===f){F=!0;break}R++}if(F)break}i=n[0][P][L],o=n[0][P][L],a=V0(n[0][0][0],n[0][0][n[0][0].length-1],r),n.forEach(function(x){var N=D$(x[0],r,a,s,i,o);i=N[0],o=N[1]});break}return DI.featureCollection([DI.point(i),DI.point(o)])}function D$(e,t,r,n,i,o){for(var s=0;s<e.length;s++){var a=e[s],d=e[s+1];s===e.length-1&&(d=e[0]),n=V0(a,d,t),r<=0&&n>0?Ipe(t,a,i)||(i=a):r>0&&n<=0&&(Cpe(t,a,o)||(o=a)),r=n}return[i,o]}function Cpe(e,t,r){return V0(e,t,r)>0}function Ipe(e,t,r){return V0(e,t,r)<0}function V0(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}mD.exports=WW;mD.exports.default=WW;var Ope=mD.exports,vD={exports:{}},fS={};Object.defineProperty(fS,"__esModule",{value:!0});var Tpe=Er;function Mpe(e){for(var t=Tpe.getCoords(e),r=0,n=1,i,o;n<t.length;)i=o||t[0],o=t[n],r+=(o[0]-i[0])*(o[1]+i[1]),n++;return r>0}fS.default=Mpe;var Lpe=ja,Rpe=fS,Bx=ur,Bb=Er,N$=Vt;function XW(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var kpe=XW(Lpe),yM=XW(Rpe);function YW(e,t){if(t=t||{},!N$.isObject(t))throw new Error("options is invalid");var r=t.reverse||!1,n=t.mutate||!1;if(!e)throw new Error("<geojson> is required");if(typeof r!="boolean")throw new Error("<reverse> must be a boolean");if(typeof n!="boolean")throw new Error("<mutate> must be a boolean");n===!1&&(e=kpe.default(e));var i=[];switch(e.type){case"GeometryCollection":return Bx.geomEach(e,function(o){jx(o,r)}),e;case"FeatureCollection":return Bx.featureEach(e,function(o){Bx.featureEach(jx(o,r),function(s){i.push(s)})}),N$.featureCollection(i)}return jx(e,r)}function jx(e,t){var r=e.type==="Feature"?e.geometry.type:e.type;switch(r){case"GeometryCollection":return Bx.geomEach(e,function(n){jx(n,t)}),e;case"LineString":return F$(Bb.getCoords(e),t),e;case"Polygon":return $$(Bb.getCoords(e),t),e;case"MultiLineString":return Bb.getCoords(e).forEach(function(n){F$(n,t)}),e;case"MultiPolygon":return Bb.getCoords(e).forEach(function(n){$$(n,t)}),e;case"Point":case"MultiPoint":return e}}function F$(e,t){yM.default(e)===t&&e.reverse()}function $$(e,t){yM.default(e[0])!==t&&e[0].reverse();for(var r=1;r<e.length;r++)yM.default(e[r])===t&&e[r].reverse()}vD.exports=YW;vD.exports.default=YW;var Dpe=vD.exports,yD={exports:{}},Npe=Ps,Fpe=A_,$pe=nu,zpe=KE,Vf=Er,Wf=Vt,Bpe=lk,jpe=ur;function T_(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Upe=T_(Npe),Vpe=T_(Fpe),Gpe=T_($pe),qpe=T_(zpe),Wpe=T_(Bpe);function Xpe(e,t){if(t=t||{},!Wf.isObject(t))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;Vf.collectionOf(e,"Point","input must contain Points");for(var o=Ype(e,n),s=[],a=0;a<o.length;a++){for(var d=o[a],f=[],g=0;g<d.length;g++){var _=d[g];_.properties[r]?f.push(_.properties[r]):f.push(0),i===!0&&(_.properties.matrixPosition=[a,g])}s.push(f)}return s}function Ype(e,t){var r={};jpe.featureEach(e,function(o){var s=Vf.getCoords(o)[1];r[s]||(r[s]=[]),r[s].push(o)});var n=Object.keys(r).map(function(o){var s=r[o],a=s.sort(function(d,f){return Vf.getCoords(d)[0]-Vf.getCoords(f)[0]});return a}),i=n.sort(function(o,s){return t?Vf.getCoords(o[0])[1]-Vf.getCoords(s[0])[1]:Vf.getCoords(s[0])[1]-Vf.getCoords(o[0])[1]});return i}/*!
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var z$={successCallback:null,verbose:!1,polygons:!1},jd={};function Hpe(e,t,r,n){n=n||{};for(var i=Object.keys(z$),o=0;o<i.length;o++){var s=i[o],a=n[s];a=typeof a<"u"&&a!==null?a:z$[s],jd[s]=a}jd.verbose;var d=Ime(e,t,r),f;return jd.polygons?(jd.verbose,f=kme(d)):(jd.verbose,f=Ome(d)),typeof jd.successCallback=="function"&&jd.successCallback(f),f}var ws=64,tc=16,Fa=4,ss=1,xn=[],wn=[],En=[],Sn=[],Pn=[],An=[],Cn=[],In=[],On=[],Tn=[],Mn=[],Ln=[],Rn=[],kn=[],Dn=[],Nn=[],Fn=[],$n=[],zn=[],Bn=[],jn=[],Un=[],Vn=[],Gn=[];Cn[85]=Tn[85]=-1;In[85]=Mn[85]=0;On[85]=Ln[85]=1;zn[85]=Un[85]=1;Bn[85]=Vn[85]=0;jn[85]=Gn[85]=1;xn[85]=Sn[85]=0;wn[85]=Pn[85]=-1;En[85]=Dn[85]=0;Nn[85]=Rn[85]=0;Fn[85]=kn[85]=1;An[85]=$n[85]=1;Un[1]=Un[169]=0;Vn[1]=Vn[169]=-1;Gn[1]=Gn[169]=0;Rn[1]=Rn[169]=-1;kn[1]=kn[169]=0;Dn[1]=Dn[169]=0;Tn[4]=Tn[166]=0;Mn[4]=Mn[166]=-1;Ln[4]=Ln[166]=1;Nn[4]=Nn[166]=1;Fn[4]=Fn[166]=0;$n[4]=$n[166]=0;Cn[16]=Cn[154]=0;In[16]=In[154]=1;On[16]=On[154]=1;Sn[16]=Sn[154]=1;Pn[16]=Pn[154]=0;An[16]=An[154]=1;zn[64]=zn[106]=0;Bn[64]=Bn[106]=1;jn[64]=jn[106]=0;xn[64]=xn[106]=-1;wn[64]=wn[106]=0;En[64]=En[106]=1;zn[2]=zn[168]=0;Bn[2]=Bn[168]=-1;jn[2]=jn[168]=1;Un[2]=Un[168]=0;Vn[2]=Vn[168]=-1;Gn[2]=Gn[168]=0;Rn[2]=Rn[168]=-1;kn[2]=kn[168]=0;Dn[2]=Dn[168]=0;Nn[2]=Nn[168]=-1;Fn[2]=Fn[168]=0;$n[2]=$n[168]=1;Cn[8]=Cn[162]=0;In[8]=In[162]=-1;On[8]=On[162]=0;Tn[8]=Tn[162]=0;Mn[8]=Mn[162]=-1;Ln[8]=Ln[162]=1;Rn[8]=Rn[162]=1;kn[8]=kn[162]=0;Dn[8]=Dn[162]=1;Nn[8]=Nn[162]=1;Fn[8]=Fn[162]=0;$n[8]=$n[162]=0;Cn[32]=Cn[138]=0;In[32]=In[138]=1;On[32]=On[138]=1;Tn[32]=Tn[138]=0;Mn[32]=Mn[138]=1;Ln[32]=Ln[138]=0;xn[32]=xn[138]=1;wn[32]=wn[138]=0;En[32]=En[138]=0;Sn[32]=Sn[138]=1;Pn[32]=Pn[138]=0;An[32]=An[138]=1;Un[128]=Un[42]=0;Vn[128]=Vn[42]=1;Gn[128]=Gn[42]=1;zn[128]=zn[42]=0;Bn[128]=Bn[42]=1;jn[128]=jn[42]=0;xn[128]=xn[42]=-1;wn[128]=wn[42]=0;En[128]=En[42]=1;Sn[128]=Sn[42]=-1;Pn[128]=Pn[42]=0;An[128]=An[42]=0;Tn[5]=Tn[165]=-1;Mn[5]=Mn[165]=0;Ln[5]=Ln[165]=0;Un[5]=Un[165]=1;Vn[5]=Vn[165]=0;Gn[5]=Gn[165]=0;Nn[20]=Nn[150]=0;Fn[20]=Fn[150]=1;$n[20]=$n[150]=1;Sn[20]=Sn[150]=0;Pn[20]=Pn[150]=-1;An[20]=An[150]=1;Cn[80]=Cn[90]=-1;In[80]=In[90]=0;On[80]=On[90]=1;zn[80]=zn[90]=1;Bn[80]=Bn[90]=0;jn[80]=jn[90]=1;Rn[65]=Rn[105]=0;kn[65]=kn[105]=1;Dn[65]=Dn[105]=0;xn[65]=xn[105]=0;wn[65]=wn[105]=-1;En[65]=En[105]=0;Cn[160]=Cn[10]=-1;In[160]=In[10]=0;On[160]=On[10]=1;Tn[160]=Tn[10]=-1;Mn[160]=Mn[10]=0;Ln[160]=Ln[10]=0;Un[160]=Un[10]=1;Vn[160]=Vn[10]=0;Gn[160]=Gn[10]=0;zn[160]=zn[10]=1;Bn[160]=Bn[10]=0;jn[160]=jn[10]=1;Nn[130]=Nn[40]=0;Fn[130]=Fn[40]=1;$n[130]=$n[40]=1;Rn[130]=Rn[40]=0;kn[130]=kn[40]=1;Dn[130]=Dn[40]=0;xn[130]=xn[40]=0;wn[130]=wn[40]=-1;En[130]=En[40]=0;Sn[130]=Sn[40]=0;Pn[130]=Pn[40]=-1;An[130]=An[40]=1;Tn[37]=Tn[133]=0;Mn[37]=Mn[133]=1;Ln[37]=Ln[133]=1;Un[37]=Un[133]=0;Vn[37]=Vn[133]=1;Gn[37]=Gn[133]=0;xn[37]=xn[133]=-1;wn[37]=wn[133]=0;En[37]=En[133]=0;Sn[37]=Sn[133]=1;Pn[37]=Pn[133]=0;An[37]=An[133]=0;Nn[148]=Nn[22]=-1;Fn[148]=Fn[22]=0;$n[148]=$n[22]=0;Un[148]=Un[22]=0;Vn[148]=Vn[22]=-1;Gn[148]=Gn[22]=1;zn[148]=zn[22]=0;Bn[148]=Bn[22]=1;jn[148]=jn[22]=1;Sn[148]=Sn[22]=-1;Pn[148]=Pn[22]=0;An[148]=An[22]=1;Cn[82]=Cn[88]=0;In[82]=In[88]=-1;On[82]=On[88]=1;Nn[82]=Nn[88]=1;Fn[82]=Fn[88]=0;$n[82]=$n[88]=1;Rn[82]=Rn[88]=-1;kn[82]=kn[88]=0;Dn[82]=Dn[88]=1;zn[82]=zn[88]=0;Bn[82]=Bn[88]=-1;jn[82]=jn[88]=0;Cn[73]=Cn[97]=0;In[73]=In[97]=1;On[73]=On[97]=0;Tn[73]=Tn[97]=0;Mn[73]=Mn[97]=-1;Ln[73]=Ln[97]=0;Rn[73]=Rn[97]=1;kn[73]=kn[97]=0;Dn[73]=Dn[97]=0;xn[73]=xn[97]=1;wn[73]=wn[97]=0;En[73]=En[97]=1;Cn[145]=Cn[25]=0;In[145]=In[25]=-1;On[145]=On[25]=0;Rn[145]=Rn[25]=1;kn[145]=kn[25]=0;Dn[145]=Dn[25]=1;Un[145]=Un[25]=0;Vn[145]=Vn[25]=1;Gn[145]=Gn[25]=1;Sn[145]=Sn[25]=-1;Pn[145]=Pn[25]=0;An[145]=An[25]=0;Tn[70]=Tn[100]=0;Mn[70]=Mn[100]=1;Ln[70]=Ln[100]=0;Nn[70]=Nn[100]=-1;Fn[70]=Fn[100]=0;$n[70]=$n[100]=1;zn[70]=zn[100]=0;Bn[70]=Bn[100]=-1;jn[70]=jn[100]=1;xn[70]=xn[100]=1;wn[70]=wn[100]=0;En[70]=En[100]=0;Tn[101]=Tn[69]=0;Mn[101]=Mn[69]=1;Ln[101]=Ln[69]=0;xn[101]=xn[69]=1;wn[101]=wn[69]=0;En[101]=En[69]=0;Un[149]=Un[21]=0;Vn[149]=Vn[21]=1;Gn[149]=Gn[21]=1;Sn[149]=Sn[21]=-1;Pn[149]=Pn[21]=0;An[149]=An[21]=0;Nn[86]=Nn[84]=-1;Fn[86]=Fn[84]=0;$n[86]=$n[84]=1;zn[86]=zn[84]=0;Bn[86]=Bn[84]=-1;jn[86]=jn[84]=1;Cn[89]=Cn[81]=0;In[89]=In[81]=-1;On[89]=On[81]=0;Rn[89]=Rn[81]=1;kn[89]=kn[81]=0;Dn[89]=Dn[81]=1;Cn[96]=Cn[74]=0;In[96]=In[74]=1;On[96]=On[74]=0;Tn[96]=Tn[74]=-1;Mn[96]=Mn[74]=0;Ln[96]=Ln[74]=1;zn[96]=zn[74]=1;Bn[96]=Bn[74]=0;jn[96]=jn[74]=0;xn[96]=xn[74]=1;wn[96]=wn[74]=0;En[96]=En[74]=1;Cn[24]=Cn[146]=0;In[24]=In[146]=-1;On[24]=On[146]=1;Nn[24]=Nn[146]=1;Fn[24]=Fn[146]=0;$n[24]=$n[146]=1;Rn[24]=Rn[146]=0;kn[24]=kn[146]=1;Dn[24]=Dn[146]=1;Sn[24]=Sn[146]=0;Pn[24]=Pn[146]=-1;An[24]=An[146]=0;Tn[6]=Tn[164]=-1;Mn[6]=Mn[164]=0;Ln[6]=Ln[164]=1;Nn[6]=Nn[164]=-1;Fn[6]=Fn[164]=0;$n[6]=$n[164]=0;Un[6]=Un[164]=0;Vn[6]=Vn[164]=-1;Gn[6]=Gn[164]=1;zn[6]=zn[164]=1;Bn[6]=Bn[164]=0;jn[6]=jn[164]=0;Rn[129]=Rn[41]=0;kn[129]=kn[41]=1;Dn[129]=Dn[41]=1;Un[129]=Un[41]=0;Vn[129]=Vn[41]=1;Gn[129]=Gn[41]=0;xn[129]=xn[41]=-1;wn[129]=wn[41]=0;En[129]=En[41]=0;Sn[129]=Sn[41]=0;Pn[129]=Pn[41]=-1;An[129]=An[41]=0;Nn[66]=Nn[104]=0;Fn[66]=Fn[104]=1;$n[66]=$n[104]=0;Rn[66]=Rn[104]=-1;kn[66]=kn[104]=0;Dn[66]=Dn[104]=1;zn[66]=zn[104]=0;Bn[66]=Bn[104]=-1;jn[66]=jn[104]=0;xn[66]=xn[104]=0;wn[66]=wn[104]=-1;En[66]=En[104]=1;Cn[144]=Cn[26]=-1;In[144]=In[26]=0;On[144]=On[26]=0;Un[144]=Un[26]=1;Vn[144]=Vn[26]=0;Gn[144]=Gn[26]=1;zn[144]=zn[26]=0;Bn[144]=Bn[26]=1;jn[144]=jn[26]=1;Sn[144]=Sn[26]=-1;Pn[144]=Pn[26]=0;An[144]=An[26]=1;Tn[36]=Tn[134]=0;Mn[36]=Mn[134]=1;Ln[36]=Ln[134]=1;Nn[36]=Nn[134]=0;Fn[36]=Fn[134]=1;$n[36]=$n[134]=0;xn[36]=xn[134]=0;wn[36]=wn[134]=-1;En[36]=En[134]=1;Sn[36]=Sn[134]=1;Pn[36]=Pn[134]=0;An[36]=An[134]=0;Cn[9]=Cn[161]=-1;In[9]=In[161]=0;On[9]=On[161]=0;Tn[9]=Tn[161]=0;Mn[9]=Mn[161]=-1;Ln[9]=Ln[161]=0;Rn[9]=Rn[161]=1;kn[9]=kn[161]=0;Dn[9]=Dn[161]=0;Un[9]=Un[161]=1;Vn[9]=Vn[161]=0;Gn[9]=Gn[161]=1;Cn[136]=0;In[136]=1;On[136]=1;Tn[136]=0;Mn[136]=1;Ln[136]=0;Nn[136]=-1;Fn[136]=0;$n[136]=1;Rn[136]=-1;kn[136]=0;Dn[136]=0;Un[136]=0;Vn[136]=-1;Gn[136]=0;zn[136]=0;Bn[136]=-1;jn[136]=1;xn[136]=1;wn[136]=0;En[136]=0;Sn[136]=1;Pn[136]=0;An[136]=1;Cn[34]=0;In[34]=-1;On[34]=0;Tn[34]=0;Mn[34]=-1;Ln[34]=1;Nn[34]=1;Fn[34]=0;$n[34]=0;Rn[34]=1;kn[34]=0;Dn[34]=1;Un[34]=0;Vn[34]=1;Gn[34]=1;zn[34]=0;Bn[34]=1;jn[34]=0;xn[34]=-1;wn[34]=0;En[34]=1;Sn[34]=-1;Pn[34]=0;An[34]=0;Cn[35]=0;In[35]=1;On[35]=1;Tn[35]=0;Mn[35]=-1;Ln[35]=1;Nn[35]=1;Fn[35]=0;$n[35]=0;Rn[35]=-1;kn[35]=0;Dn[35]=0;Un[35]=0;Vn[35]=-1;Gn[35]=0;zn[35]=0;Bn[35]=1;jn[35]=0;xn[35]=-1;wn[35]=0;En[35]=1;Sn[35]=1;Pn[35]=0;An[35]=1;Cn[153]=0;In[153]=1;On[153]=1;Rn[153]=-1;kn[153]=0;Dn[153]=0;Un[153]=0;Vn[153]=-1;Gn[153]=0;Sn[153]=1;Pn[153]=0;An[153]=1;Tn[102]=0;Mn[102]=-1;Ln[102]=1;Nn[102]=1;Fn[102]=0;$n[102]=0;zn[102]=0;Bn[102]=1;jn[102]=0;xn[102]=-1;wn[102]=0;En[102]=1;Cn[155]=0;In[155]=-1;On[155]=0;Rn[155]=1;kn[155]=0;Dn[155]=1;Un[155]=0;Vn[155]=1;Gn[155]=1;Sn[155]=-1;Pn[155]=0;An[155]=0;Tn[103]=0;Mn[103]=1;Ln[103]=0;Nn[103]=-1;Fn[103]=0;$n[103]=1;zn[103]=0;Bn[103]=-1;jn[103]=1;xn[103]=1;wn[103]=0;En[103]=0;Cn[152]=0;In[152]=1;On[152]=1;Nn[152]=-1;Fn[152]=0;$n[152]=1;Rn[152]=-1;kn[152]=0;Dn[152]=0;Un[152]=0;Vn[152]=-1;Gn[152]=0;zn[152]=0;Bn[152]=-1;jn[152]=1;Sn[152]=1;Pn[152]=0;An[152]=1;Cn[156]=0;In[156]=-1;On[156]=1;Nn[156]=1;Fn[156]=0;$n[156]=1;Rn[156]=-1;kn[156]=0;Dn[156]=0;Un[156]=0;Vn[156]=-1;Gn[156]=0;zn[156]=0;Bn[156]=1;jn[156]=1;Sn[156]=-1;Pn[156]=0;An[156]=1;Cn[137]=0;In[137]=1;On[137]=1;Tn[137]=0;Mn[137]=1;Ln[137]=0;Rn[137]=-1;kn[137]=0;Dn[137]=0;Un[137]=0;Vn[137]=-1;Gn[137]=0;xn[137]=1;wn[137]=0;En[137]=0;Sn[137]=1;Pn[137]=0;An[137]=1;Cn[139]=0;In[139]=1;On[139]=1;Tn[139]=0;Mn[139]=-1;Ln[139]=0;Rn[139]=1;kn[139]=0;Dn[139]=0;Un[139]=0;Vn[139]=1;Gn[139]=0;xn[139]=-1;wn[139]=0;En[139]=0;Sn[139]=1;Pn[139]=0;An[139]=1;Cn[98]=0;In[98]=-1;On[98]=0;Tn[98]=0;Mn[98]=-1;Ln[98]=1;Nn[98]=1;Fn[98]=0;$n[98]=0;Rn[98]=1;kn[98]=0;Dn[98]=1;zn[98]=0;Bn[98]=1;jn[98]=0;xn[98]=-1;wn[98]=0;En[98]=1;Cn[99]=0;In[99]=1;On[99]=0;Tn[99]=0;Mn[99]=-1;Ln[99]=1;Nn[99]=1;Fn[99]=0;$n[99]=0;Rn[99]=-1;kn[99]=0;Dn[99]=1;zn[99]=0;Bn[99]=-1;jn[99]=0;xn[99]=1;wn[99]=0;En[99]=1;Tn[38]=0;Mn[38]=-1;Ln[38]=1;Nn[38]=1;Fn[38]=0;$n[38]=0;Un[38]=0;Vn[38]=1;Gn[38]=1;zn[38]=0;Bn[38]=1;jn[38]=0;xn[38]=-1;wn[38]=0;En[38]=1;Sn[38]=-1;Pn[38]=0;An[38]=0;Tn[39]=0;Mn[39]=1;Ln[39]=1;Nn[39]=-1;Fn[39]=0;$n[39]=0;Un[39]=0;Vn[39]=-1;Gn[39]=1;zn[39]=0;Bn[39]=1;jn[39]=0;xn[39]=-1;wn[39]=0;En[39]=1;Sn[39]=1;Pn[39]=0;An[39]=0;var _D=function(e){return[[e.bottomleft,0],[0,0],[0,e.leftbottom]]},bD=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0]]},xD=function(e){return[[e.topright,1],[1,1],[1,e.righttop]]},wD=function(e){return[[0,e.lefttop],[0,1],[e.topleft,1]]},ED=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop]]},SD=function(e){return[[e.bottomright,0],[e.bottomleft,0],[1,e.righttop],[1,e.rightbottom]]},PD=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.topleft,1],[e.topright,1]]},AD=function(e){return[[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},Zpe=function(e){return[[0,0],[0,e.leftbottom],[1,e.rightbottom],[1,0]]},Kpe=function(e){return[[1,0],[e.bottomright,0],[e.topright,1],[1,1]]},Jpe=function(e){return[[1,1],[1,e.righttop],[0,e.lefttop],[0,1]]},Qpe=function(e){return[[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},eme=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.leftbottom],[0,e.lefttop]]},tme=function(e){return[[e.topleft,1],[e.topright,1],[e.bottomright,0],[e.bottomleft,0]]},rme=function(){return[[0,0],[0,1],[1,1],[1,0]]},nme=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,1],[e.topleft,1]]},ime=function(e){return[[e.topright,1],[1,1],[1,0],[0,0],[0,e.leftbottom]]},ome=function(e){return[[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[1,1]]},ame=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,1]]},sme=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.lefttop],[0,1],[e.topleft,1]]},ume=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[e.topright,1]]},lme=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop]]},cme=function(e){return[[e.topright,1],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1]]},fme=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},hme=function(e){return[[1,1],[1,e.righttop],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},dme=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[e.topleft,1],[e.topright,1]]},pme=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom]]},mme=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},gme=function(e){return[[1,1],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},vme=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1]]},yme=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},_me=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},bme=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},xme=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},wme=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},Eme=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},Sme=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},Pme=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},Ame=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},Cme=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},hr=[],sr=[],Mr=[],Ar=[],Gr=[],Ur=[],qn=[],Wn=[];Ar[1]=Gr[1]=18;Ar[169]=Gr[169]=18;Mr[4]=sr[4]=12;Mr[166]=sr[166]=12;hr[16]=Wn[16]=4;hr[154]=Wn[154]=4;Ur[64]=qn[64]=22;Ur[106]=qn[106]=22;Mr[2]=Ur[2]=17;Ar[2]=Gr[2]=18;Mr[168]=Ur[168]=17;Ar[168]=Gr[168]=18;hr[8]=Ar[8]=9;sr[8]=Mr[8]=12;hr[162]=Ar[162]=9;sr[162]=Mr[162]=12;hr[32]=Wn[32]=4;sr[32]=qn[32]=1;hr[138]=Wn[138]=4;sr[138]=qn[138]=1;Gr[128]=Wn[128]=21;Ur[128]=qn[128]=22;Gr[42]=Wn[42]=21;Ur[42]=qn[42]=22;sr[5]=Gr[5]=14;sr[165]=Gr[165]=14;Mr[20]=Wn[20]=6;Mr[150]=Wn[150]=6;hr[80]=Ur[80]=11;hr[90]=Ur[90]=11;Ar[65]=qn[65]=3;Ar[105]=qn[105]=3;hr[160]=Ur[160]=11;sr[160]=Gr[160]=14;hr[10]=Ur[10]=11;sr[10]=Gr[10]=14;Mr[130]=Wn[130]=6;Ar[130]=qn[130]=3;Mr[40]=Wn[40]=6;Ar[40]=qn[40]=3;sr[101]=qn[101]=1;sr[69]=qn[69]=1;Gr[149]=Wn[149]=21;Gr[21]=Wn[21]=21;Mr[86]=Ur[86]=17;Mr[84]=Ur[84]=17;hr[89]=Ar[89]=9;hr[81]=Ar[81]=9;hr[96]=qn[96]=0;sr[96]=Ur[96]=15;hr[74]=qn[74]=0;sr[74]=Ur[74]=15;hr[24]=Mr[24]=8;Ar[24]=Wn[24]=7;hr[146]=Mr[146]=8;Ar[146]=Wn[146]=7;sr[6]=Ur[6]=15;Mr[6]=Gr[6]=16;sr[164]=Ur[164]=15;Mr[164]=Gr[164]=16;Ar[129]=Wn[129]=7;Gr[129]=qn[129]=20;Ar[41]=Wn[41]=7;Gr[41]=qn[41]=20;Mr[66]=qn[66]=2;Ar[66]=Ur[66]=19;Mr[104]=qn[104]=2;Ar[104]=Ur[104]=19;hr[144]=Gr[144]=10;Ur[144]=Wn[144]=23;hr[26]=Gr[26]=10;Ur[26]=Wn[26]=23;sr[36]=Wn[36]=5;Mr[36]=qn[36]=2;sr[134]=Wn[134]=5;Mr[134]=qn[134]=2;hr[9]=Gr[9]=10;sr[9]=Ar[9]=13;hr[161]=Gr[161]=10;sr[161]=Ar[161]=13;sr[37]=Wn[37]=5;Gr[37]=qn[37]=20;sr[133]=Wn[133]=5;Gr[133]=qn[133]=20;Mr[148]=Gr[148]=16;Ur[148]=Wn[148]=23;Mr[22]=Gr[22]=16;Ur[22]=Wn[22]=23;hr[82]=Mr[82]=8;Ar[82]=Ur[82]=19;hr[88]=Mr[88]=8;Ar[88]=Ur[88]=19;hr[73]=qn[73]=0;sr[73]=Ar[73]=13;hr[97]=qn[97]=0;sr[97]=Ar[97]=13;hr[145]=Ar[145]=9;Gr[145]=Wn[145]=21;hr[25]=Ar[25]=9;Gr[25]=Wn[25]=21;sr[70]=qn[70]=1;Mr[70]=Ur[70]=17;sr[100]=qn[100]=1;Mr[100]=Ur[100]=17;hr[34]=Ar[34]=9;sr[34]=Mr[34]=12;Gr[34]=Wn[34]=21;Ur[34]=qn[34]=22;hr[136]=Wn[136]=4;sr[136]=qn[136]=1;Mr[136]=Ur[136]=17;Ar[136]=Gr[136]=18;hr[35]=Wn[35]=4;sr[35]=Mr[35]=12;Ar[35]=Gr[35]=18;Ur[35]=qn[35]=22;hr[153]=Wn[153]=4;Ar[153]=Gr[153]=18;sr[102]=Mr[102]=12;Ur[102]=qn[102]=22;hr[155]=Ar[155]=9;Gr[155]=Wn[155]=23;sr[103]=qn[103]=1;Mr[103]=Ur[103]=17;hr[152]=Wn[152]=4;Mr[152]=Ur[152]=17;Ar[152]=Gr[152]=18;hr[156]=Mr[156]=8;Ar[156]=Gr[156]=18;Ur[156]=Wn[156]=23;hr[137]=Wn[137]=4;sr[137]=qn[137]=1;Ar[137]=Gr[137]=18;hr[139]=Wn[139]=4;sr[139]=Ar[139]=13;Gr[139]=qn[139]=20;hr[98]=Ar[98]=9;sr[98]=Mr[98]=12;Ur[98]=qn[98]=22;hr[99]=qn[99]=0;sr[99]=Mr[99]=12;Ar[99]=Ur[99]=19;sr[38]=Mr[38]=12;Gr[38]=Wn[38]=21;Ur[38]=qn[38]=22;sr[39]=Wn[39]=5;Mr[39]=Gr[39]=16;Ur[39]=qn[39]=22;var Qt=[];Qt[1]=Qt[169]=_D;Qt[4]=Qt[166]=bD;Qt[16]=Qt[154]=xD;Qt[64]=Qt[106]=wD;Qt[168]=Qt[2]=ED;Qt[162]=Qt[8]=SD;Qt[138]=Qt[32]=PD;Qt[42]=Qt[128]=AD;Qt[5]=Qt[165]=Zpe;Qt[20]=Qt[150]=Kpe;Qt[80]=Qt[90]=Jpe;Qt[65]=Qt[105]=Qpe;Qt[160]=Qt[10]=eme;Qt[130]=Qt[40]=tme;Qt[85]=rme;Qt[101]=Qt[69]=nme;Qt[149]=Qt[21]=ime;Qt[86]=Qt[84]=ome;Qt[89]=Qt[81]=ame;Qt[96]=Qt[74]=sme;Qt[24]=Qt[146]=ume;Qt[6]=Qt[164]=lme;Qt[129]=Qt[41]=cme;Qt[66]=Qt[104]=fme;Qt[144]=Qt[26]=hme;Qt[36]=Qt[134]=dme;Qt[9]=Qt[161]=pme;Qt[37]=Qt[133]=mme;Qt[148]=Qt[22]=gme;Qt[82]=Qt[88]=vme;Qt[73]=Qt[97]=yme;Qt[145]=Qt[25]=_me;Qt[70]=Qt[100]=bme;Qt[34]=function(e){return[AD(e),SD(e)]};Qt[35]=xme;Qt[136]=function(e){return[PD(e),ED(e)]};Qt[153]=function(e){return[xD(e),_D(e)]};Qt[102]=function(e){return[bD(e),wD(e)]};Qt[155]=wme;Qt[103]=Eme;Qt[152]=function(e){return[xD(e),ED(e)]};Qt[156]=Sme;Qt[137]=function(e){return[PD(e),_D(e)]};Qt[139]=Pme;Qt[98]=function(e){return[SD(e),wD(e)]};Qt[99]=Ame;Qt[38]=function(e){return[bD(e),AD(e)]};Qt[39]=Cme;function Ee(e,t,r){return(e-t)/(r-t)}function NI(e){return e.constructor.toString().indexOf("Array")>-1}function Ime(e,t,r){for(var n=e.length-1,i=e[0].length-1,o={rows:n,cols:i,cells:[]},s=t+Math.abs(r),a=0;a<n;++a){o.cells[a]=[];for(var d=0;d<i;++d){var f=0,g=e[a+1][d],_=e[a+1][d+1],b=e[a][d+1],P=e[a][d];if(!(isNaN(g)||isNaN(_)||isNaN(b)||isNaN(P))){f|=g<t?0:g>s?128:64,f|=_<t?0:_>s?32:16,f|=b<t?0:b>s?8:4,f|=P<t?0:P>s?2:1;var L=+f,R=0;if(f===17||f===18||f===33||f===34||f===38||f===68||f===72||f===98||f===102||f===132||f===136||f===137||f===152||f===153){var $=(g+_+b+P)/4;R=$>s?2:$<t?0:1,f===34?R===1?f=35:R===0&&(f=136):f===136?R===1?(f=35,R=4):R===0&&(f=34):f===17?R===1?(f=155,R=4):R===0&&(f=153):f===68?R===1?(f=103,R=4):R===0&&(f=102):f===153?R===1&&(f=155):f===102?R===1&&(f=103):f===152?R<2&&(f=156,R=1):f===137?R<2&&(f=139,R=1):f===98?R<2&&(f=99,R=1):f===38?R<2&&(f=39,R=1):f===18?R>0?(f=156,R=4):f=152:f===33?R>0?(f=139,R=4):f=137:f===72?R>0?(f=99,R=4):f=98:f===132&&(R>0?(f=39,R=4):f=38)}if(f!=0&&f!=170){var F,T,x,N,B,H,Z,Y;F=T=x=N=B=H=Z=Y=.5;var W=[];f===1?(x=1-Ee(t,b,P),Y=1-Ee(t,g,P),W.push(Ar[f])):f===169?(x=Ee(s,P,b),Y=Ee(s,P,g),W.push(Ar[f])):f===4?(H=1-Ee(t,_,b),N=Ee(t,P,b),W.push(sr[f])):f===166?(H=Ee(s,b,_),N=1-Ee(s,b,P),W.push(sr[f])):f===16?(B=Ee(t,b,_),T=Ee(t,g,_),W.push(hr[f])):f===154?(B=1-Ee(s,_,b),T=1-Ee(s,_,g),W.push(hr[f])):f===64?(Z=Ee(t,P,g),F=1-Ee(t,_,g),W.push(Ur[f])):f===106?(Z=1-Ee(s,g,P),F=Ee(s,g,_),W.push(Ur[f])):f===168?(N=Ee(s,P,b),x=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),W.push(Mr[f]),W.push(Ar[f])):f===2?(N=1-Ee(t,b,P),x=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),W.push(Mr[f]),W.push(Ar[f])):f===162?(B=Ee(s,b,_),H=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),W.push(Mr[f]),W.push(Ar[f])):f===8?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),W.push(hr[f]),W.push(sr[f])):f===138?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),F=1-Ee(s,_,g),T=1-Ee(t,_,g),W.push(hr[f]),W.push(sr[f])):f===32?(B=Ee(s,b,_),H=Ee(t,b,_),F=Ee(t,g,_),T=Ee(s,g,_),W.push(hr[f]),W.push(sr[f])):f===42?(Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_),W.push(Gr[f]),W.push(Ur[f])):f===128&&(Y=Ee(t,P,g),Z=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g),W.push(Gr[f]),W.push(Ur[f])),f===5?(H=1-Ee(t,_,b),Y=1-Ee(t,g,P),W.push(sr[f])):f===165?(H=Ee(s,b,_),Y=Ee(s,P,g),W.push(sr[f])):f===20?(N=Ee(t,P,b),T=Ee(t,g,_),W.push(Mr[f])):f===150?(N=1-Ee(s,b,P),T=1-Ee(s,_,g),W.push(Mr[f])):f===80?(B=Ee(t,b,_),Z=Ee(t,P,g),W.push(hr[f])):f===90?(B=1-Ee(s,_,b),Z=1-Ee(s,g,P),W.push(hr[f])):f===65?(x=1-Ee(t,b,P),F=1-Ee(t,_,g),W.push(Ar[f])):f===105?(x=Ee(s,P,b),F=Ee(s,g,_),W.push(Ar[f])):f===160?(B=Ee(s,b,_),H=Ee(t,b,_),Y=Ee(t,P,g),Z=Ee(s,P,g),W.push(hr[f]),W.push(sr[f])):f===10?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),W.push(hr[f]),W.push(sr[f])):f===130?(N=1-Ee(t,b,P),x=1-Ee(s,b,P),F=1-Ee(s,_,g),T=1-Ee(t,_,g),W.push(Mr[f]),W.push(Ar[f])):f===40?(N=Ee(s,P,b),x=Ee(t,P,b),F=Ee(t,g,_),T=Ee(s,g,_),W.push(Mr[f]),W.push(Ar[f])):f===101?(H=Ee(s,b,_),F=Ee(s,g,_),W.push(sr[f])):f===69?(H=1-Ee(t,_,b),F=1-Ee(t,_,g),W.push(sr[f])):f===149?(Y=Ee(s,P,g),T=1-Ee(s,_,g),W.push(Gr[f])):f===21?(Y=1-Ee(t,g,P),T=Ee(t,g,_),W.push(Gr[f])):f===86?(N=1-Ee(s,b,P),Z=1-Ee(s,g,P),W.push(Mr[f])):f===84?(N=Ee(t,P,b),Z=Ee(t,P,g),W.push(Mr[f])):f===89?(B=1-Ee(s,_,b),x=Ee(s,P,b),W.push(Ar[f])):f===81?(B=Ee(t,b,_),x=1-Ee(t,b,P),W.push(Ar[f])):f===96?(B=Ee(s,b,_),H=Ee(t,b,_),Z=Ee(t,P,g),F=Ee(s,g,_),W.push(hr[f]),W.push(sr[f])):f===74?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),Z=1-Ee(s,g,P),F=1-Ee(t,_,g),W.push(hr[f]),W.push(sr[f])):f===24?(B=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),T=Ee(t,g,_),W.push(hr[f]),W.push(Ar[f])):f===146?(B=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),T=1-Ee(s,_,g),W.push(hr[f]),W.push(Ar[f])):f===6?(H=1-Ee(t,_,b),N=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),W.push(sr[f]),W.push(Mr[f])):f===164?(H=Ee(s,b,_),N=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),W.push(sr[f]),W.push(Mr[f])):f===129?(x=1-Ee(t,b,P),Y=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g),W.push(Ar[f]),W.push(Gr[f])):f===41?(x=Ee(s,P,b),Y=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_),W.push(Ar[f]),W.push(Gr[f])):f===66?(N=1-Ee(t,b,P),x=1-Ee(s,b,P),Z=1-Ee(s,g,P),F=1-Ee(t,_,g),W.push(Mr[f]),W.push(Ar[f])):f===104?(N=Ee(s,P,b),x=Ee(t,P,b),Z=Ee(t,P,g),F=Ee(s,g,_),W.push(Ar[f]),W.push(qn[f])):f===144?(B=Ee(t,b,_),Y=Ee(t,P,g),Z=Ee(s,P,g),T=1-Ee(s,_,g),W.push(hr[f]),W.push(Ur[f])):f===26?(B=1-Ee(s,_,b),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),T=Ee(t,g,_),W.push(hr[f]),W.push(Ur[f])):f===36?(H=Ee(s,b,_),N=Ee(t,P,b),F=Ee(t,g,_),T=Ee(s,g,_),W.push(sr[f]),W.push(Mr[f])):f===134?(H=1-Ee(t,_,b),N=1-Ee(s,b,P),F=1-Ee(s,_,g),T=1-Ee(t,_,g),W.push(sr[f]),W.push(Mr[f])):f===9?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),x=Ee(s,P,b),Y=1-Ee(t,g,P),W.push(hr[f]),W.push(sr[f])):f===161?(B=Ee(s,b,_),H=Ee(t,b,_),x=1-Ee(t,b,P),Y=Ee(s,P,g),W.push(hr[f]),W.push(sr[f])):f===37?(H=Ee(s,b,_),Y=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_),W.push(sr[f]),W.push(Gr[f])):f===133?(H=1-Ee(t,_,b),Y=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g),W.push(sr[f]),W.push(Gr[f])):f===148?(N=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),T=1-Ee(s,_,g),W.push(Mr[f]),W.push(Ur[f])):f===22?(N=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),T=Ee(t,g,_),W.push(Mr[f]),W.push(Ur[f])):f===82?(B=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Z=1-Ee(s,g,P),W.push(hr[f]),W.push(Ar[f])):f===88?(B=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Z=Ee(t,P,g),W.push(hr[f]),W.push(Ar[f])):f===73?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),x=Ee(s,P,b),F=1-Ee(t,_,g),W.push(hr[f]),W.push(sr[f])):f===97?(B=Ee(s,b,_),H=Ee(t,b,_),x=1-Ee(t,b,P),F=Ee(s,g,_),W.push(hr[f]),W.push(sr[f])):f===145?(B=Ee(t,b,_),x=1-Ee(t,b,P),Y=Ee(s,P,g),T=1-Ee(s,_,g),W.push(hr[f]),W.push(Gr[f])):f===25?(B=1-Ee(s,_,b),x=Ee(s,P,b),Y=1-Ee(t,g,P),T=Ee(t,g,_),W.push(hr[f]),W.push(Gr[f])):f===70?(H=1-Ee(t,_,b),N=1-Ee(s,b,P),Z=1-Ee(s,g,P),F=1-Ee(t,_,g),W.push(sr[f]),W.push(Mr[f])):f===100?(H=Ee(s,b,_),N=Ee(t,P,b),Z=Ee(t,P,g),F=Ee(s,g,_),W.push(sr[f]),W.push(Mr[f])):f===34?(R===0?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g)):(B=Ee(s,b,_),H=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_)),W.push(hr[f]),W.push(sr[f]),W.push(Gr[f]),W.push(Ur[f])):f===35?(R===4?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g)):(B=Ee(s,b,_),H=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_)),W.push(hr[f]),W.push(sr[f]),W.push(Ar[f]),W.push(Ur[f])):f===136?(R===0?(B=Ee(s,b,_),H=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_)):(B=1-Ee(t,_,b),H=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g)),W.push(hr[f]),W.push(sr[f]),W.push(Gr[f]),W.push(Ur[f])):f===153?(R===0?(B=Ee(t,b,_),x=1-Ee(t,b,P),Y=1-Ee(t,g,P),T=Ee(t,g,_)):(B=1-Ee(s,_,b),x=Ee(s,P,b),Y=Ee(s,P,g),T=1-Ee(s,_,g)),W.push(hr[f]),W.push(Ar[f])):f===102?(R===0?(H=1-Ee(t,_,b),N=Ee(t,P,b),Z=Ee(t,P,g),F=1-Ee(t,_,g)):(H=Ee(s,b,_),N=1-Ee(s,b,P),Z=1-Ee(s,g,P),F=Ee(s,g,_)),W.push(sr[f]),W.push(Ur[f])):f===155?(R===4?(B=Ee(t,b,_),x=1-Ee(t,b,P),Y=1-Ee(t,g,P),T=Ee(t,g,_)):(B=1-Ee(s,_,b),x=Ee(s,P,b),Y=Ee(s,P,g),T=1-Ee(s,_,g)),W.push(hr[f]),W.push(Gr[f])):f===103?(R===4?(H=1-Ee(t,_,b),N=Ee(t,P,b),Z=Ee(t,P,g),F=1-Ee(t,_,g)):(H=Ee(s,b,_),N=1-Ee(s,b,P),Z=1-Ee(s,g,P),F=Ee(s,g,_)),W.push(sr[f]),W.push(Mr[f])):f===152?(R===0?(B=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),T=Ee(t,g,_)):(B=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),T=1-Ee(s,_,g)),W.push(hr[f]),W.push(Mr[f]),W.push(Ar[f])):f===156?(R===4?(B=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),T=Ee(t,g,_)):(B=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),T=1-Ee(s,_,g)),W.push(hr[f]),W.push(Ar[f]),W.push(Ur[f])):f===137?(R===0?(B=Ee(s,b,_),H=Ee(t,b,_),x=1-Ee(t,b,P),Y=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_)):(B=1-Ee(t,_,b),H=1-Ee(s,_,b),x=Ee(s,P,b),Y=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g)),W.push(hr[f]),W.push(sr[f]),W.push(Ar[f])):f===139?(R===4?(B=Ee(s,b,_),H=Ee(t,b,_),x=1-Ee(t,b,P),Y=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_)):(B=1-Ee(t,_,b),H=1-Ee(s,_,b),x=Ee(s,P,b),Y=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g)),W.push(hr[f]),W.push(sr[f]),W.push(Gr[f])):f===98?(R===0?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Z=Ee(t,P,g),F=1-Ee(t,_,g)):(B=Ee(s,b,_),H=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Z=1-Ee(s,g,P),F=Ee(s,g,_)),W.push(hr[f]),W.push(sr[f]),W.push(Ur[f])):f===99?(R===4?(B=1-Ee(t,_,b),H=1-Ee(s,_,b),N=Ee(s,P,b),x=Ee(t,P,b),Z=Ee(t,P,g),F=1-Ee(t,_,g)):(B=Ee(s,b,_),H=Ee(t,b,_),N=1-Ee(t,b,P),x=1-Ee(s,b,P),Z=1-Ee(s,g,P),F=Ee(s,g,_)),W.push(hr[f]),W.push(sr[f]),W.push(Ar[f])):f===38?(R===0?(H=1-Ee(t,_,b),N=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g)):(H=Ee(s,b,_),N=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_)),W.push(sr[f]),W.push(Gr[f]),W.push(Ur[f])):f===39?(R===4?(H=1-Ee(t,_,b),N=Ee(t,P,b),Y=Ee(t,P,g),Z=Ee(s,P,g),F=1-Ee(s,_,g),T=1-Ee(t,_,g)):(H=Ee(s,b,_),N=1-Ee(s,b,P),Y=1-Ee(s,g,P),Z=1-Ee(t,g,P),F=Ee(t,g,_),T=Ee(s,g,_)),W.push(sr[f]),W.push(Mr[f]),W.push(Ur[f])):f===85&&(B=1,H=0,N=1,x=0,Y=0,Z=1,F=0,T=1),F<0||F>1||T<0||T>1||B<0||B>1||N<0||N>1||Y<0||Y>1||Z<0||Z>1,o.cells[a][d]={cval:f,cval_real:L,flipped:R,topleft:F,topright:T,righttop:B,rightbottom:H,bottomright:N,bottomleft:x,leftbottom:Y,lefttop:Z,edges:W}}}}}return o}function Ome(e){for(var t=[],r=e.rows,n=e.cols,i=[],o=0;o<r;o++)for(var s=0;s<n;s++)if(typeof e.cells[o][s]<"u"&&e.cells[o][s].edges.length>0){var a=e.cells[o][s],d=Lme(a),f=null,g=s,_=o;d!==null&&i.push([d.p[0]+g,d.p[1]+_]);do{if(f=Rme(e.cells[_][g],d.x,d.y,d.o),f!==null)i.push([f.p[0]+g,f.p[1]+_]),g+=f.x,_+=f.y,d=f;else break;if(_<0||_>=r||g<0||g>=n||typeof e.cells[_][g]>"u"){g-=f.x,_-=f.y;var b=Tme(e,g,_,f.x,f.y,f.o);if(b!==null)b.path.forEach(function(P){i.push(P)}),g=b.i,_=b.j,d=b;else break}}while(typeof e.cells[_][g]<"u"&&e.cells[_][g].edges.length>0);t.push(i),i=[],e.cells[o][s].edges.length>0&&s--}return t}function Tme(e,t,r,n,i,o){for(var s=e.cells[r][t],a=s.cval_real,d=t+n,f=r+i,g=[],_=!1;!_;){if(typeof e.cells[f]>"u"||typeof e.cells[f][d]>"u")if(f-=i,d-=n,s=e.cells[f][d],a=s.cval_real,i===-1)if(o===0)if(a&ss)g.push([d,f]),n=-1,i=0,o=0;else if(a&Fa)g.push([d+1,f]),n=1,i=0,o=0;else{g.push([d+s.bottomright,f]),n=0,i=1,o=1,_=!0;break}else if(a&ss)g.push([d,f]),n=-1,i=0,o=0;else if(a&Fa){g.push([d+s.bottomright,f]),n=0,i=1,o=1,_=!0;break}else{g.push([d+s.bottomleft,f]),n=0,i=1,o=0,_=!0;break}else if(i===1)if(o===0)if(a&tc)g.push([d+1,f+1]),n=1,i=0,o=1;else if(a&ws){g.push([d+s.topleft,f+1]),n=0,i=-1,o=0,_=!0;break}else{g.push([d+s.topright,f+1]),n=0,i=-1,o=1,_=!0;break}else a&tc?(g.push([d+1,f+1]),n=1,i=0,o=1):(g.push([d+1,f+1]),n=1,i=0,o=1);else if(n===-1)if(o===0)if(a&ws)g.push([d,f+1]),n=0,i=1,o=0;else if(a&ss){g.push([d,f+s.leftbottom]),n=1,i=0,o=0,_=!0;break}else{g.push([d,f+s.lefttop]),n=1,i=0,o=1,_=!0;break}else if(a&ws)g.push([d,f+1]),n=0,i=1,o=0;else break;else if(n===1)if(o===0)if(a&Fa)g.push([d+1,f]),n=0,i=-1,o=1;else{g.push([d+1,f+s.rightbottom]),n=-1,i=0,o=0,_=!0;break}else if(a&Fa)g.push([d+1,f]),n=0,i=-1,o=1;else if(a&tc){g.push([d+1,f+s.righttop]),n=-1,i=0,o=1;break}else{g.push([d+1,f+s.rightbottom]),n=-1,i=0,o=0,_=!0;break}else break;else if(s=e.cells[f][d],a=s.cval_real,n===-1){if(o===0)if(typeof e.cells[f-1]<"u"&&typeof e.cells[f-1][d]<"u")n=0,i=-1,o=1;else if(a&ss)g.push([d,f]);else{g.push([d+s.bottomright,f]),n=0,i=1,o=1,_=!0;break}else if(!(a&ws))break}else if(n===1){if(o===0)break;if(typeof e.cells[f+1]<"u"&&typeof e.cells[f+1][d]<"u")n=0,i=1,o=0;else if(a&tc)g.push([d+1,f+1]),n=1,i=0,o=1;else{g.push([d+s.topleft,f+1]),n=0,i=-1,o=0,_=!0;break}}else if(i===-1)if(o===1)if(typeof e.cells[f][d+1]<"u")n=1,i=0,o=1;else if(a&Fa)g.push([d+1,f]),n=0,i=-1,o=1;else{g.push([d+1,f+s.righttop]),n=-1,i=0,o=1,_=!0;break}else break;else if(i===1)if(o===0)if(typeof e.cells[f][d-1]<"u")n=-1,i=0,o=0;else if(a&ws)g.push([d,f+1]),n=0,i=1,o=0;else{g.push([d,f+s.leftbottom]),n=1,i=0,o=0,_=!0;break}else break;else break;if(d+=n,f+=i,d===t&&f===r)break}return{path:g,i:d,j:f,x:n,y:i,o}}function Mme(e,t){delete e.edges[t];for(var r=t+1;r<e.edges.length;r++)e.edges[r-1]=e.edges[r];e.edges.pop()}function Lme(e){if(e.edges.length>0){var t=e.edges[e.edges.length-1],r=e.cval_real;switch(t){case 0:return r&tc?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 1:return r&Fa?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 2:return r&Fa?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 3:return r&ss?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 4:return r&tc?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 5:return r&Fa?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 6:return r&Fa?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 7:return r&ss?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 8:return r&Fa?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.righttop],x:-1,y:0,o:1};case 9:return r&ss?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 10:return r&ss?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.righttop],x:-1,y:0,o:1};case 11:return r&ws?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 12:return r&Fa?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 13:return r&ss?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 14:return r&ss?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 15:return r&ws?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 16:return r&Fa?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 17:return r&ws?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 18:return r&ss?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 19:return r&ws?{p:[e.bottomleft,0],x:0,y:1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 20:return r&ws?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 21:return r&tc?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.topright,1],x:0,y:-1,o:1};case 22:return r&ws?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 23:return r&tc?{p:[0,e.lefttop],x:1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};default:break}}return null}function Rme(e,t,r,n){var i,o,s,a,d=e.cval,f;switch(t){case-1:switch(n){case 0:i=sr[d],s=Tn[d],a=Mn[d],f=Ln[d];break;default:i=hr[d],s=Cn[d],a=In[d],f=On[d];break}break;case 1:switch(n){case 0:i=Gr[d],s=Un[d],a=Vn[d],f=Gn[d];break;default:i=Ur[d],s=zn[d],a=Bn[d],f=jn[d];break}break;default:switch(r){case-1:switch(n){case 0:i=qn[d],s=xn[d],a=wn[d],f=En[d];break;default:i=Wn[d],s=Sn[d],a=Pn[d],f=An[d];break}break;case 1:switch(n){case 0:i=Ar[d],s=Rn[d],a=kn[d],f=Dn[d];break;default:i=Mr[d],s=Nn[d],a=Fn[d],f=$n[d];break}break}break}if(o=e.edges.indexOf(i),typeof e.edges[o]<"u")Mme(e,o);else return null;switch(d=e.cval_real,i){case 0:d&tc?(t=e.topleft,r=1):(t=1,r=e.righttop);break;case 1:d&Fa?(t=1,r=e.rightbottom):(t=e.topleft,r=1);break;case 2:d&Fa?(t=e.topleft,r=1):(t=e.bottomright,r=0);break;case 3:d&ss?(t=e.bottomleft,r=0):(t=e.topleft,r=1);break;case 4:d&tc?(t=e.topright,r=1):(t=1,r=e.righttop);break;case 5:d&Fa?(t=1,r=e.rightbottom):(t=e.topright,r=1);break;case 6:d&Fa?(t=e.topright,r=1):(t=e.bottomright,r=0);break;case 7:d&ss?(t=e.bottomleft,r=0):(t=e.topright,r=1);break;case 8:d&Fa?(t=1,r=e.righttop):(t=e.bottomright,r=0);break;case 9:d&ss?(t=e.bottomleft,r=0):(t=1,r=e.righttop);break;case 10:d&ss?(t=1,r=e.righttop):(t=0,r=e.leftbottom);break;case 11:d&ws?(t=0,r=e.lefttop):(t=1,r=e.righttop);break;case 12:d&Fa?(t=1,r=e.rightbottom):(t=e.bottomright,r=0);break;case 13:d&ss?(t=e.bottomleft,r=0):(t=1,r=e.rightbottom);break;case 14:d&ss?(t=1,r=e.rightbottom):(t=0,r=e.leftbottom);break;case 15:d&ws?(t=0,r=e.lefttop):(t=1,r=e.rightbottom);break;case 16:d&Fa?(t=0,r=e.leftbottom):(t=e.bottomright,r=0);break;case 17:d&ws?(t=0,r=e.lefttop):(t=e.bottomright,r=0);break;case 18:d&ss?(t=e.bottomleft,r=0):(t=0,r=e.leftbottom);break;case 19:d&ws?(t=0,r=e.lefttop):(t=e.bottomleft,r=0);break;case 20:d&ws?(t=0,r=e.leftbottom):(t=e.topleft,r=1);break;case 21:d&tc?(t=e.topright,r=1):(t=0,r=e.leftbottom);break;case 22:d&ws?(t=0,r=e.lefttop):(t=e.topleft,r=1);break;case 23:d&tc?(t=e.topright,r=1):(t=0,r=e.lefttop);break;default:return null}return{p:[t,r],x:s,y:a,o:f}}function kme(e){var t=[],r=0;return e.cells.forEach(function(n,i){n.forEach(function(o,s){if(typeof o<"u"){var a=Qt[o.cval](o);typeof a=="object"&&NI(a)&&typeof a[0]=="object"&&NI(a[0])&&(typeof a[0][0]=="object"&&NI(a[0][0])?a.forEach(function(d){d.forEach(function(f){f[0]+=s,f[1]+=i}),t[r++]=d}):(a.forEach(function(d){d[0]+=s,d[1]+=i}),t[r++]=a))}})}),t}function HW(e,t,r){if(r=r||{},!Wf.isObject(r))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(Vf.collectionOf(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!Wf.isObject(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Xpe(e,{zProperty:n,flip:!0}),a=Dme(s,t,n);a=Nme(a,s,e);var d=a.map(function(f,g){if(o[g]&&!Wf.isObject(o[g]))throw new Error("Each mappedProperty is required to be an Object");var _=Wpe.default({},i,o[g]);_[n]=f[n];var b=Wf.multiPolygon(f.groupedRings,_);return b});return Wf.featureCollection(d)}function Dme(e,t,r){for(var n=[],i=1;i<t.length;i++){var o=+t[i-1],s=+t[i],a=Hpe(e,o,s-o),d=Fme(a),f=$me(d),g={};g.groupedRings=f,g[r]=o+"-"+s,n.push(g)}return n}function Nme(e,t,r){var n=Upe.default(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],d=t[0].length-1,f=t.length-1,g=i/d,_=o/f,b=function(P){P[0]=P[0]*g+s,P[1]=P[1]*_+a};return e.forEach(function(P){P.groupedRings.forEach(function(L){L.forEach(function(R){R.forEach(b)})})}),e}function Fme(e){var t=[],r=[];e.forEach(function(i){var o=Vpe.default(Wf.polygon([i]));r.push(o),t.push({ring:i,area:o})}),r.sort(function(i,o){return o-i});var n=[];return r.forEach(function(i){for(var o=0;o<t.length;o++)if(t[o].area===i){n.push(t[o].ring),t.splice(o,1);break}}),n}function $me(e){for(var t=e.map(function(d){return{lrCoordinates:d,grouped:!1}}),r=[];!Bme(t);)for(var n=0;n<t.length;n++)if(!t[n].grouped){var i=[];i.push(t[n].lrCoordinates),t[n].grouped=!0;for(var o=Wf.polygon([t[n].lrCoordinates]),s=n+1;s<t.length;s++)if(!t[s].grouped){var a=Wf.polygon([t[s].lrCoordinates]);zme(a,o)&&(i.push(t[s].lrCoordinates),t[s].grouped=!0)}r.push(i)}return r}function zme(e,t){for(var r=qpe.default(e),n=0;n<r.features.length;n++)if(!Gpe.default(r.features[n],t))return!1;return!0}function Bme(e){for(var t=0;t<e.length;t++)if(e[t].grouped===!1)return!1;return!0}yD.exports=HW;yD.exports.default=HW;var jme=yD.exports,CD={exports:{}},Ume=ph,Vme=Bp,Gme=rv,qme=jp,Wme=ja,Xme=ur,Yme=Er,Hme=Vt;function M_(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Zme=M_(Ume),Kme=M_(Vme),Jme=M_(Gme),Qme=M_(qme),ege=M_(Wme);function ZW(e,t,r){if(r=r||{},!Hme.isObject(r))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("angle is required");return t===0||(n||(n=Zme.default(e)),(i===!1||i===void 0)&&(e=ege.default(e)),Xme.coordEach(e,function(o){var s=Kme.default(n,o),a=s+t,d=Jme.default(n,o),f=Yme.getCoords(Qme.default(n,d,a));o[0]=f[0],o[1]=f[1]})),e}CD.exports=ZW;CD.exports.default=ZW;var KW=CD.exports,ID={exports:{}},tge=ja,rge=ev,nge=ph,ige=Ps,oge=Bp,age=rv,sge=jp,JW=ur,$y=Vt,_M=Er;function Up(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var uge=Up(tge),lge=Up(rge),cge=Up(nge),fge=Up(ige),hge=Up(oge),dge=Up(age),pge=Up(sge);function QW(e,t,r){if(r=r||{},!$y.isObject(r))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!e)throw new Error("geojson required");if(typeof t!="number"||t===0)throw new Error("invalid factor");var o=Array.isArray(n)||typeof n=="object";return i!==!0&&(e=uge.default(e)),e.type==="FeatureCollection"&&!o?(JW.featureEach(e,function(s,a){e.features[a]=B$(s,t,n)}),e):B$(e,t,n)}function B$(e,t,r){var n=_M.getType(e)==="Point";return r=mge(e,r),t===1||n||JW.coordEach(e,function(i){var o=dge.default(r,i),s=hge.default(r,i),a=o*t,d=_M.getCoords(pge.default(r,a,s));i[0]=d[0],i[1]=d[1],i.length===3&&(i[2]*=t)}),e}function mge(e,t){if(t==null&&(t="centroid"),Array.isArray(t)||typeof t=="object")return _M.getCoord(t);var r=e.bbox?e.bbox:fge.default(e),n=r[0],i=r[1],o=r[2],s=r[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return $y.point([n,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return $y.point([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return $y.point([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return $y.point([o,s]);case"center":return lge.default(e);case void 0:case null:case"centroid":return cge.default(e);default:throw new Error("invalid origin")}}ID.exports=QW;ID.exports.default=QW;var eX=ID.exports,OD={exports:{}},gge=ur,vge=Vt,yge=Er,_ge=ja,bge=jp;function tX(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var xge=tX(_ge),wge=tX(bge);function rX(e,t,r,n){if(n=n||{},!vge.isObject(n))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,s=n.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");if(o&&typeof o!="number"&&isNaN(o))throw new Error("zTranslation is not a number");if(o=o!==void 0?o:0,t===0&&o===0)return e;if(r==null||isNaN(r))throw new Error("direction is required");return t<0&&(t=-t,r=r+180),(s===!1||s===void 0)&&(e=xge.default(e)),gge.coordEach(e,function(a){var d=yge.getCoords(wge.default(a,t,r,{units:i}));a[0]=d[0],a[1]=d[1],o&&a.length===3&&(a[2]+=o)}),e}OD.exports=rX;OD.exports.default=rX;var Ege=OD.exports,TD={exports:{}},Sge=ur,nX=Er,Iw=Vt;function Ow(e){var t=e[0],r=e[1];return[r[0]-t[0],r[1]-t[1]]}function bM(e,t){return e[0]*t[1]-t[0]*e[1]}function Pge(e,t){return[e[0]+t[0],e[1]+t[1]]}function Age(e,t){return[e[0]-t[0],e[1]-t[1]]}function Cge(e,t){return[e*t[0],e*t[1]]}function Ige(e,t){var r=e[0],n=Ow(e),i=t[0],o=Ow(t),s=bM(n,o),a=Age(i,r),d=bM(a,o),f=d/s,g=Pge(r,Cge(f,n));return g}function Oge(e,t){var r=Ow(e),n=Ow(t);return bM(r,n)===0}function Tge(e,t){return Oge(e,t)?!1:Ige(e,t)}function iX(e,t,r){if(r=r||{},!Iw.isObject(r))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");var i=nX.getType(e),o=e.properties;switch(i){case"LineString":return j$(e,t,n);case"MultiLineString":var s=[];return Sge.flattenEach(e,function(a){s.push(j$(a,t,n).geometry.coordinates)}),Iw.multiLineString(s,o);default:throw new Error("geometry "+i+" is not supported")}}function j$(e,t,r){var n=[],i=Iw.lengthToDegrees(t,r),o=nX.getCoords(e),s=[];return o.forEach(function(a,d){if(d!==o.length-1){var f=Mge(a,o[d+1],i);if(n.push(f),d>0){var g=n[d-1],_=Tge(f,g);_!==!1&&(g[1]=_,f[0]=_),s.push(g[0]),d===o.length-2&&(s.push(f[0]),s.push(f[1]))}o.length===2&&(s.push(f[0]),s.push(f[1]))}}),Iw.lineString(s,e.properties)}function Mge(e,t,r){var n=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=e[0]+r*(t[1]-e[1])/n,o=t[0]+r*(t[1]-e[1])/n,s=e[1]+r*(e[0]-t[0])/n,a=t[1]+r*(e[0]-t[0])/n;return[[i,s],[o,a]]}TD.exports=iX;TD.exports.default=iX;var Lge=TD.exports,MD={},LD={},RD={},Cd={},Rge=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cd,"__esModule",{value:!0});var kge=Rge(nu),Dge=Vt;function Nge(e){return(e>0)-(e<0)||+e}function Fge(e,t,r){var n=t[0]-e[0],i=t[1]-e[1],o=r[0]-t[0],s=r[1]-t[1];return Nge(n*s-o*i)}Cd.orientationIndex=Fge;function $ge(e,t){var r=e.geometry.coordinates[0].map(function(s){return s[0]}),n=e.geometry.coordinates[0].map(function(s){return s[1]}),i=t.geometry.coordinates[0].map(function(s){return s[0]}),o=t.geometry.coordinates[0].map(function(s){return s[1]});return Math.max.apply(null,r)===Math.max.apply(null,i)&&Math.max.apply(null,n)===Math.max.apply(null,o)&&Math.min.apply(null,r)===Math.min.apply(null,i)&&Math.min.apply(null,n)===Math.min.apply(null,o)}Cd.envelopeIsEqual=$ge;function zge(e,t){return t.geometry.coordinates[0].every(function(r){return kge.default(Dge.point(r),e)})}Cd.envelopeContains=zge;function Bge(e,t){return e[0]===t[0]&&e[1]===t[1]}Cd.coordinatesEqual=Bge;Object.defineProperty(RD,"__esModule",{value:!0});var jge=Cd,Uge=function(){function e(t){this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return e.buildId=function(t){return t.join(",")},e.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(r){return r.from.id!==t.from.id})},e.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(r){return r.to.id!==t.to.id})},e.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},e.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(r,n){var i=r.to,o=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]===0&&o.coordinates[0]-t.coordinates[0]===0)return i.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-o.coordinates[1]:o.coordinates[1]-i.coordinates[1];var s=jge.orientationIndex(t.coordinates,i.coordinates,o.coordinates);if(s<0)return 1;if(s>0)return-1;var a=Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2),d=Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2);return a-d}),this.outerEdgesSorted=!0)},e.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},e.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},e.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},e}();RD.default=Uge;var kD={};Object.defineProperty(kD,"__esModule",{value:!0});var Vge=Vt,Gge=Cd,qge=function(){function e(t,r){this.from=t,this.to=r,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return e.prototype.getSymetric=function(){return this.symetric||(this.symetric=new e(this.to,this.from),this.symetric.symetric=this),this.symetric},e.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},e.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},e.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},e.prototype.toLineString=function(){return Vge.lineString([this.from.coordinates,this.to.coordinates])},e.prototype.compareTo=function(t){return Gge.orientationIndex(t.from.coordinates,t.to.coordinates,this.to.coordinates)},e}();kD.default=qge;var hS={},oX=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hS,"__esModule",{value:!0});var ly=Cd,FI=Vt,Wge=oX(Sq),Xge=oX(nu),Yge=function(){function e(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return e.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},e.prototype.get=function(t){return this.edges[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),e.prototype.forEach=function(t){this.edges.forEach(t)},e.prototype.map=function(t){return this.edges.map(t)},e.prototype.some=function(t){return this.edges.some(t)},e.prototype.isValid=function(){return!0},e.prototype.isHole=function(){var t=this,r=this.edges.reduce(function(s,a,d){return a.from.coordinates[1]>t.edges[s].from.coordinates[1]&&(s=d),s},0),n=(r===0?this.length:r)-1,i=(r+1)%this.length,o=ly.orientationIndex(this.edges[n].from.coordinates,this.edges[r].from.coordinates,this.edges[i].from.coordinates);return o===0?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},e.prototype.toMultiPoint=function(){return FI.multiPoint(this.edges.map(function(t){return t.from.coordinates}))},e.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(r){return r.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=FI.polygon([t])},e.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=Wge.default(this.toPolygon())},e.findEdgeRingContaining=function(t,r){var n=t.getEnvelope(),i,o;return r.forEach(function(s){var a=s.getEnvelope();if(o&&(i=o.getEnvelope()),!ly.envelopeIsEqual(a,n)&&ly.envelopeContains(a,n)){for(var d=t.map(function(L){return L.from.coordinates}),f=void 0,g=function(L){s.some(function(R){return ly.coordinatesEqual(L,R.from.coordinates)})||(f=L)},_=0,b=d;_<b.length;_++){var P=b[_];g(P)}f&&s.inside(FI.point(f))&&(!o||ly.envelopeContains(i,a))&&(o=s)}}),o},e.prototype.inside=function(t){return Xge.default(t,this.toPolygon())},e}();hS.default=Yge;var DD=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(LD,"__esModule",{value:!0});var U$=DD(RD),Hge=DD(kD),Zge=DD(hS),V$=ur,Kge=Er;function Jge(e){if(!e)throw new Error("No geojson passed");if(e.type!=="FeatureCollection"&&e.type!=="GeometryCollection"&&e.type!=="MultiLineString"&&e.type!=="LineString"&&e.type!=="Feature")throw new Error("Invalid input type '"+e.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var Qge=function(){function e(){this.edges=[],this.nodes={}}return e.fromGeoJson=function(t){Jge(t);var r=new e;return V$.flattenEach(t,function(n){Kge.featureOf(n,"LineString","Graph::fromGeoJson"),V$.coordReduce(n,function(i,o){if(i){var s=r.getNode(i),a=r.getNode(o);r.addEdge(s,a)}return o})}),r},e.prototype.getNode=function(t){var r=U$.default.buildId(t),n=this.nodes[r];return n||(n=this.nodes[r]=new U$.default(t)),n},e.prototype.addEdge=function(t,r){var n=new Hge.default(t,r),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},e.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(r){return t.nodes[r]}).forEach(function(r){return t._removeIfDangle(r)})},e.prototype._removeIfDangle=function(t){var r=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(i){return i.to});this.removeNode(t),n.forEach(function(i){return r._removeIfDangle(i)})}},e.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(r){r.label===r.symetric.label&&(t.removeEdge(r.symetric),t.removeEdge(r))})},e.prototype._computeNextCWEdges=function(t){var r=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(n){return r._computeNextCWEdges(r.nodes[n])}):t.getOuterEdges().forEach(function(n,i){t.getOuterEdge((i===0?t.getOuterEdges().length:i)-1).symetric.next=n})},e.prototype._computeNextCCWEdges=function(t,r){for(var n=t.getOuterEdges(),i,o,s=n.length-1;s>=0;--s){var a=n[s],d=a.symetric,f=void 0,g=void 0;a.label===r&&(f=a),d.label===r&&(g=d),!(!f||!g)&&(g&&(o=g),f&&(o&&(o.next=f,o=void 0),i||(i=f)))}o&&(o.next=i)},e.prototype._findLabeledEdgeRings=function(){var t=[],r=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var i=n;do i.label=r,i=i.next;while(!n.isEqual(i));r++}}),t},e.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(n){n.label=void 0}),this._findLabeledEdgeRings().forEach(function(n){t._findIntersectionNodes(n).forEach(function(i){t._computeNextCCWEdges(i,n.label)})});var r=[];return this.edges.forEach(function(n){n.ring||r.push(t._findEdgeRing(n))}),r},e.prototype._findIntersectionNodes=function(t){var r=[],n=t,i=function(){var o=0;n.from.getOuterEdges().forEach(function(s){s.label===t.label&&++o}),o>1&&r.push(n.from),n=n.next};do i();while(!t.isEqual(n));return r},e.prototype._findEdgeRing=function(t){var r=t,n=new Zge.default;do n.push(r),r.ring=n,r=r.next;while(!t.isEqual(r));return n},e.prototype.removeNode=function(t){var r=this;t.getOuterEdges().forEach(function(n){return r.removeEdge(n)}),t.innerEdges.forEach(function(n){return r.removeEdge(n)}),delete this.nodes[t.id]},e.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(r){return!r.isEqual(t)}),t.deleteEdge()},e}();LD.default=Qge;var aX=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(MD,"__esModule",{value:!0});var eve=Vt,tve=aX(LD),rve=aX(hS);function nve(e){var t=tve.default.fromGeoJson(e);t.deleteDangles(),t.deleteCutEdges();var r=[],n=[];return t.getEdgeRings().filter(function(i){return i.isValid()}).forEach(function(i){i.isHole()?r.push(i):n.push(i)}),r.forEach(function(i){rve.default.findEdgeRingContaining(i,n)&&n.push(i)}),eve.featureCollection(n.map(function(i){return i.toPolygon()}))}MD.default=nve;var dS={},ND=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dS,"__esModule",{value:!0});var G0=ND(nu),FD=ND(Pd),G$=ur,xM=ND(Ad);function ive(e,t){var r=!0;return G$.flattenEach(e,function(n){G$.flattenEach(t,function(i){if(r===!1)return!1;r=ove(n.geometry,i.geometry)})}),r}function ove(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!lve(e.coordinates,t.coordinates);case"LineString":return!q$(t,e);case"Polygon":return!G0.default(e,t)}break;case"LineString":switch(t.type){case"Point":return!q$(e,t);case"LineString":return!ave(e,t);case"Polygon":return!W$(t,e)}break;case"Polygon":switch(t.type){case"Point":return!G0.default(t,e);case"LineString":return!W$(e,t);case"Polygon":return!sve(t,e)}}return!1}function q$(e,t){for(var r=0;r<e.coordinates.length-1;r++)if(uve(e.coordinates[r],e.coordinates[r+1],t.coordinates))return!0;return!1}function ave(e,t){var r=FD.default(e,t);return r.features.length>0}function W$(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var i=n[r];if(G0.default(i,e))return!0}var o=FD.default(t,xM.default(e));return o.features.length>0}function sve(e,t){for(var r=0,n=e.coordinates[0];r<n.length;r++){var i=n[r];if(G0.default(i,t))return!0}for(var o=0,s=t.coordinates[0];o<s.length;o++){var a=s[o];if(G0.default(a,e))return!0}var d=FD.default(xM.default(e),xM.default(t));return d.features.length>0}function uve(e,t,r){var n=r[0]-e[0],i=r[1]-e[1],o=t[0]-e[0],s=t[1]-e[1],a=n*s-i*o;return a!==0?!1:Math.abs(o)>=Math.abs(s)?o>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:s>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]}function lve(e,t){return e[0]===t[0]&&e[1]===t[1]}dS.default=ive;var kl={},$D=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kl,"__esModule",{value:!0});var Tw=$D(Ps),pS=$D(nu),q0=$D(nv),wM=Er;function cve(e,t){var r=wM.getGeom(e),n=wM.getGeom(t),i=r.type,o=n.type,s=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return mS(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return sX(r,n);case"MultiPoint":return uX(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return q0.default(n,r,{ignoreEndVertices:!0});case"LineString":return fX(r,n);case"MultiPoint":return lX(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return pS.default(n,r,{ignoreBoundary:!0});case"LineString":return hX(r,n);case"Polygon":return dX(r,n);case"MultiPoint":return cX(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}kl.default=cve;function sX(e,t){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if(mS(e.coordinates[r],t.coordinates)){n=!0;break}return n}kl.isPointInMultiPoint=sX;function uX(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){for(var i=n[r],o=!1,s=0,a=e.coordinates;s<a.length;s++){var d=a[s];if(mS(i,d)){o=!0;break}}if(!o)return!1}return!0}kl.isMultiPointInMultiPoint=uX;function lX(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(q0.default(o,e,{ignoreEndVertices:!0})&&(r=!0),!q0.default(o,e))return!1}return!!r}kl.isMultiPointOnLine=lX;function cX(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var i=n[r];if(!pS.default(i,e,{ignoreBoundary:!0}))return!1}return!0}kl.isMultiPointInPoly=cX;function fX(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(q0.default({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(r=!0),!q0.default({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return r}kl.isLineOnLine=fX;function hX(e,t){var r=!1,n=0,i=Tw.default(e),o=Tw.default(t);if(!zD(i,o))return!1;for(n;n<t.coordinates.length-1;n++){var s=pX(t.coordinates[n],t.coordinates[n+1]);if(pS.default({type:"Point",coordinates:s},e,{ignoreBoundary:!0})){r=!0;break}}return r}kl.isLineInPoly=hX;function dX(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;var r=Tw.default(e),n=Tw.default(t);if(!zD(r,n))return!1;for(var i=wM.getGeom(t).coordinates,o=0,s=i;o<s.length;o++)for(var a=s[o],d=0,f=a;d<f.length;d++){var g=f[d];if(!pS.default(g,e))return!1}return!0}kl.isPolyInPoly=dX;function zD(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}kl.doBBoxOverlap=zD;function mS(e,t){return e[0]===t[0]&&e[1]===t[1]}kl.compareCoords=mS;function pX(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}kl.getMidpoint=pX;var BD={},mX=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(BD,"__esModule",{value:!0});var gX=mX(Pd),fve=Ad,hve=mX(nu),X$=Er,dve=Vt;function pve(e,t){var r=X$.getGeom(e),n=X$.getGeom(t),i=r.type,o=n.type;switch(i){case"MultiPoint":switch(o){case"LineString":return Y$(r,n);case"Polygon":return Z$(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Y$(n,r);case"LineString":return mve(r,n);case"Polygon":return H$(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Z$(n,r);case"LineString":return H$(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Y$(e,t){for(var r=!1,n=!1,i=e.coordinates.length,o=0;o<i&&!r&&!n;){for(var s=0;s<t.coordinates.length-1;s++){var a=!0;(s===0||s===t.coordinates.length-2)&&(a=!1),vX(t.coordinates[s],t.coordinates[s+1],e.coordinates[o],a)?r=!0:n=!0}o++}return r&&n}function mve(e,t){var r=gX.default(e,t);if(r.features.length>0)for(var n=0;n<e.coordinates.length-1;n++)for(var i=0;i<t.coordinates.length-1;i++){var o=!0;if((i===0||i===t.coordinates.length-2)&&(o=!1),vX(e.coordinates[n],e.coordinates[n+1],t.coordinates[i],o))return!0}return!1}function H$(e,t){var r=fve.polygonToLine(t),n=gX.default(e,r);return n.features.length>0}function Z$(e,t){for(var r=!1,n=!1,i=e.coordinates.length,o=0;o<i&&(!r||!n);o++)hve.default(dve.point(e.coordinates[o]),t)?r=!0:n=!0;return n&&r}function vX(e,t,r,n){var i=r[0]-e[0],o=r[1]-e[1],s=t[0]-e[0],a=t[1]-e[1],d=i*a-o*s;return d!==0?!1:n?Math.abs(s)>=Math.abs(a)?s>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:a>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]:Math.abs(s)>=Math.abs(a)?s>0?e[0]<r[0]&&r[0]<t[0]:t[0]<r[0]&&r[0]<e[0]:a>0?e[1]<r[1]&&r[1]<t[1]:t[1]<r[1]&&r[1]<e[1]}BD.default=pve;var jD={},gve=VW,mf=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=e&&e.direction?e.direction:!1,this.pseudoNode=e&&e.pseudoNode?e.pseudoNode:!1,this.objectComparator=e&&e.objectComparator?e.objectComparator:vve};mf.prototype.compare=function(e,t){if(e.type!==t.type||!yX(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(e.type.indexOf("Multi")===0){var r=this,n=K$(e),i=K$(t);return n.every(function(o){return this.some(function(s){return r.compare(o,s)})},i)}}return!1};function K$(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function yX(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}mf.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].toFixed(this.precision)!==t[r].toFixed(this.precision))return!1;return!0};mf.prototype.compareLine=function(e,t,r,n){if(!yX(e,t))return!1;var i=this.pseudoNode?e:this.removePseudo(e),o=this.pseudoNode?t:this.removePseudo(t);if(!(n&&!this.compareCoord(i[0],o[0])&&(o=this.fixStartIndex(o,i),!o))){var s=this.compareCoord(i[r],o[r]);return this.direction||s?this.comparePath(i,o):this.compareCoord(i[r],o[o.length-(1+r)])?this.comparePath(i.slice().reverse(),o):!1}};mf.prototype.fixStartIndex=function(e,t){for(var r,n=-1,i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){n=i;break}return n>=0&&(r=[].concat(e.slice(n,e.length),e.slice(1,n+1))),r};mf.prototype.comparePath=function(e,t){var r=this;return e.every(function(n,i){return r.compareCoord(n,this[i])},t)};mf.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var r=e.coordinates.slice(1,e.coordinates.length),n=t.coordinates.slice(1,t.coordinates.length),i=this;return r.every(function(o){return this.some(function(s){return i.compareLine(o,s,1,!0)})},n)}else return!1};mf.prototype.compareFeature=function(e,t){return e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t)?!1:this.compare(e.geometry,t.geometry)};mf.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))};mf.prototype.removePseudo=function(e){return e};function vve(e,t){return gve(e,t,{strict:!0})}var _X=mf,UD=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jD,"__esModule",{value:!0});var jb=ur,J$=Er,yve=UD(lS),_ve=UD(Pd),bve=UD(_X);function xve(e,t){var r=J$.getGeom(e),n=J$.getGeom(t),i=r.type,o=n.type;if(i==="MultiPoint"&&o!=="MultiPoint"||(i==="LineString"||i==="MultiLineString")&&o!=="LineString"&&o!=="MultiLineString"||(i==="Polygon"||i==="MultiPolygon")&&o!=="Polygon"&&o!=="MultiPolygon")throw new Error("features must be of the same type");if(i==="Point")throw new Error("Point geometry not supported");var s=new bve.default({precision:6});if(s.compare(e,t))return!1;var a=0;switch(i){case"MultiPoint":for(var d=0;d<r.coordinates.length;d++)for(var f=0;f<n.coordinates.length;f++){var g=r.coordinates[d],_=n.coordinates[f];if(g[0]===_[0]&&g[1]===_[1])return!0}return!1;case"LineString":case"MultiLineString":jb.segmentEach(e,function(b){jb.segmentEach(t,function(P){yve.default(b,P).features.length&&a++})});break;case"Polygon":case"MultiPolygon":jb.segmentEach(e,function(b){jb.segmentEach(t,function(P){_ve.default(b,P).features.length&&a++})});break}return a>0}jD.default=xve;var VD={},bX=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(VD,"__esModule",{value:!0});var wve=bX(_X),Q$=bX(Fp),ez=Er;function Eve(e,t){var r=ez.getGeom(e).type,n=ez.getGeom(t).type;if(r!==n)return!1;var i=new wve.default({precision:6});return i.compare(Q$.default(e),Q$.default(t))}VD.default=Eve;var gS={},Sve=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gS,"__esModule",{value:!0});var Pve=Sve(dS),tz=ur;function Ave(e,t){var r=!1;return tz.flattenEach(e,function(n){tz.flattenEach(t,function(i){if(r===!0)return!0;r=!Pve.default(n.geometry,i.geometry)})}),r}gS.default=Ave;var GD={},xX={exports:{}},$I={exports:{}},rz;function Cve(){return rz||(rz=1,function(e){function t(r,n,i,o){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,o)}t.prototype.run=function(r,n,i,o){this._init(r,n,i,o);for(var s=0;s<this._datasetLength;s++)if(this._visited[s]!==1){this._visited[s]=1;var a=this._regionQuery(s);if(a.length<this.minPts)this.noise.push(s);else{var d=this.clusters.length;this.clusters.push([]),this._addToCluster(s,d),this._expandCluster(d,a)}}return this.clusters},t.prototype._init=function(r,n,i,o){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),o&&(this.distance=o)},t.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var o=n[i];if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);s.length>=this.minPts&&(n=this._mergeArrays(n,s))}this._assigned[o]!==1&&this._addToCluster(o,r)}},t.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},t.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var o=this.distance(this.dataset[r],this.dataset[i]);o<this.epsilon&&n.push(i)}return n},t.prototype._mergeArrays=function(r,n){for(var i=n.length,o=0;o<i;o++){var s=n[o];r.indexOf(s)<0&&r.push(s)}return r},t.prototype._euclideanDistance=function(r,n){for(var i=0,o=Math.min(r.length,n.length);o--;)i+=(r[o]-n[o])*(r[o]-n[o]);return Math.sqrt(i)},e.exports&&(e.exports=t)}($I)),$I.exports}var zI={exports:{}},nz;function Ive(){return nz||(nz=1,function(e){function t(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}t.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},t.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,o=0;o<this.k;o++)this.centroids[o]=this.randomCentroid();for(var s=!0;s;){s=this.assign();for(var a=0;a<this.k;a++){for(var d=new Array(b),f=0,g=0;g<b;g++)d[g]=0;for(var _=0;_<i;_++){var b=this.dataset[_].length;if(a===this.assignments[_]){for(var g=0;g<b;g++)d[g]+=this.dataset[_][g];f++}}if(f>0){for(var g=0;g<b;g++)d[g]/=f;this.centroids[a]=d}else this.centroids[a]=this.randomCentroid(),s=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},t.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,o=0;o<n;o++)i=this.argmin(this.dataset[o],this.centroids,this.distance),i!=this.assignments[o]&&(this.assignments[o]=i,r=!0);return r},t.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},t.prototype.argmin=function(r,n,i){for(var o=Number.MAX_VALUE,s=0,a=n.length,d,f=0;f<a;f++)d=i(r,n[f]),d<o&&(o=d,s=f);return s},t.prototype.distance=function(r,n){for(var i=0,o=Math.min(r.length,n.length);o--;){var s=r[o]-n[o];i+=s*s}return Math.sqrt(i)},e.exports&&(e.exports=t)}(zI)),zI.exports}var BI={exports:{}},jI={exports:{}},iz;function wX(){return iz||(iz=1,function(e){function t(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}t.prototype.insert=function(r,n){for(var i=this._queue.length,o=i;o--;){var s=this._priorities[o];this._sorting==="desc"?n>s&&(i=o):n<s&&(i=o)}this._insertAt(r,n,i)},t.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},t.prototype.forEach=function(r){this._queue.forEach(r)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(r){return this._priorities[r]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},t.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var o=0;o<r.length;o++)this.insert(r[o],n[o])}i&&(this._sorting=i)},t.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},e.exports&&(e.exports=t)}(jI)),jI.exports}var oz;function Ove(){return oz||(oz=1,function(e){if(e.exports)var t=wX();function r(n,i,o,s){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,o,s)}r.prototype.run=function(n,i,o,s){this._init(n,i,o,s);for(var a=0,d=this.dataset.length;a<d;a++)if(this._processed[a]!==1){this._processed[a]=1,this.clusters.push([a]);var f=this.clusters.length-1;this._orderedList.push(a);var g=new t(null,null,"asc"),_=this._regionQuery(a);this._distanceToCore(a)!==void 0&&(this._updateQueue(a,_,g),this._expandCluster(f,g))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,o=this._orderedList.length;i<o;i++){var s=this._orderedList[i],a=this._reachability[s];n.push([s,a])}return n},r.prototype._init=function(n,i,o,s){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),o&&(this.minPts=o),s&&(this.distance=s)},r.prototype._updateQueue=function(n,i,o){var s=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(a){if(s._processed[a]===void 0){var d=s.distance(s.dataset[n],s.dataset[a]),f=Math.max(s._coreDistance,d);s._reachability[a]===void 0?(s._reachability[a]=f,o.insert(a,f)):f<s._reachability[a]&&(s._reachability[a]=f,o.remove(a),o.insert(a,f))}})},r.prototype._expandCluster=function(n,i){for(var o=i.getElements(),s=0,a=o.length;s<a;s++){var d=o[s];if(this._processed[d]===void 0){var f=this._regionQuery(d);this._processed[d]=1,this.clusters[n].push(d),this._orderedList.push(d),this._distanceToCore(d)!==void 0&&(this._updateQueue(d,f,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,o=0;o<i;o++){var s=this._regionQuery(n,o);if(s.length>=this.minPts)return o}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var o=[],s=0,a=this.dataset.length;s<a;s++)this.distance(this.dataset[n],this.dataset[s])<i&&o.push(s);return o},r.prototype._euclideanDistance=function(n,i){for(var o=0,s=Math.min(n.length,i.length);s--;)o+=(n[s]-i[s])*(n[s]-i[s]);return Math.sqrt(o)},e.exports&&(e.exports=r)}(BI)),BI.exports}(function(e){e.exports&&(e.exports={DBSCAN:Cve(),KMEANS:Ive(),OPTICS:Ove(),PriorityQueue:wX()})})(xX);var Tve=xX.exports,qD=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(GD,"__esModule",{value:!0});var Mve=qD(ja),Lve=qD(wa),Rve=ur,kve=Vt,Dve=qD(Tve);function Nve(e,t,r){r===void 0&&(r={}),r.mutate!==!0&&(e=Mve.default(e)),r.minPoints=r.minPoints||3;var n=new Dve.default.DBSCAN,i=n.run(Rve.coordAll(e),kve.convertLength(t,r.units),r.minPoints,Lve.default),o=-1;return i.forEach(function(s){o++,s.forEach(function(a){var d=e.features[a];d.properties||(d.properties={}),d.properties.cluster=o,d.properties.dbscan="core"})}),n.noise.forEach(function(s){var a=e.features[s];a.properties||(a.properties={}),a.properties.cluster?a.properties.dbscan="edge":a.properties.dbscan="noise"}),e}GD.default=Nve;var WD={},EX={eudist:function(t,r,n){for(var i=t.length,o=0,s=0;s<i;s++){var a=(t[s]||0)-(r[s]||0);o+=a*a}return n?Math.sqrt(o):o},mandist:function(t,r,n){for(var i=t.length,o=0,s=0;s<i;s++)o+=Math.abs((t[s]||0)-(r[s]||0));return n?Math.sqrt(o):o},dist:function(t,r,n){var i=Math.abs(t-r);return n?i:i*i}},SX=EX,Fve=SX.eudist,$ve=SX.dist,zve={kmrand:function(t,r){for(var n={},i=[],o=r<<2,s=t.length,a=t[0].length>0;i.length<r&&o-- >0;){var d=t[Math.floor(Math.random()*s)],f=a?d.join("_"):""+d;n[f]||(n[f]=!0,i.push(d))}if(i.length<r)throw new Error("Error initializating clusters");return i},kmpp:function(t,r){var n=t[0].length?Fve:$ve,i=[],o=t.length,s=t[0].length>0,a=t[Math.floor(Math.random()*o)];for(s?a.join("_"):""+a,i.push(a);i.length<r;){for(var d=[],f=i.length,g=0,_=[],b=0;b<o;b++){for(var P=1/0,L=0;L<f;L++){var R=n(t[b],i[L]);R<=P&&(P=R)}d[b]=P}for(var $=0;$<o;$++)g+=d[$];for(var F=0;F<o;F++)_[F]={i:F,v:t[F],pr:d[F]/g,cs:0};_.sort(function(B,H){return B.pr-H.pr}),_[0].cs=_[0].pr;for(var T=1;T<o;T++)_[T].cs=_[T-1].cs+_[T].pr;for(var x=Math.random(),N=0;N<o-1&&_[N++].cs<x;);i.push(_[N-1].v)}return i}},XD=EX,PX=zve,Bve=XD.eudist;XD.mandist;XD.dist;var jve=PX.kmrand,Uve=PX.kmpp,az=1e4;function sz(e,t,r){r=r||[];for(var n=0;n<e;n++)r[n]=t;return r}function Vve(e,t,r,n){var i=[],o=[],s=[],a=[],d=!1,f=n||az,g=e.length,_=e[0].length,b=_>0,P=[];if(r)r=="kmrand"?i=jve(e,t):r=="kmpp"?i=Uve(e,t):i=r;else for(var L={};i.length<t;){var R=Math.floor(Math.random()*g);L[R]||(L[R]=!0,i.push(e[R]))}do{sz(t,0,P);for(var $=0;$<g;$++){for(var F=1/0,T=0,x=0;x<t;x++){var a=b?Bve(e[$],i[x]):Math.abs(e[$]-i[x]);a<=F&&(F=a,T=x)}s[$]=T,P[T]++}for(var N=[],o=[],B=0;B<t;B++)N[B]=b?sz(_,0,N[B]):0,o[B]=i[B];if(b){for(var H=0;H<t;H++)i[H]=[];for(var Z=0;Z<g;Z++)for(var Y=s[Z],W=N[Y],Q=e[Z],me=0;me<_;me++)W[me]+=Q[me];d=!0;for(var ge=0;ge<t;ge++){for(var be=i[ge],oe=N[ge],Ie=o[ge],fe=P[ge],G=0;G<_;G++)be[G]=oe[G]/fe||0;if(d){for(var K=0;K<_;K++)if(Ie[K]!=be[K]){d=!1;break}}}}else{for(var re=0;re<g;re++){var ie=s[re];N[ie]+=e[re]}for(var he=0;he<t;he++)i[he]=N[he]/P[he]||0;d=!0;for(var ae=0;ae<t;ae++)if(o[ae]!=i[ae]){d=!1;break}}d=d||--f<=0}while(!d);return{it:az-f,k:t,idxs:s,centroids:i}}var Gve=Vve,AX=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(WD,"__esModule",{value:!0});var qve=AX(ja),uz=ur,Wve=AX(Gve);function Xve(e,t){t===void 0&&(t={});var r=e.features.length;t.numberOfClusters=t.numberOfClusters||Math.round(Math.sqrt(r/2)),t.numberOfClusters>r&&(t.numberOfClusters=r),t.mutate!==!0&&(e=qve.default(e));var n=uz.coordAll(e),i=n.slice(0,t.numberOfClusters),o=Wve.default(n,t.numberOfClusters,i),s={};return o.centroids.forEach(function(a,d){s[d]=a}),uz.featureEach(e,function(a,d){var f=o.idxs[d];a.properties.cluster=f,a.properties.centroid=s[f]}),e}WD.default=Xve;var YD={},HD=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(YD,"__esModule",{value:!0});var lz=HD(Fp),cz=HD($p),fz=HD(Bp),hz=Vt;function Yve(e,t){if(!e)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");var r=dz(e,"line1");if(r!=="LineString")throw new Error("line1 must be a LineString");var n=dz(t,"line2");if(n!=="LineString")throw new Error("line2 must be a LineString");for(var i=cz.default(lz.default(e)).features,o=cz.default(lz.default(t)).features,s=0;s<i.length;s++){var a=i[s].geometry.coordinates;if(!o[s])break;var d=o[s].geometry.coordinates;if(!Hve(a,d))return!1}return!0}function Hve(e,t){var r=hz.bearingToAzimuth(fz.default(e[0],e[1])),n=hz.bearingToAzimuth(fz.default(t[0],t[1]));return r===n}function dz(e,t){if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error("Invalid GeoJSON object for "+t)}YD.default=Yve;var ZD={exports:{}},Zve=Ps,Kve=nu,Jve=wa,Qve=eX,eye=Fp,tye=E_,Ub=Er,Jc=Vt;function iv(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var pz=iv(Zve),rye=iv(Kve),cy=iv(Jve),nye=iv(Qve),iye=iv(eye),oye=iv(tye);function mz(e){for(var t=e,r=[];t.parent;)r.unshift(t),t=t.parent;return r}function aye(){return new CX(function(e){return e.f})}var vS={search:function(e,t,r,n){e.cleanDirty(),n=n||{};var i=n.heuristic||vS.heuristics.manhattan,o=n.closest||!1,s=aye(),a=t;for(t.h=i(t,r),s.push(t);s.size()>0;){var d=s.pop();if(d===r)return mz(d);d.closed=!0;for(var f=e.neighbors(d),g=0,_=f.length;g<_;++g){var b=f[g];if(!(b.closed||b.isWall())){var P=d.g+b.getCost(d),L=b.visited;(!L||P<b.g)&&(b.visited=!0,b.parent=d,b.h=b.h||i(b,r),b.g=P,b.f=b.g+b.h,e.markDirty(b),o&&(b.h<a.h||b.h===a.h&&b.g<a.g)&&(a=b),L?s.rescoreElement(b):s.push(b))}}}return o?mz(a):[]},heuristics:{manhattan:function(e,t){var r=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return r+n},diagonal:function(e,t){var r=1,n=Math.sqrt(2),i=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return r*(i+o)+(n-2*r)*Math.min(i,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function ov(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var r=0;r<e.length;r++){this.grid[r]=[];for(var n=0,i=e[r];n<i.length;n++){var o=new yS(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}ov.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)vS.cleanNode(this.nodes[e])};ov.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)vS.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]};ov.prototype.markDirty=function(e){this.dirtyNodes.push(e)};ov.prototype.neighbors=function(e){var t=[],r=e.x,n=e.y,i=this.grid;return i[r-1]&&i[r-1][n]&&t.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&t.push(i[r+1][n]),i[r]&&i[r][n-1]&&t.push(i[r][n-1]),i[r]&&i[r][n+1]&&t.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&t.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&t.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&t.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&t.push(i[r+1][n+1])),t};ov.prototype.toString=function(){for(var e=[],t=this.grid,r,n,i,o,s=0,a=t.length;s<a;s++){for(r=[],n=t[s],i=0,o=n.length;i<o;i++)r.push(n[i].weight);e.push(r.join(" "))}return e.join(`
`)};function yS(e,t,r){this.x=e,this.y=t,this.weight=r}yS.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};yS.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?this.weight*1.41421:this.weight};yS.prototype.isWall=function(){return this.weight===0};function CX(e){this.content=[],this.scoreFunction=e}CX.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),r=this.content.pop();t!==this.content.length-1&&(this.content[t]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var r=(e+1>>1)-1,n=this.content[r];if(this.scoreFunction(t)<this.scoreFunction(n))this.content[r]=t,this.content[e]=n,e=r;else break}},bubbleUp:function(e){for(var t=this.content.length,r=this.content[e],n=this.scoreFunction(r);;){var i=e+1<<1,o=i-1,s=null,a;if(o<t){var d=this.content[o];a=this.scoreFunction(d),a<n&&(s=o)}if(i<t){var f=this.content[i],g=this.scoreFunction(f);g<(s===null?n:a)&&(s=i)}if(s!==null)this.content[e]=this.content[s],this.content[s]=r,e=s;else break}}};function IX(e,t,r){if(r=r||{},!Jc.isObject(r))throw new Error("options is invalid");var n=r.resolution,i=r.minDistance,o=r.obstacles||Jc.featureCollection([]);if(!e)throw new Error("start is required");if(!t)throw new Error("end is required");if(n&&!Jc.isNumber(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=Ub.getCoord(e),a=Ub.getCoord(t);switch(e=Jc.point(s),t=Jc.point(a),Ub.getType(o)){case"FeatureCollection":if(o.features.length===0)return Jc.lineString([s,a]);break;case"Polygon":o=Jc.featureCollection([Jc.feature(Ub.getGeom(o))]);break;default:throw new Error("invalid obstacles")}var d=o;d.features.push(e),d.features.push(t);var f=pz.default(nye.default(oye.default(pz.default(d)),1.15));if(!n){var g=cy.default([f[0],f[1]],[f[2],f[1]],r);n=g/100}d.features.pop(),d.features.pop();for(var _=f[0],b=f[1],P=f[2],L=f[3],R=n/cy.default([_,b],[P,b],r),$=R*(P-_),F=n/cy.default([_,b],[_,L],r),T=F*(L-b),x=P-_,N=L-b,B=Math.floor(x/$),H=Math.floor(N/T),Z=(x-B*$)/2,Y=(N-H*T)/2,W=[],Q=[],me=[],ge=[],be=1/0,oe=1/0,Ie=L-Y,fe=0;Ie>=b;){for(var G=[],K=[],re=_+Z,ie=0;re<=P;){var he=Jc.point([re,Ie]),ae=sye(he,o);G.push(ae?0:1),K.push(re+"|"+Ie);var Te=cy.default(he,e);!ae&&Te<be&&(be=Te,me={x:ie,y:fe});var Le=cy.default(he,t);!ae&&Le<oe&&(oe=Le,ge={x:ie,y:fe}),re+=$,ie++}Q.push(G),W.push(K),Ie-=T,fe++}var Xe=new ov(Q,{diagonal:!0}),$e=Xe.grid[me.y][me.x],at=Xe.grid[ge.y][ge.x],_t=vS.search(Xe,$e,at),Lt=[s];return _t.forEach(function(pt){var Ot=W[pt.x][pt.y].split("|");Lt.push([+Ot[0],+Ot[1]])}),Lt.push(a),iye.default(Jc.lineString(Lt))}function sye(e,t){for(var r=0;r<t.features.length;r++)if(rye.default(e,t.features[r]))return!0;return!1}ZD.exports=IX;ZD.exports.default=IX;var uye=ZD.exports,KD={exports:{}};function gz(e){return function(){return e}}function lye(e){return e[0]}function cye(e){return e[1]}function Mw(){this._=null}function _S(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Mw.prototype={constructor:Mw,insert:function(e,t){var r,n,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;r=e}else this._?(e=vz(this._),t.P=null,t.N=e,e.P=e.L=t,r=e):(t.P=t.N=null,this._=t,r=null);for(t.L=t.R=null,t.U=r,t.C=!0,e=t;r&&r.C;)n=r.U,r===n.L?(i=n.R,i&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.R&&(fy(this,r),e=r,r=e.U),r.C=!1,n.C=!0,hy(this,n))):(i=n.L,i&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.L&&(hy(this,r),e=r,r=e.U),r.C=!1,n.C=!0,fy(this,n))),r=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,r,n=e.L,i=e.R,o,s;if(n?i?o=vz(i):o=n:o=i,t?t.L===e?t.L=o:t.R=o:this._=o,n&&i?(s=o.C,o.C=e.C,o.L=n,n.U=o,o!==i?(t=o.U,o.U=e.U,e=o.R,t.L=e,o.R=i,i.U=o):(o.U=t,t=o,e=o.R)):(s=e.C,e=o),e&&(e.U=t),!s){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(r=t.R,r.C&&(r.C=!1,t.C=!0,fy(this,t),r=t.R),r.L&&r.L.C||r.R&&r.R.C){(!r.R||!r.R.C)&&(r.L.C=!1,r.C=!0,hy(this,r),r=t.R),r.C=t.C,t.C=r.R.C=!1,fy(this,t),e=this._;break}}else if(r=t.L,r.C&&(r.C=!1,t.C=!0,hy(this,t),r=t.L),r.L&&r.L.C||r.R&&r.R.C){(!r.L||!r.L.C)&&(r.R.C=!1,r.C=!0,fy(this,r),r=t.L),r.C=t.C,t.C=r.L.C=!1,hy(this,t),e=this._;break}r.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function fy(e,t){var r=t,n=t.R,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function hy(e,t){var r=t,n=t.L,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function vz(e){for(;e.L;)e=e.L;return e}function zy(e,t,r,n){var i=[null,null],o=Js.push(i)-1;return i.left=e,i.right=t,r&&Lw(i,e,t,r),n&&Lw(i,t,e,n),Sl[e.index].halfedges.push(o),Sl[t.index].halfedges.push(o),i}function dy(e,t,r){var n=[t,r];return n.left=e,n}function Lw(e,t,r,n){!e[0]&&!e[1]?(e[0]=n,e.left=t,e.right=r):e.left===r?e[1]=n:e[0]=n}function fye(e,t,r,n,i){var o=e[0],s=e[1],a=o[0],d=o[1],f=s[0],g=s[1],_=0,b=1,P=f-a,L=g-d,R;if(R=t-a,!(!P&&R>0)){if(R/=P,P<0){if(R<_)return;R<b&&(b=R)}else if(P>0){if(R>b)return;R>_&&(_=R)}if(R=n-a,!(!P&&R<0)){if(R/=P,P<0){if(R>b)return;R>_&&(_=R)}else if(P>0){if(R<_)return;R<b&&(b=R)}if(R=r-d,!(!L&&R>0)){if(R/=L,L<0){if(R<_)return;R<b&&(b=R)}else if(L>0){if(R>b)return;R>_&&(_=R)}if(R=i-d,!(!L&&R<0)){if(R/=L,L<0){if(R>b)return;R>_&&(_=R)}else if(L>0){if(R<_)return;R<b&&(b=R)}return!(_>0)&&!(b<1)||(_>0&&(e[0]=[a+_*P,d+_*L]),b<1&&(e[1]=[a+b*P,d+b*L])),!0}}}}}function hye(e,t,r,n,i){var o=e[1];if(o)return!0;var s=e[0],a=e.left,d=e.right,f=a[0],g=a[1],_=d[0],b=d[1],P=(f+_)/2,L=(g+b)/2,R,$;if(b===g){if(P<t||P>=n)return;if(f>_){if(!s)s=[P,r];else if(s[1]>=i)return;o=[P,i]}else{if(!s)s=[P,i];else if(s[1]<r)return;o=[P,r]}}else if(R=(f-_)/(b-g),$=L-R*P,R<-1||R>1)if(f>_){if(!s)s=[(r-$)/R,r];else if(s[1]>=i)return;o=[(i-$)/R,i]}else{if(!s)s=[(i-$)/R,i];else if(s[1]<r)return;o=[(r-$)/R,r]}else if(g<b){if(!s)s=[t,R*t+$];else if(s[0]>=n)return;o=[n,R*n+$]}else{if(!s)s=[n,R*n+$];else if(s[0]<t)return;o=[t,R*t+$]}return e[0]=s,e[1]=o,!0}function dye(e,t,r,n){for(var i=Js.length,o;i--;)(!hye(o=Js[i],e,t,r,n)||!fye(o,e,t,r,n)||!(Math.abs(o[0][0]-o[1][0])>Ni||Math.abs(o[0][1]-o[1][1])>Ni))&&delete Js[i]}function pye(e){return Sl[e.index]={site:e,halfedges:[]}}function mye(e,t){var r=e.site,n=t.left,i=t.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=t[1],i=t[0]):(n=t[0],i=t[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function OX(e,t){return t[+(t.left!==e.site)]}function gye(e,t){return t[+(t.left===e.site)]}function vye(){for(var e=0,t=Sl.length,r,n,i,o;e<t;++e)if((r=Sl[e])&&(o=(n=r.halfedges).length)){var s=new Array(o),a=new Array(o);for(i=0;i<o;++i)s[i]=i,a[i]=mye(r,Js[n[i]]);for(s.sort(function(d,f){return a[f]-a[d]}),i=0;i<o;++i)a[i]=n[s[i]];for(i=0;i<o;++i)n[i]=a[i]}}function yye(e,t,r,n){var i=Sl.length,o,s,a,d,f,g,_,b,P,L,R,$,F=!0;for(o=0;o<i;++o)if(s=Sl[o]){for(a=s.site,f=s.halfedges,d=f.length;d--;)Js[f[d]]||f.splice(d,1);for(d=0,g=f.length;d<g;)L=gye(s,Js[f[d]]),R=L[0],$=L[1],_=OX(s,Js[f[++d%g]]),b=_[0],P=_[1],(Math.abs(R-b)>Ni||Math.abs($-P)>Ni)&&(f.splice(d,0,Js.push(dy(a,L,Math.abs(R-e)<Ni&&n-$>Ni?[e,Math.abs(b-e)<Ni?P:n]:Math.abs($-n)<Ni&&r-R>Ni?[Math.abs(P-n)<Ni?b:r,n]:Math.abs(R-r)<Ni&&$-t>Ni?[r,Math.abs(b-r)<Ni?P:t]:Math.abs($-t)<Ni&&R-e>Ni?[Math.abs(P-t)<Ni?b:e,t]:null))-1),++g);g&&(F=!1)}if(F){var T,x,N,B=1/0;for(o=0,F=null;o<i;++o)(s=Sl[o])&&(a=s.site,T=a[0]-e,x=a[1]-t,N=T*T+x*x,N<B&&(B=N,F=s));if(F){var H=[e,t],Z=[e,n],Y=[r,n],W=[r,t];F.halfedges.push(Js.push(dy(a=F.site,H,Z))-1,Js.push(dy(a,Z,Y))-1,Js.push(dy(a,Y,W))-1,Js.push(dy(a,W,H))-1)}}for(o=0;o<i;++o)(s=Sl[o])&&(s.halfedges.length||delete Sl[o])}var TX=[],JD;function _ye(){_S(this),this.x=this.y=this.arc=this.site=this.cy=null}function ag(e){var t=e.P,r=e.N;if(!(!t||!r)){var n=t.site,i=e.site,o=r.site;if(n!==o){var s=i[0],a=i[1],d=n[0]-s,f=n[1]-a,g=o[0]-s,_=o[1]-a,b=2*(d*_-f*g);if(!(b>=-Sye)){var P=d*d+f*f,L=g*g+_*_,R=(_*P-f*L)/b,$=(d*L-g*P)/b,F=TX.pop()||new _ye;F.arc=e,F.site=i,F.x=R+s,F.y=(F.cy=$+a)+Math.sqrt(R*R+$*$),e.circle=F;for(var T=null,x=W0._;x;)if(F.y<x.y||F.y===x.y&&F.x<=x.x)if(x.L)x=x.L;else{T=x.P;break}else if(x.R)x=x.R;else{T=x;break}W0.insert(T,F),T||(JD=F)}}}}function bg(e){var t=e.circle;t&&(t.P||(JD=t.N),W0.remove(t),TX.push(t),_S(t),e.circle=null)}var MX=[];function bye(){_S(this),this.edge=this.site=this.circle=null}function yz(e){var t=MX.pop()||new bye;return t.site=e,t}function UI(e){bg(e),xg.remove(e),MX.push(e),_S(e)}function xye(e){var t=e.circle,r=t.x,n=t.cy,i=[r,n],o=e.P,s=e.N,a=[e];UI(e);for(var d=o;d.circle&&Math.abs(r-d.circle.x)<Ni&&Math.abs(n-d.circle.cy)<Ni;)o=d.P,a.unshift(d),UI(d),d=o;a.unshift(d),bg(d);for(var f=s;f.circle&&Math.abs(r-f.circle.x)<Ni&&Math.abs(n-f.circle.cy)<Ni;)s=f.N,a.push(f),UI(f),f=s;a.push(f),bg(f);var g=a.length,_;for(_=1;_<g;++_)f=a[_],d=a[_-1],Lw(f.edge,d.site,f.site,i);d=a[0],f=a[g-1],f.edge=zy(d.site,f.site,null,i),ag(d),ag(f)}function wye(e){for(var t=e[0],r=e[1],n,i,o,s,a=xg._;a;)if(o=LX(a,r)-t,o>Ni)a=a.L;else if(s=t-Eye(a,r),s>Ni){if(!a.R){n=a;break}a=a.R}else{o>-Ni?(n=a.P,i=a):s>-Ni?(n=a,i=a.N):n=i=a;break}pye(e);var d=yz(e);if(xg.insert(n,d),!(!n&&!i)){if(n===i){bg(n),i=yz(n.site),xg.insert(d,i),d.edge=i.edge=zy(n.site,d.site),ag(n),ag(i);return}if(!i){d.edge=zy(n.site,d.site);return}bg(n),bg(i);var f=n.site,g=f[0],_=f[1],b=e[0]-g,P=e[1]-_,L=i.site,R=L[0]-g,$=L[1]-_,F=2*(b*$-P*R),T=b*b+P*P,x=R*R+$*$,N=[($*T-P*x)/F+g,(b*x-R*T)/F+_];Lw(i.edge,f,L,N),d.edge=zy(f,e,null,N),i.edge=zy(e,L,null,N),ag(n),ag(i)}}function LX(e,t){var r=e.site,n=r[0],i=r[1],o=i-t;if(!o)return n;var s=e.P;if(!s)return-1/0;r=s.site;var a=r[0],d=r[1],f=d-t;if(!f)return a;var g=a-n,_=1/o-1/f,b=g/f;return _?(-b+Math.sqrt(b*b-2*_*(g*g/(-2*f)-d+f/2+i-o/2)))/_+n:(n+a)/2}function Eye(e,t){var r=e.N;if(r)return LX(r,t);var n=e.site;return n[1]===t?n[0]:1/0}var Ni=1e-6,Sye=1e-12,xg,Sl,W0,Js;function Pye(e,t,r){return(e[0]-r[0])*(t[1]-e[1])-(e[0]-t[0])*(r[1]-e[1])}function Aye(e,t){return t[1]-e[1]||t[0]-e[0]}function EM(e,t){var r=e.sort(Aye).pop(),n,i,o;for(Js=[],Sl=new Array(e.length),xg=new Mw,W0=new Mw;;)if(o=JD,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))(r[0]!==n||r[1]!==i)&&(wye(r),n=r[0],i=r[1]),r=e.pop();else if(o)xye(o.arc);else break;if(vye(),t){var s=+t[0][0],a=+t[0][1],d=+t[1][0],f=+t[1][1];dye(s,a,d,f),yye(s,a,d,f)}this.edges=Js,this.cells=Sl,xg=W0=Js=Sl=null}EM.prototype={constructor:EM,polygons:function(){var e=this.edges;return this.cells.map(function(t){var r=t.halfedges.map(function(n){return OX(t,e[n])});return r.data=t.site.data,r})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(r,n){if(a=(o=r.halfedges).length)for(var i=r.site,o,s=-1,a,d,f=t[o[a-1]],g=f.left===i?f.right:f.left;++s<a;)d=g,f=t[o[s]],g=f.left===i?f.right:f.left,d&&g&&n<d.index&&n<g.index&&Pye(i,d,g)<0&&e.push([i.data,d.data,g.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,r){for(var n=this,i,o=n._found||0,s=n.cells.length,a;!(a=n.cells[o]);)if(++o>=s)return null;var d=e-a.site[0],f=t-a.site[1],g=d*d+f*f;do a=n.cells[i=o],o=null,a.halfedges.forEach(function(_){var b=n.edges[_],P=b.left;if(!((P===a.site||!P)&&!(P=b.right))){var L=e-P[0],R=t-P[1],$=L*L+R*R;$<g&&(g=$,o=P.index)}});while(o!==null);return n._found=i,r==null||g<=r*r?a.site:null}};function Cye(){var e=lye,t=cye,r=null;function n(i){return new EM(i.map(function(o,s){var a=[Math.round(e(o,s,i)/Ni)*Ni,Math.round(t(o,s,i)/Ni)*Ni];return a.index=s,a.data=o,a}),r)}return n.polygons=function(i){return n(i).polygons()},n.links=function(i){return n(i).links()},n.triangles=function(i){return n(i).triangles()},n.x=function(i){return arguments.length?(e=typeof i=="function"?i:gz(+i),n):e},n.y=function(i){return arguments.length?(t=typeof i=="function"?i:gz(+i),n):t},n.extent=function(i){return arguments.length?(r=i==null?null:[[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(i){return arguments.length?(r=i==null?null:[[0,0],[+i[0],+i[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}const Iye=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Cye},Symbol.toStringTag,{value:"Module"})),Oye=Yg(Iye);var SM=Vt,Tye=Er,Mye=Oye;function Lye(e){return e=e.slice(),e.push(e[0]),SM.polygon([e])}function RX(e,t){if(t=t||{},!SM.isObject(t))throw new Error("options is invalid");var r=t.bbox||[-180,-85,180,85];if(!e)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return Tye.collectionOf(e,"Point","points"),SM.featureCollection(Mye.voronoi().x(function(n){return n.geometry.coordinates[0]}).y(function(n){return n.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(e.features).map(Lye))}KD.exports=RX;KD.exports.default=RX;var Rye=KD.exports,QD={exports:{}},Im=Vt,kye=jp,Dye=KW,VI=Er;function kX(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var _z=kX(kye),Nye=kX(Dye);function DX(e,t,r,n){n=n||{};var i=n.steps||64,o=n.units||"kilometers",s=n.angle||0,a=n.pivot||e,d=n.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!Im.isObject(n))throw new Error("options must be an object");if(!Im.isNumber(i))throw new Error("steps must be a number");if(!Im.isNumber(s))throw new Error("angle must be a number");var f=VI.getCoord(e);if(o==="degrees")var g=Im.degreesToRadians(s);else t=_z.default(e,t,90,{units:o}),r=_z.default(e,r,0,{units:o}),t=VI.getCoord(t)[0]-f[0],r=VI.getCoord(r)[1]-f[1];for(var _=[],b=0;b<i;b+=1){var P=b*-360/i,L=t*r/Math.sqrt(Math.pow(r,2)+Math.pow(t,2)*Math.pow(bz(P),2)),R=t*r/Math.sqrt(Math.pow(t,2)+Math.pow(r,2)/Math.pow(bz(P),2));if(P<-90&&P>=-270&&(L=-L),P<-180&&P>=-360&&(R=-R),o==="degrees"){var $=L*Math.cos(g)+R*Math.sin(g),F=R*Math.cos(g)-L*Math.sin(g);L=$,R=F}_.push([L+f[0],R+f[1]])}return _.push(_[0]),o==="degrees"?Im.polygon([_],d):Nye.default(Im.polygon([_],d),s,{pivot:a})}function bz(e){var t=e*Math.PI/180;return Math.tan(t)}QD.exports=DX;QD.exports.default=DX;var NX=QD.exports,L_={};Object.defineProperty(L_,"__esModule",{value:!0});var xz=ur,wz=Vt;function Fye(e,t){t===void 0&&(t={});var r=0,n=0,i=0;return xz.geomEach(e,function(o,s,a){var d=t.weight?a==null?void 0:a[t.weight]:void 0;if(d=d??1,!wz.isNumber(d))throw new Error("weight value must be a number for feature index "+s);d=Number(d),d>0&&xz.coordEach(o,function(f){r+=f[0]*d,n+=f[1]*d,i+=d})}),wz.point([r/i,n/i],t.properties,t)}L_.default=Fye;var eN={},tN=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eN,"__esModule",{value:!0});var $ye=tN(L_),zye=tN(wa),Bye=tN(ph),s0=Vt,FX=ur;function jye(e,t){if(t===void 0&&(t={}),t=t||{},!s0.isObject(t))throw new Error("options is invalid");var r=t.counter||10;if(!s0.isNumber(r))throw new Error("counter must be a number");var n=t.weight,i=$ye.default(e,{weight:t.weight}),o=s0.featureCollection([]);FX.featureEach(e,function(a){var d;o.features.push(Bye.default(a,{properties:{weight:(d=a.properties)===null||d===void 0?void 0:d[n]}}))});var s={tolerance:t.tolerance,medianCandidates:[]};return $X(i.geometry.coordinates,[0,0],o,s,r)}function $X(e,t,r,n,i){var o=n.tolerance||.001,s=0,a=0,d=0,f=0;if(FX.featureEach(r,function(b){var P,L=(P=b.properties)===null||P===void 0?void 0:P.weight,R=L??1;if(R=Number(R),!s0.isNumber(R))throw new Error("weight value must be a number");if(R>0){f+=1;var $=R*zye.default(b,e);$===0&&($=1);var F=R/$;s+=b.geometry.coordinates[0]*F,a+=b.geometry.coordinates[1]*F,d+=F}}),f<1)throw new Error("no features to measure");var g=s/d,_=a/d;return f===1||i===0||Math.abs(g-t[0])<o&&Math.abs(_-t[1])<o?s0.point([g,_],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([g,_]),$X([g,_],e,r,n,i-1))}eN.default=jye;var rN={exports:{}},Vb=ur,py=Er,Gb=Vt,Uye=L_,Vye=tq,Gye=NX;function nN(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var qye=nN(Uye),Wye=nN(Vye),Xye=nN(Gye);function zX(e,t){if(t=t||{},!Gb.isObject(t))throw new Error("options is invalid");var r=t.steps||64,n=t.weight,i=t.properties||{};if(!Gb.isNumber(r))throw new Error("steps must be a number");if(!Gb.isObject(i))throw new Error("properties must be a number");var o=Vb.coordAll(e).length,s=qye.default(e,{weight:n}),a=0,d=0,f=0;Vb.featureEach(e,function(Z){var Y=Z.properties[n]||1,W=Ez(py.getCoords(Z),py.getCoords(s));a+=Math.pow(W.x,2)*Y,d+=Math.pow(W.y,2)*Y,f+=W.x*W.y*Y});var g=a-d,_=Math.sqrt(Math.pow(g,2)+4*Math.pow(f,2)),b=2*f,P=Math.atan((g+_)/b),L=P*180/Math.PI,R=0,$=0,F=0;Vb.featureEach(e,function(Z){var Y=Z.properties[n]||1,W=Ez(py.getCoords(Z),py.getCoords(s));R+=Math.pow(W.x*Math.cos(P)-W.y*Math.sin(P),2)*Y,$+=Math.pow(W.x*Math.sin(P)+W.y*Math.cos(P),2)*Y,F+=Y});var T=Math.sqrt(2*R/F),x=Math.sqrt(2*$/F),N=Xye.default(s,T,x,{units:"degrees",angle:L,steps:r,properties:i}),B=Wye.default(e,Gb.featureCollection([N])),H={meanCenterCoordinates:py.getCoords(s),semiMajorAxis:T,semiMinorAxis:x,numberOfFeatures:o,angle:L,percentageWithinEllipse:100*Vb.coordAll(B).length/o};return N.properties.standardDeviationalEllipse=H,N}function Ez(e,t){return{x:e[0]-t[0],y:e[1]-t[1]}}rN.exports=zX;rN.exports.default=zX;var Yye=rN.exports,iN={},BX=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iN,"__esModule",{value:!0});var Sz=BX(Sd),GI=Vt,Pz=BX(Bp);function Hye(e,t,r,n){if(n===void 0&&(n={}),!GI.isObject(n))throw new Error("options is invalid");if(!e)throw new Error("startPoint is required");if(!t)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var i=e,o=t,s=r,a=GI.bearingToAzimuth(n.mercator!==!0?Sz.default(i,o):Pz.default(i,o)),d=GI.bearingToAzimuth(n.mercator!==!0?Sz.default(s,o):Pz.default(s,o)),f=Math.abs(a-d);return n.explementary===!0?360-f:f}iN.default=Hye;var oN={exports:{}},aN=ur,my=Vt;function jX(e,t){var r=[],n=t.iterations||1;if(!e)throw new Error("inputPolys is required");return aN.geomEach(e,function(i,o,s){var a,d,f;switch(i.type){case"Polygon":a=[[]];for(var g=0;g<n;g++)f=[[]],d=i,g>0&&(d=my.polygon(a).geometry),Zye(d,f),a=f.slice(0);r.push(my.polygon(a,s));break;case"MultiPolygon":a=[[[]]];for(var _=0;_<n;_++)f=[[[]]],d=i,_>0&&(d=my.multiPolygon(a).geometry),Kye(d,f),a=f.slice(0);r.push(my.multiPolygon(a,s));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),my.featureCollection(r)}function Zye(e,t){var r=0,n=0;aN.coordEach(e,function(i,o,s,a,d){d>r&&(r=d,n=o,t.push([]));var f=o-n,g=e.coordinates[d][f+1],_=i[0],b=i[1],P=g[0],L=g[1];t[d].push([.75*_+.25*P,.75*b+.25*L]),t[d].push([.25*_+.75*P,.25*b+.75*L])},!0),t.forEach(function(i){i.push(i[0])})}function Kye(e,t){var r=0,n=0,i=0;aN.coordEach(e,function(o,s,a,d,f){d>i&&(i=d,n=s,t.push([[]])),f>r&&(r=f,n=s,t[d].push([]));var g=s-n,_=e.coordinates[d][f][g+1],b=o[0],P=o[1],L=_[0],R=_[1];t[d][f].push([.75*b+.25*L,.75*P+.25*R]),t[d][f].push([.25*b+.75*L,.25*P+.75*R])},!0),t.forEach(function(o){o.forEach(function(s){s.push(s[0])})})}oN.exports=jX;oN.exports.default=jX;var Jye=oN.exports,sN={},R_={},Qye=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R_,"__esModule",{value:!0});var e0e=Qye(ph),Az=Er,t0e=ur;function UX(e,t,r){r===void 0&&(r=2);var n=Az.getCoord(e),i=Az.getCoord(t),o=n[0]-i[0],s=n[1]-i[1];return r===1?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,r)+Math.pow(s,r),1/r)}R_.pNormDistance=UX;function r0e(e,t){t=t||{};var r=t.threshold||1e4,n=t.p||2,i=t.binary||!1,o=t.alpha||-1,s=t.standardization||!1,a=[];t0e.featureEach(e,function(P){a.push(e0e.default(P))});for(var d=[],f=0;f<a.length;f++)d[f]=[];for(var f=0;f<a.length;f++)for(var g=f;g<a.length;g++){f===g&&(d[f][g]=0);var _=UX(a[f],a[g],n);d[f][g]=_,d[g][f]=_}for(var f=0;f<a.length;f++)for(var g=0;g<a.length;g++){var _=d[f][g];_!==0&&(i?_<=r?d[f][g]=1:d[f][g]=0:_<=r?d[f][g]=Math.pow(_,o):d[f][g]=0)}if(s)for(var f=0;f<a.length;f++)for(var b=d[f].reduce(function(L,R){return L+R},0),g=0;g<a.length;g++)d[f][g]=d[f][g]/b;return d}R_.default=r0e;var n0e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sN,"__esModule",{value:!0});var i0e=n0e(R_),o0e=ur;function a0e(e,t){var r=t.inputField,n=t.threshold||1e5,i=t.p||2,o=t.binary||!1,s=t.alpha||-1,a=t.standardization||!0,d=i0e.default(e,{alpha:s,binary:o,p:i,standardization:a,threshold:n}),f=[];o0e.featureEach(e,function(me){var ge=me.properties||{};f.push(ge[r])});for(var g=VX(f),_=s0e(f),b=0,P=0,L=0,R=0,$=d.length,F=0;F<$;F++){for(var T=0,x=0;x<$;x++)b+=d[F][x]*(f[F]-g)*(f[x]-g),P+=d[F][x],L+=Math.pow(d[F][x]+d[x][F],2),T+=d[F][x]+d[x][F];R+=Math.pow(T,2)}L=.5*L;var N=b/P/_,B=-1/($-1),H=$*$*L-$*R+3*(P*P),Z=($-1)*($+1)*(P*P),Y=H/Z-B*B,W=Math.sqrt(Y),Q=(N-B)/W;return{expectedMoranIndex:B,moranIndex:N,stdNorm:W,zNorm:Q}}sN.default=a0e;function VX(e){for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];t+=i}return t/e.length}function s0e(e){for(var t=VX(e),r=0,n=0,i=e;n<i.length;n++){var o=i[n];r+=Math.pow(o-t,2)}return r/e.length}var bS={},u0e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bS,"__esModule",{value:!0});var l0e=ur,c0e=Vt,f0e=u0e(ja);function h0e(e,t){return t===void 0&&(t={}),GX(e,"mercator",t)}bS.toMercator=h0e;function d0e(e,t){return t===void 0&&(t={}),GX(e,"wgs84",t)}bS.toWgs84=d0e;function GX(e,t,r){r===void 0&&(r={}),r=r||{};var n=r.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&c0e.isNumber(e[0])?e=t==="mercator"?Cz(e):Iz(e):(n!==!0&&(e=f0e.default(e)),l0e.coordEach(e,function(i){var o=t==="mercator"?Cz(i):Iz(i);i[0]=o[0],i[1]=o[1]})),e}function Cz(e){var t=Math.PI/180,r=6378137,n=20037508342789244e-9,i=Math.abs(e[0])<=180?e[0]:e[0]-p0e(e[0])*360,o=[r*i*t,r*Math.log(Math.tan(Math.PI*.25+.5*e[1]*t))];return o[0]>n&&(o[0]=n),o[0]<-n&&(o[0]=-n),o[1]>n&&(o[1]=n),o[1]<-n&&(o[1]=-n),o}function Iz(e){var t=180/Math.PI,r=6378137;return[e[0]*t/r,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/r)))*t]}function p0e(e){return e<0?-1:e>0?1:0}var av={},m0e=Pe&&Pe.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(av,"__esModule",{value:!0});var Kl=Vt;function xS(e){return Array.isArray(e)?Oz(e):e&&e.bbox?Oz(e.bbox):[b0e(),x0e()]}av.randomPosition=xS;function g0e(e,t){t===void 0&&(t={}),e==null&&(e=1);for(var r=[],n=0;n<e;n++)r.push(Kl.point(xS(t.bbox)));return Kl.featureCollection(r)}av.randomPoint=g0e;function v0e(e,t){t===void 0&&(t={}),e==null&&(e=1),(!Kl.isNumber(t.num_vertices)||t.num_vertices===void 0)&&(t.num_vertices=10),(!Kl.isNumber(t.max_radial_length)||t.max_radial_length===void 0)&&(t.max_radial_length=10);for(var r=[],n=function(o){var s=[],a=m0e(Array(t.num_vertices+1)).map(Math.random);a.forEach(function(d,f,g){g[f]=f>0?d+g[f-1]:d}),a.forEach(function(d){d=d*2*Math.PI/a[a.length-1];var f=Math.random();s.push([f*(t.max_radial_length||10)*Math.sin(d),f*(t.max_radial_length||10)*Math.cos(d)])}),s[s.length-1]=s[0],s=s.map(_0e(xS(t.bbox))),r.push(Kl.polygon([s]))},i=0;i<e;i++)n();return Kl.featureCollection(r)}av.randomPolygon=v0e;function y0e(e,t){if(t===void 0&&(t={}),t=t||{},!Kl.isObject(t))throw new Error("options is invalid");var r=t.bbox,n=t.num_vertices,i=t.max_length,o=t.max_rotation;e==null&&(e=1),(!Kl.isNumber(n)||n===void 0||n<2)&&(n=10),(!Kl.isNumber(i)||i===void 0)&&(i=1e-4),(!Kl.isNumber(o)||o===void 0)&&(o=Math.PI/8);for(var s=[],a=0;a<e;a++){for(var d=xS(r),f=[d],g=0;g<n-1;g++){var _=g===0?Math.random()*2*Math.PI:Math.tan((f[g][1]-f[g-1][1])/(f[g][0]-f[g-1][0])),b=_+(Math.random()-.5)*o*2,P=Math.random()*i;f.push([f[g][0]+P*Math.cos(b),f[g][1]+P*Math.sin(b)])}s.push(Kl.lineString(f))}return Kl.featureCollection(s)}av.randomLineString=y0e;function _0e(e){return function(t){return[t[0]+e[0],t[1]+e[1]]}}function qX(){return Math.random()-.5}function b0e(){return qX()*360}function x0e(){return qX()*180}function Oz(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}var mh={};Object.defineProperty(mh,"__esModule",{value:!0});var WX=ur,XX=Vt;function w0e(e,t){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t==null)throw new Error("filter is required");var r=[];return WX.featureEach(e,function(n){uN(n.properties,t)&&r.push(n)}),XX.featureCollection(r)}mh.getCluster=w0e;function YX(e,t,r){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t==null)throw new Error("property is required");for(var n=HX(e,t),i=Object.keys(n),o=0;o<i.length;o++){for(var s=i[o],a=n[s],d=[],f=0;f<a.length;f++)d.push(e.features[a[f]]);r(XX.featureCollection(d),s,o)}}mh.clusterEach=YX;function E0e(e,t,r,n){var i=n;return YX(e,t,function(o,s,a){a===0&&n===void 0?i=o:i=r(i,o,s,a)}),i}mh.clusterReduce=E0e;function HX(e,t){var r={};return WX.featureEach(e,function(n,i){var o=n.properties||{};if(Object.prototype.hasOwnProperty.call(o,String(t))){var s=o[t];Object.prototype.hasOwnProperty.call(r,s)?r[s].push(i):r[s]=[i]}}),r}mh.createBins=HX;function uN(e,t){if(e===void 0)return!1;var r=typeof t;if(r==="number"||r==="string")return Object.prototype.hasOwnProperty.call(e,t);if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(!uN(e,t[n]))return!1;return!0}else return ZX(e,t)}mh.applyFilter=uN;function ZX(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}return!0}mh.propertiesContainsFilter=ZX;function S0e(e,t){if(!t)return{};if(!t.length)return{};for(var r={},n=0;n<t.length;n++){var i=t[n];Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r}mh.filterProperties=S0e;var lN={exports:{}},KX={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Pe,function(){function r(ot,Oe){if(!(ot instanceof Oe))throw new TypeError("Cannot call a class as a function")}function n(ot,Oe){for(var ve=0;ve<Oe.length;ve++){var xe=Oe[ve];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(ot,xe.key,xe)}}function i(ot,Oe,ve){return Oe&&n(ot.prototype,Oe),ve&&n(ot,ve),ot}/**
 * splaytree v3.1.0
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */var o=function(){function ot(Oe,ve){this.next=null,this.key=Oe,this.data=ve,this.left=null,this.right=null}return ot}();function s(ot,Oe){return ot>Oe?1:ot<Oe?-1:0}function a(ot,Oe,ve){for(var xe=new o(null,null),je=xe,Ke=xe;;){var qe=ve(ot,Oe.key);if(qe<0){if(Oe.left===null)break;if(ve(ot,Oe.left.key)<0){var mt=Oe.left;if(Oe.left=mt.right,mt.right=Oe,Oe=mt,Oe.left===null)break}Ke.left=Oe,Ke=Oe,Oe=Oe.left}else if(qe>0){if(Oe.right===null)break;if(ve(ot,Oe.right.key)>0){var mt=Oe.right;if(Oe.right=mt.left,mt.left=Oe,Oe=mt,Oe.right===null)break}je.right=Oe,je=Oe,Oe=Oe.right}else break}return je.right=Oe.left,Ke.left=Oe.right,Oe.left=xe.right,Oe.right=xe.left,Oe}function d(ot,Oe,ve,xe){var je=new o(ot,Oe);if(ve===null)return je.left=je.right=null,je;ve=a(ot,ve,xe);var Ke=xe(ot,ve.key);return Ke<0?(je.left=ve.left,je.right=ve,ve.left=null):Ke>=0&&(je.right=ve.right,je.left=ve,ve.right=null),je}function f(ot,Oe,ve){var xe=null,je=null;if(Oe){Oe=a(ot,Oe,ve);var Ke=ve(Oe.key,ot);Ke===0?(xe=Oe.left,je=Oe.right):Ke<0?(je=Oe.right,Oe.right=null,xe=Oe):(xe=Oe.left,Oe.left=null,je=Oe)}return{left:xe,right:je}}function g(ot,Oe,ve){return Oe===null?ot:(ot===null||(Oe=a(ot.key,Oe,ve),Oe.left=ot),Oe)}function _(ot,Oe,ve,xe,je){if(ot){xe(""+Oe+(ve?" ":" ")+je(ot)+`
`);var Ke=Oe+(ve?"    ":"   ");ot.left&&_(ot.left,Ke,!1,xe,je),ot.right&&_(ot.right,Ke,!0,xe,je)}}var b=function(){function ot(Oe){Oe===void 0&&(Oe=s),this._root=null,this._size=0,this._comparator=Oe}return ot.prototype.insert=function(Oe,ve){return this._size++,this._root=d(Oe,ve,this._root,this._comparator)},ot.prototype.add=function(Oe,ve){var xe=new o(Oe,ve);this._root===null&&(xe.left=xe.right=null,this._size++,this._root=xe);var je=this._comparator,Ke=a(Oe,this._root,je),qe=je(Oe,Ke.key);return qe===0?this._root=Ke:(qe<0?(xe.left=Ke.left,xe.right=Ke,Ke.left=null):qe>0&&(xe.right=Ke.right,xe.left=Ke,Ke.right=null),this._size++,this._root=xe),this._root},ot.prototype.remove=function(Oe){this._root=this._remove(Oe,this._root,this._comparator)},ot.prototype._remove=function(Oe,ve,xe){var je;if(ve===null)return null;ve=a(Oe,ve,xe);var Ke=xe(Oe,ve.key);return Ke===0?(ve.left===null?je=ve.right:(je=a(Oe,ve.left,xe),je.right=ve.right),this._size--,je):ve},ot.prototype.pop=function(){var Oe=this._root;if(Oe){for(;Oe.left;)Oe=Oe.left;return this._root=a(Oe.key,this._root,this._comparator),this._root=this._remove(Oe.key,this._root,this._comparator),{key:Oe.key,data:Oe.data}}return null},ot.prototype.findStatic=function(Oe){for(var ve=this._root,xe=this._comparator;ve;){var je=xe(Oe,ve.key);if(je===0)return ve;je<0?ve=ve.left:ve=ve.right}return null},ot.prototype.find=function(Oe){return this._root&&(this._root=a(Oe,this._root,this._comparator),this._comparator(Oe,this._root.key)!==0)?null:this._root},ot.prototype.contains=function(Oe){for(var ve=this._root,xe=this._comparator;ve;){var je=xe(Oe,ve.key);if(je===0)return!0;je<0?ve=ve.left:ve=ve.right}return!1},ot.prototype.forEach=function(Oe,ve){for(var xe=this._root,je=[],Ke=!1;!Ke;)xe!==null?(je.push(xe),xe=xe.left):je.length!==0?(xe=je.pop(),Oe.call(ve,xe),xe=xe.right):Ke=!0;return this},ot.prototype.range=function(Oe,ve,xe,je){for(var Ke=[],qe=this._comparator,mt=this._root,rt;Ke.length!==0||mt;)if(mt)Ke.push(mt),mt=mt.left;else{if(mt=Ke.pop(),rt=qe(mt.key,ve),rt>0)break;if(qe(mt.key,Oe)>=0&&xe.call(je,mt))return this;mt=mt.right}return this},ot.prototype.keys=function(){var Oe=[];return this.forEach(function(ve){var xe=ve.key;return Oe.push(xe)}),Oe},ot.prototype.values=function(){var Oe=[];return this.forEach(function(ve){var xe=ve.data;return Oe.push(xe)}),Oe},ot.prototype.min=function(){return this._root?this.minNode(this._root).key:null},ot.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},ot.prototype.minNode=function(Oe){if(Oe===void 0&&(Oe=this._root),Oe)for(;Oe.left;)Oe=Oe.left;return Oe},ot.prototype.maxNode=function(Oe){if(Oe===void 0&&(Oe=this._root),Oe)for(;Oe.right;)Oe=Oe.right;return Oe},ot.prototype.at=function(Oe){for(var ve=this._root,xe=!1,je=0,Ke=[];!xe;)if(ve)Ke.push(ve),ve=ve.left;else if(Ke.length>0){if(ve=Ke.pop(),je===Oe)return ve;je++,ve=ve.right}else xe=!0;return null},ot.prototype.next=function(Oe){var ve=this._root,xe=null;if(Oe.right){for(xe=Oe.right;xe.left;)xe=xe.left;return xe}for(var je=this._comparator;ve;){var Ke=je(Oe.key,ve.key);if(Ke===0)break;Ke<0?(xe=ve,ve=ve.left):ve=ve.right}return xe},ot.prototype.prev=function(Oe){var ve=this._root,xe=null;if(Oe.left!==null){for(xe=Oe.left;xe.right;)xe=xe.right;return xe}for(var je=this._comparator;ve;){var Ke=je(Oe.key,ve.key);if(Ke===0)break;Ke<0?ve=ve.left:(xe=ve,ve=ve.right)}return xe},ot.prototype.clear=function(){return this._root=null,this._size=0,this},ot.prototype.toList=function(){return R(this._root)},ot.prototype.load=function(Oe,ve,xe){ve===void 0&&(ve=[]),xe===void 0&&(xe=!1);var je=Oe.length,Ke=this._comparator;if(xe&&T(Oe,ve,0,je-1,Ke),this._root===null)this._root=P(Oe,ve,0,je),this._size=je;else{var qe=F(this.toList(),L(Oe,ve),Ke);je=this._size+je,this._root=$({head:qe},0,je)}return this},ot.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(ot.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(ot.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),ot.prototype.toString=function(Oe){Oe===void 0&&(Oe=function(je){return String(je.key)});var ve=[];return _(this._root,"",!0,function(xe){return ve.push(xe)},Oe),ve.join("")},ot.prototype.update=function(Oe,ve,xe){var je=this._comparator,Ke=f(Oe,this._root,je),qe=Ke.left,mt=Ke.right;je(Oe,ve)<0?mt=d(ve,xe,mt,je):qe=d(ve,xe,qe,je),this._root=g(qe,mt,je)},ot.prototype.split=function(Oe){return f(Oe,this._root,this._comparator)},ot}();function P(ot,Oe,ve,xe){var je=xe-ve;if(je>0){var Ke=ve+Math.floor(je/2),qe=ot[Ke],mt=Oe[Ke],rt=new o(qe,mt);return rt.left=P(ot,Oe,ve,Ke),rt.right=P(ot,Oe,Ke+1,xe),rt}return null}function L(ot,Oe){for(var ve=new o(null,null),xe=ve,je=0;je<ot.length;je++)xe=xe.next=new o(ot[je],Oe[je]);return xe.next=null,ve.next}function R(ot){for(var Oe=ot,ve=[],xe=!1,je=new o(null,null),Ke=je;!xe;)Oe?(ve.push(Oe),Oe=Oe.left):ve.length>0?(Oe=Ke=Ke.next=ve.pop(),Oe=Oe.right):xe=!0;return Ke.next=null,je.next}function $(ot,Oe,ve){var xe=ve-Oe;if(xe>0){var je=Oe+Math.floor(xe/2),Ke=$(ot,Oe,je),qe=ot.head;return qe.left=Ke,ot.head=ot.head.next,qe.right=$(ot,je+1,ve),qe}return null}function F(ot,Oe,ve){for(var xe=new o(null,null),je=xe,Ke=ot,qe=Oe;Ke!==null&&qe!==null;)ve(Ke.key,qe.key)<0?(je.next=Ke,Ke=Ke.next):(je.next=qe,qe=qe.next),je=je.next;return Ke!==null?je.next=Ke:qe!==null&&(je.next=qe),xe.next}function T(ot,Oe,ve,xe,je){if(!(ve>=xe)){for(var Ke=ot[ve+xe>>1],qe=ve-1,mt=xe+1;;){do qe++;while(je(ot[qe],Ke)<0);do mt--;while(je(ot[mt],Ke)>0);if(qe>=mt)break;var rt=ot[qe];ot[qe]=ot[mt],ot[mt]=rt,rt=Oe[qe],Oe[qe]=Oe[mt],Oe[mt]=rt}T(ot,Oe,ve,mt,je),T(ot,Oe,mt+1,xe,je)}}var x=function(Oe,ve){return Oe.ll.x<=ve.x&&ve.x<=Oe.ur.x&&Oe.ll.y<=ve.y&&ve.y<=Oe.ur.y},N=function(Oe,ve){if(ve.ur.x<Oe.ll.x||Oe.ur.x<ve.ll.x||ve.ur.y<Oe.ll.y||Oe.ur.y<ve.ll.y)return null;var xe=Oe.ll.x<ve.ll.x?ve.ll.x:Oe.ll.x,je=Oe.ur.x<ve.ur.x?Oe.ur.x:ve.ur.x,Ke=Oe.ll.y<ve.ll.y?ve.ll.y:Oe.ll.y,qe=Oe.ur.y<ve.ur.y?Oe.ur.y:ve.ur.y;return{ll:{x:xe,y:Ke},ur:{x:je,y:qe}}},B=Number.EPSILON;B===void 0&&(B=Math.pow(2,-52));var H=B*B,Z=function(Oe,ve){if(-B<Oe&&Oe<B&&-B<ve&&ve<B)return 0;var xe=Oe-ve;return xe*xe<H*Oe*ve?0:Oe<ve?-1:1},Y=function(){function ot(){r(this,ot),this.reset()}return i(ot,[{key:"reset",value:function(){this.xRounder=new W,this.yRounder=new W}},{key:"round",value:function(ve,xe){return{x:this.xRounder.round(ve),y:this.yRounder.round(xe)}}}]),ot}(),W=function(){function ot(){r(this,ot),this.tree=new b,this.round(0)}return i(ot,[{key:"round",value:function(ve){var xe=this.tree.add(ve),je=this.tree.prev(xe);if(je!==null&&Z(xe.key,je.key)===0)return this.tree.remove(ve),je.key;var Ke=this.tree.next(xe);return Ke!==null&&Z(xe.key,Ke.key)===0?(this.tree.remove(ve),Ke.key):ve}}]),ot}(),Q=new Y,me=function(Oe,ve){return Oe.x*ve.y-Oe.y*ve.x},ge=function(Oe,ve){return Oe.x*ve.x+Oe.y*ve.y},be=function(Oe,ve,xe){var je={x:ve.x-Oe.x,y:ve.y-Oe.y},Ke={x:xe.x-Oe.x,y:xe.y-Oe.y},qe=me(je,Ke);return Z(qe,0)},oe=function(Oe){return Math.sqrt(ge(Oe,Oe))},Ie=function(Oe,ve,xe){var je={x:ve.x-Oe.x,y:ve.y-Oe.y},Ke={x:xe.x-Oe.x,y:xe.y-Oe.y};return me(Ke,je)/oe(Ke)/oe(je)},fe=function(Oe,ve,xe){var je={x:ve.x-Oe.x,y:ve.y-Oe.y},Ke={x:xe.x-Oe.x,y:xe.y-Oe.y};return ge(Ke,je)/oe(Ke)/oe(je)},G=function(Oe,ve,xe){return ve.y===0?null:{x:Oe.x+ve.x/ve.y*(xe-Oe.y),y:xe}},K=function(Oe,ve,xe){return ve.x===0?null:{x:xe,y:Oe.y+ve.y/ve.x*(xe-Oe.x)}},re=function(Oe,ve,xe,je){if(ve.x===0)return K(xe,je,Oe.x);if(je.x===0)return K(Oe,ve,xe.x);if(ve.y===0)return G(xe,je,Oe.y);if(je.y===0)return G(Oe,ve,xe.y);var Ke=me(ve,je);if(Ke==0)return null;var qe={x:xe.x-Oe.x,y:xe.y-Oe.y},mt=me(qe,ve)/Ke,rt=me(qe,je)/Ke,Ht=Oe.x+rt*ve.x,lr=xe.x+mt*je.x,ut=Oe.y+rt*ve.y,kt=xe.y+mt*je.y,$t=(Ht+lr)/2,Lr=(ut+kt)/2;return{x:$t,y:Lr}},ie=function(){i(ot,null,[{key:"compare",value:function(ve,xe){var je=ot.comparePoints(ve.point,xe.point);return je!==0?je:(ve.point!==xe.point&&ve.link(xe),ve.isLeft!==xe.isLeft?ve.isLeft?1:-1:ae.compare(ve.segment,xe.segment))}},{key:"comparePoints",value:function(ve,xe){return ve.x<xe.x?-1:ve.x>xe.x?1:ve.y<xe.y?-1:ve.y>xe.y?1:0}}]);function ot(Oe,ve){r(this,ot),Oe.events===void 0?Oe.events=[this]:Oe.events.push(this),this.point=Oe,this.isLeft=ve}return i(ot,[{key:"link",value:function(ve){if(ve.point===this.point)throw new Error("Tried to link already linked events");for(var xe=ve.point.events,je=0,Ke=xe.length;je<Ke;je++){var qe=xe[je];this.point.events.push(qe),qe.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var ve=this.point.events.length,xe=0;xe<ve;xe++){var je=this.point.events[xe];if(je.segment.consumedBy===void 0)for(var Ke=xe+1;Ke<ve;Ke++){var qe=this.point.events[Ke];qe.consumedBy===void 0&&je.otherSE.point.events===qe.otherSE.point.events&&je.segment.consume(qe.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var ve=[],xe=0,je=this.point.events.length;xe<je;xe++){var Ke=this.point.events[xe];Ke!==this&&!Ke.segment.ringOut&&Ke.segment.isInResult()&&ve.push(Ke)}return ve}},{key:"getLeftmostComparator",value:function(ve){var xe=this,je=new Map,Ke=function(mt){var rt=mt.otherSE;je.set(mt,{sine:Ie(xe.point,ve.point,rt.point),cosine:fe(xe.point,ve.point,rt.point)})};return function(qe,mt){je.has(qe)||Ke(qe),je.has(mt)||Ke(mt);var rt=je.get(qe),Ht=rt.sine,lr=rt.cosine,ut=je.get(mt),kt=ut.sine,$t=ut.cosine;return Ht>=0&&kt>=0?lr<$t?1:lr>$t?-1:0:Ht<0&&kt<0?lr<$t?-1:lr>$t?1:0:kt<Ht?-1:kt>Ht?1:0}}}]),ot}(),he=0,ae=function(){i(ot,null,[{key:"compare",value:function(ve,xe){var je=ve.leftSE.point.x,Ke=xe.leftSE.point.x,qe=ve.rightSE.point.x,mt=xe.rightSE.point.x;if(mt<je)return 1;if(qe<Ke)return-1;var rt=ve.leftSE.point.y,Ht=xe.leftSE.point.y,lr=ve.rightSE.point.y,ut=xe.rightSE.point.y;if(je<Ke){if(Ht<rt&&Ht<lr)return 1;if(Ht>rt&&Ht>lr)return-1;var kt=ve.comparePoint(xe.leftSE.point);if(kt<0)return 1;if(kt>0)return-1;var $t=xe.comparePoint(ve.rightSE.point);return $t!==0?$t:-1}if(je>Ke){if(rt<Ht&&rt<ut)return-1;if(rt>Ht&&rt>ut)return 1;var Lr=xe.comparePoint(ve.leftSE.point);if(Lr!==0)return Lr;var Rr=ve.comparePoint(xe.rightSE.point);return Rr<0?1:Rr>0?-1:1}if(rt<Ht)return-1;if(rt>Ht)return 1;if(qe<mt){var Nt=xe.comparePoint(ve.rightSE.point);if(Nt!==0)return Nt}if(qe>mt){var yn=ve.comparePoint(xe.rightSE.point);if(yn<0)return 1;if(yn>0)return-1}if(qe!==mt){var _n=lr-rt,ti=qe-je,dn=ut-Ht,Kr=mt-Ke;if(_n>ti&&dn<Kr)return 1;if(_n<ti&&dn>Kr)return-1}return qe>mt?1:qe<mt||lr<ut?-1:lr>ut?1:ve.id<xe.id?-1:ve.id>xe.id?1:0}}]);function ot(Oe,ve,xe,je){r(this,ot),this.id=++he,this.leftSE=Oe,Oe.segment=this,Oe.otherSE=ve,this.rightSE=ve,ve.segment=this,ve.otherSE=Oe,this.rings=xe,this.windings=je}return i(ot,[{key:"replaceRightSE",value:function(ve){this.rightSE=ve,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var ve=this.leftSE.point.y,xe=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ve<xe?ve:xe},ur:{x:this.rightSE.point.x,y:ve>xe?ve:xe}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(ve){return ve.x===this.leftSE.point.x&&ve.y===this.leftSE.point.y||ve.x===this.rightSE.point.x&&ve.y===this.rightSE.point.y}},{key:"comparePoint",value:function(ve){if(this.isAnEndpoint(ve))return 0;var xe=this.leftSE.point,je=this.rightSE.point,Ke=this.vector();if(xe.x===je.x)return ve.x===xe.x?0:ve.x<xe.x?1:-1;var qe=(ve.y-xe.y)/Ke.y,mt=xe.x+qe*Ke.x;if(ve.x===mt)return 0;var rt=(ve.x-xe.x)/Ke.x,Ht=xe.y+rt*Ke.y;return ve.y===Ht?0:ve.y<Ht?-1:1}},{key:"getIntersection",value:function(ve){var xe=this.bbox(),je=ve.bbox(),Ke=N(xe,je);if(Ke===null)return null;var qe=this.leftSE.point,mt=this.rightSE.point,rt=ve.leftSE.point,Ht=ve.rightSE.point,lr=x(xe,rt)&&this.comparePoint(rt)===0,ut=x(je,qe)&&ve.comparePoint(qe)===0,kt=x(xe,Ht)&&this.comparePoint(Ht)===0,$t=x(je,mt)&&ve.comparePoint(mt)===0;if(ut&&lr)return $t&&!kt?mt:!$t&&kt?Ht:null;if(ut)return kt&&qe.x===Ht.x&&qe.y===Ht.y?null:qe;if(lr)return $t&&mt.x===rt.x&&mt.y===rt.y?null:rt;if($t&&kt)return null;if($t)return mt;if(kt)return Ht;var Lr=re(qe,this.vector(),rt,ve.vector());return Lr===null||!x(Ke,Lr)?null:Q.round(Lr.x,Lr.y)}},{key:"split",value:function(ve){var xe=[],je=ve.events!==void 0,Ke=new ie(ve,!0),qe=new ie(ve,!1),mt=this.rightSE;this.replaceRightSE(qe),xe.push(qe),xe.push(Ke);var rt=new ot(Ke,mt,this.rings.slice(),this.windings.slice());return ie.comparePoints(rt.leftSE.point,rt.rightSE.point)>0&&rt.swapEvents(),ie.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),je&&(Ke.checkForConsuming(),qe.checkForConsuming()),xe}},{key:"swapEvents",value:function(){var ve=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ve,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var xe=0,je=this.windings.length;xe<je;xe++)this.windings[xe]*=-1}},{key:"consume",value:function(ve){for(var xe=this,je=ve;xe.consumedBy;)xe=xe.consumedBy;for(;je.consumedBy;)je=je.consumedBy;var Ke=ot.compare(xe,je);if(Ke!==0){if(Ke>0){var qe=xe;xe=je,je=qe}if(xe.prev===je){var mt=xe;xe=je,je=mt}for(var rt=0,Ht=je.rings.length;rt<Ht;rt++){var lr=je.rings[rt],ut=je.windings[rt],kt=xe.rings.indexOf(lr);kt===-1?(xe.rings.push(lr),xe.windings.push(ut)):xe.windings[kt]+=ut}je.rings=null,je.windings=null,je.consumedBy=xe,je.leftSE.consumedBy=xe.leftSE,je.rightSE.consumedBy=xe.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var ve=this.prev.consumedBy||this.prev;this._beforeState=ve.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var ve=this.beforeState();this._afterState={rings:ve.rings.slice(0),windings:ve.windings.slice(0),multiPolys:[]};for(var xe=this._afterState.rings,je=this._afterState.windings,Ke=this._afterState.multiPolys,qe=0,mt=this.rings.length;qe<mt;qe++){var rt=this.rings[qe],Ht=this.windings[qe],lr=xe.indexOf(rt);lr===-1?(xe.push(rt),je.push(Ht)):je[lr]+=Ht}for(var ut=[],kt=[],$t=0,Lr=xe.length;$t<Lr;$t++)if(je[$t]!==0){var Rr=xe[$t],Nt=Rr.poly;if(kt.indexOf(Nt)===-1)if(Rr.isExterior)ut.push(Nt);else{kt.indexOf(Nt)===-1&&kt.push(Nt);var yn=ut.indexOf(Rr.poly);yn!==-1&&ut.splice(yn,1)}}for(var _n=0,ti=ut.length;_n<ti;_n++){var dn=ut[_n].multiPoly;Ke.indexOf(dn)===-1&&Ke.push(dn)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var ve=this.beforeState().multiPolys,xe=this.afterState().multiPolys;switch(Ze.type){case"union":{var je=ve.length===0,Ke=xe.length===0;this._isInResult=je!==Ke;break}case"intersection":{var qe,mt;ve.length<xe.length?(qe=ve.length,mt=xe.length):(qe=xe.length,mt=ve.length),this._isInResult=mt===Ze.numMultiPolys&&qe<mt;break}case"xor":{var rt=Math.abs(ve.length-xe.length);this._isInResult=rt%2===1;break}case"difference":{var Ht=function(ut){return ut.length===1&&ut[0].isSubject};this._isInResult=Ht(ve)!==Ht(xe);break}default:throw new Error("Unrecognized operation type found ".concat(Ze.type))}return this._isInResult}}],[{key:"fromRing",value:function(ve,xe,je){var Ke,qe,mt,rt=ie.comparePoints(ve,xe);if(rt<0)Ke=ve,qe=xe,mt=1;else if(rt>0)Ke=xe,qe=ve,mt=-1;else throw new Error("Tried to create degenerate segment at [".concat(ve.x,", ").concat(ve.y,"]"));var Ht=new ie(Ke,!0),lr=new ie(qe,!1);return new ot(Ht,lr,[je],[mt])}}]),ot}(),Te=function(){function ot(Oe,ve,xe){if(r(this,ot),!Array.isArray(Oe)||Oe.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=ve,this.isExterior=xe,this.segments=[],typeof Oe[0][0]!="number"||typeof Oe[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var je=Q.round(Oe[0][0],Oe[0][1]);this.bbox={ll:{x:je.x,y:je.y},ur:{x:je.x,y:je.y}};for(var Ke=je,qe=1,mt=Oe.length;qe<mt;qe++){if(typeof Oe[qe][0]!="number"||typeof Oe[qe][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var rt=Q.round(Oe[qe][0],Oe[qe][1]);rt.x===Ke.x&&rt.y===Ke.y||(this.segments.push(ae.fromRing(Ke,rt,this)),rt.x<this.bbox.ll.x&&(this.bbox.ll.x=rt.x),rt.y<this.bbox.ll.y&&(this.bbox.ll.y=rt.y),rt.x>this.bbox.ur.x&&(this.bbox.ur.x=rt.x),rt.y>this.bbox.ur.y&&(this.bbox.ur.y=rt.y),Ke=rt)}(je.x!==Ke.x||je.y!==Ke.y)&&this.segments.push(ae.fromRing(Ke,je,this))}return i(ot,[{key:"getSweepEvents",value:function(){for(var ve=[],xe=0,je=this.segments.length;xe<je;xe++){var Ke=this.segments[xe];ve.push(Ke.leftSE),ve.push(Ke.rightSE)}return ve}}]),ot}(),Le=function(){function ot(Oe,ve){if(r(this,ot),!Array.isArray(Oe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Te(Oe[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var xe=1,je=Oe.length;xe<je;xe++){var Ke=new Te(Oe[xe],this,!1);Ke.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ke.bbox.ll.x),Ke.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ke.bbox.ll.y),Ke.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ke.bbox.ur.x),Ke.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ke.bbox.ur.y),this.interiorRings.push(Ke)}this.multiPoly=ve}return i(ot,[{key:"getSweepEvents",value:function(){for(var ve=this.exteriorRing.getSweepEvents(),xe=0,je=this.interiorRings.length;xe<je;xe++)for(var Ke=this.interiorRings[xe].getSweepEvents(),qe=0,mt=Ke.length;qe<mt;qe++)ve.push(Ke[qe]);return ve}}]),ot}(),Xe=function(){function ot(Oe,ve){if(r(this,ot),!Array.isArray(Oe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Oe[0][0][0]=="number"&&(Oe=[Oe])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var xe=0,je=Oe.length;xe<je;xe++){var Ke=new Le(Oe[xe],this);Ke.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ke.bbox.ll.x),Ke.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ke.bbox.ll.y),Ke.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ke.bbox.ur.x),Ke.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ke.bbox.ur.y),this.polys.push(Ke)}this.isSubject=ve}return i(ot,[{key:"getSweepEvents",value:function(){for(var ve=[],xe=0,je=this.polys.length;xe<je;xe++)for(var Ke=this.polys[xe].getSweepEvents(),qe=0,mt=Ke.length;qe<mt;qe++)ve.push(Ke[qe]);return ve}}]),ot}(),$e=function(){i(ot,null,[{key:"factory",value:function(ve){for(var xe=[],je=0,Ke=ve.length;je<Ke;je++){var qe=ve[je];if(!(!qe.isInResult()||qe.ringOut)){for(var mt=null,rt=qe.leftSE,Ht=qe.rightSE,lr=[rt],ut=rt.point,kt=[];mt=rt,rt=Ht,lr.push(rt),rt.point!==ut;)for(;;){var $t=rt.getAvailableLinkedEvents();if($t.length===0){var Lr=lr[0].point,Rr=lr[lr.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Lr.x,",")+" ".concat(Lr.y,"]. Last matching segment found ends at")+" [".concat(Rr.x,", ").concat(Rr.y,"]."))}if($t.length===1){Ht=$t[0].otherSE;break}for(var Nt=null,yn=0,_n=kt.length;yn<_n;yn++)if(kt[yn].point===rt.point){Nt=yn;break}if(Nt!==null){var ti=kt.splice(Nt)[0],dn=lr.splice(ti.index);dn.unshift(dn[0].otherSE),xe.push(new ot(dn.reverse()));continue}kt.push({index:lr.length,point:rt.point});var Kr=rt.getLeftmostComparator(mt);Ht=$t.sort(Kr)[0].otherSE;break}xe.push(new ot(lr))}}return xe}}]);function ot(Oe){r(this,ot),this.events=Oe;for(var ve=0,xe=Oe.length;ve<xe;ve++)Oe[ve].segment.ringOut=this;this.poly=null}return i(ot,[{key:"getGeom",value:function(){for(var ve=this.events[0].point,xe=[ve],je=1,Ke=this.events.length-1;je<Ke;je++){var qe=this.events[je].point,mt=this.events[je+1].point;be(qe,ve,mt)!==0&&(xe.push(qe),ve=qe)}if(xe.length===1)return null;var rt=xe[0],Ht=xe[1];be(rt,ve,Ht)===0&&xe.shift(),xe.push(xe[0]);for(var lr=this.isExteriorRing()?1:-1,ut=this.isExteriorRing()?0:xe.length-1,kt=this.isExteriorRing()?xe.length:-1,$t=[],Lr=ut;Lr!=kt;Lr+=lr)$t.push([xe[Lr].x,xe[Lr].y]);return $t}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var ve=this.enclosingRing();this._isExteriorRing=ve?!ve.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var ve=this.events[0],xe=1,je=this.events.length;xe<je;xe++){var Ke=this.events[xe];ie.compare(ve,Ke)>0&&(ve=Ke)}for(var qe=ve.segment.prevInResult(),mt=qe?qe.prevInResult():null;;){if(!qe)return null;if(!mt)return qe.ringOut;if(mt.ringOut!==qe.ringOut)return mt.ringOut.enclosingRing()!==qe.ringOut?qe.ringOut:qe.ringOut.enclosingRing();qe=mt.prevInResult(),mt=qe?qe.prevInResult():null}}}]),ot}(),at=function(){function ot(Oe){r(this,ot),this.exteriorRing=Oe,Oe.poly=this,this.interiorRings=[]}return i(ot,[{key:"addInterior",value:function(ve){this.interiorRings.push(ve),ve.poly=this}},{key:"getGeom",value:function(){var ve=[this.exteriorRing.getGeom()];if(ve[0]===null)return null;for(var xe=0,je=this.interiorRings.length;xe<je;xe++){var Ke=this.interiorRings[xe].getGeom();Ke!==null&&ve.push(Ke)}return ve}}]),ot}(),_t=function(){function ot(Oe){r(this,ot),this.rings=Oe,this.polys=this._composePolys(Oe)}return i(ot,[{key:"getGeom",value:function(){for(var ve=[],xe=0,je=this.polys.length;xe<je;xe++){var Ke=this.polys[xe].getGeom();Ke!==null&&ve.push(Ke)}return ve}},{key:"_composePolys",value:function(ve){for(var xe=[],je=0,Ke=ve.length;je<Ke;je++){var qe=ve[je];if(!qe.poly)if(qe.isExteriorRing())xe.push(new at(qe));else{var mt=qe.enclosingRing();mt.poly||xe.push(new at(mt)),mt.poly.addInterior(qe)}}return xe}}]),ot}(),Lt=function(){function ot(Oe){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ae.compare;r(this,ot),this.queue=Oe,this.tree=new b(ve),this.segments=[]}return i(ot,[{key:"process",value:function(ve){var xe=ve.segment,je=[];if(ve.consumedBy)return ve.isLeft?this.queue.remove(ve.otherSE):this.tree.remove(xe),je;var Ke=ve.isLeft?this.tree.insert(xe):this.tree.find(xe);if(!Ke)throw new Error("Unable to find segment #".concat(xe.id," ")+"[".concat(xe.leftSE.point.x,", ").concat(xe.leftSE.point.y,"] -> ")+"[".concat(xe.rightSE.point.x,", ").concat(xe.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var qe=Ke,mt=Ke,rt=void 0,Ht=void 0;rt===void 0;)qe=this.tree.prev(qe),qe===null?rt=null:qe.key.consumedBy===void 0&&(rt=qe.key);for(;Ht===void 0;)mt=this.tree.next(mt),mt===null?Ht=null:mt.key.consumedBy===void 0&&(Ht=mt.key);if(ve.isLeft){var lr=null;if(rt){var ut=rt.getIntersection(xe);if(ut!==null&&(xe.isAnEndpoint(ut)||(lr=ut),!rt.isAnEndpoint(ut)))for(var kt=this._splitSafely(rt,ut),$t=0,Lr=kt.length;$t<Lr;$t++)je.push(kt[$t])}var Rr=null;if(Ht){var Nt=Ht.getIntersection(xe);if(Nt!==null&&(xe.isAnEndpoint(Nt)||(Rr=Nt),!Ht.isAnEndpoint(Nt)))for(var yn=this._splitSafely(Ht,Nt),_n=0,ti=yn.length;_n<ti;_n++)je.push(yn[_n])}if(lr!==null||Rr!==null){var dn=null;if(lr===null)dn=Rr;else if(Rr===null)dn=lr;else{var Kr=ie.comparePoints(lr,Rr);dn=Kr<=0?lr:Rr}this.queue.remove(xe.rightSE),je.push(xe.rightSE);for(var Xn=xe.split(dn),$r=0,Pt=Xn.length;$r<Pt;$r++)je.push(Xn[$r])}je.length>0?(this.tree.remove(xe),je.push(ve)):(this.segments.push(xe),xe.prev=rt)}else{if(rt&&Ht){var Ei=rt.getIntersection(Ht);if(Ei!==null){if(!rt.isAnEndpoint(Ei))for(var Ne=this._splitSafely(rt,Ei),ce=0,ye=Ne.length;ce<ye;ce++)je.push(Ne[ce]);if(!Ht.isAnEndpoint(Ei))for(var Me=this._splitSafely(Ht,Ei),ze=0,Ge=Me.length;ze<Ge;ze++)je.push(Me[ze])}}this.tree.remove(xe)}return je}},{key:"_splitSafely",value:function(ve,xe){this.tree.remove(ve);var je=ve.rightSE;this.queue.remove(je);var Ke=ve.split(xe);return Ke.push(je),ve.consumedBy===void 0&&this.tree.insert(ve),Ke}}]),ot}(),pt=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ot=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,vt=function(){function ot(){r(this,ot)}return i(ot,[{key:"run",value:function(ve,xe,je){Ze.type=ve,Q.reset();for(var Ke=[new Xe(xe,!0)],qe=0,mt=je.length;qe<mt;qe++)Ke.push(new Xe(je[qe],!1));if(Ze.numMultiPolys=Ke.length,Ze.type==="difference")for(var rt=Ke[0],Ht=1;Ht<Ke.length;)N(Ke[Ht].bbox,rt.bbox)!==null?Ht++:Ke.splice(Ht,1);if(Ze.type==="intersection"){for(var lr=0,ut=Ke.length;lr<ut;lr++)for(var kt=Ke[lr],$t=lr+1,Lr=Ke.length;$t<Lr;$t++)if(N(kt.bbox,Ke[$t].bbox)===null)return[]}for(var Rr=new b(ie.compare),Nt=0,yn=Ke.length;Nt<yn;Nt++)for(var _n=Ke[Nt].getSweepEvents(),ti=0,dn=_n.length;ti<dn;ti++)if(Rr.insert(_n[ti]),Rr.size>pt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Kr=new Lt(Rr),Xn=Rr.size,$r=Rr.pop();$r;){var Pt=$r.key;if(Rr.size===Xn){var Ei=Pt.segment;throw new Error("Unable to pop() ".concat(Pt.isLeft?"left":"right"," SweepEvent ")+"[".concat(Pt.point.x,", ").concat(Pt.point.y,"] from segment #").concat(Ei.id," ")+"[".concat(Ei.leftSE.point.x,", ").concat(Ei.leftSE.point.y,"] -> ")+"[".concat(Ei.rightSE.point.x,", ").concat(Ei.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Rr.size>pt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Kr.segments.length>Ot)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Ne=Kr.process(Pt),ce=0,ye=Ne.length;ce<ye;ce++){var Me=Ne[ce];Me.consumedBy===void 0&&Rr.insert(Me)}Xn=Rr.size,$r=Rr.pop()}Q.reset();var ze=$e.factory(Kr.segments),Ge=new _t(ze);return Ge.getGeom()}}]),ot}(),Ze=new vt,Zt=function(Oe){for(var ve=arguments.length,xe=new Array(ve>1?ve-1:0),je=1;je<ve;je++)xe[je-1]=arguments[je];return Ze.run("union",Oe,xe)},rr=function(Oe){for(var ve=arguments.length,xe=new Array(ve>1?ve-1:0),je=1;je<ve;je++)xe[je-1]=arguments[je];return Ze.run("intersection",Oe,xe)},Gt=function(Oe){for(var ve=arguments.length,xe=new Array(ve>1?ve-1:0),je=1;je<ve;je++)xe[je-1]=arguments[je];return Ze.run("xor",Oe,xe)},br=function(Oe){for(var ve=arguments.length,xe=new Array(ve>1?ve-1:0),je=1;je<ve;je++)xe[je-1]=arguments[je];return Ze.run("difference",Oe,xe)},un={union:Zt,intersection:rr,xor:Gt,difference:br};return un})})(KX);var k_=KX.exports,P0e=k_,Tz=Vt,Mz=Er;function A0e(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var C0e=A0e(P0e);function JX(e,t){var r=Mz.getGeom(e),n=Mz.getGeom(t),i=e.properties||{},o=C0e.default.difference(r.coordinates,n.coordinates);return o.length===0?null:o.length===1?Tz.polygon(o[0],i):Tz.multiPolygon(o,i)}lN.exports=JX;lN.exports.default=JX;var I0e=lN.exports,cN={exports:{}},PM={exports:{}};(function(e,t){(function(r,n){n(t)})(Pe,function(r){function n(){}function i(u){this.message=u||""}function o(u){this.message=u||""}function s(u){this.message=u||""}function a(){}function d(u){return u===null?tt:u.color}function f(u){return u===null?null:u.parent}function g(u,h){u!==null&&(u.color=h)}function _(u){return u===null?null:u.left}function b(u){return u===null?null:u.right}function P(){this.root_=null,this.size_=0}function L(){}function R(){this.array_=[],arguments[0]instanceof Kr&&this.addAll(arguments[0])}function $(){}function F(u){this.message=u||""}function T(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(u){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var h=Object(this),y=Math.max(Math.min(h.length,9007199254740991),0)||0,w=1 in arguments&&parseInt(Number(arguments[1]),10)||0;w=w<0?Math.max(y+w,0):Math.min(w,y);var O=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:y;for(O=O<0?Math.max(y+arguments[2],0):Math.min(O,y);w<O;)h[w]=u,++w;return h},writable:!0}),Number.isFinite=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},Number.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(u){return u!=u},Math.trunc=Math.trunc||function(u){return u<0?Math.ceil(u):Math.floor(u)};var x=function(){};x.prototype.interfaces_=function(){return[]},x.prototype.getClass=function(){return x},x.prototype.equalsWithTolerance=function(u,h,y){return Math.abs(u-h)<=y};var N=function(u){function h(y){u.call(this,y),this.name="IllegalArgumentException",this.message=y,this.stack=new u().stack}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h}(Error),B=function(){},H={MAX_VALUE:{configurable:!0}};B.isNaN=function(u){return Number.isNaN(u)},B.doubleToLongBits=function(u){return u},B.longBitsToDouble=function(u){return u},B.isInfinite=function(u){return!Number.isFinite(u)},H.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(B,H);var Z=function(){},Y=function(){},W=function(){},Q=function u(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=u.NULL_ORDINATE;else if(arguments.length===1){var h=arguments[0];this.x=h.x,this.y=h.y,this.z=h.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=u.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},me={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Q.prototype.setOrdinate=function(u,h){switch(u){case Q.X:this.x=h;break;case Q.Y:this.y=h;break;case Q.Z:this.z=h;break;default:throw new N("Invalid ordinate index: "+u)}},Q.prototype.equals2D=function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var h=arguments[0],y=arguments[1];return!!x.equalsWithTolerance(this.x,h.x,y)&&!!x.equalsWithTolerance(this.y,h.y,y)}},Q.prototype.getOrdinate=function(u){switch(u){case Q.X:return this.x;case Q.Y:return this.y;case Q.Z:return this.z}throw new N("Invalid ordinate index: "+u)},Q.prototype.equals3D=function(u){return this.x===u.x&&this.y===u.y&&(this.z===u.z||B.isNaN(this.z))&&B.isNaN(u.z)},Q.prototype.equals=function(u){return u instanceof Q&&this.equals2D(u)},Q.prototype.equalInZ=function(u,h){return x.equalsWithTolerance(this.z,u.z,h)},Q.prototype.compareTo=function(u){var h=u;return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0},Q.prototype.clone=function(){},Q.prototype.copy=function(){return new Q(this)},Q.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Q.prototype.distance3D=function(u){var h=this.x-u.x,y=this.y-u.y,w=this.z-u.z;return Math.sqrt(h*h+y*y+w*w)},Q.prototype.distance=function(u){var h=this.x-u.x,y=this.y-u.y;return Math.sqrt(h*h+y*y)},Q.prototype.hashCode=function(){var u=17;return u=37*u+Q.hashCode(this.x),u=37*u+Q.hashCode(this.y)},Q.prototype.setCoordinate=function(u){this.x=u.x,this.y=u.y,this.z=u.z},Q.prototype.interfaces_=function(){return[Z,Y,n]},Q.prototype.getClass=function(){return Q},Q.hashCode=function(){if(arguments.length===1){var u=arguments[0],h=B.doubleToLongBits(u);return Math.trunc((h^h)>>>32)}},me.DimensionalComparator.get=function(){return ge},me.serialVersionUID.get=function(){return 6683108902428367e3},me.NULL_ORDINATE.get=function(){return B.NaN},me.X.get=function(){return 0},me.Y.get=function(){return 1},me.Z.get=function(){return 2},Object.defineProperties(Q,me);var ge=function(u){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var h=arguments[0];if(h!==2&&h!==3)throw new N("only 2 or 3 dimensions may be specified");this._dimensionsToTest=h}}};ge.prototype.compare=function(u,h){var y=u,w=h,O=ge.compare(y.x,w.x);if(O!==0)return O;var U=ge.compare(y.y,w.y);return U!==0?U:this._dimensionsToTest<=2?0:ge.compare(y.z,w.z)},ge.prototype.interfaces_=function(){return[W]},ge.prototype.getClass=function(){return ge},ge.compare=function(u,h){return u<h?-1:u>h?1:B.isNaN(u)?B.isNaN(h)?0:-1:B.isNaN(h)?1:0};var be=function(){};be.prototype.create=function(){},be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be};var oe=function(){},Ie={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.toLocationSymbol=function(u){switch(u){case oe.EXTERIOR:return"e";case oe.BOUNDARY:return"b";case oe.INTERIOR:return"i";case oe.NONE:return"-"}throw new N("Unknown location value: "+u)},Ie.INTERIOR.get=function(){return 0},Ie.BOUNDARY.get=function(){return 1},Ie.EXTERIOR.get=function(){return 2},Ie.NONE.get=function(){return-1},Object.defineProperties(oe,Ie);var fe=function(u,h){return u.interfaces_&&u.interfaces_().indexOf(h)>-1},G=function(){},K={LOG_10:{configurable:!0}};G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.log10=function(u){var h=Math.log(u);return B.isInfinite(h)||B.isNaN(h)?h:h/G.LOG_10},G.min=function(u,h,y,w){var O=u;return h<O&&(O=h),y<O&&(O=y),w<O&&(O=w),O},G.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1],y=arguments[2];return u<h?h:u>y?y:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var w=arguments[0],O=arguments[1],U=arguments[2];return w<O?O:w>U?U:w}},G.wrap=function(u,h){return u<0?h- -u%h:u%h},G.max=function(){if(arguments.length===3){var u=arguments[0],h=arguments[1],y=arguments[2],w=u;return h>w&&(w=h),y>w&&(w=y),w}if(arguments.length===4){var O=arguments[0],U=arguments[1],J=arguments[2],pe=arguments[3],Ae=O;return U>Ae&&(Ae=U),J>Ae&&(Ae=J),pe>Ae&&(Ae=pe),Ae}},G.average=function(u,h){return(u+h)/2},K.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(G,K);var re=function(u){this.str=u};re.prototype.append=function(u){this.str+=u},re.prototype.setCharAt=function(u,h){this.str=this.str.substr(0,u)+h+this.str.substr(u+1)},re.prototype.toString=function(u){return this.str};var ie=function(u){this.value=u};ie.prototype.intValue=function(){return this.value},ie.prototype.compareTo=function(u){return this.value<u?-1:this.value>u?1:0},ie.isNaN=function(u){return Number.isNaN(u)};var he=function(){};he.isWhitespace=function(u){return u<=32&&u>=0||u===127},he.toUpperCase=function(u){return u.toUpperCase()};var ae=function u(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var h=arguments[0];this.init(h)}else if(arguments[0]instanceof u){var y=arguments[0];this.init(y)}else if(typeof arguments[0]=="string"){var w=arguments[0];u.call(this,u.parse(w))}}else if(arguments.length===2){var O=arguments[0],U=arguments[1];this.init(O,U)}},Te={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};ae.prototype.le=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<=u._lo},ae.prototype.extractSignificantDigits=function(u,h){var y=this.abs(),w=ae.magnitude(y._hi),O=ae.TEN.pow(w);(y=y.divide(O)).gt(ae.TEN)?(y=y.divide(ae.TEN),w+=1):y.lt(ae.ONE)&&(y=y.multiply(ae.TEN),w-=1);for(var U=w+1,J=new re,pe=ae.MAX_PRINT_DIGITS-1,Ae=0;Ae<=pe;Ae++){u&&Ae===U&&J.append(".");var A=Math.trunc(y._hi);if(A<0)break;var l=!1,v=0;A>9?(l=!0,v="9"):v="0"+A,J.append(v),y=y.subtract(ae.valueOf(A)).multiply(ae.TEN),l&&y.selfAdd(ae.TEN);var S=!0,C=ae.magnitude(y._hi);if(C<0&&Math.abs(C)>=pe-Ae&&(S=!1),!S)break}return h[0]=w,J.toString()},ae.prototype.sqr=function(){return this.multiply(this)},ae.prototype.doubleValue=function(){return this._hi+this._lo},ae.prototype.subtract=function(){if(arguments[0]instanceof ae){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var h=arguments[0];return this.add(-h)}},ae.prototype.equals=function(){if(arguments.length===1){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}},ae.prototype.isZero=function(){return this._hi===0&&this._lo===0},ae.prototype.selfSubtract=function(){if(arguments[0]instanceof ae){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h,0)}},ae.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},ae.prototype.min=function(u){return this.le(u)?this:u},ae.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof ae){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfDivide(h,0)}}else if(arguments.length===2){var y=arguments[0],w=arguments[1],O=null,U=null,J=null,pe=null,Ae=null,A=null,l=null,v=null;return Ae=this._hi/y,A=ae.SPLIT*Ae,O=A-Ae,v=ae.SPLIT*y,O=A-O,U=Ae-O,J=v-y,l=Ae*y,J=v-J,pe=y-J,v=O*J-l+O*pe+U*J+U*pe,A=(this._hi-l-v+this._lo-Ae*w)/y,v=Ae+A,this._hi=v,this._lo=Ae-v+A,this}},ae.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},ae.prototype.divide=function(){if(arguments[0]instanceof ae){var u=arguments[0],h=null,y=null,w=null,O=null,U=null,J=null,pe=null,Ae=null;return y=(U=this._hi/u._hi)-(h=(J=ae.SPLIT*U)-(h=J-U)),Ae=h*(w=(Ae=ae.SPLIT*u._hi)-(w=Ae-u._hi))-(pe=U*u._hi)+h*(O=u._hi-w)+y*w+y*O,J=(this._hi-pe-Ae+this._lo-U*u._lo)/u._hi,new ae(Ae=U+J,U-Ae+J)}if(typeof arguments[0]=="number"){var A=arguments[0];return B.isNaN(A)?ae.createNaN():ae.copy(this).selfDivide(A,0)}},ae.prototype.ge=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>=u._lo},ae.prototype.pow=function(u){if(u===0)return ae.valueOf(1);var h=new ae(this),y=ae.valueOf(1),w=Math.abs(u);if(w>1)for(;w>0;)w%2==1&&y.selfMultiply(h),(w/=2)>0&&(h=h.sqr());else y=h;return u<0?y.reciprocal():y},ae.prototype.ceil=function(){if(this.isNaN())return ae.NaN;var u=Math.ceil(this._hi),h=0;return u===this._hi&&(h=Math.ceil(this._lo)),new ae(u,h)},ae.prototype.compareTo=function(u){var h=u;return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0},ae.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},ae.prototype.setValue=function(){if(arguments[0]instanceof ae){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var h=arguments[0];return this.init(h),this}},ae.prototype.max=function(u){return this.ge(u)?this:u},ae.prototype.sqrt=function(){if(this.isZero())return ae.valueOf(0);if(this.isNegative())return ae.NaN;var u=1/Math.sqrt(this._hi),h=this._hi*u,y=ae.valueOf(h),w=this.subtract(y.sqr())._hi*(.5*u);return y.add(w)},ae.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof ae){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0],y=null,w=null,O=null,U=null,J=null,pe=null;return O=this._hi+h,J=O-this._hi,U=O-J,U=h-J+(this._hi-U),pe=U+this._lo,y=O+pe,w=pe+(O-y),this._hi=y+w,this._lo=w+(y-this._hi),this}}else if(arguments.length===2){var Ae=arguments[0],A=arguments[1],l=null,v=null,S=null,C=null,M=null,z=null,V=null;C=this._hi+Ae,v=this._lo+A,M=C-(z=C-this._hi),S=v-(V=v-this._lo);var X=(l=C+(z=(M=Ae-z+(this._hi-M))+v))+(z=(S=A-V+(this._lo-S))+(z+(C-l))),ee=z+(l-X);return this._hi=X,this._lo=ee,this}},ae.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof ae){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfMultiply(h,0)}}else if(arguments.length===2){var y=arguments[0],w=arguments[1],O=null,U=null,J=null,pe=null,Ae=null,A=null;O=(Ae=ae.SPLIT*this._hi)-this._hi,A=ae.SPLIT*y,O=Ae-O,U=this._hi-O,J=A-y;var l=(Ae=this._hi*y)+(A=O*(J=A-J)-Ae+O*(pe=y-J)+U*J+U*pe+(this._hi*w+this._lo*y)),v=A+(O=Ae-l);return this._hi=l,this._lo=v,this}},ae.prototype.selfSqr=function(){return this.selfMultiply(this)},ae.prototype.floor=function(){if(this.isNaN())return ae.NaN;var u=Math.floor(this._hi),h=0;return u===this._hi&&(h=Math.floor(this._lo)),new ae(u,h)},ae.prototype.negate=function(){return this.isNaN()?this:new ae(-this._hi,-this._lo)},ae.prototype.clone=function(){},ae.prototype.multiply=function(){if(arguments[0]instanceof ae){var u=arguments[0];return u.isNaN()?ae.createNaN():ae.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var h=arguments[0];return B.isNaN(h)?ae.createNaN():ae.copy(this).selfMultiply(h,0)}},ae.prototype.isNaN=function(){return B.isNaN(this._hi)},ae.prototype.intValue=function(){return Math.trunc(this._hi)},ae.prototype.toString=function(){var u=ae.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()},ae.prototype.toStandardNotation=function(){var u=this.getSpecialNumberString();if(u!==null)return u;var h=new Array(1).fill(null),y=this.extractSignificantDigits(!0,h),w=h[0]+1,O=y;if(y.charAt(0)===".")O="0"+y;else if(w<0)O="0."+ae.stringOfChar("0",-w)+y;else if(y.indexOf(".")===-1){var U=w-y.length;O=y+ae.stringOfChar("0",U)+".0"}return this.isNegative()?"-"+O:O},ae.prototype.reciprocal=function(){var u=null,h=null,y=null,w=null,O=null,U=null,J=null,pe=null;h=(O=1/this._hi)-(u=(U=ae.SPLIT*O)-(u=U-O)),y=(pe=ae.SPLIT*this._hi)-this._hi;var Ae=O+(U=(1-(J=O*this._hi)-(pe=u*(y=pe-y)-J+u*(w=this._hi-y)+h*y+h*w)-O*this._lo)/this._hi);return new ae(Ae,O-Ae+U)},ae.prototype.toSciNotation=function(){if(this.isZero())return ae.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var h=new Array(1).fill(null),y=this.extractSignificantDigits(!1,h),w=ae.SCI_NOT_EXPONENT_CHAR+h[0];if(y.charAt(0)==="0")throw new Error("Found leading zero: "+y);var O="";y.length>1&&(O=y.substring(1));var U=y.charAt(0)+"."+O;return this.isNegative()?"-"+U+w:U+w},ae.prototype.abs=function(){return this.isNaN()?ae.NaN:this.isNegative()?this.negate():new ae(this)},ae.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},ae.prototype.lt=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<u._lo},ae.prototype.add=function(){if(arguments[0]instanceof ae){var u=arguments[0];return ae.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var h=arguments[0];return ae.copy(this).selfAdd(h)}},ae.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof ae){var h=arguments[0];this._hi=h._hi,this._lo=h._lo}}else if(arguments.length===2){var y=arguments[0],w=arguments[1];this._hi=y,this._lo=w}},ae.prototype.gt=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>u._lo},ae.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},ae.prototype.trunc=function(){return this.isNaN()?ae.NaN:this.isPositive()?this.floor():this.ceil()},ae.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},ae.prototype.interfaces_=function(){return[n,Z,Y]},ae.prototype.getClass=function(){return ae},ae.sqr=function(u){return ae.valueOf(u).selfMultiply(u)},ae.valueOf=function(){if(typeof arguments[0]=="string"){var u=arguments[0];return ae.parse(u)}if(typeof arguments[0]=="number"){var h=arguments[0];return new ae(h)}},ae.sqrt=function(u){return ae.valueOf(u).sqrt()},ae.parse=function(u){for(var h=0,y=u.length;he.isWhitespace(u.charAt(h));)h++;var w=!1;if(h<y){var O=u.charAt(h);O!=="-"&&O!=="+"||(h++,O==="-"&&(w=!0))}for(var U=new ae,J=0,pe=0,Ae=0;!(h>=y);){var A=u.charAt(h);if(h++,he.isDigit(A)){var l=A-"0";U.selfMultiply(ae.TEN),U.selfAdd(l),J++}else{if(A!=="."){if(A==="e"||A==="E"){var v=u.substring(h);try{Ae=ie.parseInt(v)}catch(V){throw V instanceof Error?new Error("Invalid exponent "+v+" in string "+u):V}break}throw new Error("Unexpected character '"+A+"' at position "+h+" in string "+u)}pe=J}}var S=U,C=J-pe-Ae;if(C===0)S=U;else if(C>0){var M=ae.TEN.pow(C);S=U.divide(M)}else if(C<0){var z=ae.TEN.pow(-C);S=U.multiply(z)}return w?S.negate():S},ae.createNaN=function(){return new ae(B.NaN,B.NaN)},ae.copy=function(u){return new ae(u)},ae.magnitude=function(u){var h=Math.abs(u),y=Math.log(h)/Math.log(10),w=Math.trunc(Math.floor(y));return 10*Math.pow(10,w)<=h&&(w+=1),w},ae.stringOfChar=function(u,h){for(var y=new re,w=0;w<h;w++)y.append(u);return y.toString()},Te.PI.get=function(){return new ae(3.141592653589793,12246467991473532e-32)},Te.TWO_PI.get=function(){return new ae(6.283185307179586,24492935982947064e-32)},Te.PI_2.get=function(){return new ae(1.5707963267948966,6123233995736766e-32)},Te.E.get=function(){return new ae(2.718281828459045,14456468917292502e-32)},Te.NaN.get=function(){return new ae(B.NaN,B.NaN)},Te.EPS.get=function(){return 123259516440783e-46},Te.SPLIT.get=function(){return 134217729},Te.MAX_PRINT_DIGITS.get=function(){return 32},Te.TEN.get=function(){return ae.valueOf(10)},Te.ONE.get=function(){return ae.valueOf(1)},Te.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Te.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(ae,Te);var Le=function(){},Xe={DP_SAFE_EPSILON:{configurable:!0}};Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.orientationIndex=function(u,h,y){var w=Le.orientationIndexFilter(u,h,y);if(w<=1)return w;var O=ae.valueOf(h.x).selfAdd(-u.x),U=ae.valueOf(h.y).selfAdd(-u.y),J=ae.valueOf(y.x).selfAdd(-h.x),pe=ae.valueOf(y.y).selfAdd(-h.y);return O.selfMultiply(pe).selfSubtract(U.selfMultiply(J)).signum()},Le.signOfDet2x2=function(u,h,y,w){return u.multiply(w).selfSubtract(h.multiply(y)).signum()},Le.intersection=function(u,h,y,w){var O=ae.valueOf(w.y).selfSubtract(y.y).selfMultiply(ae.valueOf(h.x).selfSubtract(u.x)),U=ae.valueOf(w.x).selfSubtract(y.x).selfMultiply(ae.valueOf(h.y).selfSubtract(u.y)),J=O.subtract(U),pe=ae.valueOf(w.x).selfSubtract(y.x).selfMultiply(ae.valueOf(u.y).selfSubtract(y.y)),Ae=ae.valueOf(w.y).selfSubtract(y.y).selfMultiply(ae.valueOf(u.x).selfSubtract(y.x)),A=pe.subtract(Ae).selfDivide(J).doubleValue(),l=ae.valueOf(u.x).selfAdd(ae.valueOf(h.x).selfSubtract(u.x).selfMultiply(A)).doubleValue(),v=ae.valueOf(h.x).selfSubtract(u.x).selfMultiply(ae.valueOf(u.y).selfSubtract(y.y)),S=ae.valueOf(h.y).selfSubtract(u.y).selfMultiply(ae.valueOf(u.x).selfSubtract(y.x)),C=v.subtract(S).selfDivide(J).doubleValue(),M=ae.valueOf(y.y).selfAdd(ae.valueOf(w.y).selfSubtract(y.y).selfMultiply(C)).doubleValue();return new Q(l,M)},Le.orientationIndexFilter=function(u,h,y){var w=null,O=(u.x-y.x)*(h.y-y.y),U=(u.y-y.y)*(h.x-y.x),J=O-U;if(O>0){if(U<=0)return Le.signum(J);w=O+U}else{if(!(O<0)||U>=0)return Le.signum(J);w=-O-U}var pe=Le.DP_SAFE_EPSILON*w;return J>=pe||-J>=pe?Le.signum(J):2},Le.signum=function(u){return u>0?1:u<0?-1:0},Xe.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Le,Xe);var $e=function(){},at={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};at.X.get=function(){return 0},at.Y.get=function(){return 1},at.Z.get=function(){return 2},at.M.get=function(){return 3},$e.prototype.setOrdinate=function(u,h,y){},$e.prototype.size=function(){},$e.prototype.getOrdinate=function(u,h){},$e.prototype.getCoordinate=function(){},$e.prototype.getCoordinateCopy=function(u){},$e.prototype.getDimension=function(){},$e.prototype.getX=function(u){},$e.prototype.clone=function(){},$e.prototype.expandEnvelope=function(u){},$e.prototype.copy=function(){},$e.prototype.getY=function(u){},$e.prototype.toCoordinateArray=function(){},$e.prototype.interfaces_=function(){return[Y]},$e.prototype.getClass=function(){return $e},Object.defineProperties($e,at);var _t=function(){},Lt=function(u){function h(){u.call(this,"Projective point not representable on the Cartesian plane.")}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(_t),pt=function(){};pt.arraycopy=function(u,h,y,w,O){for(var U=0,J=h;J<h+O;J++)y[w+U]=u[J],U++},pt.getProperty=function(u){return{"line.separator":`
`}[u]};var Ot=function u(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var h=arguments[0];this.x=h.x,this.y=h.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],w=arguments[1];this.x=y,this.y=w,this.w=1}else if(arguments[0]instanceof u&&arguments[1]instanceof u){var O=arguments[0],U=arguments[1];this.x=O.y*U.w-U.y*O.w,this.y=U.x*O.w-O.x*U.w,this.w=O.x*U.y-U.x*O.y}else if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var J=arguments[0],pe=arguments[1];this.x=J.y-pe.y,this.y=pe.x-J.x,this.w=J.x*pe.y-pe.x*J.y}}else if(arguments.length===3){var Ae=arguments[0],A=arguments[1],l=arguments[2];this.x=Ae,this.y=A,this.w=l}else if(arguments.length===4){var v=arguments[0],S=arguments[1],C=arguments[2],M=arguments[3],z=v.y-S.y,V=S.x-v.x,X=v.x*S.y-S.x*v.y,ee=C.y-M.y,se=M.x-C.x,le=C.x*M.y-M.x*C.y;this.x=V*le-se*X,this.y=ee*X-z*le,this.w=z*se-ee*V}};Ot.prototype.getY=function(){var u=this.y/this.w;if(B.isNaN(u)||B.isInfinite(u))throw new Lt;return u},Ot.prototype.getX=function(){var u=this.x/this.w;if(B.isNaN(u)||B.isInfinite(u))throw new Lt;return u},Ot.prototype.getCoordinate=function(){var u=new Q;return u.x=this.getX(),u.y=this.getY(),u},Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},Ot.intersection=function(u,h,y,w){var O=u.y-h.y,U=h.x-u.x,J=u.x*h.y-h.x*u.y,pe=y.y-w.y,Ae=w.x-y.x,A=y.x*w.y-w.x*y.y,l=O*Ae-pe*U,v=(U*A-Ae*J)/l,S=(pe*J-O*A)/l;if(B.isNaN(v)||B.isInfinite(v)||B.isNaN(S)||B.isInfinite(S))throw new Lt;return new Q(v,S)};var vt=function u(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Q){var h=arguments[0];this.init(h.x,h.x,h.y,h.y)}else if(arguments[0]instanceof u){var y=arguments[0];this.init(y)}}else if(arguments.length===2){var w=arguments[0],O=arguments[1];this.init(w.x,O.x,w.y,O.y)}else if(arguments.length===4){var U=arguments[0],J=arguments[1],pe=arguments[2],Ae=arguments[3];this.init(U,J,pe,Ae)}},Ze={serialVersionUID:{configurable:!0}};vt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},vt.prototype.equals=function(u){if(!(u instanceof vt))return!1;var h=u;return this.isNull()?h.isNull():this._maxx===h.getMaxX()&&this._maxy===h.getMaxY()&&this._minx===h.getMinX()&&this._miny===h.getMinY()},vt.prototype.intersection=function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new vt;var h=this._minx>u._minx?this._minx:u._minx,y=this._miny>u._miny?this._miny:u._miny,w=this._maxx<u._maxx?this._maxx:u._maxx,O=this._maxy<u._maxy?this._maxy:u._maxy;return new vt(h,w,y,O)},vt.prototype.isNull=function(){return this._maxx<this._minx},vt.prototype.getMaxX=function(){return this._maxx},vt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Q){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof vt){var h=arguments[0];return!this.isNull()&&!h.isNull()&&h.getMinX()>=this._minx&&h.getMaxX()<=this._maxx&&h.getMinY()>=this._miny&&h.getMaxY()<=this._maxy}}else if(arguments.length===2){var y=arguments[0],w=arguments[1];return!this.isNull()&&y>=this._minx&&y<=this._maxx&&w>=this._miny&&w<=this._maxy}},vt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof vt){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof Q){var h=arguments[0];return this.intersects(h.x,h.y)}}else if(arguments.length===2){var y=arguments[0],w=arguments[1];return!this.isNull()&&!(y>this._maxx||y<this._minx||w>this._maxy||w<this._miny)}},vt.prototype.getMinY=function(){return this._miny},vt.prototype.getMinX=function(){return this._minx},vt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Q){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof vt){var h=arguments[0];if(h.isNull())return null;this.isNull()?(this._minx=h.getMinX(),this._maxx=h.getMaxX(),this._miny=h.getMinY(),this._maxy=h.getMaxY()):(h._minx<this._minx&&(this._minx=h._minx),h._maxx>this._maxx&&(this._maxx=h._maxx),h._miny<this._miny&&(this._miny=h._miny),h._maxy>this._maxy&&(this._maxy=h._maxy))}}else if(arguments.length===2){var y=arguments[0],w=arguments[1];this.isNull()?(this._minx=y,this._maxx=y,this._miny=w,this._maxy=w):(y<this._minx&&(this._minx=y),y>this._maxx&&(this._maxx=y),w<this._miny&&(this._miny=w),w>this._maxy&&(this._maxy=w))}},vt.prototype.minExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return u<h?u:h},vt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},vt.prototype.compareTo=function(u){var h=u;return this.isNull()?h.isNull()?0:-1:h.isNull()?1:this._minx<h._minx?-1:this._minx>h._minx?1:this._miny<h._miny?-1:this._miny>h._miny?1:this._maxx<h._maxx?-1:this._maxx>h._maxx?1:this._maxy<h._maxy?-1:this._maxy>h._maxy?1:0},vt.prototype.translate=function(u,h){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+h,this.getMaxY()+h)},vt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},vt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},vt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},vt.prototype.maxExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return u>h?u:h},vt.prototype.expandBy=function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var h=arguments[0],y=arguments[1];if(this.isNull())return null;this._minx-=h,this._maxx+=h,this._miny-=y,this._maxy+=y,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},vt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof vt){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof Q){var h=arguments[0];return this.covers(h)}}else if(arguments.length===2){var y=arguments[0],w=arguments[1];return this.covers(y,w)}},vt.prototype.centre=function(){return this.isNull()?null:new Q((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},vt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Q){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof vt){var h=arguments[0];this._minx=h._minx,this._maxx=h._maxx,this._miny=h._miny,this._maxy=h._maxy}}else if(arguments.length===2){var y=arguments[0],w=arguments[1];this.init(y.x,w.x,y.y,w.y)}else if(arguments.length===4){var O=arguments[0],U=arguments[1],J=arguments[2],pe=arguments[3];O<U?(this._minx=O,this._maxx=U):(this._minx=U,this._maxx=O),J<pe?(this._miny=J,this._maxy=pe):(this._miny=pe,this._maxy=J)}},vt.prototype.getMaxY=function(){return this._maxy},vt.prototype.distance=function(u){if(this.intersects(u))return 0;var h=0;this._maxx<u._minx?h=u._minx-this._maxx:this._minx>u._maxx&&(h=this._minx-u._maxx);var y=0;return this._maxy<u._miny?y=u._miny-this._maxy:this._miny>u._maxy&&(y=this._miny-u._maxy),h===0?y:y===0?h:Math.sqrt(h*h+y*y)},vt.prototype.hashCode=function(){var u=17;return u=37*u+Q.hashCode(this._minx),u=37*u+Q.hashCode(this._maxx),u=37*u+Q.hashCode(this._miny),u=37*u+Q.hashCode(this._maxy)},vt.prototype.interfaces_=function(){return[Z,n]},vt.prototype.getClass=function(){return vt},vt.intersects=function(){if(arguments.length===3){var u=arguments[0],h=arguments[1],y=arguments[2];return y.x>=(u.x<h.x?u.x:h.x)&&y.x<=(u.x>h.x?u.x:h.x)&&y.y>=(u.y<h.y?u.y:h.y)&&y.y<=(u.y>h.y?u.y:h.y)}if(arguments.length===4){var w=arguments[0],O=arguments[1],U=arguments[2],J=arguments[3],pe=Math.min(U.x,J.x),Ae=Math.max(U.x,J.x),A=Math.min(w.x,O.x),l=Math.max(w.x,O.x);return!(A>Ae)&&!(l<pe)&&(pe=Math.min(U.y,J.y),Ae=Math.max(U.y,J.y),A=Math.min(w.y,O.y),l=Math.max(w.y,O.y),!(A>Ae)&&!(l<pe))}},Ze.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(vt,Ze);var Zt={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},rr=function(u){this.geometryFactory=u||new zr};rr.prototype.read=function(u){var h,y,w;u=u.replace(/[\n\r]/g," ");var O=Zt.typeStr.exec(u);if(u.search("EMPTY")!==-1&&((O=Zt.emptyTypeStr.exec(u))[2]=void 0),O&&(y=O[1].toLowerCase(),w=O[2],br[y]&&(h=br[y].apply(this,[w]))),h===void 0)throw new Error("Could not parse WKT "+u);return h},rr.prototype.write=function(u){return this.extractGeometry(u)},rr.prototype.extractGeometry=function(u){var h=u.getGeometryType().toLowerCase();if(!Gt[h])return null;var y=h.toUpperCase();return u.isEmpty()?y+" EMPTY":y+"("+Gt[h].apply(this,[u])+")"};var Gt={coordinate:function(u){return u.x+" "+u.y},point:function(u){return Gt.coordinate.call(this,u._coordinates._coordinates[0])},multipoint:function(u){for(var h=[],y=0,w=u._geometries.length;y<w;++y)h.push("("+Gt.point.apply(this,[u._geometries[y]])+")");return h.join(",")},linestring:function(u){for(var h=[],y=0,w=u._points._coordinates.length;y<w;++y)h.push(Gt.coordinate.apply(this,[u._points._coordinates[y]]));return h.join(",")},linearring:function(u){for(var h=[],y=0,w=u._points._coordinates.length;y<w;++y)h.push(Gt.coordinate.apply(this,[u._points._coordinates[y]]));return h.join(",")},multilinestring:function(u){for(var h=[],y=0,w=u._geometries.length;y<w;++y)h.push("("+Gt.linestring.apply(this,[u._geometries[y]])+")");return h.join(",")},polygon:function(u){var h=[];h.push("("+Gt.linestring.apply(this,[u._shell])+")");for(var y=0,w=u._holes.length;y<w;++y)h.push("("+Gt.linestring.apply(this,[u._holes[y]])+")");return h.join(",")},multipolygon:function(u){for(var h=[],y=0,w=u._geometries.length;y<w;++y)h.push("("+Gt.polygon.apply(this,[u._geometries[y]])+")");return h.join(",")},geometrycollection:function(u){for(var h=[],y=0,w=u._geometries.length;y<w;++y)h.push(this.extractGeometry(u._geometries[y]));return h.join(",")}},br={point:function(u){if(u===void 0)return this.geometryFactory.createPoint();var h=u.trim().split(Zt.spaces);return this.geometryFactory.createPoint(new Q(Number.parseFloat(h[0]),Number.parseFloat(h[1])))},multipoint:function(u){if(u===void 0)return this.geometryFactory.createMultiPoint();for(var h,y=u.trim().split(","),w=[],O=0,U=y.length;O<U;++O)h=y[O].replace(Zt.trimParens,"$1"),w.push(br.point.apply(this,[h]));return this.geometryFactory.createMultiPoint(w)},linestring:function(u){if(u===void 0)return this.geometryFactory.createLineString();for(var h,y=u.trim().split(","),w=[],O=0,U=y.length;O<U;++O)h=y[O].trim().split(Zt.spaces),w.push(new Q(Number.parseFloat(h[0]),Number.parseFloat(h[1])));return this.geometryFactory.createLineString(w)},linearring:function(u){if(u===void 0)return this.geometryFactory.createLinearRing();for(var h,y=u.trim().split(","),w=[],O=0,U=y.length;O<U;++O)h=y[O].trim().split(Zt.spaces),w.push(new Q(Number.parseFloat(h[0]),Number.parseFloat(h[1])));return this.geometryFactory.createLinearRing(w)},multilinestring:function(u){if(u===void 0)return this.geometryFactory.createMultiLineString();for(var h,y=u.trim().split(Zt.parenComma),w=[],O=0,U=y.length;O<U;++O)h=y[O].replace(Zt.trimParens,"$1"),w.push(br.linestring.apply(this,[h]));return this.geometryFactory.createMultiLineString(w)},polygon:function(u){if(u===void 0)return this.geometryFactory.createPolygon();for(var h,y,w,O,U=u.trim().split(Zt.parenComma),J=[],pe=0,Ae=U.length;pe<Ae;++pe)h=U[pe].replace(Zt.trimParens,"$1"),y=br.linestring.apply(this,[h]),w=this.geometryFactory.createLinearRing(y._points),pe===0?O=w:J.push(w);return this.geometryFactory.createPolygon(O,J)},multipolygon:function(u){if(u===void 0)return this.geometryFactory.createMultiPolygon();for(var h,y=u.trim().split(Zt.doubleParenComma),w=[],O=0,U=y.length;O<U;++O)h=y[O].replace(Zt.trimParens,"$1"),w.push(br.polygon.apply(this,[h]));return this.geometryFactory.createMultiPolygon(w)},geometrycollection:function(u){if(u===void 0)return this.geometryFactory.createGeometryCollection();for(var h=(u=u.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),y=[],w=0,O=h.length;w<O;++w)y.push(this.read(h[w]));return this.geometryFactory.createGeometryCollection(y)}},un=function(u){this.parser=new rr(u)};un.prototype.write=function(u){return this.parser.write(u)},un.toLineString=function(u,h){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+u.x+" "+u.y+", "+h.x+" "+h.y+" )"};var ot=function(u){function h(y){u.call(this,y),this.name="RuntimeException",this.message=y,this.stack=new u().stack}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h}(Error),Oe=function(u){function h(){if(u.call(this),arguments.length===0)u.call(this);else if(arguments.length===1){var y=arguments[0];u.call(this,y)}}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(ot),ve=function(){};ve.prototype.interfaces_=function(){return[]},ve.prototype.getClass=function(){return ve},ve.shouldNeverReachHere=function(){if(arguments.length===0)ve.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new Oe("Should never reach here"+(u!==null?": "+u:""))}},ve.isTrue=function(){var u,h;if(arguments.length===1)u=arguments[0],ve.isTrue(u,null);else if(arguments.length===2&&(u=arguments[0],h=arguments[1],!u))throw h===null?new Oe:new Oe(h)},ve.equals=function(){var u,h,y;if(arguments.length===2)u=arguments[0],h=arguments[1],ve.equals(u,h,null);else if(arguments.length===3&&(u=arguments[0],h=arguments[1],y=arguments[2],!h.equals(u)))throw new Oe("Expected "+u+" but encountered "+h+(y!==null?": "+y:""))};var xe=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Q,this._intPt[1]=new Q,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},je={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};xe.prototype.getIndexAlongSegment=function(u,h){return this.computeIntLineIndex(),this._intLineIndex[u][h]},xe.prototype.getTopologySummary=function(){var u=new re;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()},xe.prototype.computeIntersection=function(u,h,y,w){this._inputLines[0][0]=u,this._inputLines[0][1]=h,this._inputLines[1][0]=y,this._inputLines[1][1]=w,this._result=this.computeIntersect(u,h,y,w)},xe.prototype.getIntersectionNum=function(){return this._result},xe.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}},xe.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},xe.prototype.setPrecisionModel=function(u){this._precisionModel=u},xe.prototype.isInteriorIntersection=function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],h=0;h<this._result;h++)if(!this._intPt[h].equals2D(this._inputLines[u][0])&&!this._intPt[h].equals2D(this._inputLines[u][1]))return!0;return!1}},xe.prototype.getIntersection=function(u){return this._intPt[u]},xe.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},xe.prototype.hasIntersection=function(){return this._result!==xe.NO_INTERSECTION},xe.prototype.getEdgeDistance=function(u,h){return xe.computeEdgeDistance(this._intPt[h],this._inputLines[u][0],this._inputLines[u][1])},xe.prototype.isCollinear=function(){return this._result===xe.COLLINEAR_INTERSECTION},xe.prototype.toString=function(){return un.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+un.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},xe.prototype.getEndpoint=function(u,h){return this._inputLines[u][h]},xe.prototype.isIntersection=function(u){for(var h=0;h<this._result;h++)if(this._intPt[h].equals2D(u))return!0;return!1},xe.prototype.getIntersectionAlongSegment=function(u,h){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][h]]},xe.prototype.interfaces_=function(){return[]},xe.prototype.getClass=function(){return xe},xe.computeEdgeDistance=function(u,h,y){var w=Math.abs(y.x-h.x),O=Math.abs(y.y-h.y),U=-1;if(u.equals(h))U=0;else if(u.equals(y))U=w>O?w:O;else{var J=Math.abs(u.x-h.x),pe=Math.abs(u.y-h.y);(U=w>O?J:pe)!==0||u.equals(h)||(U=Math.max(J,pe))}return ve.isTrue(!(U===0&&!u.equals(h)),"Bad distance calculation"),U},xe.nonRobustComputeEdgeDistance=function(u,h,y){var w=u.x-h.x,O=u.y-h.y,U=Math.sqrt(w*w+O*O);return ve.isTrue(!(U===0&&!u.equals(h)),"Invalid distance calculation"),U},je.DONT_INTERSECT.get=function(){return 0},je.DO_INTERSECT.get=function(){return 1},je.COLLINEAR.get=function(){return 2},je.NO_INTERSECTION.get=function(){return 0},je.POINT_INTERSECTION.get=function(){return 1},je.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(xe,je);var Ke=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.isInSegmentEnvelopes=function(y){var w=new vt(this._inputLines[0][0],this._inputLines[0][1]),O=new vt(this._inputLines[1][0],this._inputLines[1][1]);return w.contains(y)&&O.contains(y)},h.prototype.computeIntersection=function(){if(arguments.length!==3)return u.prototype.computeIntersection.apply(this,arguments);var y=arguments[0],w=arguments[1],O=arguments[2];if(this._isProper=!1,vt.intersects(w,O,y)&&rt.orientationIndex(w,O,y)===0&&rt.orientationIndex(O,w,y)===0)return this._isProper=!0,(y.equals(w)||y.equals(O))&&(this._isProper=!1),this._result=u.POINT_INTERSECTION,null;this._result=u.NO_INTERSECTION},h.prototype.normalizeToMinimum=function(y,w,O,U,J){J.x=this.smallestInAbsValue(y.x,w.x,O.x,U.x),J.y=this.smallestInAbsValue(y.y,w.y,O.y,U.y),y.x-=J.x,y.y-=J.y,w.x-=J.x,w.y-=J.y,O.x-=J.x,O.y-=J.y,U.x-=J.x,U.y-=J.y},h.prototype.safeHCoordinateIntersection=function(y,w,O,U){var J=null;try{J=Ot.intersection(y,w,O,U)}catch(pe){if(!(pe instanceof Lt))throw pe;J=h.nearestEndpoint(y,w,O,U)}return J},h.prototype.intersection=function(y,w,O,U){var J=this.intersectionWithNormalization(y,w,O,U);return this.isInSegmentEnvelopes(J)||(J=new Q(h.nearestEndpoint(y,w,O,U))),this._precisionModel!==null&&this._precisionModel.makePrecise(J),J},h.prototype.smallestInAbsValue=function(y,w,O,U){var J=y,pe=Math.abs(J);return Math.abs(w)<pe&&(J=w,pe=Math.abs(w)),Math.abs(O)<pe&&(J=O,pe=Math.abs(O)),Math.abs(U)<pe&&(J=U),J},h.prototype.checkDD=function(y,w,O,U,J){var pe=Le.intersection(y,w,O,U),Ae=this.isInSegmentEnvelopes(pe);pt.out.println("DD in env = "+Ae+"  --------------------- "+pe),J.distance(pe)>1e-4&&pt.out.println("Distance = "+J.distance(pe))},h.prototype.intersectionWithNormalization=function(y,w,O,U){var J=new Q(y),pe=new Q(w),Ae=new Q(O),A=new Q(U),l=new Q;this.normalizeToEnvCentre(J,pe,Ae,A,l);var v=this.safeHCoordinateIntersection(J,pe,Ae,A);return v.x+=l.x,v.y+=l.y,v},h.prototype.computeCollinearIntersection=function(y,w,O,U){var J=vt.intersects(y,w,O),pe=vt.intersects(y,w,U),Ae=vt.intersects(O,U,y),A=vt.intersects(O,U,w);return J&&pe?(this._intPt[0]=O,this._intPt[1]=U,u.COLLINEAR_INTERSECTION):Ae&&A?(this._intPt[0]=y,this._intPt[1]=w,u.COLLINEAR_INTERSECTION):J&&Ae?(this._intPt[0]=O,this._intPt[1]=y,!O.equals(y)||pe||A?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):J&&A?(this._intPt[0]=O,this._intPt[1]=w,!O.equals(w)||pe||Ae?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):pe&&Ae?(this._intPt[0]=U,this._intPt[1]=y,!U.equals(y)||J||A?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):pe&&A?(this._intPt[0]=U,this._intPt[1]=w,!U.equals(w)||J||Ae?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):u.NO_INTERSECTION},h.prototype.normalizeToEnvCentre=function(y,w,O,U,J){var pe=y.x<w.x?y.x:w.x,Ae=y.y<w.y?y.y:w.y,A=y.x>w.x?y.x:w.x,l=y.y>w.y?y.y:w.y,v=O.x<U.x?O.x:U.x,S=O.y<U.y?O.y:U.y,C=O.x>U.x?O.x:U.x,M=O.y>U.y?O.y:U.y,z=((pe>v?pe:v)+(A<C?A:C))/2,V=((Ae>S?Ae:S)+(l<M?l:M))/2;J.x=z,J.y=V,y.x-=J.x,y.y-=J.y,w.x-=J.x,w.y-=J.y,O.x-=J.x,O.y-=J.y,U.x-=J.x,U.y-=J.y},h.prototype.computeIntersect=function(y,w,O,U){if(this._isProper=!1,!vt.intersects(y,w,O,U))return u.NO_INTERSECTION;var J=rt.orientationIndex(y,w,O),pe=rt.orientationIndex(y,w,U);if(J>0&&pe>0||J<0&&pe<0)return u.NO_INTERSECTION;var Ae=rt.orientationIndex(O,U,y),A=rt.orientationIndex(O,U,w);return Ae>0&&A>0||Ae<0&&A<0?u.NO_INTERSECTION:J===0&&pe===0&&Ae===0&&A===0?this.computeCollinearIntersection(y,w,O,U):(J===0||pe===0||Ae===0||A===0?(this._isProper=!1,y.equals2D(O)||y.equals2D(U)?this._intPt[0]=y:w.equals2D(O)||w.equals2D(U)?this._intPt[0]=w:J===0?this._intPt[0]=new Q(O):pe===0?this._intPt[0]=new Q(U):Ae===0?this._intPt[0]=new Q(y):A===0&&(this._intPt[0]=new Q(w))):(this._isProper=!0,this._intPt[0]=this.intersection(y,w,O,U)),u.POINT_INTERSECTION)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.nearestEndpoint=function(y,w,O,U){var J=y,pe=rt.distancePointLine(y,O,U),Ae=rt.distancePointLine(w,O,U);return Ae<pe&&(pe=Ae,J=w),(Ae=rt.distancePointLine(O,y,w))<pe&&(pe=Ae,J=O),(Ae=rt.distancePointLine(U,y,w))<pe&&(pe=Ae,J=U),J},h}(xe),qe=function(){};qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.orientationIndex=function(u,h,y){var w=h.x-u.x,O=h.y-u.y,U=y.x-h.x,J=y.y-h.y;return qe.signOfDet2x2(w,O,U,J)},qe.signOfDet2x2=function(u,h,y,w){var O=null,U=null,J=null;if(O=1,u===0||w===0)return h===0||y===0?0:h>0?y>0?-O:O:y>0?O:-O;if(h===0||y===0)return w>0?u>0?O:-O:u>0?-O:O;if(h>0?w>0?h<=w||(O=-O,U=u,u=y,y=U,U=h,h=w,w=U):h<=-w?(O=-O,y=-y,w=-w):(U=u,u=-y,y=U,U=h,h=-w,w=U):w>0?-h<=w?(O=-O,u=-u,h=-h):(U=-u,u=y,y=U,U=-h,h=w,w=U):h>=w?(u=-u,h=-h,y=-y,w=-w):(O=-O,U=-u,u=-y,y=U,U=-h,h=-w,w=U),u>0){if(!(y>0)||!(u<=y))return O}else{if(y>0||!(u>=y))return-O;O=-O,u=-u,y=-y}for(;;){if(J=Math.floor(y/u),y-=J*u,(w-=J*h)<0)return-O;if(w>h)return O;if(u>y+y){if(h<w+w)return O}else{if(h>w+w)return-O;y=u-y,w=h-w,O=-O}if(w===0)return y===0?0:-O;if(y===0||(J=Math.floor(u/y),u-=J*y,(h-=J*w)<0))return O;if(h>w)return-O;if(y>u+u){if(w<h+h)return-O}else{if(w>h+h)return O;u=y-u,h=w-h,O=-O}if(h===0)return u===0?0:O;if(u===0)return-O}};var mt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u};mt.prototype.countSegment=function(u,h){if(u.x<this._p.x&&h.x<this._p.x)return null;if(this._p.x===h.x&&this._p.y===h.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&h.y===this._p.y){var y=u.x,w=h.x;return y>w&&(y=h.x,w=u.x),this._p.x>=y&&this._p.x<=w&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&h.y<=this._p.y||h.y>this._p.y&&u.y<=this._p.y){var O=u.x-this._p.x,U=u.y-this._p.y,J=h.x-this._p.x,pe=h.y-this._p.y,Ae=qe.signOfDet2x2(O,U,J,pe);if(Ae===0)return this._isPointOnSegment=!0,null;pe<U&&(Ae=-Ae),Ae>0&&this._crossingCount++}},mt.prototype.isPointInPolygon=function(){return this.getLocation()!==oe.EXTERIOR},mt.prototype.getLocation=function(){return this._isPointOnSegment?oe.BOUNDARY:this._crossingCount%2==1?oe.INTERIOR:oe.EXTERIOR},mt.prototype.isOnSegment=function(){return this._isPointOnSegment},mt.prototype.interfaces_=function(){return[]},mt.prototype.getClass=function(){return mt},mt.locatePointInRing=function(){if(arguments[0]instanceof Q&&fe(arguments[1],$e)){for(var u=arguments[0],h=arguments[1],y=new mt(u),w=new Q,O=new Q,U=1;U<h.size();U++)if(h.getCoordinate(U,w),h.getCoordinate(U-1,O),y.countSegment(w,O),y.isOnSegment())return y.getLocation();return y.getLocation()}if(arguments[0]instanceof Q&&arguments[1]instanceof Array){for(var J=arguments[0],pe=arguments[1],Ae=new mt(J),A=1;A<pe.length;A++){var l=pe[A],v=pe[A-1];if(Ae.countSegment(l,v),Ae.isOnSegment())return Ae.getLocation()}return Ae.getLocation()}};var rt=function(){},Ht={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};rt.prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt.orientationIndex=function(u,h,y){return Le.orientationIndex(u,h,y)},rt.signedArea=function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var h=0,y=u[0].x,w=1;w<u.length-1;w++){var O=u[w].x-y,U=u[w+1].y;h+=O*(u[w-1].y-U)}return h/2}if(fe(arguments[0],$e)){var J=arguments[0],pe=J.size();if(pe<3)return 0;var Ae=new Q,A=new Q,l=new Q;J.getCoordinate(0,A),J.getCoordinate(1,l);var v=A.x;l.x-=v;for(var S=0,C=1;C<pe-1;C++)Ae.y=A.y,A.x=l.x,A.y=l.y,J.getCoordinate(C+1,l),l.x-=v,S+=A.x*(Ae.y-l.y);return S/2}},rt.distanceLineLine=function(u,h,y,w){if(u.equals(h))return rt.distancePointLine(u,y,w);if(y.equals(w))return rt.distancePointLine(w,u,h);var O=!1;if(vt.intersects(u,h,y,w)){var U=(h.x-u.x)*(w.y-y.y)-(h.y-u.y)*(w.x-y.x);if(U===0)O=!0;else{var J=(u.y-y.y)*(w.x-y.x)-(u.x-y.x)*(w.y-y.y),pe=((u.y-y.y)*(h.x-u.x)-(u.x-y.x)*(h.y-u.y))/U,Ae=J/U;(Ae<0||Ae>1||pe<0||pe>1)&&(O=!0)}}else O=!0;return O?G.min(rt.distancePointLine(u,y,w),rt.distancePointLine(h,y,w),rt.distancePointLine(y,u,h),rt.distancePointLine(w,u,h)):0},rt.isPointInRing=function(u,h){return rt.locatePointInRing(u,h)!==oe.EXTERIOR},rt.computeLength=function(u){var h=u.size();if(h<=1)return 0;var y=0,w=new Q;u.getCoordinate(0,w);for(var O=w.x,U=w.y,J=1;J<h;J++){u.getCoordinate(J,w);var pe=w.x,Ae=w.y,A=pe-O,l=Ae-U;y+=Math.sqrt(A*A+l*l),O=pe,U=Ae}return y},rt.isCCW=function(u){var h=u.length-1;if(h<3)throw new N("Ring has fewer than 4 points, so orientation cannot be determined");for(var y=u[0],w=0,O=1;O<=h;O++){var U=u[O];U.y>y.y&&(y=U,w=O)}var J=w;do(J-=1)<0&&(J=h);while(u[J].equals2D(y)&&J!==w);var pe=w;do pe=(pe+1)%h;while(u[pe].equals2D(y)&&pe!==w);var Ae=u[J],A=u[pe];if(Ae.equals2D(y)||A.equals2D(y)||Ae.equals2D(A))return!1;var l=rt.computeOrientation(Ae,y,A),v=!1;return v=l===0?Ae.x>A.x:l>0,v},rt.locatePointInRing=function(u,h){return mt.locatePointInRing(u,h)},rt.distancePointLinePerpendicular=function(u,h,y){var w=(y.x-h.x)*(y.x-h.x)+(y.y-h.y)*(y.y-h.y),O=((h.y-u.y)*(y.x-h.x)-(h.x-u.x)*(y.y-h.y))/w;return Math.abs(O)*Math.sqrt(w)},rt.computeOrientation=function(u,h,y){return rt.orientationIndex(u,h,y)},rt.distancePointLine=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];if(h.length===0)throw new N("Line array must contain at least one vertex");for(var y=u.distance(h[0]),w=0;w<h.length-1;w++){var O=rt.distancePointLine(u,h[w],h[w+1]);O<y&&(y=O)}return y}if(arguments.length===3){var U=arguments[0],J=arguments[1],pe=arguments[2];if(J.x===pe.x&&J.y===pe.y)return U.distance(J);var Ae=(pe.x-J.x)*(pe.x-J.x)+(pe.y-J.y)*(pe.y-J.y),A=((U.x-J.x)*(pe.x-J.x)+(U.y-J.y)*(pe.y-J.y))/Ae;if(A<=0)return U.distance(J);if(A>=1)return U.distance(pe);var l=((J.y-U.y)*(pe.x-J.x)-(J.x-U.x)*(pe.y-J.y))/Ae;return Math.abs(l)*Math.sqrt(Ae)}},rt.isOnLine=function(u,h){for(var y=new Ke,w=1;w<h.length;w++){var O=h[w-1],U=h[w];if(y.computeIntersection(u,O,U),y.hasIntersection())return!0}return!1},Ht.CLOCKWISE.get=function(){return-1},Ht.RIGHT.get=function(){return rt.CLOCKWISE},Ht.COUNTERCLOCKWISE.get=function(){return 1},Ht.LEFT.get=function(){return rt.COUNTERCLOCKWISE},Ht.COLLINEAR.get=function(){return 0},Ht.STRAIGHT.get=function(){return rt.COLLINEAR},Object.defineProperties(rt,Ht);var lr=function(){};lr.prototype.filter=function(u){},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var ut=function(){var u=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=u,this._SRID=u.getSRID()},kt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ut.prototype.isGeometryCollection=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION},ut.prototype.getFactory=function(){return this._factory},ut.prototype.getGeometryN=function(u){return this},ut.prototype.getArea=function(){return 0},ut.prototype.isRectangle=function(){return!1},ut.prototype.equals=function(){if(arguments[0]instanceof ut){var u=arguments[0];return u!==null&&this.equalsTopo(u)}if(arguments[0]instanceof Object){var h=arguments[0];if(!(h instanceof ut))return!1;var y=h;return this.equalsExact(y)}},ut.prototype.equalsExact=function(u){return this===u||this.equalsExact(u,0)},ut.prototype.geometryChanged=function(){this.apply(ut.geometryChangedFilter)},ut.prototype.geometryChangedAction=function(){this._envelope=null},ut.prototype.equalsNorm=function(u){return u!==null&&this.norm().equalsExact(u.norm())},ut.prototype.getLength=function(){return 0},ut.prototype.getNumGeometries=function(){return 1},ut.prototype.compareTo=function(){if(arguments.length===1){var u=arguments[0],h=u;return this.getSortIndex()!==h.getSortIndex()?this.getSortIndex()-h.getSortIndex():this.isEmpty()&&h.isEmpty()?0:this.isEmpty()?-1:h.isEmpty()?1:this.compareToSameClass(u)}if(arguments.length===2){var y=arguments[0],w=arguments[1];return this.getSortIndex()!==y.getSortIndex()?this.getSortIndex()-y.getSortIndex():this.isEmpty()&&y.isEmpty()?0:this.isEmpty()?-1:y.isEmpty()?1:this.compareToSameClass(y,w)}},ut.prototype.getUserData=function(){return this._userData},ut.prototype.getSRID=function(){return this._SRID},ut.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ut.prototype.checkNotGeometryCollection=function(u){if(u.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION)throw new N("This method does not support GeometryCollection arguments")},ut.prototype.equal=function(u,h,y){return y===0?u.equals(h):u.distance(h)<=y},ut.prototype.norm=function(){var u=this.copy();return u.normalize(),u},ut.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ut.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new vt(this._envelope)},ut.prototype.setSRID=function(u){this._SRID=u},ut.prototype.setUserData=function(u){this._userData=u},ut.prototype.compare=function(u,h){for(var y=u.iterator(),w=h.iterator();y.hasNext()&&w.hasNext();){var O=y.next(),U=w.next(),J=O.compareTo(U);if(J!==0)return J}return y.hasNext()?1:w.hasNext()?-1:0},ut.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ut.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ut.SORTINDEX_MULTIPOINT||this.getSortIndex()===ut.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ut.SORTINDEX_MULTIPOLYGON},ut.prototype.interfaces_=function(){return[Y,Z,n]},ut.prototype.getClass=function(){return ut},ut.hasNonEmptyElements=function(u){for(var h=0;h<u.length;h++)if(!u[h].isEmpty())return!0;return!1},ut.hasNullElements=function(u){for(var h=0;h<u.length;h++)if(u[h]===null)return!0;return!1},kt.serialVersionUID.get=function(){return 8763622679187377e3},kt.SORTINDEX_POINT.get=function(){return 0},kt.SORTINDEX_MULTIPOINT.get=function(){return 1},kt.SORTINDEX_LINESTRING.get=function(){return 2},kt.SORTINDEX_LINEARRING.get=function(){return 3},kt.SORTINDEX_MULTILINESTRING.get=function(){return 4},kt.SORTINDEX_POLYGON.get=function(){return 5},kt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},kt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},kt.geometryChangedFilter.get=function(){return $t},Object.defineProperties(ut,kt);var $t=function(){};$t.interfaces_=function(){return[lr]},$t.filter=function(u){u.geometryChangedAction()};var Lr=function(){};Lr.prototype.filter=function(u){},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr};var Rr=function(){},Nt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Rr.prototype.isInBoundary=function(u){},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Nt.Mod2BoundaryNodeRule.get=function(){return yn},Nt.EndPointBoundaryNodeRule.get=function(){return _n},Nt.MultiValentEndPointBoundaryNodeRule.get=function(){return ti},Nt.MonoValentEndPointBoundaryNodeRule.get=function(){return dn},Nt.MOD2_BOUNDARY_RULE.get=function(){return new yn},Nt.ENDPOINT_BOUNDARY_RULE.get=function(){return new _n},Nt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ti},Nt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new dn},Nt.OGC_SFS_BOUNDARY_RULE.get=function(){return Rr.MOD2_BOUNDARY_RULE},Object.defineProperties(Rr,Nt);var yn=function(){};yn.prototype.isInBoundary=function(u){return u%2==1},yn.prototype.interfaces_=function(){return[Rr]},yn.prototype.getClass=function(){return yn};var _n=function(){};_n.prototype.isInBoundary=function(u){return u>0},_n.prototype.interfaces_=function(){return[Rr]},_n.prototype.getClass=function(){return _n};var ti=function(){};ti.prototype.isInBoundary=function(u){return u>1},ti.prototype.interfaces_=function(){return[Rr]},ti.prototype.getClass=function(){return ti};var dn=function(){};dn.prototype.isInBoundary=function(u){return u===1},dn.prototype.interfaces_=function(){return[Rr]},dn.prototype.getClass=function(){return dn};var Kr=function(){};Kr.prototype.add=function(){},Kr.prototype.addAll=function(){},Kr.prototype.isEmpty=function(){},Kr.prototype.iterator=function(){},Kr.prototype.size=function(){},Kr.prototype.toArray=function(){},Kr.prototype.remove=function(){},(i.prototype=new Error).name="IndexOutOfBoundsException";var Xn=function(){};Xn.prototype.hasNext=function(){},Xn.prototype.next=function(){},Xn.prototype.remove=function(){};var $r=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.get=function(){},h.prototype.set=function(){},h.prototype.isEmpty=function(){},h}(Kr);(o.prototype=new Error).name="NoSuchElementException";var Pt=function(u){function h(){u.call(this),this.array_=[],arguments[0]instanceof Kr&&this.addAll(arguments[0])}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.ensureCapacity=function(){},h.prototype.interfaces_=function(){return[u,Kr]},h.prototype.add=function(y){return arguments.length===1?this.array_.push(y):this.array_.splice(arguments[0],arguments[1]),!0},h.prototype.clear=function(){this.array_=[]},h.prototype.addAll=function(y){for(var w=y.iterator();w.hasNext();)this.add(w.next());return!0},h.prototype.set=function(y,w){var O=this.array_[y];return this.array_[y]=w,O},h.prototype.iterator=function(){return new Ei(this)},h.prototype.get=function(y){if(y<0||y>=this.size())throw new i;return this.array_[y]},h.prototype.isEmpty=function(){return this.array_.length===0},h.prototype.size=function(){return this.array_.length},h.prototype.toArray=function(){for(var y=[],w=0,O=this.array_.length;w<O;w++)y.push(this.array_[w]);return y},h.prototype.remove=function(y){for(var w=!1,O=0,U=this.array_.length;O<U;O++)if(this.array_[O]===y){this.array_.splice(O,1),w=!0;break}return w},h}($r),Ei=function(u){function h(y){u.call(this),this.arrayList_=y,this.position_=0}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new o;return this.arrayList_.get(this.position_++)},h.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},h.prototype.set=function(y){return this.arrayList_.set(this.position_-1,y)},h.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},h}(Xn),Ne=function(u){function h(){if(u.call(this),arguments.length!==0){if(arguments.length===1){var w=arguments[0];this.ensureCapacity(w.length),this.add(w,!0)}else if(arguments.length===2){var O=arguments[0],U=arguments[1];this.ensureCapacity(O.length),this.add(O,U)}}}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={coordArrayType:{configurable:!0}};return y.coordArrayType.get=function(){return new Array(0).fill(null)},h.prototype.getCoordinate=function(w){return this.get(w)},h.prototype.addAll=function(){if(arguments.length===2){for(var w=arguments[0],O=arguments[1],U=!1,J=w.iterator();J.hasNext();)this.add(J.next(),O),U=!0;return U}return u.prototype.addAll.apply(this,arguments)},h.prototype.clone=function(){for(var w=u.prototype.clone.call(this),O=0;O<this.size();O++)w.add(O,this.get(O).copy());return w},h.prototype.toCoordinateArray=function(){return this.toArray(h.coordArrayType)},h.prototype.add=function(){if(arguments.length===1){var w=arguments[0];u.prototype.add.call(this,w)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var O=arguments[0],U=arguments[1];return this.add(O,U,!0),!0}if(arguments[0]instanceof Q&&typeof arguments[1]=="boolean"){var J=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(J))return null;u.prototype.add.call(this,J)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var pe=arguments[0],Ae=arguments[1];return this.add(pe,Ae),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var A=arguments[0],l=arguments[1];if(arguments[2])for(var v=0;v<A.length;v++)this.add(A[v],l);else for(var S=A.length-1;S>=0;S--)this.add(A[S],l);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Q){var C=arguments[0],M=arguments[1];if(!arguments[2]){var z=this.size();if(z>0&&(C>0&&this.get(C-1).equals2D(M)||C<z&&this.get(C).equals2D(M)))return null}u.prototype.add.call(this,C,M)}}else if(arguments.length===4){var V=arguments[0],X=arguments[1],ee=arguments[2],se=arguments[3],le=1;ee>se&&(le=-1);for(var we=ee;we!==se;we+=le)this.add(V[we],X);return!0}},h.prototype.closeRing=function(){this.size()>0&&this.add(new Q(this.get(0)),!1)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},Object.defineProperties(h,y),h}(Pt),ce=function(){},ye={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ye.ForwardComparator.get=function(){return Me},ye.BidirectionalComparator.get=function(){return ze},ye.coordArrayType.get=function(){return new Array(0).fill(null)},ce.prototype.interfaces_=function(){return[]},ce.prototype.getClass=function(){return ce},ce.isRing=function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])},ce.ptNotInList=function(u,h){for(var y=0;y<u.length;y++){var w=u[y];if(ce.indexOf(w,h)<0)return w}return null},ce.scroll=function(u,h){var y=ce.indexOf(h,u);if(y<0)return null;var w=new Array(u.length).fill(null);pt.arraycopy(u,y,w,0,u.length-y),pt.arraycopy(u,0,w,u.length-y,y),pt.arraycopy(w,0,u,0,u.length)},ce.equals=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];if(u===h)return!0;if(u===null||h===null||u.length!==h.length)return!1;for(var y=0;y<u.length;y++)if(!u[y].equals(h[y]))return!1;return!0}if(arguments.length===3){var w=arguments[0],O=arguments[1],U=arguments[2];if(w===O)return!0;if(w===null||O===null||w.length!==O.length)return!1;for(var J=0;J<w.length;J++)if(U.compare(w[J],O[J])!==0)return!1;return!0}},ce.intersection=function(u,h){for(var y=new Ne,w=0;w<u.length;w++)h.intersects(u[w])&&y.add(u[w],!0);return y.toCoordinateArray()},ce.hasRepeatedPoints=function(u){for(var h=1;h<u.length;h++)if(u[h-1].equals(u[h]))return!0;return!1},ce.removeRepeatedPoints=function(u){return ce.hasRepeatedPoints(u)?new Ne(u,!1).toCoordinateArray():u},ce.reverse=function(u){for(var h=u.length-1,y=Math.trunc(h/2),w=0;w<=y;w++){var O=u[w];u[w]=u[h-w],u[h-w]=O}},ce.removeNull=function(u){for(var h=0,y=0;y<u.length;y++)u[y]!==null&&h++;var w=new Array(h).fill(null);if(h===0)return w;for(var O=0,U=0;U<u.length;U++)u[U]!==null&&(w[O++]=u[U]);return w},ce.copyDeep=function(){if(arguments.length===1){for(var u=arguments[0],h=new Array(u.length).fill(null),y=0;y<u.length;y++)h[y]=new Q(u[y]);return h}if(arguments.length===5)for(var w=arguments[0],O=arguments[1],U=arguments[2],J=arguments[3],pe=arguments[4],Ae=0;Ae<pe;Ae++)U[J+Ae]=new Q(w[O+Ae])},ce.isEqualReversed=function(u,h){for(var y=0;y<u.length;y++){var w=u[y],O=h[u.length-y-1];if(w.compareTo(O)!==0)return!1}return!0},ce.envelope=function(u){for(var h=new vt,y=0;y<u.length;y++)h.expandToInclude(u[y]);return h},ce.toCoordinateArray=function(u){return u.toArray(ce.coordArrayType)},ce.atLeastNCoordinatesOrNothing=function(u,h){return h.length>=u?h:[]},ce.indexOf=function(u,h){for(var y=0;y<h.length;y++)if(u.equals(h[y]))return y;return-1},ce.increasingDirection=function(u){for(var h=0;h<Math.trunc(u.length/2);h++){var y=u.length-1-h,w=u[h].compareTo(u[y]);if(w!==0)return w}return 1},ce.compare=function(u,h){for(var y=0;y<u.length&&y<h.length;){var w=u[y].compareTo(h[y]);if(w!==0)return w;y++}return y<h.length?-1:y<u.length?1:0},ce.minCoordinate=function(u){for(var h=null,y=0;y<u.length;y++)(h===null||h.compareTo(u[y])>0)&&(h=u[y]);return h},ce.extract=function(u,h,y){h=G.clamp(h,0,u.length);var w=(y=G.clamp(y,-1,u.length))-h+1;y<0&&(w=0),h>=u.length&&(w=0),y<h&&(w=0);var O=new Array(w).fill(null);if(w===0)return O;for(var U=0,J=h;J<=y;J++)O[U++]=u[J];return O},Object.defineProperties(ce,ye);var Me=function(){};Me.prototype.compare=function(u,h){return ce.compare(u,h)},Me.prototype.interfaces_=function(){return[W]},Me.prototype.getClass=function(){return Me};var ze=function(){};ze.prototype.compare=function(u,h){var y=u,w=h;if(y.length<w.length)return-1;if(y.length>w.length)return 1;if(y.length===0)return 0;var O=ce.compare(y,w);return ce.isEqualReversed(y,w)?0:O},ze.prototype.OLDcompare=function(u,h){var y=u,w=h;if(y.length<w.length)return-1;if(y.length>w.length)return 1;if(y.length===0)return 0;for(var O=ce.increasingDirection(y),U=ce.increasingDirection(w),J=O>0?0:y.length-1,pe=U>0?0:y.length-1,Ae=0;Ae<y.length;Ae++){var A=y[J].compareTo(w[pe]);if(A!==0)return A;J+=O,pe+=U}return 0},ze.prototype.interfaces_=function(){return[W]},ze.prototype.getClass=function(){return ze};var Ge=function(){};Ge.prototype.get=function(){},Ge.prototype.put=function(){},Ge.prototype.size=function(){},Ge.prototype.values=function(){},Ge.prototype.entrySet=function(){};var nt=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h}(Ge);(s.prototype=new Error).name="OperationNotSupported",(a.prototype=new Kr).contains=function(){};var He=function(u){function h(){u.call(this),this.array_=[],arguments[0]instanceof Kr&&this.addAll(arguments[0])}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.contains=function(y){for(var w=0,O=this.array_.length;w<O;w++)if(this.array_[w]===y)return!0;return!1},h.prototype.add=function(y){return!this.contains(y)&&(this.array_.push(y),!0)},h.prototype.addAll=function(y){for(var w=y.iterator();w.hasNext();)this.add(w.next());return!0},h.prototype.remove=function(y){throw new Error},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return this.array_.length===0},h.prototype.toArray=function(){for(var y=[],w=0,O=this.array_.length;w<O;w++)y.push(this.array_[w]);return y},h.prototype.iterator=function(){return new Ye(this)},h}(a),Ye=function(u){function h(y){u.call(this),this.hashSet_=y,this.position_=0}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new o;return this.hashSet_.array_[this.position_++]},h.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},h.prototype.remove=function(){throw new s},h}(Xn),tt=0;(P.prototype=new nt).get=function(u){for(var h=this.root_;h!==null;){var y=u.compareTo(h.key);if(y<0)h=h.left;else{if(!(y>0))return h.value;h=h.right}}return null},P.prototype.put=function(u,h){if(this.root_===null)return this.root_={key:u,value:h,left:null,right:null,parent:null,color:tt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var y,w,O=this.root_;do if(y=O,(w=u.compareTo(O.key))<0)O=O.left;else{if(!(w>0)){var U=O.value;return O.value=h,U}O=O.right}while(O!==null);var J={key:u,left:null,right:null,value:h,parent:y,color:tt,getValue:function(){return this.value},getKey:function(){return this.key}};return w<0?y.left=J:y.right=J,this.fixAfterInsertion(J),this.size_++,null},P.prototype.fixAfterInsertion=function(u){for(u.color=1;u!=null&&u!==this.root_&&u.parent.color===1;)if(f(u)===_(f(f(u)))){var h=b(f(f(u)));d(h)===1?(g(f(u),tt),g(h,tt),g(f(f(u)),1),u=f(f(u))):(u===b(f(u))&&(u=f(u),this.rotateLeft(u)),g(f(u),tt),g(f(f(u)),1),this.rotateRight(f(f(u))))}else{var y=_(f(f(u)));d(y)===1?(g(f(u),tt),g(y,tt),g(f(f(u)),1),u=f(f(u))):(u===_(f(u))&&(u=f(u),this.rotateRight(u)),g(f(u),tt),g(f(f(u)),1),this.rotateLeft(f(f(u))))}this.root_.color=tt},P.prototype.values=function(){var u=new Pt,h=this.getFirstEntry();if(h!==null)for(u.add(h.value);(h=P.successor(h))!==null;)u.add(h.value);return u},P.prototype.entrySet=function(){var u=new He,h=this.getFirstEntry();if(h!==null)for(u.add(h);(h=P.successor(h))!==null;)u.add(h);return u},P.prototype.rotateLeft=function(u){if(u!=null){var h=u.right;u.right=h.left,h.left!=null&&(h.left.parent=u),h.parent=u.parent,u.parent===null?this.root_=h:u.parent.left===u?u.parent.left=h:u.parent.right=h,h.left=u,u.parent=h}},P.prototype.rotateRight=function(u){if(u!=null){var h=u.left;u.left=h.right,h.right!=null&&(h.right.parent=u),h.parent=u.parent,u.parent===null?this.root_=h:u.parent.right===u?u.parent.right=h:u.parent.left=h,h.right=u,u.parent=h}},P.prototype.getFirstEntry=function(){var u=this.root_;if(u!=null)for(;u.left!=null;)u=u.left;return u},P.successor=function(u){if(u===null)return null;if(u.right!==null){for(var h=u.right;h.left!==null;)h=h.left;return h}for(var y=u.parent,w=u;y!==null&&w===y.right;)w=y,y=y.parent;return y},P.prototype.size=function(){return this.size_};var yt=function(){};yt.prototype.interfaces_=function(){return[]},yt.prototype.getClass=function(){return yt},L.prototype=new a,(R.prototype=new L).contains=function(u){for(var h=0,y=this.array_.length;h<y;h++)if(this.array_[h].compareTo(u)===0)return!0;return!1},R.prototype.add=function(u){if(this.contains(u))return!1;for(var h=0,y=this.array_.length;h<y;h++)if(this.array_[h].compareTo(u)===1)return this.array_.splice(h,0,u),!0;return this.array_.push(u),!0},R.prototype.addAll=function(u){for(var h=u.iterator();h.hasNext();)this.add(h.next());return!0},R.prototype.remove=function(u){throw new s},R.prototype.size=function(){return this.array_.length},R.prototype.isEmpty=function(){return this.array_.length===0},R.prototype.toArray=function(){for(var u=[],h=0,y=this.array_.length;h<y;h++)u.push(this.array_[h]);return u},R.prototype.iterator=function(){return new bt(this)};var bt=function(u){this.treeSet_=u,this.position_=0};bt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new o;return this.treeSet_.array_[this.position_++]},bt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},bt.prototype.remove=function(){throw new s};var gt=function(){};gt.sort=function(){var u,h,y,w,O=arguments[0];if(arguments.length===1)w=function(J,pe){return J.compareTo(pe)},O.sort(w);else if(arguments.length===2)y=arguments[1],w=function(J,pe){return y.compare(J,pe)},O.sort(w);else if(arguments.length===3){(h=O.slice(arguments[1],arguments[2])).sort();var U=O.slice(0,arguments[1]).concat(h,O.slice(arguments[2],O.length));for(O.splice(0,O.length),u=0;u<U.length;u++)O.push(U[u])}else if(arguments.length===4)for(h=O.slice(arguments[1],arguments[2]),y=arguments[3],w=function(J,pe){return y.compare(J,pe)},h.sort(w),U=O.slice(0,arguments[1]).concat(h,O.slice(arguments[2],O.length)),O.splice(0,O.length),u=0;u<U.length;u++)O.push(U[u])},gt.asList=function(u){for(var h=new Pt,y=0,w=u.length;y<w;y++)h.add(u[y]);return h};var Rt=function(){},dr={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};dr.P.get=function(){return 0},dr.L.get=function(){return 1},dr.A.get=function(){return 2},dr.FALSE.get=function(){return-1},dr.TRUE.get=function(){return-2},dr.DONTCARE.get=function(){return-3},dr.SYM_FALSE.get=function(){return"F"},dr.SYM_TRUE.get=function(){return"T"},dr.SYM_DONTCARE.get=function(){return"*"},dr.SYM_P.get=function(){return"0"},dr.SYM_L.get=function(){return"1"},dr.SYM_A.get=function(){return"2"},Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt},Rt.toDimensionSymbol=function(u){switch(u){case Rt.FALSE:return Rt.SYM_FALSE;case Rt.TRUE:return Rt.SYM_TRUE;case Rt.DONTCARE:return Rt.SYM_DONTCARE;case Rt.P:return Rt.SYM_P;case Rt.L:return Rt.SYM_L;case Rt.A:return Rt.SYM_A}throw new N("Unknown dimension value: "+u)},Rt.toDimensionValue=function(u){switch(he.toUpperCase(u)){case Rt.SYM_FALSE:return Rt.FALSE;case Rt.SYM_TRUE:return Rt.TRUE;case Rt.SYM_DONTCARE:return Rt.DONTCARE;case Rt.SYM_P:return Rt.P;case Rt.SYM_L:return Rt.L;case Rt.SYM_A:return Rt.A}throw new N("Unknown dimension symbol: "+u)},Object.defineProperties(Rt,dr);var qt=function(){};qt.prototype.filter=function(u){},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt};var Kt=function(){};Kt.prototype.filter=function(u,h){},Kt.prototype.isDone=function(){},Kt.prototype.isGeometryChanged=function(){},Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var er=function(u){function h(w,O){if(u.call(this,O),this._geometries=w||[],u.hasNullElements(this._geometries))throw new N("geometries must not contain null elements")}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){for(var w=new vt,O=0;O<this._geometries.length;O++)w.expandToInclude(this._geometries[O].getEnvelopeInternal());return w},h.prototype.getGeometryN=function(w){return this._geometries[w]},h.prototype.getSortIndex=function(){return u.SORTINDEX_GEOMETRYCOLLECTION},h.prototype.getCoordinates=function(){for(var w=new Array(this.getNumPoints()).fill(null),O=-1,U=0;U<this._geometries.length;U++)for(var J=this._geometries[U].getCoordinates(),pe=0;pe<J.length;pe++)w[++O]=J[pe];return w},h.prototype.getArea=function(){for(var w=0,O=0;O<this._geometries.length;O++)w+=this._geometries[O].getArea();return w},h.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];if(!this.isEquivalentClass(w))return!1;var U=w;if(this._geometries.length!==U._geometries.length)return!1;for(var J=0;J<this._geometries.length;J++)if(!this._geometries[J].equalsExact(U._geometries[J],O))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){for(var w=0;w<this._geometries.length;w++)this._geometries[w].normalize();gt.sort(this._geometries)},h.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},h.prototype.getBoundaryDimension=function(){for(var w=Rt.FALSE,O=0;O<this._geometries.length;O++)w=Math.max(w,this._geometries[O].getBoundaryDimension());return w},h.prototype.getDimension=function(){for(var w=Rt.FALSE,O=0;O<this._geometries.length;O++)w=Math.max(w,this._geometries[O].getDimension());return w},h.prototype.getLength=function(){for(var w=0,O=0;O<this._geometries.length;O++)w+=this._geometries[O].getLength();return w},h.prototype.getNumPoints=function(){for(var w=0,O=0;O<this._geometries.length;O++)w+=this._geometries[O].getNumPoints();return w},h.prototype.getNumGeometries=function(){return this._geometries.length},h.prototype.reverse=function(){for(var w=this._geometries.length,O=new Array(w).fill(null),U=0;U<this._geometries.length;U++)O[U]=this._geometries[U].reverse();return this.getFactory().createGeometryCollection(O)},h.prototype.compareToSameClass=function(){if(arguments.length===1){var w=arguments[0],O=new R(gt.asList(this._geometries)),U=new R(gt.asList(w._geometries));return this.compare(O,U)}if(arguments.length===2){for(var J=arguments[0],pe=arguments[1],Ae=J,A=this.getNumGeometries(),l=Ae.getNumGeometries(),v=0;v<A&&v<l;){var S=this.getGeometryN(v),C=Ae.getGeometryN(v),M=S.compareToSameClass(C,pe);if(M!==0)return M;v++}return v<A?1:v<l?-1:0}},h.prototype.apply=function(){if(fe(arguments[0],Lr))for(var w=arguments[0],O=0;O<this._geometries.length;O++)this._geometries[O].apply(w);else if(fe(arguments[0],Kt)){var U=arguments[0];if(this._geometries.length===0)return null;for(var J=0;J<this._geometries.length&&(this._geometries[J].apply(U),!U.isDone());J++);U.isGeometryChanged()&&this.geometryChanged()}else if(fe(arguments[0],qt)){var pe=arguments[0];pe.filter(this);for(var Ae=0;Ae<this._geometries.length;Ae++)this._geometries[Ae].apply(pe)}else if(fe(arguments[0],lr)){var A=arguments[0];A.filter(this);for(var l=0;l<this._geometries.length;l++)this._geometries[l].apply(A)}},h.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ve.shouldNeverReachHere(),null},h.prototype.clone=function(){var w=u.prototype.clone.call(this);w._geometries=new Array(this._geometries.length).fill(null);for(var O=0;O<this._geometries.length;O++)w._geometries[O]=this._geometries[O].clone();return w},h.prototype.getGeometryType=function(){return"GeometryCollection"},h.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),O=0;O<w.length;O++)w[O]=this._geometries[O].copy();return new h(w,this._factory)},h.prototype.isEmpty=function(){for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isEmpty())return!1;return!0},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},y.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(h,y),h}(ut),Yr=function(u){function h(){u.apply(this,arguments)}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTILINESTRING},h.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];return!!this.isEquivalentClass(w)&&u.prototype.equalsExact.call(this,w,O)}return u.prototype.equalsExact.apply(this,arguments)},h.prototype.getBoundaryDimension=function(){return this.isClosed()?Rt.FALSE:0},h.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isClosed())return!1;return!0},h.prototype.getDimension=function(){return 1},h.prototype.reverse=function(){for(var w=this._geometries.length,O=new Array(w).fill(null),U=0;U<this._geometries.length;U++)O[w-1-U]=this._geometries[U].reverse();return this.getFactory().createMultiLineString(O)},h.prototype.getBoundary=function(){return new Hr(this).getBoundary()},h.prototype.getGeometryType=function(){return"MultiLineString"},h.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),O=0;O<w.length;O++)w[O]=this._geometries[O].copy();return new h(w,this._factory)},h.prototype.interfaces_=function(){return[yt]},h.prototype.getClass=function(){return h},y.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(h,y),h}(er),Hr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var u=arguments[0],h=Rr.MOD2_BOUNDARY_RULE;this._geom=u,this._geomFact=u.getFactory(),this._bnRule=h}else if(arguments.length===2){var y=arguments[0],w=arguments[1];this._geom=y,this._geomFact=y.getFactory(),this._bnRule=w}};Hr.prototype.boundaryMultiLineString=function(u){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var h=this.computeBoundaryCoordinates(u);return h.length===1?this._geomFact.createPoint(h[0]):this._geomFact.createMultiPointFromCoords(h)},Hr.prototype.getBoundary=function(){return this._geom instanceof Vr?this.boundaryLineString(this._geom):this._geom instanceof Yr?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Hr.prototype.boundaryLineString=function(u){return this._geom.isEmpty()?this.getEmptyMultiPoint():u.isClosed()?this._bnRule.isInBoundary(2)?u.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([u.getStartPoint(),u.getEndPoint()])},Hr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Hr.prototype.computeBoundaryCoordinates=function(u){var h=new Pt;this._endpointMap=new P;for(var y=0;y<u.getNumGeometries();y++){var w=u.getGeometryN(y);w.getNumPoints()!==0&&(this.addEndpoint(w.getCoordinateN(0)),this.addEndpoint(w.getCoordinateN(w.getNumPoints()-1)))}for(var O=this._endpointMap.entrySet().iterator();O.hasNext();){var U=O.next(),J=U.getValue().count;this._bnRule.isInBoundary(J)&&h.add(U.getKey())}return ce.toCoordinateArray(h)},Hr.prototype.addEndpoint=function(u){var h=this._endpointMap.get(u);h===null&&(h=new Wr,this._endpointMap.put(u,h)),h.count++},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.getBoundary=function(){if(arguments.length===1){var u=arguments[0];return new Hr(u).getBoundary()}if(arguments.length===2){var h=arguments[0],y=arguments[1];return new Hr(h,y).getBoundary()}};var Wr=function(){this.count=null};Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Dr=function(){},go={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.chars=function(u,h){for(var y=new Array(h).fill(null),w=0;w<h;w++)y[w]=u;return String(y)},Dr.getStackTrace=function(){if(arguments.length===1){var u=arguments[0],h=new function(){},y=new function(){};return u.printStackTrace(y),h.toString()}if(arguments.length===2){for(var w=arguments[0],O=arguments[1],U="",J=new function(){}(new function(){}(Dr.getStackTrace(w))),pe=0;pe<O;pe++)try{U+=J.readLine()+Dr.NEWLINE}catch(Ae){if(!(Ae instanceof $))throw Ae;ve.shouldNeverReachHere()}return U}},Dr.split=function(u,h){for(var y=h.length,w=new Pt,O=""+u,U=O.indexOf(h);U>=0;){var J=O.substring(0,U);w.add(J),U=(O=O.substring(U+y)).indexOf(h)}O.length>0&&w.add(O);for(var pe=new Array(w.size()).fill(null),Ae=0;Ae<pe.length;Ae++)pe[Ae]=w.get(Ae);return pe},Dr.toString=function(){if(arguments.length===1){var u=arguments[0];return Dr.SIMPLE_ORDINATE_FORMAT.format(u)}},Dr.spaces=function(u){return Dr.chars(" ",u)},go.NEWLINE.get=function(){return pt.getProperty("line.separator")},go.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}},Object.defineProperties(Dr,go);var Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(u,h,y,w){for(var O=Math.min(u.getDimension(),y.getDimension()),U=0;U<O;U++)y.setOrdinate(w,U,u.getOrdinate(h,U))},Wt.isRing=function(u){var h=u.size();return h===0||!(h<=3)&&u.getOrdinate(0,$e.X)===u.getOrdinate(h-1,$e.X)&&u.getOrdinate(0,$e.Y)===u.getOrdinate(h-1,$e.Y)},Wt.isEqual=function(u,h){var y=u.size();if(y!==h.size())return!1;for(var w=Math.min(u.getDimension(),h.getDimension()),O=0;O<y;O++)for(var U=0;U<w;U++){var J=u.getOrdinate(O,U),pe=h.getOrdinate(O,U);if(u.getOrdinate(O,U)!==h.getOrdinate(O,U)&&(!B.isNaN(J)||!B.isNaN(pe)))return!1}return!0},Wt.extend=function(u,h,y){var w=u.create(y,h.getDimension()),O=h.size();if(Wt.copy(h,0,w,0,O),O>0)for(var U=O;U<y;U++)Wt.copy(h,O-1,w,U,1);return w},Wt.reverse=function(u){for(var h=u.size()-1,y=Math.trunc(h/2),w=0;w<=y;w++)Wt.swap(u,w,h-w)},Wt.swap=function(u,h,y){if(h===y)return null;for(var w=0;w<u.getDimension();w++){var O=u.getOrdinate(h,w);u.setOrdinate(h,w,u.getOrdinate(y,w)),u.setOrdinate(y,w,O)}},Wt.copy=function(u,h,y,w,O){for(var U=0;U<O;U++)Wt.copyCoord(u,h+U,y,w+U)},Wt.toString=function(){if(arguments.length===1){var u=arguments[0],h=u.size();if(h===0)return"()";var y=u.getDimension(),w=new re;w.append("(");for(var O=0;O<h;O++){O>0&&w.append(" ");for(var U=0;U<y;U++)U>0&&w.append(","),w.append(Dr.toString(u.getOrdinate(O,U)))}return w.append(")"),w.toString()}},Wt.ensureValidRing=function(u,h){var y=h.size();return y===0?h:y<=3?Wt.createClosedRing(u,h,4):h.getOrdinate(0,$e.X)===h.getOrdinate(y-1,$e.X)&&h.getOrdinate(0,$e.Y)===h.getOrdinate(y-1,$e.Y)?h:Wt.createClosedRing(u,h,y+1)},Wt.createClosedRing=function(u,h,y){var w=u.create(y,h.getDimension()),O=h.size();Wt.copy(h,0,w,0,O);for(var U=O;U<y;U++)Wt.copy(h,0,w,U,1);return w};var Vr=function(u){function h(w,O){u.call(this,O),this._points=null,this.init(w)}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new vt:this._points.expandEnvelope(new vt)},h.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},h.prototype.getSortIndex=function(){return u.SORTINDEX_LINESTRING},h.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},h.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];if(!this.isEquivalentClass(w))return!1;var U=w;if(this._points.size()!==U._points.size())return!1;for(var J=0;J<this._points.size();J++)if(!this.equal(this._points.getCoordinate(J),U._points.getCoordinate(J),O))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){for(var w=0;w<Math.trunc(this._points.size()/2);w++){var O=this._points.size()-1-w;if(!this._points.getCoordinate(w).equals(this._points.getCoordinate(O)))return this._points.getCoordinate(w).compareTo(this._points.getCoordinate(O))>0&&Wt.reverse(this._points),null}},h.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},h.prototype.getBoundaryDimension=function(){return this.isClosed()?Rt.FALSE:0},h.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},h.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},h.prototype.getDimension=function(){return 1},h.prototype.getLength=function(){return rt.computeLength(this._points)},h.prototype.getNumPoints=function(){return this._points.size()},h.prototype.reverse=function(){var w=this._points.copy();return Wt.reverse(w),this.getFactory().createLineString(w)},h.prototype.compareToSameClass=function(){if(arguments.length===1){for(var w=arguments[0],O=0,U=0;O<this._points.size()&&U<w._points.size();){var J=this._points.getCoordinate(O).compareTo(w._points.getCoordinate(U));if(J!==0)return J;O++,U++}return O<this._points.size()?1:U<w._points.size()?-1:0}if(arguments.length===2){var pe=arguments[0];return arguments[1].compare(this._points,pe._points)}},h.prototype.apply=function(){if(fe(arguments[0],Lr))for(var w=arguments[0],O=0;O<this._points.size();O++)w.filter(this._points.getCoordinate(O));else if(fe(arguments[0],Kt)){var U=arguments[0];if(this._points.size()===0)return null;for(var J=0;J<this._points.size()&&(U.filter(this._points,J),!U.isDone());J++);U.isGeometryChanged()&&this.geometryChanged()}else fe(arguments[0],qt)?arguments[0].filter(this):fe(arguments[0],lr)&&arguments[0].filter(this)},h.prototype.getBoundary=function(){return new Hr(this).getBoundary()},h.prototype.isEquivalentClass=function(w){return w instanceof h},h.prototype.clone=function(){var w=u.prototype.clone.call(this);return w._points=this._points.clone(),w},h.prototype.getCoordinateN=function(w){return this._points.getCoordinate(w)},h.prototype.getGeometryType=function(){return"LineString"},h.prototype.copy=function(){return new h(this._points.copy(),this._factory)},h.prototype.getCoordinateSequence=function(){return this._points},h.prototype.isEmpty=function(){return this._points.size()===0},h.prototype.init=function(w){if(w===null&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),w.size()===1)throw new N("Invalid number of points in LineString (found "+w.size()+" - must be 0 or >= 2)");this._points=w},h.prototype.isCoordinate=function(w){for(var O=0;O<this._points.size();O++)if(this._points.getCoordinate(O).equals(w))return!0;return!1},h.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},h.prototype.getPointN=function(w){return this.getFactory().createPoint(this._points.getCoordinate(w))},h.prototype.interfaces_=function(){return[yt]},h.prototype.getClass=function(){return h},y.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(h,y),h}(ut),xt=function(){};xt.prototype.interfaces_=function(){return[]},xt.prototype.getClass=function(){return xt};var Jr=function(u){function h(w,O){u.call(this,O),this._coordinates=w||null,this.init(this._coordinates)}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new vt;var w=new vt;return w.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),w},h.prototype.getSortIndex=function(){return u.SORTINDEX_POINT},h.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},h.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];return!!this.isEquivalentClass(w)&&(!(!this.isEmpty()||!w.isEmpty())||this.isEmpty()===w.isEmpty()&&this.equal(w.getCoordinate(),this.getCoordinate(),O))}return u.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){},h.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},h.prototype.getBoundaryDimension=function(){return Rt.FALSE},h.prototype.getDimension=function(){return 0},h.prototype.getNumPoints=function(){return this.isEmpty()?0:1},h.prototype.reverse=function(){return this.copy()},h.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},h.prototype.compareToSameClass=function(){if(arguments.length===1){var w=arguments[0];return this.getCoordinate().compareTo(w.getCoordinate())}if(arguments.length===2){var O=arguments[0];return arguments[1].compare(this._coordinates,O._coordinates)}},h.prototype.apply=function(){if(fe(arguments[0],Lr)){var w=arguments[0];if(this.isEmpty())return null;w.filter(this.getCoordinate())}else if(fe(arguments[0],Kt)){var O=arguments[0];if(this.isEmpty())return null;O.filter(this._coordinates,0),O.isGeometryChanged()&&this.geometryChanged()}else fe(arguments[0],qt)?arguments[0].filter(this):fe(arguments[0],lr)&&arguments[0].filter(this)},h.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},h.prototype.clone=function(){var w=u.prototype.clone.call(this);return w._coordinates=this._coordinates.clone(),w},h.prototype.getGeometryType=function(){return"Point"},h.prototype.copy=function(){return new h(this._coordinates.copy(),this._factory)},h.prototype.getCoordinateSequence=function(){return this._coordinates},h.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},h.prototype.isEmpty=function(){return this._coordinates.size()===0},h.prototype.init=function(w){w===null&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),ve.isTrue(w.size()<=1),this._coordinates=w},h.prototype.isSimple=function(){return!0},h.prototype.interfaces_=function(){return[xt]},h.prototype.getClass=function(){return h},y.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(h,y),h}(ut),Mi=function(){};Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var yi=function(u){function h(w,O,U){if(u.call(this,U),this._shell=null,this._holes=null,w===null&&(w=this.getFactory().createLinearRing()),O===null&&(O=[]),u.hasNullElements(O))throw new N("holes must not contain null elements");if(w.isEmpty()&&u.hasNonEmptyElements(O))throw new N("shell is empty but holes are not");this._shell=w,this._holes=O}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={serialVersionUID:{configurable:!0}};return h.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},h.prototype.getSortIndex=function(){return u.SORTINDEX_POLYGON},h.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var w=new Array(this.getNumPoints()).fill(null),O=-1,U=this._shell.getCoordinates(),J=0;J<U.length;J++)w[++O]=U[J];for(var pe=0;pe<this._holes.length;pe++)for(var Ae=this._holes[pe].getCoordinates(),A=0;A<Ae.length;A++)w[++O]=Ae[A];return w},h.prototype.getArea=function(){var w=0;w+=Math.abs(rt.signedArea(this._shell.getCoordinateSequence()));for(var O=0;O<this._holes.length;O++)w-=Math.abs(rt.signedArea(this._holes[O].getCoordinateSequence()));return w},h.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var w=this._shell.getCoordinateSequence(),O=this.getEnvelopeInternal(),U=0;U<5;U++){var J=w.getX(U);if(J!==O.getMinX()&&J!==O.getMaxX())return!1;var pe=w.getY(U);if(pe!==O.getMinY()&&pe!==O.getMaxY())return!1}for(var Ae=w.getX(0),A=w.getY(0),l=1;l<=4;l++){var v=w.getX(l),S=w.getY(l);if(v!==Ae==(S!==A))return!1;Ae=v,A=S}return!0},h.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];if(!this.isEquivalentClass(w))return!1;var U=w,J=this._shell,pe=U._shell;if(!J.equalsExact(pe,O)||this._holes.length!==U._holes.length)return!1;for(var Ae=0;Ae<this._holes.length;Ae++)if(!this._holes[Ae].equalsExact(U._holes[Ae],O))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},h.prototype.normalize=function(){if(arguments.length===0){this.normalize(this._shell,!0);for(var w=0;w<this._holes.length;w++)this.normalize(this._holes[w],!1);gt.sort(this._holes)}else if(arguments.length===2){var O=arguments[0],U=arguments[1];if(O.isEmpty())return null;var J=new Array(O.getCoordinates().length-1).fill(null);pt.arraycopy(O.getCoordinates(),0,J,0,J.length);var pe=ce.minCoordinate(O.getCoordinates());ce.scroll(J,pe),pt.arraycopy(J,0,O.getCoordinates(),0,J.length),O.getCoordinates()[J.length]=J[0],rt.isCCW(O.getCoordinates())===U&&ce.reverse(O.getCoordinates())}},h.prototype.getCoordinate=function(){return this._shell.getCoordinate()},h.prototype.getNumInteriorRing=function(){return this._holes.length},h.prototype.getBoundaryDimension=function(){return 1},h.prototype.getDimension=function(){return 2},h.prototype.getLength=function(){var w=0;w+=this._shell.getLength();for(var O=0;O<this._holes.length;O++)w+=this._holes[O].getLength();return w},h.prototype.getNumPoints=function(){for(var w=this._shell.getNumPoints(),O=0;O<this._holes.length;O++)w+=this._holes[O].getNumPoints();return w},h.prototype.reverse=function(){var w=this.copy();w._shell=this._shell.copy().reverse(),w._holes=new Array(this._holes.length).fill(null);for(var O=0;O<this._holes.length;O++)w._holes[O]=this._holes[O].copy().reverse();return w},h.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},h.prototype.compareToSameClass=function(){if(arguments.length===1){var w=arguments[0],O=this._shell,U=w._shell;return O.compareToSameClass(U)}if(arguments.length===2){var J=arguments[0],pe=arguments[1],Ae=J,A=this._shell,l=Ae._shell,v=A.compareToSameClass(l,pe);if(v!==0)return v;for(var S=this.getNumInteriorRing(),C=Ae.getNumInteriorRing(),M=0;M<S&&M<C;){var z=this.getInteriorRingN(M),V=Ae.getInteriorRingN(M),X=z.compareToSameClass(V,pe);if(X!==0)return X;M++}return M<S?1:M<C?-1:0}},h.prototype.apply=function(w){if(fe(w,Lr)){this._shell.apply(w);for(var O=0;O<this._holes.length;O++)this._holes[O].apply(w)}else if(fe(w,Kt)){if(this._shell.apply(w),!w.isDone())for(var U=0;U<this._holes.length&&(this._holes[U].apply(w),!w.isDone());U++);w.isGeometryChanged()&&this.geometryChanged()}else if(fe(w,qt))w.filter(this);else if(fe(w,lr)){w.filter(this),this._shell.apply(w);for(var J=0;J<this._holes.length;J++)this._holes[J].apply(w)}},h.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var w=new Array(this._holes.length+1).fill(null);w[0]=this._shell;for(var O=0;O<this._holes.length;O++)w[O+1]=this._holes[O];return w.length<=1?this.getFactory().createLinearRing(w[0].getCoordinateSequence()):this.getFactory().createMultiLineString(w)},h.prototype.clone=function(){var w=u.prototype.clone.call(this);w._shell=this._shell.clone(),w._holes=new Array(this._holes.length).fill(null);for(var O=0;O<this._holes.length;O++)w._holes[O]=this._holes[O].clone();return w},h.prototype.getGeometryType=function(){return"Polygon"},h.prototype.copy=function(){for(var w=this._shell.copy(),O=new Array(this._holes.length).fill(null),U=0;U<O.length;U++)O[U]=this._holes[U].copy();return new h(w,O,this._factory)},h.prototype.getExteriorRing=function(){return this._shell},h.prototype.isEmpty=function(){return this._shell.isEmpty()},h.prototype.getInteriorRingN=function(w){return this._holes[w]},h.prototype.interfaces_=function(){return[Mi]},h.prototype.getClass=function(){return h},y.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(h,y),h}(ut),Si=function(u){function h(){u.apply(this,arguments)}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOINT},h.prototype.isValid=function(){return!0},h.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];return!!this.isEquivalentClass(w)&&u.prototype.equalsExact.call(this,w,O)}return u.prototype.equalsExact.apply(this,arguments)},h.prototype.getCoordinate=function(){if(arguments.length===1){var w=arguments[0];return this._geometries[w].getCoordinate()}return u.prototype.getCoordinate.apply(this,arguments)},h.prototype.getBoundaryDimension=function(){return Rt.FALSE},h.prototype.getDimension=function(){return 0},h.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},h.prototype.getGeometryType=function(){return"MultiPoint"},h.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),O=0;O<w.length;O++)w[O]=this._geometries[O].copy();return new h(w,this._factory)},h.prototype.interfaces_=function(){return[xt]},h.prototype.getClass=function(){return h},y.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(h,y),h}(er),Pi=function(u){function h(w,O){w instanceof Q&&O instanceof zr&&(w=O.getCoordinateSequenceFactory().create(w)),u.call(this,w,O),this.validateConstruction()}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return ut.SORTINDEX_LINEARRING},h.prototype.getBoundaryDimension=function(){return Rt.FALSE},h.prototype.isClosed=function(){return!!this.isEmpty()||u.prototype.isClosed.call(this)},h.prototype.reverse=function(){var w=this._points.copy();return Wt.reverse(w),this.getFactory().createLinearRing(w)},h.prototype.validateConstruction=function(){if(!this.isEmpty()&&!u.prototype.isClosed.call(this))throw new N("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<h.MINIMUM_VALID_SIZE)throw new N("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},h.prototype.getGeometryType=function(){return"LinearRing"},h.prototype.copy=function(){return new h(this._points.copy(),this._factory)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},y.MINIMUM_VALID_SIZE.get=function(){return 4},y.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(h,y),h}(Vr),da=function(u){function h(){u.apply(this,arguments)}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={serialVersionUID:{configurable:!0}};return h.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOLYGON},h.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];return!!this.isEquivalentClass(w)&&u.prototype.equalsExact.call(this,w,O)}return u.prototype.equalsExact.apply(this,arguments)},h.prototype.getBoundaryDimension=function(){return 1},h.prototype.getDimension=function(){return 2},h.prototype.reverse=function(){for(var w=this._geometries.length,O=new Array(w).fill(null),U=0;U<this._geometries.length;U++)O[U]=this._geometries[U].reverse();return this.getFactory().createMultiPolygon(O)},h.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var w=new Pt,O=0;O<this._geometries.length;O++)for(var U=this._geometries[O].getBoundary(),J=0;J<U.getNumGeometries();J++)w.add(U.getGeometryN(J));var pe=new Array(w.size()).fill(null);return this.getFactory().createMultiLineString(w.toArray(pe))},h.prototype.getGeometryType=function(){return"MultiPolygon"},h.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),O=0;O<w.length;O++)w[O]=this._geometries[O].copy();return new h(w,this._factory)},h.prototype.interfaces_=function(){return[Mi]},h.prototype.getClass=function(){return h},y.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(h,y),h}(er),no=function(u){this._factory=u||null,this._isUserDataCopied=!1},di={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};no.prototype.setCopyUserData=function(u){this._isUserDataCopied=u},no.prototype.edit=function(u,h){if(u===null)return null;var y=this.editInternal(u,h);return this._isUserDataCopied&&y.setUserData(u.getUserData()),y},no.prototype.editInternal=function(u,h){return this._factory===null&&(this._factory=u.getFactory()),u instanceof er?this.editGeometryCollection(u,h):u instanceof yi?this.editPolygon(u,h):u instanceof Jr?h.edit(u,this._factory):u instanceof Vr?h.edit(u,this._factory):(ve.shouldNeverReachHere("Unsupported Geometry class: "+u.getClass().getName()),null)},no.prototype.editGeometryCollection=function(u,h){for(var y=h.edit(u,this._factory),w=new Pt,O=0;O<y.getNumGeometries();O++){var U=this.edit(y.getGeometryN(O),h);U===null||U.isEmpty()||w.add(U)}return y.getClass()===Si?this._factory.createMultiPoint(w.toArray([])):y.getClass()===Yr?this._factory.createMultiLineString(w.toArray([])):y.getClass()===da?this._factory.createMultiPolygon(w.toArray([])):this._factory.createGeometryCollection(w.toArray([]))},no.prototype.editPolygon=function(u,h){var y=h.edit(u,this._factory);if(y===null&&(y=this._factory.createPolygon(null)),y.isEmpty())return y;var w=this.edit(y.getExteriorRing(),h);if(w===null||w.isEmpty())return this._factory.createPolygon();for(var O=new Pt,U=0;U<y.getNumInteriorRing();U++){var J=this.edit(y.getInteriorRingN(U),h);J===null||J.isEmpty()||O.add(J)}return this._factory.createPolygon(w,O.toArray([]))},no.prototype.interfaces_=function(){return[]},no.prototype.getClass=function(){return no},no.GeometryEditorOperation=function(){},di.NoOpGeometryOperation.get=function(){return Ko},di.CoordinateOperation.get=function(){return Ea},di.CoordinateSequenceOperation.get=function(){return oi},Object.defineProperties(no,di);var Ko=function(){};Ko.prototype.edit=function(u,h){return u},Ko.prototype.interfaces_=function(){return[no.GeometryEditorOperation]},Ko.prototype.getClass=function(){return Ko};var Ea=function(){};Ea.prototype.edit=function(u,h){var y=this.editCoordinates(u.getCoordinates(),u);return y===null?u:u instanceof Pi?h.createLinearRing(y):u instanceof Vr?h.createLineString(y):u instanceof Jr?y.length>0?h.createPoint(y[0]):h.createPoint():u},Ea.prototype.interfaces_=function(){return[no.GeometryEditorOperation]},Ea.prototype.getClass=function(){return Ea};var oi=function(){};oi.prototype.edit=function(u,h){return u instanceof Pi?h.createLinearRing(this.edit(u.getCoordinateSequence(),u)):u instanceof Vr?h.createLineString(this.edit(u.getCoordinateSequence(),u)):u instanceof Jr?h.createPoint(this.edit(u.getCoordinateSequence(),u)):u},oi.prototype.interfaces_=function(){return[no.GeometryEditorOperation]},oi.prototype.getClass=function(){return oi};var Yn=function(){if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var u=arguments[0];this._coordinates=new Array(u).fill(null);for(var h=0;h<u;h++)this._coordinates[h]=new Q}else if(fe(arguments[0],$e)){var y=arguments[0];if(y===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=y.getDimension(),this._coordinates=new Array(y.size()).fill(null);for(var w=0;w<this._coordinates.length;w++)this._coordinates[w]=y.getCoordinateCopy(w)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var O=arguments[0],U=arguments[1];this._coordinates=O,this._dimension=U,O===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var J=arguments[0],pe=arguments[1];this._coordinates=new Array(J).fill(null),this._dimension=pe;for(var Ae=0;Ae<J;Ae++)this._coordinates[Ae]=new Q}}},io={serialVersionUID:{configurable:!0}};Yn.prototype.setOrdinate=function(u,h,y){switch(h){case $e.X:this._coordinates[u].x=y;break;case $e.Y:this._coordinates[u].y=y;break;case $e.Z:this._coordinates[u].z=y;break;default:throw new N("invalid ordinateIndex")}},Yn.prototype.size=function(){return this._coordinates.length},Yn.prototype.getOrdinate=function(u,h){switch(h){case $e.X:return this._coordinates[u].x;case $e.Y:return this._coordinates[u].y;case $e.Z:return this._coordinates[u].z}return B.NaN},Yn.prototype.getCoordinate=function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var h=arguments[0],y=arguments[1];y.x=this._coordinates[h].x,y.y=this._coordinates[h].y,y.z=this._coordinates[h].z}},Yn.prototype.getCoordinateCopy=function(u){return new Q(this._coordinates[u])},Yn.prototype.getDimension=function(){return this._dimension},Yn.prototype.getX=function(u){return this._coordinates[u].x},Yn.prototype.clone=function(){for(var u=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++)u[h]=this._coordinates[h].clone();return new Yn(u,this._dimension)},Yn.prototype.expandEnvelope=function(u){for(var h=0;h<this._coordinates.length;h++)u.expandToInclude(this._coordinates[h]);return u},Yn.prototype.copy=function(){for(var u=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++)u[h]=this._coordinates[h].copy();return new Yn(u,this._dimension)},Yn.prototype.toString=function(){if(this._coordinates.length>0){var u=new re(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var h=1;h<this._coordinates.length;h++)u.append(", "),u.append(this._coordinates[h]);return u.append(")"),u.toString()}return"()"},Yn.prototype.getY=function(u){return this._coordinates[u].y},Yn.prototype.toCoordinateArray=function(){return this._coordinates},Yn.prototype.interfaces_=function(){return[$e,n]},Yn.prototype.getClass=function(){return Yn},io.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Yn,io);var Uo=function(){},pa={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Uo.prototype.readResolve=function(){return Uo.instance()},Uo.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new Yn(u)}if(fe(arguments[0],$e)){var h=arguments[0];return new Yn(h)}}else if(arguments.length===2){var y=arguments[0],w=arguments[1];return w>3&&(w=3),w<2?new Yn(y):new Yn(y,w)}},Uo.prototype.interfaces_=function(){return[be,n]},Uo.prototype.getClass=function(){return Uo},Uo.instance=function(){return Uo.instanceObject},pa.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},pa.instanceObject.get=function(){return new Uo},Object.defineProperties(Uo,pa);var Ou=function(u){function h(){u.call(this),this.map_=new Map}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.get=function(y){return this.map_.get(y)||null},h.prototype.put=function(y,w){return this.map_.set(y,w),w},h.prototype.values=function(){for(var y=new Pt,w=this.map_.values(),O=w.next();!O.done;)y.add(O.value),O=w.next();return y},h.prototype.entrySet=function(){var y=new He;return this.map_.entries().forEach(function(w){return y.add(w)}),y},h.prototype.size=function(){return this.map_.size()},h}(Ge),or=function u(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=u.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof oo){var h=arguments[0];this._modelType=h,h===u.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var y=arguments[0];this._modelType=u.FIXED,this.setScale(y)}else if(arguments[0]instanceof u){var w=arguments[0];this._modelType=w._modelType,this._scale=w._scale}}},Tu={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};or.prototype.equals=function(u){if(!(u instanceof or))return!1;var h=u;return this._modelType===h._modelType&&this._scale===h._scale},or.prototype.compareTo=function(u){var h=u,y=this.getMaximumSignificantDigits(),w=h.getMaximumSignificantDigits();return new ie(y).compareTo(new ie(w))},or.prototype.getScale=function(){return this._scale},or.prototype.isFloating=function(){return this._modelType===or.FLOATING||this._modelType===or.FLOATING_SINGLE},or.prototype.getType=function(){return this._modelType},or.prototype.toString=function(){var u="UNKNOWN";return this._modelType===or.FLOATING?u="Floating":this._modelType===or.FLOATING_SINGLE?u="Floating-Single":this._modelType===or.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u},or.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var u=arguments[0];return B.isNaN(u)||this._modelType===or.FLOATING_SINGLE?u:this._modelType===or.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof Q){var h=arguments[0];if(this._modelType===or.FLOATING)return null;h.x=this.makePrecise(h.x),h.y=this.makePrecise(h.y)}},or.prototype.getMaximumSignificantDigits=function(){var u=16;return this._modelType===or.FLOATING?u=16:this._modelType===or.FLOATING_SINGLE?u=6:this._modelType===or.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u},or.prototype.setScale=function(u){this._scale=Math.abs(u)},or.prototype.interfaces_=function(){return[n,Z]},or.prototype.getClass=function(){return or},or.mostPrecise=function(u,h){return u.compareTo(h)>=0?u:h},Tu.serialVersionUID.get=function(){return 7777263578777804e3},Tu.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(or,Tu);var oo=function u(h){this._name=h||null,u.nameToTypeMap.put(h,this)},Ga={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};oo.prototype.readResolve=function(){return oo.nameToTypeMap.get(this._name)},oo.prototype.toString=function(){return this._name},oo.prototype.interfaces_=function(){return[n]},oo.prototype.getClass=function(){return oo},Ga.serialVersionUID.get=function(){return-552860263173159e4},Ga.nameToTypeMap.get=function(){return new Ou},Object.defineProperties(oo,Ga),or.Type=oo,or.FIXED=new oo("FIXED"),or.FLOATING=new oo("FLOATING"),or.FLOATING_SINGLE=new oo("FLOATING SINGLE");var zr=function u(){this._precisionModel=new or,this._SRID=0,this._coordinateSequenceFactory=u.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?fe(arguments[0],be)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof or&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Mu={serialVersionUID:{configurable:!0}};zr.prototype.toGeometry=function(u){return u.isNull()?this.createPoint(null):u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new Q(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new Q(u.getMinX(),u.getMinY()),new Q(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new Q(u.getMinX(),u.getMinY()),new Q(u.getMinX(),u.getMaxY()),new Q(u.getMaxX(),u.getMaxY()),new Q(u.getMaxX(),u.getMinY()),new Q(u.getMinX(),u.getMinY())]),null)},zr.prototype.createLineString=function(u){return u?u instanceof Array?new Vr(this.getCoordinateSequenceFactory().create(u),this):fe(u,$e)?new Vr(u,this):void 0:new Vr(this.getCoordinateSequenceFactory().create([]),this)},zr.prototype.createMultiLineString=function(){if(arguments.length===0)return new Yr(null,this);if(arguments.length===1){var u=arguments[0];return new Yr(u,this)}},zr.prototype.buildGeometry=function(u){for(var h=null,y=!1,w=!1,O=u.iterator();O.hasNext();){var U=O.next(),J=U.getClass();h===null&&(h=J),J!==h&&(y=!0),U.isGeometryCollectionOrDerived()&&(w=!0)}if(h===null)return this.createGeometryCollection();if(y||w)return this.createGeometryCollection(zr.toGeometryArray(u));var pe=u.iterator().next();if(u.size()>1){if(pe instanceof yi)return this.createMultiPolygon(zr.toPolygonArray(u));if(pe instanceof Vr)return this.createMultiLineString(zr.toLineStringArray(u));if(pe instanceof Jr)return this.createMultiPoint(zr.toPointArray(u));ve.shouldNeverReachHere("Unhandled class: "+pe.getClass().getName())}return pe},zr.prototype.createMultiPointFromCoords=function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)},zr.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Q){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(fe(arguments[0],$e)){var h=arguments[0];return new Jr(h,this)}}},zr.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},zr.prototype.createPolygon=function(){if(arguments.length===0)return new yi(null,null,this);if(arguments.length===1){if(fe(arguments[0],$e)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var h=arguments[0];return this.createPolygon(this.createLinearRing(h))}if(arguments[0]instanceof Pi){var y=arguments[0];return this.createPolygon(y,null)}}else if(arguments.length===2){var w=arguments[0],O=arguments[1];return new yi(w,O,this)}},zr.prototype.getSRID=function(){return this._SRID},zr.prototype.createGeometryCollection=function(){if(arguments.length===0)return new er(null,this);if(arguments.length===1){var u=arguments[0];return new er(u,this)}},zr.prototype.createGeometry=function(u){return new no(this).edit(u,{edit:function(){if(arguments.length===2){var h=arguments[0];return this._coordinateSequenceFactory.create(h)}}})},zr.prototype.getPrecisionModel=function(){return this._precisionModel},zr.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(fe(arguments[0],$e)){var h=arguments[0];return new Pi(h,this)}}},zr.prototype.createMultiPolygon=function(){if(arguments.length===0)return new da(null,this);if(arguments.length===1){var u=arguments[0];return new da(u,this)}},zr.prototype.createMultiPoint=function(){if(arguments.length===0)return new Si(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new Si(u,this)}if(arguments[0]instanceof Array){var h=arguments[0];return this.createMultiPoint(h!==null?this.getCoordinateSequenceFactory().create(h):null)}if(fe(arguments[0],$e)){var y=arguments[0];if(y===null)return this.createMultiPoint(new Array(0).fill(null));for(var w=new Array(y.size()).fill(null),O=0;O<y.size();O++){var U=this.getCoordinateSequenceFactory().create(1,y.getDimension());Wt.copy(y,O,U,0,1),w[O]=this.createPoint(U)}return this.createMultiPoint(w)}}},zr.prototype.interfaces_=function(){return[n]},zr.prototype.getClass=function(){return zr},zr.toMultiPolygonArray=function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.toGeometryArray=function(u){if(u===null)return null;var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.getDefaultCoordinateSequenceFactory=function(){return Uo.instance()},zr.toMultiLineStringArray=function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.toLineStringArray=function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.toMultiPointArray=function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.toLinearRingArray=function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.toPointArray=function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.toPolygonArray=function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)},zr.createPointFromInternalCoord=function(u,h){return h.getPrecisionModel().makePrecise(u),h.getFactory().createPoint(u)},Mu.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(zr,Mu);var Ef=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],el=function(u){this.geometryFactory=u||new zr};el.prototype.read=function(u){var h,y=(h=typeof u=="string"?JSON.parse(u):u).type;if(!vo[y])throw new Error("Unknown GeoJSON type: "+h.type);return Ef.indexOf(y)!==-1?vo[y].apply(this,[h.coordinates]):y==="GeometryCollection"?vo[y].apply(this,[h.geometries]):vo[y].apply(this,[h])},el.prototype.write=function(u){var h=u.getGeometryType();if(!Sa[h])throw new Error("Geometry is not supported");return Sa[h].apply(this,[u])};var vo={Feature:function(u){var h={};for(var y in u)h[y]=u[y];if(u.geometry){var w=u.geometry.type;if(!vo[w])throw new Error("Unknown GeoJSON type: "+u.type);h.geometry=this.read(u.geometry)}return u.bbox&&(h.bbox=vo.bbox.apply(this,[u.bbox])),h},FeatureCollection:function(u){var h={};if(u.features){h.features=[];for(var y=0;y<u.features.length;++y)h.features.push(this.read(u.features[y]))}return u.bbox&&(h.bbox=this.parse.bbox.apply(this,[u.bbox])),h},coordinates:function(u){for(var h=[],y=0;y<u.length;++y){var w=u[y];h.push(new Q(w[0],w[1]))}return h},bbox:function(u){return this.geometryFactory.createLinearRing([new Q(u[0],u[1]),new Q(u[2],u[1]),new Q(u[2],u[3]),new Q(u[0],u[3]),new Q(u[0],u[1])])},Point:function(u){var h=new Q(u[0],u[1]);return this.geometryFactory.createPoint(h)},MultiPoint:function(u){for(var h=[],y=0;y<u.length;++y)h.push(vo.Point.apply(this,[u[y]]));return this.geometryFactory.createMultiPoint(h)},LineString:function(u){var h=vo.coordinates.apply(this,[u]);return this.geometryFactory.createLineString(h)},MultiLineString:function(u){for(var h=[],y=0;y<u.length;++y)h.push(vo.LineString.apply(this,[u[y]]));return this.geometryFactory.createMultiLineString(h)},Polygon:function(u){for(var h=vo.coordinates.apply(this,[u[0]]),y=this.geometryFactory.createLinearRing(h),w=[],O=1;O<u.length;++O){var U=u[O],J=vo.coordinates.apply(this,[U]),pe=this.geometryFactory.createLinearRing(J);w.push(pe)}return this.geometryFactory.createPolygon(y,w)},MultiPolygon:function(u){for(var h=[],y=0;y<u.length;++y){var w=u[y];h.push(vo.Polygon.apply(this,[w]))}return this.geometryFactory.createMultiPolygon(h)},GeometryCollection:function(u){for(var h=[],y=0;y<u.length;++y){var w=u[y];h.push(this.read(w))}return this.geometryFactory.createGeometryCollection(h)}},Sa={coordinate:function(u){return[u.x,u.y]},Point:function(u){return{type:"Point",coordinates:Sa.coordinate.apply(this,[u.getCoordinate()])}},MultiPoint:function(u){for(var h=[],y=0;y<u._geometries.length;++y){var w=u._geometries[y],O=Sa.Point.apply(this,[w]);h.push(O.coordinates)}return{type:"MultiPoint",coordinates:h}},LineString:function(u){for(var h=[],y=u.getCoordinates(),w=0;w<y.length;++w){var O=y[w];h.push(Sa.coordinate.apply(this,[O]))}return{type:"LineString",coordinates:h}},MultiLineString:function(u){for(var h=[],y=0;y<u._geometries.length;++y){var w=u._geometries[y],O=Sa.LineString.apply(this,[w]);h.push(O.coordinates)}return{type:"MultiLineString",coordinates:h}},Polygon:function(u){var h=[],y=Sa.LineString.apply(this,[u._shell]);h.push(y.coordinates);for(var w=0;w<u._holes.length;++w){var O=u._holes[w],U=Sa.LineString.apply(this,[O]);h.push(U.coordinates)}return{type:"Polygon",coordinates:h}},MultiPolygon:function(u){for(var h=[],y=0;y<u._geometries.length;++y){var w=u._geometries[y],O=Sa.Polygon.apply(this,[w]);h.push(O.coordinates)}return{type:"MultiPolygon",coordinates:h}},GeometryCollection:function(u){for(var h=[],y=0;y<u._geometries.length;++y){var w=u._geometries[y],O=w.getGeometryType();h.push(Sa[O].apply(this,[w]))}return{type:"GeometryCollection",geometries:h}}},tl=function(u){this.geometryFactory=u||new zr,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new el(this.geometryFactory)};tl.prototype.read=function(u){var h=this.parser.read(u);return this.precisionModel.getType()===or.FIXED&&this.reducePrecision(h),h},tl.prototype.reducePrecision=function(u){var h,y;if(u.coordinate)this.precisionModel.makePrecise(u.coordinate);else if(u.points)for(h=0,y=u.points.length;h<y;h++)this.precisionModel.makePrecise(u.points[h]);else if(u.geometries)for(h=0,y=u.geometries.length;h<y;h++)this.reducePrecision(u.geometries[h])};var Dc=function(){this.parser=new el(this.geometryFactory)};Dc.prototype.write=function(u){return this.parser.write(u)};var It=function(){},rl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.opposite=function(u){return u===It.LEFT?It.RIGHT:u===It.RIGHT?It.LEFT:u},rl.ON.get=function(){return 0},rl.LEFT.get=function(){return 1},rl.RIGHT.get=function(){return 2},Object.defineProperties(It,rl),(F.prototype=new Error).name="EmptyStackException",(T.prototype=new $r).add=function(u){return this.array_.push(u),!0},T.prototype.get=function(u){if(u<0||u>=this.size())throw new Error;return this.array_[u]},T.prototype.push=function(u){return this.array_.push(u),u},T.prototype.pop=function(u){if(this.array_.length===0)throw new F;return this.array_.pop()},T.prototype.peek=function(){if(this.array_.length===0)throw new F;return this.array_[this.array_.length-1]},T.prototype.empty=function(){return this.array_.length===0},T.prototype.isEmpty=function(){return this.empty()},T.prototype.search=function(u){return this.array_.indexOf(u)},T.prototype.size=function(){return this.array_.length},T.prototype.toArray=function(){for(var u=[],h=0,y=this.array_.length;h<y;h++)u.push(this.array_[h]);return u};var Ao=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ao.prototype.getCoordinate=function(){return this._minCoord},Ao.prototype.getRightmostSide=function(u,h){var y=this.getRightmostSideOfSegment(u,h);return y<0&&(y=this.getRightmostSideOfSegment(u,h-1)),y<0&&(this._minCoord=null,this.checkForRightmostCoordinate(u)),y},Ao.prototype.findRightmostEdgeAtVertex=function(){var u=this._minDe.getEdge().getCoordinates();ve.isTrue(this._minIndex>0&&this._minIndex<u.length,"rightmost point expected to be interior vertex of edge");var h=u[this._minIndex-1],y=u[this._minIndex+1],w=rt.computeOrientation(this._minCoord,y,h),O=!1;(h.y<this._minCoord.y&&y.y<this._minCoord.y&&w===rt.COUNTERCLOCKWISE||h.y>this._minCoord.y&&y.y>this._minCoord.y&&w===rt.CLOCKWISE)&&(O=!0),O&&(this._minIndex=this._minIndex-1)},Ao.prototype.getRightmostSideOfSegment=function(u,h){var y=u.getEdge().getCoordinates();if(h<0||h+1>=y.length||y[h].y===y[h+1].y)return-1;var w=It.LEFT;return y[h].y<y[h+1].y&&(w=It.RIGHT),w},Ao.prototype.getEdge=function(){return this._orientedDe},Ao.prototype.checkForRightmostCoordinate=function(u){for(var h=u.getEdge().getCoordinates(),y=0;y<h.length-1;y++)(this._minCoord===null||h[y].x>this._minCoord.x)&&(this._minDe=u,this._minIndex=y,this._minCoord=h[y])},Ao.prototype.findRightmostEdgeAtNode=function(){var u=this._minDe.getNode().getEdges();this._minDe=u.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ao.prototype.findEdge=function(u){for(var h=u.iterator();h.hasNext();){var y=h.next();y.isForward()&&this.checkForRightmostCoordinate(y)}ve.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===It.LEFT&&(this._orientedDe=this._minDe.getSym())},Ao.prototype.interfaces_=function(){return[]},Ao.prototype.getClass=function(){return Ao};var Pa=function(u){function h(y,w){u.call(this,h.msgWithCoord(y,w)),this.pt=w?new Q(w):null,this.name="TopologyException"}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.getCoordinate=function(){return this.pt},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.msgWithCoord=function(y,w){return w?y:y+" [ "+w+" ]"},h}(ot),nl=function(){this.array_=[]};nl.prototype.addLast=function(u){this.array_.push(u)},nl.prototype.removeFirst=function(){return this.array_.shift()},nl.prototype.isEmpty=function(){return this.array_.length===0};var Ai=function(){this._finder=null,this._dirEdgeList=new Pt,this._nodes=new Pt,this._rightMostCoord=null,this._env=null,this._finder=new Ao};Ai.prototype.clearVisitedEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();)u.next().setVisited(!1)},Ai.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ai.prototype.computeNodeDepth=function(u){for(var h=null,y=u.getEdges().iterator();y.hasNext();){var w=y.next();if(w.isVisited()||w.getSym().isVisited()){h=w;break}}if(h===null)throw new Pa("unable to find edge to compute depths at "+u.getCoordinate());u.getEdges().computeDepths(h);for(var O=u.getEdges().iterator();O.hasNext();){var U=O.next();U.setVisited(!0),this.copySymDepths(U)}},Ai.prototype.computeDepth=function(u){this.clearVisitedEdges();var h=this._finder.getEdge();h.setEdgeDepths(It.RIGHT,u),this.copySymDepths(h),this.computeDepths(h)},Ai.prototype.create=function(u){this.addReachable(u),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ai.prototype.findResultEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();){var h=u.next();h.getDepth(It.RIGHT)>=1&&h.getDepth(It.LEFT)<=0&&!h.isInteriorAreaEdge()&&h.setInResult(!0)}},Ai.prototype.computeDepths=function(u){var h=new He,y=new nl,w=u.getNode();for(y.addLast(w),h.add(w),u.setVisited(!0);!y.isEmpty();){var O=y.removeFirst();h.add(O),this.computeNodeDepth(O);for(var U=O.getEdges().iterator();U.hasNext();){var J=U.next().getSym();if(!J.isVisited()){var pe=J.getNode();h.contains(pe)||(y.addLast(pe),h.add(pe))}}}},Ai.prototype.compareTo=function(u){var h=u;return this._rightMostCoord.x<h._rightMostCoord.x?-1:this._rightMostCoord.x>h._rightMostCoord.x?1:0},Ai.prototype.getEnvelope=function(){if(this._env===null){for(var u=new vt,h=this._dirEdgeList.iterator();h.hasNext();)for(var y=h.next().getEdge().getCoordinates(),w=0;w<y.length-1;w++)u.expandToInclude(y[w]);this._env=u}return this._env},Ai.prototype.addReachable=function(u){var h=new T;for(h.add(u);!h.empty();){var y=h.pop();this.add(y,h)}},Ai.prototype.copySymDepths=function(u){var h=u.getSym();h.setDepth(It.LEFT,u.getDepth(It.RIGHT)),h.setDepth(It.RIGHT,u.getDepth(It.LEFT))},Ai.prototype.add=function(u,h){u.setVisited(!0),this._nodes.add(u);for(var y=u.getEdges().iterator();y.hasNext();){var w=y.next();this._dirEdgeList.add(w);var O=w.getSym().getNode();O.isVisited()||h.push(O)}},Ai.prototype.getNodes=function(){return this._nodes},Ai.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ai.prototype.interfaces_=function(){return[Z]},Ai.prototype.getClass=function(){return Ai};var gn=function u(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var h=arguments[0];this.init(h.length)}else if(Number.isInteger(arguments[0])){var y=arguments[0];this.init(1),this.location[It.ON]=y}else if(arguments[0]instanceof u){var w=arguments[0];if(this.init(w.location.length),w!==null)for(var O=0;O<this.location.length;O++)this.location[O]=w.location[O]}}else if(arguments.length===3){var U=arguments[0],J=arguments[1],pe=arguments[2];this.init(3),this.location[It.ON]=U,this.location[It.LEFT]=J,this.location[It.RIGHT]=pe}};gn.prototype.setAllLocations=function(u){for(var h=0;h<this.location.length;h++)this.location[h]=u},gn.prototype.isNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==oe.NONE)return!1;return!0},gn.prototype.setAllLocationsIfNull=function(u){for(var h=0;h<this.location.length;h++)this.location[h]===oe.NONE&&(this.location[h]=u)},gn.prototype.isLine=function(){return this.location.length===1},gn.prototype.merge=function(u){if(u.location.length>this.location.length){var h=new Array(3).fill(null);h[It.ON]=this.location[It.ON],h[It.LEFT]=oe.NONE,h[It.RIGHT]=oe.NONE,this.location=h}for(var y=0;y<this.location.length;y++)this.location[y]===oe.NONE&&y<u.location.length&&(this.location[y]=u.location[y])},gn.prototype.getLocations=function(){return this.location},gn.prototype.flip=function(){if(this.location.length<=1)return null;var u=this.location[It.LEFT];this.location[It.LEFT]=this.location[It.RIGHT],this.location[It.RIGHT]=u},gn.prototype.toString=function(){var u=new re;return this.location.length>1&&u.append(oe.toLocationSymbol(this.location[It.LEFT])),u.append(oe.toLocationSymbol(this.location[It.ON])),this.location.length>1&&u.append(oe.toLocationSymbol(this.location[It.RIGHT])),u.toString()},gn.prototype.setLocations=function(u,h,y){this.location[It.ON]=u,this.location[It.LEFT]=h,this.location[It.RIGHT]=y},gn.prototype.get=function(u){return u<this.location.length?this.location[u]:oe.NONE},gn.prototype.isArea=function(){return this.location.length>1},gn.prototype.isAnyNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===oe.NONE)return!0;return!1},gn.prototype.setLocation=function(){if(arguments.length===1){var u=arguments[0];this.setLocation(It.ON,u)}else if(arguments.length===2){var h=arguments[0],y=arguments[1];this.location[h]=y}},gn.prototype.init=function(u){this.location=new Array(u).fill(null),this.setAllLocations(oe.NONE)},gn.prototype.isEqualOnSide=function(u,h){return this.location[h]===u.location[h]},gn.prototype.allPositionsEqual=function(u){for(var h=0;h<this.location.length;h++)if(this.location[h]!==u)return!1;return!0},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn};var Qr=function u(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var h=arguments[0];this.elt[0]=new gn(h),this.elt[1]=new gn(h)}else if(arguments[0]instanceof u){var y=arguments[0];this.elt[0]=new gn(y.elt[0]),this.elt[1]=new gn(y.elt[1])}}else if(arguments.length===2){var w=arguments[0],O=arguments[1];this.elt[0]=new gn(oe.NONE),this.elt[1]=new gn(oe.NONE),this.elt[w].setLocation(O)}else if(arguments.length===3){var U=arguments[0],J=arguments[1],pe=arguments[2];this.elt[0]=new gn(U,J,pe),this.elt[1]=new gn(U,J,pe)}else if(arguments.length===4){var Ae=arguments[0],A=arguments[1],l=arguments[2],v=arguments[3];this.elt[0]=new gn(oe.NONE,oe.NONE,oe.NONE),this.elt[1]=new gn(oe.NONE,oe.NONE,oe.NONE),this.elt[Ae].setLocations(A,l,v)}};Qr.prototype.getGeometryCount=function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u},Qr.prototype.setAllLocations=function(u,h){this.elt[u].setAllLocations(h)},Qr.prototype.isNull=function(u){return this.elt[u].isNull()},Qr.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var h=arguments[0],y=arguments[1];this.elt[h].setAllLocationsIfNull(y)}},Qr.prototype.isLine=function(u){return this.elt[u].isLine()},Qr.prototype.merge=function(u){for(var h=0;h<2;h++)this.elt[h]===null&&u.elt[h]!==null?this.elt[h]=new gn(u.elt[h]):this.elt[h].merge(u.elt[h])},Qr.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Qr.prototype.getLocation=function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(It.ON)}if(arguments.length===2){var h=arguments[0],y=arguments[1];return this.elt[h].get(y)}},Qr.prototype.toString=function(){var u=new re;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()},Qr.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}},Qr.prototype.isAnyNull=function(u){return this.elt[u].isAnyNull()},Qr.prototype.setLocation=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];this.elt[u].setLocation(It.ON,h)}else if(arguments.length===3){var y=arguments[0],w=arguments[1],O=arguments[2];this.elt[y].setLocation(w,O)}},Qr.prototype.isEqualOnSide=function(u,h){return this.elt[0].isEqualOnSide(u.elt[0],h)&&this.elt[1].isEqualOnSide(u.elt[1],h)},Qr.prototype.allPositionsEqual=function(u,h){return this.elt[u].allPositionsEqual(h)},Qr.prototype.toLine=function(u){this.elt[u].isArea()&&(this.elt[u]=new gn(this.elt[u].location[0]))},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.toLineLabel=function(u){for(var h=new Qr(oe.NONE),y=0;y<2;y++)h.setLocation(y,u.getLocation(y));return h};var Hn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Pt,this._pts=new Pt,this._label=new Qr(oe.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Pt,this._geometryFactory=null;var u=arguments[0],h=arguments[1];this._geometryFactory=h,this.computePoints(u),this.computeRing()};Hn.prototype.computeRing=function(){if(this._ring!==null)return null;for(var u=new Array(this._pts.size()).fill(null),h=0;h<this._pts.size();h++)u[h]=this._pts.get(h);this._ring=this._geometryFactory.createLinearRing(u),this._isHole=rt.isCCW(this._ring.getCoordinates())},Hn.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Hn.prototype.computePoints=function(u){this._startDe=u;var h=u,y=!0;do{if(h===null)throw new Pa("Found null DirectedEdge");if(h.getEdgeRing()===this)throw new Pa("Directed Edge visited twice during ring-building at "+h.getCoordinate());this._edges.add(h);var w=h.getLabel();ve.isTrue(w.isArea()),this.mergeLabel(w),this.addPoints(h.getEdge(),h.isForward(),y),y=!1,this.setEdgeRing(h,this),h=this.getNext(h)}while(h!==this._startDe)},Hn.prototype.getLinearRing=function(){return this._ring},Hn.prototype.getCoordinate=function(u){return this._pts.get(u)},Hn.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var u=this._startDe;do{var h=u.getNode().getEdges().getOutgoingDegree(this);h>this._maxNodeDegree&&(this._maxNodeDegree=h),u=this.getNext(u)}while(u!==this._startDe);this._maxNodeDegree*=2},Hn.prototype.addPoints=function(u,h,y){var w=u.getCoordinates();if(h){var O=1;y&&(O=0);for(var U=O;U<w.length;U++)this._pts.add(w[U])}else{var J=w.length-2;y&&(J=w.length-1);for(var pe=J;pe>=0;pe--)this._pts.add(w[pe])}},Hn.prototype.isHole=function(){return this._isHole},Hn.prototype.setInResult=function(){var u=this._startDe;do u.getEdge().setInResult(!0),u=u.getNext();while(u!==this._startDe)},Hn.prototype.containsPoint=function(u){var h=this.getLinearRing();if(!h.getEnvelopeInternal().contains(u)||!rt.isPointInRing(u,h.getCoordinates()))return!1;for(var y=this._holes.iterator();y.hasNext();)if(y.next().containsPoint(u))return!1;return!0},Hn.prototype.addHole=function(u){this._holes.add(u)},Hn.prototype.isShell=function(){return this._shell===null},Hn.prototype.getLabel=function(){return this._label},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Hn.prototype.getShell=function(){return this._shell},Hn.prototype.mergeLabel=function(){if(arguments.length===1){var u=arguments[0];this.mergeLabel(u,0),this.mergeLabel(u,1)}else if(arguments.length===2){var h=arguments[0],y=arguments[1],w=h.getLocation(y,It.RIGHT);if(w===oe.NONE)return null;if(this._label.getLocation(y)===oe.NONE)return this._label.setLocation(y,w),null}},Hn.prototype.setShell=function(u){this._shell=u,u!==null&&u.addHole(this)},Hn.prototype.toPolygon=function(u){for(var h=new Array(this._holes.size()).fill(null),y=0;y<this._holes.size();y++)h[y]=this._holes.get(y).getLinearRing();return u.createPolygon(this.getLinearRing(),h)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Jo=function(u){function h(){var y=arguments[0],w=arguments[1];u.call(this,y,w)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.setEdgeRing=function(y,w){y.setMinEdgeRing(w)},h.prototype.getNext=function(y){return y.getNextMin()},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Hn),il=function(u){function h(){var y=arguments[0],w=arguments[1];u.call(this,y,w)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.buildMinimalRings=function(){var y=new Pt,w=this._startDe;do{if(w.getMinEdgeRing()===null){var O=new Jo(w,this._geometryFactory);y.add(O)}w=w.getNext()}while(w!==this._startDe);return y},h.prototype.setEdgeRing=function(y,w){y.setEdgeRing(w)},h.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var y=this._startDe;do y.getNode().getEdges().linkMinimalDirectedEdges(this),y=y.getNext();while(y!==this._startDe)},h.prototype.getNext=function(y){return y.getNext()},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Hn),Gi=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._label=u}}};Gi.prototype.setVisited=function(u){this._isVisited=u},Gi.prototype.setInResult=function(u){this._isInResult=u},Gi.prototype.isCovered=function(){return this._isCovered},Gi.prototype.isCoveredSet=function(){return this._isCoveredSet},Gi.prototype.setLabel=function(u){this._label=u},Gi.prototype.getLabel=function(){return this._label},Gi.prototype.setCovered=function(u){this._isCovered=u,this._isCoveredSet=!0},Gi.prototype.updateIM=function(u){ve.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(u)},Gi.prototype.isInResult=function(){return this._isInResult},Gi.prototype.isVisited=function(){return this._isVisited},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi};var As=function(u){function h(){u.call(this),this._coord=null,this._edges=null;var y=arguments[0],w=arguments[1];this._coord=y,this._edges=w,this._label=new Qr(0,oe.NONE)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.isIncidentEdgeInResult=function(){for(var y=this.getEdges().getEdges().iterator();y.hasNext();)if(y.next().getEdge().isInResult())return!0;return!1},h.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},h.prototype.getCoordinate=function(){return this._coord},h.prototype.print=function(y){y.println("node "+this._coord+" lbl: "+this._label)},h.prototype.computeIM=function(y){},h.prototype.computeMergedLocation=function(y,w){var O=oe.NONE;if(O=this._label.getLocation(w),!y.isNull(w)){var U=y.getLocation(w);O!==oe.BOUNDARY&&(O=U)}return O},h.prototype.setLabel=function(){if(arguments.length!==2)return u.prototype.setLabel.apply(this,arguments);var y=arguments[0],w=arguments[1];this._label===null?this._label=new Qr(y,w):this._label.setLocation(y,w)},h.prototype.getEdges=function(){return this._edges},h.prototype.mergeLabel=function(){if(arguments[0]instanceof h){var y=arguments[0];this.mergeLabel(y._label)}else if(arguments[0]instanceof Qr)for(var w=arguments[0],O=0;O<2;O++){var U=this.computeMergedLocation(w,O);this._label.getLocation(O)===oe.NONE&&this._label.setLocation(O,U)}},h.prototype.add=function(y){this._edges.insert(y),y.setNode(this)},h.prototype.setLabelBoundary=function(y){if(this._label===null)return null;var w=oe.NONE;this._label!==null&&(w=this._label.getLocation(y));var O=null;switch(w){case oe.BOUNDARY:O=oe.INTERIOR;break;case oe.INTERIOR:default:O=oe.BOUNDARY}this._label.setLocation(y,O)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Gi),yo=function(){this.nodeMap=new P,this.nodeFact=null;var u=arguments[0];this.nodeFact=u};yo.prototype.find=function(u){return this.nodeMap.get(u)},yo.prototype.addNode=function(){if(arguments[0]instanceof Q){var u=arguments[0],h=this.nodeMap.get(u);return h===null&&(h=this.nodeFact.createNode(u),this.nodeMap.put(u,h)),h}if(arguments[0]instanceof As){var y=arguments[0],w=this.nodeMap.get(y.getCoordinate());return w===null?(this.nodeMap.put(y.getCoordinate(),y),y):(w.mergeLabel(y),w)}},yo.prototype.print=function(u){for(var h=this.iterator();h.hasNext();)h.next().print(u)},yo.prototype.iterator=function(){return this.nodeMap.values().iterator()},yo.prototype.values=function(){return this.nodeMap.values()},yo.prototype.getBoundaryNodes=function(u){for(var h=new Pt,y=this.iterator();y.hasNext();){var w=y.next();w.getLabel().getLocation(u)===oe.BOUNDARY&&h.add(w)}return h},yo.prototype.add=function(u){var h=u.getCoordinate();this.addNode(h).add(u)},yo.prototype.interfaces_=function(){return[]},yo.prototype.getClass=function(){return yo};var on=function(){},cs={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},on.isNorthern=function(u){return u===on.NE||u===on.NW},on.isOpposite=function(u,h){return u===h?!1:(u-h+4)%4===2},on.commonHalfPlane=function(u,h){if(u===h)return u;if((u-h+4)%4===2)return-1;var y=u<h?u:h;return y===0&&(u>h?u:h)===3?3:y},on.isInHalfPlane=function(u,h){return h===on.SE?u===on.SE||u===on.SW:u===h||u===h+1},on.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1];if(u===0&&h===0)throw new N("Cannot compute the quadrant for point ( "+u+", "+h+" )");return u>=0?h>=0?on.NE:on.SE:h>=0?on.NW:on.SW}if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var y=arguments[0],w=arguments[1];if(w.x===y.x&&w.y===y.y)throw new N("Cannot compute the quadrant for two identical points "+y);return w.x>=y.x?w.y>=y.y?on.NE:on.SE:w.y>=y.y?on.NW:on.SW}},cs.NE.get=function(){return 0},cs.NW.get=function(){return 1},cs.SW.get=function(){return 2},cs.SE.get=function(){return 3},Object.defineProperties(on,cs);var ai=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var h=arguments[0],y=arguments[1],w=arguments[2];this._edge=h,this.init(y,w),this._label=null}else if(arguments.length===4){var O=arguments[0],U=arguments[1],J=arguments[2],pe=arguments[3];this._edge=O,this.init(U,J),this._label=pe}};ai.prototype.compareDirection=function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:rt.computeOrientation(u._p0,u._p1,this._p1)},ai.prototype.getDy=function(){return this._dy},ai.prototype.getCoordinate=function(){return this._p0},ai.prototype.setNode=function(u){this._node=u},ai.prototype.print=function(u){var h=Math.atan2(this._dy,this._dx),y=this.getClass().getName(),w=y.lastIndexOf("."),O=y.substring(w+1);u.print("  "+O+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label)},ai.prototype.compareTo=function(u){var h=u;return this.compareDirection(h)},ai.prototype.getDirectedCoordinate=function(){return this._p1},ai.prototype.getDx=function(){return this._dx},ai.prototype.getLabel=function(){return this._label},ai.prototype.getEdge=function(){return this._edge},ai.prototype.getQuadrant=function(){return this._quadrant},ai.prototype.getNode=function(){return this._node},ai.prototype.toString=function(){var u=Math.atan2(this._dy,this._dx),h=this.getClass().getName(),y=h.lastIndexOf(".");return"  "+h.substring(y+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label},ai.prototype.computeLabel=function(u){},ai.prototype.init=function(u,h){this._p0=u,this._p1=h,this._dx=h.x-u.x,this._dy=h.y-u.y,this._quadrant=on.quadrant(this._dx,this._dy),ve.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},ai.prototype.interfaces_=function(){return[Z]},ai.prototype.getClass=function(){return ai};var Lu=function(u){function h(){var y=arguments[0],w=arguments[1];if(u.call(this,y),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=w,w)this.init(y.getCoordinate(0),y.getCoordinate(1));else{var O=y.getNumPoints()-1;this.init(y.getCoordinate(O),y.getCoordinate(O-1))}this.computeDirectedLabel()}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.getNextMin=function(){return this._nextMin},h.prototype.getDepth=function(y){return this._depth[y]},h.prototype.setVisited=function(y){this._isVisited=y},h.prototype.computeDirectedLabel=function(){this._label=new Qr(this._edge.getLabel()),this._isForward||this._label.flip()},h.prototype.getNext=function(){return this._next},h.prototype.setDepth=function(y,w){if(this._depth[y]!==-999&&this._depth[y]!==w)throw new Pa("assigned depths do not match",this.getCoordinate());this._depth[y]=w},h.prototype.isInteriorAreaEdge=function(){for(var y=!0,w=0;w<2;w++)this._label.isArea(w)&&this._label.getLocation(w,It.LEFT)===oe.INTERIOR&&this._label.getLocation(w,It.RIGHT)===oe.INTERIOR||(y=!1);return y},h.prototype.setNextMin=function(y){this._nextMin=y},h.prototype.print=function(y){u.prototype.print.call(this,y),y.print(" "+this._depth[It.LEFT]+"/"+this._depth[It.RIGHT]),y.print(" ("+this.getDepthDelta()+")"),this._isInResult&&y.print(" inResult")},h.prototype.setMinEdgeRing=function(y){this._minEdgeRing=y},h.prototype.isLineEdge=function(){var y=this._label.isLine(0)||this._label.isLine(1),w=!this._label.isArea(0)||this._label.allPositionsEqual(0,oe.EXTERIOR),O=!this._label.isArea(1)||this._label.allPositionsEqual(1,oe.EXTERIOR);return y&&w&&O},h.prototype.setEdgeRing=function(y){this._edgeRing=y},h.prototype.getMinEdgeRing=function(){return this._minEdgeRing},h.prototype.getDepthDelta=function(){var y=this._edge.getDepthDelta();return this._isForward||(y=-y),y},h.prototype.setInResult=function(y){this._isInResult=y},h.prototype.getSym=function(){return this._sym},h.prototype.isForward=function(){return this._isForward},h.prototype.getEdge=function(){return this._edge},h.prototype.printEdge=function(y){this.print(y),y.print(" "),this._isForward?this._edge.print(y):this._edge.printReverse(y)},h.prototype.setSym=function(y){this._sym=y},h.prototype.setVisitedEdge=function(y){this.setVisited(y),this._sym.setVisited(y)},h.prototype.setEdgeDepths=function(y,w){var O=this.getEdge().getDepthDelta();this._isForward||(O=-O);var U=1;y===It.LEFT&&(U=-1);var J=It.opposite(y),pe=w+O*U;this.setDepth(y,w),this.setDepth(J,pe)},h.prototype.getEdgeRing=function(){return this._edgeRing},h.prototype.isInResult=function(){return this._isInResult},h.prototype.setNext=function(y){this._next=y},h.prototype.isVisited=function(){return this._isVisited},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.depthFactor=function(y,w){return y===oe.EXTERIOR&&w===oe.INTERIOR?1:y===oe.INTERIOR&&w===oe.EXTERIOR?-1:0},h}(ai),qi=function(){};qi.prototype.createNode=function(u){return new As(u,null)},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi};var rn=function(){if(this._edges=new Pt,this._nodes=null,this._edgeEndList=new Pt,arguments.length===0)this._nodes=new yo(new qi);else if(arguments.length===1){var u=arguments[0];this._nodes=new yo(u)}};rn.prototype.printEdges=function(u){u.println("Edges:");for(var h=0;h<this._edges.size();h++){u.println("edge "+h+":");var y=this._edges.get(h);y.print(u),y.eiList.print(u)}},rn.prototype.find=function(u){return this._nodes.find(u)},rn.prototype.addNode=function(){if(arguments[0]instanceof As){var u=arguments[0];return this._nodes.addNode(u)}if(arguments[0]instanceof Q){var h=arguments[0];return this._nodes.addNode(h)}},rn.prototype.getNodeIterator=function(){return this._nodes.iterator()},rn.prototype.linkResultDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()},rn.prototype.debugPrintln=function(u){pt.out.println(u)},rn.prototype.isBoundaryNode=function(u,h){var y=this._nodes.find(h);if(y===null)return!1;var w=y.getLabel();return w!==null&&w.getLocation(u)===oe.BOUNDARY},rn.prototype.linkAllDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkAllDirectedEdges()},rn.prototype.matchInSameDirection=function(u,h,y,w){return!!u.equals(y)&&rt.computeOrientation(u,h,w)===rt.COLLINEAR&&on.quadrant(u,h)===on.quadrant(y,w)},rn.prototype.getEdgeEnds=function(){return this._edgeEndList},rn.prototype.debugPrint=function(u){pt.out.print(u)},rn.prototype.getEdgeIterator=function(){return this._edges.iterator()},rn.prototype.findEdgeInSameDirection=function(u,h){for(var y=0;y<this._edges.size();y++){var w=this._edges.get(y),O=w.getCoordinates();if(this.matchInSameDirection(u,h,O[0],O[1])||this.matchInSameDirection(u,h,O[O.length-1],O[O.length-2]))return w}return null},rn.prototype.insertEdge=function(u){this._edges.add(u)},rn.prototype.findEdgeEnd=function(u){for(var h=this.getEdgeEnds().iterator();h.hasNext();){var y=h.next();if(y.getEdge()===u)return y}return null},rn.prototype.addEdges=function(u){for(var h=u.iterator();h.hasNext();){var y=h.next();this._edges.add(y);var w=new Lu(y,!0),O=new Lu(y,!1);w.setSym(O),O.setSym(w),this.add(w),this.add(O)}},rn.prototype.add=function(u){this._nodes.add(u),this._edgeEndList.add(u)},rn.prototype.getNodes=function(){return this._nodes.values()},rn.prototype.findEdge=function(u,h){for(var y=0;y<this._edges.size();y++){var w=this._edges.get(y),O=w.getCoordinates();if(u.equals(O[0])&&h.equals(O[1]))return w}return null},rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.linkResultDirectedEdges=function(u){for(var h=u.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()};var Wi=function(){this._geometryFactory=null,this._shellList=new Pt;var u=arguments[0];this._geometryFactory=u};Wi.prototype.sortShellsAndHoles=function(u,h,y){for(var w=u.iterator();w.hasNext();){var O=w.next();O.isHole()?y.add(O):h.add(O)}},Wi.prototype.computePolygons=function(u){for(var h=new Pt,y=u.iterator();y.hasNext();){var w=y.next().toPolygon(this._geometryFactory);h.add(w)}return h},Wi.prototype.placeFreeHoles=function(u,h){for(var y=h.iterator();y.hasNext();){var w=y.next();if(w.getShell()===null){var O=this.findEdgeRingContaining(w,u);if(O===null)throw new Pa("unable to assign hole to a shell",w.getCoordinate(0));w.setShell(O)}}},Wi.prototype.buildMinimalEdgeRings=function(u,h,y){for(var w=new Pt,O=u.iterator();O.hasNext();){var U=O.next();if(U.getMaxNodeDegree()>2){U.linkDirectedEdgesForMinimalEdgeRings();var J=U.buildMinimalRings(),pe=this.findShell(J);pe!==null?(this.placePolygonHoles(pe,J),h.add(pe)):y.addAll(J)}else w.add(U)}return w},Wi.prototype.containsPoint=function(u){for(var h=this._shellList.iterator();h.hasNext();)if(h.next().containsPoint(u))return!0;return!1},Wi.prototype.buildMaximalEdgeRings=function(u){for(var h=new Pt,y=u.iterator();y.hasNext();){var w=y.next();if(w.isInResult()&&w.getLabel().isArea()&&w.getEdgeRing()===null){var O=new il(w,this._geometryFactory);h.add(O),O.setInResult()}}return h},Wi.prototype.placePolygonHoles=function(u,h){for(var y=h.iterator();y.hasNext();){var w=y.next();w.isHole()&&w.setShell(u)}},Wi.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Wi.prototype.findEdgeRingContaining=function(u,h){for(var y=u.getLinearRing(),w=y.getEnvelopeInternal(),O=y.getCoordinateN(0),U=null,J=null,pe=h.iterator();pe.hasNext();){var Ae=pe.next(),A=Ae.getLinearRing(),l=A.getEnvelopeInternal();U!==null&&(J=U.getLinearRing().getEnvelopeInternal());var v=!1;l.contains(w)&&rt.isPointInRing(O,A.getCoordinates())&&(v=!0),v&&(U===null||J.contains(l))&&(U=Ae)}return U},Wi.prototype.findShell=function(u){for(var h=0,y=null,w=u.iterator();w.hasNext();){var O=w.next();O.isHole()||(y=O,h++)}return ve.isTrue(h<=1,"found two shells in MinimalEdgeRing list"),y},Wi.prototype.add=function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var h=arguments[0],y=arguments[1];rn.linkResultDirectedEdges(y);var w=this.buildMaximalEdgeRings(h),O=new Pt,U=this.buildMinimalEdgeRings(w,this._shellList,O);this.sortShellsAndHoles(U,this._shellList,O),this.placeFreeHoles(this._shellList,O)}},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi};var qa=function(){};qa.prototype.getBounds=function(){},qa.prototype.interfaces_=function(){return[]},qa.prototype.getClass=function(){return qa};var Fi=function(){this._bounds=null,this._item=null;var u=arguments[0],h=arguments[1];this._bounds=u,this._item=h};Fi.prototype.getItem=function(){return this._item},Fi.prototype.getBounds=function(){return this._bounds},Fi.prototype.interfaces_=function(){return[qa,n]},Fi.prototype.getClass=function(){return Fi};var Co=function(){this._size=null,this._items=null,this._size=0,this._items=new Pt,this._items.add(null)};Co.prototype.poll=function(){if(this.isEmpty())return null;var u=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),u},Co.prototype.size=function(){return this._size},Co.prototype.reorder=function(u){for(var h=null,y=this._items.get(u);2*u<=this._size&&((h=2*u)!==this._size&&this._items.get(h+1).compareTo(this._items.get(h))<0&&h++,this._items.get(h).compareTo(y)<0);u=h)this._items.set(u,this._items.get(h));this._items.set(u,y)},Co.prototype.clear=function(){this._size=0,this._items.clear()},Co.prototype.isEmpty=function(){return this._size===0},Co.prototype.add=function(u){this._items.add(null),this._size+=1;var h=this._size;for(this._items.set(0,u);u.compareTo(this._items.get(Math.trunc(h/2)))<0;h/=2)this._items.set(h,this._items.get(Math.trunc(h/2)));this._items.set(h,u)},Co.prototype.interfaces_=function(){return[]},Co.prototype.getClass=function(){return Co};var Zr=function(){};Zr.prototype.visitItem=function(u){},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr};var Wa=function(){};Wa.prototype.insert=function(u,h){},Wa.prototype.remove=function(u,h){},Wa.prototype.query=function(){},Wa.prototype.interfaces_=function(){return[]},Wa.prototype.getClass=function(){return Wa};var si=function(){if(this._childBoundables=new Pt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._level=u}}},Dl={serialVersionUID:{configurable:!0}};si.prototype.getLevel=function(){return this._level},si.prototype.size=function(){return this._childBoundables.size()},si.prototype.getChildBoundables=function(){return this._childBoundables},si.prototype.addChildBoundable=function(u){ve.isTrue(this._bounds===null),this._childBoundables.add(u)},si.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},si.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},si.prototype.interfaces_=function(){return[qa,n]},si.prototype.getClass=function(){return si},Dl.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(si,Dl);var _o=function(){};_o.reverseOrder=function(){return{compare:function(u,h){return h.compareTo(u)}}},_o.min=function(u){return _o.sort(u),u.get(0)},_o.sort=function(u,h){var y=u.toArray();h?gt.sort(y,h):gt.sort(y);for(var w=u.iterator(),O=0,U=y.length;O<U;O++)w.next(),w.set(y[O])},_o.singletonList=function(u){var h=new Pt;return h.add(u),h};var ui=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],h=arguments[1],y=arguments[2];this._boundable1=u,this._boundable2=h,this._itemDistance=y,this._distance=this.distance()};ui.prototype.expandToQueue=function(u,h){var y=ui.isComposite(this._boundable1),w=ui.isComposite(this._boundable2);if(y&&w)return ui.area(this._boundable1)>ui.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,u,h),null):(this.expand(this._boundable2,this._boundable1,u,h),null);if(y)return this.expand(this._boundable1,this._boundable2,u,h),null;if(w)return this.expand(this._boundable2,this._boundable1,u,h),null;throw new N("neither boundable is composite")},ui.prototype.isLeaves=function(){return!(ui.isComposite(this._boundable1)||ui.isComposite(this._boundable2))},ui.prototype.compareTo=function(u){var h=u;return this._distance<h._distance?-1:this._distance>h._distance?1:0},ui.prototype.expand=function(u,h,y,w){for(var O=u.getChildBoundables().iterator();O.hasNext();){var U=O.next(),J=new ui(U,h,this._itemDistance);J.getDistance()<w&&y.add(J)}},ui.prototype.getBoundable=function(u){return u===0?this._boundable1:this._boundable2},ui.prototype.getDistance=function(){return this._distance},ui.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},ui.prototype.interfaces_=function(){return[Z]},ui.prototype.getClass=function(){return ui},ui.area=function(u){return u.getBounds().getArea()},ui.isComposite=function(u){return u instanceof si};var Ci=function u(){if(this._root=null,this._built=!1,this._itemBoundables=new Pt,this._nodeCapacity=null,arguments.length===0){var h=u.DEFAULT_NODE_CAPACITY;this._nodeCapacity=h}else if(arguments.length===1){var y=arguments[0];ve.isTrue(y>1,"Node capacity must be greater than 1"),this._nodeCapacity=y}},fs={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ci.prototype.getNodeCapacity=function(){return this._nodeCapacity},Ci.prototype.lastNode=function(u){return u.get(u.size()-1)},Ci.prototype.size=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var y=h.next();y instanceof si?u+=this.size(y):y instanceof Fi&&(u+=1)}return u}},Ci.prototype.removeItem=function(u,h){for(var y=null,w=u.getChildBoundables().iterator();w.hasNext();){var O=w.next();O instanceof Fi&&O.getItem()===h&&(y=O)}return y!==null&&(u.getChildBoundables().remove(y),!0)},Ci.prototype.itemsTree=function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new Pt:u}if(arguments.length===1){for(var h=arguments[0],y=new Pt,w=h.getChildBoundables().iterator();w.hasNext();){var O=w.next();if(O instanceof si){var U=this.itemsTree(O);U!==null&&y.add(U)}else O instanceof Fi?y.add(O.getItem()):ve.shouldNeverReachHere()}return y.size()<=0?null:y}},Ci.prototype.insert=function(u,h){ve.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Fi(u,h))},Ci.prototype.boundablesAtLevel=function(){if(arguments.length===1){var u=arguments[0],h=new Pt;return this.boundablesAtLevel(u,this._root,h),h}if(arguments.length===3){var y=arguments[0],w=arguments[1],O=arguments[2];if(ve.isTrue(y>-2),w.getLevel()===y)return O.add(w),null;for(var U=w.getChildBoundables().iterator();U.hasNext();){var J=U.next();J instanceof si?this.boundablesAtLevel(y,J,O):(ve.isTrue(J instanceof Fi),y===-1&&O.add(J))}return null}},Ci.prototype.query=function(){if(arguments.length===1){var u=arguments[0];this.build();var h=new Pt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.query(u,this._root,h),h}if(arguments.length===2){var y=arguments[0],w=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),y)&&this.query(y,this._root,w)}else if(arguments.length===3){if(fe(arguments[2],Zr)&&arguments[0]instanceof Object&&arguments[1]instanceof si)for(var O=arguments[0],U=arguments[1],J=arguments[2],pe=U.getChildBoundables(),Ae=0;Ae<pe.size();Ae++){var A=pe.get(Ae);this.getIntersectsOp().intersects(A.getBounds(),O)&&(A instanceof si?this.query(O,A,J):A instanceof Fi?J.visitItem(A.getItem()):ve.shouldNeverReachHere())}else if(fe(arguments[2],$r)&&arguments[0]instanceof Object&&arguments[1]instanceof si)for(var l=arguments[0],v=arguments[1],S=arguments[2],C=v.getChildBoundables(),M=0;M<C.size();M++){var z=C.get(M);this.getIntersectsOp().intersects(z.getBounds(),l)&&(z instanceof si?this.query(l,z,S):z instanceof Fi?S.add(z.getItem()):ve.shouldNeverReachHere())}}},Ci.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Ci.prototype.getRoot=function(){return this.build(),this._root},Ci.prototype.remove=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,h)}if(arguments.length===3){var y=arguments[0],w=arguments[1],O=arguments[2],U=this.removeItem(w,O);if(U)return!0;for(var J=null,pe=w.getChildBoundables().iterator();pe.hasNext();){var Ae=pe.next();if(this.getIntersectsOp().intersects(Ae.getBounds(),y)&&Ae instanceof si&&(U=this.remove(y,Ae,O))){J=Ae;break}}return J!==null&&J.getChildBoundables().isEmpty()&&w.getChildBoundables().remove(J),U}},Ci.prototype.createHigherLevels=function(u,h){ve.isTrue(!u.isEmpty());var y=this.createParentBoundables(u,h+1);return y.size()===1?y.get(0):this.createHigherLevels(y,h+1)},Ci.prototype.depth=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var y=h.next();if(y instanceof si){var w=this.depth(y);w>u&&(u=w)}}return u+1}},Ci.prototype.createParentBoundables=function(u,h){ve.isTrue(!u.isEmpty());var y=new Pt;y.add(this.createNode(h));var w=new Pt(u);_o.sort(w,this.getComparator());for(var O=w.iterator();O.hasNext();){var U=O.next();this.lastNode(y).getChildBoundables().size()===this.getNodeCapacity()&&y.add(this.createNode(h)),this.lastNode(y).addChildBoundable(U)}return y},Ci.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Ci.prototype.interfaces_=function(){return[n]},Ci.prototype.getClass=function(){return Ci},Ci.compareDoubles=function(u,h){return u>h?1:u<h?-1:0},fs.IntersectsOp.get=function(){return Sf},fs.serialVersionUID.get=function(){return-3886435814360241e3},fs.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Ci,fs);var Sf=function(){},Ru=function(){};Ru.prototype.distance=function(u,h){},Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru};var Nc=function(u){function h(w){w=w||h.DEFAULT_NODE_CAPACITY,u.call(this,w)}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return h.prototype.createParentBoundablesFromVerticalSlices=function(w,O){ve.isTrue(w.length>0);for(var U=new Pt,J=0;J<w.length;J++)U.addAll(this.createParentBoundablesFromVerticalSlice(w[J],O));return U},h.prototype.createNode=function(w){return new ou(w)},h.prototype.size=function(){return arguments.length===0?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},h.prototype.insert=function(){if(arguments.length!==2)return u.prototype.insert.apply(this,arguments);var w=arguments[0],O=arguments[1];if(w.isNull())return null;u.prototype.insert.call(this,w,O)},h.prototype.getIntersectsOp=function(){return h.intersectsOp},h.prototype.verticalSlices=function(w,O){for(var U=Math.trunc(Math.ceil(w.size()/O)),J=new Array(O).fill(null),pe=w.iterator(),Ae=0;Ae<O;Ae++){J[Ae]=new Pt;for(var A=0;pe.hasNext()&&A<U;){var l=pe.next();J[Ae].add(l),A++}}return J},h.prototype.query=function(){if(arguments.length===1){var w=arguments[0];return u.prototype.query.call(this,w)}if(arguments.length===2){var O=arguments[0],U=arguments[1];u.prototype.query.call(this,O,U)}else if(arguments.length===3){if(fe(arguments[2],Zr)&&arguments[0]instanceof Object&&arguments[1]instanceof si){var J=arguments[0],pe=arguments[1],Ae=arguments[2];u.prototype.query.call(this,J,pe,Ae)}else if(fe(arguments[2],$r)&&arguments[0]instanceof Object&&arguments[1]instanceof si){var A=arguments[0],l=arguments[1],v=arguments[2];u.prototype.query.call(this,A,l,v)}}},h.prototype.getComparator=function(){return h.yComparator},h.prototype.createParentBoundablesFromVerticalSlice=function(w,O){return u.prototype.createParentBoundables.call(this,w,O)},h.prototype.remove=function(){if(arguments.length===2){var w=arguments[0],O=arguments[1];return u.prototype.remove.call(this,w,O)}return u.prototype.remove.apply(this,arguments)},h.prototype.depth=function(){return arguments.length===0?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},h.prototype.createParentBoundables=function(w,O){ve.isTrue(!w.isEmpty());var U=Math.trunc(Math.ceil(w.size()/this.getNodeCapacity())),J=new Pt(w);_o.sort(J,h.xComparator);var pe=this.verticalSlices(J,Math.trunc(Math.ceil(Math.sqrt(U))));return this.createParentBoundablesFromVerticalSlices(pe,O)},h.prototype.nearestNeighbour=function(){if(arguments.length===1){if(fe(arguments[0],Ru)){var w=arguments[0],O=new ui(this.getRoot(),this.getRoot(),w);return this.nearestNeighbour(O)}if(arguments[0]instanceof ui){var U=arguments[0];return this.nearestNeighbour(U,B.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof h&&fe(arguments[1],Ru)){var J=arguments[0],pe=arguments[1],Ae=new ui(this.getRoot(),J.getRoot(),pe);return this.nearestNeighbour(Ae)}if(arguments[0]instanceof ui&&typeof arguments[1]=="number"){var A=arguments[0],l=arguments[1],v=null,S=new Co;for(S.add(A);!S.isEmpty()&&l>0;){var C=S.poll(),M=C.getDistance();if(M>=l)break;C.isLeaves()?(l=M,v=C):C.expandToQueue(S,l)}return[v.getBoundable(0).getItem(),v.getBoundable(1).getItem()]}}else if(arguments.length===3){var z=arguments[0],V=arguments[1],X=arguments[2],ee=new Fi(z,V),se=new ui(this.getRoot(),ee,X);return this.nearestNeighbour(se)[0]}},h.prototype.interfaces_=function(){return[Wa,n]},h.prototype.getClass=function(){return h},h.centreX=function(w){return h.avg(w.getMinX(),w.getMaxX())},h.avg=function(w,O){return(w+O)/2},h.centreY=function(w){return h.avg(w.getMinY(),w.getMaxY())},y.STRtreeNode.get=function(){return ou},y.serialVersionUID.get=function(){return 0x39920f7d5f261e0},y.xComparator.get=function(){return{interfaces_:function(){return[W]},compare:function(w,O){return u.compareDoubles(h.centreX(w.getBounds()),h.centreX(O.getBounds()))}}},y.yComparator.get=function(){return{interfaces_:function(){return[W]},compare:function(w,O){return u.compareDoubles(h.centreY(w.getBounds()),h.centreY(O.getBounds()))}}},y.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(w,O){return w.intersects(O)}}},y.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(h,y),h}(Ci),ou=function(u){function h(){var y=arguments[0];u.call(this,y)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.computeBounds=function(){for(var y=null,w=this.getChildBoundables().iterator();w.hasNext();){var O=w.next();y===null?y=new vt(O.getBounds()):y.expandToInclude(O.getBounds())}return y},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(si),Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.relativeSign=function(u,h){return u<h?-1:u>h?1:0},Ii.compare=function(u,h,y){if(h.equals2D(y))return 0;var w=Ii.relativeSign(h.x,y.x),O=Ii.relativeSign(h.y,y.y);switch(u){case 0:return Ii.compareValue(w,O);case 1:return Ii.compareValue(O,w);case 2:return Ii.compareValue(O,-w);case 3:return Ii.compareValue(-w,O);case 4:return Ii.compareValue(-w,-O);case 5:return Ii.compareValue(-O,-w);case 6:return Ii.compareValue(-O,w);case 7:return Ii.compareValue(w,-O)}return ve.shouldNeverReachHere("invalid octant value"),0},Ii.compareValue=function(u,h){return u<0?-1:u>0?1:h<0?-1:h>0?1:0};var ao=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var u=arguments[0],h=arguments[1],y=arguments[2],w=arguments[3];this._segString=u,this.coord=new Q(h),this.segmentIndex=y,this._segmentOctant=w,this._isInterior=!h.equals2D(u.getCoordinate(y))};ao.prototype.getCoordinate=function(){return this.coord},ao.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex)},ao.prototype.compareTo=function(u){var h=u;return this.segmentIndex<h.segmentIndex?-1:this.segmentIndex>h.segmentIndex?1:this.coord.equals2D(h.coord)?0:Ii.compare(this._segmentOctant,this.coord,h.coord)},ao.prototype.isEndPoint=function(u){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===u},ao.prototype.isInterior=function(){return this._isInterior},ao.prototype.interfaces_=function(){return[Z]},ao.prototype.getClass=function(){return ao};var ri=function(){this._nodeMap=new P,this._edge=null;var u=arguments[0];this._edge=u};ri.prototype.getSplitCoordinates=function(){var u=new Ne;this.addEndpoints();for(var h=this.iterator(),y=h.next();h.hasNext();){var w=h.next();this.addEdgeCoordinates(y,w,u),y=w}return u.toCoordinateArray()},ri.prototype.addCollapsedNodes=function(){var u=new Pt;this.findCollapsesFromInsertedNodes(u),this.findCollapsesFromExistingVertices(u);for(var h=u.iterator();h.hasNext();){var y=h.next().intValue();this.add(this._edge.getCoordinate(y),y)}},ri.prototype.print=function(u){u.println("Intersections:");for(var h=this.iterator();h.hasNext();)h.next().print(u)},ri.prototype.findCollapsesFromExistingVertices=function(u){for(var h=0;h<this._edge.size()-2;h++){var y=this._edge.getCoordinate(h),w=this._edge.getCoordinate(h+2);y.equals2D(w)&&u.add(new ie(h+1))}},ri.prototype.addEdgeCoordinates=function(u,h,y){var w=this._edge.getCoordinate(h.segmentIndex),O=h.isInterior()||!h.coord.equals2D(w);y.add(new Q(u.coord),!1);for(var U=u.segmentIndex+1;U<=h.segmentIndex;U++)y.add(this._edge.getCoordinate(U));O&&y.add(new Q(h.coord))},ri.prototype.iterator=function(){return this._nodeMap.values().iterator()},ri.prototype.addSplitEdges=function(u){this.addEndpoints(),this.addCollapsedNodes();for(var h=this.iterator(),y=h.next();h.hasNext();){var w=h.next(),O=this.createSplitEdge(y,w);u.add(O),y=w}},ri.prototype.findCollapseIndex=function(u,h,y){if(!u.coord.equals2D(h.coord))return!1;var w=h.segmentIndex-u.segmentIndex;return h.isInterior()||w--,w===1&&(y[0]=u.segmentIndex+1,!0)},ri.prototype.findCollapsesFromInsertedNodes=function(u){for(var h=new Array(1).fill(null),y=this.iterator(),w=y.next();y.hasNext();){var O=y.next();this.findCollapseIndex(w,O,h)&&u.add(new ie(h[0])),w=O}},ri.prototype.getEdge=function(){return this._edge},ri.prototype.addEndpoints=function(){var u=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(u),u)},ri.prototype.createSplitEdge=function(u,h){var y=h.segmentIndex-u.segmentIndex+2,w=this._edge.getCoordinate(h.segmentIndex),O=h.isInterior()||!h.coord.equals2D(w);O||y--;var U=new Array(y).fill(null),J=0;U[J++]=new Q(u.coord);for(var pe=u.segmentIndex+1;pe<=h.segmentIndex;pe++)U[J++]=this._edge.getCoordinate(pe);return O&&(U[J]=new Q(h.coord)),new Zn(U,this._edge.getData())},ri.prototype.add=function(u,h){var y=new ao(this._edge,u,h,this._edge.getSegmentOctant(h)),w=this._nodeMap.get(y);return w!==null?(ve.isTrue(w.coord.equals2D(u),"Found equal nodes with different coordinates"),w):(this._nodeMap.put(y,y),y)},ri.prototype.checkSplitEdgesCorrectness=function(u){var h=this._edge.getCoordinates(),y=u.get(0).getCoordinate(0);if(!y.equals2D(h[0]))throw new ot("bad split edge start point at "+y);var w=u.get(u.size()-1).getCoordinates(),O=w[w.length-1];if(!O.equals2D(h[h.length-1]))throw new ot("bad split edge end point at "+O)},ri.prototype.interfaces_=function(){return[]},ri.prototype.getClass=function(){return ri};var Cs=function(){};Cs.prototype.interfaces_=function(){return[]},Cs.prototype.getClass=function(){return Cs},Cs.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1];if(u===0&&h===0)throw new N("Cannot compute the octant for point ( "+u+", "+h+" )");var y=Math.abs(u),w=Math.abs(h);return u>=0?h>=0?y>=w?0:1:y>=w?7:6:h>=0?y>=w?3:2:y>=w?4:5}if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var O=arguments[0],U=arguments[1],J=U.x-O.x,pe=U.y-O.y;if(J===0&&pe===0)throw new N("Cannot compute the octant for two identical points "+O);return Cs.octant(J,pe)}};var Aa=function(){};Aa.prototype.getCoordinates=function(){},Aa.prototype.size=function(){},Aa.prototype.getCoordinate=function(u){},Aa.prototype.isClosed=function(){},Aa.prototype.setData=function(u){},Aa.prototype.getData=function(){},Aa.prototype.interfaces_=function(){return[]},Aa.prototype.getClass=function(){return Aa};var ol=function(){};ol.prototype.addIntersection=function(u,h){},ol.prototype.interfaces_=function(){return[Aa]},ol.prototype.getClass=function(){return ol};var Zn=function(){this._nodeList=new ri(this),this._pts=null,this._data=null;var u=arguments[0],h=arguments[1];this._pts=u,this._data=h};Zn.prototype.getCoordinates=function(){return this._pts},Zn.prototype.size=function(){return this._pts.length},Zn.prototype.getCoordinate=function(u){return this._pts[u]},Zn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zn.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))},Zn.prototype.setData=function(u){this._data=u},Zn.prototype.safeOctant=function(u,h){return u.equals2D(h)?0:Cs.octant(u,h)},Zn.prototype.getData=function(){return this._data},Zn.prototype.addIntersection=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];this.addIntersectionNode(u,h)}else if(arguments.length===4){var y=arguments[0],w=arguments[1],O=arguments[3],U=new Q(y.getIntersection(O));this.addIntersection(U,w)}},Zn.prototype.toString=function(){return un.toLineString(new Yn(this._pts))},Zn.prototype.getNodeList=function(){return this._nodeList},Zn.prototype.addIntersectionNode=function(u,h){var y=h,w=y+1;if(w<this._pts.length){var O=this._pts[w];u.equals2D(O)&&(y=w)}return this._nodeList.add(u,y)},Zn.prototype.addIntersections=function(u,h,y){for(var w=0;w<u.getIntersectionNum();w++)this.addIntersection(u,h,y,w)},Zn.prototype.interfaces_=function(){return[ol]},Zn.prototype.getClass=function(){return Zn},Zn.getNodedSubstrings=function(){if(arguments.length===1){var u=arguments[0],h=new Pt;return Zn.getNodedSubstrings(u,h),h}if(arguments.length===2)for(var y=arguments[0],w=arguments[1],O=y.iterator();O.hasNext();)O.next().getNodeList().addSplitEdges(w)};var cr=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Q,this.p1=new Q;else if(arguments.length===1){var u=arguments[0];this.p0=new Q(u.p0),this.p1=new Q(u.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var h=arguments[0],y=arguments[1],w=arguments[2],O=arguments[3];this.p0=new Q(h,y),this.p1=new Q(w,O)}},Pf={serialVersionUID:{configurable:!0}};cr.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},cr.prototype.orientationIndex=function(){if(arguments[0]instanceof cr){var u=arguments[0],h=rt.orientationIndex(this.p0,this.p1,u.p0),y=rt.orientationIndex(this.p0,this.p1,u.p1);return h>=0&&y>=0||h<=0&&y<=0?Math.max(h,y):0}if(arguments[0]instanceof Q){var w=arguments[0];return rt.orientationIndex(this.p0,this.p1,w)}},cr.prototype.toGeometry=function(u){return u.createLineString([this.p0,this.p1])},cr.prototype.isVertical=function(){return this.p0.x===this.p1.x},cr.prototype.equals=function(u){if(!(u instanceof cr))return!1;var h=u;return this.p0.equals(h.p0)&&this.p1.equals(h.p1)},cr.prototype.intersection=function(u){var h=new Ke;return h.computeIntersection(this.p0,this.p1,u.p0,u.p1),h.hasIntersection()?h.getIntersection(0):null},cr.prototype.project=function(){if(arguments[0]instanceof Q){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new Q(u);var h=this.projectionFactor(u),y=new Q;return y.x=this.p0.x+h*(this.p1.x-this.p0.x),y.y=this.p0.y+h*(this.p1.y-this.p0.y),y}if(arguments[0]instanceof cr){var w=arguments[0],O=this.projectionFactor(w.p0),U=this.projectionFactor(w.p1);if(O>=1&&U>=1||O<=0&&U<=0)return null;var J=this.project(w.p0);O<0&&(J=this.p0),O>1&&(J=this.p1);var pe=this.project(w.p1);return U<0&&(pe=this.p0),U>1&&(pe=this.p1),new cr(J,pe)}},cr.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},cr.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},cr.prototype.getCoordinate=function(u){return u===0?this.p0:this.p1},cr.prototype.distancePerpendicular=function(u){return rt.distancePointLinePerpendicular(u,this.p0,this.p1)},cr.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},cr.prototype.midPoint=function(){return cr.midPoint(this.p0,this.p1)},cr.prototype.projectionFactor=function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var h=this.p1.x-this.p0.x,y=this.p1.y-this.p0.y,w=h*h+y*y;return w<=0?B.NaN:((u.x-this.p0.x)*h+(u.y-this.p0.y)*y)/w},cr.prototype.closestPoints=function(u){var h=this.intersection(u);if(h!==null)return[h,h];var y=new Array(2).fill(null),w=B.MAX_VALUE,O=null,U=this.closestPoint(u.p0);w=U.distance(u.p0),y[0]=U,y[1]=u.p0;var J=this.closestPoint(u.p1);(O=J.distance(u.p1))<w&&(w=O,y[0]=J,y[1]=u.p1);var pe=u.closestPoint(this.p0);(O=pe.distance(this.p0))<w&&(w=O,y[0]=this.p0,y[1]=pe);var Ae=u.closestPoint(this.p1);return(O=Ae.distance(this.p1))<w&&(w=O,y[0]=this.p1,y[1]=Ae),y},cr.prototype.closestPoint=function(u){var h=this.projectionFactor(u);return h>0&&h<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1},cr.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},cr.prototype.getLength=function(){return this.p0.distance(this.p1)},cr.prototype.compareTo=function(u){var h=u,y=this.p0.compareTo(h.p0);return y!==0?y:this.p1.compareTo(h.p1)},cr.prototype.reverse=function(){var u=this.p0;this.p0=this.p1,this.p1=u},cr.prototype.equalsTopo=function(u){return this.p0.equals(u.p0)&&(this.p1.equals(u.p1)||this.p0.equals(u.p1))&&this.p1.equals(u.p0)},cr.prototype.lineIntersection=function(u){try{return Ot.intersection(this.p0,this.p1,u.p0,u.p1)}catch(h){if(!(h instanceof Lt))throw h}return null},cr.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},cr.prototype.pointAlongOffset=function(u,h){var y=this.p0.x+u*(this.p1.x-this.p0.x),w=this.p0.y+u*(this.p1.y-this.p0.y),O=this.p1.x-this.p0.x,U=this.p1.y-this.p0.y,J=Math.sqrt(O*O+U*U),pe=0,Ae=0;if(h!==0){if(J<=0)throw new Error("Cannot compute offset from zero-length line segment");pe=h*O/J,Ae=h*U/J}return new Q(y-Ae,w+pe)},cr.prototype.setCoordinates=function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var h=arguments[0],y=arguments[1];this.p0.x=h.x,this.p0.y=h.y,this.p1.x=y.x,this.p1.y=y.y}},cr.prototype.segmentFraction=function(u){var h=this.projectionFactor(u);return h<0?h=0:(h>1||B.isNaN(h))&&(h=1),h},cr.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},cr.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},cr.prototype.distance=function(){if(arguments[0]instanceof cr){var u=arguments[0];return rt.distanceLineLine(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof Q){var h=arguments[0];return rt.distancePointLine(h,this.p0,this.p1)}},cr.prototype.pointAlong=function(u){var h=new Q;return h.x=this.p0.x+u*(this.p1.x-this.p0.x),h.y=this.p0.y+u*(this.p1.y-this.p0.y),h},cr.prototype.hashCode=function(){var u=B.doubleToLongBits(this.p0.x);u^=31*B.doubleToLongBits(this.p0.y);var h=Math.trunc(u)^Math.trunc(u>>32),y=B.doubleToLongBits(this.p1.x);return y^=31*B.doubleToLongBits(this.p1.y),h^(Math.trunc(y)^Math.trunc(y>>32))},cr.prototype.interfaces_=function(){return[Z,n]},cr.prototype.getClass=function(){return cr},cr.midPoint=function(u,h){return new Q((u.x+h.x)/2,(u.y+h.y)/2)},Pf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(cr,Pf);var al=function(){this.tempEnv1=new vt,this.tempEnv2=new vt,this._overlapSeg1=new cr,this._overlapSeg2=new cr};al.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var u=arguments[0],h=arguments[1],y=arguments[2],w=arguments[3];u.getLineSegment(h,this._overlapSeg1),y.getLineSegment(w,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al};var ki=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var u=arguments[0],h=arguments[1],y=arguments[2],w=arguments[3];this._pts=u,this._start=h,this._end=y,this._context=w};ki.prototype.getLineSegment=function(u,h){h.p0=this._pts[u],h.p1=this._pts[u+1]},ki.prototype.computeSelect=function(u,h,y,w){var O=this._pts[h],U=this._pts[y];if(w.tempEnv1.init(O,U),y-h==1)return w.select(this,h),null;if(!u.intersects(w.tempEnv1))return null;var J=Math.trunc((h+y)/2);h<J&&this.computeSelect(u,h,J,w),J<y&&this.computeSelect(u,J,y,w)},ki.prototype.getCoordinates=function(){for(var u=new Array(this._end-this._start+1).fill(null),h=0,y=this._start;y<=this._end;y++)u[h++]=this._pts[y];return u},ki.prototype.computeOverlaps=function(u,h){this.computeOverlapsInternal(this._start,this._end,u,u._start,u._end,h)},ki.prototype.setId=function(u){this._id=u},ki.prototype.select=function(u,h){this.computeSelect(u,this._start,this._end,h)},ki.prototype.getEnvelope=function(){if(this._env===null){var u=this._pts[this._start],h=this._pts[this._end];this._env=new vt(u,h)}return this._env},ki.prototype.getEndIndex=function(){return this._end},ki.prototype.getStartIndex=function(){return this._start},ki.prototype.getContext=function(){return this._context},ki.prototype.getId=function(){return this._id},ki.prototype.computeOverlapsInternal=function(u,h,y,w,O,U){var J=this._pts[u],pe=this._pts[h],Ae=y._pts[w],A=y._pts[O];if(h-u==1&&O-w==1)return U.overlap(this,u,y,w),null;if(U.tempEnv1.init(J,pe),U.tempEnv2.init(Ae,A),!U.tempEnv1.intersects(U.tempEnv2))return null;var l=Math.trunc((u+h)/2),v=Math.trunc((w+O)/2);u<l&&(w<v&&this.computeOverlapsInternal(u,l,y,w,v,U),v<O&&this.computeOverlapsInternal(u,l,y,v,O,U)),l<h&&(w<v&&this.computeOverlapsInternal(l,h,y,w,v,U),v<O&&this.computeOverlapsInternal(l,h,y,v,O,U))},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki};var Ca=function(){};Ca.prototype.interfaces_=function(){return[]},Ca.prototype.getClass=function(){return Ca},Ca.getChainStartIndices=function(u){var h=0,y=new Pt;y.add(new ie(h));do{var w=Ca.findChainEnd(u,h);y.add(new ie(w)),h=w}while(h<u.length-1);return Ca.toIntArray(y)},Ca.findChainEnd=function(u,h){for(var y=h;y<u.length-1&&u[y].equals2D(u[y+1]);)y++;if(y>=u.length-1)return u.length-1;for(var w=on.quadrant(u[y],u[y+1]),O=h+1;O<u.length&&!(!u[O-1].equals2D(u[O])&&on.quadrant(u[O-1],u[O])!==w);)O++;return O-1},Ca.getChains=function(){if(arguments.length===1){var u=arguments[0];return Ca.getChains(u,null)}if(arguments.length===2){for(var h=arguments[0],y=arguments[1],w=new Pt,O=Ca.getChainStartIndices(h),U=0;U<O.length-1;U++){var J=new ki(h,O[U],O[U+1],y);w.add(J)}return w}},Ca.toIntArray=function(u){for(var h=new Array(u.size()).fill(null),y=0;y<h.length;y++)h[y]=u.get(y).intValue();return h};var Ia=function(){};Ia.prototype.computeNodes=function(u){},Ia.prototype.getNodedSubstrings=function(){},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia};var Is=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setSegmentIntersector(u)}}};Is.prototype.setSegmentIntersector=function(u){this._segInt=u},Is.prototype.interfaces_=function(){return[Ia]},Is.prototype.getClass=function(){return Is};var Fc=function(u){function h(w){w?u.call(this,w):u.call(this),this._monoChains=new Pt,this._index=new Nc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}u&&(h.__proto__=u),(h.prototype=Object.create(u&&u.prototype)).constructor=h;var y={SegmentOverlapAction:{configurable:!0}};return h.prototype.getMonotoneChains=function(){return this._monoChains},h.prototype.getNodedSubstrings=function(){return Zn.getNodedSubstrings(this._nodedSegStrings)},h.prototype.getIndex=function(){return this._index},h.prototype.add=function(w){for(var O=Ca.getChains(w.getCoordinates(),w).iterator();O.hasNext();){var U=O.next();U.setId(this._idCounter++),this._index.insert(U.getEnvelope(),U),this._monoChains.add(U)}},h.prototype.computeNodes=function(w){this._nodedSegStrings=w;for(var O=w.iterator();O.hasNext();)this.add(O.next());this.intersectChains()},h.prototype.intersectChains=function(){for(var w=new $c(this._segInt),O=this._monoChains.iterator();O.hasNext();)for(var U=O.next(),J=this._index.query(U.getEnvelope()).iterator();J.hasNext();){var pe=J.next();if(pe.getId()>U.getId()&&(U.computeOverlaps(pe,w),this._nOverlaps++),this._segInt.isDone())return null}},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},y.SegmentOverlapAction.get=function(){return $c},Object.defineProperties(h,y),h}(Is),$c=function(u){function h(){u.call(this),this._si=null;var y=arguments[0];this._si=y}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.overlap=function(){if(arguments.length!==4)return u.prototype.overlap.apply(this,arguments);var y=arguments[0],w=arguments[1],O=arguments[2],U=arguments[3],J=y.getContext(),pe=O.getContext();this._si.processIntersections(J,w,pe,U)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(al),ar=function u(){if(this._quadrantSegments=u.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=u.CAP_ROUND,this._joinStyle=u.JOIN_ROUND,this._mitreLimit=u.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=u.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var h=arguments[0];this.setQuadrantSegments(h)}else if(arguments.length===2){var y=arguments[0],w=arguments[1];this.setQuadrantSegments(y),this.setEndCapStyle(w)}else if(arguments.length===4){var O=arguments[0],U=arguments[1],J=arguments[2],pe=arguments[3];this.setQuadrantSegments(O),this.setEndCapStyle(U),this.setJoinStyle(J),this.setMitreLimit(pe)}}},Oa={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};ar.prototype.getEndCapStyle=function(){return this._endCapStyle},ar.prototype.isSingleSided=function(){return this._isSingleSided},ar.prototype.setQuadrantSegments=function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=ar.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=ar.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==ar.JOIN_ROUND&&(this._quadrantSegments=ar.DEFAULT_QUADRANT_SEGMENTS)},ar.prototype.getJoinStyle=function(){return this._joinStyle},ar.prototype.setJoinStyle=function(u){this._joinStyle=u},ar.prototype.setSimplifyFactor=function(u){this._simplifyFactor=u<0?0:u},ar.prototype.getSimplifyFactor=function(){return this._simplifyFactor},ar.prototype.getQuadrantSegments=function(){return this._quadrantSegments},ar.prototype.setEndCapStyle=function(u){this._endCapStyle=u},ar.prototype.getMitreLimit=function(){return this._mitreLimit},ar.prototype.setMitreLimit=function(u){this._mitreLimit=u},ar.prototype.setSingleSided=function(u){this._isSingleSided=u},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ar.bufferDistanceError=function(u){var h=Math.PI/2/u;return 1-Math.cos(h/2)},Oa.CAP_ROUND.get=function(){return 1},Oa.CAP_FLAT.get=function(){return 2},Oa.CAP_SQUARE.get=function(){return 3},Oa.JOIN_ROUND.get=function(){return 1},Oa.JOIN_MITRE.get=function(){return 2},Oa.JOIN_BEVEL.get=function(){return 3},Oa.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Oa.DEFAULT_MITRE_LIMIT.get=function(){return 5},Oa.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(ar,Oa);var pi=function(u){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=rt.COUNTERCLOCKWISE,this._inputLine=u||null},Nl={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};pi.prototype.isDeletable=function(u,h,y,w){var O=this._inputLine[u],U=this._inputLine[h],J=this._inputLine[y];return!!this.isConcave(O,U,J)&&!!this.isShallow(O,U,J,w)&&this.isShallowSampled(O,U,u,y,w)},pi.prototype.deleteShallowConcavities=function(){for(var u=1,h=this.findNextNonDeletedIndex(u),y=this.findNextNonDeletedIndex(h),w=!1;y<this._inputLine.length;){var O=!1;this.isDeletable(u,h,y,this._distanceTol)&&(this._isDeleted[h]=pi.DELETE,O=!0,w=!0),u=O?y:h,h=this.findNextNonDeletedIndex(u),y=this.findNextNonDeletedIndex(h)}return w},pi.prototype.isShallowConcavity=function(u,h,y,w){return rt.computeOrientation(u,h,y)!==this._angleOrientation?!1:rt.distancePointLine(h,u,y)<w},pi.prototype.isShallowSampled=function(u,h,y,w,O){var U=Math.trunc((w-y)/pi.NUM_PTS_TO_CHECK);U<=0&&(U=1);for(var J=y;J<w;J+=U)if(!this.isShallow(u,h,this._inputLine[J],O))return!1;return!0},pi.prototype.isConcave=function(u,h,y){var w=rt.computeOrientation(u,h,y)===this._angleOrientation;return w},pi.prototype.simplify=function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=rt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var h=!1;do h=this.deleteShallowConcavities();while(h);return this.collapseLine()},pi.prototype.findNextNonDeletedIndex=function(u){for(var h=u+1;h<this._inputLine.length&&this._isDeleted[h]===pi.DELETE;)h++;return h},pi.prototype.isShallow=function(u,h,y,w){return rt.distancePointLine(h,u,y)<w},pi.prototype.collapseLine=function(){for(var u=new Ne,h=0;h<this._inputLine.length;h++)this._isDeleted[h]!==pi.DELETE&&u.add(this._inputLine[h]);return u.toCoordinateArray()},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},pi.simplify=function(u,h){return new pi(u).simplify(h)},Nl.INIT.get=function(){return 0},Nl.DELETE.get=function(){return 1},Nl.KEEP.get=function(){return 1},Nl.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(pi,Nl);var $i=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Pt},xh={COORDINATE_ARRAY_TYPE:{configurable:!0}};$i.prototype.getCoordinates=function(){return this._ptList.toArray($i.COORDINATE_ARRAY_TYPE)},$i.prototype.setPrecisionModel=function(u){this._precisionModel=u},$i.prototype.addPt=function(u){var h=new Q(u);if(this._precisionModel.makePrecise(h),this.isRedundant(h))return null;this._ptList.add(h)},$i.prototype.revere=function(){},$i.prototype.addPts=function(u,h){if(h)for(var y=0;y<u.length;y++)this.addPt(u[y]);else for(var w=u.length-1;w>=0;w--)this.addPt(u[w])},$i.prototype.isRedundant=function(u){if(this._ptList.size()<1)return!1;var h=this._ptList.get(this._ptList.size()-1);return u.distance(h)<this._minimimVertexDistance},$i.prototype.toString=function(){return new zr().createLineString(this.getCoordinates()).toString()},$i.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var u=new Q(this._ptList.get(0)),h=this._ptList.get(this._ptList.size()-1);if(u.equals(h))return null;this._ptList.add(u)},$i.prototype.setMinimumVertexDistance=function(u){this._minimimVertexDistance=u},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},xh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties($i,xh);var nn=function(){},ku={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};nn.prototype.interfaces_=function(){return[]},nn.prototype.getClass=function(){return nn},nn.toDegrees=function(u){return 180*u/Math.PI},nn.normalize=function(u){for(;u>Math.PI;)u-=nn.PI_TIMES_2;for(;u<=-Math.PI;)u+=nn.PI_TIMES_2;return u},nn.angle=function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var h=arguments[0],y=arguments[1],w=y.x-h.x,O=y.y-h.y;return Math.atan2(O,w)}},nn.isAcute=function(u,h,y){var w=u.x-h.x,O=u.y-h.y;return w*(y.x-h.x)+O*(y.y-h.y)>0},nn.isObtuse=function(u,h,y){var w=u.x-h.x,O=u.y-h.y;return w*(y.x-h.x)+O*(y.y-h.y)<0},nn.interiorAngle=function(u,h,y){var w=nn.angle(h,u),O=nn.angle(h,y);return Math.abs(O-w)},nn.normalizePositive=function(u){if(u<0){for(;u<0;)u+=nn.PI_TIMES_2;u>=nn.PI_TIMES_2&&(u=0)}else{for(;u>=nn.PI_TIMES_2;)u-=nn.PI_TIMES_2;u<0&&(u=0)}return u},nn.angleBetween=function(u,h,y){var w=nn.angle(h,u),O=nn.angle(h,y);return nn.diff(w,O)},nn.diff=function(u,h){var y=null;return(y=u<h?h-u:u-h)>Math.PI&&(y=2*Math.PI-y),y},nn.toRadians=function(u){return u*Math.PI/180},nn.getTurn=function(u,h){var y=Math.sin(h-u);return y>0?nn.COUNTERCLOCKWISE:y<0?nn.CLOCKWISE:nn.NONE},nn.angleBetweenOriented=function(u,h,y){var w=nn.angle(h,u),O=nn.angle(h,y)-w;return O<=-Math.PI?O+nn.PI_TIMES_2:O>Math.PI?O-nn.PI_TIMES_2:O},ku.PI_TIMES_2.get=function(){return 2*Math.PI},ku.PI_OVER_2.get=function(){return Math.PI/2},ku.PI_OVER_4.get=function(){return Math.PI/4},ku.COUNTERCLOCKWISE.get=function(){return rt.COUNTERCLOCKWISE},ku.CLOCKWISE.get=function(){return rt.CLOCKWISE},ku.NONE.get=function(){return rt.COLLINEAR},Object.defineProperties(nn,ku);var Qn=function u(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new cr,this._seg1=new cr,this._offset0=new cr,this._offset1=new cr,this._side=0,this._hasNarrowConcaveAngle=!1;var h=arguments[0],y=arguments[1],w=arguments[2];this._precisionModel=h,this._bufParams=y,this._li=new Ke,this._filletAngleQuantum=Math.PI/2/y.getQuadrantSegments(),y.getQuadrantSegments()>=8&&y.getJoinStyle()===ar.JOIN_ROUND&&(this._closingSegLengthFactor=u.MAX_CLOSING_SEG_LEN_FACTOR),this.init(w)},li={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Qn.prototype.addNextSegment=function(u,h){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var y=rt.computeOrientation(this._s0,this._s1,this._s2),w=y===rt.CLOCKWISE&&this._side===It.LEFT||y===rt.COUNTERCLOCKWISE&&this._side===It.RIGHT;y===0?this.addCollinear(h):w?this.addOutsideTurn(y,h):this.addInsideTurn(y,h)},Qn.prototype.addLineEndCap=function(u,h){var y=new cr(u,h),w=new cr;this.computeOffsetSegment(y,It.LEFT,this._distance,w);var O=new cr;this.computeOffsetSegment(y,It.RIGHT,this._distance,O);var U=h.x-u.x,J=h.y-u.y,pe=Math.atan2(J,U);switch(this._bufParams.getEndCapStyle()){case ar.CAP_ROUND:this._segList.addPt(w.p1),this.addFilletArc(h,pe+Math.PI/2,pe-Math.PI/2,rt.CLOCKWISE,this._distance),this._segList.addPt(O.p1);break;case ar.CAP_FLAT:this._segList.addPt(w.p1),this._segList.addPt(O.p1);break;case ar.CAP_SQUARE:var Ae=new Q;Ae.x=Math.abs(this._distance)*Math.cos(pe),Ae.y=Math.abs(this._distance)*Math.sin(pe);var A=new Q(w.p1.x+Ae.x,w.p1.y+Ae.y),l=new Q(O.p1.x+Ae.x,O.p1.y+Ae.y);this._segList.addPt(A),this._segList.addPt(l)}},Qn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Qn.prototype.addMitreJoin=function(u,h,y,w){var O=!0,U=null;try{U=Ot.intersection(h.p0,h.p1,y.p0,y.p1),(w<=0?1:U.distance(u)/Math.abs(w))>this._bufParams.getMitreLimit()&&(O=!1)}catch(J){if(!(J instanceof Lt))throw J;U=new Q(0,0),O=!1}O?this._segList.addPt(U):this.addLimitedMitreJoin(h,y,w,this._bufParams.getMitreLimit())},Qn.prototype.addFilletCorner=function(u,h,y,w,O){var U=h.x-u.x,J=h.y-u.y,pe=Math.atan2(J,U),Ae=y.x-u.x,A=y.y-u.y,l=Math.atan2(A,Ae);w===rt.CLOCKWISE?pe<=l&&(pe+=2*Math.PI):pe>=l&&(pe-=2*Math.PI),this._segList.addPt(h),this.addFilletArc(u,pe,l,w,O),this._segList.addPt(y)},Qn.prototype.addOutsideTurn=function(u,h){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Qn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===ar.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ar.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(h&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))},Qn.prototype.createSquare=function(u){this._segList.addPt(new Q(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new Q(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new Q(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new Q(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()},Qn.prototype.addSegments=function(u,h){this._segList.addPts(u,h)},Qn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Qn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Qn.prototype.initSideSegments=function(u,h,y){this._s1=u,this._s2=h,this._side=y,this._seg1.setCoordinates(u,h),this.computeOffsetSegment(this._seg1,y,this._distance,this._offset1)},Qn.prototype.addLimitedMitreJoin=function(u,h,y,w){var O=this._seg0.p1,U=nn.angle(O,this._seg0.p0),J=nn.angleBetweenOriented(this._seg0.p0,O,this._seg1.p1)/2,pe=nn.normalize(U+J),Ae=nn.normalize(pe+Math.PI),A=w*y,l=y-A*Math.abs(Math.sin(J)),v=O.x+A*Math.cos(Ae),S=O.y+A*Math.sin(Ae),C=new Q(v,S),M=new cr(O,C),z=M.pointAlongOffset(1,l),V=M.pointAlongOffset(1,-l);this._side===It.LEFT?(this._segList.addPt(z),this._segList.addPt(V)):(this._segList.addPt(V),this._segList.addPt(z))},Qn.prototype.computeOffsetSegment=function(u,h,y,w){var O=h===It.LEFT?1:-1,U=u.p1.x-u.p0.x,J=u.p1.y-u.p0.y,pe=Math.sqrt(U*U+J*J),Ae=O*y*U/pe,A=O*y*J/pe;w.p0.x=u.p0.x-A,w.p0.y=u.p0.y+Ae,w.p1.x=u.p1.x-A,w.p1.y=u.p1.y+Ae},Qn.prototype.addFilletArc=function(u,h,y,w,O){var U=w===rt.CLOCKWISE?-1:1,J=Math.abs(h-y),pe=Math.trunc(J/this._filletAngleQuantum+.5);if(pe<1)return null;for(var Ae=J/pe,A=0,l=new Q;A<J;){var v=h+U*A;l.x=u.x+O*Math.cos(v),l.y=u.y+O*Math.sin(v),this._segList.addPt(l),A+=Ae}},Qn.prototype.addInsideTurn=function(u,h){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Qn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var y=new Q((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(y);var w=new Q((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(w)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Qn.prototype.createCircle=function(u){var h=new Q(u.x+this._distance,u.y);this._segList.addPt(h),this.addFilletArc(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Qn.prototype.addBevelJoin=function(u,h){this._segList.addPt(u.p1),this._segList.addPt(h.p0)},Qn.prototype.init=function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new $i,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*Qn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Qn.prototype.addCollinear=function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===ar.JOIN_BEVEL||this._bufParams.getJoinStyle()===ar.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,rt.CLOCKWISE,this._distance))},Qn.prototype.closeRing=function(){this._segList.closeRing()},Qn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},li.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},li.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},li.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},li.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Qn,li);var Xi=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],h=arguments[1];this._precisionModel=u,this._bufParams=h};Xi.prototype.getOffsetCurve=function(u,h){if(this._distance=h,h===0)return null;var y=h<0,w=Math.abs(h),O=this.getSegGen(w);u.length<=1?this.computePointCurve(u[0],O):this.computeOffsetCurve(u,y,O);var U=O.getCoordinates();return y&&ce.reverse(U),U},Xi.prototype.computeSingleSidedBufferCurve=function(u,h,y){var w=this.simplifyTolerance(this._distance);if(h){y.addSegments(u,!0);var O=pi.simplify(u,-w),U=O.length-1;y.initSideSegments(O[U],O[U-1],It.LEFT),y.addFirstSegment();for(var J=U-2;J>=0;J--)y.addNextSegment(O[J],!0)}else{y.addSegments(u,!1);var pe=pi.simplify(u,w),Ae=pe.length-1;y.initSideSegments(pe[0],pe[1],It.LEFT),y.addFirstSegment();for(var A=2;A<=Ae;A++)y.addNextSegment(pe[A],!0)}y.addLastSegment(),y.closeRing()},Xi.prototype.computeRingBufferCurve=function(u,h,y){var w=this.simplifyTolerance(this._distance);h===It.RIGHT&&(w=-w);var O=pi.simplify(u,w),U=O.length-1;y.initSideSegments(O[U-1],O[0],h);for(var J=1;J<=U;J++){var pe=J!==1;y.addNextSegment(O[J],pe)}y.closeRing()},Xi.prototype.computeLineBufferCurve=function(u,h){var y=this.simplifyTolerance(this._distance),w=pi.simplify(u,y),O=w.length-1;h.initSideSegments(w[0],w[1],It.LEFT);for(var U=2;U<=O;U++)h.addNextSegment(w[U],!0);h.addLastSegment(),h.addLineEndCap(w[O-1],w[O]);var J=pi.simplify(u,-y),pe=J.length-1;h.initSideSegments(J[pe],J[pe-1],It.LEFT);for(var Ae=pe-2;Ae>=0;Ae--)h.addNextSegment(J[Ae],!0);h.addLastSegment(),h.addLineEndCap(J[1],J[0]),h.closeRing()},Xi.prototype.computePointCurve=function(u,h){switch(this._bufParams.getEndCapStyle()){case ar.CAP_ROUND:h.createCircle(u);break;case ar.CAP_SQUARE:h.createSquare(u)}},Xi.prototype.getLineCurve=function(u,h){if(this._distance=h,h<0&&!this._bufParams.isSingleSided()||h===0)return null;var y=Math.abs(h),w=this.getSegGen(y);if(u.length<=1)this.computePointCurve(u[0],w);else if(this._bufParams.isSingleSided()){var O=h<0;this.computeSingleSidedBufferCurve(u,O,w)}else this.computeLineBufferCurve(u,w);return w.getCoordinates()},Xi.prototype.getBufferParameters=function(){return this._bufParams},Xi.prototype.simplifyTolerance=function(u){return u*this._bufParams.getSimplifyFactor()},Xi.prototype.getRingCurve=function(u,h,y){if(this._distance=y,u.length<=2)return this.getLineCurve(u,y);if(y===0)return Xi.copyCoordinates(u);var w=this.getSegGen(y);return this.computeRingBufferCurve(u,h,w),w.getCoordinates()},Xi.prototype.computeOffsetCurve=function(u,h,y){var w=this.simplifyTolerance(this._distance);if(h){var O=pi.simplify(u,-w),U=O.length-1;y.initSideSegments(O[U],O[U-1],It.LEFT),y.addFirstSegment();for(var J=U-2;J>=0;J--)y.addNextSegment(O[J],!0)}else{var pe=pi.simplify(u,w),Ae=pe.length-1;y.initSideSegments(pe[0],pe[1],It.LEFT),y.addFirstSegment();for(var A=2;A<=Ae;A++)y.addNextSegment(pe[A],!0)}y.addLastSegment()},Xi.prototype.getSegGen=function(u){return new Qn(this._precisionModel,this._bufParams,u)},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Xi.copyCoordinates=function(u){for(var h=new Array(u.length).fill(null),y=0;y<h.length;y++)h[y]=new Q(u[y]);return h};var qr=function(){this._subgraphs=null,this._seg=new cr,this._cga=new rt;var u=arguments[0];this._subgraphs=u},Fl={DepthSegment:{configurable:!0}};qr.prototype.findStabbedSegments=function(){if(arguments.length===1){for(var u=arguments[0],h=new Pt,y=this._subgraphs.iterator();y.hasNext();){var w=y.next(),O=w.getEnvelope();u.y<O.getMinY()||u.y>O.getMaxY()||this.findStabbedSegments(u,w.getDirectedEdges(),h)}return h}if(arguments.length===3){if(fe(arguments[2],$r)&&arguments[0]instanceof Q&&arguments[1]instanceof Lu){for(var U=arguments[0],J=arguments[1],pe=arguments[2],Ae=J.getEdge().getCoordinates(),A=0;A<Ae.length-1;A++)if(this._seg.p0=Ae[A],this._seg.p1=Ae[A+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<U.x)&&!(this._seg.isHorizontal()||U.y<this._seg.p0.y||U.y>this._seg.p1.y||rt.computeOrientation(this._seg.p0,this._seg.p1,U)===rt.RIGHT)){var l=J.getDepth(It.LEFT);this._seg.p0.equals(Ae[A])||(l=J.getDepth(It.RIGHT));var v=new bn(this._seg,l);pe.add(v)}}else if(fe(arguments[2],$r)&&arguments[0]instanceof Q&&fe(arguments[1],$r))for(var S=arguments[0],C=arguments[1],M=arguments[2],z=C.iterator();z.hasNext();){var V=z.next();V.isForward()&&this.findStabbedSegments(S,V,M)}}},qr.prototype.getDepth=function(u){var h=this.findStabbedSegments(u);return h.size()===0?0:_o.min(h)._leftDepth},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},Fl.DepthSegment.get=function(){return bn},Object.defineProperties(qr,Fl);var bn=function(){this._upwardSeg=null,this._leftDepth=null;var u=arguments[0],h=arguments[1];this._upwardSeg=new cr(u),this._leftDepth=h};bn.prototype.compareTo=function(u){var h=u;if(this._upwardSeg.minX()>=h._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=h._upwardSeg.minX())return-1;var y=this._upwardSeg.orientationIndex(h._upwardSeg);return y!==0||(y=-1*h._upwardSeg.orientationIndex(this._upwardSeg))!=0?y:this._upwardSeg.compareTo(h._upwardSeg)},bn.prototype.compareX=function(u,h){var y=u.p0.compareTo(h.p0);return y!==0?y:u.p1.compareTo(h.p1)},bn.prototype.toString=function(){return this._upwardSeg.toString()},bn.prototype.interfaces_=function(){return[Z]},bn.prototype.getClass=function(){return bn};var yr=function(u,h,y){this.p0=u||null,this.p1=h||null,this.p2=y||null};yr.prototype.area=function(){return yr.area(this.p0,this.p1,this.p2)},yr.prototype.signedArea=function(){return yr.signedArea(this.p0,this.p1,this.p2)},yr.prototype.interpolateZ=function(u){if(u===null)throw new N("Supplied point is null.");return yr.interpolateZ(u,this.p0,this.p1,this.p2)},yr.prototype.longestSideLength=function(){return yr.longestSideLength(this.p0,this.p1,this.p2)},yr.prototype.isAcute=function(){return yr.isAcute(this.p0,this.p1,this.p2)},yr.prototype.circumcentre=function(){return yr.circumcentre(this.p0,this.p1,this.p2)},yr.prototype.area3D=function(){return yr.area3D(this.p0,this.p1,this.p2)},yr.prototype.centroid=function(){return yr.centroid(this.p0,this.p1,this.p2)},yr.prototype.inCentre=function(){return yr.inCentre(this.p0,this.p1,this.p2)},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},yr.area=function(u,h,y){return Math.abs(((y.x-u.x)*(h.y-u.y)-(h.x-u.x)*(y.y-u.y))/2)},yr.signedArea=function(u,h,y){return((y.x-u.x)*(h.y-u.y)-(h.x-u.x)*(y.y-u.y))/2},yr.det=function(u,h,y,w){return u*w-h*y},yr.interpolateZ=function(u,h,y,w){var O=h.x,U=h.y,J=y.x-O,pe=w.x-O,Ae=y.y-U,A=w.y-U,l=J*A-pe*Ae,v=u.x-O,S=u.y-U,C=(A*v-pe*S)/l,M=(-Ae*v+J*S)/l;return h.z+C*(y.z-h.z)+M*(w.z-h.z)},yr.longestSideLength=function(u,h,y){var w=u.distance(h),O=h.distance(y),U=y.distance(u),J=w;return O>J&&(J=O),U>J&&(J=U),J},yr.isAcute=function(u,h,y){return!!nn.isAcute(u,h,y)&&!!nn.isAcute(h,y,u)&&!!nn.isAcute(y,u,h)},yr.circumcentre=function(u,h,y){var w=y.x,O=y.y,U=u.x-w,J=u.y-O,pe=h.x-w,Ae=h.y-O,A=2*yr.det(U,J,pe,Ae),l=yr.det(J,U*U+J*J,Ae,pe*pe+Ae*Ae),v=yr.det(U,U*U+J*J,pe,pe*pe+Ae*Ae);return new Q(w-l/A,O+v/A)},yr.perpendicularBisector=function(u,h){var y=h.x-u.x,w=h.y-u.y,O=new Ot(u.x+y/2,u.y+w/2,1),U=new Ot(u.x-w+y/2,u.y+y+w/2,1);return new Ot(O,U)},yr.angleBisector=function(u,h,y){var w=h.distance(u),O=w/(w+h.distance(y)),U=y.x-u.x,J=y.y-u.y;return new Q(u.x+O*U,u.y+O*J)},yr.area3D=function(u,h,y){var w=h.x-u.x,O=h.y-u.y,U=h.z-u.z,J=y.x-u.x,pe=y.y-u.y,Ae=y.z-u.z,A=O*Ae-U*pe,l=U*J-w*Ae,v=w*pe-O*J,S=A*A+l*l+v*v,C=Math.sqrt(S)/2;return C},yr.centroid=function(u,h,y){var w=(u.x+h.x+y.x)/3,O=(u.y+h.y+y.y)/3;return new Q(w,O)},yr.inCentre=function(u,h,y){var w=h.distance(y),O=u.distance(y),U=u.distance(h),J=w+O+U,pe=(w*u.x+O*h.x+U*y.x)/J,Ae=(w*u.y+O*h.y+U*y.y)/J;return new Q(pe,Ae)};var Yi=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Pt;var u=arguments[0],h=arguments[1],y=arguments[2];this._inputGeom=u,this._distance=h,this._curveBuilder=y};Yi.prototype.addPoint=function(u){if(this._distance<=0)return null;var h=u.getCoordinates(),y=this._curveBuilder.getLineCurve(h,this._distance);this.addCurve(y,oe.EXTERIOR,oe.INTERIOR)},Yi.prototype.addPolygon=function(u){var h=this._distance,y=It.LEFT;this._distance<0&&(h=-this._distance,y=It.RIGHT);var w=u.getExteriorRing(),O=ce.removeRepeatedPoints(w.getCoordinates());if(this._distance<0&&this.isErodedCompletely(w,this._distance)||this._distance<=0&&O.length<3)return null;this.addPolygonRing(O,h,y,oe.EXTERIOR,oe.INTERIOR);for(var U=0;U<u.getNumInteriorRing();U++){var J=u.getInteriorRingN(U),pe=ce.removeRepeatedPoints(J.getCoordinates());this._distance>0&&this.isErodedCompletely(J,-this._distance)||this.addPolygonRing(pe,h,It.opposite(y),oe.INTERIOR,oe.EXTERIOR)}},Yi.prototype.isTriangleErodedCompletely=function(u,h){var y=new yr(u[0],u[1],u[2]),w=y.inCentre();return rt.distancePointLine(w,y.p0,y.p1)<Math.abs(h)},Yi.prototype.addLineString=function(u){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var h=ce.removeRepeatedPoints(u.getCoordinates()),y=this._curveBuilder.getLineCurve(h,this._distance);this.addCurve(y,oe.EXTERIOR,oe.INTERIOR)},Yi.prototype.addCurve=function(u,h,y){if(u===null||u.length<2)return null;var w=new Zn(u,new Qr(0,oe.BOUNDARY,h,y));this._curveList.add(w)},Yi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Yi.prototype.addPolygonRing=function(u,h,y,w,O){if(h===0&&u.length<Pi.MINIMUM_VALID_SIZE)return null;var U=w,J=O;u.length>=Pi.MINIMUM_VALID_SIZE&&rt.isCCW(u)&&(U=O,J=w,y=It.opposite(y));var pe=this._curveBuilder.getRingCurve(u,y,h);this.addCurve(pe,U,J)},Yi.prototype.add=function(u){if(u.isEmpty())return null;u instanceof yi?this.addPolygon(u):u instanceof Vr?this.addLineString(u):u instanceof Jr?this.addPoint(u):u instanceof Si?this.addCollection(u):u instanceof Yr?this.addCollection(u):u instanceof da?this.addCollection(u):u instanceof er&&this.addCollection(u)},Yi.prototype.isErodedCompletely=function(u,h){var y=u.getCoordinates();if(y.length<4)return h<0;if(y.length===4)return this.isTriangleErodedCompletely(y,h);var w=u.getEnvelopeInternal(),O=Math.min(w.getHeight(),w.getWidth());return h<0&&2*Math.abs(h)>O},Yi.prototype.addCollection=function(u){for(var h=0;h<u.getNumGeometries();h++){var y=u.getGeometryN(h);this.add(y)}},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi};var Os=function(){};Os.prototype.locate=function(u){},Os.prototype.interfaces_=function(){return[]},Os.prototype.getClass=function(){return Os};var Ta=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()};Ta.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ta.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new o;var u=this._parent.getGeometryN(this._index++);return u instanceof er?(this._subcollectionIterator=new Ta(u),this._subcollectionIterator.next()):u},Ta.prototype.remove=function(){throw new Error(this.getClass().getName())},Ta.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ta.prototype.interfaces_=function(){return[Xn]},Ta.prototype.getClass=function(){return Ta},Ta.isAtomic=function(u){return!(u instanceof er)};var Qo=function(){this._geom=null;var u=arguments[0];this._geom=u};Qo.prototype.locate=function(u){return Qo.locate(u,this._geom)},Qo.prototype.interfaces_=function(){return[Os]},Qo.prototype.getClass=function(){return Qo},Qo.isPointInRing=function(u,h){return!!h.getEnvelopeInternal().intersects(u)&&rt.isPointInRing(u,h.getCoordinates())},Qo.containsPointInPolygon=function(u,h){if(h.isEmpty())return!1;var y=h.getExteriorRing();if(!Qo.isPointInRing(u,y))return!1;for(var w=0;w<h.getNumInteriorRing();w++){var O=h.getInteriorRingN(w);if(Qo.isPointInRing(u,O))return!1}return!0},Qo.containsPoint=function(u,h){if(h instanceof yi)return Qo.containsPointInPolygon(u,h);if(h instanceof er)for(var y=new Ta(h);y.hasNext();){var w=y.next();if(w!==h&&Qo.containsPoint(u,w))return!0}return!1},Qo.locate=function(u,h){return h.isEmpty()?oe.EXTERIOR:Qo.containsPoint(u,h)?oe.INTERIOR:oe.EXTERIOR};var zi=function(){this._edgeMap=new P,this._edgeList=null,this._ptInAreaLocation=[oe.NONE,oe.NONE]};zi.prototype.getNextCW=function(u){this.getEdges();var h=this._edgeList.indexOf(u),y=h-1;return h===0&&(y=this._edgeList.size()-1),this._edgeList.get(y)},zi.prototype.propagateSideLabels=function(u){for(var h=oe.NONE,y=this.iterator();y.hasNext();){var w=y.next().getLabel();w.isArea(u)&&w.getLocation(u,It.LEFT)!==oe.NONE&&(h=w.getLocation(u,It.LEFT))}if(h===oe.NONE)return null;for(var O=h,U=this.iterator();U.hasNext();){var J=U.next(),pe=J.getLabel();if(pe.getLocation(u,It.ON)===oe.NONE&&pe.setLocation(u,It.ON,O),pe.isArea(u)){var Ae=pe.getLocation(u,It.LEFT),A=pe.getLocation(u,It.RIGHT);if(A!==oe.NONE){if(A!==O)throw new Pa("side location conflict",J.getCoordinate());Ae===oe.NONE&&ve.shouldNeverReachHere("found single null side (at "+J.getCoordinate()+")"),O=Ae}else ve.isTrue(pe.getLocation(u,It.LEFT)===oe.NONE,"found single null side"),pe.setLocation(u,It.RIGHT,O),pe.setLocation(u,It.LEFT,O)}}},zi.prototype.getCoordinate=function(){var u=this.iterator();return u.hasNext()?u.next().getCoordinate():null},zi.prototype.print=function(u){pt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var h=this.iterator();h.hasNext();)h.next().print(u)},zi.prototype.isAreaLabelsConsistent=function(u){return this.computeEdgeEndLabels(u.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},zi.prototype.checkAreaLabelsConsistent=function(u){var h=this.getEdges();if(h.size()<=0)return!0;var y=h.size()-1,w=h.get(y).getLabel().getLocation(u,It.LEFT);ve.isTrue(w!==oe.NONE,"Found unlabelled area edge");for(var O=w,U=this.iterator();U.hasNext();){var J=U.next().getLabel();ve.isTrue(J.isArea(u),"Found non-area edge");var pe=J.getLocation(u,It.LEFT),Ae=J.getLocation(u,It.RIGHT);if(pe===Ae||Ae!==O)return!1;O=pe}return!0},zi.prototype.findIndex=function(u){this.iterator();for(var h=0;h<this._edgeList.size();h++)if(this._edgeList.get(h)===u)return h;return-1},zi.prototype.iterator=function(){return this.getEdges().iterator()},zi.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Pt(this._edgeMap.values())),this._edgeList},zi.prototype.getLocation=function(u,h,y){return this._ptInAreaLocation[u]===oe.NONE&&(this._ptInAreaLocation[u]=Qo.locate(h,y[u].getGeometry())),this._ptInAreaLocation[u]},zi.prototype.toString=function(){var u=new re;u.append("EdgeEndStar:   "+this.getCoordinate()),u.append(`
`);for(var h=this.iterator();h.hasNext();){var y=h.next();u.append(y),u.append(`
`)}return u.toString()},zi.prototype.computeEdgeEndLabels=function(u){for(var h=this.iterator();h.hasNext();)h.next().computeLabel(u)},zi.prototype.computeLabelling=function(u){this.computeEdgeEndLabels(u[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var h=[!1,!1],y=this.iterator();y.hasNext();)for(var w=y.next().getLabel(),O=0;O<2;O++)w.isLine(O)&&w.getLocation(O)===oe.BOUNDARY&&(h[O]=!0);for(var U=this.iterator();U.hasNext();)for(var J=U.next(),pe=J.getLabel(),Ae=0;Ae<2;Ae++)if(pe.isAnyNull(Ae)){var A=oe.NONE;if(h[Ae])A=oe.EXTERIOR;else{var l=J.getCoordinate();A=this.getLocation(Ae,l,u)}pe.setAllLocationsIfNull(Ae,A)}},zi.prototype.getDegree=function(){return this._edgeMap.size()},zi.prototype.insertEdgeEnd=function(u,h){this._edgeMap.put(u,h),this._edgeList=null},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi};var Dd=function(u){function h(){u.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var y=null,w=null,O=this._SCANNING_FOR_INCOMING,U=0;U<this._resultAreaEdgeList.size();U++){var J=this._resultAreaEdgeList.get(U),pe=J.getSym();if(J.getLabel().isArea())switch(y===null&&J.isInResult()&&(y=J),O){case this._SCANNING_FOR_INCOMING:if(!pe.isInResult())continue;w=pe,O=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!J.isInResult())continue;w.setNext(J),O=this._SCANNING_FOR_INCOMING}}if(O===this._LINKING_TO_OUTGOING){if(y===null)throw new Pa("no outgoing dirEdge found",this.getCoordinate());ve.isTrue(y.isInResult(),"unable to link last incoming dirEdge"),w.setNext(y)}},h.prototype.insert=function(y){var w=y;this.insertEdgeEnd(w,w)},h.prototype.getRightmostEdge=function(){var y=this.getEdges(),w=y.size();if(w<1)return null;var O=y.get(0);if(w===1)return O;var U=y.get(w-1),J=O.getQuadrant(),pe=U.getQuadrant();return on.isNorthern(J)&&on.isNorthern(pe)?O:on.isNorthern(J)||on.isNorthern(pe)?O.getDy()!==0?O:U.getDy()!==0?U:(ve.shouldNeverReachHere("found two horizontal edges incident on node"),null):U},h.prototype.print=function(y){pt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var w=this.iterator();w.hasNext();){var O=w.next();y.print("out "),O.print(y),y.println(),y.print("in "),O.getSym().print(y),y.println()}},h.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Pt;for(var y=this.iterator();y.hasNext();){var w=y.next();(w.isInResult()||w.getSym().isInResult())&&this._resultAreaEdgeList.add(w)}return this._resultAreaEdgeList},h.prototype.updateLabelling=function(y){for(var w=this.iterator();w.hasNext();){var O=w.next().getLabel();O.setAllLocationsIfNull(0,y.getLocation(0)),O.setAllLocationsIfNull(1,y.getLocation(1))}},h.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var y=null,w=null,O=this._edgeList.size()-1;O>=0;O--){var U=this._edgeList.get(O),J=U.getSym();w===null&&(w=J),y!==null&&J.setNext(y),y=U}w.setNext(y)},h.prototype.computeDepths=function(){if(arguments.length===1){var y=arguments[0],w=this.findIndex(y),O=y.getDepth(It.LEFT),U=y.getDepth(It.RIGHT),J=this.computeDepths(w+1,this._edgeList.size(),O);if(this.computeDepths(0,w,J)!==U)throw new Pa("depth mismatch at "+y.getCoordinate())}else if(arguments.length===3){for(var pe=arguments[0],Ae=arguments[1],A=arguments[2],l=pe;l<Ae;l++){var v=this._edgeList.get(l);v.setEdgeDepths(It.RIGHT,A),A=v.getDepth(It.LEFT)}return A}},h.prototype.mergeSymLabels=function(){for(var y=this.iterator();y.hasNext();){var w=y.next();w.getLabel().merge(w.getSym().getLabel())}},h.prototype.linkMinimalDirectedEdges=function(y){for(var w=null,O=null,U=this._SCANNING_FOR_INCOMING,J=this._resultAreaEdgeList.size()-1;J>=0;J--){var pe=this._resultAreaEdgeList.get(J),Ae=pe.getSym();switch(w===null&&pe.getEdgeRing()===y&&(w=pe),U){case this._SCANNING_FOR_INCOMING:if(Ae.getEdgeRing()!==y)continue;O=Ae,U=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(pe.getEdgeRing()!==y)continue;O.setNextMin(pe),U=this._SCANNING_FOR_INCOMING}}U===this._LINKING_TO_OUTGOING&&(ve.isTrue(w!==null,"found null for first outgoing dirEdge"),ve.isTrue(w.getEdgeRing()===y,"unable to link last incoming dirEdge"),O.setNextMin(w))},h.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var y=0,w=this.iterator();w.hasNext();)w.next().isInResult()&&y++;return y}if(arguments.length===1){for(var O=arguments[0],U=0,J=this.iterator();J.hasNext();)J.next().getEdgeRing()===O&&U++;return U}},h.prototype.getLabel=function(){return this._label},h.prototype.findCoveredLineEdges=function(){for(var y=oe.NONE,w=this.iterator();w.hasNext();){var O=w.next(),U=O.getSym();if(!O.isLineEdge()){if(O.isInResult()){y=oe.INTERIOR;break}if(U.isInResult()){y=oe.EXTERIOR;break}}}if(y===oe.NONE)return null;for(var J=y,pe=this.iterator();pe.hasNext();){var Ae=pe.next(),A=Ae.getSym();Ae.isLineEdge()?Ae.getEdge().setCovered(J===oe.INTERIOR):(Ae.isInResult()&&(J=oe.EXTERIOR),A.isInResult()&&(J=oe.INTERIOR))}},h.prototype.computeLabelling=function(y){u.prototype.computeLabelling.call(this,y),this._label=new Qr(oe.NONE);for(var w=this.iterator();w.hasNext();)for(var O=w.next().getEdge().getLabel(),U=0;U<2;U++){var J=O.getLocation(U);J!==oe.INTERIOR&&J!==oe.BOUNDARY||this._label.setLocation(U,oe.INTERIOR)}},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(zi),zc=function(u){function h(){u.apply(this,arguments)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.createNode=function(y){return new As(y,new Dd)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(qi),Ma=function u(){this._pts=null,this._orientation=null;var h=arguments[0];this._pts=h,this._orientation=u.orientation(h)};Ma.prototype.compareTo=function(u){var h=u;return Ma.compareOriented(this._pts,this._orientation,h._pts,h._orientation)},Ma.prototype.interfaces_=function(){return[Z]},Ma.prototype.getClass=function(){return Ma},Ma.orientation=function(u){return ce.increasingDirection(u)===1},Ma.compareOriented=function(u,h,y,w){for(var O=h?1:-1,U=w?1:-1,J=h?u.length:-1,pe=w?y.length:-1,Ae=h?0:u.length-1,A=w?0:y.length-1;;){var l=u[Ae].compareTo(y[A]);if(l!==0)return l;var v=(Ae+=O)===J,S=(A+=U)===pe;if(v&&!S)return-1;if(!v&&S)return 1;if(v&&S)return 0}};var Vo=function(){this._edges=new Pt,this._ocaMap=new P};Vo.prototype.print=function(u){u.print("MULTILINESTRING ( ");for(var h=0;h<this._edges.size();h++){var y=this._edges.get(h);h>0&&u.print(","),u.print("(");for(var w=y.getCoordinates(),O=0;O<w.length;O++)O>0&&u.print(","),u.print(w[O].x+" "+w[O].y);u.println(")")}u.print(")  ")},Vo.prototype.addAll=function(u){for(var h=u.iterator();h.hasNext();)this.add(h.next())},Vo.prototype.findEdgeIndex=function(u){for(var h=0;h<this._edges.size();h++)if(this._edges.get(h).equals(u))return h;return-1},Vo.prototype.iterator=function(){return this._edges.iterator()},Vo.prototype.getEdges=function(){return this._edges},Vo.prototype.get=function(u){return this._edges.get(u)},Vo.prototype.findEqualEdge=function(u){var h=new Ma(u.getCoordinates());return this._ocaMap.get(h)},Vo.prototype.add=function(u){this._edges.add(u);var h=new Ma(u.getCoordinates());this._ocaMap.put(h,u)},Vo.prototype.interfaces_=function(){return[]},Vo.prototype.getClass=function(){return Vo};var Ts=function(){};Ts.prototype.processIntersections=function(u,h,y,w){},Ts.prototype.isDone=function(){},Ts.prototype.interfaces_=function(){return[]},Ts.prototype.getClass=function(){return Ts};var bo=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u};bo.prototype.isTrivialIntersection=function(u,h,y,w){if(u===y&&this._li.getIntersectionNum()===1){if(bo.isAdjacentSegments(h,w))return!0;if(u.isClosed()){var O=u.size()-1;if(h===0&&w===O||w===0&&h===O)return!0}}return!1},bo.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},bo.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},bo.prototype.getLineIntersector=function(){return this._li},bo.prototype.hasProperIntersection=function(){return this._hasProper},bo.prototype.processIntersections=function(u,h,y,w){if(u===y&&h===w)return null;this.numTests++;var O=u.getCoordinates()[h],U=u.getCoordinates()[h+1],J=y.getCoordinates()[w],pe=y.getCoordinates()[w+1];this._li.computeIntersection(O,U,J,pe),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,h,y,w)||(this._hasIntersection=!0,u.addIntersections(this._li,h,0),y.addIntersections(this._li,w,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},bo.prototype.hasIntersection=function(){return this._hasIntersection},bo.prototype.isDone=function(){return!1},bo.prototype.hasInteriorIntersection=function(){return this._hasInterior},bo.prototype.interfaces_=function(){return[Ts]},bo.prototype.getClass=function(){return bo},bo.isAdjacentSegments=function(u,h){return Math.abs(u-h)===1};var kr=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var u=arguments[0],h=arguments[1],y=arguments[2];this.coord=new Q(u),this.segmentIndex=h,this.dist=y};kr.prototype.getSegmentIndex=function(){return this.segmentIndex},kr.prototype.getCoordinate=function(){return this.coord},kr.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex),u.println(" dist = "+this.dist)},kr.prototype.compareTo=function(u){var h=u;return this.compare(h.segmentIndex,h.dist)},kr.prototype.isEndPoint=function(u){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===u},kr.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},kr.prototype.getDistance=function(){return this.dist},kr.prototype.compare=function(u,h){return this.segmentIndex<u?-1:this.segmentIndex>u?1:this.dist<h?-1:this.dist>h?1:0},kr.prototype.interfaces_=function(){return[Z]},kr.prototype.getClass=function(){return kr};var ea=function(){this._nodeMap=new P,this.edge=null;var u=arguments[0];this.edge=u};ea.prototype.print=function(u){u.println("Intersections:");for(var h=this.iterator();h.hasNext();)h.next().print(u)},ea.prototype.iterator=function(){return this._nodeMap.values().iterator()},ea.prototype.addSplitEdges=function(u){this.addEndpoints();for(var h=this.iterator(),y=h.next();h.hasNext();){var w=h.next(),O=this.createSplitEdge(y,w);u.add(O),y=w}},ea.prototype.addEndpoints=function(){var u=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[u],u,0)},ea.prototype.createSplitEdge=function(u,h){var y=h.segmentIndex-u.segmentIndex+2,w=this.edge.pts[h.segmentIndex],O=h.dist>0||!h.coord.equals2D(w);O||y--;var U=new Array(y).fill(null),J=0;U[J++]=new Q(u.coord);for(var pe=u.segmentIndex+1;pe<=h.segmentIndex;pe++)U[J++]=this.edge.pts[pe];return O&&(U[J]=h.coord),new La(U,new Qr(this.edge._label))},ea.prototype.add=function(u,h,y){var w=new kr(u,h,y),O=this._nodeMap.get(w);return O!==null?O:(this._nodeMap.put(w,w),w)},ea.prototype.isIntersection=function(u){for(var h=this.iterator();h.hasNext();)if(h.next().coord.equals(u))return!0;return!1},ea.prototype.interfaces_=function(){return[]},ea.prototype.getClass=function(){return ea};var hs=function(){};hs.prototype.getChainStartIndices=function(u){var h=0,y=new Pt;y.add(new ie(h));do{var w=this.findChainEnd(u,h);y.add(new ie(w)),h=w}while(h<u.length-1);return hs.toIntArray(y)},hs.prototype.findChainEnd=function(u,h){for(var y=on.quadrant(u[h],u[h+1]),w=h+1;w<u.length&&on.quadrant(u[w-1],u[w])===y;)w++;return w-1},hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.toIntArray=function(u){for(var h=new Array(u.size()).fill(null),y=0;y<h.length;y++)h[y]=u.get(y).intValue();return h};var Xa=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new vt,this.env2=new vt;var u=arguments[0];this.e=u,this.pts=u.getCoordinates();var h=new hs;this.startIndex=h.getChainStartIndices(this.pts)};Xa.prototype.getCoordinates=function(){return this.pts},Xa.prototype.getMaxX=function(u){var h=this.pts[this.startIndex[u]].x,y=this.pts[this.startIndex[u+1]].x;return h>y?h:y},Xa.prototype.getMinX=function(u){var h=this.pts[this.startIndex[u]].x,y=this.pts[this.startIndex[u+1]].x;return h<y?h:y},Xa.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var u=arguments[0],h=arguments[1],y=arguments[2],w=arguments[3];this.computeIntersectsForChain(this.startIndex[u],this.startIndex[u+1],h,h.startIndex[y],h.startIndex[y+1],w)}else if(arguments.length===6){var O=arguments[0],U=arguments[1],J=arguments[2],pe=arguments[3],Ae=arguments[4],A=arguments[5],l=this.pts[O],v=this.pts[U],S=J.pts[pe],C=J.pts[Ae];if(U-O==1&&Ae-pe==1)return A.addIntersections(this.e,O,J.e,pe),null;if(this.env1.init(l,v),this.env2.init(S,C),!this.env1.intersects(this.env2))return null;var M=Math.trunc((O+U)/2),z=Math.trunc((pe+Ae)/2);O<M&&(pe<z&&this.computeIntersectsForChain(O,M,J,pe,z,A),z<Ae&&this.computeIntersectsForChain(O,M,J,z,Ae,A)),M<U&&(pe<z&&this.computeIntersectsForChain(M,U,J,pe,z,A),z<Ae&&this.computeIntersectsForChain(M,U,J,z,Ae,A))}},Xa.prototype.getStartIndexes=function(){return this.startIndex},Xa.prototype.computeIntersects=function(u,h){for(var y=0;y<this.startIndex.length-1;y++)for(var w=0;w<u.startIndex.length-1;w++)this.computeIntersectsForChain(y,u,w,h)},Xa.prototype.interfaces_=function(){return[]},Xa.prototype.getClass=function(){return Xa};var an=function u(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var h=0;h<2;h++)for(var y=0;y<3;y++)this._depth[h][y]=u.NULL_VALUE},$l={NULL_VALUE:{configurable:!0}};an.prototype.getDepth=function(u,h){return this._depth[u][h]},an.prototype.setDepth=function(u,h,y){this._depth[u][h]=y},an.prototype.isNull=function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var h=0;h<3;h++)if(this._depth[u][h]!==an.NULL_VALUE)return!1;return!0}if(arguments.length===1){var y=arguments[0];return this._depth[y][1]===an.NULL_VALUE}if(arguments.length===2){var w=arguments[0],O=arguments[1];return this._depth[w][O]===an.NULL_VALUE}},an.prototype.normalize=function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var h=this._depth[u][1];this._depth[u][2]<h&&(h=this._depth[u][2]),h<0&&(h=0);for(var y=1;y<3;y++){var w=0;this._depth[u][y]>h&&(w=1),this._depth[u][y]=w}}},an.prototype.getDelta=function(u){return this._depth[u][It.RIGHT]-this._depth[u][It.LEFT]},an.prototype.getLocation=function(u,h){return this._depth[u][h]<=0?oe.EXTERIOR:oe.INTERIOR},an.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},an.prototype.add=function(){if(arguments.length===1)for(var u=arguments[0],h=0;h<2;h++)for(var y=1;y<3;y++){var w=u.getLocation(h,y);w!==oe.EXTERIOR&&w!==oe.INTERIOR||(this.isNull(h,y)?this._depth[h][y]=an.depthAtLocation(w):this._depth[h][y]+=an.depthAtLocation(w))}else if(arguments.length===3){var O=arguments[0],U=arguments[1];arguments[2]===oe.INTERIOR&&this._depth[O][U]++}},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},an.depthAtLocation=function(u){return u===oe.EXTERIOR?0:u===oe.INTERIOR?1:an.NULL_VALUE},$l.NULL_VALUE.get=function(){return-1},Object.defineProperties(an,$l);var La=function(u){function h(){if(u.call(this),this.pts=null,this._env=null,this.eiList=new ea(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new an,this._depthDelta=0,arguments.length===1){var y=arguments[0];h.call(this,y,null)}else if(arguments.length===2){var w=arguments[0],O=arguments[1];this.pts=w,this._label=O}}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.getDepth=function(){return this._depth},h.prototype.getCollapsedEdge=function(){var y=new Array(2).fill(null);return y[0]=this.pts[0],y[1]=this.pts[1],new h(y,Qr.toLineLabel(this._label))},h.prototype.isIsolated=function(){return this._isIsolated},h.prototype.getCoordinates=function(){return this.pts},h.prototype.setIsolated=function(y){this._isIsolated=y},h.prototype.setName=function(y){this._name=y},h.prototype.equals=function(y){if(!(y instanceof h))return!1;var w=y;if(this.pts.length!==w.pts.length)return!1;for(var O=!0,U=!0,J=this.pts.length,pe=0;pe<this.pts.length;pe++)if(this.pts[pe].equals2D(w.pts[pe])||(O=!1),this.pts[pe].equals2D(w.pts[--J])||(U=!1),!O&&!U)return!1;return!0},h.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var y=arguments[0];return this.pts[y]}},h.prototype.print=function(y){y.print("edge "+this._name+": "),y.print("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&y.print(","),y.print(this.pts[w].x+" "+this.pts[w].y);y.print(")  "+this._label+" "+this._depthDelta)},h.prototype.computeIM=function(y){h.updateIM(this._label,y)},h.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},h.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},h.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},h.prototype.getDepthDelta=function(){return this._depthDelta},h.prototype.getNumPoints=function(){return this.pts.length},h.prototype.printReverse=function(y){y.print("edge "+this._name+": ");for(var w=this.pts.length-1;w>=0;w--)y.print(this.pts[w]+" ");y.println("")},h.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Xa(this)),this._mce},h.prototype.getEnvelope=function(){if(this._env===null){this._env=new vt;for(var y=0;y<this.pts.length;y++)this._env.expandToInclude(this.pts[y])}return this._env},h.prototype.addIntersection=function(y,w,O,U){var J=new Q(y.getIntersection(U)),pe=w,Ae=y.getEdgeDistance(O,U),A=pe+1;if(A<this.pts.length){var l=this.pts[A];J.equals2D(l)&&(pe=A,Ae=0)}this.eiList.add(J,pe,Ae)},h.prototype.toString=function(){var y=new re;y.append("edge "+this._name+": "),y.append("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&y.append(","),y.append(this.pts[w].x+" "+this.pts[w].y);return y.append(")  "+this._label+" "+this._depthDelta),y.toString()},h.prototype.isPointwiseEqual=function(y){if(this.pts.length!==y.pts.length)return!1;for(var w=0;w<this.pts.length;w++)if(!this.pts[w].equals2D(y.pts[w]))return!1;return!0},h.prototype.setDepthDelta=function(y){this._depthDelta=y},h.prototype.getEdgeIntersectionList=function(){return this.eiList},h.prototype.addIntersections=function(y,w,O){for(var U=0;U<y.getIntersectionNum();U++)this.addIntersection(y,w,O,U)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.updateIM=function(){if(arguments.length!==2)return u.prototype.updateIM.apply(this,arguments);var y=arguments[0],w=arguments[1];w.setAtLeastIfValid(y.getLocation(0,It.ON),y.getLocation(1,It.ON),1),y.isArea()&&(w.setAtLeastIfValid(y.getLocation(0,It.LEFT),y.getLocation(1,It.LEFT),2),w.setAtLeastIfValid(y.getLocation(0,It.RIGHT),y.getLocation(1,It.RIGHT),2))},h}(Gi),xo=function(u){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Vo,this._bufParams=u||null};xo.prototype.setWorkingPrecisionModel=function(u){this._workingPrecisionModel=u},xo.prototype.insertUniqueEdge=function(u){var h=this._edgeList.findEqualEdge(u);if(h!==null){var y=h.getLabel(),w=u.getLabel();h.isPointwiseEqual(u)||(w=new Qr(u.getLabel())).flip(),y.merge(w);var O=xo.depthDelta(w),U=h.getDepthDelta()+O;h.setDepthDelta(U)}else this._edgeList.add(u),u.setDepthDelta(xo.depthDelta(u.getLabel()))},xo.prototype.buildSubgraphs=function(u,h){for(var y=new Pt,w=u.iterator();w.hasNext();){var O=w.next(),U=O.getRightmostCoordinate(),J=new qr(y).getDepth(U);O.computeDepth(J),O.findResultEdges(),y.add(O),h.add(O.getDirectedEdges(),O.getNodes())}},xo.prototype.createSubgraphs=function(u){for(var h=new Pt,y=u.getNodes().iterator();y.hasNext();){var w=y.next();if(!w.isVisited()){var O=new Ai;O.create(w),h.add(O)}}return _o.sort(h,_o.reverseOrder()),h},xo.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},xo.prototype.getNoder=function(u){if(this._workingNoder!==null)return this._workingNoder;var h=new Fc,y=new Ke;return y.setPrecisionModel(u),h.setSegmentIntersector(new bo(y)),h},xo.prototype.buffer=function(u,h){var y=this._workingPrecisionModel;y===null&&(y=u.getPrecisionModel()),this._geomFact=u.getFactory();var w=new Xi(y,this._bufParams),O=new Yi(u,h,w).getCurves();if(O.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(O,y),this._graph=new rn(new zc),this._graph.addEdges(this._edgeList.getEdges());var U=this.createSubgraphs(this._graph),J=new Wi(this._geomFact);this.buildSubgraphs(U,J);var pe=J.getPolygons();return pe.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(pe)},xo.prototype.computeNodedEdges=function(u,h){var y=this.getNoder(h);y.computeNodes(u);for(var w=y.getNodedSubstrings().iterator();w.hasNext();){var O=w.next(),U=O.getCoordinates();if(U.length!==2||!U[0].equals2D(U[1])){var J=O.getData(),pe=new La(O.getCoordinates(),new Qr(J));this.insertUniqueEdge(pe)}}},xo.prototype.setNoder=function(u){this._workingNoder=u},xo.prototype.interfaces_=function(){return[]},xo.prototype.getClass=function(){return xo},xo.depthDelta=function(u){var h=u.getLocation(0,It.LEFT),y=u.getLocation(0,It.RIGHT);return h===oe.INTERIOR&&y===oe.EXTERIOR?1:h===oe.EXTERIOR&&y===oe.INTERIOR?-1:0},xo.convertSegStrings=function(u){for(var h=new zr,y=new Pt;u.hasNext();){var w=u.next(),O=h.createLineString(w.getCoordinates());y.add(O)}return h.buildGeometry(y)};var Ms=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],h=arguments[1];this._noder=u,this._scaleFactor=h,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var y=arguments[0],w=arguments[1],O=arguments[2],U=arguments[3];this._noder=y,this._scaleFactor=w,this._offsetX=O,this._offsetY=U,this._isScaled=!this.isIntegerPrecision()}};Ms.prototype.rescale=function(){if(fe(arguments[0],Kr))for(var u=arguments[0].iterator();u.hasNext();){var h=u.next();this.rescale(h.getCoordinates())}else if(arguments[0]instanceof Array){for(var y=arguments[0],w=0;w<y.length;w++)y[w].x=y[w].x/this._scaleFactor+this._offsetX,y[w].y=y[w].y/this._scaleFactor+this._offsetY;y.length===2&&y[0].equals2D(y[1])&&pt.out.println(y)}},Ms.prototype.scale=function(){if(fe(arguments[0],Kr)){for(var u=arguments[0],h=new Pt,y=u.iterator();y.hasNext();){var w=y.next();h.add(new Zn(this.scale(w.getCoordinates()),w.getData()))}return h}if(arguments[0]instanceof Array){for(var O=arguments[0],U=new Array(O.length).fill(null),J=0;J<O.length;J++)U[J]=new Q(Math.round((O[J].x-this._offsetX)*this._scaleFactor),Math.round((O[J].y-this._offsetY)*this._scaleFactor),O[J].z);return ce.removeRepeatedPoints(U)}},Ms.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},Ms.prototype.getNodedSubstrings=function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u},Ms.prototype.computeNodes=function(u){var h=u;this._isScaled&&(h=this.scale(u)),this._noder.computeNodes(h)},Ms.prototype.interfaces_=function(){return[Ia]},Ms.prototype.getClass=function(){return Ms};var Ya=function(){this._li=new Ke,this._segStrings=null;var u=arguments[0];this._segStrings=u},Du={fact:{configurable:!0}};Ya.prototype.checkEndPtVertexIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var h=u.next().getCoordinates();this.checkEndPtVertexIntersections(h[0],this._segStrings),this.checkEndPtVertexIntersections(h[h.length-1],this._segStrings)}else if(arguments.length===2){for(var y=arguments[0],w=arguments[1].iterator();w.hasNext();)for(var O=w.next().getCoordinates(),U=1;U<O.length-1;U++)if(O[U].equals(y))throw new ot("found endpt/interior pt intersection at index "+U+" :pt "+y)}},Ya.prototype.checkInteriorIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var h=u.next(),y=this._segStrings.iterator();y.hasNext();){var w=y.next();this.checkInteriorIntersections(h,w)}else if(arguments.length===2)for(var O=arguments[0],U=arguments[1],J=O.getCoordinates(),pe=U.getCoordinates(),Ae=0;Ae<J.length-1;Ae++)for(var A=0;A<pe.length-1;A++)this.checkInteriorIntersections(O,Ae,U,A);else if(arguments.length===4){var l=arguments[0],v=arguments[1],S=arguments[2],C=arguments[3];if(l===S&&v===C)return null;var M=l.getCoordinates()[v],z=l.getCoordinates()[v+1],V=S.getCoordinates()[C],X=S.getCoordinates()[C+1];if(this._li.computeIntersection(M,z,V,X),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,M,z)||this.hasInteriorIntersection(this._li,V,X)))throw new ot("found non-noded intersection at "+M+"-"+z+" and "+V+"-"+X)}},Ya.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Ya.prototype.checkCollapses=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var h=u.next();this.checkCollapses(h)}else if(arguments.length===1)for(var y=arguments[0].getCoordinates(),w=0;w<y.length-2;w++)this.checkCollapse(y[w],y[w+1],y[w+2])},Ya.prototype.hasInteriorIntersection=function(u,h,y){for(var w=0;w<u.getIntersectionNum();w++){var O=u.getIntersection(w);if(!O.equals(h)&&!O.equals(y))return!0}return!1},Ya.prototype.checkCollapse=function(u,h,y){if(u.equals(y))throw new ot("found non-noded collapse at "+Ya.fact.createLineString([u,h,y]))},Ya.prototype.interfaces_=function(){return[]},Ya.prototype.getClass=function(){return Ya},Du.fact.get=function(){return new zr},Object.defineProperties(Ya,Du);var so=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],h=arguments[1],y=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=h,this._li=y,h<=0)throw new N("Scale factor must be non-zero");h!==1&&(this._pt=new Q(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new Q,this._p1Scaled=new Q),this.initCorners(this._pt)},Af={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};so.prototype.intersectsScaled=function(u,h){var y=Math.min(u.x,h.x),w=Math.max(u.x,h.x),O=Math.min(u.y,h.y),U=Math.max(u.y,h.y),J=this._maxx<y||this._minx>w||this._maxy<O||this._miny>U;if(J)return!1;var pe=this.intersectsToleranceSquare(u,h);return ve.isTrue(!(J&&pe),"Found bad envelope test"),pe},so.prototype.initCorners=function(u){this._minx=u.x-.5,this._maxx=u.x+.5,this._miny=u.y-.5,this._maxy=u.y+.5,this._corner[0]=new Q(this._maxx,this._maxy),this._corner[1]=new Q(this._minx,this._maxy),this._corner[2]=new Q(this._minx,this._miny),this._corner[3]=new Q(this._maxx,this._miny)},so.prototype.intersects=function(u,h){return this._scaleFactor===1?this.intersectsScaled(u,h):(this.copyScaled(u,this._p0Scaled),this.copyScaled(h,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},so.prototype.scale=function(u){return Math.round(u*this._scaleFactor)},so.prototype.getCoordinate=function(){return this._originalPt},so.prototype.copyScaled=function(u,h){h.x=this.scale(u.x),h.y=this.scale(u.y)},so.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var u=so.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new vt(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv},so.prototype.intersectsPixelClosure=function(u,h){return this._li.computeIntersection(u,h,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},so.prototype.intersectsToleranceSquare=function(u,h){var y=!1,w=!1;return this._li.computeIntersection(u,h,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,h,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(y=!0),this._li.computeIntersection(u,h,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(w=!0),this._li.computeIntersection(u,h,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!y||!w)||!!u.equals(this._pt)||!!h.equals(this._pt))))},so.prototype.addSnappedNode=function(u,h){var y=u.getCoordinate(h),w=u.getCoordinate(h+1);return!!this.intersects(y,w)&&(u.addIntersection(this.getCoordinate(),h),!0)},so.prototype.interfaces_=function(){return[]},so.prototype.getClass=function(){return so},Af.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(so,Af);var Bc=function(){this.tempEnv1=new vt,this.selectedSegment=new cr};Bc.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var u=arguments[0],h=arguments[1];u.getLineSegment(h,this.selectedSegment),this.select(this.selectedSegment)}}},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var sl=function(){this._index=null;var u=arguments[0];this._index=u},jc={HotPixelSnapAction:{configurable:!0}};sl.prototype.snap=function(){if(arguments.length===1){var u=arguments[0];return this.snap(u,null,-1)}if(arguments.length===3){var h=arguments[0],y=arguments[1],w=arguments[2],O=h.getSafeEnvelope(),U=new Cf(h,y,w);return this._index.query(O,{interfaces_:function(){return[Zr]},visitItem:function(J){J.select(O,U)}}),U.isNodeAdded()}},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},jc.HotPixelSnapAction.get=function(){return Cf},Object.defineProperties(sl,jc);var Cf=function(u){function h(){u.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var y=arguments[0],w=arguments[1],O=arguments[2];this._hotPixel=y,this._parentEdge=w,this._hotPixelVertexIndex=O}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.isNodeAdded=function(){return this._isNodeAdded},h.prototype.select=function(){if(arguments.length!==2)return u.prototype.select.apply(this,arguments);var y=arguments[0],w=arguments[1],O=y.getContext();if(this._parentEdge!==null&&O===this._parentEdge&&w===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(O,w)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Bc),Nu=function(){this._li=null,this._interiorIntersections=null;var u=arguments[0];this._li=u,this._interiorIntersections=new Pt};Nu.prototype.processIntersections=function(u,h,y,w){if(u===y&&h===w)return null;var O=u.getCoordinates()[h],U=u.getCoordinates()[h+1],J=y.getCoordinates()[w],pe=y.getCoordinates()[w+1];if(this._li.computeIntersection(O,U,J,pe),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Ae=0;Ae<this._li.getIntersectionNum();Ae++)this._interiorIntersections.add(this._li.getIntersection(Ae));u.addIntersections(this._li,h,0),y.addIntersections(this._li,w,1)}},Nu.prototype.isDone=function(){return!1},Nu.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Nu.prototype.interfaces_=function(){return[Ts]},Nu.prototype.getClass=function(){return Nu};var Go=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var u=arguments[0];this._pm=u,this._li=new Ke,this._li.setPrecisionModel(u),this._scaleFactor=u.getScale()};Go.prototype.checkCorrectness=function(u){var h=Zn.getNodedSubstrings(u),y=new Ya(h);try{y.checkValid()}catch(w){if(!(w instanceof _t))throw w;w.printStackTrace()}},Go.prototype.getNodedSubstrings=function(){return Zn.getNodedSubstrings(this._nodedSegStrings)},Go.prototype.snapRound=function(u,h){var y=this.findInteriorIntersections(u,h);this.computeIntersectionSnaps(y),this.computeVertexSnaps(u)},Go.prototype.findInteriorIntersections=function(u,h){var y=new Nu(h);return this._noder.setSegmentIntersector(y),this._noder.computeNodes(u),y.getInteriorIntersections()},Go.prototype.computeVertexSnaps=function(){if(fe(arguments[0],Kr))for(var u=arguments[0].iterator();u.hasNext();){var h=u.next();this.computeVertexSnaps(h)}else if(arguments[0]instanceof Zn)for(var y=arguments[0],w=y.getCoordinates(),O=0;O<w.length;O++){var U=new so(w[O],this._scaleFactor,this._li);this._pointSnapper.snap(U,y,O)&&y.addIntersection(w[O],O)}},Go.prototype.computeNodes=function(u){this._nodedSegStrings=u,this._noder=new Fc,this._pointSnapper=new sl(this._noder.getIndex()),this.snapRound(u,this._li)},Go.prototype.computeIntersectionSnaps=function(u){for(var h=u.iterator();h.hasNext();){var y=h.next(),w=new so(y,this._scaleFactor,this._li);this._pointSnapper.snap(w)}},Go.prototype.interfaces_=function(){return[Ia]},Go.prototype.getClass=function(){return Go};var uo=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new ar,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var h=arguments[0],y=arguments[1];this._argGeom=h,this._bufParams=y}},Fu={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};uo.prototype.bufferFixedPrecision=function(u){var h=new Ms(new Go(new or(1)),u.getScale()),y=new xo(this._bufParams);y.setWorkingPrecisionModel(u),y.setNoder(h),this._resultGeometry=y.buffer(this._argGeom,this._distance)},uo.prototype.bufferReducedPrecision=function(){var u=this;if(arguments.length===0){for(var h=uo.MAX_PRECISION_DIGITS;h>=0;h--){try{u.bufferReducedPrecision(h)}catch(U){if(!(U instanceof Pa))throw U;u._saveException=U}if(u._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var y=arguments[0],w=uo.precisionScaleFactor(this._argGeom,this._distance,y),O=new or(w);this.bufferFixedPrecision(O)}},uo.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===or.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()},uo.prototype.setQuadrantSegments=function(u){this._bufParams.setQuadrantSegments(u)},uo.prototype.bufferOriginalPrecision=function(){try{var u=new xo(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(h){if(!(h instanceof ot))throw h;this._saveException=h}},uo.prototype.getResultGeometry=function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry},uo.prototype.setEndCapStyle=function(u){this._bufParams.setEndCapStyle(u)},uo.prototype.interfaces_=function(){return[]},uo.prototype.getClass=function(){return uo},uo.bufferOp=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];return new uo(u).getResultGeometry(h)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ut&&typeof arguments[1]=="number"){var y=arguments[0],w=arguments[1],O=arguments[2],U=new uo(y);return U.setQuadrantSegments(O),U.getResultGeometry(w)}if(arguments[2]instanceof ar&&arguments[0]instanceof ut&&typeof arguments[1]=="number"){var J=arguments[0],pe=arguments[1],Ae=arguments[2];return new uo(J,Ae).getResultGeometry(pe)}}else if(arguments.length===4){var A=arguments[0],l=arguments[1],v=arguments[2],S=arguments[3],C=new uo(A);return C.setQuadrantSegments(v),C.setEndCapStyle(S),C.getResultGeometry(l)}},uo.precisionScaleFactor=function(u,h,y){var w=u.getEnvelopeInternal(),O=G.max(Math.abs(w.getMaxX()),Math.abs(w.getMaxY()),Math.abs(w.getMinX()),Math.abs(w.getMinY()))+2*(h>0?h:0),U=y-Math.trunc(Math.log(O)/Math.log(10)+1);return Math.pow(10,U)},Fu.CAP_ROUND.get=function(){return ar.CAP_ROUND},Fu.CAP_BUTT.get=function(){return ar.CAP_FLAT},Fu.CAP_FLAT.get=function(){return ar.CAP_FLAT},Fu.CAP_SQUARE.get=function(){return ar.CAP_SQUARE},Fu.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(uo,Fu);var Io=function(){this._pt=[new Q,new Q],this._distance=B.NaN,this._isNull=!0};Io.prototype.getCoordinates=function(){return this._pt},Io.prototype.getCoordinate=function(u){return this._pt[u]},Io.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var h=arguments[0],y=arguments[1];if(this._isNull)return this.initialize(h,y),null;var w=h.distance(y);w<this._distance&&this.initialize(h,y,w)}},Io.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],h=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(h),this._distance=u.distance(h),this._isNull=!1}else if(arguments.length===3){var y=arguments[0],w=arguments[1],O=arguments[2];this._pt[0].setCoordinate(y),this._pt[1].setCoordinate(w),this._distance=O,this._isNull=!1}},Io.prototype.getDistance=function(){return this._distance},Io.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var h=arguments[0],y=arguments[1];if(this._isNull)return this.initialize(h,y),null;var w=h.distance(y);w>this._distance&&this.initialize(h,y,w)}},Io.prototype.interfaces_=function(){return[]},Io.prototype.getClass=function(){return Io};var Ls=function(){};Ls.prototype.interfaces_=function(){return[]},Ls.prototype.getClass=function(){return Ls},Ls.computeDistance=function(){if(arguments[2]instanceof Io&&arguments[0]instanceof Vr&&arguments[1]instanceof Q)for(var u=arguments[0],h=arguments[1],y=arguments[2],w=u.getCoordinates(),O=new cr,U=0;U<w.length-1;U++){O.setCoordinates(w[U],w[U+1]);var J=O.closestPoint(h);y.setMinimum(J,h)}else if(arguments[2]instanceof Io&&arguments[0]instanceof yi&&arguments[1]instanceof Q){var pe=arguments[0],Ae=arguments[1],A=arguments[2];Ls.computeDistance(pe.getExteriorRing(),Ae,A);for(var l=0;l<pe.getNumInteriorRing();l++)Ls.computeDistance(pe.getInteriorRingN(l),Ae,A)}else if(arguments[2]instanceof Io&&arguments[0]instanceof ut&&arguments[1]instanceof Q){var v=arguments[0],S=arguments[1],C=arguments[2];if(v instanceof Vr)Ls.computeDistance(v,S,C);else if(v instanceof yi)Ls.computeDistance(v,S,C);else if(v instanceof er)for(var M=v,z=0;z<M.getNumGeometries();z++){var V=M.getGeometryN(z);Ls.computeDistance(V,S,C)}else C.setMinimum(v.getCoordinate(),S)}else if(arguments[2]instanceof Io&&arguments[0]instanceof cr&&arguments[1]instanceof Q){var X=arguments[0],ee=arguments[1],se=arguments[2],le=X.closestPoint(ee);se.setMinimum(le,ee)}};var ul=function(u){this._maxPtDist=new Io,this._inputGeom=u||null},wh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};ul.prototype.computeMaxMidpointDistance=function(u){var h=new ds(this._inputGeom);u.apply(h),this._maxPtDist.setMaximum(h.getMaxPointDistance())},ul.prototype.computeMaxVertexDistance=function(u){var h=new au(this._inputGeom);u.apply(h),this._maxPtDist.setMaximum(h.getMaxPointDistance())},ul.prototype.findDistance=function(u){return this.computeMaxVertexDistance(u),this.computeMaxMidpointDistance(u),this._maxPtDist.getDistance()},ul.prototype.getDistancePoints=function(){return this._maxPtDist},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul},wh.MaxPointDistanceFilter.get=function(){return au},wh.MaxMidpointDistanceFilter.get=function(){return ds},Object.defineProperties(ul,wh);var au=function(u){this._maxPtDist=new Io,this._minPtDist=new Io,this._geom=u||null};au.prototype.filter=function(u){this._minPtDist.initialize(),Ls.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},au.prototype.getMaxPointDistance=function(){return this._maxPtDist},au.prototype.interfaces_=function(){return[Lr]},au.prototype.getClass=function(){return au};var ds=function(u){this._maxPtDist=new Io,this._minPtDist=new Io,this._geom=u||null};ds.prototype.filter=function(u,h){if(h===0)return null;var y=u.getCoordinate(h-1),w=u.getCoordinate(h),O=new Q((y.x+w.x)/2,(y.y+w.y)/2);this._minPtDist.initialize(),Ls.computeDistance(this._geom,O,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ds.prototype.isDone=function(){return!1},ds.prototype.isGeometryChanged=function(){return!1},ds.prototype.getMaxPointDistance=function(){return this._maxPtDist},ds.prototype.interfaces_=function(){return[Kt]},ds.prototype.getClass=function(){return ds};var Hi=function(u){this._comps=u||null};Hi.prototype.filter=function(u){u instanceof yi&&this._comps.add(u)},Hi.prototype.interfaces_=function(){return[qt]},Hi.prototype.getClass=function(){return Hi},Hi.getPolygons=function(){if(arguments.length===1){var u=arguments[0];return Hi.getPolygons(u,new Pt)}if(arguments.length===2){var h=arguments[0],y=arguments[1];return h instanceof yi?y.add(h):h instanceof er&&h.apply(new Hi(y)),y}};var ln=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var u=arguments[0];this._lines=u}else if(arguments.length===2){var h=arguments[0],y=arguments[1];this._lines=h,this._isForcedToLineString=y}};ln.prototype.filter=function(u){if(this._isForcedToLineString&&u instanceof Pi){var h=u.getFactory().createLineString(u.getCoordinateSequence());return this._lines.add(h),null}u instanceof Vr&&this._lines.add(u)},ln.prototype.setForceToLineString=function(u){this._isForcedToLineString=u},ln.prototype.interfaces_=function(){return[lr]},ln.prototype.getClass=function(){return ln},ln.getGeometry=function(){if(arguments.length===1){var u=arguments[0];return u.getFactory().buildGeometry(ln.getLines(u))}if(arguments.length===2){var h=arguments[0],y=arguments[1];return h.getFactory().buildGeometry(ln.getLines(h,y))}},ln.getLines=function(){if(arguments.length===1){var u=arguments[0];return ln.getLines(u,!1)}if(arguments.length===2){if(fe(arguments[0],Kr)&&fe(arguments[1],Kr)){for(var h=arguments[0],y=arguments[1],w=h.iterator();w.hasNext();){var O=w.next();ln.getLines(O,y)}return y}if(arguments[0]instanceof ut&&typeof arguments[1]=="boolean"){var U=arguments[0],J=arguments[1],pe=new Pt;return U.apply(new ln(pe,J)),pe}if(arguments[0]instanceof ut&&fe(arguments[1],Kr)){var Ae=arguments[0],A=arguments[1];return Ae instanceof Vr?A.add(Ae):Ae.apply(new ln(A)),A}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&fe(arguments[0],Kr)&&fe(arguments[1],Kr)){for(var l=arguments[0],v=arguments[1],S=arguments[2],C=l.iterator();C.hasNext();){var M=C.next();ln.getLines(M,v,S)}return v}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof ut&&fe(arguments[1],Kr)){var z=arguments[0],V=arguments[1],X=arguments[2];return z.apply(new ln(V,X)),V}}};var ta=function(){if(this._boundaryRule=Rr.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];if(u===null)throw new N("Rule must be non-null");this._boundaryRule=u}}};ta.prototype.locateInternal=function(){if(arguments[0]instanceof Q&&arguments[1]instanceof yi){var u=arguments[0],h=arguments[1];if(h.isEmpty())return oe.EXTERIOR;var y=h.getExteriorRing(),w=this.locateInPolygonRing(u,y);if(w===oe.EXTERIOR)return oe.EXTERIOR;if(w===oe.BOUNDARY)return oe.BOUNDARY;for(var O=0;O<h.getNumInteriorRing();O++){var U=h.getInteriorRingN(O),J=this.locateInPolygonRing(u,U);if(J===oe.INTERIOR)return oe.EXTERIOR;if(J===oe.BOUNDARY)return oe.BOUNDARY}return oe.INTERIOR}if(arguments[0]instanceof Q&&arguments[1]instanceof Vr){var pe=arguments[0],Ae=arguments[1];if(!Ae.getEnvelopeInternal().intersects(pe))return oe.EXTERIOR;var A=Ae.getCoordinates();return Ae.isClosed()||!pe.equals(A[0])&&!pe.equals(A[A.length-1])?rt.isOnLine(pe,A)?oe.INTERIOR:oe.EXTERIOR:oe.BOUNDARY}if(arguments[0]instanceof Q&&arguments[1]instanceof Jr){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?oe.INTERIOR:oe.EXTERIOR}},ta.prototype.locateInPolygonRing=function(u,h){return h.getEnvelopeInternal().intersects(u)?rt.locatePointInRing(u,h.getCoordinates()):oe.EXTERIOR},ta.prototype.intersects=function(u,h){return this.locate(u,h)!==oe.EXTERIOR},ta.prototype.updateLocationInfo=function(u){u===oe.INTERIOR&&(this._isIn=!0),u===oe.BOUNDARY&&this._numBoundaries++},ta.prototype.computeLocation=function(u,h){if(h instanceof Jr&&this.updateLocationInfo(this.locateInternal(u,h)),h instanceof Vr)this.updateLocationInfo(this.locateInternal(u,h));else if(h instanceof yi)this.updateLocationInfo(this.locateInternal(u,h));else if(h instanceof Yr)for(var y=h,w=0;w<y.getNumGeometries();w++){var O=y.getGeometryN(w);this.updateLocationInfo(this.locateInternal(u,O))}else if(h instanceof da)for(var U=h,J=0;J<U.getNumGeometries();J++){var pe=U.getGeometryN(J);this.updateLocationInfo(this.locateInternal(u,pe))}else if(h instanceof er)for(var Ae=new Ta(h);Ae.hasNext();){var A=Ae.next();A!==h&&this.computeLocation(u,A)}},ta.prototype.locate=function(u,h){return h.isEmpty()?oe.EXTERIOR:h instanceof Vr?this.locateInternal(u,h):h instanceof yi?this.locateInternal(u,h):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(u,h),this._boundaryRule.isInBoundary(this._numBoundaries)?oe.BOUNDARY:this._numBoundaries>0||this._isIn?oe.INTERIOR:oe.EXTERIOR)},ta.prototype.interfaces_=function(){return[]},ta.prototype.getClass=function(){return ta};var Oi=function u(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var h=arguments[0],y=arguments[1];u.call(this,h,u.INSIDE_AREA,y)}else if(arguments.length===3){var w=arguments[0],O=arguments[1],U=arguments[2];this._component=w,this._segIndex=O,this._pt=U}},Uc={INSIDE_AREA:{configurable:!0}};Oi.prototype.isInsideArea=function(){return this._segIndex===Oi.INSIDE_AREA},Oi.prototype.getCoordinate=function(){return this._pt},Oi.prototype.getGeometryComponent=function(){return this._component},Oi.prototype.getSegmentIndex=function(){return this._segIndex},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Uc.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Oi,Uc);var ll=function(u){this._pts=u||null};ll.prototype.filter=function(u){u instanceof Jr&&this._pts.add(u)},ll.prototype.interfaces_=function(){return[qt]},ll.prototype.getClass=function(){return ll},ll.getPoints=function(){if(arguments.length===1){var u=arguments[0];return u instanceof Jr?_o.singletonList(u):ll.getPoints(u,new Pt)}if(arguments.length===2){var h=arguments[0],y=arguments[1];return h instanceof Jr?y.add(h):h instanceof er&&h.apply(new ll(y)),y}};var su=function(){this._locations=null;var u=arguments[0];this._locations=u};su.prototype.filter=function(u){(u instanceof Jr||u instanceof Vr||u instanceof yi)&&this._locations.add(new Oi(u,0,u.getCoordinate()))},su.prototype.interfaces_=function(){return[qt]},su.prototype.getClass=function(){return su},su.getLocations=function(u){var h=new Pt;return u.apply(new su(h)),h};var wo=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new ta,this._minDistanceLocation=null,this._minDistance=B.MAX_VALUE,arguments.length===2){var u=arguments[0],h=arguments[1];this._geom=[u,h],this._terminateDistance=0}else if(arguments.length===3){var y=arguments[0],w=arguments[1],O=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=y,this._geom[1]=w,this._terminateDistance=O}};wo.prototype.computeContainmentDistance=function(){if(arguments.length===0){var u=new Array(2).fill(null);if(this.computeContainmentDistance(0,u),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,u)}else if(arguments.length===2){var h=arguments[0],y=arguments[1],w=1-h,O=Hi.getPolygons(this._geom[h]);if(O.size()>0){var U=su.getLocations(this._geom[w]);if(this.computeContainmentDistance(U,O,y),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[w]=y[0],this._minDistanceLocation[h]=y[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&fe(arguments[0],$r)&&fe(arguments[1],$r)){for(var J=arguments[0],pe=arguments[1],Ae=arguments[2],A=0;A<J.size();A++)for(var l=J.get(A),v=0;v<pe.size();v++)if(this.computeContainmentDistance(l,pe.get(v),Ae),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Oi&&arguments[1]instanceof yi){var S=arguments[0],C=arguments[1],M=arguments[2],z=S.getCoordinate();if(oe.EXTERIOR!==this._ptLocator.locate(z,C))return this._minDistance=0,M[0]=S,M[1]=new Oi(C,z),null}}},wo.prototype.computeMinDistanceLinesPoints=function(u,h,y){for(var w=0;w<u.size();w++)for(var O=u.get(w),U=0;U<h.size();U++){var J=h.get(U);if(this.computeMinDistance(O,J,y),this._minDistance<=this._terminateDistance)return null}},wo.prototype.computeFacetDistance=function(){var u=new Array(2).fill(null),h=ln.getLines(this._geom[0]),y=ln.getLines(this._geom[1]),w=ll.getPoints(this._geom[0]),O=ll.getPoints(this._geom[1]);return this.computeMinDistanceLines(h,y,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(h,O,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(y,w,u),this.updateMinDistance(u,!0),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistancePoints(w,O,u),void this.updateMinDistance(u,!1))))},wo.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},wo.prototype.updateMinDistance=function(u,h){if(u[0]===null)return null;h?(this._minDistanceLocation[0]=u[1],this._minDistanceLocation[1]=u[0]):(this._minDistanceLocation[0]=u[0],this._minDistanceLocation[1]=u[1])},wo.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},wo.prototype.computeMinDistance=function(){if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Vr&&arguments[1]instanceof Jr){var u=arguments[0],h=arguments[1],y=arguments[2];if(u.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var w=u.getCoordinates(),O=h.getCoordinate(),U=0;U<w.length-1;U++){var J=rt.distancePointLine(O,w[U],w[U+1]);if(J<this._minDistance){this._minDistance=J;var pe=new cr(w[U],w[U+1]).closestPoint(O);y[0]=new Oi(u,U,pe),y[1]=new Oi(h,0,O)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Vr&&arguments[1]instanceof Vr){var Ae=arguments[0],A=arguments[1],l=arguments[2];if(Ae.getEnvelopeInternal().distance(A.getEnvelopeInternal())>this._minDistance)return null;for(var v=Ae.getCoordinates(),S=A.getCoordinates(),C=0;C<v.length-1;C++)for(var M=0;M<S.length-1;M++){var z=rt.distanceLineLine(v[C],v[C+1],S[M],S[M+1]);if(z<this._minDistance){this._minDistance=z;var V=new cr(v[C],v[C+1]),X=new cr(S[M],S[M+1]),ee=V.closestPoints(X);l[0]=new Oi(Ae,C,ee[0]),l[1]=new Oi(A,M,ee[1])}if(this._minDistance<=this._terminateDistance)return null}}}},wo.prototype.computeMinDistancePoints=function(u,h,y){for(var w=0;w<u.size();w++)for(var O=u.get(w),U=0;U<h.size();U++){var J=h.get(U),pe=O.getCoordinate().distance(J.getCoordinate());if(pe<this._minDistance&&(this._minDistance=pe,y[0]=new Oi(O,0,O.getCoordinate()),y[1]=new Oi(J,0,J.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},wo.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new N("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},wo.prototype.computeMinDistanceLines=function(u,h,y){for(var w=0;w<u.size();w++)for(var O=u.get(w),U=0;U<h.size();U++){var J=h.get(U);if(this.computeMinDistance(O,J,y),this._minDistance<=this._terminateDistance)return null}},wo.prototype.interfaces_=function(){return[]},wo.prototype.getClass=function(){return wo},wo.distance=function(u,h){return new wo(u,h).distance()},wo.isWithinDistance=function(u,h,y){return new wo(u,h,y).distance()<=y},wo.nearestPoints=function(u,h){return new wo(u,h).nearestPoints()};var Zi=function(){this._pt=[new Q,new Q],this._distance=B.NaN,this._isNull=!0};Zi.prototype.getCoordinates=function(){return this._pt},Zi.prototype.getCoordinate=function(u){return this._pt[u]},Zi.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var h=arguments[0],y=arguments[1];if(this._isNull)return this.initialize(h,y),null;var w=h.distance(y);w<this._distance&&this.initialize(h,y,w)}},Zi.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],h=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(h),this._distance=u.distance(h),this._isNull=!1}else if(arguments.length===3){var y=arguments[0],w=arguments[1],O=arguments[2];this._pt[0].setCoordinate(y),this._pt[1].setCoordinate(w),this._distance=O,this._isNull=!1}},Zi.prototype.toString=function(){return un.toLineString(this._pt[0],this._pt[1])},Zi.prototype.getDistance=function(){return this._distance},Zi.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var h=arguments[0],y=arguments[1];if(this._isNull)return this.initialize(h,y),null;var w=h.distance(y);w>this._distance&&this.initialize(h,y,w)}},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi};var ma=function(){};ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma},ma.computeDistance=function(){if(arguments[2]instanceof Zi&&arguments[0]instanceof Vr&&arguments[1]instanceof Q)for(var u=arguments[0],h=arguments[1],y=arguments[2],w=new cr,O=u.getCoordinates(),U=0;U<O.length-1;U++){w.setCoordinates(O[U],O[U+1]);var J=w.closestPoint(h);y.setMinimum(J,h)}else if(arguments[2]instanceof Zi&&arguments[0]instanceof yi&&arguments[1]instanceof Q){var pe=arguments[0],Ae=arguments[1],A=arguments[2];ma.computeDistance(pe.getExteriorRing(),Ae,A);for(var l=0;l<pe.getNumInteriorRing();l++)ma.computeDistance(pe.getInteriorRingN(l),Ae,A)}else if(arguments[2]instanceof Zi&&arguments[0]instanceof ut&&arguments[1]instanceof Q){var v=arguments[0],S=arguments[1],C=arguments[2];if(v instanceof Vr)ma.computeDistance(v,S,C);else if(v instanceof yi)ma.computeDistance(v,S,C);else if(v instanceof er)for(var M=v,z=0;z<M.getNumGeometries();z++){var V=M.getGeometryN(z);ma.computeDistance(V,S,C)}else C.setMinimum(v.getCoordinate(),S)}else if(arguments[2]instanceof Zi&&arguments[0]instanceof cr&&arguments[1]instanceof Q){var X=arguments[0],ee=arguments[1],se=arguments[2],le=X.closestPoint(ee);se.setMinimum(le,ee)}};var Bi=function(){this._g0=null,this._g1=null,this._ptDist=new Zi,this._densifyFrac=0;var u=arguments[0],h=arguments[1];this._g0=u,this._g1=h},Jt={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Bi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Bi.prototype.setDensifyFraction=function(u){if(u>1||u<=0)throw new N("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=u},Bi.prototype.compute=function(u,h){this.computeOrientedDistance(u,h,this._ptDist),this.computeOrientedDistance(h,u,this._ptDist)},Bi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Bi.prototype.computeOrientedDistance=function(u,h,y){var w=new Rs(h);if(u.apply(w),y.setMaximum(w.getMaxPointDistance()),this._densifyFrac>0){var O=new ps(h,this._densifyFrac);u.apply(O),y.setMaximum(O.getMaxPointDistance())}},Bi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.distance=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];return new Bi(u,h).distance()}if(arguments.length===3){var y=arguments[0],w=arguments[1],O=arguments[2],U=new Bi(y,w);return U.setDensifyFraction(O),U.distance()}},Jt.MaxPointDistanceFilter.get=function(){return Rs},Jt.MaxDensifiedByFractionDistanceFilter.get=function(){return ps},Object.defineProperties(Bi,Jt);var Rs=function(){this._maxPtDist=new Zi,this._minPtDist=new Zi,this._euclideanDist=new ma,this._geom=null;var u=arguments[0];this._geom=u};Rs.prototype.filter=function(u){this._minPtDist.initialize(),ma.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rs.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rs.prototype.interfaces_=function(){return[Lr]},Rs.prototype.getClass=function(){return Rs};var ps=function(){this._maxPtDist=new Zi,this._minPtDist=new Zi,this._geom=null,this._numSubSegs=0;var u=arguments[0],h=arguments[1];this._geom=u,this._numSubSegs=Math.trunc(Math.round(1/h))};ps.prototype.filter=function(u,h){if(h===0)return null;for(var y=u.getCoordinate(h-1),w=u.getCoordinate(h),O=(w.x-y.x)/this._numSubSegs,U=(w.y-y.y)/this._numSubSegs,J=0;J<this._numSubSegs;J++){var pe=y.x+J*O,Ae=y.y+J*U,A=new Q(pe,Ae);this._minPtDist.initialize(),ma.computeDistance(this._geom,A,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},ps.prototype.isDone=function(){return!1},ps.prototype.isGeometryChanged=function(){return!1},ps.prototype.getMaxPointDistance=function(){return this._maxPtDist},ps.prototype.interfaces_=function(){return[Kt]},ps.prototype.getClass=function(){return ps};var Ki=function(u,h,y){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._bufDistance=h||null,this._result=y||null},If={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ki.prototype.checkMaximumDistance=function(u,h,y){var w=new Bi(h,u);if(w.setDensifyFraction(.25),this._maxDistanceFound=w.orientedDistance(),this._maxDistanceFound>y){this._isValid=!1;var O=w.getCoordinates();this._errorLocation=O[1],this._errorIndicator=u.getFactory().createLineString(O),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+un.toLineString(O[0],O[1])+")"}},Ki.prototype.isValid=function(){var u=Math.abs(this._bufDistance),h=Ki.MAX_DISTANCE_DIFF_FRAC*u;return this._minValidDistance=u-h,this._maxValidDistance=u+h,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Ki.VERBOSE&&pt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Ki.prototype.checkNegativeValid=function(){if(!(this._input instanceof yi||this._input instanceof da||this._input instanceof er))return null;var u=this.getPolygonLines(this._input);if(this.checkMinimumDistance(u,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(u,this._result,this._maxValidDistance)},Ki.prototype.getErrorIndicator=function(){return this._errorIndicator},Ki.prototype.checkMinimumDistance=function(u,h,y){var w=new wo(u,h,y);if(this._minDistanceFound=w.distance(),this._minDistanceFound<y){this._isValid=!1;var O=w.nearestPoints();this._errorLocation=w.nearestPoints()[1],this._errorIndicator=u.getFactory().createLineString(O),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+un.toLineString(O[0],O[1])+" )"}},Ki.prototype.checkPositiveValid=function(){var u=this._result.getBoundary();if(this.checkMinimumDistance(this._input,u,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,u,this._maxValidDistance)},Ki.prototype.getErrorLocation=function(){return this._errorLocation},Ki.prototype.getPolygonLines=function(u){for(var h=new Pt,y=new ln(h),w=Hi.getPolygons(u).iterator();w.hasNext();)w.next().apply(y);return u.getFactory().buildGeometry(h)},Ki.prototype.getErrorMessage=function(){return this._errMsg},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},If.VERBOSE.get=function(){return!1},If.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Ki,If);var Mt=function(u,h,y){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._distance=h||null,this._result=y||null},Vc={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Mt.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Mt.prototype.checkEnvelope=function(){if(this._distance<0)return null;var u=this._distance*Mt.MAX_ENV_DIFF_FRAC;u===0&&(u=.001);var h=new vt(this._input.getEnvelopeInternal());h.expandBy(this._distance);var y=new vt(this._result.getEnvelopeInternal());y.expandBy(u),y.contains(h)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(y)),this.report("Envelope")},Mt.prototype.checkDistance=function(){var u=new Ki(this._input,this._distance,this._result);u.isValid()||(this._isValid=!1,this._errorMsg=u.getErrorMessage(),this._errorLocation=u.getErrorLocation(),this._errorIndicator=u.getErrorIndicator()),this.report("Distance")},Mt.prototype.checkArea=function(){var u=this._input.getArea(),h=this._result.getArea();this._distance>0&&u>h&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&u<h&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Mt.prototype.checkPolygonal=function(){this._result instanceof yi||this._result instanceof da||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Mt.prototype.getErrorIndicator=function(){return this._errorIndicator},Mt.prototype.getErrorLocation=function(){return this._errorLocation},Mt.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Mt.prototype.report=function(u){if(!Mt.VERBOSE)return null;pt.out.println("Check "+u+": "+(this._isValid?"passed":"FAILED"))},Mt.prototype.getErrorMessage=function(){return this._errorMsg},Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.isValidMsg=function(u,h,y){var w=new Mt(u,h,y);return w.isValid()?null:w.getErrorMessage()},Mt.isValid=function(u,h,y){return!!new Mt(u,h,y).isValid()},Vc.VERBOSE.get=function(){return!1},Vc.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Mt,Vc);var ms=function(){this._pts=null,this._data=null;var u=arguments[0],h=arguments[1];this._pts=u,this._data=h};ms.prototype.getCoordinates=function(){return this._pts},ms.prototype.size=function(){return this._pts.length},ms.prototype.getCoordinate=function(u){return this._pts[u]},ms.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ms.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:Cs.octant(this.getCoordinate(u),this.getCoordinate(u+1))},ms.prototype.setData=function(u){this._data=u},ms.prototype.getData=function(){return this._data},ms.prototype.toString=function(){return un.toLineString(new Yn(this._pts))},ms.prototype.interfaces_=function(){return[Aa]},ms.prototype.getClass=function(){return ms};var lo=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Pt,this._intersectionCount=0,this._keepIntersections=!0;var u=arguments[0];this._li=u,this._interiorIntersection=null};lo.prototype.getInteriorIntersection=function(){return this._interiorIntersection},lo.prototype.setCheckEndSegmentsOnly=function(u){this._isCheckEndSegmentsOnly=u},lo.prototype.getIntersectionSegments=function(){return this._intSegments},lo.prototype.count=function(){return this._intersectionCount},lo.prototype.getIntersections=function(){return this._intersections},lo.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},lo.prototype.setKeepIntersections=function(u){this._keepIntersections=u},lo.prototype.processIntersections=function(u,h,y,w){if(!this._findAllIntersections&&this.hasIntersection()||u===y&&h===w||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(u,h)||this.isEndSegment(y,w)))return null;var O=u.getCoordinates()[h],U=u.getCoordinates()[h+1],J=y.getCoordinates()[w],pe=y.getCoordinates()[w+1];this._li.computeIntersection(O,U,J,pe),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=O,this._intSegments[1]=U,this._intSegments[2]=J,this._intSegments[3]=pe,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},lo.prototype.isEndSegment=function(u,h){return h===0||h>=u.size()-2},lo.prototype.hasIntersection=function(){return this._interiorIntersection!==null},lo.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},lo.prototype.interfaces_=function(){return[Ts]},lo.prototype.getClass=function(){return lo},lo.createAllIntersectionsFinder=function(u){var h=new lo(u);return h.setFindAllIntersections(!0),h},lo.createAnyIntersectionFinder=function(u){return new lo(u)},lo.createIntersectionCounter=function(u){var h=new lo(u);return h.setFindAllIntersections(!0),h.setKeepIntersections(!1),h};var ra=function(){this._li=new Ke,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var u=arguments[0];this._segStrings=u};ra.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},ra.prototype.getIntersections=function(){return this._segInt.getIntersections()},ra.prototype.isValid=function(){return this.execute(),this._isValid},ra.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},ra.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new lo(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var u=new Fc;if(u.setSegmentIntersector(this._segInt),u.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},ra.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pa(this.getErrorMessage(),this._segInt.getInteriorIntersection())},ra.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var u=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+un.toLineString(u[0],u[1])+" and "+un.toLineString(u[2],u[3])},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra},ra.computeIntersections=function(u){var h=new ra(u);return h.setFindAllIntersections(!0),h.isValid(),h.getIntersections()};var ks=function u(){this._nv=null;var h=arguments[0];this._nv=new ra(u.toSegmentStrings(h))};ks.prototype.checkValid=function(){this._nv.checkValid()},ks.prototype.interfaces_=function(){return[]},ks.prototype.getClass=function(){return ks},ks.toSegmentStrings=function(u){for(var h=new Pt,y=u.iterator();y.hasNext();){var w=y.next();h.add(new ms(w.getCoordinates(),w))}return h},ks.checkValid=function(u){new ks(u).checkValid()};var cl=function(u){this._mapOp=u};cl.prototype.map=function(u){for(var h=new Pt,y=0;y<u.getNumGeometries();y++){var w=this._mapOp.map(u.getGeometryN(y));w.isEmpty()||h.add(w)}return u.getFactory().createGeometryCollection(zr.toGeometryArray(h))},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},cl.map=function(u,h){return new cl(h).map(u)};var Ds=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Pt,this._resultLineList=new Pt;var u=arguments[0],h=arguments[1],y=arguments[2];this._op=u,this._geometryFactory=h,this._ptLocator=y};Ds.prototype.collectLines=function(u){for(var h=this._op.getGraph().getEdgeEnds().iterator();h.hasNext();){var y=h.next();this.collectLineEdge(y,u,this._lineEdgesList),this.collectBoundaryTouchEdge(y,u,this._lineEdgesList)}},Ds.prototype.labelIsolatedLine=function(u,h){var y=this._ptLocator.locate(u.getCoordinate(),this._op.getArgGeometry(h));u.getLabel().setLocation(h,y)},Ds.prototype.build=function(u){return this.findCoveredLineEdges(),this.collectLines(u),this.buildLines(u),this._resultLineList},Ds.prototype.collectLineEdge=function(u,h,y){var w=u.getLabel(),O=u.getEdge();u.isLineEdge()&&(u.isVisited()||!nr.isResultOfOp(w,h)||O.isCovered()||(y.add(O),u.setVisitedEdge(!0)))},Ds.prototype.findCoveredLineEdges=function(){for(var u=this._op.getGraph().getNodes().iterator();u.hasNext();)u.next().getEdges().findCoveredLineEdges();for(var h=this._op.getGraph().getEdgeEnds().iterator();h.hasNext();){var y=h.next(),w=y.getEdge();if(y.isLineEdge()&&!w.isCoveredSet()){var O=this._op.isCoveredByA(y.getCoordinate());w.setCovered(O)}}},Ds.prototype.labelIsolatedLines=function(u){for(var h=u.iterator();h.hasNext();){var y=h.next(),w=y.getLabel();y.isIsolated()&&(w.isNull(0)?this.labelIsolatedLine(y,0):this.labelIsolatedLine(y,1))}},Ds.prototype.buildLines=function(u){for(var h=this._lineEdgesList.iterator();h.hasNext();){var y=h.next(),w=this._geometryFactory.createLineString(y.getCoordinates());this._resultLineList.add(w),y.setInResult(!0)}},Ds.prototype.collectBoundaryTouchEdge=function(u,h,y){var w=u.getLabel();return u.isLineEdge()||u.isVisited()||u.isInteriorAreaEdge()||u.getEdge().isInResult()?null:(ve.isTrue(!(u.isInResult()||u.getSym().isInResult())||!u.getEdge().isInResult()),void(nr.isResultOfOp(w,h)&&h===nr.INTERSECTION&&(y.add(u.getEdge()),u.setVisitedEdge(!0))))},Ds.prototype.interfaces_=function(){return[]},Ds.prototype.getClass=function(){return Ds};var zl=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Pt;var u=arguments[0],h=arguments[1];this._op=u,this._geometryFactory=h};zl.prototype.filterCoveredNodeToPoint=function(u){var h=u.getCoordinate();if(!this._op.isCoveredByLA(h)){var y=this._geometryFactory.createPoint(h);this._resultPointList.add(y)}},zl.prototype.extractNonCoveredResultNodes=function(u){for(var h=this._op.getGraph().getNodes().iterator();h.hasNext();){var y=h.next();if(!y.isInResult()&&!y.isIncidentEdgeInResult()&&(y.getEdges().getDegree()===0||u===nr.INTERSECTION)){var w=y.getLabel();nr.isResultOfOp(w,u)&&this.filterCoveredNodeToPoint(y)}}},zl.prototype.build=function(u){return this.extractNonCoveredResultNodes(u),this._resultPointList},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl};var Oo=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Oo.prototype.transformPoint=function(u,h){return this._factory.createPoint(this.transformCoordinates(u.getCoordinateSequence(),u))},Oo.prototype.transformPolygon=function(u,h){var y=!0,w=this.transformLinearRing(u.getExteriorRing(),u);w!==null&&w instanceof Pi&&!w.isEmpty()||(y=!1);for(var O=new Pt,U=0;U<u.getNumInteriorRing();U++){var J=this.transformLinearRing(u.getInteriorRingN(U),u);J===null||J.isEmpty()||(J instanceof Pi||(y=!1),O.add(J))}if(y)return this._factory.createPolygon(w,O.toArray([]));var pe=new Pt;return w!==null&&pe.add(w),pe.addAll(O),this._factory.buildGeometry(pe)},Oo.prototype.createCoordinateSequence=function(u){return this._factory.getCoordinateSequenceFactory().create(u)},Oo.prototype.getInputGeometry=function(){return this._inputGeom},Oo.prototype.transformMultiLineString=function(u,h){for(var y=new Pt,w=0;w<u.getNumGeometries();w++){var O=this.transformLineString(u.getGeometryN(w),u);O!==null&&(O.isEmpty()||y.add(O))}return this._factory.buildGeometry(y)},Oo.prototype.transformCoordinates=function(u,h){return this.copy(u)},Oo.prototype.transformLineString=function(u,h){return this._factory.createLineString(this.transformCoordinates(u.getCoordinateSequence(),u))},Oo.prototype.transformMultiPoint=function(u,h){for(var y=new Pt,w=0;w<u.getNumGeometries();w++){var O=this.transformPoint(u.getGeometryN(w),u);O!==null&&(O.isEmpty()||y.add(O))}return this._factory.buildGeometry(y)},Oo.prototype.transformMultiPolygon=function(u,h){for(var y=new Pt,w=0;w<u.getNumGeometries();w++){var O=this.transformPolygon(u.getGeometryN(w),u);O!==null&&(O.isEmpty()||y.add(O))}return this._factory.buildGeometry(y)},Oo.prototype.copy=function(u){return u.copy()},Oo.prototype.transformGeometryCollection=function(u,h){for(var y=new Pt,w=0;w<u.getNumGeometries();w++){var O=this.transform(u.getGeometryN(w));O!==null&&(this._pruneEmptyGeometry&&O.isEmpty()||y.add(O))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(zr.toGeometryArray(y)):this._factory.buildGeometry(y)},Oo.prototype.transform=function(u){if(this._inputGeom=u,this._factory=u.getFactory(),u instanceof Jr)return this.transformPoint(u,null);if(u instanceof Si)return this.transformMultiPoint(u,null);if(u instanceof Pi)return this.transformLinearRing(u,null);if(u instanceof Vr)return this.transformLineString(u,null);if(u instanceof Yr)return this.transformMultiLineString(u,null);if(u instanceof yi)return this.transformPolygon(u,null);if(u instanceof da)return this.transformMultiPolygon(u,null);if(u instanceof er)return this.transformGeometryCollection(u,null);throw new N("Unknown Geometry subtype: "+u.getClass().getName())},Oo.prototype.transformLinearRing=function(u,h){var y=this.transformCoordinates(u.getCoordinateSequence(),u);if(y===null)return this._factory.createLinearRing(null);var w=y.size();return w>0&&w<4&&!this._preserveType?this._factory.createLineString(y):this._factory.createLinearRing(y)},Oo.prototype.interfaces_=function(){return[]},Oo.prototype.getClass=function(){return Oo};var Ra=function u(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new cr,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Vr&&typeof arguments[1]=="number"){var h=arguments[0],y=arguments[1];u.call(this,h.getCoordinates(),y)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var w=arguments[0],O=arguments[1];this._srcPts=w,this._isClosed=u.isClosed(w),this._snapTolerance=O}};Ra.prototype.snapVertices=function(u,h){for(var y=this._isClosed?u.size()-1:u.size(),w=0;w<y;w++){var O=u.get(w),U=this.findSnapForVertex(O,h);U!==null&&(u.set(w,new Q(U)),w===0&&this._isClosed&&u.set(u.size()-1,new Q(U)))}},Ra.prototype.findSnapForVertex=function(u,h){for(var y=0;y<h.length;y++){if(u.equals2D(h[y]))return null;if(u.distance(h[y])<this._snapTolerance)return h[y]}return null},Ra.prototype.snapTo=function(u){var h=new Ne(this._srcPts);return this.snapVertices(h,u),this.snapSegments(h,u),h.toCoordinateArray()},Ra.prototype.snapSegments=function(u,h){if(h.length===0)return null;var y=h.length;h[0].equals2D(h[h.length-1])&&(y=h.length-1);for(var w=0;w<y;w++){var O=h[w],U=this.findSegmentIndexToSnap(O,u);U>=0&&u.add(U+1,new Q(O),!1)}},Ra.prototype.findSegmentIndexToSnap=function(u,h){for(var y=B.MAX_VALUE,w=-1,O=0;O<h.size()-1;O++){if(this._seg.p0=h.get(O),this._seg.p1=h.get(O+1),this._seg.p0.equals2D(u)||this._seg.p1.equals2D(u)){if(this._allowSnappingToSourceVertices)continue;return-1}var U=this._seg.distance(u);U<this._snapTolerance&&U<y&&(y=U,w=O)}return w},Ra.prototype.setAllowSnappingToSourceVertices=function(u){this._allowSnappingToSourceVertices=u},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra},Ra.isClosed=function(u){return!(u.length<=1)&&u[0].equals2D(u[u.length-1])};var _i=function(u){this._srcGeom=u||null},Eh={SNAP_PRECISION_FACTOR:{configurable:!0}};_i.prototype.snapTo=function(u,h){var y=this.extractTargetCoordinates(u);return new ka(h,y).transform(this._srcGeom)},_i.prototype.snapToSelf=function(u,h){var y=this.extractTargetCoordinates(this._srcGeom),w=new ka(u,y,!0).transform(this._srcGeom),O=w;return h&&fe(O,Mi)&&(O=w.buffer(0)),O},_i.prototype.computeSnapTolerance=function(u){return this.computeMinimumSegmentLength(u)/10},_i.prototype.extractTargetCoordinates=function(u){for(var h=new R,y=u.getCoordinates(),w=0;w<y.length;w++)h.add(y[w]);return h.toArray(new Array(0).fill(null))},_i.prototype.computeMinimumSegmentLength=function(u){for(var h=B.MAX_VALUE,y=0;y<u.length-1;y++){var w=u[y].distance(u[y+1]);w<h&&(h=w)}return h},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i},_i.snap=function(u,h,y){var w=new Array(2).fill(null),O=new _i(u);w[0]=O.snapTo(h,y);var U=new _i(h);return w[1]=U.snapTo(w[0],y),w},_i.computeOverlaySnapTolerance=function(){if(arguments.length===1){var u=arguments[0],h=_i.computeSizeBasedSnapTolerance(u),y=u.getPrecisionModel();if(y.getType()===or.FIXED){var w=1/y.getScale()*2/1.415;w>h&&(h=w)}return h}if(arguments.length===2){var O=arguments[0],U=arguments[1];return Math.min(_i.computeOverlaySnapTolerance(O),_i.computeOverlaySnapTolerance(U))}},_i.computeSizeBasedSnapTolerance=function(u){var h=u.getEnvelopeInternal();return Math.min(h.getHeight(),h.getWidth())*_i.SNAP_PRECISION_FACTOR},_i.snapToSelf=function(u,h,y){return new _i(u).snapToSelf(h,y)},Eh.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(_i,Eh);var ka=function(u){function h(y,w,O){u.call(this),this._snapTolerance=y||null,this._snapPts=w||null,this._isSelfSnap=O!==void 0&&O}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.snapLine=function(y,w){var O=new Ra(y,this._snapTolerance);return O.setAllowSnappingToSourceVertices(this._isSelfSnap),O.snapTo(w)},h.prototype.transformCoordinates=function(y,w){var O=y.toCoordinateArray(),U=this.snapLine(O,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(U)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Oo),Li=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Li.prototype.getCommon=function(){return B.longBitsToDouble(this._commonBits)},Li.prototype.add=function(u){var h=B.doubleToLongBits(u);if(this._isFirst)return this._commonBits=h,this._commonSignExp=Li.signExpBits(this._commonBits),this._isFirst=!1,null;if(Li.signExpBits(h)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=Li.numCommonMostSigMantissaBits(this._commonBits,h),this._commonBits=Li.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},Li.prototype.toString=function(){if(arguments.length===1){var u=arguments[0],h=B.longBitsToDouble(u),y="0000000000000000000000000000000000000000000000000000000000000000"+B.toBinaryString(u),w=y.substring(y.length-64);return w.substring(0,1)+"  "+w.substring(1,12)+"(exp) "+w.substring(12)+" [ "+h+" ]"}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.getBit=function(u,h){return u&1<<h?1:0},Li.signExpBits=function(u){return u>>52},Li.zeroLowerBits=function(u,h){return u&~((1<<h)-1)},Li.numCommonMostSigMantissaBits=function(u,h){for(var y=0,w=52;w>=0;w--){if(Li.getBit(u,w)!==Li.getBit(h,w))return y;y++}return 52};var uu=function(){this._commonCoord=null,this._ccFilter=new fl},Of={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};uu.prototype.addCommonBits=function(u){var h=new lu(this._commonCoord);u.apply(h),u.geometryChanged()},uu.prototype.removeCommonBits=function(u){if(this._commonCoord.x===0&&this._commonCoord.y===0)return u;var h=new Q(this._commonCoord);h.x=-h.x,h.y=-h.y;var y=new lu(h);return u.apply(y),u.geometryChanged(),u},uu.prototype.getCommonCoordinate=function(){return this._commonCoord},uu.prototype.add=function(u){u.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},uu.prototype.interfaces_=function(){return[]},uu.prototype.getClass=function(){return uu},Of.CommonCoordinateFilter.get=function(){return fl},Of.Translater.get=function(){return lu},Object.defineProperties(uu,Of);var fl=function(){this._commonBitsX=new Li,this._commonBitsY=new Li};fl.prototype.filter=function(u){this._commonBitsX.add(u.x),this._commonBitsY.add(u.y)},fl.prototype.getCommonCoordinate=function(){return new Q(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},fl.prototype.interfaces_=function(){return[Lr]},fl.prototype.getClass=function(){return fl};var lu=function(){this.trans=null;var u=arguments[0];this.trans=u};lu.prototype.filter=function(u,h){var y=u.getOrdinate(h,0)+this.trans.x,w=u.getOrdinate(h,1)+this.trans.y;u.setOrdinate(h,0,y),u.setOrdinate(h,1,w)},lu.prototype.isDone=function(){return!1},lu.prototype.isGeometryChanged=function(){return!0},lu.prototype.interfaces_=function(){return[Kt]},lu.prototype.getClass=function(){return lu};var Ji=function(u,h){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=u,this._geom[1]=h,this.computeSnapTolerance()};Ji.prototype.selfSnap=function(u){return new _i(u).snapTo(u,this._snapTolerance)},Ji.prototype.removeCommonBits=function(u){this._cbr=new uu,this._cbr.add(u[0]),this._cbr.add(u[1]);var h=new Array(2).fill(null);return h[0]=this._cbr.removeCommonBits(u[0].copy()),h[1]=this._cbr.removeCommonBits(u[1].copy()),h},Ji.prototype.prepareResult=function(u){return this._cbr.addCommonBits(u),u},Ji.prototype.getResultGeometry=function(u){var h=this.snap(this._geom),y=nr.overlayOp(h[0],h[1],u);return this.prepareResult(y)},Ji.prototype.checkValid=function(u){u.isValid()||pt.out.println("Snapped geometry is invalid")},Ji.prototype.computeSnapTolerance=function(){this._snapTolerance=_i.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Ji.prototype.snap=function(u){var h=this.removeCommonBits(u);return _i.snap(h[0],h[1],this._snapTolerance)},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji},Ji.overlayOp=function(u,h,y){return new Ji(u,h).getResultGeometry(y)},Ji.union=function(u,h){return Ji.overlayOp(u,h,nr.UNION)},Ji.intersection=function(u,h){return Ji.overlayOp(u,h,nr.INTERSECTION)},Ji.symDifference=function(u,h){return Ji.overlayOp(u,h,nr.SYMDIFFERENCE)},Ji.difference=function(u,h){return Ji.overlayOp(u,h,nr.DIFFERENCE)};var ci=function(u,h){this._geom=new Array(2).fill(null),this._geom[0]=u,this._geom[1]=h};ci.prototype.getResultGeometry=function(u){var h=null,y=!1,w=null;try{h=nr.overlayOp(this._geom[0],this._geom[1],u),y=!0}catch(O){if(!(O instanceof ot))throw O;w=O}if(!y)try{h=Ji.overlayOp(this._geom[0],this._geom[1],u)}catch(O){throw O instanceof ot?w:O}return h},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.overlayOp=function(u,h,y){return new ci(u,h).getResultGeometry(y)},ci.union=function(u,h){return ci.overlayOp(u,h,nr.UNION)},ci.intersection=function(u,h){return ci.overlayOp(u,h,nr.INTERSECTION)},ci.symDifference=function(u,h){return ci.overlayOp(u,h,nr.SYMDIFFERENCE)},ci.difference=function(u,h){return ci.overlayOp(u,h,nr.DIFFERENCE)};var fi=function(){this.mce=null,this.chainIndex=null;var u=arguments[0],h=arguments[1];this.mce=u,this.chainIndex=h};fi.prototype.computeIntersections=function(u,h){this.mce.computeIntersectsForChain(this.chainIndex,u.mce,u.chainIndex,h)},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi};var To=function u(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var h=arguments[0],y=arguments[1];this._eventType=u.DELETE,this._xValue=h,this._insertEvent=y}else if(arguments.length===3){var w=arguments[0],O=arguments[1],U=arguments[2];this._eventType=u.INSERT,this._label=w,this._xValue=O,this._obj=U}},Bl={INSERT:{configurable:!0},DELETE:{configurable:!0}};To.prototype.isDelete=function(){return this._eventType===To.DELETE},To.prototype.setDeleteEventIndex=function(u){this._deleteEventIndex=u},To.prototype.getObject=function(){return this._obj},To.prototype.compareTo=function(u){var h=u;return this._xValue<h._xValue?-1:this._xValue>h._xValue?1:this._eventType<h._eventType?-1:this._eventType>h._eventType?1:0},To.prototype.getInsertEvent=function(){return this._insertEvent},To.prototype.isInsert=function(){return this._eventType===To.INSERT},To.prototype.isSameLabel=function(u){return this._label!==null&&this._label===u._label},To.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},To.prototype.interfaces_=function(){return[Z]},To.prototype.getClass=function(){return To},Bl.INSERT.get=function(){return 1},Bl.DELETE.get=function(){return 2},Object.defineProperties(To,Bl);var Tf=function(){};Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf};var ji=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var u=arguments[0],h=arguments[1],y=arguments[2];this._li=u,this._includeProper=h,this._recordIsolated=y};ji.prototype.isTrivialIntersection=function(u,h,y,w){if(u===y&&this._li.getIntersectionNum()===1){if(ji.isAdjacentSegments(h,w))return!0;if(u.isClosed()){var O=u.getNumPoints()-1;if(h===0&&w===O||w===0&&h===O)return!0}}return!1},ji.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ji.prototype.setIsDoneIfProperInt=function(u){this._isDoneWhenProperInt=u},ji.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ji.prototype.isBoundaryPointInternal=function(u,h){for(var y=h.iterator();y.hasNext();){var w=y.next().getCoordinate();if(u.isIntersection(w))return!0}return!1},ji.prototype.hasProperIntersection=function(){return this._hasProper},ji.prototype.hasIntersection=function(){return this._hasIntersection},ji.prototype.isDone=function(){return this._isDone},ji.prototype.isBoundaryPoint=function(u,h){return h!==null&&(!!this.isBoundaryPointInternal(u,h[0])||!!this.isBoundaryPointInternal(u,h[1]))},ji.prototype.setBoundaryNodes=function(u,h){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=u,this._bdyNodes[1]=h},ji.prototype.addIntersections=function(u,h,y,w){if(u===y&&h===w)return null;this.numTests++;var O=u.getCoordinates()[h],U=u.getCoordinates()[h+1],J=y.getCoordinates()[w],pe=y.getCoordinates()[w+1];this._li.computeIntersection(O,U,J,pe),this._li.hasIntersection()&&(this._recordIsolated&&(u.setIsolated(!1),y.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(u,h,y,w)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(u.addIntersections(this._li,h,0),y.addIntersections(this._li,w,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ji.isAdjacentSegments=function(u,h){return Math.abs(u-h)===1};var um=function(u){function h(){u.call(this),this.events=new Pt,this.nOverlaps=null}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.prepareEvents=function(){_o.sort(this.events);for(var y=0;y<this.events.size();y++){var w=this.events.get(y);w.isDelete()&&w.getInsertEvent().setDeleteEventIndex(y)}},h.prototype.computeIntersections=function(){if(arguments.length===1){var y=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var w=0;w<this.events.size();w++){var O=this.events.get(w);if(O.isInsert()&&this.processOverlaps(w,O.getDeleteEventIndex(),O,y),y.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof ji&&fe(arguments[0],$r)&&fe(arguments[1],$r)){var U=arguments[0],J=arguments[1],pe=arguments[2];this.addEdges(U,U),this.addEdges(J,J),this.computeIntersections(pe)}else if(typeof arguments[2]=="boolean"&&fe(arguments[0],$r)&&arguments[1]instanceof ji){var Ae=arguments[0],A=arguments[1];arguments[2]?this.addEdges(Ae,null):this.addEdges(Ae),this.computeIntersections(A)}}},h.prototype.addEdge=function(y,w){for(var O=y.getMonotoneChainEdge(),U=O.getStartIndexes(),J=0;J<U.length-1;J++){var pe=new fi(O,J),Ae=new To(w,O.getMinX(J),pe);this.events.add(Ae),this.events.add(new To(O.getMaxX(J),Ae))}},h.prototype.processOverlaps=function(y,w,O,U){for(var J=O.getObject(),pe=y;pe<w;pe++){var Ae=this.events.get(pe);if(Ae.isInsert()){var A=Ae.getObject();O.isSameLabel(Ae)||(J.computeIntersections(A,U),this.nOverlaps++)}}},h.prototype.addEdges=function(){if(arguments.length===1)for(var y=arguments[0].iterator();y.hasNext();){var w=y.next();this.addEdge(w,w)}else if(arguments.length===2)for(var O=arguments[0],U=arguments[1],J=O.iterator();J.hasNext();){var pe=J.next();this.addEdge(pe,U)}},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(Tf),cu=function(){this._min=B.POSITIVE_INFINITY,this._max=B.NEGATIVE_INFINITY},Ns={NodeComparator:{configurable:!0}};cu.prototype.getMin=function(){return this._min},cu.prototype.intersects=function(u,h){return!(this._min>h||this._max<u)},cu.prototype.getMax=function(){return this._max},cu.prototype.toString=function(){return un.toLineString(new Q(this._min,0),new Q(this._max,0))},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},Ns.NodeComparator.get=function(){return hl},Object.defineProperties(cu,Ns);var hl=function(){};hl.prototype.compare=function(u,h){var y=u,w=h,O=(y._min+y._max)/2,U=(w._min+w._max)/2;return O<U?-1:O>U?1:0},hl.prototype.interfaces_=function(){return[W]},hl.prototype.getClass=function(){return hl};var gr=function(u){function h(){u.call(this),this._item=null;var y=arguments[0],w=arguments[1],O=arguments[2];this._min=y,this._max=w,this._item=O}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.query=function(y,w,O){if(!this.intersects(y,w))return null;O.visitItem(this._item)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(cu),Ir=function(u){function h(){u.call(this),this._node1=null,this._node2=null;var y=arguments[0],w=arguments[1];this._node1=y,this._node2=w,this.buildExtent(this._node1,this._node2)}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.buildExtent=function(y,w){this._min=Math.min(y._min,w._min),this._max=Math.max(y._max,w._max)},h.prototype.query=function(y,w,O){if(!this.intersects(y,w))return null;this._node1!==null&&this._node1.query(y,w,O),this._node2!==null&&this._node2.query(y,w,O)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}(cu),Ha=function(){this._leaves=new Pt,this._root=null,this._level=0};Ha.prototype.buildTree=function(){_o.sort(this._leaves,new cu.NodeComparator);for(var u=this._leaves,h=null,y=new Pt;;){if(this.buildLevel(u,y),y.size()===1)return y.get(0);h=u,u=y,y=h}},Ha.prototype.insert=function(u,h,y){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gr(u,h,y))},Ha.prototype.query=function(u,h,y){this.init(),this._root.query(u,h,y)},Ha.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},Ha.prototype.printNode=function(u){pt.out.println(un.toLineString(new Q(u._min,this._level),new Q(u._max,this._level)))},Ha.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},Ha.prototype.buildLevel=function(u,h){this._level++,h.clear();for(var y=0;y<u.size();y+=2){var w=u.get(y);if((y+1<u.size()?u.get(y):null)===null)h.add(w);else{var O=new Ir(u.get(y),u.get(y+1));h.add(O)}}},Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha};var jl=function(){this._items=new Pt};jl.prototype.visitItem=function(u){this._items.add(u)},jl.prototype.getItems=function(){return this._items},jl.prototype.interfaces_=function(){return[Zr]},jl.prototype.getClass=function(){return jl};var Ul=function(){this._index=null;var u=arguments[0];if(!fe(u,Mi))throw new N("Argument must be Polygonal");this._index=new na(u)},ga={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ul.prototype.locate=function(u){var h=new mt(u),y=new Fs(h);return this._index.query(u.y,u.y,y),h.getLocation()},Ul.prototype.interfaces_=function(){return[Os]},Ul.prototype.getClass=function(){return Ul},ga.SegmentVisitor.get=function(){return Fs},ga.IntervalIndexedGeometry.get=function(){return na},Object.defineProperties(Ul,ga);var Fs=function(){this._counter=null;var u=arguments[0];this._counter=u};Fs.prototype.visitItem=function(u){var h=u;this._counter.countSegment(h.getCoordinate(0),h.getCoordinate(1))},Fs.prototype.interfaces_=function(){return[Zr]},Fs.prototype.getClass=function(){return Fs};var na=function(){this._index=new Ha;var u=arguments[0];this.init(u)};na.prototype.init=function(u){for(var h=ln.getLines(u).iterator();h.hasNext();){var y=h.next().getCoordinates();this.addLine(y)}},na.prototype.addLine=function(u){for(var h=1;h<u.length;h++){var y=new cr(u[h-1],u[h]),w=Math.min(y.p0.y,y.p1.y),O=Math.max(y.p0.y,y.p1.y);this._index.insert(w,O,y)}},na.prototype.query=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1],y=new jl;return this._index.query(u,h,y),y.getItems()}if(arguments.length===3){var w=arguments[0],O=arguments[1],U=arguments[2];this._index.query(w,O,U)}},na.prototype.interfaces_=function(){return[]},na.prototype.getClass=function(){return na};var Mf=function(u){function h(){if(u.call(this),this._parentGeom=null,this._lineEdgeMap=new Ou,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new ta,arguments.length===2){var y=arguments[0],w=arguments[1],O=Rr.OGC_SFS_BOUNDARY_RULE;this._argIndex=y,this._parentGeom=w,this._boundaryNodeRule=O,w!==null&&this.add(w)}else if(arguments.length===3){var U=arguments[0],J=arguments[1],pe=arguments[2];this._argIndex=U,this._parentGeom=J,this._boundaryNodeRule=pe,J!==null&&this.add(J)}}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.insertBoundaryPoint=function(y,w){var O=this._nodes.addNode(w).getLabel(),U=1;oe.NONE,O.getLocation(y,It.ON)===oe.BOUNDARY&&U++;var J=h.determineBoundary(this._boundaryNodeRule,U);O.setLocation(y,J)},h.prototype.computeSelfNodes=function(){if(arguments.length===2){var y=arguments[0],w=arguments[1];return this.computeSelfNodes(y,w,!1)}if(arguments.length===3){var O=arguments[0],U=arguments[1],J=arguments[2],pe=new ji(O,!0,!1);pe.setIsDoneIfProperInt(J);var Ae=this.createEdgeSetIntersector(),A=this._parentGeom instanceof Pi||this._parentGeom instanceof yi||this._parentGeom instanceof da,l=U||!A;return Ae.computeIntersections(this._edges,pe,l),this.addSelfIntersectionNodes(this._argIndex),pe}},h.prototype.computeSplitEdges=function(y){for(var w=this._edges.iterator();w.hasNext();)w.next().eiList.addSplitEdges(y)},h.prototype.computeEdgeIntersections=function(y,w,O){var U=new ji(w,O,!0);return U.setBoundaryNodes(this.getBoundaryNodes(),y.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,y._edges,U),U},h.prototype.getGeometry=function(){return this._parentGeom},h.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},h.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},h.prototype.addPoint=function(){if(arguments[0]instanceof Jr){var y=arguments[0].getCoordinate();this.insertPoint(this._argIndex,y,oe.INTERIOR)}else if(arguments[0]instanceof Q){var w=arguments[0];this.insertPoint(this._argIndex,w,oe.INTERIOR)}},h.prototype.addPolygon=function(y){this.addPolygonRing(y.getExteriorRing(),oe.EXTERIOR,oe.INTERIOR);for(var w=0;w<y.getNumInteriorRing();w++){var O=y.getInteriorRingN(w);this.addPolygonRing(O,oe.INTERIOR,oe.EXTERIOR)}},h.prototype.addEdge=function(y){this.insertEdge(y);var w=y.getCoordinates();this.insertPoint(this._argIndex,w[0],oe.BOUNDARY),this.insertPoint(this._argIndex,w[w.length-1],oe.BOUNDARY)},h.prototype.addLineString=function(y){var w=ce.removeRepeatedPoints(y.getCoordinates());if(w.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=w[0],null;var O=new La(w,new Qr(this._argIndex,oe.INTERIOR));this._lineEdgeMap.put(y,O),this.insertEdge(O),ve.isTrue(w.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,w[0]),this.insertBoundaryPoint(this._argIndex,w[w.length-1])},h.prototype.getInvalidPoint=function(){return this._invalidPoint},h.prototype.getBoundaryPoints=function(){for(var y=this.getBoundaryNodes(),w=new Array(y.size()).fill(null),O=0,U=y.iterator();U.hasNext();){var J=U.next();w[O++]=J.getCoordinate().copy()}return w},h.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},h.prototype.addSelfIntersectionNode=function(y,w,O){if(this.isBoundaryNode(y,w))return null;O===oe.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(y,w):this.insertPoint(y,w,O)},h.prototype.addPolygonRing=function(y,w,O){if(y.isEmpty())return null;var U=ce.removeRepeatedPoints(y.getCoordinates());if(U.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=U[0],null;var J=w,pe=O;rt.isCCW(U)&&(J=O,pe=w);var Ae=new La(U,new Qr(this._argIndex,oe.BOUNDARY,J,pe));this._lineEdgeMap.put(y,Ae),this.insertEdge(Ae),this.insertPoint(this._argIndex,U[0],oe.BOUNDARY)},h.prototype.insertPoint=function(y,w,O){var U=this._nodes.addNode(w),J=U.getLabel();J===null?U._label=new Qr(y,O):J.setLocation(y,O)},h.prototype.createEdgeSetIntersector=function(){return new um},h.prototype.addSelfIntersectionNodes=function(y){for(var w=this._edges.iterator();w.hasNext();)for(var O=w.next(),U=O.getLabel().getLocation(y),J=O.eiList.iterator();J.hasNext();){var pe=J.next();this.addSelfIntersectionNode(y,pe.coord,U)}},h.prototype.add=function(){if(arguments.length!==1)return u.prototype.add.apply(this,arguments);var y=arguments[0];if(y.isEmpty())return null;if(y instanceof da&&(this._useBoundaryDeterminationRule=!1),y instanceof yi)this.addPolygon(y);else if(y instanceof Vr)this.addLineString(y);else if(y instanceof Jr)this.addPoint(y);else if(y instanceof Si)this.addCollection(y);else if(y instanceof Yr)this.addCollection(y);else if(y instanceof da)this.addCollection(y);else{if(!(y instanceof er))throw new Error(y.getClass().getName());this.addCollection(y)}},h.prototype.addCollection=function(y){for(var w=0;w<y.getNumGeometries();w++){var O=y.getGeometryN(w);this.add(O)}},h.prototype.locate=function(y){return fe(this._parentGeom,Mi)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Ul(this._parentGeom)),this._areaPtLocator.locate(y)):this._ptLocator.locate(y,this._parentGeom)},h.prototype.findEdge=function(){if(arguments.length===1){var y=arguments[0];return this._lineEdgeMap.get(y)}return u.prototype.findEdge.apply(this,arguments)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h.determineBoundary=function(y,w){return y.isInBoundary(w)?oe.BOUNDARY:oe.INTERIOR},h}(rn),$u=function(){if(this._li=new Ke,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var u=arguments[0];this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Mf(0,u)}else if(arguments.length===2){var h=arguments[0],y=arguments[1],w=Rr.OGC_SFS_BOUNDARY_RULE;h.getPrecisionModel().compareTo(y.getPrecisionModel())>=0?this.setComputationPrecision(h.getPrecisionModel()):this.setComputationPrecision(y.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mf(0,h,w),this._arg[1]=new Mf(1,y,w)}else if(arguments.length===3){var O=arguments[0],U=arguments[1],J=arguments[2];O.getPrecisionModel().compareTo(U.getPrecisionModel())>=0?this.setComputationPrecision(O.getPrecisionModel()):this.setComputationPrecision(U.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Mf(0,O,J),this._arg[1]=new Mf(1,U,J)}};$u.prototype.getArgGeometry=function(u){return this._arg[u].getGeometry()},$u.prototype.setComputationPrecision=function(u){this._resultPrecisionModel=u,this._li.setPrecisionModel(this._resultPrecisionModel)},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u};var ei=function(){};ei.prototype.interfaces_=function(){return[]},ei.prototype.getClass=function(){return ei},ei.map=function(){if(arguments[0]instanceof ut&&fe(arguments[1],ei.MapOp)){for(var u=arguments[0],h=arguments[1],y=new Pt,w=0;w<u.getNumGeometries();w++){var O=h.map(u.getGeometryN(w));O!==null&&y.add(O)}return u.getFactory().buildGeometry(y)}if(fe(arguments[0],Kr)&&fe(arguments[1],ei.MapOp)){for(var U=arguments[0],J=arguments[1],pe=new Pt,Ae=U.iterator();Ae.hasNext();){var A=Ae.next(),l=J.map(A);l!==null&&pe.add(l)}return pe}},ei.MapOp=function(){};var nr=function(u){function h(){var y=arguments[0],w=arguments[1];u.call(this,y,w),this._ptLocator=new ta,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Vo,this._resultPolyList=new Pt,this._resultLineList=new Pt,this._resultPointList=new Pt,this._graph=new rn(new zc),this._geomFact=y.getFactory()}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.insertUniqueEdge=function(y){var w=this._edgeList.findEqualEdge(y);if(w!==null){var O=w.getLabel(),U=y.getLabel();w.isPointwiseEqual(y)||(U=new Qr(y.getLabel())).flip();var J=w.getDepth();J.isNull()&&J.add(O),J.add(U),O.merge(U)}else this._edgeList.add(y)},h.prototype.getGraph=function(){return this._graph},h.prototype.cancelDuplicateResultEdges=function(){for(var y=this._graph.getEdgeEnds().iterator();y.hasNext();){var w=y.next(),O=w.getSym();w.isInResult()&&O.isInResult()&&(w.setInResult(!1),O.setInResult(!1))}},h.prototype.isCoveredByLA=function(y){return!!this.isCovered(y,this._resultLineList)||!!this.isCovered(y,this._resultPolyList)},h.prototype.computeGeometry=function(y,w,O,U){var J=new Pt;return J.addAll(y),J.addAll(w),J.addAll(O),J.isEmpty()?h.createEmptyResult(U,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(J)},h.prototype.mergeSymLabels=function(){for(var y=this._graph.getNodes().iterator();y.hasNext();)y.next().getEdges().mergeSymLabels()},h.prototype.isCovered=function(y,w){for(var O=w.iterator();O.hasNext();){var U=O.next();if(this._ptLocator.locate(y,U)!==oe.EXTERIOR)return!0}return!1},h.prototype.replaceCollapsedEdges=function(){for(var y=new Pt,w=this._edgeList.iterator();w.hasNext();){var O=w.next();O.isCollapsed()&&(w.remove(),y.add(O.getCollapsedEdge()))}this._edgeList.addAll(y)},h.prototype.updateNodeLabelling=function(){for(var y=this._graph.getNodes().iterator();y.hasNext();){var w=y.next(),O=w.getEdges().getLabel();w.getLabel().merge(O)}},h.prototype.getResultGeometry=function(y){return this.computeOverlay(y),this._resultGeom},h.prototype.insertUniqueEdges=function(y){for(var w=y.iterator();w.hasNext();){var O=w.next();this.insertUniqueEdge(O)}},h.prototype.computeOverlay=function(y){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var w=new Pt;this._arg[0].computeSplitEdges(w),this._arg[1].computeSplitEdges(w),this.insertUniqueEdges(w),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ks.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(y),this.cancelDuplicateResultEdges();var O=new Wi(this._geomFact);O.add(this._graph),this._resultPolyList=O.getPolygons();var U=new Ds(this,this._geomFact,this._ptLocator);this._resultLineList=U.build(y);var J=new zl(this,this._geomFact,this._ptLocator);this._resultPointList=J.build(y),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,y)},h.prototype.labelIncompleteNode=function(y,w){var O=this._ptLocator.locate(y.getCoordinate(),this._arg[w].getGeometry());y.getLabel().setLocation(w,O)},h.prototype.copyPoints=function(y){for(var w=this._arg[y].getNodeIterator();w.hasNext();){var O=w.next();this._graph.addNode(O.getCoordinate()).setLabel(y,O.getLabel().getLocation(y))}},h.prototype.findResultAreaEdges=function(y){for(var w=this._graph.getEdgeEnds().iterator();w.hasNext();){var O=w.next(),U=O.getLabel();U.isArea()&&!O.isInteriorAreaEdge()&&h.isResultOfOp(U.getLocation(0,It.RIGHT),U.getLocation(1,It.RIGHT),y)&&O.setInResult(!0)}},h.prototype.computeLabelsFromDepths=function(){for(var y=this._edgeList.iterator();y.hasNext();){var w=y.next(),O=w.getLabel(),U=w.getDepth();if(!U.isNull()){U.normalize();for(var J=0;J<2;J++)O.isNull(J)||!O.isArea()||U.isNull(J)||(U.getDelta(J)===0?O.toLine(J):(ve.isTrue(!U.isNull(J,It.LEFT),"depth of LEFT side has not been initialized"),O.setLocation(J,It.LEFT,U.getLocation(J,It.LEFT)),ve.isTrue(!U.isNull(J,It.RIGHT),"depth of RIGHT side has not been initialized"),O.setLocation(J,It.RIGHT,U.getLocation(J,It.RIGHT))))}}},h.prototype.computeLabelling=function(){for(var y=this._graph.getNodes().iterator();y.hasNext();)y.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},h.prototype.labelIncompleteNodes=function(){for(var y=this._graph.getNodes().iterator();y.hasNext();){var w=y.next(),O=w.getLabel();w.isIsolated()&&(O.isNull(0)?this.labelIncompleteNode(w,0):this.labelIncompleteNode(w,1)),w.getEdges().updateLabelling(O)}},h.prototype.isCoveredByA=function(y){return!!this.isCovered(y,this._resultPolyList)},h.prototype.interfaces_=function(){return[]},h.prototype.getClass=function(){return h},h}($u);nr.overlayOp=function(u,h,y){return new nr(u,h).getResultGeometry(y)},nr.intersection=function(u,h){if(u.isEmpty()||h.isEmpty())return nr.createEmptyResult(nr.INTERSECTION,u,h,u.getFactory());if(u.isGeometryCollection()){var y=h;return cl.map(u,{interfaces_:function(){return[ei.MapOp]},map:function(w){return w.intersection(y)}})}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(h),ci.overlayOp(u,h,nr.INTERSECTION)},nr.symDifference=function(u,h){if(u.isEmpty()||h.isEmpty()){if(u.isEmpty()&&h.isEmpty())return nr.createEmptyResult(nr.SYMDIFFERENCE,u,h,u.getFactory());if(u.isEmpty())return h.copy();if(h.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(h),ci.overlayOp(u,h,nr.SYMDIFFERENCE)},nr.resultDimension=function(u,h,y){var w=h.getDimension(),O=y.getDimension(),U=-1;switch(u){case nr.INTERSECTION:U=Math.min(w,O);break;case nr.UNION:U=Math.max(w,O);break;case nr.DIFFERENCE:U=w;break;case nr.SYMDIFFERENCE:U=Math.max(w,O)}return U},nr.createEmptyResult=function(u,h,y,w){var O=null;switch(nr.resultDimension(u,h,y)){case-1:O=w.createGeometryCollection(new Array(0).fill(null));break;case 0:O=w.createPoint();break;case 1:O=w.createLineString();break;case 2:O=w.createPolygon()}return O},nr.difference=function(u,h){return u.isEmpty()?nr.createEmptyResult(nr.DIFFERENCE,u,h,u.getFactory()):h.isEmpty()?u.copy():(u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(h),ci.overlayOp(u,h,nr.DIFFERENCE))},nr.isResultOfOp=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1],y=u.getLocation(0),w=u.getLocation(1);return nr.isResultOfOp(y,w,h)}if(arguments.length===3){var O=arguments[0],U=arguments[1],J=arguments[2];switch(O===oe.BOUNDARY&&(O=oe.INTERIOR),U===oe.BOUNDARY&&(U=oe.INTERIOR),J){case nr.INTERSECTION:return O===oe.INTERIOR&&U===oe.INTERIOR;case nr.UNION:return O===oe.INTERIOR||U===oe.INTERIOR;case nr.DIFFERENCE:return O===oe.INTERIOR&&U!==oe.INTERIOR;case nr.SYMDIFFERENCE:return O===oe.INTERIOR&&U!==oe.INTERIOR||O!==oe.INTERIOR&&U===oe.INTERIOR}return!1}},nr.INTERSECTION=1,nr.UNION=2,nr.DIFFERENCE=3,nr.SYMDIFFERENCE=4;var zu=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new ta,this._seg=new cr;var u=arguments[0],h=arguments[1];this._g=u,this._boundaryDistanceTolerance=h,this._linework=this.extractLinework(u)};zu.prototype.isWithinToleranceOfBoundary=function(u){for(var h=0;h<this._linework.getNumGeometries();h++)for(var y=this._linework.getGeometryN(h).getCoordinateSequence(),w=0;w<y.size()-1;w++)if(y.getCoordinate(w,this._seg.p0),y.getCoordinate(w+1,this._seg.p1),this._seg.distance(u)<=this._boundaryDistanceTolerance)return!0;return!1},zu.prototype.getLocation=function(u){return this.isWithinToleranceOfBoundary(u)?oe.BOUNDARY:this._ptLocator.locate(u,this._g)},zu.prototype.extractLinework=function(u){var h=new ia;u.apply(h);var y=h.getLinework(),w=zr.toLineStringArray(y);return u.getFactory().createMultiLineString(w)},zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu};var ia=function(){this._linework=null,this._linework=new Pt};ia.prototype.getLinework=function(){return this._linework},ia.prototype.filter=function(u){if(u instanceof yi){var h=u;this._linework.add(h.getExteriorRing());for(var y=0;y<h.getNumInteriorRing();y++)this._linework.add(h.getInteriorRingN(y))}},ia.prototype.interfaces_=function(){return[qt]},ia.prototype.getClass=function(){return ia};var $s=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var u=arguments[0];this._g=u};$s.prototype.extractPoints=function(u,h,y){for(var w=u.getCoordinates(),O=0;O<w.length-1;O++)this.computeOffsetPoints(w[O],w[O+1],h,y)},$s.prototype.setSidesToGenerate=function(u,h){this._doLeft=u,this._doRight=h},$s.prototype.getPoints=function(u){for(var h=new Pt,y=ln.getLines(this._g).iterator();y.hasNext();){var w=y.next();this.extractPoints(w,u,h)}return h},$s.prototype.computeOffsetPoints=function(u,h,y,w){var O=h.x-u.x,U=h.y-u.y,J=Math.sqrt(O*O+U*U),pe=y*O/J,Ae=y*U/J,A=(h.x+u.x)/2,l=(h.y+u.y)/2;if(this._doLeft){var v=new Q(A-Ae,l+pe);w.add(v)}if(this._doRight){var S=new Q(A+Ae,l-pe);w.add(S)}},$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s};var Mo=function u(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=u.TOLERANCE,this._testCoords=new Pt;var h=arguments[0],y=arguments[1],w=arguments[2];this._boundaryDistanceTolerance=u.computeBoundaryDistanceTolerance(h,y),this._geom=[h,y,w],this._locFinder=[new zu(this._geom[0],this._boundaryDistanceTolerance),new zu(this._geom[1],this._boundaryDistanceTolerance),new zu(this._geom[2],this._boundaryDistanceTolerance)]},Lf={TOLERANCE:{configurable:!0}};Mo.prototype.reportResult=function(u,h,y){pt.out.println("Overlay result invalid - A:"+oe.toLocationSymbol(h[0])+" B:"+oe.toLocationSymbol(h[1])+" expected:"+(y?"i":"e")+" actual:"+oe.toLocationSymbol(h[2]))},Mo.prototype.isValid=function(u){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var h=this.checkValid(u);return h},Mo.prototype.checkValid=function(){if(arguments.length===1){for(var u=arguments[0],h=0;h<this._testCoords.size();h++){var y=this._testCoords.get(h);if(!this.checkValid(u,y))return this._invalidLocation=y,!1}return!0}if(arguments.length===2){var w=arguments[0],O=arguments[1];return this._location[0]=this._locFinder[0].getLocation(O),this._location[1]=this._locFinder[1].getLocation(O),this._location[2]=this._locFinder[2].getLocation(O),!!Mo.hasLocation(this._location,oe.BOUNDARY)||this.isValidResult(w,this._location)}},Mo.prototype.addTestPts=function(u){var h=new $s(u);this._testCoords.addAll(h.getPoints(5*this._boundaryDistanceTolerance))},Mo.prototype.isValidResult=function(u,h){var y=nr.isResultOfOp(h[0],h[1],u),w=!(y^h[2]===oe.INTERIOR);return w||this.reportResult(u,h,y),w},Mo.prototype.getInvalidLocation=function(){return this._invalidLocation},Mo.prototype.interfaces_=function(){return[]},Mo.prototype.getClass=function(){return Mo},Mo.hasLocation=function(u,h){for(var y=0;y<3;y++)if(u[y]===h)return!0;return!1},Mo.computeBoundaryDistanceTolerance=function(u,h){return Math.min(_i.computeSizeBasedSnapTolerance(u),_i.computeSizeBasedSnapTolerance(h))},Mo.isValid=function(u,h,y,w){return new Mo(u,h,w).isValid(y)},Lf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Mo,Lf);var Lo=function u(h){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=u.extractFactory(h),this._inputGeoms=h};Lo.prototype.extractElements=function(u,h){if(u===null)return null;for(var y=0;y<u.getNumGeometries();y++){var w=u.getGeometryN(y);this._skipEmpty&&w.isEmpty()||h.add(w)}},Lo.prototype.combine=function(){for(var u=new Pt,h=this._inputGeoms.iterator();h.hasNext();){var y=h.next();this.extractElements(y,u)}return u.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(u)},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},Lo.combine=function(){if(arguments.length===1){var u=arguments[0];return new Lo(u).combine()}if(arguments.length===2){var h=arguments[0],y=arguments[1];return new Lo(Lo.createList(h,y)).combine()}if(arguments.length===3){var w=arguments[0],O=arguments[1],U=arguments[2];return new Lo(Lo.createList(w,O,U)).combine()}},Lo.extractFactory=function(u){return u.isEmpty()?null:u.iterator().next().getFactory()},Lo.createList=function(){if(arguments.length===2){var u=arguments[0],h=arguments[1],y=new Pt;return y.add(u),y.add(h),y}if(arguments.length===3){var w=arguments[0],O=arguments[1],U=arguments[2],J=new Pt;return J.add(w),J.add(O),J.add(U),J}};var mi=function(){this._inputPolys=null,this._geomFactory=null;var u=arguments[0];this._inputPolys=u,this._inputPolys===null&&(this._inputPolys=new Pt)},uc={STRTREE_NODE_CAPACITY:{configurable:!0}};mi.prototype.reduceToGeometries=function(u){for(var h=new Pt,y=u.iterator();y.hasNext();){var w=y.next(),O=null;fe(w,$r)?O=this.unionTree(w):w instanceof ut&&(O=w),h.add(O)}return h},mi.prototype.extractByEnvelope=function(u,h,y){for(var w=new Pt,O=0;O<h.getNumGeometries();O++){var U=h.getGeometryN(O);U.getEnvelopeInternal().intersects(u)?w.add(U):y.add(U)}return this._geomFactory.buildGeometry(w)},mi.prototype.unionOptimized=function(u,h){var y=u.getEnvelopeInternal(),w=h.getEnvelopeInternal();if(!y.intersects(w))return Lo.combine(u,h);if(u.getNumGeometries()<=1&&h.getNumGeometries()<=1)return this.unionActual(u,h);var O=y.intersection(w);return this.unionUsingEnvelopeIntersection(u,h,O)},mi.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var u=new Nc(mi.STRTREE_NODE_CAPACITY),h=this._inputPolys.iterator();h.hasNext();){var y=h.next();u.insert(y.getEnvelopeInternal(),y)}this._inputPolys=null;var w=u.itemsTree();return this.unionTree(w)},mi.prototype.binaryUnion=function(){if(arguments.length===1){var u=arguments[0];return this.binaryUnion(u,0,u.size())}if(arguments.length===3){var h=arguments[0],y=arguments[1],w=arguments[2];if(w-y<=1){var O=mi.getGeometry(h,y);return this.unionSafe(O,null)}if(w-y==2)return this.unionSafe(mi.getGeometry(h,y),mi.getGeometry(h,y+1));var U=Math.trunc((w+y)/2),J=this.binaryUnion(h,y,U),pe=this.binaryUnion(h,U,w);return this.unionSafe(J,pe)}},mi.prototype.repeatedUnion=function(u){for(var h=null,y=u.iterator();y.hasNext();){var w=y.next();h=h===null?w.copy():h.union(w)}return h},mi.prototype.unionSafe=function(u,h){return u===null&&h===null?null:u===null?h.copy():h===null?u.copy():this.unionOptimized(u,h)},mi.prototype.unionActual=function(u,h){return mi.restrictToPolygons(u.union(h))},mi.prototype.unionTree=function(u){var h=this.reduceToGeometries(u);return this.binaryUnion(h)},mi.prototype.unionUsingEnvelopeIntersection=function(u,h,y){var w=new Pt,O=this.extractByEnvelope(y,u,w),U=this.extractByEnvelope(y,h,w),J=this.unionActual(O,U);return w.add(J),Lo.combine(w)},mi.prototype.bufferUnion=function(){if(arguments.length===1){var u=arguments[0];return u.get(0).getFactory().buildGeometry(u).buffer(0)}if(arguments.length===2){var h=arguments[0],y=arguments[1];return h.getFactory().createGeometryCollection([h,y]).buffer(0)}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.restrictToPolygons=function(u){if(fe(u,Mi))return u;var h=Hi.getPolygons(u);return h.size()===1?h.get(0):u.getFactory().createMultiPolygon(zr.toPolygonArray(h))},mi.getGeometry=function(u,h){return h>=u.size()?null:u.get(h)},mi.union=function(u){return new mi(u).union()},uc.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(mi,uc);var fu=function(){};fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu},fu.union=function(u,h){if(u.isEmpty()||h.isEmpty()){if(u.isEmpty()&&h.isEmpty())return nr.createEmptyResult(nr.UNION,u,h,u.getFactory());if(u.isEmpty())return h.copy();if(h.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(h),ci.overlayOp(u,h,nr.UNION)},r.GeoJSONReader=tl,r.GeoJSONWriter=Dc,r.OverlayOp=nr,r.UnionOp=fu,r.BufferOp=uo,Object.defineProperty(r,"__esModule",{value:!0})})})(PM,PM.exports);var O0e=PM.exports;function Id(){return new Rw}function Rw(){this.reset()}Rw.prototype={constructor:Rw,reset:function(){this.s=this.t=0},add:function(e){Lz(qb,e,this.t),Lz(this,qb.s,this.s),this.s?this.t+=qb.t:this.s=qb.t},valueOf:function(){return this.s}};var qb=new Rw;function Lz(e,t,r){var n=e.s=t+r,i=n-t,o=n-i;e.t=t-o+(r-i)}var Br=1e-6,Rz=1e-12,ni=Math.PI,ba=ni/2,kw=ni/4,Xu=ni*2,po=180/ni,Xr=ni/180,xi=Math.abs,sv=Math.atan,Pu=Math.atan2,Fr=Math.cos,Wb=Math.ceil,QX=Math.exp,Dw=Math.log,qI=Math.pow,Cr=Math.sin,X0=Math.sign||function(e){return e>0?1:e<0?-1:0},Ba=Math.sqrt,fN=Math.tan;function eY(e){return e>1?0:e<-1?ni:Math.acos(e)}function Ol(e){return e>1?ba:e<-1?-ba:Math.asin(e)}function kz(e){return(e=Cr(e/2))*e}function Fo(){}function Nw(e,t){e&&Nz.hasOwnProperty(e.type)&&Nz[e.type](e,t)}var Dz={Feature:function(e,t){Nw(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)Nw(r[n].geometry,t)}},Nz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){AM(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)AM(r[n],t,0)},Polygon:function(e,t){Fz(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)Fz(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)Nw(r[n],t)}};function AM(e,t,r){var n=-1,i=e.length-r,o;for(t.lineStart();++n<i;)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function Fz(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)AM(e[r],t,1);t.polygonEnd()}function xc(e,t){e&&Dz.hasOwnProperty(e.type)?Dz[e.type](e,t):Nw(e,t)}var Fw=Id(),$w=Id(),tY,rY,CM,IM,OM,df={point:Fo,lineStart:Fo,lineEnd:Fo,polygonStart:function(){Fw.reset(),df.lineStart=T0e,df.lineEnd=M0e},polygonEnd:function(){var e=+Fw;$w.add(e<0?Xu+e:e),this.lineStart=this.lineEnd=this.point=Fo},sphere:function(){$w.add(Xu)}};function T0e(){df.point=L0e}function M0e(){nY(tY,rY)}function L0e(e,t){df.point=nY,tY=e,rY=t,e*=Xr,t*=Xr,CM=e,IM=Fr(t=t/2+kw),OM=Cr(t)}function nY(e,t){e*=Xr,t*=Xr,t=t/2+kw;var r=e-CM,n=r>=0?1:-1,i=n*r,o=Fr(t),s=Cr(t),a=OM*s,d=IM*o+a*Fr(i),f=a*n*Cr(i);Fw.add(Pu(f,d)),CM=e,IM=o,OM=s}function R0e(e){return $w.reset(),xc(e,df),$w*2}function zw(e){return[Pu(e[1],e[0]),Ol(e[2])]}function Ep(e){var t=e[0],r=e[1],n=Fr(r);return[n*Fr(t),n*Cr(t),Cr(r)]}function Xb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function WI(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Yb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Bw(e){var t=Ba(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Yo,xl,ca,Jl,qd,iY,oY,wg,u0=Id(),Uh,oh,qf={point:TM,lineStart:$z,lineEnd:zz,polygonStart:function(){qf.point=sY,qf.lineStart=k0e,qf.lineEnd=D0e,u0.reset(),df.polygonStart()},polygonEnd:function(){df.polygonEnd(),qf.point=TM,qf.lineStart=$z,qf.lineEnd=zz,Fw<0?(Yo=-(ca=180),xl=-(Jl=90)):u0>Br?Jl=90:u0<-Br&&(xl=-90),oh[0]=Yo,oh[1]=ca}};function TM(e,t){Uh.push(oh=[Yo=e,ca=e]),t<xl&&(xl=t),t>Jl&&(Jl=t)}function aY(e,t){var r=Ep([e*Xr,t*Xr]);if(wg){var n=kg(wg,r),i=[n[1],-n[0],0],o=kg(i,n);Bw(o),o=zw(o);var s=e-qd,a=s>0?1:-1,d=o[0]*po*a,f,g=xi(s)>180;g^(a*qd<d&&d<a*e)?(f=o[1]*po,f>Jl&&(Jl=f)):(d=(d+360)%360-180,g^(a*qd<d&&d<a*e)?(f=-o[1]*po,f<xl&&(xl=f)):(t<xl&&(xl=t),t>Jl&&(Jl=t))),g?e<qd?bl(Yo,e)>bl(Yo,ca)&&(ca=e):bl(e,ca)>bl(Yo,ca)&&(Yo=e):ca>=Yo?(e<Yo&&(Yo=e),e>ca&&(ca=e)):e>qd?bl(Yo,e)>bl(Yo,ca)&&(ca=e):bl(e,ca)>bl(Yo,ca)&&(Yo=e)}else Uh.push(oh=[Yo=e,ca=e]);t<xl&&(xl=t),t>Jl&&(Jl=t),wg=r,qd=e}function $z(){qf.point=aY}function zz(){oh[0]=Yo,oh[1]=ca,qf.point=TM,wg=null}function sY(e,t){if(wg){var r=e-qd;u0.add(xi(r)>180?r+(r>0?360:-360):r)}else iY=e,oY=t;df.point(e,t),aY(e,t)}function k0e(){df.lineStart()}function D0e(){sY(iY,oY),df.lineEnd(),xi(u0)>Br&&(Yo=-(ca=180)),oh[0]=Yo,oh[1]=ca,wg=null}function bl(e,t){return(t-=e)<0?t+360:t}function N0e(e,t){return e[0]-t[0]}function Bz(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function F0e(e){var t,r,n,i,o,s,a;if(Jl=ca=-(Yo=xl=1/0),Uh=[],xc(e,qf),r=Uh.length){for(Uh.sort(N0e),t=1,n=Uh[0],o=[n];t<r;++t)i=Uh[t],Bz(n,i[0])||Bz(n,i[1])?(bl(n[0],i[1])>bl(n[0],n[1])&&(n[1]=i[1]),bl(i[0],n[1])>bl(n[0],n[1])&&(n[0]=i[0])):o.push(n=i);for(s=-1/0,r=o.length-1,t=0,n=o[r];t<=r;n=i,++t)i=o[t],(a=bl(n[1],i[0]))>s&&(s=a,Yo=i[0],ca=n[1])}return Uh=oh=null,Yo===1/0||xl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Yo,xl],[ca,Jl]]}var By,jw,Uw,Vw,Gw,qw,Ww,Xw,MM,LM,RM,uY,lY,bu,xu,wu,wc={sphere:Fo,point:hN,lineStart:jz,lineEnd:Uz,polygonStart:function(){wc.lineStart=B0e,wc.lineEnd=j0e},polygonEnd:function(){wc.lineStart=jz,wc.lineEnd=Uz}};function hN(e,t){e*=Xr,t*=Xr;var r=Fr(t);D_(r*Fr(e),r*Cr(e),Cr(t))}function D_(e,t,r){++By,Uw+=(e-Uw)/By,Vw+=(t-Vw)/By,Gw+=(r-Gw)/By}function jz(){wc.point=$0e}function $0e(e,t){e*=Xr,t*=Xr;var r=Fr(t);bu=r*Fr(e),xu=r*Cr(e),wu=Cr(t),wc.point=z0e,D_(bu,xu,wu)}function z0e(e,t){e*=Xr,t*=Xr;var r=Fr(t),n=r*Fr(e),i=r*Cr(e),o=Cr(t),s=Pu(Ba((s=xu*o-wu*i)*s+(s=wu*n-bu*o)*s+(s=bu*i-xu*n)*s),bu*n+xu*i+wu*o);jw+=s,qw+=s*(bu+(bu=n)),Ww+=s*(xu+(xu=i)),Xw+=s*(wu+(wu=o)),D_(bu,xu,wu)}function Uz(){wc.point=hN}function B0e(){wc.point=U0e}function j0e(){cY(uY,lY),wc.point=hN}function U0e(e,t){uY=e,lY=t,e*=Xr,t*=Xr,wc.point=cY;var r=Fr(t);bu=r*Fr(e),xu=r*Cr(e),wu=Cr(t),D_(bu,xu,wu)}function cY(e,t){e*=Xr,t*=Xr;var r=Fr(t),n=r*Fr(e),i=r*Cr(e),o=Cr(t),s=xu*o-wu*i,a=wu*n-bu*o,d=bu*i-xu*n,f=Ba(s*s+a*a+d*d),g=Ol(f),_=f&&-g/f;MM+=_*s,LM+=_*a,RM+=_*d,jw+=g,qw+=g*(bu+(bu=n)),Ww+=g*(xu+(xu=i)),Xw+=g*(wu+(wu=o)),D_(bu,xu,wu)}function V0e(e){By=jw=Uw=Vw=Gw=qw=Ww=Xw=MM=LM=RM=0,xc(e,wc);var t=MM,r=LM,n=RM,i=t*t+r*r+n*n;return i<Rz&&(t=qw,r=Ww,n=Xw,jw<Br&&(t=Uw,r=Vw,n=Gw),i=t*t+r*r+n*n,i<Rz)?[NaN,NaN]:[Pu(r,t)*po,Ol(n/Ba(i))*po]}function Om(e){return function(){return e}}function fY(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function kM(e,t){return[e>ni?e-Xu:e<-ni?e+Xu:e,t]}kM.invert=kM;function dN(e,t,r){return(e%=Xu)?t||r?fY(Gz(e),qz(t,r)):Gz(e):t||r?qz(t,r):kM}function Vz(e){return function(t,r){return t+=e,[t>ni?t-Xu:t<-ni?t+Xu:t,r]}}function Gz(e){var t=Vz(e);return t.invert=Vz(-e),t}function qz(e,t){var r=Fr(e),n=Cr(e),i=Fr(t),o=Cr(t);function s(a,d){var f=Fr(d),g=Fr(a)*f,_=Cr(a)*f,b=Cr(d),P=b*r+g*n;return[Pu(_*i-P*o,g*r-b*n),Ol(P*i+_*o)]}return s.invert=function(a,d){var f=Fr(d),g=Fr(a)*f,_=Cr(a)*f,b=Cr(d),P=b*i-_*o;return[Pu(_*i+b*o,g*r+P*n),Ol(P*r-g*n)]},s}function hY(e){e=dN(e[0]*Xr,e[1]*Xr,e.length>2?e[2]*Xr:0);function t(r){return r=e(r[0]*Xr,r[1]*Xr),r[0]*=po,r[1]*=po,r}return t.invert=function(r){return r=e.invert(r[0]*Xr,r[1]*Xr),r[0]*=po,r[1]*=po,r},t}function dY(e,t,r,n,i,o){if(r){var s=Fr(t),a=Cr(t),d=n*r;i==null?(i=t+n*Xu,o=t-d/2):(i=Wz(s,i),o=Wz(s,o),(n>0?i<o:i>o)&&(i+=n*Xu));for(var f,g=i;n>0?g>o:g<o;g-=d)f=zw([s,-a*Fr(g),-a*Cr(g)]),e.point(f[0],f[1])}}function Wz(e,t){t=Ep(t),t[0]-=e,Bw(t);var r=eY(-t[1]);return((-t[2]<0?-r:r)+Xu-Br)%Xu}function G0e(){var e=Om([0,0]),t=Om(90),r=Om(6),n,i,o={point:s};function s(d,f){n.push(d=i(d,f)),d[0]*=po,d[1]*=po}function a(){var d=e.apply(this,arguments),f=t.apply(this,arguments)*Xr,g=r.apply(this,arguments)*Xr;return n=[],i=dN(-d[0]*Xr,-d[1]*Xr,0).invert,dY(o,f,g,1),d={type:"Polygon",coordinates:[n]},n=i=null,d}return a.center=function(d){return arguments.length?(e=typeof d=="function"?d:Om([+d[0],+d[1]]),a):e},a.radius=function(d){return arguments.length?(t=typeof d=="function"?d:Om(+d),a):t},a.precision=function(d){return arguments.length?(r=typeof d=="function"?d:Om(+d),a):r},a}function pY(){var e=[],t;return{point:function(r,n){t.push([r,n])},lineStart:function(){e.push(t=[])},lineEnd:Fo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function q0e(e,t,r,n,i,o){var s=e[0],a=e[1],d=t[0],f=t[1],g=0,_=1,b=d-s,P=f-a,L;if(L=r-s,!(!b&&L>0)){if(L/=b,b<0){if(L<g)return;L<_&&(_=L)}else if(b>0){if(L>_)return;L>g&&(g=L)}if(L=i-s,!(!b&&L<0)){if(L/=b,b<0){if(L>_)return;L>g&&(g=L)}else if(b>0){if(L<g)return;L<_&&(_=L)}if(L=n-a,!(!P&&L>0)){if(L/=P,P<0){if(L<g)return;L<_&&(_=L)}else if(P>0){if(L>_)return;L>g&&(g=L)}if(L=o-a,!(!P&&L<0)){if(L/=P,P<0){if(L>_)return;L>g&&(g=L)}else if(P>0){if(L<g)return;L<_&&(_=L)}return g>0&&(e[0]=s+g*b,e[1]=a+g*P),_<1&&(t[0]=s+_*b,t[1]=a+_*P),!0}}}}}function Ux(e,t){return xi(e[0]-t[0])<Br&&xi(e[1]-t[1])<Br}function Hb(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function mY(e,t,r,n,i){var o=[],s=[],a,d;if(e.forEach(function(L){if(!((R=L.length-1)<=0)){var R,$=L[0],F=L[R],T;if(Ux($,F)){for(i.lineStart(),a=0;a<R;++a)i.point(($=L[a])[0],$[1]);i.lineEnd();return}o.push(T=new Hb($,L,null,!0)),s.push(T.o=new Hb($,null,T,!1)),o.push(T=new Hb(F,L,null,!1)),s.push(T.o=new Hb(F,null,T,!0))}}),!!o.length){for(s.sort(t),Xz(o),Xz(s),a=0,d=s.length;a<d;++a)s[a].e=r=!r;for(var f=o[0],g,_;;){for(var b=f,P=!0;b.v;)if((b=b.n)===f)return;g=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(P)for(a=0,d=g.length;a<d;++a)i.point((_=g[a])[0],_[1]);else n(b.x,b.n.x,1,i);b=b.n}else{if(P)for(g=b.p.z,a=g.length-1;a>=0;--a)i.point((_=g[a])[0],_[1]);else n(b.x,b.p.x,-1,i);b=b.p}b=b.o,g=b.z,P=!P}while(!b.v);i.lineEnd()}}}function Xz(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function gY(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function W0e(e){return e.length===1&&(e=X0e(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)<0?n=o+1:i=o}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)>0?i=o:n=o+1}return n}}}function X0e(e){return function(t,r){return gY(e(t),r)}}W0e(gY);function sg(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(i);++n<i;)o[n]=e+n*r;return o}function vY(e){for(var t=e.length,r,n=-1,i=0,o,s;++n<t;)i+=e[n].length;for(o=new Array(i);--t>=0;)for(s=e[t],r=s.length;--r>=0;)o[--i]=s[r];return o}var jy=1e9,Zb=-jy;function pN(e,t,r,n){function i(f,g){return e<=f&&f<=r&&t<=g&&g<=n}function o(f,g,_,b){var P=0,L=0;if(f==null||(P=s(f,_))!==(L=s(g,_))||d(f,g)<0^_>0)do b.point(P===0||P===3?e:r,P>1?n:t);while((P=(P+_+4)%4)!==L);else b.point(g[0],g[1])}function s(f,g){return xi(f[0]-e)<Br?g>0?0:3:xi(f[0]-r)<Br?g>0?2:1:xi(f[1]-t)<Br?g>0?1:0:g>0?3:2}function a(f,g){return d(f.x,g.x)}function d(f,g){var _=s(f,1),b=s(g,1);return _!==b?_-b:_===0?g[1]-f[1]:_===1?f[0]-g[0]:_===2?f[1]-g[1]:g[0]-f[0]}return function(f){var g=f,_=pY(),b,P,L,R,$,F,T,x,N,B,H,Z={point:Y,lineStart:ge,lineEnd:be,polygonStart:Q,polygonEnd:me};function Y(Ie,fe){i(Ie,fe)&&g.point(Ie,fe)}function W(){for(var Ie=0,fe=0,G=P.length;fe<G;++fe)for(var K=P[fe],re=1,ie=K.length,he=K[0],ae,Te,Le=he[0],Xe=he[1];re<ie;++re)ae=Le,Te=Xe,he=K[re],Le=he[0],Xe=he[1],Te<=n?Xe>n&&(Le-ae)*(n-Te)>(Xe-Te)*(e-ae)&&++Ie:Xe<=n&&(Le-ae)*(n-Te)<(Xe-Te)*(e-ae)&&--Ie;return Ie}function Q(){g=_,b=[],P=[],H=!0}function me(){var Ie=W(),fe=H&&Ie,G=(b=vY(b)).length;(fe||G)&&(f.polygonStart(),fe&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),G&&mY(b,a,Ie,o,f),f.polygonEnd()),g=f,b=P=L=null}function ge(){Z.point=oe,P&&P.push(L=[]),B=!0,N=!1,T=x=NaN}function be(){b&&(oe(R,$),F&&N&&_.rejoin(),b.push(_.result())),Z.point=Y,N&&g.lineEnd()}function oe(Ie,fe){var G=i(Ie,fe);if(P&&L.push([Ie,fe]),B)R=Ie,$=fe,F=G,B=!1,G&&(g.lineStart(),g.point(Ie,fe));else if(G&&N)g.point(Ie,fe);else{var K=[T=Math.max(Zb,Math.min(jy,T)),x=Math.max(Zb,Math.min(jy,x))],re=[Ie=Math.max(Zb,Math.min(jy,Ie)),fe=Math.max(Zb,Math.min(jy,fe))];q0e(K,re,e,t,r,n)?(N||(g.lineStart(),g.point(K[0],K[1])),g.point(re[0],re[1]),G||g.lineEnd(),H=!1):G&&(g.lineStart(),g.point(Ie,fe),H=!1)}T=Ie,x=fe,N=G}return Z}}function Y0e(){var e=0,t=0,r=960,n=500,i,o,s;return s={stream:function(a){return i&&o===a?i:i=pN(e,t,r,n)(o=a)},extent:function(a){return arguments.length?(e=+a[0][0],t=+a[0][1],r=+a[1][0],n=+a[1][1],i=o=null,s):[[e,t],[r,n]]}}}var XI=Id();function yY(e,t){var r=t[0],n=t[1],i=[Cr(r),-Fr(r),0],o=0,s=0;XI.reset();for(var a=0,d=e.length;a<d;++a)if(g=(f=e[a]).length)for(var f,g,_=f[g-1],b=_[0],P=_[1]/2+kw,L=Cr(P),R=Fr(P),$=0;$<g;++$,b=T,L=N,R=B,_=F){var F=f[$],T=F[0],x=F[1]/2+kw,N=Cr(x),B=Fr(x),H=T-b,Z=H>=0?1:-1,Y=Z*H,W=Y>ni,Q=L*N;if(XI.add(Pu(Q*Z*Cr(Y),R*B+Q*Fr(Y))),o+=W?H+Z*Xu:H,W^b>=r^T>=r){var me=kg(Ep(_),Ep(F));Bw(me);var ge=kg(i,me);Bw(ge);var be=(W^H>=0?-1:1)*Ol(ge[2]);(n>be||n===be&&(me[0]||me[1]))&&(s+=W^H>=0?1:-1)}}return(o<-Br||o<Br&&XI<-Br)^s&1}var DM=Id(),NM,Vx,Gx,Dg={sphere:Fo,point:Fo,lineStart:H0e,lineEnd:Fo,polygonStart:Fo,polygonEnd:Fo};function H0e(){Dg.point=K0e,Dg.lineEnd=Z0e}function Z0e(){Dg.point=Dg.lineEnd=Fo}function K0e(e,t){e*=Xr,t*=Xr,NM=e,Vx=Cr(t),Gx=Fr(t),Dg.point=J0e}function J0e(e,t){e*=Xr,t*=Xr;var r=Cr(t),n=Fr(t),i=xi(e-NM),o=Fr(i),s=Cr(i),a=n*s,d=Gx*r-Vx*n*o,f=Vx*r+Gx*n*o;DM.add(Pu(Ba(a*a+d*d),f)),NM=e,Vx=r,Gx=n}function _Y(e){return DM.reset(),xc(e,Dg),+DM}var FM=[null,null],Q0e={type:"LineString",coordinates:FM};function l0(e,t){return FM[0]=e,FM[1]=t,_Y(Q0e)}var Yz={Feature:function(e,t){return Yw(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)if(Yw(r[n].geometry,t))return!0;return!1}},Hz={Sphere:function(){return!0},Point:function(e,t){return Zz(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)if(Zz(r[n],t))return!0;return!1},LineString:function(e,t){return Kz(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)if(Kz(r[n],t))return!0;return!1},Polygon:function(e,t){return Jz(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)if(Jz(r[n],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)if(Yw(r[n],t))return!0;return!1}};function Yw(e,t){return e&&Hz.hasOwnProperty(e.type)?Hz[e.type](e,t):!1}function Zz(e,t){return l0(e,t)===0}function Kz(e,t){var r=l0(e[0],e[1]),n=l0(e[0],t),i=l0(t,e[1]);return n+i<=r+Br}function Jz(e,t){return!!yY(e.map(e_e),bY(t))}function e_e(e){return e=e.map(bY),e.pop(),e}function bY(e){return[e[0]*Xr,e[1]*Xr]}function t_e(e,t){return(e&&Yz.hasOwnProperty(e.type)?Yz[e.type]:Yw)(e,t)}function Qz(e,t,r){var n=sg(e,t-Br,r).concat(t);return function(i){return n.map(function(o){return[i,o]})}}function eB(e,t,r){var n=sg(e,t-Br,r).concat(t);return function(i){return n.map(function(o){return[o,i]})}}function xY(){var e,t,r,n,i,o,s,a,d=10,f=d,g=90,_=360,b,P,L,R,$=2.5;function F(){return{type:"MultiLineString",coordinates:T()}}function T(){return sg(Wb(n/g)*g,r,g).map(L).concat(sg(Wb(a/_)*_,s,_).map(R)).concat(sg(Wb(t/d)*d,e,d).filter(function(x){return xi(x%g)>Br}).map(b)).concat(sg(Wb(o/f)*f,i,f).filter(function(x){return xi(x%_)>Br}).map(P))}return F.lines=function(){return T().map(function(x){return{type:"LineString",coordinates:x}})},F.outline=function(){return{type:"Polygon",coordinates:[L(n).concat(R(s).slice(1),L(r).reverse().slice(1),R(a).reverse().slice(1))]}},F.extent=function(x){return arguments.length?F.extentMajor(x).extentMinor(x):F.extentMinor()},F.extentMajor=function(x){return arguments.length?(n=+x[0][0],r=+x[1][0],a=+x[0][1],s=+x[1][1],n>r&&(x=n,n=r,r=x),a>s&&(x=a,a=s,s=x),F.precision($)):[[n,a],[r,s]]},F.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],o=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),o>i&&(x=o,o=i,i=x),F.precision($)):[[t,o],[e,i]]},F.step=function(x){return arguments.length?F.stepMajor(x).stepMinor(x):F.stepMinor()},F.stepMajor=function(x){return arguments.length?(g=+x[0],_=+x[1],F):[g,_]},F.stepMinor=function(x){return arguments.length?(d=+x[0],f=+x[1],F):[d,f]},F.precision=function(x){return arguments.length?($=+x,b=Qz(o,i,90),P=eB(t,e,$),L=Qz(a,s,90),R=eB(n,r,$),F):$},F.extentMajor([[-180,-90+Br],[180,90-Br]]).extentMinor([[-180,-80-Br],[180,80+Br]])}function r_e(){return xY()()}function n_e(e,t){var r=e[0]*Xr,n=e[1]*Xr,i=t[0]*Xr,o=t[1]*Xr,s=Fr(n),a=Cr(n),d=Fr(o),f=Cr(o),g=s*Fr(r),_=s*Cr(r),b=d*Fr(i),P=d*Cr(i),L=2*Ol(Ba(kz(o-n)+s*d*kz(i-r))),R=Cr(L),$=L?function(F){var T=Cr(F*=L)/R,x=Cr(L-F)/R,N=x*g+T*b,B=x*_+T*P,H=x*a+T*f;return[Pu(B,N)*po,Pu(H,Ba(N*N+B*B))*po]}:function(){return[r*po,n*po]};return $.distance=L,$}function cp(e){return e}var YI=Id(),$M=Id(),wY,EY,zM,BM,Xf={point:Fo,lineStart:Fo,lineEnd:Fo,polygonStart:function(){Xf.lineStart=i_e,Xf.lineEnd=a_e},polygonEnd:function(){Xf.lineStart=Xf.lineEnd=Xf.point=Fo,YI.add(xi($M)),$M.reset()},result:function(){var e=YI/2;return YI.reset(),e}};function i_e(){Xf.point=o_e}function o_e(e,t){Xf.point=SY,wY=zM=e,EY=BM=t}function SY(e,t){$M.add(BM*e-zM*t),zM=e,BM=t}function a_e(){SY(wY,EY)}var Ng=1/0,Hw=Ng,Y0=-Ng,Zw=Y0,Kw={point:s_e,lineStart:Fo,lineEnd:Fo,polygonStart:Fo,polygonEnd:Fo,result:function(){var e=[[Ng,Hw],[Y0,Zw]];return Y0=Zw=-(Hw=Ng=1/0),e}};function s_e(e,t){e<Ng&&(Ng=e),e>Y0&&(Y0=e),t<Hw&&(Hw=t),t>Zw&&(Zw=t)}var jM=0,UM=0,Uy=0,Jw=0,Qw=0,ug=0,VM=0,GM=0,Vy=0,PY,AY,nf,of,Ql={point:Sp,lineStart:tB,lineEnd:rB,polygonStart:function(){Ql.lineStart=c_e,Ql.lineEnd=f_e},polygonEnd:function(){Ql.point=Sp,Ql.lineStart=tB,Ql.lineEnd=rB},result:function(){var e=Vy?[VM/Vy,GM/Vy]:ug?[Jw/ug,Qw/ug]:Uy?[jM/Uy,UM/Uy]:[NaN,NaN];return jM=UM=Uy=Jw=Qw=ug=VM=GM=Vy=0,e}};function Sp(e,t){jM+=e,UM+=t,++Uy}function tB(){Ql.point=u_e}function u_e(e,t){Ql.point=l_e,Sp(nf=e,of=t)}function l_e(e,t){var r=e-nf,n=t-of,i=Ba(r*r+n*n);Jw+=i*(nf+e)/2,Qw+=i*(of+t)/2,ug+=i,Sp(nf=e,of=t)}function rB(){Ql.point=Sp}function c_e(){Ql.point=h_e}function f_e(){CY(PY,AY)}function h_e(e,t){Ql.point=CY,Sp(PY=nf=e,AY=of=t)}function CY(e,t){var r=e-nf,n=t-of,i=Ba(r*r+n*n);Jw+=i*(nf+e)/2,Qw+=i*(of+t)/2,ug+=i,i=of*e-nf*t,VM+=i*(nf+e),GM+=i*(of+t),Vy+=i*3,Sp(nf=e,of=t)}function IY(e){this._context=e}IY.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Xu);break}}},result:Fo};var qM=Id(),HI,OY,TY,Gy,qy,H0={point:Fo,lineStart:function(){H0.point=d_e},lineEnd:function(){HI&&MY(OY,TY),H0.point=Fo},polygonStart:function(){HI=!0},polygonEnd:function(){HI=null},result:function(){var e=+qM;return qM.reset(),e}};function d_e(e,t){H0.point=MY,OY=Gy=e,TY=qy=t}function MY(e,t){Gy-=e,qy-=t,qM.add(Ba(Gy*Gy+qy*qy)),Gy=e,qy=t}function LY(){this._string=[]}LY.prototype={_radius:4.5,_circle:nB(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=nB(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function nB(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function p_e(e,t){var r=4.5,n,i;function o(s){return s&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),xc(s,n(i))),i.result()}return o.area=function(s){return xc(s,n(Xf)),Xf.result()},o.measure=function(s){return xc(s,n(H0)),H0.result()},o.bounds=function(s){return xc(s,n(Kw)),Kw.result()},o.centroid=function(s){return xc(s,n(Ql)),Ql.result()},o.projection=function(s){return arguments.length?(n=s==null?(e=null,cp):(e=s).stream,o):e},o.context=function(s){return arguments.length?(i=s==null?(t=null,new LY):new IY(t=s),typeof r!="function"&&i.pointRadius(r),o):t},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(i.pointRadius(+s),+s),o):r},o.projection(e).context(t)}function RY(e,t,r,n){return function(i,o){var s=t(o),a=i.invert(n[0],n[1]),d=pY(),f=t(d),g=!1,_,b,P,L={point:R,lineStart:F,lineEnd:T,polygonStart:function(){L.point=x,L.lineStart=N,L.lineEnd=B,b=[],_=[]},polygonEnd:function(){L.point=R,L.lineStart=F,L.lineEnd=T,b=vY(b);var H=yY(_,a);b.length?(g||(o.polygonStart(),g=!0),mY(b,g_e,H,r,o)):H&&(g||(o.polygonStart(),g=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),b=_=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function R(H,Z){var Y=i(H,Z);e(H=Y[0],Z=Y[1])&&o.point(H,Z)}function $(H,Z){var Y=i(H,Z);s.point(Y[0],Y[1])}function F(){L.point=$,s.lineStart()}function T(){L.point=R,s.lineEnd()}function x(H,Z){P.push([H,Z]);var Y=i(H,Z);f.point(Y[0],Y[1])}function N(){f.lineStart(),P=[]}function B(){x(P[0][0],P[0][1]),f.lineEnd();var H=f.clean(),Z=d.result(),Y,W=Z.length,Q,me,ge;if(P.pop(),_.push(P),P=null,!!W){if(H&1){if(me=Z[0],(Q=me.length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),Y=0;Y<Q;++Y)o.point((ge=me[Y])[0],ge[1]);o.lineEnd()}return}W>1&&H&2&&Z.push(Z.pop().concat(Z.shift())),b.push(Z.filter(m_e))}}return L}}function m_e(e){return e.length>1}function g_e(e,t){return((e=e.x)[0]<0?e[1]-ba-Br:ba-e[1])-((t=t.x)[0]<0?t[1]-ba-Br:ba-t[1])}const iB=RY(function(){return!0},v_e,__e,[-ni,-ba]);function v_e(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?ni:-ni,d=xi(o-t);xi(d-ni)<Br?(e.point(t,r=(r+s)/2>0?ba:-ba),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),i=0):n!==a&&d>=ni&&(xi(t-n)<Br&&(t-=n*Br),xi(o-a)<Br&&(o-=a*Br),r=y_e(t,r,o,s),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=o,r=s),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function y_e(e,t,r,n){var i,o,s=Cr(e-r);return xi(s)>Br?sv((Cr(t)*(o=Fr(n))*Cr(r)-Cr(n)*(i=Fr(t))*Cr(e))/(i*o*s)):(t+n)/2}function __e(e,t,r,n){var i;if(e==null)i=r*ba,n.point(-ni,i),n.point(0,i),n.point(ni,i),n.point(ni,0),n.point(ni,-i),n.point(0,-i),n.point(-ni,-i),n.point(-ni,0),n.point(-ni,i);else if(xi(e[0]-t[0])>Br){var o=e[0]<t[0]?ni:-ni;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])}function b_e(e,t){var r=Fr(e),n=r>0,i=xi(r)>Br;function o(g,_,b,P){dY(P,e,t,b,g,_)}function s(g,_){return Fr(g)*Fr(_)>r}function a(g){var _,b,P,L,R;return{lineStart:function(){L=P=!1,R=1},point:function($,F){var T=[$,F],x,N=s($,F),B=n?N?0:f($,F):N?f($+($<0?ni:-ni),F):0;if(!_&&(L=P=N)&&g.lineStart(),N!==P&&(x=d(_,T),(!x||Ux(_,x)||Ux(T,x))&&(T[0]+=Br,T[1]+=Br,N=s(T[0],T[1]))),N!==P)R=0,N?(g.lineStart(),x=d(T,_),g.point(x[0],x[1])):(x=d(_,T),g.point(x[0],x[1]),g.lineEnd()),_=x;else if(i&&_&&n^N){var H;!(B&b)&&(H=d(T,_,!0))&&(R=0,n?(g.lineStart(),g.point(H[0][0],H[0][1]),g.point(H[1][0],H[1][1]),g.lineEnd()):(g.point(H[1][0],H[1][1]),g.lineEnd(),g.lineStart(),g.point(H[0][0],H[0][1])))}N&&(!_||!Ux(_,T))&&g.point(T[0],T[1]),_=T,P=N,b=B},lineEnd:function(){P&&g.lineEnd(),_=null},clean:function(){return R|(L&&P)<<1}}}function d(g,_,b){var P=Ep(g),L=Ep(_),R=[1,0,0],$=kg(P,L),F=Xb($,$),T=$[0],x=F-T*T;if(!x)return!b&&g;var N=r*F/x,B=-r*T/x,H=kg(R,$),Z=Yb(R,N),Y=Yb($,B);WI(Z,Y);var W=H,Q=Xb(Z,W),me=Xb(W,W),ge=Q*Q-me*(Xb(Z,Z)-1);if(!(ge<0)){var be=Ba(ge),oe=Yb(W,(-Q-be)/me);if(WI(oe,Z),oe=zw(oe),!b)return oe;var Ie=g[0],fe=_[0],G=g[1],K=_[1],re;fe<Ie&&(re=Ie,Ie=fe,fe=re);var ie=fe-Ie,he=xi(ie-ni)<Br,ae=he||ie<Br;if(!he&&K<G&&(re=G,G=K,K=re),ae?he?G+K>0^oe[1]<(xi(oe[0]-Ie)<Br?G:K):G<=oe[1]&&oe[1]<=K:ie>ni^(Ie<=oe[0]&&oe[0]<=fe)){var Te=Yb(W,(-Q+be)/me);return WI(Te,Z),[oe,zw(Te)]}}}function f(g,_){var b=n?e:ni-e,P=0;return g<-b?P|=1:g>b&&(P|=2),_<-b?P|=4:_>b&&(P|=8),P}return RY(s,a,o,n?[0,-e]:[-ni,e-ni])}function x_e(e){return{stream:wS(e)}}function wS(e){return function(t){var r=new WM;for(var n in e)r[n]=e[n];return r.stream=t,r}}function WM(){}WM.prototype={constructor:WM,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ES(e,t,r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),xc(r,e.stream(Kw));var s=Kw.result(),a=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),d=+t[0][0]+(n-a*(s[1][0]+s[0][0]))/2,f=+t[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([d,f])}function mN(e,t,r){return ES(e,[[0,0],t],r)}var oB=16,w_e=Fr(30*Xr);function aB(e,t){return+t?S_e(e,t):E_e(e)}function E_e(e){return wS({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function S_e(e,t){function r(n,i,o,s,a,d,f,g,_,b,P,L,R,$){var F=f-n,T=g-i,x=F*F+T*T;if(x>4*t&&R--){var N=s+b,B=a+P,H=d+L,Z=Ba(N*N+B*B+H*H),Y=Ol(H/=Z),W=xi(xi(H)-1)<Br||xi(o-_)<Br?(o+_)/2:Pu(B,N),Q=e(W,Y),me=Q[0],ge=Q[1],be=me-n,oe=ge-i,Ie=T*be-F*oe;(Ie*Ie/x>t||xi((F*be+T*oe)/x-.5)>.3||s*b+a*P+d*L<w_e)&&(r(n,i,o,s,a,d,me,ge,W,N/=Z,B/=Z,H,R,$),$.point(me,ge),r(me,ge,W,N,B,H,f,g,_,b,P,L,R,$))}}return function(n){var i,o,s,a,d,f,g,_,b,P,L,R,$={point:F,lineStart:T,lineEnd:N,polygonStart:function(){n.polygonStart(),$.lineStart=B},polygonEnd:function(){n.polygonEnd(),$.lineStart=T}};function F(Y,W){Y=e(Y,W),n.point(Y[0],Y[1])}function T(){_=NaN,$.point=x,n.lineStart()}function x(Y,W){var Q=Ep([Y,W]),me=e(Y,W);r(_,b,g,P,L,R,_=me[0],b=me[1],g=Y,P=Q[0],L=Q[1],R=Q[2],oB,n),n.point(_,b)}function N(){$.point=F,n.lineEnd()}function B(){T(),$.point=H,$.lineEnd=Z}function H(Y,W){x(i=Y,W),o=_,s=b,a=P,d=L,f=R,$.point=x}function Z(){r(_,b,g,P,L,R,o,s,i,a,d,f,oB,n),$.lineEnd=N,N()}return $}}var P_e=wS({point:function(e,t){this.stream.point(e*Xr,t*Xr)}});function gh(e){return gN(function(){return e})()}function gN(e){var t,r=150,n=480,i=250,o,s,a=0,d=0,f=0,g=0,_=0,b,P,L=null,R=iB,$=null,F,T,x,N=cp,B=.5,H=aB(me,B),Z,Y;function W(oe){return oe=P(oe[0]*Xr,oe[1]*Xr),[oe[0]*r+o,s-oe[1]*r]}function Q(oe){return oe=P.invert((oe[0]-o)/r,(s-oe[1])/r),oe&&[oe[0]*po,oe[1]*po]}function me(oe,Ie){return oe=t(oe,Ie),[oe[0]*r+o,s-oe[1]*r]}W.stream=function(oe){return Z&&Y===oe?Z:Z=P_e(R(b,H(N(Y=oe))))},W.clipAngle=function(oe){return arguments.length?(R=+oe?b_e(L=oe*Xr,6*Xr):(L=null,iB),be()):L*po},W.clipExtent=function(oe){return arguments.length?(N=oe==null?($=F=T=x=null,cp):pN($=+oe[0][0],F=+oe[0][1],T=+oe[1][0],x=+oe[1][1]),be()):$==null?null:[[$,F],[T,x]]},W.scale=function(oe){return arguments.length?(r=+oe,ge()):r},W.translate=function(oe){return arguments.length?(n=+oe[0],i=+oe[1],ge()):[n,i]},W.center=function(oe){return arguments.length?(a=oe[0]%360*Xr,d=oe[1]%360*Xr,ge()):[a*po,d*po]},W.rotate=function(oe){return arguments.length?(f=oe[0]%360*Xr,g=oe[1]%360*Xr,_=oe.length>2?oe[2]%360*Xr:0,ge()):[f*po,g*po,_*po]},W.precision=function(oe){return arguments.length?(H=aB(me,B=oe*oe),be()):Ba(B)},W.fitExtent=function(oe,Ie){return ES(W,oe,Ie)},W.fitSize=function(oe,Ie){return mN(W,oe,Ie)};function ge(){P=fY(b=dN(f,g,_),t);var oe=t(a,d);return o=n-oe[0]*r,s=i+oe[1]*r,be()}function be(){return Z=Y=null,W}return function(){return t=e.apply(this,arguments),W.invert=t.invert&&Q,ge()}}function vN(e){var t=0,r=ni/3,n=gN(e),i=n(t,r);return i.parallels=function(o){return arguments.length?n(t=o[0]*Xr,r=o[1]*Xr):[t*po,r*po]},i}function A_e(e){var t=Fr(e);function r(n,i){return[n*t,Cr(i)/t]}return r.invert=function(n,i){return[n/t,Ol(i*t)]},r}function kY(e,t){var r=Cr(e),n=(r+Cr(t))/2;if(xi(n)<Br)return A_e(e);var i=1+r*(2*n-r),o=Ba(i)/n;function s(a,d){var f=Ba(i-2*n*Cr(d))/n;return[f*Cr(a*=n),o-f*Fr(a)]}return s.invert=function(a,d){var f=o-d;return[Pu(a,xi(f))/n*X0(f),Ol((i-(a*a+f*f)*n*n)/(2*n))]},s}function eE(){return vN(kY).scale(155.424).center([0,33.6442])}function DY(){return eE().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function C_e(e){var t=e.length;return{point:function(r,n){for(var i=-1;++i<t;)e[i].point(r,n)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function I_e(){var e,t,r=DY(),n,i=eE().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=eE().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,d,f={point:function(b,P){d=[b,P]}};function g(b){var P=b[0],L=b[1];return d=null,n.point(P,L),d||(o.point(P,L),d)||(a.point(P,L),d)}g.invert=function(b){var P=r.scale(),L=r.translate(),R=(b[0]-L[0])/P,$=(b[1]-L[1])/P;return($>=.12&&$<.234&&R>=-.425&&R<-.214?i:$>=.166&&$<.234&&R>=-.214&&R<-.115?s:r).invert(b)},g.stream=function(b){return e&&t===b?e:e=C_e([r.stream(t=b),i.stream(b),s.stream(b)])},g.precision=function(b){return arguments.length?(r.precision(b),i.precision(b),s.precision(b),_()):r.precision()},g.scale=function(b){return arguments.length?(r.scale(b),i.scale(b*.35),s.scale(b),g.translate(r.translate())):r.scale()},g.translate=function(b){if(!arguments.length)return r.translate();var P=r.scale(),L=+b[0],R=+b[1];return n=r.translate(b).clipExtent([[L-.455*P,R-.238*P],[L+.455*P,R+.238*P]]).stream(f),o=i.translate([L-.307*P,R+.201*P]).clipExtent([[L-.425*P+Br,R+.12*P+Br],[L-.214*P-Br,R+.234*P-Br]]).stream(f),a=s.translate([L-.205*P,R+.212*P]).clipExtent([[L-.214*P+Br,R+.166*P+Br],[L-.115*P-Br,R+.234*P-Br]]).stream(f),_()},g.fitExtent=function(b,P){return ES(g,b,P)},g.fitSize=function(b,P){return mN(g,b,P)};function _(){return e=t=null,g}return g.scale(1070)}function NY(e){return function(t,r){var n=Fr(t),i=Fr(r),o=e(n*i);return[o*i*Cr(t),o*Cr(r)]}}function N_(e){return function(t,r){var n=Ba(t*t+r*r),i=e(n),o=Cr(i),s=Fr(i);return[Pu(t*o,n*s),Ol(n&&r*o/n)]}}var yN=NY(function(e){return Ba(2/(1+e))});yN.invert=N_(function(e){return 2*Ol(e/2)});function O_e(){return gh(yN).scale(124.75).clipAngle(180-.001)}var _N=NY(function(e){return(e=eY(e))&&e/Cr(e)});_N.invert=N_(function(e){return e});function T_e(){return gh(_N).scale(79.4188).clipAngle(180-.001)}function F_(e,t){return[e,Dw(fN((ba+t)/2))]}F_.invert=function(e,t){return[e,2*sv(QX(t))-ba]};function M_e(){return FY(F_).scale(961/Xu)}function FY(e){var t=gh(e),r=t.center,n=t.scale,i=t.translate,o=t.clipExtent,s=null,a,d,f;t.scale=function(_){return arguments.length?(n(_),g()):n()},t.translate=function(_){return arguments.length?(i(_),g()):i()},t.center=function(_){return arguments.length?(r(_),g()):r()},t.clipExtent=function(_){return arguments.length?(_==null?s=a=d=f=null:(s=+_[0][0],a=+_[0][1],d=+_[1][0],f=+_[1][1]),g()):s==null?null:[[s,a],[d,f]]};function g(){var _=ni*n(),b=t(hY(t.rotate()).invert([0,0]));return o(s==null?[[b[0]-_,b[1]-_],[b[0]+_,b[1]+_]]:e===F_?[[Math.max(b[0]-_,s),a],[Math.min(b[0]+_,d),f]]:[[s,Math.max(b[1]-_,a)],[d,Math.min(b[1]+_,f)]])}return g()}function Kb(e){return fN((ba+e)/2)}function $Y(e,t){var r=Fr(e),n=e===t?Cr(e):Dw(r/Fr(t))/Dw(Kb(t)/Kb(e)),i=r*qI(Kb(e),n)/n;if(!n)return F_;function o(s,a){i>0?a<-ba+Br&&(a=-ba+Br):a>ba-Br&&(a=ba-Br);var d=i/qI(Kb(a),n);return[d*Cr(n*s),i-d*Fr(n*s)]}return o.invert=function(s,a){var d=i-a,f=X0(n)*Ba(s*s+d*d);return[Pu(s,xi(d))/n*X0(d),2*sv(qI(i/f,1/n))-ba]},o}function L_e(){return vN($Y).scale(109.5).parallels([30,30])}function Z0(e,t){return[e,t]}Z0.invert=Z0;function R_e(){return gh(Z0).scale(152.63)}function zY(e,t){var r=Fr(e),n=e===t?Cr(e):(r-Fr(t))/(t-e),i=r/n+e;if(xi(n)<Br)return Z0;function o(s,a){var d=i-a,f=n*s;return[d*Cr(f),i-d*Fr(f)]}return o.invert=function(s,a){var d=i-a;return[Pu(s,xi(d))/n*X0(d),i-X0(n)*Ba(s*s+d*d)]},o}function k_e(){return vN(zY).scale(131.154).center([0,13.9389])}function bN(e,t){var r=Fr(t),n=Fr(e)*r;return[r*Cr(e)/n,Cr(t)/n]}bN.invert=N_(sv);function D_e(){return gh(bN).scale(144.049).clipAngle(60)}function Jb(e,t,r,n){return e===1&&t===1&&r===0&&n===0?cp:wS({point:function(i,o){this.stream.point(i*e+r,o*t+n)}})}function N_e(){var e=1,t=0,r=0,n=1,i=1,o=cp,s=null,a,d,f,g=cp,_,b,P;function L(){return _=b=null,P}return P={stream:function(R){return _&&b===R?_:_=o(g(b=R))},clipExtent:function(R){return arguments.length?(g=R==null?(s=a=d=f=null,cp):pN(s=+R[0][0],a=+R[0][1],d=+R[1][0],f=+R[1][1]),L()):s==null?null:[[s,a],[d,f]]},scale:function(R){return arguments.length?(o=Jb((e=+R)*n,e*i,t,r),L()):e},translate:function(R){return arguments.length?(o=Jb(e*n,e*i,t=+R[0],r=+R[1]),L()):[t,r]},reflectX:function(R){return arguments.length?(o=Jb(e*(n=R?-1:1),e*i,t,r),L()):n<0},reflectY:function(R){return arguments.length?(o=Jb(e*n,e*(i=R?-1:1),t,r),L()):i<0},fitExtent:function(R,$){return ES(P,R,$)},fitSize:function(R,$){return mN(P,R,$)}}}function xN(e,t){var r=t*t,n=r*r;return[e*(.8707-.131979*r+n*(-.013791+n*(.003971*r-.001529*n))),t*(1.007226+r*(.015085+n*(-.044475+.028874*r-.005916*n)))]}xN.invert=function(e,t){var r=t,n=25,i;do{var o=r*r,s=o*o;r-=i=(r*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(xi(i)>Br&&--n>0);return[e/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]};function F_e(){return gh(xN).scale(175.295)}function wN(e,t){return[Fr(t)*Cr(e),Cr(t)]}wN.invert=N_(Ol);function $_e(){return gh(wN).scale(249.5).clipAngle(90+Br)}function EN(e,t){var r=Fr(t),n=1+Fr(e)*r;return[r*Cr(e)/n,Cr(t)/n]}EN.invert=N_(function(e){return 2*sv(e)});function z_e(){return gh(EN).scale(250).clipAngle(142)}function SN(e,t){return[Dw(fN((ba+t)/2)),-e]}SN.invert=function(e,t){return[-t,2*sv(QX(e))-ba]};function B_e(){var e=FY(SN),t=e.center,r=e.rotate;return e.center=function(n){return arguments.length?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},e.rotate=function(n){return arguments.length?r([n[0],n[1],n.length>2?n[2]+90:90]):(n=r(),[n[0],n[1],n[2]-90])},r([0,0,90]).scale(159.155)}const j_e=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:DY,geoAlbersUsa:I_e,geoArea:R0e,geoAzimuthalEqualArea:O_e,geoAzimuthalEqualAreaRaw:yN,geoAzimuthalEquidistant:T_e,geoAzimuthalEquidistantRaw:_N,geoBounds:F0e,geoCentroid:V0e,geoCircle:G0e,geoClipExtent:Y0e,geoConicConformal:L_e,geoConicConformalRaw:$Y,geoConicEqualArea:eE,geoConicEqualAreaRaw:kY,geoConicEquidistant:k_e,geoConicEquidistantRaw:zY,geoContains:t_e,geoDistance:l0,geoEquirectangular:R_e,geoEquirectangularRaw:Z0,geoGnomonic:D_e,geoGnomonicRaw:bN,geoGraticule:xY,geoGraticule10:r_e,geoIdentity:N_e,geoInterpolate:n_e,geoLength:_Y,geoMercator:M_e,geoMercatorRaw:F_,geoNaturalEarth1:F_e,geoNaturalEarth1Raw:xN,geoOrthographic:$_e,geoOrthographicRaw:wN,geoPath:p_e,geoProjection:gh,geoProjectionMutator:gN,geoRotation:hY,geoStereographic:z_e,geoStereographicRaw:EN,geoStream:xc,geoTransform:x_e,geoTransverseMercator:B_e,geoTransverseMercatorRaw:SN},Symbol.toStringTag,{value:"Module"})),U_e=Yg(j_e);var V_e=ev,ZI=O0e,qx=ur,G_e=U_e,tp=Vt;function q_e(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var W_e=q_e(V_e);function BY(e,t,r){r=r||{};var n=r.units||"kilometers",i=r.steps||8;if(!e)throw new Error("geojson is required");if(typeof r!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return qx.geomEach(e,function(s){var a=Wx(s,t,n,i);a&&o.push(a)}),tp.featureCollection(o);case"FeatureCollection":return qx.featureEach(e,function(s){var a=Wx(s,t,n,i);a&&qx.featureEach(a,function(d){d&&o.push(d)})}),tp.featureCollection(o)}return Wx(e,t,n,i)}function Wx(e,t,r,n){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var s=[];return qx.geomEach(e,function(R){var $=Wx(R,t,r,n);$&&s.push($)}),tp.featureCollection(s)}var a=X_e(o),d={type:o.type,coordinates:UY(o.coordinates,a)},f=new ZI.GeoJSONReader,g=f.read(d),_=tp.radiansToLength(tp.lengthToRadians(t,r),"meters"),b=ZI.BufferOp.bufferOp(g,_,n),P=new ZI.GeoJSONWriter;if(b=P.write(b),!jY(b.coordinates)){var L={type:b.type,coordinates:VY(b.coordinates,a)};return tp.feature(L,i)}}function jY(e){return Array.isArray(e[0])?jY(e[0]):isNaN(e[0])}function UY(e,t){return typeof e[0]!="object"?t(e):e.map(function(r){return UY(r,t)})}function VY(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(r){return VY(r,t)})}function X_e(e){var t=W_e.default(e).geometry.coordinates,r=[-t[0],-t[1]];return G_e.geoAzimuthalEquidistant().rotate(r).scale(tp.earthRadius)}cN.exports=BY;cN.exports.default=BY;var Y_e=cN.exports,PN={},H_e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PN,"__esModule",{value:!0});var Z_e=H_e(k_),sB=Er,uB=Vt;function K_e(e,t,r){r===void 0&&(r={});var n=sB.getGeom(e),i=sB.getGeom(t),o=Z_e.default.union(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?uB.polygon(o[0],r.properties):uB.multiPolygon(o,r.properties)}PN.default=K_e;var $_={},J_e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($_,"__esModule",{value:!0});var lB=Vt,cB=Er,Q_e=J_e(k_);function e1e(e,t,r){r===void 0&&(r={});var n=cB.getGeom(e),i=cB.getGeom(t),o=Q_e.default.intersection(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?lB.polygon(o[0],r.properties):lB.multiPolygon(o,r.properties)}$_.default=e1e;var AN={exports:{}},Qb=Vt,t1e=Er,r1e=ur,n1e=rW,i1e=k_;function GY(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var fB=GY(n1e),hB=GY(i1e);function qY(e,t){if(t=t||{},!Qb.isObject(t))throw new Error("options is invalid");var r=t.propertyName;t1e.collectionOf(e,"Polygon","dissolve");var n=[];if(t.propertyName){var i={};r1e.featureEach(e,function(d){Object.prototype.hasOwnProperty.call(i,d.properties[r])||(i[d.properties[r]]=[]),i[d.properties[r]].push(d)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=Qb.multiPolygon(hB.default.union.apply(null,i[o[s]].map(function(d){return d.geometry.coordinates})));a.properties[r]=o[s],n.push(a)}}else return fB.default(Qb.multiPolygon(hB.default.union.apply(null,e.features.map(function(d){return d.geometry.coordinates}))));return fB.default(Qb.featureCollection(n))}AN.exports=qY;AN.exports.default=qY;var o1e=AN.exports,SS={},WY=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(SS,"__esModule",{value:!0});var dB=WY(wa),pB=WY($_),CN=Vt;function a1e(e,t,r){r===void 0&&(r={});var n=JSON.stringify(r.properties||{}),i=e[0],o=e[1],s=e[2],a=e[3],d=(o+a)/2,f=(i+s)/2,g=t*2/dB.default([i,d],[s,d],r),_=g*(s-i),b=t*2/dB.default([f,o],[f,a],r),P=b*(a-o),L=_/2,R=L*2,$=Math.sqrt(3)/2*P,F=s-i,T=a-o,x=3/4*R,N=$,B=(F-R)/(R-L/2),H=Math.floor(B),Z=(H*x-L/2-F)/2-L/2+x/2,Y=Math.floor((T-$)/$),W=(T-Y*$)/2,Q=Y*$-T>$/2;Q&&(W-=$/4);for(var me=[],ge=[],be=0;be<6;be++){var oe=2*Math.PI/6*be;me.push(Math.cos(oe)),ge.push(Math.sin(oe))}for(var Ie=[],fe=0;fe<=H;fe++)for(var G=0;G<=Y;G++){var K=fe%2===1;if(!(G===0&&K)&&!(G===0&&Q)){var re=fe*x+i-Z,ie=G*N+o+W;if(K&&(ie-=$/2),r.triangles===!0)u1e([re,ie],_/2,P/2,JSON.parse(n),me,ge).forEach(function(ae){r.mask?pB.default(r.mask,ae)&&Ie.push(ae):Ie.push(ae)});else{var he=s1e([re,ie],_/2,P/2,JSON.parse(n),me,ge);r.mask?pB.default(r.mask,he)&&Ie.push(he):Ie.push(he)}}}return CN.featureCollection(Ie)}function s1e(e,t,r,n,i,o){for(var s=[],a=0;a<6;a++){var d=e[0]+t*i[a],f=e[1]+r*o[a];s.push([d,f])}return s.push(s[0].slice()),CN.polygon([s],n)}function u1e(e,t,r,n,i,o){for(var s=[],a=0;a<6;a++){var d=[];d.push(e),d.push([e[0]+t*i[a],e[1]+r*o[a]]),d.push([e[0]+t*i[(a+1)%6],e[1]+r*o[(a+1)%6]]),d.push(e),s.push(CN.polygon([d],n))}return s}SS.default=a1e;var IN={exports:{}},XY=Vt,l1e=k_;function c1e(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Xx=c1e(l1e);function YY(e,t){var r=h1e(t),n=null;return e.type==="FeatureCollection"?n=f1e(e):n=HY(Xx.default.union(e.geometry.coordinates)),n.geometry.coordinates.forEach(function(i){r.geometry.coordinates.push(i[0])}),r}function f1e(e){var t=e.features.length===2?Xx.default.union(e.features[0].geometry.coordinates,e.features[1].geometry.coordinates):Xx.default.union.apply(Xx.default,e.features.map(function(r){return r.geometry.coordinates}));return HY(t)}function HY(e){return XY.multiPolygon(e)}function h1e(e){var t=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],r=e&&e.geometry.coordinates||t;return XY.polygon(r)}IN.exports=YY;IN.exports.default=YY;var d1e=IN.exports,PS={},ON={},ZY=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ON,"__esModule",{value:!0});var p1e=ZY(gS),mB=ZY(wa),gB=Vt;function m1e(e,t,r,n){n===void 0&&(n={});for(var i=[],o=e[0],s=e[1],a=e[2],d=e[3],f=t/mB.default([o,s],[a,s],n),g=f*(a-o),_=r/mB.default([o,s],[o,d],n),b=_*(d-s),P=a-o,L=d-s,R=Math.floor(P/g),$=Math.floor(L/b),F=(P-R*g)/2,T=(L-$*b)/2,x=o+F,N=0;N<R;N++){for(var B=s+T,H=0;H<$;H++){var Z=gB.polygon([[[x,B],[x,B+b],[x+g,B+b],[x+g,B],[x,B]]],n.properties);n.mask?p1e.default(n.mask,Z)&&i.push(Z):i.push(Z),B+=b}x+=g}return gB.featureCollection(i)}ON.default=m1e;var g1e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PS,"__esModule",{value:!0});var v1e=g1e(ON);function y1e(e,t,r){return r===void 0&&(r={}),v1e.default(e,t,t,r)}PS.default=y1e;var AS={},KY=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(AS,"__esModule",{value:!0});var vB=KY(wa),yB=KY($_),zf=Vt;function _1e(e,t,r){r===void 0&&(r={});for(var n=[],i=t/vB.default([e[0],e[1]],[e[2],e[1]],r),o=i*(e[2]-e[0]),s=t/vB.default([e[0],e[1]],[e[0],e[3]],r),a=s*(e[3]-e[1]),d=0,f=e[0];f<=e[2];){for(var g=0,_=e[1];_<=e[3];){var b=null,P=null;d%2===0&&g%2===0?(b=zf.polygon([[[f,_],[f,_+a],[f+o,_],[f,_]]],r.properties),P=zf.polygon([[[f,_+a],[f+o,_+a],[f+o,_],[f,_+a]]],r.properties)):d%2===0&&g%2===1?(b=zf.polygon([[[f,_],[f+o,_+a],[f+o,_],[f,_]]],r.properties),P=zf.polygon([[[f,_],[f,_+a],[f+o,_+a],[f,_]]],r.properties)):g%2===0&&d%2===1?(b=zf.polygon([[[f,_],[f,_+a],[f+o,_+a],[f,_]]],r.properties),P=zf.polygon([[[f,_],[f+o,_+a],[f+o,_],[f,_]]],r.properties)):g%2===1&&d%2===1&&(b=zf.polygon([[[f,_],[f,_+a],[f+o,_],[f,_]]],r.properties),P=zf.polygon([[[f,_+a],[f+o,_+a],[f+o,_],[f,_+a]]],r.properties)),r.mask?(yB.default(r.mask,b)&&n.push(b),yB.default(r.mask,P)&&n.push(P)):(n.push(b),n.push(P)),_+=a,g++}d++,f+=o}return zf.featureCollection(n)}AS.default=_1e;var TN={exports:{}},b1e=Ps,x1e=SS,w1e=iS,E1e=wa,S1e=ph,P1e=PS,A1e=AS,C1e=ja,I1e=Vt,_B=ur,O1e=Er;function Od(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var T1e=Od(b1e),M1e=Od(x1e),L1e=Od(w1e),R1e=Od(E1e),k1e=Od(S1e),D1e=Od(P1e),N1e=Od(A1e),F1e=Od(C1e);function JY(e,t,r){if(r=r||{},typeof r!="object")throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!e)throw new Error("points is required");if(O1e.collectionOf(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(o!==void 0&&typeof o!="number")throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var s=T1e.default(e),a;switch(n){case"point":case"points":a=L1e.default(s,t,r);break;case"square":case"squares":a=D1e.default(s,t,r);break;case"hex":case"hexes":a=M1e.default(s,t,r);break;case"triangle":case"triangles":a=N1e.default(s,t,r);break;default:throw new Error("invalid gridType")}var d=[];return _B.featureEach(a,function(f){var g=0,_=0;_B.featureEach(e,function(P){var L=n==="point"?f:k1e.default(f),R=R1e.default(L,P,r),$;if(i!==void 0&&($=P.properties[i]),$===void 0&&($=P.geometry.coordinates[2]),$===void 0)throw new Error("zValue is missing");R===0&&(g=$);var F=1/Math.pow(R,o);_+=F,g+=F*$});var b=F1e.default(f);b.properties[i]=g/_,d.push(b)}),I1e.featureCollection(d)}TN.exports=JY;TN.exports.default=JY;var $1e=TN.exports;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Yae,r=WE,n=tq,i=hk,o=wk,s=Gue,a=ole,d=Ck,f=vle,g=ble,_=Sq,b=Aq,P=S_,L=Ule,R=ev,$=Dk,F=ph,T=Nk,x=wa,N=KE,B=Ps,H=xce,Z=E_,Y=nu,W=P_,Q=tv,me=Uk,ge=Jce,be=YE,oe=Sd,Ie=dh,fe=Gk,G=ffe,K=A_,re=Wk,ie=nS,he=Cfe,ae=Kq,Te=iS,Le=aS,Xe=rW,$e=Pd,at=rhe,_t=dhe,Lt=phe,pt=$p,Ot=Ihe,vt=sS,Ze=Ad,Zt=uD,rr=lD,Gt=lS,br=gpe,un=Bp,ot=rv,Oe=jp,ve=Ope,xe=Dpe,je=jme,Ke=KW,qe=eX,mt=Ege,rt=Lge,Ht=MD,lr=dS,ut=kl,kt=BD,$t=fS,Lr=jD,Rr=nv,Nt=VD,yn=oS,_n=gS,ti=ja,dn=Fp,Kr=GD,Xn=WD,$r=tS,Pt=YD,Ei=uye,Ne=Rye,ce=NX,ye=L_,Me=eN,ze=Yye,Ge=iN,nt=Jye,He=sN,Ye=R_,tt=bS,yt=av,bt=mh,gt=Vt,Rt=Er,dr=ur,qt=I0e,Kt=Y_e,er=PN,Yr=$_,Hr=o1e,Wr=SS,Dr=d1e,go=PS,Wt=AS,Vr=$1e;function xt(kr){return kr&&typeof kr=="object"&&"default"in kr?kr:{default:kr}}function Jr(kr){if(kr&&kr.__esModule)return kr;var ea=Object.create(null);return kr&&Object.keys(kr).forEach(function(hs){if(hs!=="default"){var Xa=Object.getOwnPropertyDescriptor(kr,hs);Object.defineProperty(ea,hs,Xa.get?Xa:{enumerable:!0,get:function(){return kr[hs]}})}}),ea.default=kr,Object.freeze(ea)}var Mi=xt(t),yi=xt(r),Si=xt(n),Pi=xt(i),da=xt(o),no=xt(s),di=xt(a),Ko=xt(d),Ea=xt(f),oi=xt(g),Yn=xt(_),io=xt(b),Uo=xt(P),pa=xt(L),Ou=xt(R),or=xt($),Tu=xt(F),oo=xt(T),Ga=xt(x),zr=xt(N),Mu=xt(B),Ef=xt(H),el=xt(Z),vo=xt(Y),Sa=xt(W),tl=xt(Q),Dc=xt(me),It=xt(ge),rl=xt(be),Ao=xt(oe),Pa=xt(Ie),nl=xt(fe),Ai=xt(G),gn=xt(K),Qr=xt(re),Hn=xt(ie),Jo=xt(he),il=xt(ae),Gi=xt(Te),As=xt(Le),yo=xt(Xe),on=xt($e),cs=xt(at),ai=xt(_t),Lu=xt(Lt),qi=xt(pt),rn=xt(Ot),Wi=xt(vt),qa=xt(Ze),Fi=xt(Zt),Co=xt(rr),Zr=xt(Gt),Wa=xt(br),si=xt(un),Dl=xt(ot),_o=xt(Oe),ui=xt(ve),Ci=xt(xe),fs=xt(je),Sf=xt(Ke),Ru=xt(qe),Nc=xt(mt),ou=xt(rt),Ii=xt(Ht),ao=xt(lr),ri=xt(ut),Cs=xt(kt),Aa=xt($t),ol=xt(Lr),Zn=xt(Rr),cr=xt(Nt),Pf=xt(yn),al=xt(_n),ki=xt(ti),Ca=xt(dn),Ia=xt(Kr),Is=xt(Xn),Fc=xt($r),$c=xt(Pt),ar=xt(Ei),Oa=xt(Ne),pi=xt(ce),Nl=xt(ye),$i=xt(Me),xh=xt(ze),nn=xt(Ge),ku=xt(nt),Qn=xt(He),li=xt(Ye),Xi=Jr(tt),qr=Jr(yt),Fl=Jr(bt),bn=Jr(gt),yr=Jr(Rt),Yi=Jr(dr),Os=xt(qt),Ta=xt(Kt),Qo=xt(er),zi=xt(Yr),Dd=xt(Hr),zc=xt(Wr),Ma=xt(Dr),Vo=xt(go),Ts=xt(Wt),bo=xt(Vr);Object.keys(tt).forEach(function(kr){kr!=="default"&&Object.defineProperty(e,kr,{enumerable:!0,get:function(){return tt[kr]}})}),Object.keys(yt).forEach(function(kr){kr!=="default"&&Object.defineProperty(e,kr,{enumerable:!0,get:function(){return yt[kr]}})}),Object.keys(bt).forEach(function(kr){kr!=="default"&&Object.defineProperty(e,kr,{enumerable:!0,get:function(){return bt[kr]}})}),Object.keys(gt).forEach(function(kr){kr!=="default"&&Object.defineProperty(e,kr,{enumerable:!0,get:function(){return gt[kr]}})}),Object.keys(Rt).forEach(function(kr){kr!=="default"&&Object.defineProperty(e,kr,{enumerable:!0,get:function(){return Rt[kr]}})}),Object.keys(dr).forEach(function(kr){kr!=="default"&&Object.defineProperty(e,kr,{enumerable:!0,get:function(){return dr[kr]}})}),Object.defineProperty(e,"isolines",{enumerable:!0,get:function(){return Mi.default}}),Object.defineProperty(e,"convex",{enumerable:!0,get:function(){return yi.default}}),Object.defineProperty(e,"pointsWithinPolygon",{enumerable:!0,get:function(){return Si.default}}),Object.defineProperty(e,"within",{enumerable:!0,get:function(){return Si.default}}),Object.defineProperty(e,"concave",{enumerable:!0,get:function(){return Pi.default}}),Object.defineProperty(e,"collect",{enumerable:!0,get:function(){return da.default}}),Object.defineProperty(e,"flip",{enumerable:!0,get:function(){return no.default}}),Object.defineProperty(e,"simplify",{enumerable:!0,get:function(){return di.default}}),Object.defineProperty(e,"bezier",{enumerable:!0,get:function(){return Ko.default}}),Object.defineProperty(e,"bezierSpline",{enumerable:!0,get:function(){return Ko.default}}),Object.defineProperty(e,"tag",{enumerable:!0,get:function(){return Ea.default}}),Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return oi.default}}),Object.defineProperty(e,"envelope",{enumerable:!0,get:function(){return Yn.default}}),Object.defineProperty(e,"square",{enumerable:!0,get:function(){return io.default}}),Object.defineProperty(e,"circle",{enumerable:!0,get:function(){return Uo.default}}),Object.defineProperty(e,"midpoint",{enumerable:!0,get:function(){return pa.default}}),Object.defineProperty(e,"center",{enumerable:!0,get:function(){return Ou.default}}),Object.defineProperty(e,"centerOfMass",{enumerable:!0,get:function(){return or.default}}),Object.defineProperty(e,"centroid",{enumerable:!0,get:function(){return Tu.default}}),Object.defineProperty(e,"combine",{enumerable:!0,get:function(){return oo.default}}),Object.defineProperty(e,"distance",{enumerable:!0,get:function(){return Ga.default}}),Object.defineProperty(e,"explode",{enumerable:!0,get:function(){return zr.default}}),Object.defineProperty(e,"bbox",{enumerable:!0,get:function(){return Mu.default}}),Object.defineProperty(e,"tesselate",{enumerable:!0,get:function(){return Ef.default}}),Object.defineProperty(e,"bboxPolygon",{enumerable:!0,get:function(){return el.default}}),Object.defineProperty(e,"booleanPointInPolygon",{enumerable:!0,get:function(){return vo.default}}),Object.defineProperty(e,"inside",{enumerable:!0,get:function(){return vo.default}}),Object.defineProperty(e,"nearest",{enumerable:!0,get:function(){return Sa.default}}),Object.defineProperty(e,"nearestPoint",{enumerable:!0,get:function(){return Sa.default}}),Object.defineProperty(e,"nearestPointOnLine",{enumerable:!0,get:function(){return tl.default}}),Object.defineProperty(e,"pointOnLine",{enumerable:!0,get:function(){return tl.default}}),Object.defineProperty(e,"nearestPointToLine",{enumerable:!0,get:function(){return Dc.default}}),Object.defineProperty(e,"planepoint",{enumerable:!0,get:function(){return It.default}}),Object.defineProperty(e,"tin",{enumerable:!0,get:function(){return rl.default}}),Object.defineProperty(e,"bearing",{enumerable:!0,get:function(){return Ao.default}}),Object.defineProperty(e,"destination",{enumerable:!0,get:function(){return Pa.default}}),Object.defineProperty(e,"kinks",{enumerable:!0,get:function(){return nl.default}}),Object.defineProperty(e,"pointOnFeature",{enumerable:!0,get:function(){return Ai.default}}),Object.defineProperty(e,"pointOnSurface",{enumerable:!0,get:function(){return Ai.default}}),Object.defineProperty(e,"area",{enumerable:!0,get:function(){return gn.default}}),Object.defineProperty(e,"along",{enumerable:!0,get:function(){return Qr.default}}),Object.defineProperty(e,"length",{enumerable:!0,get:function(){return Hn.default}}),Object.defineProperty(e,"lineDistance",{enumerable:!0,get:function(){return Hn.default}}),Object.defineProperty(e,"lineSlice",{enumerable:!0,get:function(){return Jo.default}}),Object.defineProperty(e,"lineSliceAlong",{enumerable:!0,get:function(){return il.default}}),Object.defineProperty(e,"pointGrid",{enumerable:!0,get:function(){return Gi.default}}),Object.defineProperty(e,"truncate",{enumerable:!0,get:function(){return As.default}}),Object.defineProperty(e,"flatten",{enumerable:!0,get:function(){return yo.default}}),Object.defineProperty(e,"lineIntersect",{enumerable:!0,get:function(){return on.default}}),Object.defineProperty(e,"lineChunk",{enumerable:!0,get:function(){return cs.default}}),Object.defineProperty(e,"unkinkPolygon",{enumerable:!0,get:function(){return ai.default}}),Object.defineProperty(e,"greatCircle",{enumerable:!0,get:function(){return Lu.default}}),Object.defineProperty(e,"lineSegment",{enumerable:!0,get:function(){return qi.default}}),Object.defineProperty(e,"lineSplit",{enumerable:!0,get:function(){return rn.default}}),Object.defineProperty(e,"lineArc",{enumerable:!0,get:function(){return Wi.default}}),Object.defineProperty(e,"polygonToLine",{enumerable:!0,get:function(){return qa.default}}),Object.defineProperty(e,"polygonToLineString",{enumerable:!0,get:function(){return qa.default}}),Object.defineProperty(e,"lineStringToPolygon",{enumerable:!0,get:function(){return Fi.default}}),Object.defineProperty(e,"lineToPolygon",{enumerable:!0,get:function(){return Fi.default}}),Object.defineProperty(e,"bboxClip",{enumerable:!0,get:function(){return Co.default}}),Object.defineProperty(e,"lineOverlap",{enumerable:!0,get:function(){return Zr.default}}),Object.defineProperty(e,"sector",{enumerable:!0,get:function(){return Wa.default}}),Object.defineProperty(e,"rhumbBearing",{enumerable:!0,get:function(){return si.default}}),Object.defineProperty(e,"rhumbDistance",{enumerable:!0,get:function(){return Dl.default}}),Object.defineProperty(e,"rhumbDestination",{enumerable:!0,get:function(){return _o.default}}),Object.defineProperty(e,"polygonTangents",{enumerable:!0,get:function(){return ui.default}}),Object.defineProperty(e,"rewind",{enumerable:!0,get:function(){return Ci.default}}),Object.defineProperty(e,"isobands",{enumerable:!0,get:function(){return fs.default}}),Object.defineProperty(e,"transformRotate",{enumerable:!0,get:function(){return Sf.default}}),Object.defineProperty(e,"transformScale",{enumerable:!0,get:function(){return Ru.default}}),Object.defineProperty(e,"transformTranslate",{enumerable:!0,get:function(){return Nc.default}}),Object.defineProperty(e,"lineOffset",{enumerable:!0,get:function(){return ou.default}}),Object.defineProperty(e,"polygonize",{enumerable:!0,get:function(){return Ii.default}}),Object.defineProperty(e,"booleanDisjoint",{enumerable:!0,get:function(){return ao.default}}),Object.defineProperty(e,"booleanContains",{enumerable:!0,get:function(){return ri.default}}),Object.defineProperty(e,"booleanCrosses",{enumerable:!0,get:function(){return Cs.default}}),Object.defineProperty(e,"booleanClockwise",{enumerable:!0,get:function(){return Aa.default}}),Object.defineProperty(e,"booleanOverlap",{enumerable:!0,get:function(){return ol.default}}),Object.defineProperty(e,"booleanPointOnLine",{enumerable:!0,get:function(){return Zn.default}}),Object.defineProperty(e,"booleanEqual",{enumerable:!0,get:function(){return cr.default}}),Object.defineProperty(e,"booleanWithin",{enumerable:!0,get:function(){return Pf.default}}),Object.defineProperty(e,"booleanIntersects",{enumerable:!0,get:function(){return al.default}}),Object.defineProperty(e,"clone",{enumerable:!0,get:function(){return ki.default}}),Object.defineProperty(e,"cleanCoords",{enumerable:!0,get:function(){return Ca.default}}),Object.defineProperty(e,"clustersDbscan",{enumerable:!0,get:function(){return Ia.default}}),Object.defineProperty(e,"clustersKmeans",{enumerable:!0,get:function(){return Is.default}}),Object.defineProperty(e,"pointToLineDistance",{enumerable:!0,get:function(){return Fc.default}}),Object.defineProperty(e,"booleanParallel",{enumerable:!0,get:function(){return $c.default}}),Object.defineProperty(e,"shortestPath",{enumerable:!0,get:function(){return ar.default}}),Object.defineProperty(e,"voronoi",{enumerable:!0,get:function(){return Oa.default}}),Object.defineProperty(e,"ellipse",{enumerable:!0,get:function(){return pi.default}}),Object.defineProperty(e,"centerMean",{enumerable:!0,get:function(){return Nl.default}}),Object.defineProperty(e,"centerMedian",{enumerable:!0,get:function(){return $i.default}}),Object.defineProperty(e,"standardDeviationalEllipse",{enumerable:!0,get:function(){return xh.default}}),Object.defineProperty(e,"angle",{enumerable:!0,get:function(){return nn.default}}),Object.defineProperty(e,"polygonSmooth",{enumerable:!0,get:function(){return ku.default}}),Object.defineProperty(e,"moranIndex",{enumerable:!0,get:function(){return Qn.default}}),Object.defineProperty(e,"distanceWeight",{enumerable:!0,get:function(){return li.default}}),e.projection=Xi,e.random=qr,e.clusters=Fl,Object.defineProperty(e,"bearingToAngle",{enumerable:!0,get:function(){return gt.bearingToAzimuth}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return gt.convertLength}}),Object.defineProperty(e,"degrees2radians",{enumerable:!0,get:function(){return gt.degreesToRadians}}),Object.defineProperty(e,"distanceToDegrees",{enumerable:!0,get:function(){return gt.lengthToDegrees}}),Object.defineProperty(e,"distanceToRadians",{enumerable:!0,get:function(){return gt.lengthToRadians}}),e.helpers=bn,Object.defineProperty(e,"radians2degrees",{enumerable:!0,get:function(){return gt.radiansToDegrees}}),Object.defineProperty(e,"radiansToDistance",{enumerable:!0,get:function(){return gt.radiansToLength}}),e.invariant=yr,e.meta=Yi,Object.defineProperty(e,"difference",{enumerable:!0,get:function(){return Os.default}}),Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Ta.default}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return Qo.default}}),Object.defineProperty(e,"intersect",{enumerable:!0,get:function(){return zi.default}}),Object.defineProperty(e,"dissolve",{enumerable:!0,get:function(){return Dd.default}}),Object.defineProperty(e,"hexGrid",{enumerable:!0,get:function(){return zc.default}}),Object.defineProperty(e,"mask",{enumerable:!0,get:function(){return Ma.default}}),Object.defineProperty(e,"squareGrid",{enumerable:!0,get:function(){return Vo.default}}),Object.defineProperty(e,"triangleGrid",{enumerable:!0,get:function(){return Ts.default}}),Object.defineProperty(e,"interpolate",{enumerable:!0,get:function(){return bo.default}})})(x_);var bB;function MN(){return bB||(bB=1,function(e){var t=Pe&&Pe.__assign||function(){return t=Object.assign||function($){for(var F,T=1,x=arguments.length;T<x;T++){F=arguments[T];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&($[N]=F[N])}return $},t.apply(this,arguments)},r=Pe&&Pe.__awaiter||function($,F,T,x){function N(B){return B instanceof T?B:new T(function(H){H(B)})}return new(T||(T=Promise))(function(B,H){function Z(Q){try{W(x.next(Q))}catch(me){H(me)}}function Y(Q){try{W(x.throw(Q))}catch(me){H(me)}}function W(Q){Q.done?B(Q.value):N(Q.value).then(Z,Y)}W((x=x.apply($,F||[])).next())})},n=Pe&&Pe.__generator||function($,F){var T={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},x,N,B,H;return H={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function Z(W){return function(Q){return Y([W,Q])}}function Y(W){if(x)throw new TypeError("Generator is already executing.");for(;H&&(H=0,W[0]&&(T=0)),T;)try{if(x=1,N&&(B=W[0]&2?N.return:W[0]?N.throw||((B=N.return)&&B.call(N),0):N.next)&&!(B=B.call(N,W[1])).done)return B;switch(N=0,B&&(W=[W[0]&2,B.value]),W[0]){case 0:case 1:B=W;break;case 4:return T.label++,{value:W[1],done:!1};case 5:T.label++,N=W[1],W=[0];continue;case 7:W=T.ops.pop(),T.trys.pop();continue;default:if(B=T.trys,!(B=B.length>0&&B[B.length-1])&&(W[0]===6||W[0]===2)){T=0;continue}if(W[0]===3&&(!B||W[1]>B[0]&&W[1]<B[3])){T.label=W[1];break}if(W[0]===6&&T.label<B[1]){T.label=B[1],B=W;break}if(B&&T.label<B[2]){T.label=B[2],T.ops.push(W);break}B[2]&&T.ops.pop(),T.trys.pop();continue}W=F.call($,T)}catch(Q){W=[6,Q],N=0}finally{x=B=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}},i=Pe&&Pe.__spreadArray||function($,F,T){if(T||arguments.length===2)for(var x=0,N=F.length,B;x<N;x++)(B||!(x in F))&&(B||(B=Array.prototype.slice.call(F,0,x)),B[x]=F[x]);return $.concat(B||Array.prototype.slice.call(F))};Object.defineProperty(e,"__esModule",{value:!0}),e.deleteFeatures=e.updateFeature=e.addFeatures=e.getPois=e.getAmenities=e.getFeatures=void 0;var o=Tc,s=Su,a=GE,d=WH(),f=x_,g=function($){var F=$.initPolygons,T=$.autoLabelLines,x=$.hiddenAmenities,N=$.useTimerangeData,B=$.filter,H=$.featuresMaxBounds;return r(void 0,void 0,void 0,function(){var Z,Y,W,Q,me;return n(this,function(ge){switch(ge.label){case 0:return Z="/v5/geo/features",H&&(Z+="/".concat(H[0][0],",").concat(H[0][1],",").concat(H[1][0],",").concat(H[1][1])),[4,o.axios.get(Z)];case 1:return Y=ge.sent(),F&&(W=[],N&&(Y.data.features=Y.data.features.map(function(be){var oe,Ie;return be.properties&&(!((oe=be.properties.metadata)===null||oe===void 0)&&oe.dateStart)&&(!((Ie=be.properties.metadata)===null||Ie===void 0)&&Ie.dateEnd)?be.properties.metadata.dateStart<=Date.now()&&be.properties.metadata.dateEnd>=Date.now()?be:void 0:be}).filter(function(be){return be!==void 0})),B&&B.key&&B.value&&(Y.data.features=Y.data.features.map(function(be){return(0,o.getNestedObjectValue)(be,B.key)?(0,o.getNestedObjectValue)(be,B.key)===B.value?be:void 0:be}).filter(function(be){return be!==void 0})),Q=Y.data.features.filter(function(be){return be.properties.type==="shop"&&be.geometry.type==="MultiPolygon"}),me=Y.data.features.filter(function(be){return be.properties.type==="label-line"}),Y.data.features=Y.data.features.map(function(be,oe){var Ie,fe,G;if(x&&x.length>0&&x.includes(be.properties.amenity)&&(be.properties.hideIcon="hide"),be.properties.type==="poi"){be.id=be.id?be.id.replace(/\{|\}/g,""):null,be.properties.id=be.properties.id?be.properties.id.replace(/\{|\}/g,""):null;var K,re;if(Q.forEach(function(Ze){var Zt,rr;Ze.properties.id||(Ze.properties.id=Ze.id),((Zt=be.properties)===null||Zt===void 0?void 0:Zt.level)===((rr=Ze.properties)===null||rr===void 0?void 0:rr.level)&&(0,f.booleanPointInPolygon)(be,Ze)&&(K=Ze)}),!K&&be.properties.metadata&&be.properties.metadata.polygon_id&&(K=Y.data.features.find(function(Ze){var Zt,rr;return((Zt=Ze.properties.id)===null||Zt===void 0?void 0:Zt.replace(/\{|\}/g,""))===((rr=be.properties.metadata.polygon_id)===null||rr===void 0?void 0:rr.replace(/\{|\}/g,""))})),K&&(be.properties._dynamic=be.properties._dynamic?be.properties._dynamic:{},be.properties._dynamic.id=be.id,be.properties._dynamic.type="poi-custom",be.properties._dynamic.amenity=be.properties.amenity,be.properties._dynamic.polygon_id=(Ie=K.properties.id)===null||Ie===void 0?void 0:Ie.replace(/\{|\}/g,""),K.properties._dynamic=K.properties._dynamic?K.properties._dynamic:{},K.properties._dynamic.id=(fe=K.properties.id)===null||fe===void 0?void 0:fe.replace(/\{|\}/g,""),K.properties._dynamic.type="shop-custom",K.properties._dynamic.poi_id=be.properties.id,K.properties._dynamic.amenity=be.properties.amenity,K.id=JSON.stringify(oe),me.forEach(function(Ze){var Zt,rr;((Zt=K.properties)===null||Zt===void 0?void 0:Zt.level)===((rr=Ze.properties)===null||rr===void 0?void 0:rr.level)&&(0,f.booleanPointInPolygon)((0,f.pointOnFeature)(Ze),K)&&(re=Ze)}),re&&(re.id=JSON.stringify(oe+9999),be.properties._dynamic.label_id=re.id,K.properties._dynamic.label_id=re.id,re.properties._dynamic=re.properties._dynamic?re.properties._dynamic:{},re.properties._dynamic.id=(G=re.properties.id)===null||G===void 0?void 0:G.replace(/\{|\}/g,""),re.properties._dynamic.type="shop-label",re.properties._dynamic.poi_id=be.properties.id,re.properties._dynamic.amenity=be.properties.amenity,re.properties._dynamic.polygon_id=K.properties._dynamic.id,re.properties._dynamic.length=Math.ceil((0,f.length)(re)*1e3),re.properties.title=be.properties.title,re.properties.title_i18n=be.properties.title_i18n),!re)){var ie=K.properties["label-line"]?JSON.parse(JSON.stringify(K.properties["label-line"])):K.properties.metadata&&K.properties.metadata["label-line"]?JSON.parse(JSON.stringify(K.properties.metadata["label-line"])):be.properties.metadata&&be.properties.metadata["label-line"]?JSON.parse(JSON.stringify(be.properties.metadata["label-line"])):void 0;if(ie&&ie!==void 0&&ie.length>0){var he=typeof ie=="string"?JSON.parse(ie):ie;if(he[0]instanceof Array&&he[1]instanceof Array){var ae=JSON.parse(JSON.stringify(be));ae.geometry={coordinates:he,type:"LineString"},ae.properties.id=JSON.stringify(oe+9999),ae.id=JSON.stringify(oe+9999),ae.properties.type="shop-label",ae.properties._dynamic.type="shop-label",ae.properties._dynamic.length=Math.ceil((0,f.length)(ae)*1e3),K.properties._dynamic.label_id=ae.properties.id,W.push(ae)}}else if(T){for(var Te=void 0,Le=void 0,Xe=0;Xe<K.geometry.coordinates[0][0].length;Xe++){var $e=K.geometry.coordinates[0][0][Xe],at=K.geometry.coordinates[0][0][Xe+1];if(at){var _t=(0,f.lineString)([$e,at],t({},be.properties)),Lt=(0,f.length)(_t);_t.properties._dynamic=t(t({},_t.properties._dynamic),{length:Math.ceil(Lt*1e3)}),Te?Lt>Te.properties._dynamic.length&&(Te=_t):Te=_t}}var pt=(0,f.pointToLineDistance)((0,f.centroid)(K),Te);Le=(0,f.lineOffset)(Te,pt),Le=(0,f.transformScale)(Le,10);var Ot=(0,f.lineIntersect)(K,Le);if(Ot.features.length>1){var vt=(0,f.lineString)([Ot.features[0].geometry.coordinates,Ot.features[Ot.features.length-1].geometry.coordinates]);Le.geometry=vt.geometry}Le.properties.id=JSON.stringify(oe+9999),Le.id=JSON.stringify(oe+9999),Le.properties.type="shop-label",Le.properties._dynamic.type="shop-label",K.properties._dynamic.label_id=Le.properties.id,W.push(Le)}}}return be}),Y.data.features=Y.data.features.concat(W)),[2,new s.FeatureCollection(Y.data)]}})})};e.getFeatures=g;var _=function($){return r(void 0,void 0,void 0,function(){var F,T;return n(this,function(x){switch(x.label){case 0:return F="/v5/geo/amenities",[4,o.axios.get(F)];case 1:return T=x.sent(),[2,T.data.map(function(N){return $&&N[$]&&N.category!=="default"&&(N.id=N[$].toLowerCase()),new a.AmenityModel(N)})]}})})};e.getAmenities=_;var b=function(){return r(void 0,void 0,void 0,function(){var $,F,T,x;return n(this,function(N){switch(N.label){case 0:return $="/v5/geo/features",[4,o.axios.get($)];case 1:return F=N.sent(),T=d.globalState.dynamicFeatures,x=i(i([],F.data.features,!0),T.features,!0).filter(function(B){return B.properties.usecase==="poi"||B.properties.type==="poi"}).sort(function(B,H){return B.properties.title>H.properties.title?-1:1}).sort(function(B,H){return B.properties.level>H.properties.level?1:-1}).map(function(B){return new s.default(B)}),[2,x]}})})};e.getPois=b;var P=function($){return r(void 0,void 0,void 0,function(){var F,T;return n(this,function(x){switch(x.label){case 0:F="/v5/geo/features",x.label=1;case 1:return x.trys.push([1,3,,4]),[4,o.axios.post(F,$)];case 2:return x.sent(),[3,4];case 3:throw T=x.sent(),new Error(T.message);case 4:return[2]}})})};e.addFeatures=P;var L=function($,F){return r(void 0,void 0,void 0,function(){var T,x;return n(this,function(N){switch(N.label){case 0:T="/v5/geo/features/"+F,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,o.axios.put(T,$)];case 2:return N.sent(),[3,4];case 3:throw x=N.sent(),new Error(x.message);case 4:return[2]}})})};e.updateFeature=L;var R=function($){return r(void 0,void 0,void 0,function(){var F,T;return n(this,function(x){switch(x.label){case 0:F="/v5/geo/features/delete",x.label=1;case 1:return x.trys.push([1,3,,4]),[4,o.axios.post(F,$)];case 2:return x.sent(),[3,4];case 3:throw T=x.sent(),new Error(T.message);case 4:return[2]}})})};e.deleteFeatures=R,e.default={getFeatures:e.getFeatures,addFeatures:e.addFeatures,updateFeature:e.updateFeature,deleteFeatures:e.deleteFeatures,getAmenities:e.getAmenities,getPois:e.getPois}}(dI)),dI}var xB;function z1e(){return xB||(xB=1,function(e){var t=Pe&&Pe.__awaiter||function(d,f,g,_){function b(P){return P instanceof g?P:new g(function(L){L(P)})}return new(g||(g=Promise))(function(P,L){function R(T){try{F(_.next(T))}catch(x){L(x)}}function $(T){try{F(_.throw(T))}catch(x){L(x)}}function F(T){T.done?P(T.value):b(T.value).then(R,$)}F((_=_.apply(d,f||[])).next())})},r=Pe&&Pe.__generator||function(d,f){var g={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},_,b,P,L;return L={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function R(F){return function(T){return $([F,T])}}function $(F){if(_)throw new TypeError("Generator is already executing.");for(;L&&(L=0,F[0]&&(g=0)),g;)try{if(_=1,b&&(P=F[0]&2?b.return:F[0]?b.throw||((P=b.return)&&P.call(b),0):b.next)&&!(P=P.call(b,F[1])).done)return P;switch(b=0,P&&(F=[F[0]&2,P.value]),F[0]){case 0:case 1:P=F;break;case 4:return g.label++,{value:F[1],done:!1};case 5:g.label++,b=F[1],F=[0];continue;case 7:F=g.ops.pop(),g.trys.pop();continue;default:if(P=g.trys,!(P=P.length>0&&P[P.length-1])&&(F[0]===6||F[0]===2)){g=0;continue}if(F[0]===3&&(!P||F[1]>P[0]&&F[1]<P[3])){g.label=F[1];break}if(F[0]===6&&g.label<P[1]){g.label=P[1],P=F;break}if(P&&g.label<P[2]){g.label=P[2],g.ops.push(F);break}P[2]&&g.ops.pop(),g.trys.pop();continue}F=f.call(d,g)}catch(T){F=[6,T],b=0}finally{_=P=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getPackage=void 0;var n=v_,i=Qg,o=nd,s=MN(),a=function(d){var f=d.initPolygons,g=d.autoLabelLines,_=d.amenityIdProperty,b=d.hiddenAmenities,P=d.useTimerangeData,L=d.filter,R=d.featuresMaxBounds;return t(void 0,void 0,void 0,function(){var $,F;return r(this,function(T){switch(T.label){case 0:return $={},F=[(0,n.getPlaces)().then(function(x){return $.places=x.data}),(0,i.getFloors)().then(function(x){return $.floors=x.data}),(0,o.getStyle)().then(function(x){return $.style=x}),(0,o.getStyles)().then(function(x){return $.styles=x}),(0,s.getFeatures)({initPolygons:f,autoLabelLines:g,hiddenAmenities:b,useTimerangeData:P,filter:L,featuresMaxBounds:R}).then(function(x){return $.features=x}),(0,s.getAmenities)(_).then(function(x){return $.amenities=x})],[4,Promise.all(F)];case 1:return T.sent(),[2,$]}})})};e.getPackage=a,e.default={getPackage:e.getPackage}}(hI)),hI}var LN={},uv={},RN={},z_={};Object.defineProperty(z_,"__esModule",{value:!0});z_.Eventable=void 0;var B1e=function(){function e(){this._observers=[]}return e.prototype.on=function(t){this._observers&&this._observers.push(t)},e.prototype.off=function(t){var r=this._observers?this._observers.findIndex(function(n){return n===t}):0;r>=0&&this._observers&&this._observers.splice(r,1)},e.prototype.notify=function(t,r){var n=this;this._observers&&this._observers.forEach(function(i){return i(t,r,n)})},e}();z_.Eventable=B1e;var j1e=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(RN,"__esModule",{value:!0});var U1e=z_,V1e=function(e){j1e(t,e);function t(r,n){var i=e.call(this)||this;return i.id=r,i.type=n,i}return Object.defineProperty(t.prototype,"source",{get:function(){return{type:this.type}},enumerable:!1,configurable:!0}),t}(U1e.Eventable);RN.default=V1e;var G1e=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(uv,"__esModule",{value:!0});var q1e=RN,W1e=Su,X1e=function(e){G1e(t,e);function t(r,n){var i=e.call(this,r,"geojson")||this;return i.cluster=!1,i.clusterRadius=50,i.clusterMaxZoom=19,i.isEditable=!0,i.data=n||new W1e.FeatureCollection({}),i}return Object.defineProperty(t.prototype,"source",{get:function(){return{type:this.type,data:this.data,cluster:this.cluster,clusterMaxZoom:this.clusterMaxZoom,clusterRadius:this.clusterRadius}},enumerable:!1,configurable:!0}),t}(q1e.default);uv.default=X1e;var Y1e=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(LN,"__esModule",{value:!0});var H1e=uv,Z1e=Su,K1e=function(e){Y1e(t,e);function t(r){var n=e.call(this,"main")||this;return n.language="en",n}return t.prototype.fetch=function(r){this.data=new Z1e.FeatureCollection(r),this.mapLanguage()},t.prototype.create=function(r){this.data.features.push(r)},t.prototype.update=function(r){var n=this.data.features.findIndex(function(i){return i.id===r.id||i.properties.id===r.id});this.data.features[n]=r},t.prototype.delete=function(r){var n=this.data.features.findIndex(function(i){return i.id===r||i.properties.id===r});this.data.features.splice(n,1)},t.prototype.mapLanguage=function(){var r=this,n=this.data.features.filter(function(i){return typeof i.properties.title_i18n=="object"});n.forEach(function(i){return r.mapFeatureLanguage(i,r.language)})},t.prototype.mapFeatureLanguage=function(r,n){typeof r.properties.title_i18n=="string"&&(r.properties.title_i18n=JSON.parse(r.properties.title_i18n)),typeof r.properties.title_i18n=="object"&&(r.properties.title=r.properties.title_i18n[n]?r.properties.title_i18n[n]:r.properties.title)},t.prototype.query=function(r,n){return this.data.features.filter(function(i){return i.properties.title&&i.properties.title.toLowerCase().match(r.toLowerCase())})},t.prototype.get=function(r){return this.data.features.find(function(n){return n.id===r})},t.prototype.getInternal=function(r){return this.data.features.find(function(n){return n.properties.id===r})},Object.defineProperty(t.prototype,"collection",{get:function(){return{type:"FeatureCollection",features:this.data.features.map(function(r){return r.json})}},enumerable:!1,configurable:!0}),t}(H1e.default);LN.default=K1e;var kN={},J1e=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(kN,"__esModule",{value:!0});var Q1e=uv,ebe=Su,tbe=function(e){J1e(t,e);function t(r){var n=e.call(this,"synthetic")||this;return n.data=r||new ebe.FeatureCollection({}),n}return t.prototype.get=function(r){return this.data.features.find(function(n){return n.properties.id===r})},t}(Q1e.default);kN.default=tbe;var DN={},NN={},CS={};Object.defineProperty(CS,"__esModule",{value:!0});CS.Wayfinding=void 0;var Or=rbe(x_);function QY(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(QY=function(i){return i?r:t})(e)}function rbe(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Fg(e)!="object"&&typeof e!="function")return{default:e};var r=QY(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function Fg(e){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fg(e)}function ys(e){return abe(e)||obe(e)||ibe(e)||nbe()}function nbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ibe(e,t){if(e){if(typeof e=="string")return XM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XM(e,t)}}function obe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function abe(e){if(Array.isArray(e))return XM(e)}function XM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eH(n.key),n)}}function ube(e,t,r){return t&&wB(e.prototype,t),r&&wB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rs(e,t,r){return t=eH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eH(e){var t=lbe(e,"string");return Fg(t)==="symbol"?t:String(t)}function lbe(e,t){if(Fg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}CS.Wayfinding=function(){function e(t){var r=this;sbe(this,e),rs(this,"configuration",{avoidElevators:!1,avoidEscalators:!1,avoidStaircases:!1,avoidRamps:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1,avoidHills:!1}),rs(this,"POI_TYPE",{ELEVATOR:"elevator",ESCALATOR:"escalator",STAIRCASE:"staircase",RAMP:"ramp",HILL:"hill",NARROW_PATH:"narrow_path",REVOLVING_DOOR:"door",TICKET_GATE:"ticket_gate",BARRIER:"barrier"}),rs(this,"ACCESSIBILITY_POI_TYPE",["door","ticket_gate"]),rs(this,"LEVEL_CHANGER_TYPE",["elevator","escalator","staircase","ramp","hill"]),rs(this,"PATH_TYPE","path"),rs(this,"LINE_STRING_TYPE","LineString"),rs(this,"DIRECTION_UP","up"),rs(this,"DIRECTION_DOWN","down"),rs(this,"ROUTABLE_TYPE",["MultiPolygon","Polygon"]),rs(this,"UNIT_TYPE","meters"),rs(this,"pathFixDistance",1),rs(this,"wallOffsetDistance",.5),rs(this,"walkingSpeed",1.4),rs(this,"floorHeight",4.5),rs(this,"elevatorSpeed",.9),rs(this,"elevatorWaiting",55),rs(this,"escalatorSpeed",.24),rs(this,"staircasesSpeed",.3);var n=t.features,i=this.extractMinMaxLevel(n),o=i.minLevel,s=i.maxLevel;if(o===void 0)throw"No feature with level was supplied!";for(var a=n.filter(function(b){return b.properties.routable&&r.ROUTABLE_TYPE.includes(b.geometry.type)}),d=new Map,f=function(P){var L=a.filter(function(R){return R.properties.level===P});d.set(P,Or.featureCollection(L!==void 0?L:[]))},g=o;g<=s;g++)f(g);this.floorList=d,this.corridors=n.filter(function(b){return b.properties.class===r.PATH_TYPE&&b.geometry.type===r.LINE_STRING_TYPE});var _=n.filter(function(b){return r.LEVEL_CHANGER_TYPE.includes(b.properties.type)});_.forEach(function(b){b.id===void 0&&(b.id=b.properties.id)}),_.forEach(function(b){if(b.properties.levels===void 0&&(b.properties.levels=[],b.properties.level_min!==void 0&&b.properties.level_max!==void 0))for(var P=b.properties.level_min;P<=b.properties.level_max;P++)b.properties.levels.push(P)}),this.levelChangerList=_,this.accessibilityPoi=n.filter(function(b){return r.ACCESSIBILITY_POI_TYPE.includes(b.properties.type)}),this.rebuildData()}return ube(e,[{key:"setConfiguration",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Object.keys(r).forEach(function(o){n.configuration.hasOwnProperty(o)&&(n.configuration[o]=r[o])}),this.pathFixDistance=i}},{key:"extractMinMaxLevel",value:function(r){var n=void 0,i=void 0;return r.forEach(function(o){var s=o.properties.level;(n===void 0||s<n)&&(n=s),(i===void 0||i<s)&&(i=s),o.properties.levels!==void 0&&o.properties.levels.forEach(function(a){(n===void 0||a<n)&&(n=a),(i===void 0||i<a)&&(i=a)})}),{minLevel:n,maxLevel:i}}},{key:"rebuildData",value:function(){var r=this,n=new Map;this.floorList.forEach(function(N,B){var H=[],Z=[],Y=[];N.features.forEach(function(W){var Q=Or.flatten(Or.polygonToLine(W)).features.map(function(me){return me.geometry});Q.forEach(function(me){for(var ge,be,oe=0;oe<me.coordinates.length-1;oe++){var Ie=void 0;oe===0?(ge=Or.point(me.coordinates[oe]),ge.properties.level=B,ge.properties.neighbours=[],ge.properties.walkableAreaId=W.id,Ie=ge):Ie=be,oe===me.coordinates.length-2?be=ge:(be=Or.point(me.coordinates[oe+1]),be.properties.level=B,be.properties.neighbours=[],be.properties.walkableAreaId=W.id),Ie.properties.neighbours.push(be),be.properties.neighbours.push(Ie),H.push(Ie),Z.push([Ie,be])}}),Y=Y.concat(Or.flatten(W).features)}),n.set(B,{areas:Y,points:H,walls:Z,wallFeatures:Z.map(function(W){return Or.lineString([W[0].geometry.coordinates,W[1].geometry.coordinates])})})}),this.bearingCache=new Map,this.floorData=n,this.floorData.forEach(function(N,B){var H=r.accessibilityPoi.filter(function(Z){return B===Z.properties.level}).filter(function(Z){return N.areas.filter(function(Y){return Or.booleanContains(Y,Z)}).length>0});H.forEach(function(Z){var Y=[Or.destination(Z.geometry.coordinates,Z.properties.radius+r.wallOffsetDistance,0,{units:r.UNIT_TYPE}),Or.destination(Z.geometry.coordinates,Z.properties.radius+r.wallOffsetDistance,60,{units:r.UNIT_TYPE}),Or.destination(Z.geometry.coordinates,Z.properties.radius+r.wallOffsetDistance,120,{units:r.UNIT_TYPE}),Or.destination(Z.geometry.coordinates,Z.properties.radius+r.wallOffsetDistance,180,{units:r.UNIT_TYPE}),Or.destination(Z.geometry.coordinates,Z.properties.radius+r.wallOffsetDistance,-120,{units:r.UNIT_TYPE}),Or.destination(Z.geometry.coordinates,Z.properties.radius+r.wallOffsetDistance,-60,{units:r.UNIT_TYPE})].filter(function(W){return N.areas.filter(function(Q){return Or.booleanContains(Q,W)}).length>0});Y.forEach(function(W){W.properties.level=B,W.properties.isDetourPoint=!0}),N.points=N.points.concat(Y),r.detourPointList=Y})});var i=[],o=[];this.corridors.forEach(function(N,B){for(var H=N.geometry.coordinates,Z=null,Y=0;Y<H.length-1;Y++){var W=void 0;Z!=null?W=Z:(W=Or.point(H[Y]),W.properties.neighbours=[],W.properties.level=N.properties.level);var Q=Or.point(H[Y+1]);Q.properties.level=N.properties.level,Q.properties.neighbours=[];var me=r._checkTimeBased(N)&&r._checkAvailablePath(N),ge=N.properties.bidirectional===void 0||N.properties.bidirectional===!0,be=N.properties.swapDirection!==void 0&&N.properties.swapDirection===!0;me&&((ge||!be)&&W.properties.neighbours.push(Q),(ge||be)&&Q.properties.neighbours.push(W));var oe=Or.lineString([W.geometry.coordinates,Q.geometry.coordinates]);oe.properties.level=N.properties.level,oe.properties.isAvailableNow=me,oe.properties.bidirectional=ge,oe.properties.swapDirection=be;var Ie=N.properties.narrowPath===!0;Ie===!0&&(W.properties.narrowPath=!0,Q.properties.narrowPath=!0,oe.properties.narrowPath=!0);var fe=N.properties.ramp===!0;fe===!0&&(W.properties.ramp=!0,Q.properties.ramp=!0,oe.properties.ramp=!0);var G=N.properties.ramp===!0;G===!0&&(W.properties.hill=!0,Q.properties.hill=!0,oe.properties.hill=!0),i.push([W,Q]),o.push(oe),Z=Q}});var s=[],a=new Map,d=0;for(d=0;d<i.length;){var f=i[d],g=o[d];a.has(d)||a.set(d,[]);for(var _=d+1;_<i.length;_++){a.has(_)||a.set(_,[]);var b=i[_];if(g.properties.level===o[_].properties.level&&!(b.includes(f[0])||b.includes(f[1]))){var P=o[_],L=Or.lineIntersect(g,P).features;if(L.length>0){var R=L[0];R.properties.level=f[0].properties.level,R.properties.isCorridorPoint=!0,(g.properties.narrowPath||P.properties.narrowPath)&&(R.properties.narrowPath=!0),(g.properties.ramp||P.properties.ramp)&&(R.properties.ramp=!0),(g.properties.hill||P.properties.hill)&&(R.properties.hill=!0),a.get(d).push(R),a.get(_).push(R),s.push(R)}}}d++}d=0;for(var $=function(){var B=i[d],H=o[d],Z=B[0],Y=B[1],W=a.get(d);W.sort(function(Q,me){return r._comparePointsByDistanceFromReference(Z,Q,me)}),W?(W.forEach(function(Q){r._setNeighbourhoodBasedOnCorridorDirectionality(H,Z,Y,Q);var me=H.properties.isAvailableNow,ge=H.properties.bidirectional===void 0||H.properties.bidirectional===!0,be=H.properties.swapDirection!==void 0&&H.properties.swapDirection===!0;if(me)if(ge)Q.properties.neighbours=Q.properties.neighbours.concat(W.filter(function(K){return K!==Q}));else if(be){var fe,G=W.slice(0,W.indexOf(Q));(fe=Q.properties.neighbours).push.apply(fe,ys(G))}else{var oe,Ie=W.slice(W.indexOf(Q));(oe=Q.properties.neighbours).push.apply(oe,ys(Ie))}}),o[d].properties.intersectionPointList=W):o[d].properties.intersectionPointList=[],d++};d<i.length;)$();var F=[];d=0;for(var T=function(){var B,H,Z=i[d],Y=o[d],W=[],Q=(B=r.floorData.get(Z[0].properties.level))===null||B===void 0?void 0:B.walls,me=(H=r.floorData.get(Z[0].properties.level))===null||H===void 0?void 0:H.wallFeatures;if((me==null?void 0:me.length)>0&&me.forEach(function(oe,Ie){var fe=Or.lineIntersect(Y,oe).features;if(fe.length>0){var G=fe[0];G.properties.level=Z[0].properties.level,G.properties.neighbours=[],G.properties.bordersArea=!0,G.properties.walkableAreaId=Q[0][0].properties.walkableAreaId,Y.properties.narrowPath&&(G.properties.narrowPath=!0),Y.properties.ramp&&(G.properties.ramp=!0),Y.properties.hill&&(G.properties.hill=!0);var K=r._distance(Z[0],G);W.push({point:G,distance:K,wallIndex:Ie})}}),W.length>0){W.sort(function(oe,Ie){return oe.distance-Ie.distance});var ge=Z[0];W.forEach(function(oe,Ie){var fe;ge.properties.neighbours.push(oe.point),Q[oe.wallIndex][0].properties.neighbours.push(oe.point),Q[oe.wallIndex][1].properties.neighbours.push(oe.point),oe.point.properties.neighbours.push(ge,Q[oe.wallIndex][0],Q[oe.wallIndex][1]),(fe=oe.point.properties.neighbours).push.apply(fe,ys(o[d].properties.intersectionPointList)),o[d].properties.intersectionPointList.forEach(function(G){return G.properties.neighbours.push(oe.point)}),ge=oe.point,o[d].properties.intersectionPointList.push(oe.point)});var be=Or.lineString([ge.geometry.coordinates,Z[1].geometry.coordinates]);be.properties.level=ge.properties.level,Z[1].properties.neighbours.push(ge),ge.properties.neighbours.push(Z[1]),F.push.apply(F,ys(W.map(function(oe){return oe.point})))}d++};d<i.length;)T();F.forEach(function(N){r.floorData.get(N.properties.level).points.push(N)}),F.forEach(function(N){var B,H=r._findNeighbours(N,null,null,r.floorData.get(N.properties.level).points);(B=N.properties.neighbours).push.apply(B,ys(H))}),this.corridorLinePointPairs=i,this.corridorLineFeatures=o,this.corridorLinePoints=[],this.corridorLinePointPairs.forEach(function(N){N[0].properties.isCorridorPoint=!0,N[1].properties.isCorridorPoint=!0,r.corridorLinePoints.includes(N[0])||r.corridorLinePoints.push(N[0]),r.corridorLinePoints.includes(N[1])||r.corridorLinePoints.push(N[1])}),this.corridorLinePoints=this.corridorLinePoints.concat(s);var x=new Map;this.levelChangerList.forEach(function(N){if(N.properties.group!==void 0){var B=N.properties.group;x.has(B)||x.set(B,[]);var H=x.get(B);H.push(N)}else x.set(N.id,[N]);N.properties.fixedPointMap=new Map,N.properties.levels.forEach(function(Z){var Y=r._copyPoint(N);Y.properties.level=Z;var W=r._getFixPointInArea(Y);W.id=N.id,W.properties.amenity=N.properties.amenity,W.properties.direction=N.properties.direction,W.properties.id=N.properties.id,W.properties.level=Z,W.properties.type=N.properties.type,W.properties.neighbours===void 0&&(W.properties.neighbours=[]),!(r._distance(Y,W)>5)&&(N.properties.fixedPointMap.set(Z,W),W.properties.onCorridor&&W.properties.neighboursLeadingTo!==void 0&&(W.properties.neighboursLeadingTo.forEach(function(Q){Q.properties.neighbours===void 0&&(Q.properties.neighbours=[]),Q.properties.neighbours.push(W)}),r.corridorLineFeatures[W.properties.corridorIndex].properties.intersectionPointList.push(W)))})}),x.forEach(function(N,B){var H=N.map(function(Y){return Y.properties.direction}).find(function(Y){return Y!==void 0}),Z=[];N.forEach(function(Y){Z.push.apply(Z,ys(Y.properties.fixedPointMap.values()))}),Z.forEach(function(Y){if(Y.properties.neighbours==null&&(Y.properties.neighbours=[]),H===r.DIRECTION_UP){var W;(W=Y.properties.neighbours).push.apply(W,ys(Z.filter(function(ge){return ge.properties.level>Y.properties.level})))}else if(H===r.DIRECTION_DOWN){var Q;(Q=Y.properties.neighbours).push.apply(Q,ys(Z.filter(function(ge){return ge.properties.level<Y.properties.level})))}else{var me;(me=Y.properties.neighbours).push.apply(me,ys(Z.filter(function(ge){return ge.properties.level!==Y.properties.level})))}})})}},{key:"_removeItemFromList",value:function(r,n){var i=r.indexOf(n);i>=0&&r.splice(i,1)}},{key:"load",value:function(r,n){var i=this;this.neighbourMap=r,this.rebuildData(),this.wallOffsets=n,this.wallOffsetLineList=[],this._getPointList().forEach(function(o,s){var a=i.wallOffsets[s];if(a){var d=Or.lineString([o.geometry.coordinates,a.geometry.coordinates]);d.properties.level=o.properties.level,i.wallOffsetLineList.push(d)}})}},{key:"_isPointOnLevel",value:function(r,n){return r.properties.fixedPointMap!==void 0?r.properties.fixedPointMap.has(n):r.properties.level===n}},{key:"_getPointList",value:function(){var r=[];return this.floorData.forEach(function(n,i){r=r.concat(n.points)}),this.levelChangerList.forEach(function(n){var i;return(i=r).push.apply(i,ys(n.properties.fixedPointMap.values()))}),r=r.concat(),r=r.concat(this.corridorLinePoints),r}},{key:"preprocess",value:function(){return{neighbourhood:this._generateNeighbourhoodMap(),wallOffsets:this._generateWallOffsets()}}},{key:"_generateNeighbourhoodMap",value:function(){var r=this,n=this._getPointList(),i={};return this.floorData.forEach(function(o,s){var a={},d=o.points.concat(r.levelChangerList.filter(function(f){return r._isPointOnLevel(f,s)}).map(function(f){return f.properties.fixedPointMap.get(s)}));d.forEach(function(f){var g=n.indexOf(f),_=r._unwrapLevelChangerPoint(f,s),b=_===f?null:_,P=r._findNeighbours(_,b,null,d);a[g]=P.map(function(L){return n.indexOf(L)})}),i[s]=a}),this.corridorLinePoints.forEach(function(o){var s=n.indexOf(o),a=o.properties.level,d,f=i[a];if(o.properties.bordersArea){var g=r.floorData.get(a).points.concat(r.levelChangerList.filter(function(_){return r._isPointOnLevel(_,a)})).concat(r.corridorLinePoints.filter(function(_){return _.properties.bordersArea&&r._isPointOnLevel(_,a)}));d=r._findNeighbours(o,o,null,g),d.forEach(function(_){var b=n.indexOf(_);f&&(f[b]===void 0&&(f[b]=[]),f[b].includes(s)||f[b].push(s))})}else d=o.properties.neighbours;f[s]===void 0?f[s]=d.map(function(_){return n.indexOf(_)}):d.forEach(function(_){return f[s].push(n.indexOf(_))})}),this.neighbourMap=i,i}},{key:"_generateWallOffsets",value:function(){var r=this;this.wallOffsetLineList=[],this.wallOffsets={};var n=this._getPointList();return n.forEach(function(i){var o;if(i.properties.level!=null){var s=(o=r.floorData.get(i.properties.level))===null||o===void 0?void 0:o.walls.filter(function(H){return H.includes(i)});if(!(!s||s.length===0)){var a=s[0][0]===i?s[0][1]:s[0][0],d=s[1][0]===i?s[1][1]:s[1][0],f=Or.bearing(i,a),g=Or.bearing(i,d),_=r._averageBearing(f,g),b=_>0?_-180:_+180,P=Or.destination(i.geometry.coordinates,.01,_,{units:r.UNIT_TYPE}),L=Or.destination(i.geometry.coordinates,.01,b,{units:r.UNIT_TYPE}),R=null;for(var $ in r.floorData.get(i.properties.level).areas){var F=r.floorData.get(i.properties.level).areas[$];if(Or.booleanContains(F,P)){R=P;break}else if(Or.booleanContains(F,L)){R=L;break}}if(R!=null){var T=Or.destination(i.geometry.coordinates,r.wallOffsetDistance*2,R===P?_:b,{units:r.UNIT_TYPE}),x=Or.lineString([i.geometry.coordinates,T.geometry.coordinates]);r.floorData.get(i.properties.level).walls.forEach(function(H,Z){if(!s.includes(H)){var Y=r.floorData.get(i.properties.level).wallFeatures[Z],W=Or.lineIntersect(x,Y);W.features.length>0&&(T=Or.point(W.features[0].geometry.coordinates),x=Or.lineString([i.geometry.coordinates,T.geometry.coordinates]))}});var N=Or.midpoint(i.geometry.coordinates,T.geometry.coordinates);N.properties.level=i.properties.level,r.wallOffsets[n.indexOf(i)]=N;var B=Or.lineString([i.geometry.coordinates,N.geometry.coordinates]);B.properties.level=i.properties.level,r.wallOffsetLineList.push(B)}}}}),this.wallOffsets}},{key:"reconstructPath",value:function(r){var n=this,i=[],o=r;do{var s=this._calculateWallOffsetPointList(r,i.length>0?i[i.length-1]:o);if(s.forEach(function(x){if(o===r||o.geometry.coordinates[0]!==x.geometry.coordinates[0]||o.geometry.coordinates[1]!==x.geometry.coordinates[1]){var N=n._copyPoint(x);N.properties.level=r.properties.level,N.properties.walkableAreaId=r.properties.walkableAreaId,N.properties.bordersArea=r.properties.bordersArea,i.push(N),o=x}}),r=r.properties.cameFrom,i.length>1e4)throw new Error("Too big route")}while(r!=null);i.reverse();for(var a=[],d=0;d<i.length-1;d++){var f=i[d],g=i[d+1];if(f.properties.level===g.properties.level){var _=this._distance(f,g);_<.7&&a.push(f)}}i=i.filter(function(x){return!a.includes(x)}),a=[];for(var b=1;b<i.length-1;b++){var P=i[b-1],L=i[b],R=i[b+1];if(!(P.properties.level!==L.properties.level||P.properties.level!==R.properties.level)){var $=this.bearing(P.geometry.coordinates,L.geometry.coordinates),F=this.bearing(L.geometry.coordinates,R.geometry.coordinates),T=Math.abs($-F);T>Math.PI&&(T-=Math.PI),T<.03488888&&a.push(L)}}return i=i.filter(function(x){return!a.includes(x)}),i}},{key:"_calculateWallOffsetPointList",value:function(r,n){var i=this,o=this._getPointList(),s=o.indexOf(r),a=o.indexOf(n),d=[],f=r;s>=0&&this.wallOffsets[s]&&(f=this.wallOffsets[s]),d.push(f);var g,_=function(){var P=Or.lineString([n.geometry.coordinates,f.geometry.coordinates]);g=[],i.wallOffsetLineList.forEach(function(L,R){if(L.properties.level===r.properties.level&&!(R===a||R===s)){var $=Or.lineIntersect(P,L);if($.features.length>0){var F=i.wallOffsets[R];F.properties.distance=i._distance($.features[0],f),F.properties.offsetIndex=R,g.push(F)}}}),g.length>0&&(g.sort(function(L,R){return L.properties.distance-R.properties.distance}),f=g[0],s=f.properties.offsetIndex,d.push(f))};do _();while(g.length>0);return d.reverse()}},{key:"_getIntersectingOffsetPoints",value:function(r,n){var i=this;if(r===n||r.properties.level!==n.properties.level)return[];var o=Or.lineString([r.geometry.coordinates,n.geometry.coordinates]),s=[];return this.wallOffsetLineList.forEach(function(a,d){if(a.properties.level===r.properties.level&&Or.lineIntersect(o,a).features.length>0){var f=i.wallOffsets[d];f.properties.distance=Or.pointToLineDistance(r.geometry.coordinates,a,{units:i.UNIT_TYPE}),s.push(f)}}),s.sort(function(a,d){return d.properties.distance-d.properties.distance}),s}},{key:"clearData",value:function(){this.floorData.forEach(function(r,n){for(var i in r.points){var o=r.points[i];delete o.properties.cameFrom,delete o.properties.gscore,delete o.properties.fscore}}),this.levelChangerList.forEach(function(r){r.properties.fixedPointMap.forEach(function(n,i){delete n.properties.cameFrom,delete n.properties.gscore,delete n.properties.fscore})}),this.corridorLinePoints.forEach(function(r){delete r.properties.cameFrom,delete r.properties.gscore,delete r.properties.fscore})}},{key:"runAStar",value:function(r,n){var i=this.calculatePath(r,n);if(i!==void 0&&i.length==2){var o=this._checkShortPath(i[0],i[1]);if(!o)return}return i}},{key:"runAStarWithDetails",value:function(r,n){var i=this.runAStar(r,n),o=this.calculateDistance(i),s=this.calculateTime(i,o);return{path:i,distance:o,duration:s}}},{key:"isPathElevator",value:function(r,n){return r[n].properties.type==this.POI_TYPE.ELEVATOR&&r[n+1].properties.type==this.POI_TYPE.ELEVATOR}},{key:"isPathEscalator",value:function(r,n){return r[n].properties.type==this.POI_TYPE.ESCALATOR&&r[n+1].properties.type==this.POI_TYPE.ESCALATOR}},{key:"isPathStaircase",value:function(r,n){return r[n].properties.type==this.POI_TYPE.STAIRCASE&&r[n+1].properties.type==this.POI_TYPE.STAIRCASE}},{key:"isPathFlat",value:function(r,n){return!this.isPathElevator(r,n)&&!this.isPathEscalator(r,n)&&!this.isPathStaircase(r,n)}},{key:"calculateDistance",value:function(r){var n=this,i=0;return r===void 0||r.length===0||r.forEach(function(o,s){r[s+1]!==void 0&&(i+=Or.distance(r[s],r[s+1],{units:n.UNIT_TYPE}))}),i}},{key:"calculateTime",value:function(r,n){var i=this,o=n/this.walkingSpeed,s=0,a=0,d=0;r===void 0&&(r=[]),r.forEach(function(g,_){if(i.isPathElevator(r,_)){var b=Math.abs(r[_].properties.level-r[_+1].properties.level);s+=b*i.floorHeight/i.elevatorSpeed+i.elevatorWaiting}if(i.isPathEscalator(r,_)){var P=Math.abs(r[_].properties.level-r[_+1].properties.level),L=i.floorHeight*i.floorHeight;a+=P*Math.sqrt(L+L)/i.escalatorSpeed}if(i.isPathStaircase(r,_)){var R=Math.abs(r[_].properties.level-r[_+1].properties.level),$=i.floorHeight*i.floorHeight;d+=R*Math.sqrt($+$)/i.staircasesSpeed}});var f=o+s+a+d;return{shortest:o,elevator:s,escalator:a,staircase:d,realistic:f}}},{key:"calculatePath",value:function(r,n){var i=this;this.clearData(),this.nbLines=[],this.bearingCache=new Map;var o=this._getFixPointInArea(r,!0),s=this._getFixEndPoint(n,r.properties.level),a=[o],d=[];o.properties.gscore=0,o.properties.fscore=this._heuristic(o,s);for(var f=function(){var b=i._getMinFScore(a,d);if(b===null)return 0;if(b===s){var P=void 0;try{P=i.reconstructPath(b)}catch{return{v:void 0}}return s!==n&&(!s.properties.onCorridor||i._distance(s,n)>i.pathFixDistance)&&(n.properties.fixed=!0,P.push(n)),o!==r&&(!o.properties.onCorridor||i._distance(o,r)>i.pathFixDistance)&&(r.properties.fixed=!0,P.unshift(r)),P[P.length-1].properties.gscore=b.properties.gscore,{v:P}}d.push(a.splice(a.indexOf(b),1));var L=i._getNeighbours(b,o,s);L.forEach(function(R){return i.nbLines.push(Or.lineString([b.geometry.coordinates,R.geometry.coordinates]))}),L.forEach(function(R){if(d.indexOf(R)<=-1){var $=b.properties.gscore+i._distance(b,R),F=R.properties.gscore!=null?R.properties.gscore:1/0;$<F&&(R.properties.cameFrom=b,R.properties.gscore=$+.2,R.properties.fscore=$+i._heuristic(R,s),a.indexOf(R)<0&&a.push(R))}})},g;a.length>0&&(g=f(),g!==0);)if(g)return g.v}},{key:"_checkIfCrossingTwoPolygon",value:function(r,n){var i=r.properties||{},o=n.properties||{};return o.walkableAreaId!==void 0&&i.walkableAreaId!==void 0&&(o.walkableAreaId!==i.walkableAreaId||o.bordersArea===void 0)?!0:i.walkableAreaId!==void 0&&o.walkableAreaId===void 0?o.isCorridorPoint!==!0:!1}},{key:"_getNeighbours",value:function(r,n,i){var o=this,s=[];if(r===n){var a=this._getPointList().filter(function(R){return o._isPointOnLevel(R,r.properties.level)});s=this._findNeighbours(r,n,i,a),s=s.filter(function(R){var $=r.properties.level,F=o.configuration.avoidRevolvingDoors&&o._testAccessibilityPoiNeighbourhood(r,R,$,o.POI_TYPE.REVOLVING_DOOR),T=o.configuration.avoidTicketGates&&o._testAccessibilityPoiNeighbourhood(r,R,$,o.POI_TYPE.TICKET_GATE),x=o._checkIfCrossingTwoPolygon(r,R);return!F&&!T&&!x})}else{var d=this._getPointList(),f=d.indexOf(r);if(f>=0&&this.floorData.forEach(function(R,$){var F=o.neighbourMap[$];F.hasOwnProperty(f)&&F[f].forEach(function(T){var x=d[T],N=o.configuration.avoidRevolvingDoors&&o._testAccessibilityPoiNeighbourhood(r,x,$,o.POI_TYPE.REVOLVING_DOOR),B=o.configuration.avoidTicketGates&&o._testAccessibilityPoiNeighbourhood(r,x,$,o.POI_TYPE.TICKET_GATE),H=o._checkIfCrossingTwoPolygon(r,x);!s.includes(x)&&!N&&!B&&!H&&s.push(x)})}),r.properties.level!==void 0&&r.properties.level===i.properties.level||r.properties.fixedPointMap!=null&&r.properties.fixedPointMap.has(i.properties.level)){var g=this.configuration.avoidRevolvingDoors&&this._testAccessibilityPoiNeighbourhood(r,i,i.properties.level,this.POI_TYPE.REVOLVING_DOOR),_=this.configuration.avoidTicketGates&&this._testAccessibilityPoiNeighbourhood(r,i,i.properties.level,this.POI_TYPE.TICKET_GATE),b=this._checkIfCrossingTwoPolygon(r,i);if(!g&&!_&&!b)if(i.properties.onCorridor)(i.properties.neighbours.includes(r)||i.properties.neighboursLeadingTo!==void 0&&i.properties.neighboursLeadingTo.includes(r))&&s.push(i);else{var P=this._unwrapLevelChangerPoint(r,i.properties.level),L=1;(P.properties.isCorridorPoint||P.properties.onCorridor)&&L--,this._countIntersections(P,i,L)&&s.push(i)}}}return s.filter(function(R){return o.configuration.avoidElevators&&R.properties.type===o.POI_TYPE.ELEVATOR||o.configuration.avoidEscalators&&R.properties.type===o.POI_TYPE.ESCALATOR||o.configuration.avoidStaircases&&R.properties.type===o.POI_TYPE.STAIRCASE||o.configuration.avoidNarrowPaths&&R.properties.narrowPath||o.configuration.avoidRamps&&R.properties.ramp?!1:!(o.configuration.avoidHills&&R.properties.hill)})}},{key:"_testAccessibilityPoiNeighbourhood",value:function(r,n,i,o){var s=this,a=!1;if(o===this.POI_TYPE.REVOLVING_DOOR&&this.configuration.avoidRevolvingDoors){var d=Or.lineString([r.geometry.coordinates,n.geometry.coordinates]),f=this.accessibilityPoi.filter(function(g){return g.properties.level===i&&g.properties.type===o});f.forEach(function(g){var _=Or.pointToLineDistance(g.geometry.coordinates,d,{units:s.UNIT_TYPE});_<=g.properties.radius&&(a=!0)})}return a}},{key:"_findNeighbours",value:function(r,n,i,o){var s=[];if(r.properties.neighbours!=null&&(s=ys(r.properties.neighbours)),r===n&&r.properties.onCorridor||r.properties.isCorridorPoint&&!r.properties.bordersArea)return i&&i.properties.onCorridor&&n.properties.corridorIndex===i.properties.corridorIndex&&s.push(i),s;var a=0;i&&this._isPointOnLevel(i,r.properties.level)&&o.push(i);var d=this._unwrapLevelChangerPoint(r,r.properties.level);for(var f in o){var g=o[f];if(r!==g&&!(s.indexOf(g)>=0)){var _=this._unwrapLevelChangerPoint(g,r.properties.level);a=2,r===n&&a--,g===n&&a--,r!==d&&a--,g!==_&&a--,(g.properties.isCorridorPoint||g.properties.onCorridor)&&a--;var b=this._countIntersections(r,_,a);if(b){var P=Or.midpoint(r.geometry.coordinates,g.geometry.coordinates);for(var L in this.floorData.get(r.properties.level).areas){var R=this.floorData.get(r.properties.level).areas[L];if(Or.booleanContains(R,P)){s.push(g);break}}}}}return s}},{key:"_comparePointLevels",value:function(r,n){if(r.properties.levels==null&&n.properties.levels==null)return r.properties.level===n.properties.level;var i=r.properties.fixedPointMap!==void 0?ys(r.properties.fixedPointMap.keys()):[r.properties.level],o=n.properties.fixedPointMap!==void 0?ys(n.properties.fixedPointMap.keys()):[n.properties.level];return i.filter(function(s){return o.includes(s)}).length>0}},{key:"_unwrapLevelChangerPoint",value:function(r,n){var i=r.properties.fixedPointMap;if(i){var o=i.get(n);return o||r}else return r}},{key:"_countIntersections",value:function(r,n,i){var o=r.geometry.coordinates,s=n.geometry.coordinates,a=this.bearing(o,s),d=0,f=[],g=this.floorData.get(r.properties.level).walls,_=this.floorData.get(r.properties.level).wallFeatures;for(var b in g){var P=g[b],L=!1,R=!1;if(r==P[0]||r==P[1])L=!0,R=!0;else{var $=this.bearing(o,P[0].geometry.coordinates),F=this.bearing(o,P[1].geometry.coordinates);if($>F){var T=$;$=F,F=T}var x=F-$;x<Math.PI?$<=a&&a<=F&&(L=!0):($>=a||a>=F)&&(L=!0)}if(L){if(R)this._testIdenticalPointInList(r,f)||(f.push(r),d++);else{var N=Or.lineIntersect(Or.lineString([o,s]),_[b]).features;N.length>0&&(this._testIdenticalPointInList(N[0],f)||(f.push(N[0]),d++))}if(d>i)return!1}}return!0}},{key:"_averageBearing",value:function(r,n){if(r>n){var i=r;r=n,n=i}n-r>180&&(n-=360);var o=(n+r)/2;return o<=-180?360+o:o}},{key:"toRadians",value:function(r){return r*Math.PI/180}},{key:"bearing",value:function(r,n){var i=this.bearingCache.get(r);if(i){var o=i.get(n);if(o!=null)return o}var s=this.toRadians(r[0]),a=this.toRadians(r[1]),d=this.toRadians(n[0]),f=this.toRadians(n[1]),g=Math.cos(f),_=Math.sin(d-s)*g,b=Math.cos(a)*Math.sin(f)-Math.sin(a)*g*Math.cos(d-s),P=Math.atan2(_,b);return this._storeBearingCache(r,n,P),P}},{key:"_storeBearingCache",value:function(r,n,i){var o=this.bearingCache.get(r);o||(o=new Map,this.bearingCache.set(r,o)),o.set(n,i),o=this.bearingCache.get(n),o||(o=new Map,this.bearingCache.set(n,o)),i<=0?i+=Math.PI:i-=Math.PI,o.set(r,i)}},{key:"_testIdenticalPointInList",value:function(r,n){return n.find(function(i){return i.geometry.coordinates[0]===r.geometry.coordinates[0]&&i.geometry.coordinates[1]===r.geometry.coordinates[1]})!==void 0}},{key:"_getMinFScore",value:function(r,n){var i=null,o=1/0;return(n.slice(-1).properties||{}).walkableAreaId,(n.slice(-2).properties||{}).walkableAreaId,r.forEach(function(s){var a=s.properties;a.fscore<o&&(i=s,o=a.fscore)}),i}},{key:"_heuristic",value:function(r,n){var i=this;if(this._comparePointLevels(r,n)){var o=0;return(r.properties.levels!==void 0||n.properties.levels!==void 0)&&(o=20),this._distance(r,n)+o}else{var s=this.levelChangerList.filter(function(d){return d!==r&&d!==n&&i._comparePointLevels(d,r)&&i._comparePointLevels(d,n)}),a=1/0;return s.forEach(function(d){var f=i._distance(r,d)+i._distance(d,n)+10;f<a&&(a=f)}),a<1/0?a:2e3}}},{key:"_distance",value:function(r,n){var i=0;return n.properties.level!==r.properties.level&&(i=10),Or.distance(r,n,{units:this.UNIT_TYPE})+i}},{key:"_getFixEndPoint",value:function(r,n){var i=this.levelChangerList.find(function(s){return s.id===r.id});if(i!==void 0&&i.properties.fixedPointMap!==void 0){var o=void 0;i.properties.fixedPointMap.forEach(function(s,a){(o===void 0||Math.abs(o-n)>Math.abs(a-n))&&(o=a)}),r=this._copyPoint(r),r.properties.level=o}return this._getFixPointInArea(r)}},{key:"_getFixPointInArea",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.floorData.get(r.properties.level),s=void 0;if((o==null?void 0:o.areas.length)>0&&o.areas.forEach(function(oe){if(Or.booleanContains(oe,r)){s=r;return}}),s!==void 0)return s;var a=null,d=1/0;(o==null?void 0:o.wallFeatures.length)>0&&o.wallFeatures.forEach(function(oe){var Ie=Or.pointToLineDistance(r.geometry.coordinates,oe,{units:n.UNIT_TYPE});Ie<=d&&(a=oe,d=Ie)});var f=this.corridorLineFeatures.filter(function(oe){return oe.properties.level===r.properties.level}),g=null,_=1/0;if(f.forEach(function(oe){var Ie=n.corridorLineFeatures.indexOf(oe),fe=Or.pointToLineDistance(r.geometry.coordinates,oe,{units:n.UNIT_TYPE});fe<_&&(g=Ie,_=fe)}),a===null&&g===null)return r;var b;if(g!==void 0&&_<d){var P=this.corridorLineFeatures[g];b=Or.nearestPointOnLine(P,r),b.properties.onCorridor=!0,b.properties.corridorIndex=g,b.properties.neighbours||(b.properties.neighbours=[]);var L=this.corridorLineFeatures[g].properties.isAvailableNow,R=this.corridorLineFeatures[g].properties.bidirectional===void 0||this.corridorLineFeatures[g].properties.bidirectional===!0,$=this.corridorLineFeatures[g].properties.swapDirection!==void 0&&this.corridorLineFeatures[g].properties.swapDirection===!0;if(L)if(R){var F;b.properties.neighbours.push(this.corridorLinePointPairs[g][0],this.corridorLinePointPairs[g][1]),(F=b.properties.neighbours).push.apply(F,ys(P.properties.intersectionPointList)),b.properties.neighboursLeadingTo=[this.corridorLinePointPairs[g][0],this.corridorLinePointPairs[g][1]].concat(ys(P.properties.intersectionPointList))}else if(!$&&!i){var T,x=this.corridorLinePointPairs[g][0];b.properties.neighbours.push(x);var N=this._distance(b,x),B=P.properties.intersectionPointList.filter(function(oe){return n._distance(oe,x)<N}),H=P.properties.intersectionPointList.filter(function(oe){return n._distance(oe,x)>=N});(T=b.properties.neighbours).push.apply(T,ys(H)),b.properties.neighboursLeadingTo=B}else{var Z,Y=this.corridorLinePointPairs[g][1];b.properties.neighbours.push(Y);var W=this._distance(b,Y),Q=P.properties.intersectionPointList.filter(function(oe){return n._distance(oe,Y)<=W}),me=P.properties.intersectionPointList.filter(function(oe){return n._distance(oe,Y)>W});(Z=b.properties.neighbours).push.apply(Z,ys(Q)),b.properties.neighboursLeadingTo=me}}else if(a!==null){var ge=Or.nearestPointOnLine(a,r),be=Or.bearing(r,ge);b=Or.destination(r.geometry.coordinates,d+.05,be,{units:this.UNIT_TYPE})}return b.properties.level=r.properties.level,b}},{key:"_copyPoint",value:function(r){var n=Or.point([r.geometry.coordinates[0],r.geometry.coordinates[1]]);return r.id!==void 0&&(n.id=r.id),r.properties.id!==void 0&&(n.properties.id=r.properties.id),r.properties.amenity!==void 0&&(n.properties.amenity=r.properties.amenity),r.properties.type!==void 0&&(n.properties.type=r.properties.type),n}},{key:"_setNeighbourhoodBasedOnCorridorDirectionality",value:function(r,n,i,o){o.properties.neighbours===void 0&&(o.properties.neighbours=[]);var s=r.properties.isAvailableNow,a=r.properties.bidirectional===void 0||r.properties.bidirectional===!0,d=r.properties.swapDirection!==void 0&&r.properties.swapDirection===!0;s&&(a?(o.properties.neighbours.push(n,i),n.properties.neighbours.push(o),i.properties.neighbours.push(o)):d?(i.properties.neighbours.push(o),o.properties.neighbours.push(n)):(n.properties.neighbours.push(o),o.properties.neighbours.push(i)))}},{key:"_comparePointsByDistanceFromReference",value:function(r,n,i){var o=Or.distance(r,n),s=Or.distance(r,i);return o>s?1:s>o?-1:0}},{key:"_checkShortPath",value:function(r,n){var i=this._getFixPointInArea(r,!0),o=this._getFixPointInArea(n,!0);if(i.properties.corridorIndex===o.properties.corridorIndex){var s=i.properties.corridorIndex,a=this.corridorLineFeatures[s],d=a.properties.isAvailableNow;if(!d)return!1;var f=a.properties.bidirectional===void 0||a.properties.bidirectional===!0;if(f)return!0;var g=a.geometry.coordinates,_=Or.bearing(g[0],g[1]),b=Or.bearing(r,n),P=parseInt(_-b),L=a.properties.swapDirection!==void 0&&a.properties.swapDirection;return L?P!==0:P===0}return!0}},{key:"_checkTimeBased",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,i=!0;if(r.properties.workingHours!==void 0){var o=n.getDay(),s=r.properties.workingHours[o],a=parseInt(n.getHours()),d=parseInt(n.getMinutes()),f=a*60+d;if(s.length===0)return!1;var g=s[0].split(":"),_=parseInt(g[0]),b=parseInt(g[1]),P=_*60+b,L=s[1].split(":"),R=parseInt(L[0]),$=parseInt(L[1]),F=R*60+$;if(P===0&&P===F)return!0;i=f>=P&&f<=F}return i}},{key:"_checkAvailablePath",value:function(r){var n=!0;return r.properties.available!==void 0&&(n=r.properties.available),n}}]),e}();Object.defineProperty(NN,"__esModule",{value:!0});var cbe=CS,Tm=Su,ex=Vt,fbe=function(){function e(){this.data=new Tm.FeatureCollection({})}return e.prototype.setData=function(t){this.data=t,this.wayfinding=new cbe.Wayfinding(this.data),this.wayfinding.preprocess()},e.prototype.toggleOnlyAccessible=function(t){t?this.wayfinding.setConfiguration({avoidElevators:!1,avoidRamps:!1,avoidEscalators:!0,avoidStaircases:!0,avoidNarrowPaths:!0,avoidRevolvingDoors:!0,avoidTicketGates:!0,avoidBarriers:!0,avoidHills:!0}):this.wayfinding.setConfiguration({avoidElevators:!0,avoidRamps:!0,avoidEscalators:!1,avoidStaircases:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1,avoidHills:!1})},e.prototype.setConfig=function(t){this.wayfinding.setConfiguration(t)},e.prototype.route=function(t,r){var n=this,i=null,o=null;if(this.routeWithDetails){var s=this.wayfinding.runAStarWithDetails(t,r);i=s.path,o={distance:s.distance,duration:s.duration}}else i=this.wayfinding.runAStar(t,r);if(!i)return null;i=i.map(function(B){return new Tm.default(B)});var a={},d=0;i.forEach(function(B,H){n.forceFloorLevel!==null&&n.forceFloorLevel!==void 0?(typeof a["path-part-".concat(d)]>"u"&&(a["path-part-".concat(d)]=[]),a["path-part-".concat(d)].push(B),B.isLevelChanger&&i[H+1].isLevelChanger&&B.level!==i[H+1].level&&d++):(typeof a["path-part-".concat(d)]>"u"&&(a["path-part-".concat(d)]=[]),a["path-part-".concat(d)].push(B),B.isLevelChanger&&B.properties.level!==i[H+1].properties.level&&d++)});for(var f={},g=0,_=Object.entries(a);g<_.length;g++){var b=_[g],P=b[0],L=b[1];this.forceFloorLevel!==null&&this.forceFloorLevel!==void 0?L.length>1?f[P]=new Tm.default((0,ex.lineString)(L.map(function(B){return B.geometry.coordinates}))):f[P]=new Tm.default((0,ex.point)(L[0].geometry.coordinates)):L.length>1?f[P]=new Tm.default((0,ex.lineString)(L.map(function(B){return B.geometry.coordinates}))):f[P]=new Tm.default((0,ex.point)(L[0].geometry.coordinates)),f[P].id=P,f[P].properties={level:L[L.length-1].properties.level,amenity:"chevron_right"}}for(var R={},$=0,F=Object.entries(f);$<F.length;$++){var T=F[$],P=T[0],x=T[1];typeof R[x.properties.level]>"u"?R[x.properties.level]={level:x.properties.level,paths:[x]}:R[x.properties.level].paths.push(x)}var N={};return i.forEach(function(B){typeof N[B.properties.level]>"u"&&(N[B.properties.level]=[]),N[B.properties.level].push(B)}),{paths:f,points:i,levelPaths:R,levelPoints:N,details:o}},e}();NN.default=fbe;var FN={};Object.defineProperty(FN,"__esModule",{value:!0});var KI=Su,gy=x_,is;(function(e){e.Start="START",e.Finish="FINISH",e.Exit="EXIT",e.Up="UP",e.Down="DOWN",e.Left="LEFT",e.Right="RIGHT",e.Straight="STRAIGHT",e.TurnAround="TURN_AROUND",e.HardLeft="HARD_LEFT",e.SlightLeft="SLIGHT_LEFT",e.HardRight="HARD_RIGHT",e.SlightRight="SLIGHT_RIGHT"})(is||(is={}));var c0;(function(e){e.staircase="STAIRS",e.escalator="ESCALATOR",e.elevator="ELEVATOR",e.ramp="RAMP"})(c0||(c0={}));var hbe=function(){function e(t){this.points=t,this.points&&this.points.length>0&&this.generateStepsFromPoints()}return e.prototype.generateStepsFromPoints=function(){var t=this;this.steps=this.points.map(function(r,n){var i=t.points[n-1]?new KI.default(t.points[n-1]):null,o=new KI.default(r),s=t.points[n+1]?new KI.default(t.points[n+1]):null,a={previousPoint:i,currentPoint:o,nextPoint:s};return{bearingFromLastStep:t.getBearingFromLastStep(a),coordinates:[r.geometry.coordinates[0],r.geometry.coordinates[1]],direction:t.getStepDirection(a),distanceFromLastStep:t.getDistanceFromLastStep(a),level:r.properties.level,levelChangerId:o.isLevelChanger?o.id:null,levelChangerType:o.isLevelChanger?o.properties.type:null,levelChangerDirection:o.isLevelChanger?t.getLevelChangerDirection(a):null,levelChangerDestinationLevel:o.isLevelChanger&&s.properties.level!==o.properties.level?s.properties.level:null,lineStringFeatureFromLastStep:t.getLineStringFeatureFromLastStep(a)}})},e.prototype.getBearingFromLastStep=function(t){var r=t.previousPoint,n=t.currentPoint;if(t.nextPoint,!r)return 0;var i=gy.bearing(r.geometry.coordinates,n.geometry.coordinates);return i},e.prototype.getStepDirection=function(t){var r=t.previousPoint,n=t.currentPoint,i=t.nextPoint;if(!r)return is.Start;if(!i)return is.Finish;if(n.isLevelChanger&&i.properties.level>n.properties.level)return"".concat(is.Up,"_").concat(c0[n.properties.type]);if(n.isLevelChanger&&i.properties.level<n.properties.level)return"".concat(is.Down,"_").concat(c0[n.properties.type]);if(r.isLevelChanger&&n.isLevelChanger)return"".concat(is.Exit,"_").concat(c0[n.properties.type]);var o=gy.bearing(n.geometry.coordinates,i.geometry.coordinates)-gy.bearing(r.geometry.coordinates,n.geometry.coordinates),s=this.degreeNormalized(o);return Math.abs(s)<22.5?is.Straight:Math.abs(s)>157.5?is.TurnAround:s<-112.5?is.HardLeft:s<=-67.5?is.Left:s<=-22.5?is.SlightLeft:s>157.5?is.HardLeft:s>=67.5?is.Right:s>=22.5?is.SlightRight:is.Straight},e.prototype.getDistanceFromLastStep=function(t){var r=t.previousPoint,n=t.currentPoint;if(t.nextPoint,!r||r.isLevelChanger&&n.isLevelChanger)return 0;var i=gy.distance(r.geometry.coordinates,n.geometry.coordinates);return i*1e3},e.prototype.getLevelChangerDirection=function(t){t.previousPoint;var r=t.currentPoint,n=t.nextPoint;if(r.isLevelChanger&&n.properties.level>r.properties.level)return is.Up;if(r.isLevelChanger&&n.properties.level<r.properties.level)return is.Down},e.prototype.getLineStringFeatureFromLastStep=function(t){var r=t.previousPoint,n=t.currentPoint;if(t.nextPoint,!r||n.properties.level!==r.properties.level)return null;var i=gy.lineString([r.geometry.coordinates,n.geometry.coordinates]);return i},e.prototype.degreeNormalized=function(t){return t>180?t-360:t<-180?t+360:t},e}();FN.default=hbe;var dbe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pbe=Pe&&Pe.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(g){try{f(n.next(g))}catch(_){s(_)}}function d(g){try{f(n.throw(g))}catch(_){s(_)}}function f(g){g.done?o(g.value):i(g.value).then(a,d)}f((n=n.apply(e,t||[])).next())})},mbe=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(DN,"__esModule",{value:!0});var gbe=uv,JI=Su,vbe=NN,ybe=FN,_be=function(e){dbe(t,e);function t(){var r=e.call(this,"route")||this;return r.isEditable=!1,r.changes=[],r.routing=new vbe.default,r}return t.prototype.toggleAccessible=function(r){this.routing.toggleOnlyAccessible(r)},t.prototype.setConfig=function(r){this.routing.setConfig(r)},t.prototype.update=function(r,n){return pbe(this,void 0,void 0,function(){var i,o,s,a,d,f,g,_;return mbe(this,function(b){if(this.start=r,this.finish=n,this.data=new JI.FeatureCollection({features:[this.start,this.finish].concat(this.lines||[]).filter(function(P){return P})}),this.notify("feature-updated"),r&&n){if(this.notify("loading-start"),i=this.routing.route(r,n),o=i==null?void 0:i.paths,this.route=i==null?void 0:i.paths,this.points=i==null?void 0:i.points,this.levelPaths=i==null?void 0:i.levelPaths,this.levelPoints=i==null?void 0:i.levelPoints,this.details=i==null?void 0:i.details,s=new ybe.default(i==null?void 0:i.points),this.steps=s.steps,o){for(a=[],d=0,f=Object.entries(o);d<f.length;d++)g=f[d],g[0],_=g[1],a.push(_);this.lines=a}else this.lines=[],this.notify("route-undefined");this.data=new JI.FeatureCollection({features:[this.start,this.finish].concat(this.lines||[]).filter(function(P){return P})}),this.notify("loading-finished"),this.notify("feature-updated")}return[2]})})},t.prototype.cancel=function(){this.start=void 0,this.finish=void 0,this.lines=void 0,this.route=void 0,this.points=void 0,this.levelPaths=void 0,this.levelPoints=void 0,this.details=void 0,this.steps=void 0,this.data=new JI.FeatureCollection({features:[this.start,this.finish].concat(this.lines||[]).filter(function(r){return r})}),this.notify("feature-updated")},t}(gbe.default);DN.default=_be;var $N={},bbe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty($N,"__esModule",{value:!0});var xbe=uv,wbe=Su,Ebe=function(e){bbe(t,e);function t(){var r=e.call(this,"clusters")||this;return r.cluster=!0,r.data=new wbe.FeatureCollection({}),r}return t}(xbe.default);$N.default=Ebe;var zN={},Sbe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pbe=Pe&&Pe.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(g){try{f(n.next(g))}catch(_){s(_)}}function d(g){try{f(n.throw(g))}catch(_){s(_)}}function f(g){g.done?o(g.value):i(g.value).then(a,d)}f((n=n.apply(e,t||[])).next())})},Abe=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(zN,"__esModule",{value:!0});var Cbe=z_,Ibe=Qg,Obe=function(e){Sbe(t,e);function t(){var r=e.call(this)||this;return r.sources=[],r.layers=[],r.floors={data:[],total:0},r.belowLayer="proximiio-floors",r.enabled=!0,r}return t.prototype.initialize=function(){return Pbe(this,void 0,void 0,function(){var r;return Abe(this,function(n){switch(n.label){case 0:return r=this,[4,(0,Ibe.getFloors)()];case 1:return r.floors=n.sent(),[2]}})})},t.prototype.setLevel=function(r,n,i){var o=this;if(this.layers.forEach(function(a){try{i.style.getLayer(a)&&i.style.removeLayer(a)}catch{}}),this.sources.forEach(function(a){try{i.style.getSource(a)&&i.style.removeSource(a)}catch{}}),this.enabled){var s=this.floors.data.filter(function(a){return a.hasFloorplan&&a.level===n});s.forEach(function(a){var d={type:"image",url:a.floorplanImageUrl,coordinates:a.anchors},f="image-source-".concat(a.id);i.style.addSource(f,d),o.sources.push(f);var g={id:"image-layer-".concat(a.id),type:"raster",source:f,layout:{visibility:"visible"}};i.style.addLayer(g,o.belowLayer),o.layers.push(g.id)}),r.setStyle(i.style)}},t}(Cbe.Eventable);zN.default=Obe;var tH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.pulsingDot=e.popupImage=e.floorchangeUpImage=e.floorchangeDownImage=e.person=e.chevron=e.defaultIcon=e.marker=e.routeB=e.routeA=e.door=e.ticketGate=e.staircase=e.poi=e.landmark=e.decision=e.hazard=e.entrance=e.escalator=e.elevator=void 0,e.elevator="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAFfgAABX4BPgLDIQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA+pSURBVHic7Z17fFTlmce/z5kzyWQyl1yogqJQEESoYne9QAhoRC2tq36Uql01Vru6ih9dFfGylUrBov1YqLrqqrS1FuxWi7eq9W6jkASs3YqyyFWRikiEkJnJ5Doz590/kmAucznnzCUJ5PvfnHPe53ny/vKe857nvRxhgNNQVVSkOY0JorSJhqgJgkwENVxBvoAb8ADOzssjQFhBs0AbIl8qpTZqSjYpjA2xAsemkhMagv3316RG+juA3tSvLRmpR6IVSuQUgVOBsRl2sU3BOyLqXac4q9xl9V9k2H5aDAhBwrXFx0YNo1LgPOConDoXtgo8J8qxwlu+b0NOfccNp59oWuUeEZO8ixFVqWByf8XRi3Ugyx2RyB88FU27+yOAnAsSqvVOQGmLlGI2oOXav0kiiDwlKrbYV964OZeOcyZIYJX/n8QhC1HqewxcIXpjIPKKIdxZXBb4IBcOsy5I/doSnx6LLkLJdYAj2/6yRFQJD7S35/30kIo94Ww6ypogSiHBav9VItwDlGTLT46pQ8mtvvLAChFUNhxkRZD6tSUj9WjsV8CsbNgfALyi47yqsHzvrkwbzrgggWr/RQLLAF+mbQ8wQkpxZdH04MpMGs2YIKp2ZEFIhR9DqcpM2RwMiLDMGwz+h3yPtozYy4SR8NrCQ2NR/XlgaibsDT6kRjOi53lnhPekbSldA6Fa7wRlaK8Bo9K1Ncj5TDBmpfvektb7QGiVd5oytBqGxAAYrdBqQ7XesnSM2G4hDauLTtVEvQh40wngACSkiZztnRZYZaewLUFC1cXlBsYbAgV2yifCMOCmJS28Wh1hbqWLay7IS8verj0GF97azPqtMVvljxvv4I/3uhkxzPKNpFk04wxfWWOt1YKWPTWsLpqsMF7OtBgAi5a18sSL7dTtU9z+Xy38qSqSlr2//l/MthgAH22J8df1tsq7laG92LjGc4zVgpYEaVhTNFoT4xXAb9VRKp56PcJ9T37dc1QKrl7cwodb7FfozJN0xoy0/5gcO1Jj5sm63eKlsZjjzYaaIkvPV9PRqipcWkw9B3KY9diSs/rvUa67p7nP8ZZWxQXzmvjiK8OWXW+h8MJ9hQwrsn5nHlYkPH9fIR63/Y6owOGaUivVBkzfe00LEnT6HwS+bSuyJHy606ByfjORaPzzdfsUF93WTHOrvdTRqBEaKxa7yXOmvraLPCesWOxm1IiMJKVPDDX47zd7sSmPwRrfpQJX2o8pgd2w4qLbmmgIJa/s9Vtj/PuiFgx7DYWyyTr3zTP/yLtvXgFlk23fquIxJ1jtu9jMhSkF6RhQkkfSj6kn0RhcsaCZLTvM1fJLqyIs/k2rbX+XnpVnqtc254J8Lj0rvd5dfOSxULX36FRXJRVEKQRDe4SOmR0Z5c7/buXt9xLcpxKwdHkbT79uv+d19/UFzCpL/J8/q0xn8fUu2/ZT4FFoD6W6KKkgjbVFP1QdMz8yylOvR3j4aeu5OKXghl/Y73k5NHh0vjtuz2vsSI1H57txZHcs8/Rgje/SZBck7EKE3vOWqoi2GSjNdFTjzwlRt8/++M6sMp2n7y20XX7LDoPTrw4TDHfE4PcIbz3mYfyonIws1xkRmVBcEQjEO5kwAhXR7iILYgBMHJveSG665ceP0nhikZsCl+B2Cb+7y50rMQAO1ZwsSnQybgsJvusbh0M+BjLa1ejCMGBnnYFho5Hk52EnlRGXUGcL8XlyPvkmohQTiqYHP+19In6F69pPUCorYgBoGhyZmT5+WvSDEF04gfnAj3qf6BNRZ+vYyOCdITJYiKgYRxedEtze/WCfViCa3KIsiLFrj8HCR1upej/K3oAiZvPlbbDi0OAbxULFiU4WXJNv5XbqFAe3AnO6H+zRQjqHYncA+WYs7tpjcPrV9nNNBxojD9V4e5mH4aWmb4WtmhE7svvQbw85jaheiUkxABb/um1IjG7srDO421o2wWVoeo/3kh6CKNTlVqy9VpPeeMWByKvVVuuk5yyd/YI01BQdDzLJiqm9gaxM3hvUfGX9hffb4driY7t+7H+oa4ZRiWS/G1jgEqYe58BXKOzea/D+hlhaHYEjR2hMHt/RB1m3Ocbnu+0bc2hw0rd0Di0VQk2KNR/FaLGZ9reCoYxLgNuhey9L5NxsOy4/XufxRW4OLfla+PVbY1zy42Z2fGmtIjUN7rrWxbUX5qN1tvOYAQ8/3caCR1otp+pHH6bxP/e4mdQtC7C7XvGjBc3UrLOWBLWKUpxLpyACnUOzMbU9aak4+MvNL9cbM1Kj+rceCgv6tsJtnxuUXdZIm4Xb721X5PPjf4ufmV20rJWly80nLwvyhTXLPXzz8L5d1nCzouyHYUv/MMFq6yPcUd1xROmUfTs1AEeU0yxbsMg138+PKwbAUUdonHea+SG9fCdc/4PEncEbLs63NEJ4/kxnXDEAPG5hzoXZGB/piR4xToPOh7oSKrLtcPLRyd81U53vzpiRDryFiZ93fo8krOB4HDcuRWzjc5C0EKMC9vey1CnZ9tfUnPzhGO47xyEhjSlsdVxj3l5TS+Zis4+cCqA11ngOAY7ItrtXU7yzpDrfnZ11Bhs+STxI9eGWGLssvLBmMrY0GB16z1uqKeUcnwtvy19qZ81H8Xsry55t5+8brY0C3rSkJW6XtKVVMXdJiyVb72+I8fgL7XHP1ayL8uSf45/LOFHGa2CkHHjPBG0ROG9uM/c+0cb2LwxiRsfMwBvubeHW+61VIMB762OcMaeJP1VFaGpRhJsVL1RFmHl1E3/72PoQ79ylLdy0pIX1Wzvei7Z/YfDzx9uYfXMz7TlLSDiOlkC1/16BW+wUt9LtPZiw0+0FEPi5hjAuw/EMYZ9xuiiG59Kj7oBSv1DgEsLNivqgQqWRnXC7hNLOqaL1AWV7hiOASEdsHrfQ0toRW9T+1GLLKGS4Dsqbi/0DhpcKd1zl4pxTnBR5v/a3s87gD69FWLq8jZY285X5nTKdGy/JZ8qxeo/UyZqPotz/ZBtvrjWf7ihwCfMq8/nX7zo5/JCv318aQooX343ws1+12kkaWkZQXglW+z/D5goos8+Qf57o4NklhRT7Egu/cXuMc29oMjU9aOEcFzdeknzY5pcr2lj4WOqxieGlwosPeDh6dOIXyfqgYvbNTXywyVxzsfsMAbZrZHkF1IhhWkoxAI75poOVSwrRU7wUX3NBXkoxAOZW5nPV+clTHk4dnllSmFQM6LiNPbe0sEdSNEt4NbIwTbQ7C+e4UorRxeTxDi4/J3ElDisSFlxtfqrnT69J7vvK8/I5NkXapIsSv3CnBd828Wpk8QHi9wjnVljI8kFSQWaf7sTtMh+uxy3MnpnY/2VnW4tt9kxn0hxaJtCAxmwZn3a8jstiovTYcY6Et4bTTrJWgR1l4k8vGzFMY+IYa0nDApdQNjmricbGrAoycay9yXDHJKioSWOs25uUYNqp3disimiRRk1lUZBSv73m/Y3i+OXsLE07JEFrs2MLEseWCQQaNcmiIFbu9z3KJRjIKrBhL1EMrnx7sSUaZMsEChXSlFCXNQ82ycWM2wGx+2cvBKnTNMWm/g5kiA6UYpOGyJb+DmSILmSLhsRyuuvmEMkwNms4GBJkgGBEtc2a7+TGeuDz/g5mCD4rrggEuqYBvdnf0RzsiOrQQOv4of7Sv+EMYQhvQ6cguhH9C2RnH9ohTKEcEquCTkEKZzR/CZl/uJvdNqM7SsHWf8QvZ8fe5s/il9mWwIdde+mgYIN3Wvgr6L5gR8nTmXb0yMo27niolT0N5hrflh0Gl/0k8Wzz2fOaePatiKmZ7YYBz7wVYfa8prjnq9dFqZxvfq+VPQ2KOx5q5dFnMrIbbA9Eqf11vz+DEKjxjxXFVixkFcwO4Ra4hOrfejjqiMQZ1pdWRbhsfrOpyj5zqs7KXyTfyeGCW5p4Y03qcXVNg+U/c3P2jMSp/W2fG5RfETa9VsTiEK5hiIwpnhbYAd1aSNG04CcoWWPFkllaWjsmsiWjPqBMr+kwM+HA7KQEw+jwnYxws8rawh0F1V1iQO81hqJWZMXrEAnRYEWv391+OI2VQE7meg8BQJOheLb7gR6C+E5urFdCxjcrGyI+SvFw0fRgQ/djfZ6yent0iQLrs5+HsISCFt0Z/WXv430E8VQ07Rb4XW7COngR5DeeKU19Bgfj90M1tRTI7tLTg5uIiqk+rQMSCOIvC21TYHpr0yGsIbC09y5AXSR8U2uP5C0Uxc7shXXQ8lnYVXhXopMJBTmkYk/YgLnZiengRZTMPeyEXQlfLZLOFvOXB58ReCfjUR28vOWbHng+2QVJBRFBRXRHJbA33Ug++Tx5XiRRhjceu/YYSdeStLQqS9tGpYptW4rzJtntiERTfp/LVCIxWO37LsjL9BLQyhrDwgLh9Cl6XIetbYo31kYt7U8yaayDcUfG/3/assPg40/NL33SNPjOVCf5ceYhK+DNNVFLK7PiJBdjSjizaFow5UCg6cxuqNp/t4L/7H5saNFnfPoKIov85YEFZsqannHsdQUXgNR0P5bNea6Dld51omCVLxJI2KvqjWlB5AQiMZecJfBR17FzTrW+POBA58ypPepkXUx3nC0V5l+yLf+LN9eWHh4xorXAkYFGxfk3N/G/NhbqH4gUFgjvrfBwxHANYIeOs8zq51lt3XMaq0smGcRWA8XtEfj9K+38eXWEDzbFDtpt/0aN0Pj1AjcnfcsBsE8zYtO9M8IfW7Uz9Nm8zJP7z+Z10bjKM9HQHK+Rg92EBgn/0ByxWd6p4Y12DaS1Abt3RvhjHecUBevTsXMgIPChjnNqOmJAmoIAFJbv3aXr0TOArEyQGBxIjRixMzLxffWMfKLAM6WpzrcrOB0lC4GDqcsVU4rbfdMC0zPxpWjIwsquhuqiCg1+D2pEpm0PLNQuzdAu9s4IvJtJqxn/iEdxeaAqqmsnAa9l2vYA4hWdvBMzLQZkee1jaLX3X5RoDwKjs+knh2xWwrVmkoR2yepnbnzTG1+O6o7JiHqAwf1siSphaVsk74RsigE5XB0criocbuTpNyrFdYD9T6zlliBK7nc4I4/EmyGSDXKerg1VeYcp3XEdoq4HSnLt3yT7UPKg5MUe7FzylzP6LX++72/Ffq3FuEiEy4Gp/RVHT6RGUE9EdMcfS6fsC/VLBP3htDcd39vVLleK2cBROXUubBXFMyjjCd/0xn5fsz8gBOlO/dqSkXokWqFETpGOz76OzbCLbQreEVHvOsVZ5S6r/yLD9tNiwAnSm4aqoiLNaUwQpU00RE0QZCKo4Qg+lHg6NvHcvyteGKQRUWEUIUS+VEpt1JRsUhgbYgWOTSUnNAzocef/B67bg9Z9wGWWAAAAAElFTkSuQmCC",e.escalator="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAFfgAABX4BPgLDIQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA3ZSURBVHic7Z15lBXVncc/v6p6vb9+vciikgQYwaZPXMhBZWmUdsKMBycyJpPjDIIhi+OMh6g5Z2KYxIxBQpRFhWA0alSQQBQScFBBo4GwdANncmYUDwpoRnFklV7e6/Vt9Zs/mu50N72896re0t1+/ntVdX/3V/V999ZdfveWkOHU7SwqMjx2mahRbouWCVIOOlIhWyAPKAA85y4PA40KzQJBRE6q6nuGymHFPhTNNQ+XTKrzp+9u+kfS7UB3avaXjLLCkUoVuU5gBvBXLmfxgcIfRXSXRzw786bWHHfZviMyQpDG6uLLIrY9T+Bm4JKUZi68L7BZ1Fznrag9lNK8e3QnTTTtzrswKllzEJ2ncEW6/OjGWyDPm+Hwbwoqm06lw4GUCxKo9pahxgOqfA0wUp1/jIQReUE0uqSwouFIKjNOmSD1u31fElMWoTqLzBWiOzYi22zhP4qn1v9PKjJMuiA1+0sKrWjkAVQWAGay80sSERVWhUJZPxle+WljMjNKmiCqiH+v73YRHgRKkpVPijmNyr2FFfXrRNBkZJAUQWr2l4yyItGngRuSYT8D2GbhuT2/4uwJtw27Lkj9Xt8tAk8BhW7bzjACqnynaLp/k5tGXRNEq0flBrTxSVTnuWVzICDCU16//y6ZRdAVe24YadyfPyIasbYAU9ywN/CQKsOO3Oy9tvFTx5acGghUe8vUNl4DvuDU1gDnI8G+wWm/xVF/ILDbO01to4rPxAAYrRjVgWrvVCdGEi4hdXuKZhiiWwGvEwcGIQFD5CveafW7E0mckCCBvcUVNvbvBXITST8EaBbDnlk4taE63oRxC1K3p+gKQ3QX4Is37RCjxjCj071TGt+LJ1FcgtTtKxptRO0qkIvi821oonBcRaYVT6s/FmuamF/qupMcI6qbPxMjdgQuNlQ36SGyYk0TsyB+j281MDEhz4Y2VwXqfCtjvTimKstfVTgXlXWJ+/QZoLf6KgIb+ruqX0HOdfz+i7ZggpQRjsD6bSE2bA9x8KhNMKyMGmEwq8Lirn/K5uLhA2VKpYNGwZ7UX8exT0FUkYYq3w5tCzZIGcfP2PzjwmYOHo32eD43W1i9MJevz/T0eD6DedNX4Z/Z1wV9/s0aqou+kWox6huU2fc09SoGQEtQ+efFzWzdFU6hZ67wZX9V4dy+Lui1hAQOeEs1bBwBSl13qw9+uLqVX7wY28Dp8BLh7Y1e8nIyIngmVk7bYSkrrqyv7+lkryVEw8ZiUixGS1BZszUU8/VnapXNfxhwpWSE4eGB3k72KIh/V+E44PakudQLh/5s09QS38zogXd6r9oyF/2X+j2+sT2dsXq83jJ+jGrP55JIrT/+aeqaBNK00xJUqt6K8tEJm1NnbcKRnq/z5gnDioXLx5tcPt7EdN7A8wD3Ad/qfuK8h+7fVTgO1TmOs0yAEl/874LSBNIcO2mz9Lkgm3eEaWmNT9ARJcI3bsri7jnZFOQl/u4SYW79Lt/iouv8H3Y+fp7WYsj3SVO4zmXjzLhvcuqV8bn66p4wV9/awPptobjFADhdqyxbE2TybY386V1H1aVHTO7tfrCLII3780eocJuTXJyQ7YFvzY552IeLhhnMnhF7X+TF18Pcdl8zrbG3G3rl/07Z3HR3E/sO9lLPxcb8ht0Fwzof6CKIHbHmAdlOcnDKD76ZTdno/itpw4BV9+bG3OR94fUw/7qkmYiLbYCmFmXej5o5edZO1ESObVhd+iVd7lzR+YladouCPGHzI/lcPr73qig3W3jqx3n8zZTY2h2/eS3EnUuaiSb83Hrn0zpl0S+dBJx0jdLp+HvVVRVdaaimJH41Ftway9qwPcSCB1uSIkY7hgGHXypkREliL3nTMC4vmFr3DnRqZRm2PQ/JnB6vx4L5N2Ux/6bY3yndWb8txIKHWrCTKAaAbcMb+8LMvTExX221bwUWQudmr8hsV7xzkZNnbbbsCHPwqE3UVsaOMrixwtNnddbOr18N8d2lyRejnY9PJZ6RKrPpLEjdvqLRRNXtpWMJY9uwfG2QR38dpCXYtWn60LNBvnyNxeM/yuu1ilj3aoi7UigGtA2KOqCsZn/JqNLJtZ8YAGaE691xyzmqsOChFn72TOt5YrTz5oEIM77TyKma888//0rqxQAYXuys+26F7evhXCtLhUoXfHKFDdtDrN/Wf0fhxBmbnz3T2uXY2pdD3L0s9WIAXPJ5h+MpYldCxztEr3PqkFuseD62JuRl40x+ckdOx++1W0PcsyI9YuRmC399tdOhP5kBYDRUFQwHPufYKxc4eszmfz/p/4leNs5k68r8jrGvtVtD3L08PWIA/H2lB2++4xbq6MABb6mh6hnvhlNuEEtLpbsYa86JoUlZz9Q/JT5h0Z05/V8YCxHGG2Bf6o4157SG+n6q3cV47j9D3JNGMbI98OR9vbf24se81LAhYwTpi+5iPLMlxPdWpE8MX4HwwtL8mIdvYkL1UgthXHKWL7pHdzF+tSXEvz2SHjGyPDB7hoefLshlZKnrIxvjLFFGum3VTbqL8fTmEN9/NLli5OUIV3/R5KJhBlnnRvcvvMCgbIzB9VdZFBYkZ4hJkZEWqDdDtjw5j+5iPPW7EPeuTJ4YpT7h37+dw9wbPeRmp/6ZCOq1QFIakRgr3cV48rchfrAqeWKUjzXZuCyPz41MX0SkgtciA1dATSo32fJIfkfVsGJtkMVPt/aTKnG+NMHkpUfz8SWpKooDr0WKY3b7o7sYy9cG+enQEAPAK/69vhB/2ZEtrbz3YZQRJUZHNfX4xiA/XN2a1Grq5Z/nc0FRRogBELSABjJkL5IJY/4yz7FsTZAlvxoyJaOdBoM2QTKKISoGQIOl0JBJbi19LnjesLqbZLAYCDRYkkEl5KFngzz47NAUA0DRgKHC6XQ7AskXY2JZZosBIMhpw1AOp9uRleuTK0b5WJNNyzNbDABVDluIHE3XkKm/UbnvsVaef8WF2M5eKB9rsnVVPsOKM1uMNuSohUSPoMkdLjhxxuZsvVIbaBM+0Kjs/u8Im94IO43W6JMJYwaSGAD2EQuTIyRh6vP9j20e3xhk+96Ik9jXhJkwpq3TN3DEADtiHBEA/17fx7g0rx4Mw5KnW3nshWBSwzf7YiCKAXzkq/CPaQ8DesMNi60hmLOwiVUbPhMjXkTbNDDafugOpwZV4dv3N/PmAUfrJRwxsczk9ScGnhgAtvAHOCeIZUd2gLOJ3Jd3h3llT/pWxE4YMzCatr2gpkR3wjlB8q9tPgk42itwxVpXNuVMiIHXmuqKwiHvtMYz0HnBjsqLiRr88LjN233svJBM2qup4a6F4qQeUe149h2CqKHrSLDaeueD9IhRNtpg47IBW021Y9uG0bHTUocgRdP8f0ZlXyIWT/cQhZ5sJpaZ/P6XBQO6ZAAo7O2841zXNYaiCe2JleqRl0FSMgAwYF23351+eOxNQHO8Rr9wYeoiNdreGQO/ZJyjyVZ+1/lAlydZeE1DjQpPxGt1YpmJlYKtBtpLRpF3UIiBKr8omu6v63zsvL+2FYqsUGiJx/DwEuF6x+sj+qZstMHLPx80JQOFFssTeaT78fMEKahsOiWwNt4M7r8jB0+SNLny0kFVTQEgyDMFk5vOmxzsufI39GEgrjGQL15icsc/uL8JRNlog03LB081dY6wRvW80gG9COKbGvhAIeatTdtZfGcO8xJcq90TE8vMQVVNtSPwcPddgNrptXkUCmctEuWTeDIyDFi9MJfl38t1tMTLNOCbs7PY/tjA7oH3wkeNOfmLezvZ593W7/F9XYSNieR6ulZ5aUeY7VVhjhyzOfmp3Wd/JT9XGH2RwczJFrf8rYfysQP1g259IypfLZxev6XX830lTtc2sYMYZ9vEiqBhy5wHnHXVraHJKTMc6ff7XP12sUsn134CehskY+Z9yBBV4dZYvq8b05iHryKwXWCpc7+GKrKkaJo/plnZmAehvDn++0GqEndqaKKwuzBc32urqjsxCyKTCEdz5EaBg4m5NiR5K2qZX5HK2DvZcTfym6tLLw7bkWrg8/GmHWIcs/BMjffzrHGPm+dNrTluYM4C6vq9eOhSa9jRWYl8KzehiQxvRe0hW+WrZNBShgwiYIjc7L228d1EEjsal2jYXVBuG+ZrZMhuQhnAx4YZvSHeL7N1xtFUn/faxnctPJMV3nFiZzAg8LaFZ4oTMcChIAD5FWdPWFZkJpBQgMTgQKrEjs504/vqrkyGF0xuOl14wj8dlUXAQPx+RKJEVVlYOK1+uhtfioYkbHJSt7eo0oD1oBe6bTuz0BOGbczxXlu/y02rroeLFFfU74xYxtXAa27bziC2WWRd5bYYkORtgAJ7vH+nYqwGRicznxRyRIU7Yx2XSoSkBlQVTm94JWKZVyC6ioH9bomo8HAwnDUpmWJACjfKatyZP9LOsu5RZQGQn6p8HeJHZaXpCT/RU4RIMkj5hHVgp/cCtcwFiH6XDNljpQdqUVktWdHVhdc01KQy47RFENT+qdhntNi3iDAfmJIuP7oiVYKuCVvmxtLJtYG0eJCOTLsTqPaWocZ8Vb4GXJLSzIX3Rfktaq8pnN5wNKV59+hOhlGzv2SUFY5Uqsh10hZc4fZXGz5Q+KOI7vKIZ2fe1JrjLtt3RMYJ0p26nUVFhscuEzXKbdEyQcpBRyIUolLQtolnx654jSANiDaiBBA5qarvGSqHFftQNNc8XDKpzp/O++mP/wfhZ//KTP56sQAAAABJRU5ErkJggg==",e.entrance="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAVfElEQVR4nO2da2yU15nH/+e9zNX3GXvswTYQTAAbbAdIG2ySEichJbtZ7a6UzWplqqYfVknVqlVX6YdUimijNl1ppSStyJckYLXeJi1VUEW47G5Ci8EYDMbhYsAXDDg2vt8Ye8bzXs7ZD6/fmXfGlxmPZ+wx4S8dzYwv7zxzfvOc51yfF3ioh3qoh3qoh3qoB0JkuQ2IQWSO57O91sXmeR3+u2VVsgMhCNpIong9n5jhkUXxelmUjECMFcwZCjE8zldmE4tQ6PSjGvZ6ycHEFQhjsdtPCDFWKgeAKykpEUtLSy25ubnm8vJyR3Fx8Vqn07nGYrHkW63WfEEQcjmOS+U4zkIIsXAcZwYASqmfMTZFKZ1SVXVCkqR+n8/3lcfjudfX19fV3Nx8p6GhYay/v99/8+ZNaWBgQIEGw1goDGBYFB9O+wiL07IDmQUED0D48MMPcysrK7+RlZVVbrVat5jN5kc4jkshhJgJIabpRzGKz8AYYzKlVGKMSZRSP6V00uv13h4bG7ve1dV17c9//vOl/fv3DwBQAMjTj0ZIUYFZ0UDCQPAA+I8//ti1c+fO5zIyMr4limIxx3FOnufTOY5Li6edulRV9ciyfF9RlJHx8fEbnZ2dpw8cOHCmpqZmEICEIByj58wJZkUCmQ3EyZMnH9m8efM/2u32XaIobhBFMT/etkUSY4xOTU31eL3ezr6+voZPP/30xJtvvnkLGhQJM71mBpgVBYQErdWDtNDU1FRWWFi4x263V5rN5q0cx2XG055YpSjK2NjYWMvAwMD5U6dOnfz+979/FRoUo9coCMYZMMbYigFi8AoOgHDhwoVNa9eufcFut1eZzeYKQoglnnbES5RS/+joaFNPT0/9F1988flPfvKTmwD8mB3MsnaXZxVjLKQgtGky7du3z9nV1fWvk5OTRyilMlshopTKfX19Xxw7duwH27dv3wwgH0A2gHQANgCm6c84X9d76cVmwuAACAAsly9f/ubIyMivFUW5u8z1G7O8Xm/31atX3//lL3/5dwAeAeAGkAUgBYBl+rPqY6XlF5sJQ9y3b19WZ2fnSz6fr265KzRe6u/vP/XJJ5/8+2OPPVYGoBCat6QBsAIQkSxQWBiMDz74wDU4OPgfiqJ0LnclxluTk5PdDQ0Nv3766ae/CWAtgFwAGdCasKSBEogXH330kXt8fPwdVVXvL3flJUqyLHuuXbtWU1VVVQGgCMEmzI7QuLK8ME6cOFE0MTFxkFI6tdyVlmipqurv6Og4XF1d/RyAR6EF/Jih8HGEwUEb5K3dsWPHWzab7V8IIeY4XT9pRQjhMzIy1m3bti3X4/G0Nzc3Txp+veCucDyA6F094cSJE4UVFRW/stls/0QIMcXh2itChBA+LS1tdXl5uaurq+v6zZs3pxA6nU8RJZjFAgmMM2pra127d+9+0263vzw96fe10jSUNVu3bk1ra2u7cevWLT+WeJ3F2LXNGR0d/a+vQ8yIJFVV/c3NzTUlJSWVADYgGFMS3vviAAivvfZaZm9v7w9UVR1d7spIFkmSNH706NFf5efnfxNaoHdD6xJboQ0e5wQSa5NFAPD5+fni/v37d61atepNQRBWxXitB048z5tdLldhWlraV8eOHetFMI5EnPOKBUhgSuTIkSObNm3a9IbFYvlGLIY/yDKbzRlutzvD5/O1X7x4cRxBIPNCEWJ4LwKA27dvX/rmzZv/zWaz7Y7VaMoAr6RCVqnh0ksvjgBWEw8TH9/3z8/P3/HKK6+0nz59erClpUVFcD1FB6OG/89CLSAAeLfbbTpz5sw/FxYW/ifP8+5YDR71qmjt98InqRA4LtbLLEoMgKRQbMi1oSAz/j11r9c7ePjw4feqq6v/B4BnukxCm8aXEdYlXoiHBNY0amtr12dnZ7+0GBiMAWM+BT6ZwW41I9Uigi5ik0QsIkTz0lt9Hkz6aeR/iEE2my27oqLi2e9+97ttNTU17QhdFjbCYMDCmyzO5XKJxcXFL9rt9ucXaywDIPIc7BYBdqsASpcHiEngtRcJUmFhYUV1dfX12trabkVRZMyEEmi6FhLUOQBCQ0PDN/Ly8l4VRXHtYg0d96mY8FNYTALMIo8ldhAQon0phj1+ZNoFOO2xhNTI4jiOt9vtos1m6/rb3/42BA2CvtIYWJ8HtEqORoG5Krfb/YLFYtmWALsfaDmdzuJnn322AoAZ2mKWGdpAMWRRa0FA6uvrS+x2e8XXYdIw3uJ53rR27drS1157rQgaDDO02eAFAwnMVz366KMvmEym0gTZ/MArOzv70ZdeeqkSGggjkMB6fLRAuP379zttNltFojatfR0kiqK9qKhoy9atWzMRBBLSbEULhN+9e/cOURSLEmdudIYksDO0JMrIyMj/3ve+twUaDL3w0yUikEAwz87Ofobn+byEWhtBKgM4QsBzK5eK1WrNrqysfByaZ+geImIhQN5//33X9M5Ca2LNnV9+WUVn/wTGvFLcpzmWSoIgmN1u94YdO3ZkYWZw5+cDQqANBIVdu3Y9zvN8zhLYO7cxBFBUiv9tvofPL/fB61chCisTis1my3r55Zc3CYKgN1l6HIkIhFRVVVkdDsc2nuczlsLY+UQAeKYUnLh0D59f7YPPTyGswObLbDanlpeXb8zKyrIgGEdERAACAHxBQYHFZrOVchyXmnBLoxQvCjjfMYb/u3wPkkLBr7BIL4qibfXq1UUZGRn6KmLUTRYpKytzmkymdUiCTV8AQKmKtatykJebjTOtwzh26R78ioplmiyOVSQjIyN/48aN6dBA6CVyDNm8efO6hIw9CCAKBGaRB6dPKkUpkyigqNCJXFc2GtpHcPzSPcgy066zQmQymew7d+5cBQMMANxcs2mBQzXp6emPJGIXCQFgNwnItPMA4RZ0+kpVKUSBQ1GBC4wB59qHABC8sM0Nk8CBUpZk5wJmiud5saioyI3geZl5gegiNpstP1F7rASewCJykNWFV6CqAKLAY32hCwTAubZBEMLw7cfcsJp5yEpyI+F5XsjNzc1G2Gnj+YAQAJzFYilIFBCRJxB4AIREHIETAogCB2OnSvMUHutXa1Aa2gZBQLC7PA92Cw8piaFwHCdmZWWFAyERmyxBEFyEzPl380pWKca9Crx+fco/VBMyg0cCVBq5x0AIMDmlXctuGJ6qKoXA8ygqdAFgOHNzCDxH8GxZLuwWHn45OaFwHMenpqZmIfSMfUQPIdMBPaZoOTop42TLENr7vLCa+RlMZMYgqdpybjRvIFMGz5QKh0kIuZSqUvA8h3WFuWAMOH1zCIQwVG3JQ4o1aaEQk8lkR+iR8IjffLKYtQ+PT0VL9wRaByXk52TMWDMnWPjeylyXE1npdqhhS+CUMggch6LVuQAY6m4Og4HgmS0u2C1CUjZfgiCYscAmCxzH2WJ/SwZR4ODOzsSmonyo4bWIGF0PmPValDHwHIf1q/PAcRxO3xwCAOwqccFqXvol4kgSRVEHEgwREf6HLPaELIG274kjAIvTOGG+LjKbhlK0Ohcqpfj8ygA4EHx7qxtAcnWHp+ey9EqJuEBFwh5XjPRKJ4RoGWUY1ZrL5P0kgbqO2HtijPkW804MAKXadpvF7ruKpj4JIVBVFbe6+jA4PILny1x4siRb22GSTO4BQFEUyfCSAFHsy6KUemN/SwJZoejuHwFlCljYvitGALLASqKUIT/PiZysNChhcYQjBCpl6OzuR0//MJ7cmIWnt+QgxSIkZU9LlmV/+M+iATLjn6JVuk3A1rXpSLdNwjzL5IusApI6nZsigggAWaFo6RqDzW5DnjMNimFnLMdxUCnFra/60N07hJ0bHagqzYU9SWEAM4BE3LnIAIBS6pl+vuAWOMMuoqrYgYr1mbOONTySNjBUomjetYGhjK+GPPBLSsjveI6DpKrouNuHgcFhPFXsxDNbXEhNYhgAmCRJeusT2E4ayUOYJEl9VqtViWWCUeAI0m0i0uf4fZoKjE8BCo28eYEQwOMVYDGFbrbkeQ6yrKB9GsaTmxx4riwXNhMPfxKOPXRRSlWPxzOCsCNvcwEJbG30er3daWlpUiJmfBWVQaUEihrZRQjRpmKMnsbzHCRZQcfdPgwOjeDJTU48V5YLi5jcMABAVVV5cHCwH2HpBiMt6zCPx9NDKZUTYZSsMvhkFVHwmCFeAKRpzxgcGsbOjQ48X+6GSeAhq8kNAwAopXJvb+8Qwk5XzQeEAWADAwN3oaUjiqsYgElJwciEBElRF5T8i+c5yJIWM4aGhlG50Ynd5W7wnNbLWglSVVVpb2/vQ1gizrmABFzo0qVLtxRFmYi7RQxQFAZZURc4aCPTnjGIgUEdRh4EbvHjnKWU3++fbGho0M8fBrwkkofQ+vr6Ua/X24EkSc7FEQ537w2if3AYFRsceK4sDyLHYYU4hi42NDTU3draqvdgA+cOI8aQrq6uqZGRkRZVVePvJTGKqgoqN2Th+ce0JVt1BXkGAEiSNHn79u1bo6OjMkJjyJweEmiyWlpapK6urquyLN9fInvnFAOQlWrG329fhae35MAicismZhjl9/snm5qaOsfGxox5G1VE02RNTEyoBw8evOT3+/uXwtg5jWGAwHOoKnXhWyU5sIgrozc1mzwez3BtbW27qqr6ydzA8baIvSwAam1t7fDo6OgVVVUXNdG4WJlFHmtyUpBmNSXlglM0UhTFd+fOnfbr1697oEFQDEWNBETPUatcv369brm9hCfaesdKbKZ0eTye4ZMnTzZDq1f9AKieF3heIEAQilxTU3PR5/PdSaSxkaRlLl5OCxavsbGx3t/97nftCAIx5gOO6CF6sFEOHTo00tfX16goiifRRj+okiRpsqWl5Vp7e7sHod4ROCYdrYcoAKTjx48fv3///uVEGv0gq7e3t/XAgQONCHqHH8HEzFEDCTRbr7/+ese9e/fOUUqXNbivRCmK4r9+/frVw4cP38P0FxxhzRWiGBgChmYLgFxfX//X0dHR5ngZqp8bXO6SaPX09LQcOnToErS61EHo+U4C3d5odyTqUKRXX3312uOPP/7XjIyMrTzPL2pHirYBQes1qZQtW2oNRWUJ7SwoiuK7ePHixYMHD95BMG4Ymys9xUZUuU6MzZYCwP/73//+eHZ29paCgoJ/iNlKou0M80kq6IQEWWHLlnzGO6WA0cQknwGAGzdunP3Nb35zHkHvmBE7EGGBKlwhwf3dd9/tqqqqOuZ0OsutVmthLEYSABk2AQ67iCmZQpYTsuQSlfIyTEi3JSbPyf379+8dP378XF1d3RCCMKamSziQqLMB6V6ijyilt99+++y6deuOFRcXvxqrsWkWHsV5Vm3FcBnFcQTmBB0gvXDhwun33nvvKkKbKh2GHj8CK7Qx51zs7u6mKSkpQyUlJbmpqanrYroI0Y4kmAVuWYuJJwk5fdXa2nrmF7/4xZGmpqYRaCC8huJDMH4EvpELBaJbzQEg9fX1E8XFxWPr168vM5vNSXF3nGTRyMjI3d/+9rd/rKmp6YQGwwcNxOT0cz9CbwYDYHGJlAkA0t7ePl5eXq4UFBRs029b93WXJEkTn3766R/ffvvtZp/Pp8cLHYYXwSZrxsGZRQMZGhqira2tPU888YTF6XRu4jjua5fV2ihFUXx1dXWf/ehHP/q8v79/Elrl+wBMIOgdejCfkYI81jSxIa97enrUCxcutD311FPpDodjAyEkXkn+V5RUVfU3NjaeqK6uPtzd3T2BYFM1iaB36IPBGRlJgTjeHaG3t1ft7OzsqKyszJ0+ubuyTo4vUpRS5erVq6f27t37ye3btz2YHUZ4UzWjexnXb3JHR4ff5/N1lJaWOlJTUws4LuIp3wdCiqL4b9y4Uf/666//qbGxcRgzg3jEpkrXYmOIUQwALl26NHn58uUr27dvtzocjqIHPabIsuxtbGw88Z3vfOfj8+fPRwtjTsXDQ4yuxwDgzp07/rNnz9544oknRIfD8chi57ySVVNTU+Nnzpw5unfv3sO3bt26D63S9WYqPIgHZnQR59zvs2kGlP7+fvnLL79sdzqdvS6XK89msznj9F5Jod7e3hu1tbX//bOf/azu7t27HoTCCA/i88YNo+IZQ0J2cQNAT0+PfPTo0S6bzXY7Ly/PnJmZ+QiJx/1Jl1GMMbWlpeXUu++++6ef//znV0ZHR/VBnrGJ0kfjC4IBxDmo6zYbiyzL7OTJk4NjY2Odbrfbl5WV5RZFMSUB75tweTye/rq6us/eeuutz/7whz/oe56Ngz4dhg5pQTCAxAIBDFskr1y54jl37lx7enr6V1arVUpPT8/jeX5F3KdKkqSJa9eunTp06NBnb7zxxummpiY9eM8GI3ysETUMIM7nUhljxhsR8wgm57JAu7uMFYBtz549eT/84Q+fKSsr2+lyubYkKxhVVaWenp6WxsbGxnfeeef82bNnhxGctdVH4HqPyugVIWscC3nPuAMBEA5FgAZGT7Gtg7H89Kc/LX7xxRcr16xZU5aTk7PBZDIlRdY6v9/v6evr62htbW05dOhQ04cfftiJ0KVX4/yUb/q5cTk25rtHJwQIEAJFzwWle4sRjAWAee/evatfeeWVXWvWrNmclpbmSktLc4uiuIgMEguXJEme8fHxgfHx8cHW1tabH3zwwbm//OUvvQjdP6Wv9OkQjAtNehOljzNiWuRJGJDAG2hgdCi6t+hgdDgWAOaUlBTLj3/840179uzZsWbNms2pqak5ZrM5xWQypcTbVmjnJyempqYmxsbG+tva2lqOHDny5YEDB25PTEzowdi4d8q40uc3FKNXRH2/wrmUcCDArN5ibMb0GGPMYWsqLS1Nr66u3rht27aNq1evXu9wOApEUbQLgiByHCfyPC9OT81E+gyMUqqoqipTSmVFUWRJkryDg4NfdXZ2dl68eLG9tra2c/qsRmDrLEJ3FeqVP2V4PduNWRa99LkkQIAAFCA0pZ3RY4xeE0idmpOTY83MzLSuX78+tbKyMr+oqMidm5vrdDgcOampqQ6LxWIXBMFqMpmsoihaGGNEURSfJEk+WZan/H7/xPj4+OjQ0FB/b2/vcFtbW199fX1vZ2fnxOjoqDw8PKx7gxHEbDCMe6jC7yUFxhiLxxBrOQZpIQm7EJqV05h625gb3ZiOm0fw9g6zldnE5ijGPWfhXqFXvnEztF5o2HXipuUcNRsrkTcUHY4RjP5cMPxdIOmX4RGY+ZmMMwjU8Gg8KGOEIRuK8eyGXhICQlcyTGOEe8xscEJy28KQNBLzQ4kEI9xDwkvgZBMSDEJXMgDRZaxMY5zhMROU8W8iNVtzNVV6JRu//TTs+Yy7qCVa/w+SVb5l2/X/uwAAAABJRU5ErkJggg==",e.hazard="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAKJUlEQVR4nO2ce3CU1RXAf+fbjTFREdC2IAX70Grk4dhBrLUqtlaG1kdGpNraarWVZ7KbVVo66tg4gmV8kI0bxOgf0vEP/2Aq2td0asfpUx2nVsAirfZh65gEFYKxiiS73+kfWSWw90vu3f32keH7/cNk77nnHs7dc797zr37QURERERERERERERERERFkWobUAzaSj0e64Br8x9tYhI/kHYGq2lXMcSrbUBReKwHVoz4JEU/9cDKKllUNOMuAjTJWcDTgHdIk49wnqT5UxXMKppD/xM1jbYTR+jGbLeH0q1LqKu0XaUwriaAvXwP5fRRJGbSwE0VsycExs0SpCs5kTg7gKPGEN2Hxyzp4F+VsKtUxk8ExOlibOcDNOBzf7nNCYtxMQGa5ErgYocuCzTB18plT5jU/BKkrUzA4yVgmmPXPoQmSbO3HHaFRe1HwHDC5ep8gCkoa8M2J2xqOgI0yZnAM0CsSBU+whckzTMhmhUqNRsB2k4c6KZ458M4yA1qdgLoJwWcEYKm2RxJMgQ9ZaEmlyBNMgPYARwdksr3yDFLuvh3SPpCo1YjIEN4zgdoJMaGEPWFRs1NgCZZBFxaBtULtY3Ly6C3JGpqCSpiz789/+8cS/nX8TlNMgy4W1ceaisCYqzB3vk+ynI8bgB8yz7T8LijOOPKQ81MgKaYix50yDIW3XIfT0sHzwEPOvRr0VY+52he2aiJCdDFxPCd9vy7GOSWD//yWQ30WPb18OjO5xlVpyYmgBNIAJ+1llfaZCP9H/wpGQYQVjmMOIe9tDjIl42qP4T1RqaTYwdwjFUH4deSZoFRV5KfA1+1HPpdhFmS5lVL+bJQ/QjwyWDrfNhHbpTnhNACvGup6yiUDkvZslHVCdAEX0G5zLqDcIdk+Gdg8/C3+U4HE5o14TB+GajaBOgSGhGn7HQHE7l3TKlJ3IWwzVqrkNEVoWbdTlQvAhpYA3zCUloRWmwuXkk7WZQWQC11TyfO7ZayoVOVh7AmmQM8j/3FsIekkyVOYyR4COG7luI5hHmS5i8uY4RBxSNA2/EYrvPbOv8t4txsati9kAm7FzLB2CvGauANyzFiKN26uKSzh6Ko/BK0h5XglImm5F7eMjUMNrB2sJ41pjbpYA/qlBvM5QSWO8iHQkWXIG1jKspLwESrDsLvSHOBGNbznkXMxedZQDzhnCmP8axxzARPIlxoaeIAHqdJB69bypdMZSNAyWDrfNhPlmUm5x9SuvBU6db5gUvaCuB9yzEnkCNtKRsKFZsAbWMhsMi+A2uli7+ZmnqzJBlRulCY0zuJVpOs3McrwI+sxxWu0BSXWMuXSEWWIF1CIw38FfikXQdeZoDTZVPhN/f1y5guw2cGh+7d3xNl5tTHC0sL2s4R9LMVaLI0+b8MMVPu53+W8kVTmQho5HZsnQ+Kx3KT8wHECzyubFTMiV0+f1iGfW4wgzpus5QtibJHgKaYjc/zYH015GHp5HpTQ08zzQhbRh0Pmqdt4QljW5KHgW9b2pHFZ55keMFSvijKGgHajpd/WNo6f3e+tl9A30UchYxdPBPIvHlpQHEvyyrgTUtb4vlzg7L6qLxLUD/LgLOt5YVVkjE7yG+0Ll1MH4qZSwuygd2oeYIDOJO9LHWQd6ZsS5CuYAp17MR+2/l7Oplv2na+tog5Md+pdJFDmHfCY4WlBQUhyW+AL1rqGiBHk3RZn7g5Ub4IqCONvfMHkYA9fzue5zuVLoDhPMFUWhBQYizHJTeIWVRhi6QsE6BJFgBXOnRZJ2l2mhp6t9EibqWLYYS5PQGHN7KelxHudtB2lbZZn7Q5EfoSpCka8HkR+LRll1d4mzmmbeeblzN1SNkJHFukOe/k4jRN31xYWsj/1ngrcKqVJuE/xJkp91ifuFkRfgT43Ia988FjRdCef2j4imKxzgc4JpY1lxYkw358h9xAOfGgmxghEWoEaIqZ+LyA7bZTeETSXGNq6m1moQq/DMUun0unPcHPjG1JHgG+aakqi89cyTicuI1BaBGgII57/j3EzeXinktoVC+8y7QidL2xOODYMU4KzOVuo3TIuUF4S1CCG4BzrOWF1XKP+cBE49yOWpcubMaaMZQ1lxbyZw3GA58AzqKf74RjWEhLkN7E8WTZCRxv2eWPdHKeadvZdxmzfc+pdGFLVj3mTftJYWkhnxs8Bcy31NUPNEknu0o1KpwIyNKJvfOz+LQE7fnVc1rGXIiLb14+ZLgA2ALWb1uZhIaTG5Q8AdrGfODrDl3uCnqI9W1nmbqULtw5s2+rubQgHexwcqpwtSb5cqkGlbQE5ffS24BTLLu8Sh2zTHvpNxYzJZt1Kl0Uy0A2R9OMnxaWForIYf7B28wO2kbbUFoEeNyKvfNBaAlKZHJDTqWLUphQF1BakA724TtdkT+JiU4P8MIxi+2oN/IZcmwH6i27PCqdfMPU0LOIBfj8qlhbikGEi6c+xi9MbZrkUeAqS1WD+JwhGV4qxo6iIkBByLERe+cPkDPv+V9bTAN+5X9Ap8qGvosCX/7RBgeuv4/BEQgPaJFf5uKWoDauw76cC8rqoHJuLOtYugiPE/2jzaUF6WQX4lB2EM4lYX3SdkhXR3QlxxFnJ/ARuw48x2TOlvbC33H1LmKmupQuwifrw9yPbynclWk7Hv38Afi8pa491NEUlFwG4R4BcdZj63zI4rHU5HwFUbfSRTmIexKQG7Tj47EMGLLUNZksd7ka4DQB2sr5wLesOwjrJc1WU1Nvs2PpolwoZ/VuM5cWpIMXweGilnKNJviSy/DWS1CYd2t6LuH4/DJmmz2Xm34PTp2ypXD5yN9pehH4lKWuwPMNE/YRsJebsXc+eLQEXmyKk6Z2nA8wyScgN3iQ91Cn95GezAT7g3+rCNAEJyNsB4601LtZOs2vDOttZr4KT9mOXUkULpq2hSeNbQk2I1xhqWo/whlBx6wjsTvoFjZi7/wBPFJBjVMf57fUwo8DXcnSSh0XYpet1wMbFfPN7pGM6QhNcC04PVhuqeT17koh99OHOlxXVM4nOfaGZdQJ0BSTEaet1Z/pYaOD/PhiMhvA/DuEANbrTaM/60aPgBx3Ax+1HCyHsFQ2k7OUH3fk85ml2OcGx5Fl3WgCgROgKc5FuM7aOqWzGj9yqzTSyXagy6HL9ZrggqBG4wRoO0fg8wD2O5XXyPJDB6PGN/u4FaxfcSAIG7XVXLg074L6+T5wmoNJ06njHa3ZV+NVnVOIsQoK32Na8A3XFCfhsx1oqIRlhxH7gdOlk7+P/LBwCRp+8XXk/PCph8Jzg4MmQNu4Gko/aI4IZD7Jgy8wfDgbuppjeZ+dwNSKm3V4sYtBmj544dSBCNjPHUTOrwQfo/7AL3gOTIBaX1CNKBU9cDlh5DPA9tWPESEyMgJ+XEU7Di9G+Do+4sPhC0bCtcBxFTfq8GA3sInJpV3mioiIiIiIiIiIiIiIiIiIiIgYn/wfm7XBpi1H58YAAAAASUVORK5CYII=",e.decision="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAJm0lEQVR4nO2de4wdVR3HP7ttt7uVvgu0sq1tqVQeLY8isTw0BUQsKSiiIqFqojEhWBXUajFqiTFogkUwUXkEHzESTUhbXxF8BKGhpEsrtKgElRYK2yJuC1tp2bLb8Y/fvb1zfjP37rzOOXPv7ieZZM/mzvl9z5yZM+fx+52BUUYZpT5tvgUk5K3AEmA+MK9yzAS6gMlAR+V3A0A/cAjYA+wEnq0cPZV0qSlrhZwIXAlcALwDOLagfPcAm4GHgPXACwXl25KcAKwBtgKBg2MI2AR8BpjuoHxNw+nAnUgz46Ii4o7XgZ8CJ1ku67D4bLJOBtYBlyb4bbWp2YG8B3YCLwL7kPfGwcrvJgDjgWlAN/KumQ8sBpYCxw1jZwj4GfBlYG/yojQ3E4FbgcPUv2MPARuBjwFzC7S9APgk8ADwRgP7rwCrgDEF2i4lFyAv0noXYguwEpjkQMsM4Drg6QZ6epCnrOVoA75I/bvyV8A7PWlrB94HPFZHWx/wXk/arNAJ3E98Yf8OXORPmkEb8FHk3RHXI7vJn7Ti6ELaa13AN5Au7jh/0uoyBbiH+BvoZo+6cjMB+APRQr0EXOhRV1JWAq8R1f9tn6Ky0g78mmhhHmX4rmeZOAvpcuty3OBTVBZuJlqITbjpPRXNQmTMo5tcX52Q1FyGvATDBXgEOManqJycQvRl34tMcJaamcjoOSx8J60xV3Q+0cHsg14VJeAnREfcS7wqKpYbiTbFV3lV1IBzgSOYYj/hVVHxtCHT9uEy7kJ6lKWiHdhG9L1R1vWWPMwG/kfJxycrMAUOAmd4VWSXr2CWt5+S9SD1APAHfuVYpxPprITLvMqrohCnYr47hpAl2FbnBswKeQZpur3zQ0xhG/3KccZk4ABm2b3PCrcTHTAt86rILd/DLPu9fuWIR0hY0G5as2dVj7Mxy7+XnM1W3jZvhUr/BhE2UtiKzHNVOR54e54M81bIZSr925z5NRsB8Dv1P32TOuMYzN7VQUo4YnXA5ZjN1l98CVmqhDzmS4hnpmFeh/3keI/mabIWq/T2HHk1M/sw3yNTkOmVTOSpkEUqvSNHXs3Okyp9etaMxuYQcYpKP5UjryyMBc5EPBSnA68i6/VbkbVwl2wHlofSpyFL2E55CrPtnOvI7qnAj5EKiPMMGUA8XS5xpAdkmSGs4Q6Hto/Sq0RMtGxvDDLNPUh8RcQdG5A23TZXKLs/z5pRniZraujvQWSNwBbtyFNxbeh/h4E/IeswBxAfsEWI493kym+uQNZlzkOmyG3xX5WeYdFWLBMw74j/WLb3VWXvPmBWnd9OBL6B+SRtsKzvbUrfNsv2IsxSAv5p0dZJSPxG1da6hOddjen9YtNldQbm9dhl0VYsx+OuQr4fsrOFdCECYaeL+4uXdpSpmNfjOYu2YpmiBDxvyc4YJFYj63rDktC5/djzJT4O83r825KdunQqAS9ZsnOWspF2INuG6ZCQeQQ9DG/GvB5PZ80o60j9sEqPzypgGF4Ffo9MTWxEJjPTEAAvh9K2ej+6tzpoyU5DBqjdEa/7EJCQ/dR0zrdkYz7mE/JE1ozyzGXtD/09HnNcUhZmURuTHMFeIKd2lT2QNaM8FaJf5HNz5GWLD1CbCn+UWrRu0XSr9Iuxv0pAK1fIm4DVofQvLNrSFbIna0atXCFfo9ar2gncbdHWCSrtpUJ6VXpujryKZjnwhcrfAfBZpBNii8IqJCuzic72lsVBbh4SylzV9R0HNv+MeS224TBAaRwSUK+nusvgz9sJPE5N0ybcRPpuIHo9bL6zDNbEGF9HOfxa76KmqQ94iyO7XcjmB/q6fMi24elE/Vl/ZNtoQq6hpmkIeI9j+x3Aw5jXZjf2ZjEA+Loy+BzlCOZchBlT7iuAZg7RG/ZTtoy1EY2JKEPIWifiZFDV9Ef87uKjb9oeW4bOUYb6sPw4JuTT1DTtRdZqfDINc0EtQPaMTESaF/G7VHo9dvv2Sfl46O9vYW8pICn7iPr7Jl6tTFMhZ6v0QynOtUUHplPael9CFA+o9NKkJ6apEL0fofbW88FkamsRR7C3cpmWrSq90IYRvQlLGaJOZ1PT49pbsRF6jT3x7G+aJyTcvQ2w64eVhcC3gBBVr8oqiZ0I0zjKDWBWSgf+Vwr3IUFC4/EwodeADpXWS96F8ATmYzgSQp+zsgDzWv016YlpmqzdKn1OinNHGjrOMPGW5mkq5BGV/mCKc0ca71fph20YmYcZU3iYFCPQEcQcoiN1a1uYb1aGfmnLUELOAL5UOVZTjh3e7sa8Ro/bNLZMGQswQwRcc5vScrVHLSA7d+v4lcttG31QGexHopp8oCvkI550gHzj5HmlZwsOdrZYgOkAHSATejrm0AVlqZBJmEvH1Xdsrl0d0nAV0aZrDxKp5JJblQYfPb+ZxO8bv7rRSTbQCzEBMpr/HO4WiI4FLq4cFyKLVS5ZSrSZqjo4ePEx+GaMmGrb2QzbiWelG/Gy0fsTB8haiJ46ccrnqf8Ziu046GU4ZBmy41G9SOD7EA8U71xE/Gceqo4QrbCHVhtSlrgyDiIbY5aqnFMRvyi9d29AihWzEnMu8ZXRQ8k3i16MeAyGRSeNnC0zd2CW6W9IN7spvlN1Kab4vZSkbc1IFxKLHy6Ta0e8XIwluuR7vVdF+ViFWZZemuTJCHMTZiF24X6cUASdRMcaa7wqysgkzIDLAAmiaTbWYpbhFdxsaGOFtZiFOYjMhTULeluPZr2pjtKF7GqgR/FeR7IJGUd0/WcXErvY1OgvJwTILG3Z0d3cgBJsJV4U9xIt3HVeFTXmeqJ67/GqqGAmIAMpPd1Qxs8FfZjopOEOWnBP4pMxgzEDZFLyGp+iFCuJTpT2Yck3twycj/S0wgUeQtZQfHMj0SfjNWQOq6VZQbQrGSDvGR8Dx06iX5cLKhqXNzivpVhGNBavOmF3pkMdpxF1ka0+GS63mS0F5yHOEXF35lrsPi2TgFswt5iqHntojeWCTMwh+rm96vEvJM67yEWfMUhUbL3FtB6iG8mMOLqA24lf2AqQCruWfAGmncjH68PRuuHjCDJYbcbJT2tcAjxL/AULkPWIW0i3K9yJSCDoyw3yfQbxWhklhi5kE+RD1L+AAfAP5KlagWxi3FU5Flb+d3vlN43y6EO62y72Qml6uoE7iX6duYhjAPguEk8+SkpmIp7t9bw90hy9SPNla6vYEcVYZN5rI/Hjl3pHP7J10pXk+/CAM0rlR5SQcch0xrsRD5dual3VFyrHk8j3eTcjc1OjjDJKS/B/+/QdvZ909d8AAAAASUVORK5CYII=",e.landmark="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAAEf0lEQVR4nO3cTU8bRxjA8WddBKkgH6BSVfUb9JSPUKnqB+AYKcUJxwoCJS+0uG820Cio5BKh9hCl6aW3tE0r9dCSYhtsY4yJnRq7OLFbB+OYuN5d7+7szk4P1SJTiirv7K537fkdDZ4Z/Q/WwywAwDAM07+4Tt9w6eoSOe1rK6GJjtfzugEzb3r7rTdPvPbgx5+oD+NFvm4fwOtYQEodf2Zd+eyLUz8DzwwNbksKen9hauw74LhTv6+XmAp47d2xE68TQqDwpAy/rCUEXhDriqrNDQmle4FAQLPkpC5lWcB25UoVVqPJ5v5BTdEwDkkwcntpclQyfUoXsyWgoXpQh4cbSaFYqhAAfXkAuBuBiQuNjk/pYrYGNNTqLyC8kZLyxacEA3cHQPk4ODH+rNO93ciRgIa/mgJEN9NSOrPLAcfd14h2fX7SXzC1mEs4GtAgtiRIpLMotpXBLwH3QFG1D0JT72SpFu2SrgQ0IKTCViaHw7EthRAuJqny1cXLF9ctWdwhXQ1o0DCGx7tFshqOt5CmFbw0S7oioIEQAr8VnsDP4URLVpR9SUIf7r1+9t43o6PYlg0t4KqABgIAhWIJVqNJsdHgBRWr80O873YgcEG2dWMTXBmwXblShV83kvyflQOMdX0R6QPLN6bPi44d4H+4PqCh+vwQIrGUkC+WCYC+LBL95tKk/9Dxg/yLZwIaGk0eovEd6VEuTwhwd5GCPlmcufhHt87juYAGsSVBYjuLYqkM9gF8L8na7OLMWM7pc3g2oAEhFRLprBZNbGsEuChC8sz81KW4U/t7PqBBVTVIZXJkLbYlaVjPIaTOLUz7v7V7354JaMBYh+zuHlmNbIqKivZkBc3aOZT3XEDD0QVvOCHwvH0XvD0bsF25UoWH68nms2oNaRgHrbzg7YuAhupBHSLxbeH3p2VdJ/otKy54+yqgoVZ/AWuxlFzYKxHg4A4mykdmL3j7MqChyQsQSaTldCYPHAf3VRMXvH39XHhkZBhee/WVM8PDL+vg486BTs51uoapX+3wuqNRJ5oQFaRSjTp9FdC4AY/EUgoBiCmSMht6zx8GAIBpv6k1+yJg+zMYH+F+UFU0F5z2P7Ji7Z4O2GjysL65I+08zhPgfF8hSf504cp4yco9ejJgtfbPvJcvlgnhyC295bsZuna+bsdePRXw6CeO/RrSdBxEeGDF7ttrzwc89jOvINYVpM3Vz6pfr4yPq07s79mAVo4iNDwX8NgoQiCuyMp12lGEhmcCGqNIPJnFHIClowgN1wc8MYrIkuWjCA3XBnRyFKHhuoDdGEVouCJg2yjC84J46PQoQqOrAd0yitDoSkC3jSI0HA3o1lGEhiMB3T6K0LA1oFdGERq2BPTaKELDsoBeHkVomAoY/PzL/3x9aHAwLSPvjSI0Og54eMif+gfXK6GJNwDAc6MIjb5+LmwFFpASC0iJBaTEAlJiASmxgJRYQEosICUWkBILSIkFpMQCUmIBKbGAlFhASiwgJRaQEgtIiQWkZOqpXL/+x16GYRjmuL8BujV+3sKfOScAAAAASUVORK5CYII=",e.poi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA0YSURBVHic7ZxrcFzFlcf/3fcxGs2MpNHbSLItG5AJibEtIfmxWSJjp9YFdgi78CGuFDFFUvshGwIhZLOPrIvKPtjAVliKbAhV2bAphy0egSCgXJKMVVnHGGswfgB62EiypPHMaEYzo3nfV/d+wKYc0OPe8b2jpOLfV3Wf0/PX7e5zT5++wFWucpWr/OlClnsAAHD4C18QywjpopK0SxCELYzzNs6YH5x/ND5COIAEoXSYGcZRZhgHFcaOdw8M6Ms78mUW8K3u7i4iSd8knN8hezyGt67O462qEl0+H2SX6/faqoUClEwGmWRSz0SjWTWbFYggvKRp2lPbDh0aXKafsDwCHt2+vVOUpCcJpZ+tX7OmzN/URCW325INrVBAIhhkkXPnFDB2imnaNzcfPvyOQ0NekJIKGNi9u9xQ1ScJsHdFW5tcvWoVoZRekU3GGGYnJnh4ZEQFIf+jp1L3b33rrbxNQ16Skgl47NZbP0NE8XVPbW39qvXry0VZttW+riiYPHUqm5mdjRjAbVt7e4dtdbAAJRHw4lrX13TDDZ7a1auv7JFbguj4OAsND2d0w9hRirXRcQGPbt/eKUhS/+r2dl9FXZ3T7gAAqUgEE+++mwZj27v6+gJO+nJUwCPd3W2SJB1fvWlTRUVDg5OuPkUqEuETJ06kOOc3b+7rO+uUH8emU2D37nJJlg+uWLfOV2rxAKCioYE0trVVUEE4eHTLFmtbvAUcE1BXlB/7amrq61pbly3WrG9tJZ7q6kbB53vcKR+OCPj2zp0dhJCvttx0U7kT9k1DCFauX18OYN/vdu7c4IQL0QmjoPQ/r2lrk4sJVVLRKOYiEWSSSeiKAgAQXS54/X5U1dfDZ3EjEl0uNK5bJ0dGRp4AcIvlAS2B7dPrWHd3Oy0r+78bd+xwWwmSC+k0Jj/4AEySUHX7Hng3dUCs8gMAtGQC2RMBJHpehWjoaLnxRpR5PKZtM8PAe/39ed0wtm7r6ztp+Uctgv1PoCzf37BmjWxFvEw8jomTJ1F7z72ovn0PyCf6CpWVKFu1GtVfuhOJV1/BuV/+Aq0bNsBTXW3KPhUENLS2yuGxsW8BuNfKz1nStp3G3ti1y0U4v9Pf3CyY7aNks5g4fRrNf/9PqNlzx6fEuxxCKarvuBNNf/cDjJ86DSWbNT226pUrBcLYXe/fdZetr0C2ClitqltdHo8ulZWZ7jM1NIT6fffBs6nddB9vewfq7tmHqWHzb2tSWRlkj8fIxONdpjuZwFYBObDDV19veudNR6PQBQH+XbdZ9uW/bTc0EGRiMdN9Kurq3JzSnZadLYKtAoqyvM1TVSWZbZ+YmYF/zx0Asb6XEUpRvedLSMzMmO7j8ftlURS3WXa2CPY+gZxf67KwO2aTSXg2mp+6n6R8YzuyiYTp9rLXC4Pz64p2OA/2CmgYfivrn57NQqotPsEg19VDzeXMt3e5wBnzF+1wHmwVkHHuoqL5yIhzDlLE9C0WIooAY+b/wyawVUACMM656faS1ws1an4N+yRadAZyuYW3Rc7BAfMDNIGtAlJBSBuqarq91+9HJnC8aH+Z42/D6zc/Iw1VhSAIqaIdzoO9yQRC5nRNM928qq4Oidd6wBmz7IobBhKv96Cqvt50H13TQChNWna2CHZnY0aVdNp0Y19dHSRmIPHqy5YdxV9+ERIl8NbWmu5TyGQAzkcsO1sEe3dhXT+UTSbNz2EALTfcgOgvn0X2HfOZ90xgELHnDqBl3TpL48smEophGG9a6rQE9u7CwGA2HjcfVwBweTxYfdNNmP63H2L21VcWnc6cMcRf+TWCj/4zWjdsgJWYEwBys7N5Bth6RmJrNqac0sFcKuU2dB2ChXDGW1OD6zs7MfXKS0j+5tcfpbPab4bUuAIAoIUuIHMxnSUT4PrOTmu7LwBD15HPZMo8hNgqoO1B2OCuXQMt69ffUtnYWFT/dDSKZCSCdCIBPZMBAIheL3zV1ahqaIDPwpp3OXOhECZPn36z8+DBW4sysAC25wOZrj83Fwp1VDY2WptfF/HV1VnOOpshEQpldE37ld12bT8TIZr2m0QoJDDDsNt00TDDwFwkInJB6LHbtu0Cdg4MhIkgvDUXDtttumiSoRAXKP3ttt7e4l97FsCRUzlDVZ+cnZiwNeK/EmYnJtKGrv/ECduOCKgw1pNLp418avk1zCWTyKfT2qTf/5oT9h0RsHtgQOeG8dTM+LilmNAJomNjWc75T+5+4QVHFmXHKhNEXX8iGQySS2e7y4GWzyMZDlPC2BNO+XBMwI6BgRil9Ofhs2eXTcHw2bMKBOGZrkOHZp3y4WitnmoY/x6fnGRWUlx2oSsKEsEgo4w95qQfRwX8s/7+SVB6IHzuXMmfwvDoqALOn+3s7Z1y0o+jAgKAoCjfj50/b1g5BL9SCuk04tPThqBp/+i0L8cF7BgYiMEwngp+8EHGaV+XCA4NZcDYkx0DA+YPjYvEcQEBIG8Yj2RiMTUbjzvuKx2LIRuLFQS3+xHHnaFEAnYPDGQMxv5m+syZNCwcOhVD8MyZtGEY3+ro6SlJDFoSAQFgS3//c1o+P54Mhx1TMHHhAlcVZXzLm2/+r1M+PknJBCQAVznfGzxzJmfl4MksuqYheOZMjqjqV4jNR5eLUTIBAWBbb+97HHgpPDJie2AYGhpSGSEvdh4+/L7dthejpAICQCGd/vbs1JRi54aSjccRDwYVNZ1+wDajJim5gJ8/ciTBGfve1KlTaStVDAvBGcPkyZMZzvnDnz9yxHylkU2UXEAA2NLf/19aoXAicvbsFU/l8OioqqtqYEtf30/tGJtVlkVAAODAvpkPP1Sv5A2lkM0iOjamcs5trXu2wrIJ2NXbO06Ah8cCgXxRpR2cY+L48RyAh7p6e8ftH6E5lk1AALi5t/enej4fiJw7ZzmuCY+OqpqiBDr7+n7mxNjMUpLivOefP+rOe6V1BLSZAo0AXyEIpAmEtErJREvzfz/edn1XJ3FXVpqyl0smMToY4FP3PjisV/inCefjhsGDnOICZyTCwabdGW347ru3On7x2lYB9+/ndO3mdz/HudFBKL1RoqSDgVzPDKNWEoW8LIsokyUqS6LLJYmCLImQJQH8dwPA6y+jratr0WsOwEdTd/jYMdDb7wS23gJVM6BqOhRVN1RdVwqqxlTVgKbrbioIMcoxojEjQBh/3yA0MP72pvf27yfW14wFuCIBnw4EJM8M7wQhf04F+heMsQ5ZFNUKr5t4y12+8jKZustkuF0SCF3cVeKxf4UvPYdrrlu8hDk4OopspR9V3/nbRdtxxpFXNOQKKvIFlWVyhXQ6W+CKpsuU0kFmsIOcst82y9nj3d3dRX/9oygBn31jcKMsCt9gnH9FFkXir/TI/kq3q8JbDlk0fcfm92CFAuLfvR9Nq1ZiobKQuVAI05NTqPnRE6AWarEvR9UNpNI5JFJ5JZnKqYqqcSqQA0zVf7b3tk7L18BMC/h0T6DcI5FvCJR+RyCkuqG20tVQ6xPcZfZd/NHGPkT8hz9A2+bNnyoeUnM5jBw7hup/eATSmrW2+cwXVERiaSMym1QYR8xg/HFprvCM2fVzSQH37+f02i3v/DUFebTSWy62XFNdVul17P4yMi+/AP3wIVzX0f7xesgZw+jgIKTtX4T3y3/lmO+5dB7nQ/FCKp3TCMd3R9/e9MxS6+WiAv6qJ1DLZfq6t1z+zNrmeq/Pa2uB+/xwjsSP/gWeVBLNFwsop4eGka3yw//Q94u6lGOVVKaAD6dmMtmC8p5O9dvv2dG14KnegqM58NppP5WME00rqq5ZtaLG3m+ULAHLZjH7vQfQvGolQAimJydR++iPQSx+nOdKmQjOqsFoclrJoH3flzfOW1u9YMxAZeM/6ut8JRcPAKjHg8oHHsbk8DAmh4ZQ9e2HSy4eAKxuqpHr/d7msnK+4NHogvWBjLG/XNlYXXLxLiGvvRa+vV8DAFs3DausXFEjR2bTdwG4b76/L1xgSQlx+PhiScq371jeAQAAOD7+itw8LDyFQV6cDMdLX1LwB8b5UFylhDy/0N8XFJCpwoPRWPrC+Quzqh2Jzz82OOeYCMbUaCIzXciRhxZqZyqMcZdJn13bXFdeVbG8XzEpFYlUFmPT0Vxe0U4XHcZc4vJA2utxC6ubatxOBtLLyVw6j/ELsXwmU9BtCaQv5+meQLlXxn2UCA8SQmoba32uxtpK0c5XueUgX1ARmU1poeicyhmPGpw/JqeUn9v2Kjcfz74xuFGk5OsgZK9dyYRS8alkgqYzDnaA6OwZR5MJ82FnOstu/qDTWQtRbEJVkkQQAgiUglICSigEgXx8m51zDsPgYJyBMQ6DMXAOaJr+x51QNcullL4g0CbGUEuAOgLeIklCC4AGzkktAJFx7gGYzDhkMO7igHBxkAYoUSiBClCVEpLlnOuUIMYIwoZmTHOQKQ5ECeFRxviFUqX0r3KVq1zlT5n/B4HKFM4hiX7YAAAAAElFTkSuQmCC",e.staircase="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAFfgAABX4BPgLDIQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABTESURBVHic7Z15YBTl+cc/78xsSDbZ7CYoIAJyCRErqKCGHEAUFUFQqq3W++dZLR5VW+tVRWs9ilWqLWqrpfJTq2Bp8aKCRszBZeUwyCEqqIQzJLs5dpOdmbd/TLK7OTbZZA8S7PefZOd43nfm+77vc7zP+46gm6Oy0OVSbGaWkMooU8gsgRgFsp+EXgLsQBpga7zcD9RIqBNQjxC7pZSbFSm2SMxNRoq6JXNcpfvQPU3HEIe6Ai1RsSpzgObXC6QQEwVMAobFuIjtEj4SQq6wCVuhPadiV4zlR4VuQUhNacYJumleLmAmMDyhhQu+EPAPIdUFjryDmxJadpvVOUSo/dh+lCGSLkHIyyWMOVT1aIH1IF5W/f7X0gpq9xyKCiScEE+pIwupPCQlFwBKosuPEH6E+LuQxiPpedVbE1lwwgip+th5slDFbKScSvcloiVMhHjXFPw6I6dqXSIKjDshFasy0zVDfwgpZgFqvMuLE3QpmNvQkPRgn4L9NfEsKG6ESIlwFzuvE4JHgcx4lZNg7EWKX6bnVS0QAhmPAuJCSMWqzAGabvwZmBIP+d0A72rYrkvNO1Aea8ExJ6Sq2HmRgBeA9FjL7mbwSMm1rnz3wlgKjRkhsnRAikfWPI+Ul8dKZk+AELzgcLtvEVOpj4m8WAipWZXa19C1xcD4WMjreRAliqnPdEyo2R+1pGgFeEodWdJUlgLHRCurh2OHwJwSrd8SlT/g+diRK02lhP+RATBYopR6Sh050Qjpcg+pLHJNUoRcAjiiqcBhCI8ixHRHbtXHXbm5S4R4ijPyTMz3BaR05f5IcaBK8uLiBpaW+vl2jwnAwH4KU3JsXDMziSNc3SI22hbqhGKemZ5TXdrZGzv9RJVFrjGKkCsAZ2fv7Qz+8YGfWY95qfW27X+lpgie/VUKPzzD1ub5boAKRTXyHeNrNnfmpk4RUrnSNVgxzBIQ/TtXt85hyQo/V9xXh2zkQlHg6D4KQsB3e01Mq7MgBLz8GzszJnZPUiTskkLkZuRW7Yz0nogJkYUke2zOUuCkLtUuQhx0S8ZcVI2nxmLjx2fZeGRWCn0yrarur5Tc+6yX1//tB8CZJlj/uoNMZ7cdvtamZ7jzxPE0RHJxxFaW2+Z8hjiTAfD8m/UBMi6cbOOF++0BMgCOzBC8cL+dH59l9Qp3jeS5RTHxyeKFUzyVzqcjvTgiQtwl6ZcJuLbrdYoc7xTpgDVMPXxTMiJMw599YzKK0vyebowb3cXpl0RyYYeEWBNKYl70dYoMO3dbCmJwf4X+fcJXr/+RCsMGWOe/3mUmpG7RQTzvKXaM7OiqdgmREoGpzMPK7EgI/F1o7DIugfCYI02iPNvRRe0SUl3qulJamR8Jw/CBVpV2lJuU7wvf8sv3m3z5nXV+6ICeMgHJZHdJ+mXtXRD2STyrHb2llHNiX6f2ceFkS1mbJtz/J1/Y1v/APF/A/J2WryWodjGAFHMqC12ucKfDEiL9ysNA77hUqh1cOzOJ3o0m7KLlfq5/uI59B4Os7K+UXP9wHW+8HzR7f3phr0RXMxr0VWw8FO5kmzaMe0X6sajic+CQNL3i9ToX3F6Lr9Fy76mOYTvwS0mWK9/9VcsTbRNS4no5kRNN3+4xWVNm8N0+EylhUD8FU8KDz/kCMayWyEgXPHt3Cufm9zgyAJCSv7ry3Ve3PN6KkMbesZk4ZYjoBpRtN1i10WB1mc6qjQbl+1u/dEWBYwcpfPmtycB+CuX7TBRVcNwQhXNybVx/QRIuR7f1ziOBXxqMdE10fx16sNWQJBTxCxlDMqprJWvKrJe/cqPBfz43wgYMQ2GasHWHRZSnRvLaY6mccVoPUt4dwyZUfgncGHqwWRNrnIrdCUStJYs+1bn/Tz7WbzXa9RN6OwXZozXGj1EZNkDhoFtStt2kZINO2XYjoC9SkgUr/pLGyME9xsSNBD7FNAaFTv02a3Kmrl1ODMgoXqcz8/baNp28wf0Vxo/WGD9aJXu0xohjlLDhkfJ9Jvf/ycei5X68PsnPHq3j/XlpgZDJYYBkU9EuA55qOtDsVbiL08tAHB9tKQXX1fDpZgOArMEKE8dpjB+tkT1a5agjOvc2fQ2Qd1U1X3xjdZXHbk3mxh/1KDO3I6xz5rlPbvoRIKSyxHWiImXU+atrNxlMvsHKthw1VKXor2lobWikmjrJN3tMRg3tWF2VbtCZdnMtpgn2ZMHqBWkMOurw6SaqooxOy6n8DEIcQ8U0Y2LmvvTPYNj/+guSAmTsPmCyaLmfXzzlJf/qGgZN8TD+ihoe/rOvQ5k5YzSuPi8JgDqf5JYnvD0lfhURTGle2vR/sJkJcV60gg+6JYs/tDxoR6oIzFn8q9DPCRdWc82DdbzwZgMbtxkYjcp681eRRWpn35jMgL5WdQvX6rz6XkTzPT0CUhJ49wpYU7PEYOnYK+814K23mu5PpthITbFGxEdfqg8bxc0ZE5mFnWYXPHVnMKfinmd87D7QmkyvT7J8tc78JQ2s+ETvKT0pq2JV5gBoJETVOT1aiVI2H66uPt8aYlZu1Nn8taXgR49QefsPqYwfHTTuJmdH7mmfNV7jJ1MsuVXVkjuetIY7XwO8XeTn6gfrGHpuNRfcUcutT3iZcVstZ91Yw56K7s+K5jdPh0ZCpKAgWoGFa3W+agyH552ocdwQq+XP/1eQpJsv7sW4USrrtljd5eg+Clnt+BW79plMvqGG839eG5jWfezW5ICl9k6Rnx/eUcvw6R4uvbuON5f7qfM1f/lrygwuu6c22seLP4RZAAEdIidGKy+0d1wz02rFlR7Jvz6yXn5GumDGJBtF64xA0HByB573XxY3sHaTQeFanbvmWr3B5RDM/WVw6PpgtU51bZAEl0Nw6dQkHr81JTDjuHaTQdl2I9pHjDPEJACtuiStjykZGI2oCrfkvRJLmffNFExvjL6+tjRUpySRnAQfrPEH7jvj1PYJKfo0qHhefa+BGZM0zsm1cXaOxuXTkljwjsVsplNwbr6N8wpsTByrYWsU62uQPDDPIvLbvSY/GN6tF3AN9qx29NaktI2A6Oakd5ab6I0NcEqeLfBC5i8J9porZ1i95oPV1kvWVJh0SnhCauok67Y0b9W3PeEle4FGRrpg7l0pTByncYRLkH+y1srXcddI3ikKkj+wbw/wW3RGaGB2OPHeEYYPVFAVMExYWuzns5lJrNtqBIKD40drZA1W2LnbDHjcY0epONPCR2tXbjQCJAthGQ17KiS/eMrLXx6woyrwozObGwRen+T9lTqLC/0sLdXxNuqTUUNVjh/WrXtHI9SRmgkjow1ip6cJrpyRxEv/bGDvQUne/zVfF3nbZVaoo6l3AEw+rX3rqnhd8Nr7r0vmdy/X4/VJFi7zc16Bn+kTrPu99ZJlTSSU6K2Ueka64Pn7UsLGy7oVpBypITg2FssXfzsrGXeN5M3l/mbHrzg3iSk51tAUSkiH+qORECGs4S49TXDn770AzHrUy8oNBrsPmPy7VG8znG9PFpw7QWP2jcn0P7IHDFcWjhXuYudKIDsW0qSEd4v9vPxWA0IILjrbxvkFNoSw0nuGTPNQXSvJdAq+fCs9bNS2ulYyeKoH3YDjhqisWpCGlHDZPXW8XeRv+yYsC+ucXBvTJ2qcfqpGSq+e0C1CIUo0kI5YLTUUAqbl25jWxrTq6rKgeVpwitZuCD1Uf+SdpAZkP3dfCjf8hmbKum+mYNoEGzMm2sg7KWhh9UQIpEMDkZAkuM4MV6H6IzQa7EgVvPqonW/3mHy9y6RPb4URg5TDZn5EgkMjQSugNm4LmrATx7ZPyMqNQUJ+PsfL7Od9nHCsygnDVU7KUjk7R2NCBzJigb8taeiUej12kELuiVHVy6GRoDTRfZXWo/WyWSGT9jCwn8KasiCBVdWSok/1gKPYywZP/DyFqxp9m3jhtjnewBRyJLhyelJMCEmI5ktrjPz6DfDVS1KSwxf73L12Lj1HZ90Wg/XbDDZsM/hmd/DN1Pvh1ie8pPSyDIfDCRpQTQL2IjkpS6V0g45pwivv+bl2ZvjWnWSDM07TmmWZVHokG7YZLC3ReeHNegwT7nnGy4Vn2lDjrEOOOUrhoZuSI7ouSlQnjJALzrDxx9ethTV3Pe1lZ7nJaaNVjh+qcsxRHSvmjHTBpHEak8ZpeOsl85c0cKBKsqZMbxbOjwecDsH5BQnpidWahOpEjFlfhazh0A34w2v18Jr1254syBqicPxQ1fo7TOW4oSr9erdds7GjVOYvsf4v224yfnS8a58YCKjWhNVD4o4lK4K+g6YS8DPAmif/dLMRyFRpQqZTMGqoZVXd8pNgpsmwkOUH27/t7mH1yCGRHk0K9oo4T6h5fZJlqywLyeUQlC1yULrBYP1Wg5f+WR92Ru+gW1K8Tqd4nc7Y49SABTNsYNA32f5N5yPVbxf5OVDZ8UMnevpXIPZqimRLvMtdtioYeZ2So+FIFZydo3Fmtsa8hZZecTkEb81N5bPtBp99YTb+NXA3zhR+9oVJ7omWvL6ZgjS7oKZOBhbtdAa/X1DPfz7vfj1LSrZoCLEt3k1hcWFwuJoxKagcN2wzqPRYZU8YqzF6hMroEcHWv2yVzoV3WtOvX5cHX6AQ1rC1YZvBzt0mvgZIjq9LkiCIbRrC2IqMn91Y6w0OVym9BAUhk1JFISGSvDYcqlAzcmd580YztJEQ07QmyLqa8zv/IXuHofn25m1iC3OrhsrWKCcMw8Lrk1x0V10gqHj6qRr2EIdwxSdBQiaMbT2BdEx/yxw2TWvNYSiGDQwS8OV3RpcJOW+SrdvEwkxd2aqkn1ZdAXwba+Fen+THd9UFwh0pvQSzLg6OK37diuqCpROyBrcmpJeNQIbJjt1ms5G1uaXVE5ZFd4gdGQVVVU1pQMtiKdlbL7n4V3V8/J9GMpIFrz9uJ2dMcFhaUxacWMo/WQs7bAzpb714r0+yN2St4bABIZbWYUCIkBYHmvVDfgii1fKqrsDXAJfcXcdHn4SQ8ZidieOCZJgmzH01uB3G5OzwnvbgoxWK11v/7yg36dfbIqLZkNVIyMqNemAevz3sj8DkTTRMwQfQSIhm6h/qik0SZaDR1wCX3l3Lh2uCZLzxuL1ZqNw04WePevl3qXXNkRmi3UWbTT0ELEKyT7AIOcIlcKYJ3DUyQMjCZX5eXNwjc36lKoxCaEyUS51QtxuIaq/Aej9cdk8ty1cHyVj4RNtkNCVK2zR47j57IAe4LQw+OoSQFltoDOxnndtT0bOHLAmbHLk1+yB0BZUUryPkA10RWO+Hy++tDZi39mTBwt/ZyTupfTJefMDeYfbiiEFBQj75XKdpgVe9n8Bi0bYWfz5wQ3JEOzx0h2wUIeXrTf8H3oZU5AIh+TVdGLbumBMcguzJgoVz7M38irbIeOlBezMnMRxOOFZlyNEKX+8yWbZK595nfZw4UuW1pQ0cdFu6oC1SJ47VGDuqJ+RiYZqKsqDpR6AJuXLdXyLFys5KK9tu8P/vWi861mSA1YIfvSW4FdOzf6/n2tl1gTn6NLvgnms6nqvorpBQHLrjXLM+LYVc0PqW9rFsVXANxr3X9mpFxk2/7ToZTTgn18a8e+2thqb+RyosmmPvSZvPtIICzd55s76u2MyF0q88ifWxrYhQXRc0IUPX/Rkm/Oy3Xl5bGh0ZANt2mvjqJbde0osPVut8t8/k+GEqBadobN1hsnWHVcbWr3uccq81JW+GHmhGSPpp1RVVJc55QnJHpBJD03T+8Go9OWM0nGmCmx+LDRlg+Re3PuFtdmxHudksP6snQkr+6Mp3V4Yea6UNtQZ9jm7Tbop0T95peRp9MwV7D0rWbjIYeZ6HXkki4IXbNHhpdo/cICaukODVbPrvWx5vRUhaQe0ed7Hzb8BPIxGckix4+ZFULr6rlkqPRDdAbyQjJVkw/yF7ILc3FrhyehKnd5BoB91/UzOBeDEtu3Zvy+NtP5kin8QU14Y93wLZJ6isfcXBYy/5+HCtZf38YLjKXVf1ivkimTEj1EQlHMQTfmnIVr0DwrxwZ45ne1Wx82kBd0ZawpEZgifviOvO44cNBDzpbLELUBPC9usGf9JsIfkuftX63mJHTXLqw+FOhh2S+hTsr6kqct4u4I341Mtam/jWio4tpZUbuv2+vBFDSHF7/3HldeHOt6sjnHnuRdUlzo/itTPprr1mK3P2MMfy9Pyqxe1d0K4pIgTSr6mXAwdiWq3vJ/aofr3D/WQ6tKJ6Zx/8zl2cfgWIt4njFzonjNW45vyOU0fGjOgRAcOWMKTg0ki+rxuRWevM87znKXY+LuHu6OvWNob0Vw4HczYMxCOu3KoPI7ky4hbvSHY/AKKk65X6fkLCx+n+qrBWVUtETIgYh99IFtMEbOxa1b6XWG9o6nRRQMRmYqd0Qua4SremaFOBbzpdte8fdmrYpvXOPujpzE2dVtL2nIpdCupUoLLDi7+/OKiYxtSufCv3f5/Niz0S/9m8JlR/nDbKVNSlEN1uQocRvlFUY0pnv8wWiqj8CseEms81bNkSPotGzuEAARs0bOOjIQNi4Oil5h0o1zT9TKDTCRKHD0SJMI0zY/F99Zh43mnZtXvTy935SDEb6H4rYeIHQ0p+lZ5blR+LL0VDHNaoVxa7ChR4BeRRsZbdvSDLFVO5xDGhakUspcY8NpWRV1Woa8qpwNJYy+5GeFcj6ZRYkwFx3sXBU+Q4VwrlGWBwPMtJILZKwU2uXHdEcamuIK6ZAOn51W/rmjoGIefSs3WLLgVP1vuTxsWTDEjQPicANYWp/cwk7TYpmQWkJqrcKOFGiqdVm39eWxki8UDCc789hY4jpKbOQsibScCWHl3EQaR4RiQZzzQu+UsYDlky/sFPMpyK17xICK4Cxh+qejSHKBHI+X5NfaOzQcGY1eBQFNoS1vd2lauk5AJgeEILF3whJIuQ5vz0/OptCS27zep0M1Ssyhyg+fUCKcREYSVXRP3VhhbYLuEjIeQKm7AV2nMqdsVYflTodoS0RGWhy6XYzCwhlVGmkFkCMQpkPwTpSJFmbeIZ2BWvBkQ1QtYg8SDEbinlZkWKLRJzk5GibskcV+k+lM/TEf4LUCv274bICPEAAAAASUVORK5CYII=",e.ticketGate="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAADiUlEQVR4nO2cv2sUQRTHPyZGQ7QQUbG4axUUUQkWoqUgFloErMUUWgqC2IiCBFHwH/APMKKNYJFGEIKJlcZfhKBCCjH+Nmo0aiTJWcwcN3fs7e3evJ3dw/eBI5e3c9/35mXuO3vcbkBRFEVRFEVJwaoO0SwcW4HLwIcMtGeBa8DODLRzpRc4DowBFechjas9ZnP2ZpDHizJwA3gLzADDQClm/AAwTW1i38i+gW6OaVtDM9LOx4sS8Jn6v3TFxqKSXnLGTADHgD6yb2CfzTXhxIYixqedjzfDNsGITVCyzyv2mMuQjS8AJ4Au51jWDazSBZy0NVSAiw3j08xHhBkrXnZiZRubcWKHgGVb+OEInVANrHLE1rIMHHTiSecjRpKEG4B3Nna6iU7oBgKcoVbnehsL3kB3yZfto7rkr9sxV+3v96h/27rk0cAuYNQev2JjSeYjSglzrtVourP22GZgHvNW2RWjk0cDAfoxtf0ENtF6Polotkra4RRmB7wNPBHUleIRcAdYg6k1OHG71k3gjX2+t4VOXisQYJ8d8xpTc2F24UX780UCnTwbuAJ4RX3NwTaRZgW6/nHOQ8eXpLoXqK+5XZ3UJGngbg8dX5Lq7qGgDfwKdHvo+JJUtxtTq0gDJXfhUWBJUC8rloD7UmKSDXwmqJU1z6WEJBuYZAcuCmK1SjbwpaBW1hSygR8FtbLmk5SQZAN/CGplzVweSVtt+0m/Fcv7NAZgdcz4VPWtTDowhuqXRX8FtEKxQK3uYEitnCKsQDEdSQ/8L5Fo4DiCZ/YBEalbooHLBPYSIYLXrR4YgXqgJyE8MC+PDFJXCA/MyyMLV5d6YATqgZ6oB3qiHhgQ9cAI1AM90c/Cnuhn4YCoB0agHuiJeqAn6oEBUQ+MQD3QE/VAT9QDA6IeGIF6oCehPXCbQD6pHB3jgWuBQeABMCmQrxWTNtegzd2MwntgP+YW/Dnntd9tbL94dbAd8+8Evjj5fgG3gAMpdIJfpe+yDnN/8GNnfAV4aONxK0KKXuAocJfaKqsAU8BZYGOL1wdv4DjwFLOy5p1x1X8CsSOLYhKyBbMq3zt1/cGsyinMJW6NBG/gb+fYIuZ+swGgJ4si2qQHU9MItVu8KpjaGwnewGr8PPX3nRWVMqZWkStU0xA8YcaIzEdPpD3RBnqiDfSknav0O9Hv4vCaj65ARVEURVEURVGUjuMfWbTN9E0AqgAAAAAASUVORK5CYII=",e.door="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAC60lEQVR4nO3dMWsUQQCG4TcXLBRsooWdGAMWgphekYjlpcgfCNikPTtby5S2dtZpjFhqIZLGyoBa2CkkkICHRUBBNGcxJ5ybi7e7mZ395vI9sBBIMjObN7dzF9gcTI9zwArwFNgHdoFumws6jS4C94FN4DswKBw77S3t9LgMrAEvgJ8cjVA8rAGLwCNgm8kBHKQBs8AS8Bj4TPkf/rivtZrOAsvAE2CP8hE+AuvALWBmzOetgjlgFdgADigX4DewBTwEro0Z00EqqropD4AfwEugB1yaML6DlHCd8Bu9BRxSLkKf8MhZBc5XmGtSkKpPCo47snqdM0u4pq8Dnyh/kl8Ie8gycKbm3KmCDMjkdU6XapvyNuEp7WKk+VMGyeKSuMP/T+AX8Bp4AFxpYH4HKRi36Cqbcuz5cxs/uuKCVwh/+Gtr/qzGn4k9IEcX2cQcbc7f6PidmIPZyTmIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxOQcZIHwbzU+AFdbXou0VDdFPh+Z41nC+bO/6bMp30bm6Cecv9Hxc75kTaWcg7w55mMrSHXJWiBs6O/5d1PP+pLl+9TFxs/5kjWVHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hJEaQH3Ew0VxnSb9ed4qbPvw6At8Cr4fEOOEwwf/EcY/9QU9/UWtmkN7gf/e8Lm8R/BKV8g/udSGtuVBfYo/rJxQqUKsju8FyjavLhNg/cGx53gQsVv7/uJa7t++RPJOViUwVykJqaCpR1EBUdwr7RI+wjfervQUmfpsam+tvTAW4Ad4Al4DYwV3Ms1XPM3jywBmwAXxF5IRfbH0Ok4hC5QW8AAAAAAElFTkSuQmCC",e.routeA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEbUlEQVRoge2aXYhVVRTHf3dIZ0zUsWZknBTHyYKocPzsQexFH0wpTWgSaxqDgqCExHzoKSIF3/RBMBQRCizFKEqajKGHCrMPFcY+xo8mR1KpMdNRtBzH48Nam31nvOfsve+cc6+Ifzjsc89Z6/9f+5x99l577wu3CXIZcg8H6oHR+rsXOAX0ZaiZCiqBpcBWoBMJOBp09AG/Au8CTwHDyhJpDGqBdcA5BgZ9DegGOvQ4qdfybf4G3gLGljzqPFQAK4Hz2MAOAGuAGUjTGoxK4DHgTaRyxu8s8BLZNvWCqAX25gWyB5hdBM9coD2P52OgOqUYnWgAjqjwX8CTKXAuwzbNDqSTyBT1QJcK/gSMT5G7AfhZuTuBmhS5B6AS+QYiYB8wKgONe4BDqvENcFcGGmxUgWMqmBXqkB4uAtamTT4T6Af+B6YF+C3CfsiLAvzmIF31VeDhAD8nTM+yPtBvJ7YiHwb6blK/zwL9YjFDCc8DYwL8qoEryJvs1/OQrrUGuARcBx51GVd4EL6o5TbgQkAgzwJVwKfIU60CmgP8zwLbkUFyRYBfQeSAM8gbmRro+636NSOVMj1RCGapX3eg3014SIlOBfpNQZpEL3A38jYuKNeDATw5ZNCNgAeSDF1Nq0nL7wLEAVo0iE+Ay8B/SBMDWB7AY8YsgOlJhq6KmKdwJEA8Bzyv5x/kXTfnrYQlh0Z7SpKRqyImve4JEH4caFSf9rzrXyJpewOSLPrCaCcOwq6KmFT8aoBwi5a7GDgbvAbsHmTjgytaViUZuSpyUUvfvGoE8Iyef4G80fyjTe81q60PzNiV2PW7krJzWtZ6ij6NnaMnjcijgSUM/IbiYLT/TTJyVeSolr75jmkyPdi3ORijkOBewK8iRrvTM4aCaMROoFw9TT12Tp6UWE5Tm37gPgdnDukgImCyR7yJ6FaiJofdGrX7zYPzF7V9w2E3Xe1Ough9cq29Wi522JmxY4cH504tVzjszDT6cw9OJ+YjT6WL+OZlnpwzlVDcj6QwSc0wBxxXm3kB8caiAjihhAtibDbo/f0BvN+rz4aY+wuwCaNPy/HCaiX9kdKtPe1XzdVpklYhGXAEPJEmcQwWqtYZJHtOFauwy0BZvxXT7F7PgnwEcFoFnstCQNGiGqfxT2OC0aoiPcC4DPjHIVPcCBn5M0Ubxa2K+MCsurS5DNPAJGQKGyGJX1pYrJwXVaMkeFVF/0lJtEG5IuC1FPi8kQM+UuFDDO2jrETGJ7MYV/I9kmpsCrF5CDxblOMEcO/QwyoOTcgqSQS8XIT/K+p7GXd2nTlMl9xHfC5WCAvV5zol6Gp98Q5SmV78nuwj2L3HtzOMKxg54H0ksD9Jns01YvO29yjDx+3CcOArJMDfKTyNnYDdumun8M7vLYGRwNdIoEeR3SeDWuTPAhGyBJvF1l2qGIMdFzqQLrUaOIgdd8r6B4EQ1GB3aH/AVuwwZRwrikUddj8+0vO6RI9bGBOBP/SYWOZYhoxGPe7ABzcANvIdFIEv9s4AAAAASUVORK5CYII=",e.routeB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEWElEQVRoge3aXYhVVRQH8N9IOZqZWo5MljUNBUGGX30SQZCRCWVERBQWQUJQQSI9RA8RFfQSFAVF0Uu9VBA9KIlkRUXfljWJaOWofWhqmWkZaXp72Ptwrlfn7HNnzpmx6A+Hc+6cdf7/te7de6119h7+I+iokXs0puKE+Hk3fsT+GjUrQSeuw3NYJzjcaDn2Yy2ewTU4dkQ8HQBdeAQ7Her039iMvnh8F//WbLMdD2DSsHvdhFG4G7vkjn2GezFHGFqt6MSFuE8ILnvuZ9yu3qF+RHRhRZMjy3DBIHguxcomntcwsSIfk+jB+ii8DVdXwHmjfGj2CUmiVkxFfxRchZMr5O7Bmsi9DpMr5D4EncIcaOADjK9B40Ssjhrv4ZgaNDweBb6JgnWhW8hwDTxcNfl5OIC/MKvA7kWH147sOICfsFR6Xl0ipOp9OGcojrciyyyPJuyKAmk9nkhwPRXtlg7a6xbMiYS7MCFhmwWyFr0tx0VYLPwqWTBXFnBNxu84iHMH736O7Jt5rIRtFsgXBTYz5O3L8wm+J9vQLkQHtkayGSXsywRCnpmWJezOj3abU8KjEvfPFrLIFnyZImsDx8XzuoTdKqEfOw1nFRmmApkZzx8mXSuPBYJT+4QuuAhZzYLZRYapgpN9C+tT3rVgPOY2fR6HabhMCOQPLMS3Jbgy7TOLjFKBZO31jhKCzejFGwPc68dteLckV6ZdWIRTgWSt+L6Sohn24OOWv00SfpVevCMM15uwKcH1ZzyPKTJKBbInntvtqzbgigHuXS6k1YvxNqYLQ20gZLXrtyLB1GTfGc9dCbt28Cauj9c9uDlhn2n/WmSUCuTreK603xEq//Z4PSdhm2kXpupUIH3xPFu1r6Fj5ZO3aFWlQ96krikiTAXSL7TUU5Sr7GVxi3x+FnUBs4Sh9T02FhGWeXFZgUVC/k+1Hhk6hezUjOOFOXGD8GpLaH9eKeDJ2v3XS+oWYq5QYfulh1c7bfw2xQsWHULBbAiZbsgYJeT6BuYlbFOB/IL3cT9OSnDNkzeMqSlQGksi6aeGb+3po6i5pErSMcK6bQNXVUk8AOZHra3yTrkyLJYvA9X9q3wcte6pg3ys8F7SkK7GQ8HCqLElataCW6PIDqG2VI0pwjpwQ6g1tWJ5FHqpBu6XI/fyGrgPw+nCpk0D11bIuyBy7okaw4I75XWhCtGeyNXAXRXwlUYHXo3Cqw1tUnYK9SlbjBv2PZKJ8hbi6SHwPBs5NklX+9owE3ujI4sG8fwd8dm98hWbEUOWkvdL92LNmB+fOWgYUm1ZPCQEs1u5b3a6fO/xwRr9ahsd8s73B5xRYNsr79teMAKTO4XReEtwcANOOYLNqfKtu5WOvPN7VGCcsPDWEBYuupvudQmLDg1hTauOrbtKMUFeF/qElDoRn8vrzoj+g0A7mCzfof1EHthXRrBWDBbd8v34RrzuLnziKMY0YRlnY7z+VyPbQ/wfZfAP++My3madvrIAAAAASUVORK5CYII=",e.marker="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABfklEQVRIie3WMU/CQBQH8NfaD+RgIuJEWP0c7C4aBpyMTIY4aVxNnB3UCLakTgxOJiY0aSElkVDUNoECLeVdz+kMKYYo7cEg/+nSXvq7XK7vHcCKIkQf5PIlysaXxf2Z99zgWjb7DW9I0guZTAqpavVWAKDRuYnDm3t7AADQ63aho2mDwPdtgng0RrzOqCpyh1mGjgOdet31XNenhBRHiOcZVfW5w9MLsHR9OHAcApSeSZSebslyjzvM4vX7YBnG0LUsAUTxAhBPthXF5g6zBKMRvDcantNuU6D0igbBcUpV37jDLDgew4dpBp/NJqGieEfCsJCuVDTuMAtBBNs0savrKAhCLUA83FWUZ+4wS0gI2K0WtQzDp2GohYQc7MiyPD1HjCXEiJTkx6JbPZmz1YnAM4cLoJAul+cerlhwnN9pITiJAvIn+MeSWS4vVDJ/BUebhJdAk5gLL70tsjHPi8BMcvkSvXl6pdNXIB5ZWeVaw2v4n8D3D4/LXsfy8gV9n0oC7aAw4wAAAABJRU5ErkJggg==",e.defaultIcon=e.poi,e.chevron="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABvElEQVRoge3YWUsCURiA4TPdVdBGli1E20XLr+gHB923WFdt0k6aQZlB+guCIHi7mCXBwY7fOJ5Pm/faYc7D6DnjZ0xWls6AEWAXeAE2XK9HVIDY57cGsOV6XR0VIA5orQFsul6fVQHiMAYRVlePCRBHbRBh78C66/XGBoxaIpoxa67X3RKw1wEi7A1YSXttQx1+/ktwjyVjTAFYFlybTsAw8TuVmidjHX/vWP8GU0XZ18x2G+4bTEGIeQYWXBui8M+WYyGmohFzkgAz79oQlRDzpA0zBpwJMWVgzrUhChgfNMy5EFMC8q4NUQHmYlAwEwkwt8C0a0MUMAVcCzFFwLO5T6ev8ZK+jTGfwmtnTW/W2D7838mp8Gk0gG3XhqSIOhrGSiQ7S3RMYPB3KukZomPykhBR04SQnhk1NIyNgEngUoh4GxTEqmuDAXL4rxKSqmiYqASIu35HzCRAvKJhghIg7oWICrDo2tANhI6JCfLX8TIpDxd6MY0vG2N2PM/7EFybTvhnRlHTkxCH/bZbQtNEJC4LjH5EWICJ28Ee0TQBsQl/O35oQtwAOdfrEgXkgSv8v7V6xjdZWd3pB9JxAjY9tg5oAAAAAElFTkSuQmCC",e.person="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAADICAYAAADFh+7jAAABG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+Gkqr6gAAAYJpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZG7SwNBEIc/EyU+UdDCwuIUtVKJEYI2Fgm+QC1iBF9NcsklQi4edycSbAXbgIJo46vQv0BbwVoQFEUQS7FWtFE554wQETPLzn7725lhdxY80YyqW+V+0LO2GRkJKTOzc4rvkTJqqKKb1phqGRNTw1FK2tuNRItddbu1Ssf9azWJpKVCWaXwoGqYtvCo8PiKbbi8KdykpmMJ4WPhLlMuKHzt6vECP7mcKvCHy2Y0EgZPg7CS+sXxX6ymTV1YXk67nllWf+7jvqQ2mZ2ekrVNZgsWEUYIoTDGEGGC9DIgPijdCdAjO0rk+7/zJ1mSXFW8QQ6TRVKksekSdVmqJ2XVRE/KyJBz+/+3r5bWFyhUrw1BxYPjvHSAbwM+847zvu84nwfgvYezbDF/aQ/6X0XPF7X2Xahfg5PzohbfgtN1aL4zYmbsW/LK9GgaPB9B3Sw0XkL1fKFnP+cc3kJ0Vb7qArZ3oFPi6xe+AG2WZ+kub0h6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAN0UlEQVR4nO2deYxdVR3HP2/KdJkWUloKWNtOK7QFLCVFFmFYRnaQsKhYQUwxhjQEjYCQiAsuJLIGRRSCiRZFwtKAAiIgQUeWshhBWorI0ilFsKW0pQsDnU5n/OM3r30zvPfm3nvO+Z1z7zuf5Jc2ad873/P7vnvPXc75nRKRNOwATAImAzsCLcBooBnoAt7v/3M1sBx4z4vKISj5FpATJgKzEMN3SPG594DXgSVAtwNdmYim12cccDByZJuwGXgOeAnYairKlGh6dUrAQcB+lr93A/AXYK3l703FMJ+NB8pw4FhgpoPvHgFMB9YB6x18fyKi6QMZBZwC7O6wjWHAnsCHyAWfOtH07QwDTgR2UWpvCvAuHo74aPp2jgRaldtsBVYAH2g22qTZWMDMBGZ4aLcZOA7lgy+aLvfdB3psfydgH80Go+kwG3my5pM5yF2DCo1u+nDs34tnYSSwr1ZjjW76ZGRcDYE9tBpqdNOn+hZQwdj+cE4jm96E+TN120zVaKSRTR+L4sVTQlQeDDWy6b6v2KsxWqORaHpYqGiKpodFNN0xPb4FVGGLRiONbPr7vgVUoUujkUY2XSXBKYmmO2ajbwFVUNHUyKZ3AWt8ixjECo1GGtl0kLnpodADvKXRUKOb3ulbQAVvonRH0eimrwVW+hbRz1KthhrddICnfQtAxvK3tRqLpsM7wDLPGp7VbCyaLjyNzEP3wb9QXvESp0AL3cAqZPWJ5lKvFcBjiu0B0fRKNiGPZqcqtbcOeBAPCxqj6QNZg5g/BbdH/ErgIWQ1qzrR9I+yBrmSbiXdWvSk/Ad4FI/r1aPp1dmEFBMYDexs6Tu7gEXAP4E+S9+Zibg+fWh2RQoTfCzj57cgV+hLCOQdfjQ9OeOQi7ypDD2BsRu5Ml+OPF5VmRyRlGh6NlqAMcjpv4XthYbKxYbWA73e1EUikUgkEolEIpFIJBKJRCKRSCQSUaXIL1xGIkUBpyJvyMbX+XMUMnninf5YXfH3l4C/I9ObCkGRTN8ZaAMOBw4DDsBeTZle5J343/rjMcJcAFl4xgBzgRuBxYgxfUrRgxz9c3EzpSpSwTDgeOD3yHtrLZPrxZvAt5GhImKR2cC1yIRF3ybXii7gV8BejnLQEOwOXAy8gH9D00Q38BPkQjKSkKOAhUjyfBtoEq/29yVSg3HARcDL+DfLdiwgjvcD+DTwW2Q7C9/muIxVQLudlOWTFmA+8Dz+zdCMzcBZFvKXK0YAFyDruHwb4Ct6ge+YJjIPNCNH9pv4T3oocTMFXVLWBMxD1oT5TnKI8QBy9isMuyHPqH0nNvT4XdYEh0YbUg/Nd0LzEt/NluZwuBBZrOc7kXmKXuALWZLtmx2Bu/CfwLxGF/IqODeMAf6B/8TlPd4m+xp4VZqBh/GfsKLEnenSr08JuBX/iSpaHJvGBG2uxn+Cihiv4Pj+PetToQuAH9sUEtnGeLZPxwqGQ9Gdj9aI8QGKe68OxQ7kbyZLXuOehJ445yL8J6NRYitSwNA6acb0jwN3E97+pEWlhFSmftSniIX4//U3WqzG45u4ExIIjOEmvpLAH+uUkCU9vjtfK4o+v876diNJdnY4FdjPdsOGdAO3I5MN7/ArxTkHA/trN1quWhxCvApcAkyo0NcZgC7XcU0df6xzsqNOpIlu5LXt0Xx0lW1rAPo0orOGP054xlEnksQy4FJk6lUt5nnUpx0q79uP8NS5DcD5JLveWOBJo4+4MkE+jPGR0PuASSk0dnrQ6CteS5GXTAxHtrTQ6lAvcqpOQ6uivlBiTsocVaXWKXQGUsBei2uRNW1paHegI3ScTqA8A71f7yKylfBYoKgxlHglQ54+Qq0jXasA0TrgTLJtaNNuV0oumI5U5TCilumdpl+ckMuANzJ8rhW9nRJD4wxXXzwe96eqt8j+Bmmegr5Q498Zc7aNWkf6GuR+2SVXkX3byXaLOvLGXkh1rekuvtzlAob/YVaIp9OhNpPQLHPWg9zxWJ1Ld6ZDwRca6Gp1qMs0vuehzS3Ab4BpBjndRgk3z947kVqsWZnnQJON6AF2Qp6c+Wi/G6ljNyV7aoU2y8J6MR+Pb7GsyVY826/vCs86NgM3YbguzubcuOtNhPSz3KIem3F1v779A9DShzwD+VqG/AJyylpkQcR9mJ3WQe7NfSezVpxUodPXKb5a3EbGlUxjgAcNGr6aZK9Kh+IcAw0uowdZo1/G9yl+cCzEoLDROcg9fNLGlmL3CdItKdrWjPJ4XmYm4S39OjdxlqvQAnwZeIjq9VtXIZWTTjBppAbLq7QXQpTH80oeCEBXZaxEztjGNAETkXKfcxh4irPNVPwnrlacWEXvMQHoGhyXJ0l0SJyN/6RViy3U/rEvDkBfZXQBk2xcXGmxp28BNXiO2vu5XKUpJAGjgNPyZLrxkyZHdNT5t9uAe5V0JGWPPJne6ltADTqG+PdzkYvbUPiEbwFpCOmBR5LxvJLPBqC1HEsS6A2CEvJM2XfCBsczKfpwbQB6+4CNeTm9TyDMYggdKf7vxcB1jnSkYa1vAUkZTnhPuPqofn8+FJd71vxwBs3e+C/+Ta6MpON5NS7F34/4soyavfAE/o2ujDTjeTXakXnsmpp7gWl5GdNBebluAjosfH42sjAxy7z/LDxCeHmsi++xcHBkGc9rsR/wV8d6N5Gze3QI6126yXhej3akPKgLzec50OucCYSzFafpeD4URwNPWtSb671i7sa/4X3ovUg5HqkulVVnLwXYI+Yk/Bveh93xPAknkX7xyTLgNGWdTmjC/6Z+rsbzJLQjCxs21NDWiwwLn6fOnDitJck2uRxZSeKLd5ClRJs8ahiJFI6Ygsxcehcpt/Y6MlGicExBd81YtXiEMN8FFJr5+B/X78TOtO5ICv6If+N/6byXkQHsgix59m38Dx33MzKIEwjjlev5rjsaGcg1+Dd9KzDXdUcj2ykhs059G7+ZwDfSKxrNmC2wtBUbgYMc9zVSQQvwFP6NX40UA4ooMQ5ZKevb+DdIV9i44ZmA2UOPSUjSfRu/FPkRRhJwFebP1mcip1nfxj+FbmHlXDIceaGxBVn+bMKByIWVb+MfRC40IzWYy/ZkvY75K8xjCGNlzG3k842mCoMnB9o4Ss5AHp74Nv7nhv0oJDNwd5ScV+O7tcPnPIAgqbfAz0b9uR/U+X7NmG+hL4VgBDL7o16ybEzwu2GINjRiKzKdqeE5i2QJMyqLhQwTtydsy2V8CBxl2Jfck3SCfw/wOcO2mpGVm76NX41h/dY8szfpj5LPGLY5Gr+7S5bjYRr0Vu6npE/WBsx3Gh6PbI3h2/gLDPuRO0aSruxoZazCvMzYZGBFxvZtxYfAvob9yBWmBQGXYT4u7s3Qdw6u40XMtjfJFY9jnrDFwFhDHQeju81otfiqYR9ywT7YS9jjmNeSPw6/q2KfMNSfC67HbtLuJ9v2nZV8Cb/P6Qs942YUst2E7aTdgvkt0Ncd6Eoa1UqIF4Z5uEvcNRb0/cihvnqxEvOzVbDY2BOmXlxiQeONjjXWilMtaA+O2egkz/RquAm4S0lrZdxkqDtIbG75VS96MN92egTwgpLechhvoBsac9Bbe7YO89s4gFnAB0qay7GbBd3B8Gf0EmdzetI3FXX3UaB1cba38BwqZlnUXkJ2p9LSXohxvQV4Hr2kLXLQh93Rm0v/kgP96tyJ7lF+jqN+aJ7md3XUBxW+j67hti7gqjEeeRWq0Y8vOuqDc05Hv1LEDY77dIdSP2503A8nHImf15WuJyQcq9SP3I3rvgx/SqFvJaRmukZ/nIzrLuqgHYFsLutjtebNCm30AQsU2gE5eILnCPzNQHF5ATeY/ZX6FHydOp+G9wG/cN/FbTThZj7A4Fiq1aEsHI7/OWbaM0rvs6i9XkywLdzGmH448kzdZ8WFe9HfTrJDqZ12pXYScxj+qz1sBT7puqNVaMhxPQTD+4BbXXe0Blrj+otaHRqKUAzvxu+2Uxrjei+Wx/UsY3obUhZkjE0hGbkCWeXiiw6FNkp4vl9vI4wjvA+p9+57xafWuK55OzqANmpvGKMdL+Jv85xKCj2uH0o4hq9FNs4JBa1xfRdbgpOM6YciU4VCOLI2AacgNeZCoUOhDdVxPaQjfCPyICg0tMZ11/MEADiEaHgStMZ1508co+HpyN24PphDgPUKnSiK4QAXoZMPJ/XnPkU0PAta47r1+rIjgZeVxBfJcNAb1xfbFn6lgugiGl5Ga1wfb0vwAcgqz2h4dr6FTo5MK2ZuQ3s5btEMB7ke0siTlXG9VUlskQ0HGdffw32urIzrpysIHcrww2x0JADux32+eoGdTEQ2YV5j1YRNwIkUp4Zah0IbJQxfOPk0vWiGg95kyWkmH27Cz2vKIhoOsgZ/vUI7k00+3IQUw9WkqIaDjLePK7Rj9MNqAt6yJCQJRTa8TIdCG2+bfoFWdYUiXaXXY1/cX70bbwPS6lhkIxlexmVFzKdtifyTQ5GNZjjAmbjL5/m2RE5EJhxGw+3QjIy7tvP5JJZrCphurRENH8h87ObzfWC6C6H3WBLY6IaXuQJ7pn/DlchxmBv/GrInSkT4NeaGL0BhNc/ZpJ8J0oNskqtVAiQvDAN+BmwhvdmrgNM0xU4k+VX9EuAgTXE5ZAbwB5IbvhBHs1+TnDKmIb+2NuSHMAFZYfJcRfhcOZo32oCTkYLFs5DnJCWkEmUnUtXjHtzUtwXg/0qsA4OTWMKaAAAAAElFTkSuQmCC",e.floorchangeDownImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0Y2MDk5Q0IyM0EyMTFFOEExQkQ5MDk1RDU5RTBCQ0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0Y2MDk5Q0MyM0EyMTFFOEExQkQ5MDk1RDU5RTBCQ0UiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozRjYwOTlDOTIzQTIxMUU4QTFCRDkwOTVENTlFMEJDRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozRjYwOTlDQTIzQTIxMUU4QTFCRDkwOTVENTlFMEJDRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsNnVNkAAAJISURBVHja7NxNSsNAGAbgxD+KUnWhUCi9hrtewWO51RMUFAaXQg/QhYuCV9CtpQtxZXelxG9kAjZN0kky881k8r7wUkpKJn0ozQ+ZREmSRNkyZEx9pa6piYGu1frGtjd8x8oB4C11Ywgu241af7CAx9SlJby0SzUOC+BBxJsb6sDyGAM1Dku4Aa8DG4cdMLgAEIAABCAAEQACEIAARAAIQAACEAEgAAEIQASAAAQgABEAAhCAAEQACEAAAhABIAABCEAkkyPNz/WphwbGO2P6XnKcSwPrkXf9/5R+ouQu/RH1mbqK7N5V73tXymGU51UEOKR+dhwuW+kx1AV8BFhun7JWcd7EmjiOv+jlCruInXyT15ZLEWACq8J9RqxzGPMBqty86x4H3sMqNw+6hzHyZzrBTmOrk/QvT3e2pjxwFoD7q0hPJKpOdwXiP7w6gF1HFNlT2LoTrruIKPLO/5vMWO8Soii6eNJ0yn8XEEXZlScTz0wIGVHsu2xn6qETISLuxTMJGBqiFp5pwBTxpeV4L1Wuttt4bswJddpSvKna/sglYFsRK+PZBGwbYi0824BtQayNxwHoO2IjPC5AXxEb43EC+oZoBI8b0BdEY3guAF0jGsVzBZgizpjxZqbxXALKnDIiztR4UUiAXIjW8HwAtI1oFc8XQFuI1vF8AjSNyILnG6ApRDY8HwGbIrLi+QpYF5Edz2fAqohO8HwHlDmnvu3Bk8v7rjbQd0CZC+q8AG+ulkcALE+PekddKLiFet9zvWFZq18BBgDKKe48BY2GvQAAAABJRU5ErkJggg==",e.floorchangeUpImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Mzc3ODM3OTQyM0EyMTFFODk5MzVCRjg5RkE3NDIwNEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Mzc3ODM3OTUyM0EyMTFFODk5MzVCRjg5RkE3NDIwNEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNzc4Mzc5MjIzQTIxMUU4OTkzNUJGODlGQTc0MjA0QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNzc4Mzc5MzIzQTIxMUU4OTkzNUJGODlGQTc0MjA0QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv4uuuEAAAJCSURBVHja7NxPasJAGAXwxP6hFGwP4L53cOEJeoXuixfxGF1V6E4Q6tJFF0KPULptcdEWCuJKavpNOwEdJzpJZr6ZJO/BI5CECfk5MirEVpIk0WYDyBl1QH2nJnI7kPu9RrX68woM8JI6k3BqZ/I4ADPSpj5n4KUVxy8AuJtz6vQAXtqpPB+ABfC8IoYIWATPG2JogGXwvCCGBGgDjx0xFECbeKyIIQC6wGND9A3oEo8F0ScgB55zRF+Ap4x4m4indQAUNzFmxks7to3IDegTzwkiJ2AIeNYRuQBDwrOKyAEYIp41RNeAIeNZQXQJWAW80oiuAKuEVwrRBWAV8Qoj2gY8oo4qipd2JO+DHVBcdFhxvLRDU0RbgHXCy4VoA7COeMaIZQHrjGeEWAawCXgHEYsCNglvL2IRwCbiZSLmBWwynhYxDyDwNIimgDH1DnBbFR6xKWAfYNr2dYCxunDEcfxCm6sIUfNKVjsuOsAEVpkfpGN1X0tz3heotPnU7dQBTmClzcTo+x2lQ33DorFV4dHRLSK6GSgeK+hSH6jLhs+6pXToSpfIZBFRz2nn+dV2T66p9ww3fUN9tDDOD3WhvlvVHBsMtLD4anLNmm+uKdrC2gBAAAIQgAgAAQhAACIABCAAAYgAEIAABCACQAACEIAIAAEIQAAiAAQgAAGIABCAAAQgAsDKAn7U7Dr/YfwL0BPqPHL7OMJcXofFKusxB1dZUW+pa0fjr+X4q7rOwDQ96pO8URuzbiXH63Fbif4KMAA5SHWvsbuuvQAAAABJRU5ErkJggg==",e.popupImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0RCNzBCQjQ5QkNGMTFFRDg3QjVERTUyNTA3RDg4QTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0RCNzBCQjU5QkNGMTFFRDg3QjVERTUyNTA3RDg4QTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDREI3MEJCMjlCQ0YxMUVEODdCNURFNTI1MDdEODhBNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDREI3MEJCMzlCQ0YxMUVEODdCNURFNTI1MDdEODhBNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnxS85oAAARhSURBVHja7Js7axRRGIZ3QlQkUYyiQWMsVAwKNhrFJoXWdkr0F4iKdhaWgiixUAiiBNJYKYKlIKlE7byAlfFuYbxf8UaiSdb3w7NmncyevRt2zvPAy7LJZop3nnwzc2Y2ymazGYBSaaICQBioG835b6IoqlS6bqVH2aSsU5a737VR8Yzwyb0+V+4pt5Qbyh1lstyN/XPaYm9yKROT4oQyYpshDRETqE/pKFeYv45UIIxNjdPKKDugYWP7rl9ZUG9hepW3FJ6avFF21kOYWcoABac2Z90+rokwrcoQpaY+V5SWaoVpdhui0DByOX7lXK4wZygxuPRXKkwv5QWbHYWEifJFyVu4W6wMK4tYAwuSd8pa5UN84a7QrYHjyBI0NjCOJf0iacJ0Ko+V2fQWNGPKKuVFsQmzH1lAzFH2FZswze7eUDt9gXiprJAjE4UmzGZkgTyWKRvyfxAXZisdQYxtPmE20g/E6PYJs4Z+IEaXT5il9AM+J+LCtNIPxJjnu6zmOycwDTkSFZowAF4QBhAGEAYQBhAGEAYAYQBhAGEAYQBhAGEAEAYQBhAGEAYQBhAGAGEAYQBhAGEAYQAQBhAGEAYQBhAGEAYAYQBhAGEAYQBhAGEAEAYQBhAGEAYQBhAGAGEAYQBhAGEAYQAQBhAGEAYQBhAGEAYAYQBhAGEAYQBhAGEAEAYQBhAGEAYQBhAGAGEAYQBhAGEAYQAQBhAGEAYQBhAGEAYAYaD2wvyiEogx5hPmK/2Az4m4MK/oB3xOxIV5SD8Q44FPmDv0AzFu+4S5Sj/gcyLKZrNTb6LIBHqmrKAnEE+V1dk8SeITZlI5T0/guKBkfRPGXjqUJ8oc+gqaUWWlXSXlO5K00vtCGaSv4BnIJCyzJE0YY6FyX1lMb0HyVulSPtubYhPG+KgcoLdg2Z+TZRpmTy4JnHEnPSSc9HsdKSJMs3KFEoPJZbfPKxbGaFWGKDP1scHQUvQoVIIwxix31kyx6cxZt48ztRImR687g6bkdOS1sqPYTq9GGKNNOe0Wdii9MTPqTm4XlLLDqxUmx3LlhDLCDmiYPFf63Gp+yeQ7UmjhrhxsLadb6VE2KeucTG0sZ8won5wgw8pN5Ubmz+Mrk+Vu6J9hUsWEaQSOzMB/8eG0lVirQ1Ij0OTWFib+gyj2n3vJBjXCNDZ2YmfPdYzXUZZxd+9tXhoLDE0YY73yo06Txrb5zd2syyBMethdxwmzK83FhSqMcbIOspxKe2khC2M31q7V6NBk27ieSbhZhzDpYonyssqTYPtbexqtPYTCQhfG2Kz8dJfClVw+23fQt4RSFsL8YU8VE+ZgSEUhzBSDZU4Z++y50EpCmCnsqzS3Szyfsc/cVeYiTLjCGJ3K+yLS2BXRF2V1iAUhzHS2OmEmPYei7aGWgzDJHPJMmKMhF4MwhbkYmzJ2KLKHo5sQBmGSmK88cussFlvgWxJ6KQjjx54Y/J4JbHEOYarDnqTfSw3ThfktwAB+TNocUCnWeAAAAABJRU5ErkJggg==";var t=120;e.pulsingDot={width:t,height:t,data:new Uint8Array(t*t*4),onAdd:function(r,n){var i=document.createElement("canvas");i.width=this.width,i.height=this.height,this.context=i.getContext("2d"),this.map=r},render:function(r,n){var i=1e3,o=performance.now()%i/i,s=t/2*.3,a=t/2*.7*o+s,d=this.context,f=this.map;return d.clearRect(0,0,this.width,this.height),d.beginPath(),d.arc(this.width/2,this.height/2,a,0,Math.PI*2),d.fillStyle="rgba(189,82,255,"+(1-o)+")",d.fill(),d.beginPath(),d.arc(this.width/2,this.height/2,s,0,Math.PI*2),d.fillStyle="rgb(189,82,255)",d.strokeStyle="white",d.lineWidth=2+4*(1-o),d.fill(),d.stroke(),this.data=d.getImageData(0,0,this.width,this.height).data,f.triggerRepaint(),!0}}})(tH);var BN={},Ti={},lv={},wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.isFunction=void 0;function Tbe(e){return typeof e=="function"}wi.isFunction=Tbe;var za={},B_={},gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.createErrorClass=void 0;function Mbe(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}gf.createErrorClass=Mbe;Object.defineProperty(B_,"__esModule",{value:!0});B_.UnsubscriptionError=void 0;var Lbe=gf;B_.UnsubscriptionError=Lbe.createErrorClass(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.arrRemove=void 0;function Rbe(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}Mc.arrRemove=Rbe;var EB=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SB=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},PB=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(za,"__esModule",{value:!0});za.isSubscription=za.EMPTY_SUBSCRIPTION=za.Subscription=void 0;var f0=wi,QI=B_,AB=Mc,jN=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=EB(s),d=a.next();!d.done;d=a.next()){var f=d.value;f.remove(this)}}catch(R){t={error:R}}finally{try{d&&!d.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var g=this.initialTeardown;if(f0.isFunction(g))try{g()}catch(R){o=R instanceof QI.UnsubscriptionError?R.errors:[R]}var _=this._finalizers;if(_){this._finalizers=null;try{for(var b=EB(_),P=b.next();!P.done;P=b.next()){var L=P.value;try{CB(L)}catch(R){o=o??[],R instanceof QI.UnsubscriptionError?o=PB(PB([],SB(o)),SB(R.errors)):o.push(R)}}}catch(R){n={error:R}}finally{try{P&&!P.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}}if(o)throw new QI.UnsubscriptionError(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)CB(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&AB.arrRemove(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&AB.arrRemove(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();za.Subscription=jN;za.EMPTY_SUBSCRIPTION=jN.EMPTY;function kbe(e){return e instanceof jN||e&&"closed"in e&&f0.isFunction(e.remove)&&f0.isFunction(e.add)&&f0.isFunction(e.unsubscribe)}za.isSubscription=kbe;function CB(e){f0.isFunction(e)?e():e.unsubscribe()}var Td={};Object.defineProperty(Td,"__esModule",{value:!0});Td.config=void 0;Td.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var j_={},UN={};(function(e){var t=Pe&&Pe.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var s=o.call(n),a,d=[],f;try{for(;(i===void 0||i-- >0)&&!(a=s.next()).done;)d.push(a.value)}catch(g){f={error:g}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return d},r=Pe&&Pe.__spreadArray||function(n,i){for(var o=0,s=i.length,a=n.length;o<s;o++,a++)n[a]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a=e.timeoutProvider.delegate;return a!=null&&a.setTimeout?a.setTimeout.apply(a,r([n,i],t(o))):setTimeout.apply(void 0,r([n,i],t(o)))},clearTimeout:function(n){var i=e.timeoutProvider.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(UN);Object.defineProperty(j_,"__esModule",{value:!0});j_.reportUnhandledError=void 0;var Dbe=Td,Nbe=UN;function Fbe(e){Nbe.timeoutProvider.setTimeout(function(){var t=Dbe.config.onUnhandledError;if(t)t(e);else throw e})}j_.reportUnhandledError=Fbe;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.noop=void 0;function $be(){}Ua.noop=$be;var af={};Object.defineProperty(af,"__esModule",{value:!0});af.createNotification=af.nextNotification=af.errorNotification=af.COMPLETE_NOTIFICATION=void 0;af.COMPLETE_NOTIFICATION=function(){return IS("C",void 0,void 0)}();function zbe(e){return IS("E",void 0,e)}af.errorNotification=zbe;function Bbe(e){return IS("N",e,void 0)}af.nextNotification=Bbe;function IS(e,t,r){return{kind:e,value:t,error:r}}af.createNotification=IS;var hd={};Object.defineProperty(hd,"__esModule",{value:!0});hd.captureError=hd.errorContext=void 0;var rH=Td,rp=null;function jbe(e){if(rH.config.useDeprecatedSynchronousErrorHandling){var t=!rp;if(t&&(rp={errorThrown:!1,error:null}),e(),t){var r=rp,n=r.errorThrown,i=r.error;if(rp=null,n)throw i}}else e()}hd.errorContext=jbe;function Ube(e){rH.config.useDeprecatedSynchronousErrorHandling&&rp&&(rp.errorThrown=!0,rp.error=e)}hd.captureError=Ube;(function(e){var t=Pe&&Pe.__extends||function(){var T=function(x,N){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,H){B.__proto__=H}||function(B,H){for(var Z in H)Object.prototype.hasOwnProperty.call(H,Z)&&(B[Z]=H[Z])},T(x,N)};return function(x,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");T(x,N);function B(){this.constructor=x}x.prototype=N===null?Object.create(N):(B.prototype=N.prototype,new B)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var r=wi,n=za,i=Td,o=j_,s=Ua,a=af,d=UN,f=hd,g=function(T){t(x,T);function x(N){var B=T.call(this)||this;return B.isStopped=!1,N?(B.destination=N,n.isSubscription(N)&&N.add(B)):B.destination=e.EMPTY_OBSERVER,B}return x.create=function(N,B,H){return new L(N,B,H)},x.prototype.next=function(N){this.isStopped?F(a.nextNotification(N),this):this._next(N)},x.prototype.error=function(N){this.isStopped?F(a.errorNotification(N),this):(this.isStopped=!0,this._error(N))},x.prototype.complete=function(){this.isStopped?F(a.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},x.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,T.prototype.unsubscribe.call(this),this.destination=null)},x.prototype._next=function(N){this.destination.next(N)},x.prototype._error=function(N){try{this.destination.error(N)}finally{this.unsubscribe()}},x.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},x}(n.Subscription);e.Subscriber=g;var _=Function.prototype.bind;function b(T,x){return _.call(T,x)}var P=function(){function T(x){this.partialObserver=x}return T.prototype.next=function(x){var N=this.partialObserver;if(N.next)try{N.next(x)}catch(B){R(B)}},T.prototype.error=function(x){var N=this.partialObserver;if(N.error)try{N.error(x)}catch(B){R(B)}else R(x)},T.prototype.complete=function(){var x=this.partialObserver;if(x.complete)try{x.complete()}catch(N){R(N)}},T}(),L=function(T){t(x,T);function x(N,B,H){var Z=T.call(this)||this,Y;if(r.isFunction(N)||!N)Y={next:N??void 0,error:B??void 0,complete:H??void 0};else{var W;Z&&i.config.useDeprecatedNextContext?(W=Object.create(N),W.unsubscribe=function(){return Z.unsubscribe()},Y={next:N.next&&b(N.next,W),error:N.error&&b(N.error,W),complete:N.complete&&b(N.complete,W)}):Y=N}return Z.destination=new P(Y),Z}return x}(g);e.SafeSubscriber=L;function R(T){i.config.useDeprecatedSynchronousErrorHandling?f.captureError(T):o.reportUnhandledError(T)}function $(T){throw T}function F(T,x){var N=i.config.onStoppedNotification;N&&d.timeoutProvider.setTimeout(function(){return N(T,x)})}e.EMPTY_OBSERVER={closed:!0,next:s.noop,error:$,complete:s.noop}})(lv);var Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.observable=void 0;Vp.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var ah={},Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.identity=void 0;function Vbe(e){return e}Va.identity=Vbe;Object.defineProperty(ah,"__esModule",{value:!0});ah.pipeFromArray=ah.pipe=void 0;var Gbe=Va;function qbe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return nH(e)}ah.pipe=qbe;function nH(e){return e.length===0?Gbe.identity:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}ah.pipeFromArray=nH;Object.defineProperty(Ti,"__esModule",{value:!0});Ti.Observable=void 0;var YM=lv,Wbe=za,Xbe=Vp,Ybe=ah,Hbe=Td,eO=wi,Zbe=hd,Kbe=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,o=Qbe(t)?t:new YM.SafeSubscriber(t,r,n);return Zbe.errorContext(function(){var s=i,a=s.operator,d=s.source;o.add(a?a.call(o,d):d?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=IB(r),new r(function(i,o){var s=new YM.SafeSubscriber({next:function(a){try{t(a)}catch(d){o(d),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Xbe.observable]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ybe.pipeFromArray(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=IB(t),new t(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();Ti.Observable=Kbe;function IB(e){var t;return(t=e??Hbe.config.Promise)!==null&&t!==void 0?t:Promise}function Jbe(e){return e&&eO.isFunction(e.next)&&eO.isFunction(e.error)&&eO.isFunction(e.complete)}function Qbe(e){return e&&e instanceof YM.Subscriber||Jbe(e)&&Wbe.isSubscription(e)}var Gp={},U_={},ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.operate=ir.hasLift=void 0;var exe=wi;function iH(e){return exe.isFunction(e==null?void 0:e.lift)}ir.hasLift=iH;function txe(e){return function(t){if(iH(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}ir.operate=txe;var wr={},rxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(wr,"__esModule",{value:!0});wr.OperatorSubscriber=wr.createOperatorSubscriber=void 0;var nxe=lv;function ixe(e,t,r,n,i){return new oH(e,t,r,n,i)}wr.createOperatorSubscriber=ixe;var oH=function(e){rxe(t,e);function t(r,n,i,o,s,a){var d=e.call(this,r)||this;return d.onFinalize=s,d.shouldUnsubscribe=a,d._next=n?function(f){try{n(f)}catch(g){r.error(g)}}:e.prototype._next,d._error=o?function(f){try{o(f)}catch(g){r.error(g)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(f){r.error(f)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(nxe.Subscriber);wr.OperatorSubscriber=oH;Object.defineProperty(U_,"__esModule",{value:!0});U_.refCount=void 0;var oxe=ir,axe=wr;function sxe(){return oxe.operate(function(e,t){var r=null;e._refCount++;var n=axe.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var i=e._connection,o=r;r=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(r=e.connect())})}U_.refCount=sxe;var uxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Gp,"__esModule",{value:!0});Gp.ConnectableObservable=void 0;var lxe=Ti,OB=za,cxe=U_,fxe=wr,hxe=ir,dxe=function(e){uxe(t,e);function t(r,n){var i=e.call(this)||this;return i.source=r,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,hxe.hasLift(r)&&(i.lift=r.lift),i}return t.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},t.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var r=this._connection;this._subject=this._connection=null,r==null||r.unsubscribe()},t.prototype.connect=function(){var r=this,n=this._connection;if(!n){n=this._connection=new OB.Subscription;var i=this.getSubject();n.add(this.source.subscribe(fxe.createOperatorSubscriber(i,void 0,function(){r._teardown(),i.complete()},function(o){r._teardown(),i.error(o)},function(){return r._teardown()}))),n.closed&&(this._connection=null,n=OB.Subscription.EMPTY)}return n},t.prototype.refCount=function(){return cxe.refCount()(this)},t}(lxe.Observable);Gp.ConnectableObservable=dxe;var OS={},aH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(aH);var VN={};(function(e){var t=Pe&&Pe.__read||function(i,o){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var a=s.call(i),d,f=[],g;try{for(;(o===void 0||o-- >0)&&!(d=a.next()).done;)f.push(d.value)}catch(_){g={error:_}}finally{try{d&&!d.done&&(s=a.return)&&s.call(a)}finally{if(g)throw g.error}}return f},r=Pe&&Pe.__spreadArray||function(i,o){for(var s=0,a=o.length,d=i.length;s<a;s++,d++)i[d]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=za;e.animationFrameProvider={schedule:function(i){var o=requestAnimationFrame,s=cancelAnimationFrame,a=e.animationFrameProvider.delegate;a&&(o=a.requestAnimationFrame,s=a.cancelAnimationFrame);var d=o(function(f){s=void 0,i(f)});return new n.Subscription(function(){return s==null?void 0:s(d)})},requestAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e.animationFrameProvider.delegate;return((s==null?void 0:s.requestAnimationFrame)||requestAnimationFrame).apply(void 0,r([],t(i)))},cancelAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e.animationFrameProvider.delegate;return((s==null?void 0:s.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,r([],t(i)))},delegate:void 0}})(VN);Object.defineProperty(OS,"__esModule",{value:!0});OS.animationFrames=void 0;var pxe=Ti,mxe=aH,TB=VN;function gxe(e){return e?sH(e):vxe}OS.animationFrames=gxe;function sH(e){return new pxe.Observable(function(t){var r=e||mxe.performanceTimestampProvider,n=r.now(),i=0,o=function(){t.closed||(i=TB.animationFrameProvider.requestAnimationFrame(function(s){i=0;var a=r.now();t.next({timestamp:e?a:s,elapsed:a-n}),o()}))};return o(),function(){i&&TB.animationFrameProvider.cancelAnimationFrame(i)}})}var vxe=sH(),ha={},V_={};Object.defineProperty(V_,"__esModule",{value:!0});V_.ObjectUnsubscribedError=void 0;var yxe=gf;V_.ObjectUnsubscribedError=yxe.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var uH=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_xe=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ha,"__esModule",{value:!0});ha.AnonymousSubject=ha.Subject=void 0;var MB=Ti,HM=za,bxe=V_,xxe=Mc,tO=hd,lH=function(e){uH(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new ZM(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new bxe.ObjectUnsubscribedError},t.prototype.next=function(r){var n=this;tO.errorContext(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=_xe(n.currentObservers),a=s.next();!a.done;a=s.next()){var d=a.value;d.next(r)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;tO.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;tO.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?HM.EMPTY_SUBSCRIPTION:(this.currentObservers=null,a.push(r),new HM.Subscription(function(){n.currentObservers=null,xxe.arrRemove(a,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?r.error(o):s&&r.complete()},t.prototype.asObservable=function(){var r=new MB.Observable;return r.source=this,r},t.create=function(r,n){return new ZM(r,n)},t}(MB.Observable);ha.Subject=lH;var ZM=function(e){uH(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:HM.EMPTY_SUBSCRIPTION},t}(lH);ha.AnonymousSubject=ZM;var G_={},wxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(G_,"__esModule",{value:!0});G_.BehaviorSubject=void 0;var Exe=ha,Sxe=function(e){wxe(t,e);function t(r){var n=e.call(this)||this;return n._value=r,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(r){var n=e.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},t.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,o=r._value;if(n)throw i;return this._throwIfClosed(),o},t.prototype.next=function(r){e.prototype.next.call(this,this._value=r)},t}(Exe.Subject);G_.BehaviorSubject=Sxe;var cv={},TS={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(TS);var Pxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(cv,"__esModule",{value:!0});cv.ReplaySubject=void 0;var Axe=ha,Cxe=TS,Ixe=function(e){Pxe(t,e);function t(r,n,i){r===void 0&&(r=1/0),n===void 0&&(n=1/0),i===void 0&&(i=Cxe.dateTimestampProvider);var o=e.call(this)||this;return o._bufferSize=r,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,r),o._windowTime=Math.max(1,n),o}return t.prototype.next=function(r){var n=this,i=n.isStopped,o=n._buffer,s=n._infiniteTimeWindow,a=n._timestampProvider,d=n._windowTime;i||(o.push(r),!s&&o.push(a.now()+d)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),i=this,o=i._infiniteTimeWindow,s=i._buffer,a=s.slice(),d=0;d<a.length&&!r.closed;d+=o?1:2)r.next(a[d]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,i=r._timestampProvider,o=r._buffer,s=r._infiniteTimeWindow,a=(s?1:2)*n;if(n<1/0&&a<o.length&&o.splice(0,o.length-a),!s){for(var d=i.now(),f=0,g=1;g<o.length&&o[g]<=d;g+=2)f=g;f&&o.splice(0,f+1)}},t}(Axe.Subject);cv.ReplaySubject=Ixe;var fv={},Oxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(fv,"__esModule",{value:!0});fv.AsyncSubject=void 0;var Txe=ha,Mxe=function(e){Oxe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._value=null,r._hasValue=!1,r._isComplete=!1,r}return t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n._hasValue,s=n._value,a=n.thrownError,d=n.isStopped,f=n._isComplete;i?r.error(a):(d||f)&&(o&&r.next(s),r.complete())},t.prototype.next=function(r){this.isStopped||(this._value=r,this._hasValue=!0)},t.prototype.complete=function(){var r=this,n=r._hasValue,i=r._value,o=r._isComplete;o||(this._isComplete=!0,n&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},t}(Txe.Subject);fv.AsyncSubject=Mxe;var cH={},MS={},Md={},LS={},Lxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(LS,"__esModule",{value:!0});LS.Action=void 0;var Rxe=za,kxe=function(e){Lxe(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t}(Rxe.Subscription);LS.Action=kxe;var fH={};(function(e){var t=Pe&&Pe.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var s=o.call(n),a,d=[],f;try{for(;(i===void 0||i-- >0)&&!(a=s.next()).done;)d.push(a.value)}catch(g){f={error:g}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return d},r=Pe&&Pe.__spreadArray||function(n,i){for(var o=0,s=i.length,a=n.length;o<s;o++,a++)n[a]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a=e.intervalProvider.delegate;return a!=null&&a.setInterval?a.setInterval.apply(a,r([n,i],t(o))):setInterval.apply(void 0,r([n,i],t(o)))},clearInterval:function(n){var i=e.intervalProvider.delegate;return((i==null?void 0:i.clearInterval)||clearInterval)(n)},delegate:void 0}})(fH);var Dxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Md,"__esModule",{value:!0});Md.AsyncAction=void 0;var Nxe=LS,LB=fH,Fxe=Mc,$xe=function(e){Dxe(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),LB.intervalProvider.setInterval(r.flush.bind(r,this),i)},t.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&LB.intervalProvider.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Fxe.arrRemove(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Nxe.Action);Md.AsyncAction=$xe;var hH={},$g={};Object.defineProperty($g,"__esModule",{value:!0});$g.TestTools=$g.Immediate=void 0;var zxe=1,rO,tE={};function RB(e){return e in tE?(delete tE[e],!0):!1}$g.Immediate={setImmediate:function(e){var t=zxe++;return tE[t]=!0,rO||(rO=Promise.resolve()),rO.then(function(){return RB(t)&&e()}),t},clearImmediate:function(e){RB(e)}};$g.TestTools={pending:function(){return Object.keys(tE).length}};(function(e){var t=Pe&&Pe.__read||function(s,a){var d=typeof Symbol=="function"&&s[Symbol.iterator];if(!d)return s;var f=d.call(s),g,_=[],b;try{for(;(a===void 0||a-- >0)&&!(g=f.next()).done;)_.push(g.value)}catch(P){b={error:P}}finally{try{g&&!g.done&&(d=f.return)&&d.call(f)}finally{if(b)throw b.error}}return _},r=Pe&&Pe.__spreadArray||function(s,a){for(var d=0,f=a.length,g=s.length;d<f;d++,g++)s[g]=a[d];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=$g,i=n.Immediate.setImmediate,o=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var d=e.immediateProvider.delegate;return((d==null?void 0:d.setImmediate)||i).apply(void 0,r([],t(s)))},clearImmediate:function(s){var a=e.immediateProvider.delegate;return((a==null?void 0:a.clearImmediate)||o)(s)},delegate:void 0}})(hH);var Bxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(MS,"__esModule",{value:!0});MS.AsapAction=void 0;var jxe=Md,kB=hH,Uxe=function(e){Bxe(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=kB.immediateProvider.setImmediate(r.flush.bind(r,void 0))))},t.prototype.recycleAsyncId=function(r,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,n,i);var s=r.actions;n!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==n&&(kB.immediateProvider.clearImmediate(n),r._scheduled===n&&(r._scheduled=void 0))},t}(jxe.AsyncAction);MS.AsapAction=Uxe;var RS={},Ld={},q_={};Object.defineProperty(q_,"__esModule",{value:!0});q_.Scheduler=void 0;var Vxe=TS,Gxe=function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=Vxe.dateTimestampProvider.now,e}();q_.Scheduler=Gxe;var qxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ld,"__esModule",{value:!0});Ld.AsyncScheduler=void 0;var DB=q_,Wxe=function(e){qxe(t,e);function t(r,n){n===void 0&&(n=DB.Scheduler.now);var i=e.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},t}(DB.Scheduler);Ld.AsyncScheduler=Wxe;var Xxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(RS,"__esModule",{value:!0});RS.AsapScheduler=void 0;var Yxe=Ld,Hxe=function(e){Xxe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(r){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,o;r=r||i.shift();do if(o=r.execute(r.state,r.delay))break;while((r=i[0])&&r.id===n&&i.shift());if(this._active=!1,o){for(;(r=i[0])&&r.id===n&&i.shift();)r.unsubscribe();throw o}},t}(Yxe.AsyncScheduler);RS.AsapScheduler=Hxe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var t=MS,r=RS;e.asapScheduler=new r.AsapScheduler(t.AsapAction),e.asap=e.asapScheduler})(cH);var Zu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var t=Md,r=Ld;e.asyncScheduler=new r.AsyncScheduler(t.AsyncAction),e.async=e.asyncScheduler})(Zu);var dH={},kS={},Zxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(kS,"__esModule",{value:!0});kS.QueueAction=void 0;var Kxe=Md,Jxe=function(e){Zxe(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},t.prototype.execute=function(r,n){return n>0||this.closed?e.prototype.execute.call(this,r,n):this._execute(r,n)},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.flush(this),0)},t}(Kxe.AsyncAction);kS.QueueAction=Jxe;var DS={},Qxe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(DS,"__esModule",{value:!0});DS.QueueScheduler=void 0;var ewe=Ld,twe=function(e){Qxe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ewe.AsyncScheduler);DS.QueueScheduler=twe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var t=kS,r=DS;e.queueScheduler=new r.QueueScheduler(t.QueueAction),e.queue=e.queueScheduler})(dH);var pH={},NS={},rwe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(NS,"__esModule",{value:!0});NS.AnimationFrameAction=void 0;var nwe=Md,NB=VN,iwe=function(e){rwe(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=NB.animationFrameProvider.requestAnimationFrame(function(){return r.flush(void 0)})))},t.prototype.recycleAsyncId=function(r,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,n,i);var s=r.actions;n!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==n&&(NB.animationFrameProvider.cancelAnimationFrame(n),r._scheduled=void 0)},t}(nwe.AsyncAction);NS.AnimationFrameAction=iwe;var FS={},owe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(FS,"__esModule",{value:!0});FS.AnimationFrameScheduler=void 0;var awe=Ld,swe=function(e){owe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(r){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,o;r=r||i.shift();do if(o=r.execute(r.state,r.delay))break;while((r=i[0])&&r.id===n&&i.shift());if(this._active=!1,o){for(;(r=i[0])&&r.id===n&&i.shift();)r.unsubscribe();throw o}},t}(awe.AsyncScheduler);FS.AnimationFrameScheduler=swe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var t=NS,r=FS;e.animationFrameScheduler=new r.AnimationFrameScheduler(t.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(pH);var zg={},mH=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(zg,"__esModule",{value:!0});zg.VirtualAction=zg.VirtualTimeScheduler=void 0;var uwe=Md,lwe=za,cwe=Ld,fwe=function(e){mH(t,e);function t(r,n){r===void 0&&(r=gH),n===void 0&&(n=1/0);var i=e.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,o,s;(s=n[0])&&s.delay<=i&&(n.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=n.shift();)s.unsubscribe();throw o}},t.frameTimeFactor=10,t}(cwe.AsyncScheduler);zg.VirtualTimeScheduler=fwe;var gH=function(e){mH(t,e);function t(r,n,i){i===void 0&&(i=r.index+=1);var o=e.call(this,r,n)||this;return o.scheduler=r,o.work=n,o.index=i,o.active=!0,o.index=r.index=i,o}return t.prototype.schedule=function(r,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)}else return lwe.Subscription.EMPTY},t.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var o=r.actions;return o.push(this),o.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(r,n,i){},t.prototype._execute=function(r,n){if(this.active===!0)return e.prototype._execute.call(this,r,n)},t.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},t}(uwe.AsyncAction);zg.VirtualAction=gH;var $S={},Cc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var t=Ti;e.EMPTY=new t.Observable(function(i){return i.complete()});function r(i){return i?n(i):e.EMPTY}e.empty=r;function n(i){return new t.Observable(function(o){return i.schedule(function(){return o.complete()})})}})(Cc);var hv={},xa={},qp={};Object.defineProperty(qp,"__esModule",{value:!0});qp.isScheduler=void 0;var hwe=wi;function dwe(e){return e&&hwe.isFunction(e.schedule)}qp.isScheduler=dwe;Object.defineProperty(xa,"__esModule",{value:!0});xa.popNumber=xa.popScheduler=xa.popResultSelector=void 0;var pwe=wi,mwe=qp;function GN(e){return e[e.length-1]}function gwe(e){return pwe.isFunction(GN(e))?e.pop():void 0}xa.popResultSelector=gwe;function vwe(e){return mwe.isScheduler(GN(e))?e.pop():void 0}xa.popScheduler=vwe;function ywe(e,t){return typeof GN(e)=="number"?e.pop():t}xa.popNumber=ywe;var Lc={},W_={},zS={},Nr={},dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.isArrayLike=void 0;dv.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var X_={};Object.defineProperty(X_,"__esModule",{value:!0});X_.isPromise=void 0;var _we=wi;function bwe(e){return _we.isFunction(e==null?void 0:e.then)}X_.isPromise=bwe;var Y_={};Object.defineProperty(Y_,"__esModule",{value:!0});Y_.isInteropObservable=void 0;var xwe=Vp,wwe=wi;function Ewe(e){return wwe.isFunction(e[xwe.observable])}Y_.isInteropObservable=Ewe;var H_={};Object.defineProperty(H_,"__esModule",{value:!0});H_.isAsyncIterable=void 0;var Swe=wi;function Pwe(e){return Symbol.asyncIterator&&Swe.isFunction(e==null?void 0:e[Symbol.asyncIterator])}H_.isAsyncIterable=Pwe;var Z_={};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.createInvalidObservableTypeError=void 0;function Awe(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}Z_.createInvalidObservableTypeError=Awe;var K_={},Pp={};Object.defineProperty(Pp,"__esModule",{value:!0});Pp.iterator=Pp.getSymbolIterator=void 0;function vH(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Pp.getSymbolIterator=vH;Pp.iterator=vH();Object.defineProperty(K_,"__esModule",{value:!0});K_.isIterable=void 0;var Cwe=Pp,Iwe=wi;function Owe(e){return Iwe.isFunction(e==null?void 0:e[Cwe.iterator])}K_.isIterable=Owe;var dd={},Twe=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Eg=Pe&&Pe.__await||function(e){return this instanceof Eg?(this.v=e,this):new Eg(e)},Mwe=Pe&&Pe.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(b){n[b]&&(i[b]=function(P){return new Promise(function(L,R){o.push([b,P,L,R])>1||a(b,P)})})}function a(b,P){try{d(n[b](P))}catch(L){_(o[0][3],L)}}function d(b){b.value instanceof Eg?Promise.resolve(b.value.v).then(f,g):_(o[0][2],b)}function f(b){a("next",b)}function g(b){a("throw",b)}function _(b,P){b(P),o.shift(),o.length&&a(o[0][0],o[0][1])}};Object.defineProperty(dd,"__esModule",{value:!0});dd.isReadableStreamLike=dd.readableStreamLikeToAsyncGenerator=void 0;var Lwe=wi;function Rwe(e){return Mwe(this,arguments,function(){var r,n,i,o;return Twe(this,function(s){switch(s.label){case 0:r=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Eg(r.read())];case 3:return n=s.sent(),i=n.value,o=n.done,o?[4,Eg(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Eg(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}dd.readableStreamLikeToAsyncGenerator=Rwe;function kwe(e){return Lwe.isFunction(e==null?void 0:e.getReader)}dd.isReadableStreamLike=kwe;var Dwe=Pe&&Pe.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(g){try{f(n.next(g))}catch(_){s(_)}}function d(g){try{f(n.throw(g))}catch(_){s(_)}}function f(g){g.done?o(g.value):i(g.value).then(a,d)}f((n=n.apply(e,t||[])).next())})},Nwe=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Fwe=Pe&&Pe.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof KM=="function"?KM(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(s){return new Promise(function(a,d){s=e[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(f){o({value:f,done:a})},s)}},KM=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.fromReadableStreamLike=Nr.fromAsyncIterable=Nr.fromIterable=Nr.fromPromise=Nr.fromArrayLike=Nr.fromInteropObservable=Nr.innerFrom=void 0;var $we=dv,zwe=X_,pv=Ti,Bwe=Y_,jwe=H_,Uwe=Z_,Vwe=K_,yH=dd,Gwe=wi,qwe=j_,Wwe=Vp;function Xwe(e){if(e instanceof pv.Observable)return e;if(e!=null){if(Bwe.isInteropObservable(e))return _H(e);if($we.isArrayLike(e))return bH(e);if(zwe.isPromise(e))return xH(e);if(jwe.isAsyncIterable(e))return qN(e);if(Vwe.isIterable(e))return wH(e);if(yH.isReadableStreamLike(e))return EH(e)}throw Uwe.createInvalidObservableTypeError(e)}Nr.innerFrom=Xwe;function _H(e){return new pv.Observable(function(t){var r=e[Wwe.observable]();if(Gwe.isFunction(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}Nr.fromInteropObservable=_H;function bH(e){return new pv.Observable(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}Nr.fromArrayLike=bH;function xH(e){return new pv.Observable(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,qwe.reportUnhandledError)})}Nr.fromPromise=xH;function wH(e){return new pv.Observable(function(t){var r,n;try{for(var i=KM(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()})}Nr.fromIterable=wH;function qN(e){return new pv.Observable(function(t){Ywe(e,t).catch(function(r){return t.error(r)})})}Nr.fromAsyncIterable=qN;function EH(e){return qN(yH.readableStreamLikeToAsyncGenerator(e))}Nr.fromReadableStreamLike=EH;function Ywe(e,t){var r,n,i,o;return Dwe(this,void 0,void 0,function(){var s,a;return Nwe(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),r=Fwe(e),d.label=1;case 1:return[4,r.next()];case 2:if(n=d.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=d.sent(),i={error:a},[3,11];case 6:return d.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}var Wp={},Rc={};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.executeSchedule=void 0;function Hwe(e,t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}Rc.executeSchedule=Hwe;Object.defineProperty(Wp,"__esModule",{value:!0});Wp.observeOn=void 0;var nO=Rc,Zwe=ir,Kwe=wr;function Jwe(e,t){return t===void 0&&(t=0),Zwe.operate(function(r,n){r.subscribe(Kwe.createOperatorSubscriber(n,function(i){return nO.executeSchedule(n,e,function(){return n.next(i)},t)},function(){return nO.executeSchedule(n,e,function(){return n.complete()},t)},function(i){return nO.executeSchedule(n,e,function(){return n.error(i)},t)}))})}Wp.observeOn=Jwe;var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});Xp.subscribeOn=void 0;var Qwe=ir;function eEe(e,t){return t===void 0&&(t=0),Qwe.operate(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}Xp.subscribeOn=eEe;Object.defineProperty(zS,"__esModule",{value:!0});zS.scheduleObservable=void 0;var tEe=Nr,rEe=Wp,nEe=Xp;function iEe(e,t){return tEe.innerFrom(e).pipe(nEe.subscribeOn(t),rEe.observeOn(t))}zS.scheduleObservable=iEe;var BS={};Object.defineProperty(BS,"__esModule",{value:!0});BS.schedulePromise=void 0;var oEe=Nr,aEe=Wp,sEe=Xp;function uEe(e,t){return oEe.innerFrom(e).pipe(sEe.subscribeOn(t),aEe.observeOn(t))}BS.schedulePromise=uEe;var jS={};Object.defineProperty(jS,"__esModule",{value:!0});jS.scheduleArray=void 0;var lEe=Ti;function cEe(e,t){return new lEe.Observable(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}jS.scheduleArray=cEe;var J_={};Object.defineProperty(J_,"__esModule",{value:!0});J_.scheduleIterable=void 0;var fEe=Ti,hEe=Pp,dEe=wi,FB=Rc;function pEe(e,t){return new fEe.Observable(function(r){var n;return FB.executeSchedule(r,t,function(){n=e[hEe.iterator](),FB.executeSchedule(r,t,function(){var i,o,s;try{i=n.next(),o=i.value,s=i.done}catch(a){r.error(a);return}s?r.complete():r.next(o)},0,!0)}),function(){return dEe.isFunction(n==null?void 0:n.return)&&n.return()}})}J_.scheduleIterable=pEe;var Q_={};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.scheduleAsyncIterable=void 0;var mEe=Ti,$B=Rc;function gEe(e,t){if(!e)throw new Error("Iterable cannot be null");return new mEe.Observable(function(r){$B.executeSchedule(r,t,function(){var n=e[Symbol.asyncIterator]();$B.executeSchedule(r,t,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}Q_.scheduleAsyncIterable=gEe;var US={};Object.defineProperty(US,"__esModule",{value:!0});US.scheduleReadableStreamLike=void 0;var vEe=Q_,yEe=dd;function _Ee(e,t){return vEe.scheduleAsyncIterable(yEe.readableStreamLikeToAsyncGenerator(e),t)}US.scheduleReadableStreamLike=_Ee;Object.defineProperty(W_,"__esModule",{value:!0});W_.scheduled=void 0;var bEe=zS,xEe=BS,wEe=jS,EEe=J_,SEe=Q_,PEe=Y_,AEe=X_,CEe=dv,IEe=K_,OEe=H_,TEe=Z_,MEe=dd,LEe=US;function REe(e,t){if(e!=null){if(PEe.isInteropObservable(e))return bEe.scheduleObservable(e,t);if(CEe.isArrayLike(e))return wEe.scheduleArray(e,t);if(AEe.isPromise(e))return xEe.schedulePromise(e,t);if(OEe.isAsyncIterable(e))return SEe.scheduleAsyncIterable(e,t);if(IEe.isIterable(e))return EEe.scheduleIterable(e,t);if(MEe.isReadableStreamLike(e))return LEe.scheduleReadableStreamLike(e,t)}throw TEe.createInvalidObservableTypeError(e)}W_.scheduled=REe;Object.defineProperty(Lc,"__esModule",{value:!0});Lc.from=void 0;var kEe=W_,DEe=Nr;function NEe(e,t){return t?kEe.scheduled(e,t):DEe.innerFrom(e)}Lc.from=NEe;Object.defineProperty(hv,"__esModule",{value:!0});hv.of=void 0;var FEe=xa,$Ee=Lc;function zEe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=FEe.popScheduler(e);return $Ee.from(e,r)}hv.of=zEe;var e1={};Object.defineProperty(e1,"__esModule",{value:!0});e1.throwError=void 0;var BEe=Ti,jEe=wi;function UEe(e,t){var r=jEe.isFunction(e)?e:function(){return e},n=function(i){return i.error(r())};return new BEe.Observable(t?function(i){return t.schedule(n,0,i)}:n)}e1.throwError=UEe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var t=Cc,r=hv,n=e1,i=wi;(function(a){a.NEXT="N",a.ERROR="E",a.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var o=function(){function a(d,f,g){this.kind=d,this.value=f,this.error=g,this.hasValue=d==="N"}return a.prototype.observe=function(d){return s(this,d)},a.prototype.do=function(d,f,g){var _=this,b=_.kind,P=_.value,L=_.error;return b==="N"?d==null?void 0:d(P):b==="E"?f==null?void 0:f(L):g==null?void 0:g()},a.prototype.accept=function(d,f,g){var _;return i.isFunction((_=d)===null||_===void 0?void 0:_.next)?this.observe(d):this.do(d,f,g)},a.prototype.toObservable=function(){var d=this,f=d.kind,g=d.value,_=d.error,b=f==="N"?r.of(g):f==="E"?n.throwError(function(){return _}):f==="C"?t.EMPTY:0;if(!b)throw new TypeError("Unexpected notification kind "+f);return b},a.createNext=function(d){return new a("N",d)},a.createError=function(d){return new a("E",void 0,d)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a}();e.Notification=o;function s(a,d){var f,g,_,b=a,P=b.kind,L=b.value,R=b.error;if(typeof P!="string")throw new TypeError('Invalid notification, missing "kind"');P==="N"?(f=d.next)===null||f===void 0||f.call(d,L):P==="E"?(g=d.error)===null||g===void 0||g.call(d,R):(_=d.complete)===null||_===void 0||_.call(d)}e.observeNotification=s})($S);var VS={};Object.defineProperty(VS,"__esModule",{value:!0});VS.isObservable=void 0;var VEe=Ti,zB=wi;function GEe(e){return!!e&&(e instanceof VEe.Observable||zB.isFunction(e.lift)&&zB.isFunction(e.subscribe))}VS.isObservable=GEe;var GS={},vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.EmptyError=void 0;var qEe=gf;vf.EmptyError=qEe.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(GS,"__esModule",{value:!0});GS.lastValueFrom=void 0;var WEe=vf;function XEe(e,t){var r=typeof t=="object";return new Promise(function(n,i){var o=!1,s;e.subscribe({next:function(a){s=a,o=!0},error:i,complete:function(){o?n(s):r?n(t.defaultValue):i(new WEe.EmptyError)}})})}GS.lastValueFrom=XEe;var qS={};Object.defineProperty(qS,"__esModule",{value:!0});qS.firstValueFrom=void 0;var YEe=vf,HEe=lv;function ZEe(e,t){var r=typeof t=="object";return new Promise(function(n,i){var o=new HEe.SafeSubscriber({next:function(s){n(s),o.unsubscribe()},error:i,complete:function(){r?n(t.defaultValue):i(new YEe.EmptyError)}});e.subscribe(o)})}qS.firstValueFrom=ZEe;var t1={};Object.defineProperty(t1,"__esModule",{value:!0});t1.ArgumentOutOfRangeError=void 0;var KEe=gf;t1.ArgumentOutOfRangeError=KEe.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var r1={};Object.defineProperty(r1,"__esModule",{value:!0});r1.NotFoundError=void 0;var JEe=gf;r1.NotFoundError=JEe.createErrorClass(function(e){return function(r){e(this),this.name="NotFoundError",this.message=r}});var n1={};Object.defineProperty(n1,"__esModule",{value:!0});n1.SequenceError=void 0;var QEe=gf;n1.SequenceError=QEe.createErrorClass(function(e){return function(r){e(this),this.name="SequenceError",this.message=r}});var rE={},mv={};Object.defineProperty(mv,"__esModule",{value:!0});mv.isValidDate=void 0;function eSe(e){return e instanceof Date&&!isNaN(e)}mv.isValidDate=eSe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var t=Zu,r=mv,n=ir,i=Nr,o=gf,s=wr,a=Rc;e.TimeoutError=o.createErrorClass(function(g){return function(b){b===void 0&&(b=null),g(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=b}});function d(g,_){var b=r.isValidDate(g)?{first:g}:typeof g=="number"?{each:g}:g,P=b.first,L=b.each,R=b.with,$=R===void 0?f:R,F=b.scheduler,T=F===void 0?_??t.asyncScheduler:F,x=b.meta,N=x===void 0?null:x;if(P==null&&L==null)throw new TypeError("No timeout provided.");return n.operate(function(B,H){var Z,Y,W=null,Q=0,me=function(ge){Y=a.executeSchedule(H,T,function(){try{Z.unsubscribe(),i.innerFrom($({meta:N,lastValue:W,seen:Q})).subscribe(H)}catch(be){H.error(be)}},ge)};Z=B.subscribe(s.createOperatorSubscriber(H,function(ge){Y==null||Y.unsubscribe(),Q++,H.next(W=ge),L>0&&me(L)},void 0,void 0,function(){Y!=null&&Y.closed||Y==null||Y.unsubscribe(),W=null})),!Q&&me(P!=null?typeof P=="number"?P:+P-T.now():L)})}e.timeout=d;function f(g){throw new e.TimeoutError(g)}})(rE);var WS={},i1={},yf={},_f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.map=void 0;var tSe=ir,rSe=wr;function nSe(e,t){return tSe.operate(function(r,n){var i=0;r.subscribe(rSe.createOperatorSubscriber(n,function(o){n.next(e.call(t,o,i++))}))})}_f.map=nSe;var iSe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},oSe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(yf,"__esModule",{value:!0});yf.mapOneOrManyArgs=void 0;var aSe=_f,sSe=Array.isArray;function uSe(e,t){return sSe(t)?e.apply(void 0,oSe([],iSe(t))):e(t)}function lSe(e){return aSe.map(function(t){return uSe(e,t)})}yf.mapOneOrManyArgs=lSe;var cSe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},BB=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(i1,"__esModule",{value:!0});i1.bindCallbackInternals=void 0;var fSe=qp,hSe=Ti,dSe=Xp,pSe=yf,mSe=Wp,gSe=fv;function JM(e,t,r,n){if(r)if(fSe.isScheduler(r))n=r;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return JM(e,t,n).apply(this,i).pipe(pSe.mapOneOrManyArgs(r))};return n?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return JM(e,t).apply(this,i).pipe(dSe.subscribeOn(n),mSe.observeOn(n))}:function(){for(var i=this,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=new gSe.AsyncSubject,d=!0;return new hSe.Observable(function(f){var g=a.subscribe(f);if(d){d=!1;var _=!1,b=!1;t.apply(i,BB(BB([],cSe(o)),[function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];if(e){var R=P.shift();if(R!=null){a.error(R);return}}a.next(1<P.length?P:P[0]),b=!0,_&&a.complete()}])),b&&a.complete(),_=!0}return g})}}i1.bindCallbackInternals=JM;Object.defineProperty(WS,"__esModule",{value:!0});WS.bindCallback=void 0;var vSe=i1;function ySe(e,t,r){return vSe.bindCallbackInternals(!1,e,t,r)}WS.bindCallback=ySe;var XS={};Object.defineProperty(XS,"__esModule",{value:!0});XS.bindNodeCallback=void 0;var _Se=i1;function bSe(e,t,r){return _Se.bindCallbackInternals(!0,e,t,r)}XS.bindNodeCallback=bSe;var pd={},o1={};Object.defineProperty(o1,"__esModule",{value:!0});o1.argsArgArrayOrObject=void 0;var xSe=Array.isArray,wSe=Object.getPrototypeOf,ESe=Object.prototype,SSe=Object.keys;function PSe(e){if(e.length===1){var t=e[0];if(xSe(t))return{args:t,keys:null};if(ASe(t)){var r=SSe(t);return{args:r.map(function(n){return t[n]}),keys:r}}}return{args:e,keys:null}}o1.argsArgArrayOrObject=PSe;function ASe(e){return e&&typeof e=="object"&&wSe(e)===ESe}var a1={};Object.defineProperty(a1,"__esModule",{value:!0});a1.createObject=void 0;function CSe(e,t){return e.reduce(function(r,n,i){return r[n]=t[i],r},{})}a1.createObject=CSe;Object.defineProperty(pd,"__esModule",{value:!0});pd.combineLatestInit=pd.combineLatest=void 0;var ISe=Ti,OSe=o1,SH=Lc,PH=Va,TSe=yf,jB=xa,MSe=a1,LSe=wr,RSe=Rc;function kSe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=jB.popScheduler(e),n=jB.popResultSelector(e),i=OSe.argsArgArrayOrObject(e),o=i.args,s=i.keys;if(o.length===0)return SH.from([],r);var a=new ISe.Observable(AH(o,r,s?function(d){return MSe.createObject(s,d)}:PH.identity));return n?a.pipe(TSe.mapOneOrManyArgs(n)):a}pd.combineLatest=kSe;function AH(e,t,r){return r===void 0&&(r=PH.identity),function(n){UB(t,function(){for(var i=e.length,o=new Array(i),s=i,a=i,d=function(g){UB(t,function(){var _=SH.from(e[g],t),b=!1;_.subscribe(LSe.createOperatorSubscriber(n,function(P){o[g]=P,b||(b=!0,a--),a||n.next(r(o.slice()))},function(){--s||n.complete()}))},n)},f=0;f<i;f++)d(f)},n)}}pd.combineLatestInit=AH;function UB(e,t,r){e?RSe.executeSchedule(r,e,t):t()}var Yp={},gv={},Hp={},kc={},vv={};Object.defineProperty(vv,"__esModule",{value:!0});vv.mergeInternals=void 0;var DSe=Nr,NSe=Rc,VB=wr;function FSe(e,t,r,n,i,o,s,a){var d=[],f=0,g=0,_=!1,b=function(){_&&!d.length&&!f&&t.complete()},P=function(R){return f<n?L(R):d.push(R)},L=function(R){o&&t.next(R),f++;var $=!1;DSe.innerFrom(r(R,g++)).subscribe(VB.createOperatorSubscriber(t,function(F){i==null||i(F),o?P(F):t.next(F)},function(){$=!0},void 0,function(){if($)try{f--;for(var F=function(){var T=d.shift();s?NSe.executeSchedule(t,s,function(){return L(T)}):L(T)};d.length&&f<n;)F();b()}catch(T){t.error(T)}}))};return e.subscribe(VB.createOperatorSubscriber(t,P,function(){_=!0,b()})),function(){a==null||a()}}vv.mergeInternals=FSe;Object.defineProperty(kc,"__esModule",{value:!0});kc.mergeMap=void 0;var $Se=_f,zSe=Nr,BSe=ir,jSe=vv,USe=wi;function CH(e,t,r){return r===void 0&&(r=1/0),USe.isFunction(t)?CH(function(n,i){return $Se.map(function(o,s){return t(n,o,i,s)})(zSe.innerFrom(e(n,i)))},r):(typeof t=="number"&&(r=t),BSe.operate(function(n,i){return jSe.mergeInternals(n,i,e,r)}))}kc.mergeMap=CH;Object.defineProperty(Hp,"__esModule",{value:!0});Hp.mergeAll=void 0;var VSe=kc,GSe=Va;function qSe(e){return e===void 0&&(e=1/0),VSe.mergeMap(GSe.identity,e)}Hp.mergeAll=qSe;Object.defineProperty(gv,"__esModule",{value:!0});gv.concatAll=void 0;var WSe=Hp;function XSe(){return WSe.mergeAll(1)}gv.concatAll=XSe;Object.defineProperty(Yp,"__esModule",{value:!0});Yp.concat=void 0;var YSe=gv,HSe=xa,ZSe=Lc;function KSe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return YSe.concatAll()(ZSe.from(e,HSe.popScheduler(e)))}Yp.concat=KSe;var YS={},Zp={};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.defer=void 0;var JSe=Ti,QSe=Nr;function ePe(e){return new JSe.Observable(function(t){QSe.innerFrom(e()).subscribe(t)})}Zp.defer=ePe;Object.defineProperty(YS,"__esModule",{value:!0});YS.connectable=void 0;var tPe=ha,rPe=Ti,nPe=Zp,iPe={connector:function(){return new tPe.Subject},resetOnDisconnect:!0};function oPe(e,t){t===void 0&&(t=iPe);var r=null,n=t.connector,i=t.resetOnDisconnect,o=i===void 0?!0:i,s=n(),a=new rPe.Observable(function(d){return s.subscribe(d)});return a.connect=function(){return(!r||r.closed)&&(r=nPe.defer(function(){return e}).subscribe(s),o&&r.add(function(){return s=n()})),r},a}YS.connectable=oPe;var HS={};Object.defineProperty(HS,"__esModule",{value:!0});HS.forkJoin=void 0;var aPe=Ti,sPe=o1,uPe=Nr,lPe=xa,cPe=wr,fPe=yf,hPe=a1;function dPe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=lPe.popResultSelector(e),n=sPe.argsArgArrayOrObject(e),i=n.args,o=n.keys,s=new aPe.Observable(function(a){var d=i.length;if(!d){a.complete();return}for(var f=new Array(d),g=d,_=d,b=function(L){var R=!1;uPe.innerFrom(i[L]).subscribe(cPe.createOperatorSubscriber(a,function($){R||(R=!0,_--),f[L]=$},function(){return g--},void 0,function(){(!g||!R)&&(_||a.next(o?hPe.createObject(o,f):f),a.complete())}))},P=0;P<d;P++)b(P)});return r?s.pipe(fPe.mapOneOrManyArgs(r)):s}HS.forkJoin=dPe;var ZS={},pPe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o};Object.defineProperty(ZS,"__esModule",{value:!0});ZS.fromEvent=void 0;var mPe=Nr,gPe=Ti,vPe=kc,yPe=dv,Ap=wi,_Pe=yf,bPe=["addListener","removeListener"],xPe=["addEventListener","removeEventListener"],wPe=["on","off"];function QM(e,t,r,n){if(Ap.isFunction(r)&&(n=r,r=void 0),n)return QM(e,t,r).pipe(_Pe.mapOneOrManyArgs(n));var i=pPe(PPe(e)?xPe.map(function(a){return function(d){return e[a](t,d,r)}}):EPe(e)?bPe.map(GB(e,t)):SPe(e)?wPe.map(GB(e,t)):[],2),o=i[0],s=i[1];if(!o&&yPe.isArrayLike(e))return vPe.mergeMap(function(a){return QM(a,t,r)})(mPe.innerFrom(e));if(!o)throw new TypeError("Invalid event target");return new gPe.Observable(function(a){var d=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];return a.next(1<f.length?f:f[0])};return o(d),function(){return s(d)}})}ZS.fromEvent=QM;function GB(e,t){return function(r){return function(n){return e[r](t,n)}}}function EPe(e){return Ap.isFunction(e.addListener)&&Ap.isFunction(e.removeListener)}function SPe(e){return Ap.isFunction(e.on)&&Ap.isFunction(e.off)}function PPe(e){return Ap.isFunction(e.addEventListener)&&Ap.isFunction(e.removeEventListener)}var KS={};Object.defineProperty(KS,"__esModule",{value:!0});KS.fromEventPattern=void 0;var APe=Ti,CPe=wi,IPe=yf;function IH(e,t,r){return r?IH(e,t).pipe(IPe.mapOneOrManyArgs(r)):new APe.Observable(function(n){var i=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return n.next(s.length===1?s[0]:s)},o=e(i);return CPe.isFunction(t)?function(){return t(i,o)}:void 0})}KS.fromEventPattern=IH;var JS={},OPe=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(JS,"__esModule",{value:!0});JS.generate=void 0;var qB=Va,TPe=qp,MPe=Zp,LPe=J_;function RPe(e,t,r,n,i){var o,s,a,d;arguments.length===1?(o=e,d=o.initialState,t=o.condition,r=o.iterate,s=o.resultSelector,a=s===void 0?qB.identity:s,i=o.scheduler):(d=e,!n||TPe.isScheduler(n)?(a=qB.identity,i=n):a=n);function f(){var g;return OPe(this,function(_){switch(_.label){case 0:g=d,_.label=1;case 1:return!t||t(g)?[4,a(g)]:[3,4];case 2:_.sent(),_.label=3;case 3:return g=r(g),[3,1];case 4:return[2]}})}return MPe.defer(i?function(){return LPe.scheduleIterable(f(),i)}:f)}JS.generate=RPe;var QS={};Object.defineProperty(QS,"__esModule",{value:!0});QS.iif=void 0;var kPe=Zp;function DPe(e,t,r){return kPe.defer(function(){return e()?t:r})}QS.iif=DPe;var s1={},bf={};Object.defineProperty(bf,"__esModule",{value:!0});bf.timer=void 0;var NPe=Ti,FPe=Zu,$Pe=qp,zPe=mv;function BPe(e,t,r){e===void 0&&(e=0),r===void 0&&(r=FPe.async);var n=-1;return t!=null&&($Pe.isScheduler(t)?r=t:n=t),new NPe.Observable(function(i){var o=zPe.isValidDate(e)?+e-r.now():e;o<0&&(o=0);var s=0;return r.schedule(function(){i.closed||(i.next(s++),0<=n?this.schedule(void 0,n):i.complete())},o)})}bf.timer=BPe;Object.defineProperty(s1,"__esModule",{value:!0});s1.interval=void 0;var jPe=Zu,UPe=bf;function VPe(e,t){return e===void 0&&(e=0),t===void 0&&(t=jPe.asyncScheduler),e<0&&(e=0),UPe.timer(e,e,t)}s1.interval=VPe;var eP={};Object.defineProperty(eP,"__esModule",{value:!0});eP.merge=void 0;var GPe=Hp,qPe=Nr,WPe=Cc,WB=xa,XPe=Lc;function YPe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=WB.popScheduler(e),n=WB.popNumber(e,1/0),i=e;return i.length?i.length===1?qPe.innerFrom(i[0]):GPe.mergeAll(n)(XPe.from(i,r)):WPe.EMPTY}eP.merge=YPe;var eL={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var t=Ti,r=Ua;e.NEVER=new t.Observable(r.noop);function n(){return e.NEVER}e.never=n})(eL);var u1={},vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.argsOrArgArray=void 0;var HPe=Array.isArray;function ZPe(e){return e.length===1&&HPe(e[0])?e[0]:e}vh.argsOrArgArray=ZPe;Object.defineProperty(u1,"__esModule",{value:!0});u1.onErrorResumeNext=void 0;var KPe=Ti,JPe=vh,QPe=wr,XB=Ua,e2e=Nr;function t2e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=JPe.argsOrArgArray(e);return new KPe.Observable(function(n){var i=0,o=function(){if(i<r.length){var s=void 0;try{s=e2e.innerFrom(r[i++])}catch{o();return}var a=new QPe.OperatorSubscriber(n,void 0,XB.noop,XB.noop);s.subscribe(a),a.add(o)}else n.complete()};o()})}u1.onErrorResumeNext=t2e;var tP={};Object.defineProperty(tP,"__esModule",{value:!0});tP.pairs=void 0;var r2e=Lc;function n2e(e,t){return r2e.from(Object.entries(e),t)}tP.pairs=n2e;var rP={},nP={};Object.defineProperty(nP,"__esModule",{value:!0});nP.not=void 0;function i2e(e,t){return function(r,n){return!e.call(t,r,n)}}nP.not=i2e;var yh={};Object.defineProperty(yh,"__esModule",{value:!0});yh.filter=void 0;var o2e=ir,a2e=wr;function s2e(e,t){return o2e.operate(function(r,n){var i=0;r.subscribe(a2e.createOperatorSubscriber(n,function(o){return e.call(t,o,i++)&&n.next(o)}))})}yh.filter=s2e;Object.defineProperty(rP,"__esModule",{value:!0});rP.partition=void 0;var u2e=nP,YB=yh,HB=Nr;function l2e(e,t,r){return[YB.filter(t,r)(HB.innerFrom(e)),YB.filter(u2e.not(t,r))(HB.innerFrom(e))]}rP.partition=l2e;var Cp={};Object.defineProperty(Cp,"__esModule",{value:!0});Cp.raceInit=Cp.race=void 0;var c2e=Ti,OH=Nr,f2e=vh,h2e=wr;function d2e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=f2e.argsOrArgArray(e),e.length===1?OH.innerFrom(e[0]):new c2e.Observable(TH(e))}Cp.race=d2e;function TH(e){return function(t){for(var r=[],n=function(o){r.push(OH.innerFrom(e[o]).subscribe(h2e.createOperatorSubscriber(t,function(s){if(r){for(var a=0;a<r.length;a++)a!==o&&r[a].unsubscribe();r=null}t.next(s)})))},i=0;r&&!t.closed&&i<e.length;i++)n(i)}}Cp.raceInit=TH;var iP={};Object.defineProperty(iP,"__esModule",{value:!0});iP.range=void 0;var p2e=Ti,m2e=Cc;function g2e(e,t,r){if(t==null&&(t=e,e=0),t<=0)return m2e.EMPTY;var n=t+e;return new p2e.Observable(r?function(i){var o=e;return r.schedule(function(){o<n?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=e;o<n&&!i.closed;)i.next(o++);i.complete()})}iP.range=g2e;var oP={};Object.defineProperty(oP,"__esModule",{value:!0});oP.using=void 0;var v2e=Ti,y2e=Nr,_2e=Cc;function b2e(e,t){return new v2e.Observable(function(r){var n=e(),i=t(n),o=i?y2e.innerFrom(i):_2e.EMPTY;return o.subscribe(r),function(){n&&n.unsubscribe()}})}oP.using=b2e;var yv={},x2e=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},w2e=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(yv,"__esModule",{value:!0});yv.zip=void 0;var E2e=Ti,S2e=Nr,P2e=vh,A2e=Cc,C2e=wr,I2e=xa;function O2e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=I2e.popResultSelector(e),n=P2e.argsOrArgArray(e);return n.length?new E2e.Observable(function(i){var o=n.map(function(){return[]}),s=n.map(function(){return!1});i.add(function(){o=s=null});for(var a=function(f){S2e.innerFrom(n[f]).subscribe(C2e.createOperatorSubscriber(i,function(g){if(o[f].push(g),o.every(function(b){return b.length})){var _=o.map(function(b){return b.shift()});i.next(r?r.apply(void 0,w2e([],x2e(_))):_),o.some(function(b,P){return!b.length&&s[P]})&&i.complete()}},function(){s[f]=!0,!o[f].length&&i.complete()}))},d=0;!i.closed&&d<n.length;d++)a(d);return function(){o=s=null}}):A2e.EMPTY}yv.zip=O2e;var MH={};Object.defineProperty(MH,"__esModule",{value:!0});var l1={};Object.defineProperty(l1,"__esModule",{value:!0});l1.audit=void 0;var T2e=ir,M2e=Nr,ZB=wr;function L2e(e){return T2e.operate(function(t,r){var n=!1,i=null,o=null,s=!1,a=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var f=i;i=null,r.next(f)}s&&r.complete()},d=function(){o=null,s&&r.complete()};t.subscribe(ZB.createOperatorSubscriber(r,function(f){n=!0,i=f,o||M2e.innerFrom(e(f)).subscribe(o=ZB.createOperatorSubscriber(r,a,d))},function(){s=!0,(!n||!o||o.closed)&&r.complete()}))})}l1.audit=L2e;var aP={};Object.defineProperty(aP,"__esModule",{value:!0});aP.auditTime=void 0;var R2e=Zu,k2e=l1,D2e=bf;function N2e(e,t){return t===void 0&&(t=R2e.asyncScheduler),k2e.audit(function(){return D2e.timer(e,t)})}aP.auditTime=N2e;var sP={};Object.defineProperty(sP,"__esModule",{value:!0});sP.buffer=void 0;var F2e=ir,$2e=Ua,KB=wr,z2e=Nr;function B2e(e){return F2e.operate(function(t,r){var n=[];return t.subscribe(KB.createOperatorSubscriber(r,function(i){return n.push(i)},function(){r.next(n),r.complete()})),z2e.innerFrom(e).subscribe(KB.createOperatorSubscriber(r,function(){var i=n;n=[],r.next(i)},$2e.noop)),function(){n=null}})}sP.buffer=B2e;var uP={},iO=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(uP,"__esModule",{value:!0});uP.bufferCount=void 0;var j2e=ir,U2e=wr,V2e=Mc;function G2e(e,t){return t===void 0&&(t=null),t=t??e,j2e.operate(function(r,n){var i=[],o=0;r.subscribe(U2e.createOperatorSubscriber(n,function(s){var a,d,f,g,_=null;o++%t===0&&i.push([]);try{for(var b=iO(i),P=b.next();!P.done;P=b.next()){var L=P.value;L.push(s),e<=L.length&&(_=_??[],_.push(L))}}catch(F){a={error:F}}finally{try{P&&!P.done&&(d=b.return)&&d.call(b)}finally{if(a)throw a.error}}if(_)try{for(var R=iO(_),$=R.next();!$.done;$=R.next()){var L=$.value;V2e.arrRemove(i,L),n.next(L)}}catch(F){f={error:F}}finally{try{$&&!$.done&&(g=R.return)&&g.call(R)}finally{if(f)throw f.error}}},function(){var s,a;try{for(var d=iO(i),f=d.next();!f.done;f=d.next()){var g=f.value;n.next(g)}}catch(_){s={error:_}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}n.complete()},void 0,function(){i=null}))})}uP.bufferCount=G2e;var lP={},q2e=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(lP,"__esModule",{value:!0});lP.bufferTime=void 0;var W2e=za,X2e=ir,Y2e=wr,H2e=Mc,Z2e=Zu,K2e=xa,JB=Rc;function J2e(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(t=K2e.popScheduler(n))!==null&&t!==void 0?t:Z2e.asyncScheduler,s=(r=n[0])!==null&&r!==void 0?r:null,a=n[1]||1/0;return X2e.operate(function(d,f){var g=[],_=!1,b=function(R){var $=R.buffer,F=R.subs;F.unsubscribe(),H2e.arrRemove(g,R),f.next($),_&&P()},P=function(){if(g){var R=new W2e.Subscription;f.add(R);var $=[],F={buffer:$,subs:R};g.push(F),JB.executeSchedule(R,o,function(){return b(F)},e)}};s!==null&&s>=0?JB.executeSchedule(f,o,P,s,!0):_=!0,P();var L=Y2e.createOperatorSubscriber(f,function(R){var $,F,T=g.slice();try{for(var x=q2e(T),N=x.next();!N.done;N=x.next()){var B=N.value,H=B.buffer;H.push(R),a<=H.length&&b(B)}}catch(Z){$={error:Z}}finally{try{N&&!N.done&&(F=x.return)&&F.call(x)}finally{if($)throw $.error}}},function(){for(;g!=null&&g.length;)f.next(g.shift().buffer);L==null||L.unsubscribe(),f.complete(),f.unsubscribe()},void 0,function(){return g=null});d.subscribe(L)})}lP.bufferTime=J2e;var cP={},Q2e=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(cP,"__esModule",{value:!0});cP.bufferToggle=void 0;var eAe=za,tAe=ir,QB=Nr,oO=wr,e8=Ua,rAe=Mc;function nAe(e,t){return tAe.operate(function(r,n){var i=[];QB.innerFrom(e).subscribe(oO.createOperatorSubscriber(n,function(o){var s=[];i.push(s);var a=new eAe.Subscription,d=function(){rAe.arrRemove(i,s),n.next(s),a.unsubscribe()};a.add(QB.innerFrom(t(o)).subscribe(oO.createOperatorSubscriber(n,d,e8.noop)))},e8.noop)),r.subscribe(oO.createOperatorSubscriber(n,function(o){var s,a;try{for(var d=Q2e(i),f=d.next();!f.done;f=d.next()){var g=f.value;g.push(o)}}catch(_){s={error:_}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}cP.bufferToggle=nAe;var fP={};Object.defineProperty(fP,"__esModule",{value:!0});fP.bufferWhen=void 0;var iAe=ir,oAe=Ua,t8=wr,aAe=Nr;function sAe(e){return iAe.operate(function(t,r){var n=null,i=null,o=function(){i==null||i.unsubscribe();var s=n;n=[],s&&r.next(s),aAe.innerFrom(e()).subscribe(i=t8.createOperatorSubscriber(r,o,oAe.noop))};o(),t.subscribe(t8.createOperatorSubscriber(r,function(s){return n==null?void 0:n.push(s)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=i=null}))})}fP.bufferWhen=sAe;var hP={};Object.defineProperty(hP,"__esModule",{value:!0});hP.catchError=void 0;var uAe=Nr,lAe=wr,cAe=ir;function LH(e){return cAe.operate(function(t,r){var n=null,i=!1,o;n=t.subscribe(lAe.createOperatorSubscriber(r,void 0,void 0,function(s){o=uAe.innerFrom(e(s,LH(e)(t))),n?(n.unsubscribe(),n=null,o.subscribe(r)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(r))})}hP.catchError=LH;var dP={},c1={},f1={},h1={},Rd={},d1={};Object.defineProperty(d1,"__esModule",{value:!0});d1.scanInternals=void 0;var fAe=wr;function hAe(e,t,r,n,i){return function(o,s){var a=r,d=t,f=0;o.subscribe(fAe.createOperatorSubscriber(s,function(g){var _=f++;d=a?e(d,g,_):(a=!0,g),n&&s.next(d)},i&&function(){a&&s.next(d),s.complete()}))}}d1.scanInternals=hAe;Object.defineProperty(Rd,"__esModule",{value:!0});Rd.reduce=void 0;var dAe=d1,pAe=ir;function mAe(e,t){return pAe.operate(dAe.scanInternals(e,t,arguments.length>=2,!1,!0))}Rd.reduce=mAe;Object.defineProperty(h1,"__esModule",{value:!0});h1.toArray=void 0;var gAe=Rd,vAe=ir,yAe=function(e,t){return e.push(t),e};function _Ae(){return vAe.operate(function(e,t){gAe.reduce(yAe,[])(e).subscribe(t)})}h1.toArray=_Ae;Object.defineProperty(f1,"__esModule",{value:!0});f1.joinAllInternals=void 0;var bAe=Va,xAe=yf,wAe=ah,EAe=kc,SAe=h1;function PAe(e,t){return wAe.pipe(SAe.toArray(),EAe.mergeMap(function(r){return e(r)}),t?xAe.mapOneOrManyArgs(t):bAe.identity)}f1.joinAllInternals=PAe;Object.defineProperty(c1,"__esModule",{value:!0});c1.combineLatestAll=void 0;var AAe=pd,CAe=f1;function IAe(e){return CAe.joinAllInternals(AAe.combineLatest,e)}c1.combineLatestAll=IAe;Object.defineProperty(dP,"__esModule",{value:!0});dP.combineAll=void 0;var OAe=c1;dP.combineAll=OAe.combineLatestAll;var pP={},mP={},r8=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},n8=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(mP,"__esModule",{value:!0});mP.combineLatest=void 0;var TAe=pd,MAe=ir,LAe=vh,RAe=yf,kAe=ah,DAe=xa;function RH(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=DAe.popResultSelector(e);return r?kAe.pipe(RH.apply(void 0,n8([],r8(e))),RAe.mapOneOrManyArgs(r)):MAe.operate(function(n,i){TAe.combineLatestInit(n8([n],r8(LAe.argsOrArgArray(e))))(i)})}mP.combineLatest=RH;var NAe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},FAe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(pP,"__esModule",{value:!0});pP.combineLatestWith=void 0;var $Ae=mP;function zAe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $Ae.combineLatest.apply(void 0,FAe([],NAe(e)))}pP.combineLatestWith=zAe;var p1={};Object.defineProperty(p1,"__esModule",{value:!0});p1.concatMap=void 0;var i8=kc,BAe=wi;function jAe(e,t){return BAe.isFunction(t)?i8.mergeMap(e,t,1):i8.mergeMap(e,1)}p1.concatMap=jAe;var gP={};Object.defineProperty(gP,"__esModule",{value:!0});gP.concatMapTo=void 0;var o8=p1,UAe=wi;function VAe(e,t){return UAe.isFunction(t)?o8.concatMap(function(){return e},t):o8.concatMap(function(){return e})}gP.concatMapTo=VAe;var vP={},yP={},GAe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},qAe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(yP,"__esModule",{value:!0});yP.concat=void 0;var WAe=ir,XAe=gv,YAe=xa,HAe=Lc;function ZAe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=YAe.popScheduler(e);return WAe.operate(function(n,i){XAe.concatAll()(HAe.from(qAe([n],GAe(e)),r)).subscribe(i)})}yP.concat=ZAe;var KAe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},JAe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(vP,"__esModule",{value:!0});vP.concatWith=void 0;var QAe=yP;function eCe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return QAe.concat.apply(void 0,JAe([],KAe(e)))}vP.concatWith=eCe;var _v={},_P={};Object.defineProperty(_P,"__esModule",{value:!0});_P.fromSubscribable=void 0;var tCe=Ti;function rCe(e){return new tCe.Observable(function(t){return e.subscribe(t)})}_P.fromSubscribable=rCe;Object.defineProperty(_v,"__esModule",{value:!0});_v.connect=void 0;var nCe=ha,iCe=Nr,oCe=ir,aCe=_P,sCe={connector:function(){return new nCe.Subject}};function uCe(e,t){t===void 0&&(t=sCe);var r=t.connector;return oCe.operate(function(n,i){var o=r();iCe.innerFrom(e(aCe.fromSubscribable(o))).subscribe(i),i.add(n.subscribe(o))})}_v.connect=uCe;var bP={};Object.defineProperty(bP,"__esModule",{value:!0});bP.count=void 0;var lCe=Rd;function cCe(e){return lCe.reduce(function(t,r,n){return!e||e(r,n)?t+1:t},0)}bP.count=cCe;var xP={};Object.defineProperty(xP,"__esModule",{value:!0});xP.debounce=void 0;var fCe=ir,hCe=Ua,a8=wr,dCe=Nr;function pCe(e){return fCe.operate(function(t,r){var n=!1,i=null,o=null,s=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var a=i;i=null,r.next(a)}};t.subscribe(a8.createOperatorSubscriber(r,function(a){o==null||o.unsubscribe(),n=!0,i=a,o=a8.createOperatorSubscriber(r,s,hCe.noop),dCe.innerFrom(e(a)).subscribe(o)},function(){s(),r.complete()},void 0,function(){i=o=null}))})}xP.debounce=pCe;var wP={};Object.defineProperty(wP,"__esModule",{value:!0});wP.debounceTime=void 0;var mCe=Zu,gCe=ir,vCe=wr;function yCe(e,t){return t===void 0&&(t=mCe.asyncScheduler),gCe.operate(function(r,n){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var f=o;o=null,n.next(f)}};function d(){var f=s+e,g=t.now();if(g<f){i=this.schedule(void 0,f-g),n.add(i);return}a()}r.subscribe(vCe.createOperatorSubscriber(n,function(f){o=f,s=t.now(),i||(i=t.schedule(d,e),n.add(i))},function(){a(),n.complete()},void 0,function(){o=i=null}))})}wP.debounceTime=yCe;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.defaultIfEmpty=void 0;var _Ce=ir,bCe=wr;function xCe(e){return _Ce.operate(function(t,r){var n=!1;t.subscribe(bCe.createOperatorSubscriber(r,function(i){n=!0,r.next(i)},function(){n||r.next(e),r.complete()}))})}Kp.defaultIfEmpty=xCe;var EP={},m1={},Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.take=void 0;var wCe=Cc,ECe=ir,SCe=wr;function PCe(e){return e<=0?function(){return wCe.EMPTY}:ECe.operate(function(t,r){var n=0;t.subscribe(SCe.createOperatorSubscriber(r,function(i){++n<=e&&(r.next(i),e<=n&&r.complete())}))})}Jp.take=PCe;var g1={};Object.defineProperty(g1,"__esModule",{value:!0});g1.ignoreElements=void 0;var ACe=ir,CCe=wr,ICe=Ua;function OCe(){return ACe.operate(function(e,t){e.subscribe(CCe.createOperatorSubscriber(t,ICe.noop))})}g1.ignoreElements=OCe;var v1={};Object.defineProperty(v1,"__esModule",{value:!0});v1.mapTo=void 0;var TCe=_f;function MCe(e){return TCe.map(function(){return e})}v1.mapTo=MCe;Object.defineProperty(m1,"__esModule",{value:!0});m1.delayWhen=void 0;var LCe=Yp,s8=Jp,RCe=g1,kCe=v1,DCe=kc,NCe=Nr;function kH(e,t){return t?function(r){return LCe.concat(t.pipe(s8.take(1),RCe.ignoreElements()),r.pipe(kH(e)))}:DCe.mergeMap(function(r,n){return NCe.innerFrom(e(r,n)).pipe(s8.take(1),kCe.mapTo(r))})}m1.delayWhen=kH;Object.defineProperty(EP,"__esModule",{value:!0});EP.delay=void 0;var FCe=Zu,$Ce=m1,zCe=bf;function BCe(e,t){t===void 0&&(t=FCe.asyncScheduler);var r=zCe.timer(e,t);return $Ce.delayWhen(function(){return r})}EP.delay=BCe;var SP={};Object.defineProperty(SP,"__esModule",{value:!0});SP.dematerialize=void 0;var jCe=$S,UCe=ir,VCe=wr;function GCe(){return UCe.operate(function(e,t){e.subscribe(VCe.createOperatorSubscriber(t,function(r){return jCe.observeNotification(r,t)}))})}SP.dematerialize=GCe;var PP={};Object.defineProperty(PP,"__esModule",{value:!0});PP.distinct=void 0;var qCe=ir,u8=wr,WCe=Ua,XCe=Nr;function YCe(e,t){return qCe.operate(function(r,n){var i=new Set;r.subscribe(u8.createOperatorSubscriber(n,function(o){var s=e?e(o):o;i.has(s)||(i.add(s),n.next(o))})),t&&XCe.innerFrom(t).subscribe(u8.createOperatorSubscriber(n,function(){return i.clear()},WCe.noop))})}PP.distinct=YCe;var y1={};Object.defineProperty(y1,"__esModule",{value:!0});y1.distinctUntilChanged=void 0;var HCe=Va,ZCe=ir,KCe=wr;function JCe(e,t){return t===void 0&&(t=HCe.identity),e=e??QCe,ZCe.operate(function(r,n){var i,o=!0;r.subscribe(KCe.createOperatorSubscriber(n,function(s){var a=t(s);(o||!e(i,a))&&(o=!1,i=a,n.next(s))}))})}y1.distinctUntilChanged=JCe;function QCe(e,t){return e===t}var AP={};Object.defineProperty(AP,"__esModule",{value:!0});AP.distinctUntilKeyChanged=void 0;var eIe=y1;function tIe(e,t){return eIe.distinctUntilChanged(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}AP.distinctUntilKeyChanged=tIe;var CP={},Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.throwIfEmpty=void 0;var rIe=vf,nIe=ir,iIe=wr;function oIe(e){return e===void 0&&(e=aIe),nIe.operate(function(t,r){var n=!1;t.subscribe(iIe.createOperatorSubscriber(r,function(i){n=!0,r.next(i)},function(){return n?r.complete():r.error(e())}))})}Qp.throwIfEmpty=oIe;function aIe(){return new rIe.EmptyError}Object.defineProperty(CP,"__esModule",{value:!0});CP.elementAt=void 0;var l8=t1,sIe=yh,uIe=Qp,lIe=Kp,cIe=Jp;function fIe(e,t){if(e<0)throw new l8.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(n){return n.pipe(sIe.filter(function(i,o){return o===e}),cIe.take(1),r?lIe.defaultIfEmpty(t):uIe.throwIfEmpty(function(){return new l8.ArgumentOutOfRangeError}))}}CP.elementAt=fIe;var IP={},hIe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},dIe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(IP,"__esModule",{value:!0});IP.endWith=void 0;var pIe=Yp,mIe=hv;function gIe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return pIe.concat(r,mIe.of.apply(void 0,dIe([],hIe(e))))}}IP.endWith=gIe;var OP={};Object.defineProperty(OP,"__esModule",{value:!0});OP.every=void 0;var vIe=ir,yIe=wr;function _Ie(e,t){return vIe.operate(function(r,n){var i=0;r.subscribe(yIe.createOperatorSubscriber(n,function(o){e.call(t,o,i++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}OP.every=_Ie;var TP={},_1={},b1={};Object.defineProperty(b1,"__esModule",{value:!0});b1.exhaustMap=void 0;var bIe=_f,c8=Nr,xIe=ir,f8=wr;function DH(e,t){return t?function(r){return r.pipe(DH(function(n,i){return c8.innerFrom(e(n,i)).pipe(bIe.map(function(o,s){return t(n,o,i,s)}))}))}:xIe.operate(function(r,n){var i=0,o=null,s=!1;r.subscribe(f8.createOperatorSubscriber(n,function(a){o||(o=f8.createOperatorSubscriber(n,void 0,function(){o=null,s&&n.complete()}),c8.innerFrom(e(a,i++)).subscribe(o))},function(){s=!0,!o&&n.complete()}))})}b1.exhaustMap=DH;Object.defineProperty(_1,"__esModule",{value:!0});_1.exhaustAll=void 0;var wIe=b1,EIe=Va;function SIe(){return wIe.exhaustMap(EIe.identity)}_1.exhaustAll=SIe;Object.defineProperty(TP,"__esModule",{value:!0});TP.exhaust=void 0;var PIe=_1;TP.exhaust=PIe.exhaustAll;var MP={};Object.defineProperty(MP,"__esModule",{value:!0});MP.expand=void 0;var AIe=ir,CIe=vv;function IIe(e,t,r){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,AIe.operate(function(n,i){return CIe.mergeInternals(n,i,e,t,void 0,!0,r)})}MP.expand=IIe;var LP={};Object.defineProperty(LP,"__esModule",{value:!0});LP.finalize=void 0;var OIe=ir;function TIe(e){return OIe.operate(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}LP.finalize=TIe;var Ip={};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.createFind=Ip.find=void 0;var MIe=ir,LIe=wr;function RIe(e,t){return MIe.operate(NH(e,t,"value"))}Ip.find=RIe;function NH(e,t,r){var n=r==="index";return function(i,o){var s=0;i.subscribe(LIe.createOperatorSubscriber(o,function(a){var d=s++;e.call(t,a,d,i)&&(o.next(n?d:a),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}Ip.createFind=NH;var RP={};Object.defineProperty(RP,"__esModule",{value:!0});RP.findIndex=void 0;var kIe=ir,DIe=Ip;function NIe(e,t){return kIe.operate(DIe.createFind(e,t,"index"))}RP.findIndex=NIe;var kP={};Object.defineProperty(kP,"__esModule",{value:!0});kP.first=void 0;var FIe=vf,$Ie=yh,zIe=Jp,BIe=Kp,jIe=Qp,UIe=Va;function VIe(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?$Ie.filter(function(i,o){return e(i,o,n)}):UIe.identity,zIe.take(1),r?BIe.defaultIfEmpty(t):jIe.throwIfEmpty(function(){return new FIe.EmptyError}))}}kP.first=VIe;var DP={};Object.defineProperty(DP,"__esModule",{value:!0});DP.groupBy=void 0;var GIe=Ti,qIe=Nr,WIe=ha,XIe=ir,h8=wr;function YIe(e,t,r,n){return XIe.operate(function(i,o){var s;!t||typeof t=="function"?s=t:(r=t.duration,s=t.element,n=t.connector);var a=new Map,d=function(L){a.forEach(L),L(o)},f=function(L){return d(function(R){return R.error(L)})},g=0,_=!1,b=new h8.OperatorSubscriber(o,function(L){try{var R=e(L),$=a.get(R);if(!$){a.set(R,$=n?n():new WIe.Subject);var F=P(R,$);if(o.next(F),r){var T=h8.createOperatorSubscriber($,function(){$.complete(),T==null||T.unsubscribe()},void 0,void 0,function(){return a.delete(R)});b.add(qIe.innerFrom(r(F)).subscribe(T))}}$.next(s?s(L):L)}catch(x){f(x)}},function(){return d(function(L){return L.complete()})},f,function(){return a.clear()},function(){return _=!0,g===0});i.subscribe(b);function P(L,R){var $=new GIe.Observable(function(F){g++;var T=R.subscribe(F);return function(){T.unsubscribe(),--g===0&&_&&b.unsubscribe()}});return $.key=L,$}})}DP.groupBy=YIe;var NP={};Object.defineProperty(NP,"__esModule",{value:!0});NP.isEmpty=void 0;var HIe=ir,ZIe=wr;function KIe(){return HIe.operate(function(e,t){e.subscribe(ZIe.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}NP.isEmpty=KIe;var FP={},x1={},JIe=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(x1,"__esModule",{value:!0});x1.takeLast=void 0;var QIe=Cc,eOe=ir,tOe=wr;function rOe(e){return e<=0?function(){return QIe.EMPTY}:eOe.operate(function(t,r){var n=[];t.subscribe(tOe.createOperatorSubscriber(r,function(i){n.push(i),e<n.length&&n.shift()},function(){var i,o;try{for(var s=JIe(n),a=s.next();!a.done;a=s.next()){var d=a.value;r.next(d)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}r.complete()},void 0,function(){n=null}))})}x1.takeLast=rOe;Object.defineProperty(FP,"__esModule",{value:!0});FP.last=void 0;var nOe=vf,iOe=yh,oOe=x1,aOe=Qp,sOe=Kp,uOe=Va;function lOe(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?iOe.filter(function(i,o){return e(i,o,n)}):uOe.identity,oOe.takeLast(1),r?sOe.defaultIfEmpty(t):aOe.throwIfEmpty(function(){return new nOe.EmptyError}))}}FP.last=lOe;var $P={};Object.defineProperty($P,"__esModule",{value:!0});$P.materialize=void 0;var aO=$S,cOe=ir,fOe=wr;function hOe(){return cOe.operate(function(e,t){e.subscribe(fOe.createOperatorSubscriber(t,function(r){t.next(aO.Notification.createNext(r))},function(){t.next(aO.Notification.createComplete()),t.complete()},function(r){t.next(aO.Notification.createError(r)),t.complete()}))})}$P.materialize=hOe;var zP={};Object.defineProperty(zP,"__esModule",{value:!0});zP.max=void 0;var dOe=Rd,pOe=wi;function mOe(e){return dOe.reduce(pOe.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(t,r){return t>r?t:r})}zP.max=mOe;var BP={};Object.defineProperty(BP,"__esModule",{value:!0});BP.flatMap=void 0;var gOe=kc;BP.flatMap=gOe.mergeMap;var jP={};Object.defineProperty(jP,"__esModule",{value:!0});jP.mergeMapTo=void 0;var d8=kc,vOe=wi;function yOe(e,t,r){return r===void 0&&(r=1/0),vOe.isFunction(t)?d8.mergeMap(function(){return e},t,r):(typeof t=="number"&&(r=t),d8.mergeMap(function(){return e},r))}jP.mergeMapTo=yOe;var UP={};Object.defineProperty(UP,"__esModule",{value:!0});UP.mergeScan=void 0;var _Oe=ir,bOe=vv;function xOe(e,t,r){return r===void 0&&(r=1/0),_Oe.operate(function(n,i){var o=t;return bOe.mergeInternals(n,i,function(s,a){return e(o,s,a)},r,function(s){o=s},!1,void 0,function(){return o=null})})}UP.mergeScan=xOe;var VP={},GP={},wOe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},EOe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(GP,"__esModule",{value:!0});GP.merge=void 0;var SOe=ir,POe=vh,AOe=Hp,p8=xa,COe=Lc;function IOe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=p8.popScheduler(e),n=p8.popNumber(e,1/0);return e=POe.argsOrArgArray(e),SOe.operate(function(i,o){AOe.mergeAll(n)(COe.from(EOe([i],wOe(e)),r)).subscribe(o)})}GP.merge=IOe;var OOe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},TOe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(VP,"__esModule",{value:!0});VP.mergeWith=void 0;var MOe=GP;function LOe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return MOe.merge.apply(void 0,TOe([],OOe(e)))}VP.mergeWith=LOe;var qP={};Object.defineProperty(qP,"__esModule",{value:!0});qP.min=void 0;var ROe=Rd,kOe=wi;function DOe(e){return ROe.reduce(kOe.isFunction(e)?function(t,r){return e(t,r)<0?t:r}:function(t,r){return t<r?t:r})}qP.min=DOe;var bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.multicast=void 0;var NOe=Gp,m8=wi,FOe=_v;function $Oe(e,t){var r=m8.isFunction(e)?e:function(){return e};return m8.isFunction(t)?FOe.connect(t,{connector:r}):function(n){return new NOe.ConnectableObservable(n,r)}}bv.multicast=$Oe;var Bg={},zOe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},BOe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Bg,"__esModule",{value:!0});Bg.onErrorResumeNext=Bg.onErrorResumeNextWith=void 0;var jOe=vh,UOe=u1;function FH(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=jOe.argsOrArgArray(e);return function(n){return UOe.onErrorResumeNext.apply(void 0,BOe([n],zOe(r)))}}Bg.onErrorResumeNextWith=FH;Bg.onErrorResumeNext=FH;var WP={};Object.defineProperty(WP,"__esModule",{value:!0});WP.pairwise=void 0;var VOe=ir,GOe=wr;function qOe(){return VOe.operate(function(e,t){var r,n=!1;e.subscribe(GOe.createOperatorSubscriber(t,function(i){var o=r;r=i,n&&t.next([o,i]),n=!0}))})}WP.pairwise=qOe;var XP={};Object.defineProperty(XP,"__esModule",{value:!0});XP.pluck=void 0;var WOe=_f;function XOe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(r===0)throw new Error("list of properties cannot be empty.");return WOe.map(function(n){for(var i=n,o=0;o<r;o++){var s=i==null?void 0:i[e[o]];if(typeof s<"u")i=s;else return}return i})}XP.pluck=XOe;var YP={};Object.defineProperty(YP,"__esModule",{value:!0});YP.publish=void 0;var YOe=ha,HOe=bv,ZOe=_v;function KOe(e){return e?function(t){return ZOe.connect(e)(t)}:function(t){return HOe.multicast(new YOe.Subject)(t)}}YP.publish=KOe;var HP={};Object.defineProperty(HP,"__esModule",{value:!0});HP.publishBehavior=void 0;var JOe=G_,QOe=Gp;function eTe(e){return function(t){var r=new JOe.BehaviorSubject(e);return new QOe.ConnectableObservable(t,function(){return r})}}HP.publishBehavior=eTe;var ZP={};Object.defineProperty(ZP,"__esModule",{value:!0});ZP.publishLast=void 0;var tTe=fv,rTe=Gp;function nTe(){return function(e){var t=new tTe.AsyncSubject;return new rTe.ConnectableObservable(e,function(){return t})}}ZP.publishLast=nTe;var KP={};Object.defineProperty(KP,"__esModule",{value:!0});KP.publishReplay=void 0;var iTe=cv,oTe=bv,g8=wi;function aTe(e,t,r,n){r&&!g8.isFunction(r)&&(n=r);var i=g8.isFunction(r)?r:void 0;return function(o){return oTe.multicast(new iTe.ReplaySubject(e,t,n),i)(o)}}KP.publishReplay=aTe;var JP={},sTe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},uTe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(JP,"__esModule",{value:!0});JP.raceWith=void 0;var lTe=Cp,cTe=ir,fTe=Va;function hTe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?cTe.operate(function(r,n){lTe.raceInit(uTe([r],sTe(e)))(n)}):fTe.identity}JP.raceWith=hTe;var QP={};Object.defineProperty(QP,"__esModule",{value:!0});QP.repeat=void 0;var dTe=Cc,pTe=ir,v8=wr,mTe=Nr,gTe=bf;function vTe(e){var t,r=1/0,n;return e!=null&&(typeof e=="object"?(t=e.count,r=t===void 0?1/0:t,n=e.delay):r=e),r<=0?function(){return dTe.EMPTY}:pTe.operate(function(i,o){var s=0,a,d=function(){if(a==null||a.unsubscribe(),a=null,n!=null){var g=typeof n=="number"?gTe.timer(n):mTe.innerFrom(n(s)),_=v8.createOperatorSubscriber(o,function(){_.unsubscribe(),f()});g.subscribe(_)}else f()},f=function(){var g=!1;a=i.subscribe(v8.createOperatorSubscriber(o,void 0,function(){++s<r?a?d():g=!0:o.complete()})),g&&d()};f()})}QP.repeat=vTe;var e2={};Object.defineProperty(e2,"__esModule",{value:!0});e2.repeatWhen=void 0;var yTe=Nr,_Te=ha,bTe=ir,y8=wr;function xTe(e){return bTe.operate(function(t,r){var n,i=!1,o,s=!1,a=!1,d=function(){return a&&s&&(r.complete(),!0)},f=function(){return o||(o=new _Te.Subject,yTe.innerFrom(e(o)).subscribe(y8.createOperatorSubscriber(r,function(){n?g():i=!0},function(){s=!0,d()}))),o},g=function(){a=!1,n=t.subscribe(y8.createOperatorSubscriber(r,void 0,function(){a=!0,!d()&&f().next()})),i&&(n.unsubscribe(),n=null,i=!1,g())};g()})}e2.repeatWhen=xTe;var t2={};Object.defineProperty(t2,"__esModule",{value:!0});t2.retry=void 0;var wTe=ir,_8=wr,ETe=Va,STe=bf,PTe=Nr;function ATe(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var r=t.count,n=r===void 0?1/0:r,i=t.delay,o=t.resetOnSuccess,s=o===void 0?!1:o;return n<=0?ETe.identity:wTe.operate(function(a,d){var f=0,g,_=function(){var b=!1;g=a.subscribe(_8.createOperatorSubscriber(d,function(P){s&&(f=0),d.next(P)},void 0,function(P){if(f++<n){var L=function(){g?(g.unsubscribe(),g=null,_()):b=!0};if(i!=null){var R=typeof i=="number"?STe.timer(i):PTe.innerFrom(i(P,f)),$=_8.createOperatorSubscriber(d,function(){$.unsubscribe(),L()},function(){d.complete()});R.subscribe($)}else L()}else d.error(P)})),b&&(g.unsubscribe(),g=null,_())};_()})}t2.retry=ATe;var r2={};Object.defineProperty(r2,"__esModule",{value:!0});r2.retryWhen=void 0;var CTe=Nr,ITe=ha,OTe=ir,b8=wr;function TTe(e){return OTe.operate(function(t,r){var n,i=!1,o,s=function(){n=t.subscribe(b8.createOperatorSubscriber(r,void 0,void 0,function(a){o||(o=new ITe.Subject,CTe.innerFrom(e(o)).subscribe(b8.createOperatorSubscriber(r,function(){return n?s():i=!0}))),o&&o.next(a)})),i&&(n.unsubscribe(),n=null,i=!1,s())};s()})}r2.retryWhen=TTe;var w1={};Object.defineProperty(w1,"__esModule",{value:!0});w1.sample=void 0;var MTe=Nr,LTe=ir,RTe=Ua,x8=wr;function kTe(e){return LTe.operate(function(t,r){var n=!1,i=null;t.subscribe(x8.createOperatorSubscriber(r,function(o){n=!0,i=o})),MTe.innerFrom(e).subscribe(x8.createOperatorSubscriber(r,function(){if(n){n=!1;var o=i;i=null,r.next(o)}},RTe.noop))})}w1.sample=kTe;var n2={};Object.defineProperty(n2,"__esModule",{value:!0});n2.sampleTime=void 0;var DTe=Zu,NTe=w1,FTe=s1;function $Te(e,t){return t===void 0&&(t=DTe.asyncScheduler),NTe.sample(FTe.interval(e,t))}n2.sampleTime=$Te;var i2={};Object.defineProperty(i2,"__esModule",{value:!0});i2.scan=void 0;var zTe=ir,BTe=d1;function jTe(e,t){return zTe.operate(BTe.scanInternals(e,t,arguments.length>=2,!0))}i2.scan=jTe;var o2={};Object.defineProperty(o2,"__esModule",{value:!0});o2.sequenceEqual=void 0;var UTe=ir,VTe=wr,GTe=Nr;function qTe(e,t){return t===void 0&&(t=function(r,n){return r===n}),UTe.operate(function(r,n){var i=w8(),o=w8(),s=function(d){n.next(d),n.complete()},a=function(d,f){var g=VTe.createOperatorSubscriber(n,function(_){var b=f.buffer,P=f.complete;b.length===0?P?s(!1):d.buffer.push(_):!t(_,b.shift())&&s(!1)},function(){d.complete=!0;var _=f.complete,b=f.buffer;_&&s(b.length===0),g==null||g.unsubscribe()});return g};r.subscribe(a(i,o)),GTe.innerFrom(e).subscribe(a(o,i))})}o2.sequenceEqual=qTe;function w8(){return{buffer:[],complete:!1}}var E1={},WTe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},XTe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(E1,"__esModule",{value:!0});E1.share=void 0;var $H=Nr,YTe=ha,zH=lv,HTe=ir;function ZTe(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new YTe.Subject}:t,n=e.resetOnError,i=n===void 0?!0:n,o=e.resetOnComplete,s=o===void 0?!0:o,a=e.resetOnRefCountZero,d=a===void 0?!0:a;return function(f){var g,_,b,P=0,L=!1,R=!1,$=function(){_==null||_.unsubscribe(),_=void 0},F=function(){$(),g=b=void 0,L=R=!1},T=function(){var x=g;F(),x==null||x.unsubscribe()};return HTe.operate(function(x,N){P++,!R&&!L&&$();var B=b=b??r();N.add(function(){P--,P===0&&!R&&!L&&(_=sO(T,d))}),B.subscribe(N),!g&&P>0&&(g=new zH.SafeSubscriber({next:function(H){return B.next(H)},error:function(H){R=!0,$(),_=sO(F,i,H),B.error(H)},complete:function(){L=!0,$(),_=sO(F,s),B.complete()}}),$H.innerFrom(x).subscribe(g))})(f)}}E1.share=ZTe;function sO(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var i=new zH.SafeSubscriber({next:function(){i.unsubscribe(),e()}});return $H.innerFrom(t.apply(void 0,XTe([],WTe(r)))).subscribe(i)}}var a2={};Object.defineProperty(a2,"__esModule",{value:!0});a2.shareReplay=void 0;var KTe=cv,JTe=E1;function QTe(e,t,r){var n,i,o,s,a=!1;return e&&typeof e=="object"?(n=e.bufferSize,s=n===void 0?1/0:n,i=e.windowTime,t=i===void 0?1/0:i,o=e.refCount,a=o===void 0?!1:o,r=e.scheduler):s=e??1/0,JTe.share({connector:function(){return new KTe.ReplaySubject(s,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}a2.shareReplay=QTe;var s2={};Object.defineProperty(s2,"__esModule",{value:!0});s2.single=void 0;var eMe=vf,tMe=n1,rMe=r1,nMe=ir,iMe=wr;function oMe(e){return nMe.operate(function(t,r){var n=!1,i,o=!1,s=0;t.subscribe(iMe.createOperatorSubscriber(r,function(a){o=!0,(!e||e(a,s++,t))&&(n&&r.error(new tMe.SequenceError("Too many matching values")),n=!0,i=a)},function(){n?(r.next(i),r.complete()):r.error(o?new rMe.NotFoundError("No matching values"):new eMe.EmptyError)}))})}s2.single=oMe;var u2={};Object.defineProperty(u2,"__esModule",{value:!0});u2.skip=void 0;var aMe=yh;function sMe(e){return aMe.filter(function(t,r){return e<=r})}u2.skip=sMe;var l2={};Object.defineProperty(l2,"__esModule",{value:!0});l2.skipLast=void 0;var uMe=Va,lMe=ir,cMe=wr;function fMe(e){return e<=0?uMe.identity:lMe.operate(function(t,r){var n=new Array(e),i=0;return t.subscribe(cMe.createOperatorSubscriber(r,function(o){var s=i++;if(s<e)n[s]=o;else{var a=s%e,d=n[a];n[a]=o,r.next(d)}})),function(){n=null}})}l2.skipLast=fMe;var c2={};Object.defineProperty(c2,"__esModule",{value:!0});c2.skipUntil=void 0;var hMe=ir,E8=wr,dMe=Nr,pMe=Ua;function mMe(e){return hMe.operate(function(t,r){var n=!1,i=E8.createOperatorSubscriber(r,function(){i==null||i.unsubscribe(),n=!0},pMe.noop);dMe.innerFrom(e).subscribe(i),t.subscribe(E8.createOperatorSubscriber(r,function(o){return n&&r.next(o)}))})}c2.skipUntil=mMe;var f2={};Object.defineProperty(f2,"__esModule",{value:!0});f2.skipWhile=void 0;var gMe=ir,vMe=wr;function yMe(e){return gMe.operate(function(t,r){var n=!1,i=0;t.subscribe(vMe.createOperatorSubscriber(r,function(o){return(n||(n=!e(o,i++)))&&r.next(o)}))})}f2.skipWhile=yMe;var h2={};Object.defineProperty(h2,"__esModule",{value:!0});h2.startWith=void 0;var S8=Yp,_Me=xa,bMe=ir;function xMe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=_Me.popScheduler(e);return bMe.operate(function(n,i){(r?S8.concat(e,n,r):S8.concat(e,n)).subscribe(i)})}h2.startWith=xMe;var d2={},em={};Object.defineProperty(em,"__esModule",{value:!0});em.switchMap=void 0;var wMe=Nr,EMe=ir,P8=wr;function SMe(e,t){return EMe.operate(function(r,n){var i=null,o=0,s=!1,a=function(){return s&&!i&&n.complete()};r.subscribe(P8.createOperatorSubscriber(n,function(d){i==null||i.unsubscribe();var f=0,g=o++;wMe.innerFrom(e(d,g)).subscribe(i=P8.createOperatorSubscriber(n,function(_){return n.next(t?t(d,_,g,f++):_)},function(){i=null,a()}))},function(){s=!0,a()}))})}em.switchMap=SMe;Object.defineProperty(d2,"__esModule",{value:!0});d2.switchAll=void 0;var PMe=em,AMe=Va;function CMe(){return PMe.switchMap(AMe.identity)}d2.switchAll=CMe;var p2={};Object.defineProperty(p2,"__esModule",{value:!0});p2.switchMapTo=void 0;var A8=em,IMe=wi;function OMe(e,t){return IMe.isFunction(t)?A8.switchMap(function(){return e},t):A8.switchMap(function(){return e})}p2.switchMapTo=OMe;var m2={};Object.defineProperty(m2,"__esModule",{value:!0});m2.switchScan=void 0;var TMe=em,MMe=ir;function LMe(e,t){return MMe.operate(function(r,n){var i=t;return TMe.switchMap(function(o,s){return e(i,o,s)},function(o,s){return i=s,s})(r).subscribe(n),function(){i=null}})}m2.switchScan=LMe;var g2={};Object.defineProperty(g2,"__esModule",{value:!0});g2.takeUntil=void 0;var RMe=ir,kMe=wr,DMe=Nr,NMe=Ua;function FMe(e){return RMe.operate(function(t,r){DMe.innerFrom(e).subscribe(kMe.createOperatorSubscriber(r,function(){return r.complete()},NMe.noop)),!r.closed&&t.subscribe(r)})}g2.takeUntil=FMe;var v2={};Object.defineProperty(v2,"__esModule",{value:!0});v2.takeWhile=void 0;var $Me=ir,zMe=wr;function BMe(e,t){return t===void 0&&(t=!1),$Me.operate(function(r,n){var i=0;r.subscribe(zMe.createOperatorSubscriber(n,function(o){var s=e(o,i++);(s||t)&&n.next(o),!s&&n.complete()}))})}v2.takeWhile=BMe;var y2={};Object.defineProperty(y2,"__esModule",{value:!0});y2.tap=void 0;var jMe=wi,UMe=ir,VMe=wr,GMe=Va;function qMe(e,t,r){var n=jMe.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return n?UMe.operate(function(i,o){var s;(s=n.subscribe)===null||s===void 0||s.call(n);var a=!0;i.subscribe(VMe.createOperatorSubscriber(o,function(d){var f;(f=n.next)===null||f===void 0||f.call(n,d),o.next(d)},function(){var d;a=!1,(d=n.complete)===null||d===void 0||d.call(n),o.complete()},function(d){var f;a=!1,(f=n.error)===null||f===void 0||f.call(n,d),o.error(d)},function(){var d,f;a&&((d=n.unsubscribe)===null||d===void 0||d.call(n)),(f=n.finalize)===null||f===void 0||f.call(n)}))}):GMe.identity}y2.tap=qMe;var S1={};Object.defineProperty(S1,"__esModule",{value:!0});S1.throttle=void 0;var WMe=ir,C8=wr,XMe=Nr;function YMe(e,t){return WMe.operate(function(r,n){var i=t??{},o=i.leading,s=o===void 0?!0:o,a=i.trailing,d=a===void 0?!1:a,f=!1,g=null,_=null,b=!1,P=function(){_==null||_.unsubscribe(),_=null,d&&($(),b&&n.complete())},L=function(){_=null,b&&n.complete()},R=function(F){return _=XMe.innerFrom(e(F)).subscribe(C8.createOperatorSubscriber(n,P,L))},$=function(){if(f){f=!1;var F=g;g=null,n.next(F),!b&&R(F)}};r.subscribe(C8.createOperatorSubscriber(n,function(F){f=!0,g=F,!(_&&!_.closed)&&(s?$():R(F))},function(){b=!0,!(d&&f&&_&&!_.closed)&&n.complete()}))})}S1.throttle=YMe;var _2={};Object.defineProperty(_2,"__esModule",{value:!0});_2.throttleTime=void 0;var HMe=Zu,ZMe=S1,KMe=bf;function JMe(e,t,r){t===void 0&&(t=HMe.asyncScheduler);var n=KMe.timer(e,t);return ZMe.throttle(function(){return n},r)}_2.throttleTime=JMe;var jg={};Object.defineProperty(jg,"__esModule",{value:!0});jg.TimeInterval=jg.timeInterval=void 0;var QMe=Zu,eLe=ir,tLe=wr;function rLe(e){return e===void 0&&(e=QMe.asyncScheduler),eLe.operate(function(t,r){var n=e.now();t.subscribe(tLe.createOperatorSubscriber(r,function(i){var o=e.now(),s=o-n;n=o,r.next(new BH(i,s))}))})}jg.timeInterval=rLe;var BH=function(){function e(t,r){this.value=t,this.interval=r}return e}();jg.TimeInterval=BH;var b2={};Object.defineProperty(b2,"__esModule",{value:!0});b2.timeoutWith=void 0;var nLe=Zu,iLe=mv,oLe=rE;function aLe(e,t,r){var n,i,o;if(r=r??nLe.async,iLe.isValidDate(e)?n=e:typeof e=="number"&&(i=e),t)o=function(){return t};else throw new TypeError("No observable provided to switch to");if(n==null&&i==null)throw new TypeError("No timeout provided.");return oLe.timeout({first:n,each:i,scheduler:r,with:o})}b2.timeoutWith=aLe;var x2={};Object.defineProperty(x2,"__esModule",{value:!0});x2.timestamp=void 0;var sLe=TS,uLe=_f;function lLe(e){return e===void 0&&(e=sLe.dateTimestampProvider),uLe.map(function(t){return{value:t,timestamp:e.now()}})}x2.timestamp=lLe;var w2={};Object.defineProperty(w2,"__esModule",{value:!0});w2.window=void 0;var I8=ha,cLe=ir,O8=wr,fLe=Ua,hLe=Nr;function dLe(e){return cLe.operate(function(t,r){var n=new I8.Subject;r.next(n.asObservable());var i=function(o){n.error(o),r.error(o)};return t.subscribe(O8.createOperatorSubscriber(r,function(o){return n==null?void 0:n.next(o)},function(){n.complete(),r.complete()},i)),hLe.innerFrom(e).subscribe(O8.createOperatorSubscriber(r,function(){n.complete(),r.next(n=new I8.Subject)},fLe.noop,i)),function(){n==null||n.unsubscribe(),n=null}})}w2.window=dLe;var E2={},pLe=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(E2,"__esModule",{value:!0});E2.windowCount=void 0;var T8=ha,mLe=ir,gLe=wr;function vLe(e,t){t===void 0&&(t=0);var r=t>0?t:e;return mLe.operate(function(n,i){var o=[new T8.Subject],s=0;i.next(o[0].asObservable()),n.subscribe(gLe.createOperatorSubscriber(i,function(a){var d,f;try{for(var g=pLe(o),_=g.next();!_.done;_=g.next()){var b=_.value;b.next(a)}}catch(R){d={error:R}}finally{try{_&&!_.done&&(f=g.return)&&f.call(g)}finally{if(d)throw d.error}}var P=s-e+1;if(P>=0&&P%r===0&&o.shift().complete(),++s%r===0){var L=new T8.Subject;o.push(L),i.next(L.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(a){for(;o.length>0;)o.shift().error(a);i.error(a)},function(){o=null}))})}E2.windowCount=vLe;var S2={};Object.defineProperty(S2,"__esModule",{value:!0});S2.windowTime=void 0;var yLe=ha,_Le=Zu,bLe=za,xLe=ir,wLe=wr,ELe=Mc,SLe=xa,M8=Rc;function PLe(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(t=SLe.popScheduler(n))!==null&&t!==void 0?t:_Le.asyncScheduler,s=(r=n[0])!==null&&r!==void 0?r:null,a=n[1]||1/0;return xLe.operate(function(d,f){var g=[],_=!1,b=function($){var F=$.window,T=$.subs;F.complete(),T.unsubscribe(),ELe.arrRemove(g,$),_&&P()},P=function(){if(g){var $=new bLe.Subscription;f.add($);var F=new yLe.Subject,T={window:F,subs:$,seen:0};g.push(T),f.next(F.asObservable()),M8.executeSchedule($,o,function(){return b(T)},e)}};s!==null&&s>=0?M8.executeSchedule(f,o,P,s,!0):_=!0,P();var L=function($){return g.slice().forEach($)},R=function($){L(function(F){var T=F.window;return $(T)}),$(f),f.unsubscribe()};return d.subscribe(wLe.createOperatorSubscriber(f,function($){L(function(F){F.window.next($),a<=++F.seen&&b(F)})},function(){return R(function($){return $.complete()})},function($){return R(function(F){return F.error($)})})),function(){g=null}})}S2.windowTime=PLe;var P2={},ALe=Pe&&Pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(P2,"__esModule",{value:!0});P2.windowToggle=void 0;var CLe=ha,ILe=za,OLe=ir,L8=Nr,uO=wr,R8=Ua,TLe=Mc;function MLe(e,t){return OLe.operate(function(r,n){var i=[],o=function(s){for(;0<i.length;)i.shift().error(s);n.error(s)};L8.innerFrom(e).subscribe(uO.createOperatorSubscriber(n,function(s){var a=new CLe.Subject;i.push(a);var d=new ILe.Subscription,f=function(){TLe.arrRemove(i,a),a.complete(),d.unsubscribe()},g;try{g=L8.innerFrom(t(s))}catch(_){o(_);return}n.next(a.asObservable()),d.add(g.subscribe(uO.createOperatorSubscriber(n,f,R8.noop,o)))},R8.noop)),r.subscribe(uO.createOperatorSubscriber(n,function(s){var a,d,f=i.slice();try{for(var g=ALe(f),_=g.next();!_.done;_=g.next()){var b=_.value;b.next(s)}}catch(P){a={error:P}}finally{try{_&&!_.done&&(d=g.return)&&d.call(g)}finally{if(a)throw a.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}P2.windowToggle=MLe;var A2={};Object.defineProperty(A2,"__esModule",{value:!0});A2.windowWhen=void 0;var LLe=ha,RLe=ir,k8=wr,kLe=Nr;function DLe(e){return RLe.operate(function(t,r){var n,i,o=function(a){n.error(a),r.error(a)},s=function(){i==null||i.unsubscribe(),n==null||n.complete(),n=new LLe.Subject,r.next(n.asObservable());var a;try{a=kLe.innerFrom(e())}catch(d){o(d);return}a.subscribe(i=k8.createOperatorSubscriber(r,s,s,o))};s(),t.subscribe(k8.createOperatorSubscriber(r,function(a){return n.next(a)},function(){n.complete(),r.complete()},o,function(){i==null||i.unsubscribe(),n=null}))})}A2.windowWhen=DLe;var C2={},D8=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},N8=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(C2,"__esModule",{value:!0});C2.withLatestFrom=void 0;var NLe=ir,F8=wr,FLe=Nr,$Le=Va,zLe=Ua,BLe=xa;function jLe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=BLe.popResultSelector(e);return NLe.operate(function(n,i){for(var o=e.length,s=new Array(o),a=e.map(function(){return!1}),d=!1,f=function(_){FLe.innerFrom(e[_]).subscribe(F8.createOperatorSubscriber(i,function(b){s[_]=b,!d&&!a[_]&&(a[_]=!0,(d=a.every($Le.identity))&&(a=null))},zLe.noop))},g=0;g<o;g++)f(g);n.subscribe(F8.createOperatorSubscriber(i,function(_){if(d){var b=N8([_],D8(s));i.next(r?r.apply(void 0,N8([],D8(b))):b)}}))})}C2.withLatestFrom=jLe;var I2={};Object.defineProperty(I2,"__esModule",{value:!0});I2.zipAll=void 0;var ULe=yv,VLe=f1;function GLe(e){return VLe.joinAllInternals(ULe.zip,e)}I2.zipAll=GLe;var O2={},T2={},qLe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},WLe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(T2,"__esModule",{value:!0});T2.zip=void 0;var XLe=yv,YLe=ir;function HLe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return YLe.operate(function(r,n){XLe.zip.apply(void 0,WLe([r],qLe(e))).subscribe(n)})}T2.zip=HLe;var ZLe=Pe&&Pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},KLe=Pe&&Pe.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(O2,"__esModule",{value:!0});O2.zipWith=void 0;var JLe=T2;function QLe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JLe.zip.apply(void 0,KLe([],ZLe(e)))}O2.zipWith=QLe;(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(ou,Ii,ao,ri){ri===void 0&&(ri=ao),Object.defineProperty(ou,ri,{enumerable:!0,get:function(){return Ii[ao]}})}:function(ou,Ii,ao,ri){ri===void 0&&(ri=ao),ou[ri]=Ii[ao]}),r=Pe&&Pe.__exportStar||function(ou,Ii){for(var ao in ou)ao!=="default"&&!Object.prototype.hasOwnProperty.call(Ii,ao)&&t(Ii,ou,ao)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=Ti;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var i=Gp;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return i.ConnectableObservable}});var o=Vp;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return o.observable}});var s=OS;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return s.animationFrames}});var a=ha;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return a.Subject}});var d=G_;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return d.BehaviorSubject}});var f=cv;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var g=fv;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return g.AsyncSubject}});var _=cH;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return _.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return _.asapScheduler}});var b=Zu;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return b.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return b.asyncScheduler}});var P=dH;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return P.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return P.queueScheduler}});var L=pH;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return L.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return L.animationFrameScheduler}});var R=zg;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return R.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return R.VirtualAction}});var $=q_;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return $.Scheduler}});var F=za;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return F.Subscription}});var T=lv;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return T.Subscriber}});var x=$S;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return x.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return x.NotificationKind}});var N=ah;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return N.pipe}});var B=Ua;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return B.noop}});var H=Va;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return H.identity}});var Z=VS;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return Z.isObservable}});var Y=GS;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return Y.lastValueFrom}});var W=qS;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return W.firstValueFrom}});var Q=t1;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return Q.ArgumentOutOfRangeError}});var me=vf;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return me.EmptyError}});var ge=r1;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return ge.NotFoundError}});var be=V_;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return be.ObjectUnsubscribedError}});var oe=n1;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return oe.SequenceError}});var Ie=rE;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return Ie.TimeoutError}});var fe=B_;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return fe.UnsubscriptionError}});var G=WS;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return G.bindCallback}});var K=XS;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return K.bindNodeCallback}});var re=pd;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return re.combineLatest}});var ie=Yp;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return ie.concat}});var he=YS;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return he.connectable}});var ae=Zp;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return ae.defer}});var Te=Cc;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return Te.empty}});var Le=HS;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return Le.forkJoin}});var Xe=Lc;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return Xe.from}});var $e=ZS;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return $e.fromEvent}});var at=KS;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return at.fromEventPattern}});var _t=JS;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return _t.generate}});var Lt=QS;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return Lt.iif}});var pt=s1;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return pt.interval}});var Ot=eP;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Ot.merge}});var vt=eL;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return vt.never}});var Ze=hv;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return Ze.of}});var Zt=u1;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Zt.onErrorResumeNext}});var rr=tP;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return rr.pairs}});var Gt=rP;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Gt.partition}});var br=Cp;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return br.race}});var un=iP;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return un.range}});var ot=e1;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return ot.throwError}});var Oe=bf;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Oe.timer}});var ve=oP;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return ve.using}});var xe=yv;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return xe.zip}});var je=W_;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return je.scheduled}});var Ke=Cc;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Ke.EMPTY}});var qe=eL;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return qe.NEVER}}),r(MH,e);var mt=Td;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return mt.config}});var rt=l1;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return rt.audit}});var Ht=aP;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Ht.auditTime}});var lr=sP;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return lr.buffer}});var ut=uP;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return ut.bufferCount}});var kt=lP;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return kt.bufferTime}});var $t=cP;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return $t.bufferToggle}});var Lr=fP;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Lr.bufferWhen}});var Rr=hP;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return Rr.catchError}});var Nt=dP;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Nt.combineAll}});var yn=c1;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return yn.combineLatestAll}});var _n=pP;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return _n.combineLatestWith}});var ti=gv;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ti.concatAll}});var dn=p1;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return dn.concatMap}});var Kr=gP;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Kr.concatMapTo}});var Xn=vP;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Xn.concatWith}});var $r=_v;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return $r.connect}});var Pt=bP;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return Pt.count}});var Ei=xP;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return Ei.debounce}});var Ne=wP;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Ne.debounceTime}});var ce=Kp;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return ce.defaultIfEmpty}});var ye=EP;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return ye.delay}});var Me=m1;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Me.delayWhen}});var ze=SP;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return ze.dematerialize}});var Ge=PP;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return Ge.distinct}});var nt=y1;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return nt.distinctUntilChanged}});var He=AP;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return He.distinctUntilKeyChanged}});var Ye=CP;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Ye.elementAt}});var tt=IP;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return tt.endWith}});var yt=OP;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return yt.every}});var bt=TP;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return bt.exhaust}});var gt=_1;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return gt.exhaustAll}});var Rt=b1;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Rt.exhaustMap}});var dr=MP;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return dr.expand}});var qt=yh;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return qt.filter}});var Kt=LP;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Kt.finalize}});var er=Ip;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return er.find}});var Yr=RP;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Yr.findIndex}});var Hr=kP;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Hr.first}});var Wr=DP;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Wr.groupBy}});var Dr=g1;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Dr.ignoreElements}});var go=NP;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return go.isEmpty}});var Wt=FP;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Wt.last}});var Vr=_f;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Vr.map}});var xt=v1;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return xt.mapTo}});var Jr=$P;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Jr.materialize}});var Mi=zP;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Mi.max}});var yi=Hp;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return yi.mergeAll}});var Si=BP;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Si.flatMap}});var Pi=kc;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Pi.mergeMap}});var da=jP;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return da.mergeMapTo}});var no=UP;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return no.mergeScan}});var di=VP;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return di.mergeWith}});var Ko=qP;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Ko.min}});var Ea=bv;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Ea.multicast}});var oi=Wp;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return oi.observeOn}});var Yn=Bg;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Yn.onErrorResumeNextWith}});var io=WP;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return io.pairwise}});var Uo=XP;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Uo.pluck}});var pa=YP;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return pa.publish}});var Ou=HP;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Ou.publishBehavior}});var or=ZP;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return or.publishLast}});var Tu=KP;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Tu.publishReplay}});var oo=JP;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return oo.raceWith}});var Ga=Rd;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Ga.reduce}});var zr=QP;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return zr.repeat}});var Mu=e2;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Mu.repeatWhen}});var Ef=t2;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Ef.retry}});var el=r2;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return el.retryWhen}});var vo=U_;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return vo.refCount}});var Sa=w1;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Sa.sample}});var tl=n2;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return tl.sampleTime}});var Dc=i2;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Dc.scan}});var It=o2;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return It.sequenceEqual}});var rl=E1;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return rl.share}});var Ao=a2;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return Ao.shareReplay}});var Pa=s2;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Pa.single}});var nl=u2;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return nl.skip}});var Ai=l2;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Ai.skipLast}});var gn=c2;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return gn.skipUntil}});var Qr=f2;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Qr.skipWhile}});var Hn=h2;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Hn.startWith}});var Jo=Xp;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Jo.subscribeOn}});var il=d2;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return il.switchAll}});var Gi=em;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Gi.switchMap}});var As=p2;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return As.switchMapTo}});var yo=m2;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return yo.switchScan}});var on=Jp;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return on.take}});var cs=x1;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return cs.takeLast}});var ai=g2;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return ai.takeUntil}});var Lu=v2;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Lu.takeWhile}});var qi=y2;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return qi.tap}});var rn=S1;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return rn.throttle}});var Wi=_2;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Wi.throttleTime}});var qa=Qp;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return qa.throwIfEmpty}});var Fi=jg;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Fi.timeInterval}});var Co=rE;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Co.timeout}});var Zr=b2;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Zr.timeoutWith}});var Wa=x2;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Wa.timestamp}});var si=h1;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return si.toArray}});var Dl=w2;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Dl.window}});var _o=E2;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return _o.windowCount}});var ui=S2;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return ui.windowTime}});var Ci=P2;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Ci.windowToggle}});var fs=A2;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return fs.windowWhen}});var Sf=C2;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Sf.withLatestFrom}});var Ru=I2;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Ru.zipAll}});var Nc=O2;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Nc.zipWith}})})(BN);var jH={exports:{}};/**
 * tingle.js - A simple modal plugin written in pure JavaScript
 * @version v0.16.0
 * @link https://github.com/robinparisi/tingle#readme
 * @license MIT
 */(function(e,t){(function(r,n){e.exports=n()})(Pe,function(){var r=!1;function n(L){var R={onClose:null,onOpen:null,beforeOpen:null,beforeClose:null,stickyFooter:!1,footer:!1,cssClass:[],closeLabel:"Close",closeMethods:["overlay","button","escape"]};this.opts=P({},R,L),this.init()}n.prototype.init=function(){if(!this.modal)return s.call(this),d.call(this),document.body.appendChild(this.modal,document.body.firstChild),this.opts.footer&&this.addFooter(),this},n.prototype._busy=function(L){r=L},n.prototype._isBusy=function(){return r},n.prototype.destroy=function(){this.modal!==null&&(this.isOpen()&&this.close(!0),b.call(this),this.modal.parentNode.removeChild(this.modal),this.modal=null)},n.prototype.isOpen=function(){return!!this.modal.classList.contains("tingle-modal--visible")},n.prototype.open=function(){if(!this._isBusy()){this._busy(!0);var L=this;return typeof L.opts.beforeOpen=="function"&&L.opts.beforeOpen(),this.modal.style.removeProperty?this.modal.style.removeProperty("display"):this.modal.style.removeAttribute("display"),document.getSelection().removeAllRanges(),this._scrollPosition=window.pageYOffset,document.body.classList.add("tingle-enabled"),document.body.style.top=-this._scrollPosition+"px",this.setStickyFooter(this.opts.stickyFooter),this.modal.classList.add("tingle-modal--visible"),typeof L.opts.onOpen=="function"&&L.opts.onOpen.call(L),L._busy(!1),this.checkOverflow(),this}},n.prototype.close=function(L){if(!this._isBusy()){if(this._busy(!0),typeof this.opts.beforeClose=="function"){var R=this.opts.beforeClose.call(this);if(!R){this._busy(!1);return}}document.body.classList.remove("tingle-enabled"),document.body.style.top=null,window.scrollTo({top:this._scrollPosition,behavior:"instant"}),this.modal.classList.remove("tingle-modal--visible");var $=this;$.modal.style.display="none",typeof $.opts.onClose=="function"&&$.opts.onClose.call(this),$._busy(!1)}},n.prototype.setContent=function(L){return typeof L=="string"?this.modalBoxContent.innerHTML=L:(this.modalBoxContent.innerHTML="",this.modalBoxContent.appendChild(L)),this.isOpen()&&this.checkOverflow(),this},n.prototype.getContent=function(){return this.modalBoxContent},n.prototype.addFooter=function(){return a.call(this),this},n.prototype.setFooterContent=function(L){return this.modalBoxFooter.innerHTML=L,this},n.prototype.getFooterContent=function(){return this.modalBoxFooter},n.prototype.setStickyFooter=function(L){return this.isOverflow()||(L=!1),L?this.modalBox.contains(this.modalBoxFooter)&&(this.modalBox.removeChild(this.modalBoxFooter),this.modal.appendChild(this.modalBoxFooter),this.modalBoxFooter.classList.add("tingle-modal-box__footer--sticky"),o.call(this),this.modalBoxContent.style["padding-bottom"]=this.modalBoxFooter.clientHeight+20+"px"):this.modalBoxFooter&&(this.modalBox.contains(this.modalBoxFooter)||(this.modal.removeChild(this.modalBoxFooter),this.modalBox.appendChild(this.modalBoxFooter),this.modalBoxFooter.style.width="auto",this.modalBoxFooter.style.left="",this.modalBoxContent.style["padding-bottom"]="",this.modalBoxFooter.classList.remove("tingle-modal-box__footer--sticky"))),this},n.prototype.addFooterBtn=function(L,R,$){var F=document.createElement("button");return F.innerHTML=L,F.addEventListener("click",$),typeof R=="string"&&R.length&&R.split(" ").forEach(function(T){F.classList.add(T)}),this.modalBoxFooter.appendChild(F),F},n.prototype.resize=function(){},n.prototype.isOverflow=function(){var L=window.innerHeight,R=this.modalBox.clientHeight;return R>=L},n.prototype.checkOverflow=function(){this.modal.classList.contains("tingle-modal--visible")&&(this.isOverflow()?this.modal.classList.add("tingle-modal--overflow"):this.modal.classList.remove("tingle-modal--overflow"),!this.isOverflow()&&this.opts.stickyFooter?this.setStickyFooter(!1):this.isOverflow()&&this.opts.stickyFooter&&(o.call(this),this.setStickyFooter(!0)))};function i(){return'<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.3 9.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3L5 6.4l3.3 3.3c.2.2.5.3.7.3.2 0 .5-.1.7-.3.4-.4.4-1 0-1.4L6.4 5l3.3-3.3c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L5 3.6 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4L3.6 5 .3 8.3c-.4.4-.4 1 0 1.4z" fill="#000" fill-rule="nonzero"/></svg>'}function o(){this.modalBoxFooter&&(this.modalBoxFooter.style.width=this.modalBox.clientWidth+"px",this.modalBoxFooter.style.left=this.modalBox.offsetLeft+"px")}function s(){this.modal=document.createElement("div"),this.modal.classList.add("tingle-modal"),(this.opts.closeMethods.length===0||this.opts.closeMethods.indexOf("overlay")===-1)&&this.modal.classList.add("tingle-modal--noOverlayClose"),this.modal.style.display="none",this.opts.cssClass.forEach(function(L){typeof L=="string"&&this.modal.classList.add(L)},this),this.opts.closeMethods.indexOf("button")!==-1&&(this.modalCloseBtn=document.createElement("button"),this.modalCloseBtn.type="button",this.modalCloseBtn.classList.add("tingle-modal__close"),this.modalCloseBtnIcon=document.createElement("span"),this.modalCloseBtnIcon.classList.add("tingle-modal__closeIcon"),this.modalCloseBtnIcon.innerHTML=i(),this.modalCloseBtnLabel=document.createElement("span"),this.modalCloseBtnLabel.classList.add("tingle-modal__closeLabel"),this.modalCloseBtnLabel.innerHTML=this.opts.closeLabel,this.modalCloseBtn.appendChild(this.modalCloseBtnIcon),this.modalCloseBtn.appendChild(this.modalCloseBtnLabel)),this.modalBox=document.createElement("div"),this.modalBox.classList.add("tingle-modal-box"),this.modalBoxContent=document.createElement("div"),this.modalBoxContent.classList.add("tingle-modal-box__content"),this.modalBox.appendChild(this.modalBoxContent),this.opts.closeMethods.indexOf("button")!==-1&&this.modal.appendChild(this.modalCloseBtn),this.modal.appendChild(this.modalBox)}function a(){this.modalBoxFooter=document.createElement("div"),this.modalBoxFooter.classList.add("tingle-modal-box__footer"),this.modalBox.appendChild(this.modalBoxFooter)}function d(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:g.bind(this),resize:this.checkOverflow.bind(this),keyboardNav:f.bind(this)},this.opts.closeMethods.indexOf("button")!==-1&&this.modalCloseBtn.addEventListener("click",this._events.clickCloseBtn),this.modal.addEventListener("mousedown",this._events.clickOverlay),window.addEventListener("resize",this._events.resize),document.addEventListener("keydown",this._events.keyboardNav)}function f(L){this.opts.closeMethods.indexOf("escape")!==-1&&L.which===27&&this.isOpen()&&this.close()}function g(L){var R=this.modal.offsetWidth-this.modal.clientWidth,$=L.clientX>=this.modal.offsetWidth-15,F=this.modal.scrollHeight!==this.modal.offsetHeight;navigator.platform==="MacIntel"&&R===0&&$&&F||this.opts.closeMethods.indexOf("overlay")!==-1&&!_(L.target,"tingle-modal")&&L.clientX<this.modal.clientWidth&&this.close()}function _(L,R){for(;(L=L.parentElement)&&!L.classList.contains(R););return L}function b(){this.opts.closeMethods.indexOf("button")!==-1&&this.modalCloseBtn.removeEventListener("click",this._events.clickCloseBtn),this.modal.removeEventListener("mousedown",this._events.clickOverlay),window.removeEventListener("resize",this._events.resize),document.removeEventListener("keydown",this._events.keyboardNav)}function P(){for(var L=1;L<arguments.length;L++)for(var R in arguments[L])arguments[L].hasOwnProperty(R)&&(arguments[0][R]=arguments[L][R]);return arguments[0]}return{modal:n}})})(jH);var eRe=jH.exports,sf={},M2=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(sf,"__esModule",{value:!0});sf.PolygonTitlesLineLayer=sf.PolygonTitlesLayer=sf.PolygonIconsLayer=sf.PolygonsLayer=void 0;var $8=cd,lO=ld,h0=fd,tRe=function(e){M2(t,e);function t(r){var n=e.call(this,r)||this;return n.id="shop-custom",n.type="fill-extrusion",n.minzoom=r.minZoom,n.maxzoom=r.maxZoom,n.source="main",n.filter=["all",["==",["get","type",["get","_dynamic"]],"shop-custom"],["==",["to-number",["get","level"]],0]],n.paint=new $8.PaintProperties({"fill-extrusion-height":["case",["boolean",["feature-state","selected"],!1],r.selectedPolygonHeight,["boolean",["feature-state","hover"],!1],r.hoverPolygonHeight,["boolean",["feature-state","active"],!1],r.hoverPolygonHeight,r.defaultPolygonHeight],"fill-extrusion-base":r.base,"fill-extrusion-opacity":r.opacity,"fill-extrusion-color":["case",["boolean",["feature-state","selected"],!1],r.selectedPolygonColor,["boolean",["feature-state","hover"],!1],r.hoverPolygonColor,["boolean",["feature-state","active"],!1],r.hoverPolygonColor,["boolean",["feature-state","disabled"],!1],"#8a8a8a",r.defaultPolygonColor]}),n}return t}($8.default);sf.PolygonsLayer=tRe;var rRe=function(e){M2(t,e);function t(r){var n=e.call(this,r)||this;return n.id="poi-custom-icons",n.type="symbol",n.minzoom=r.minZoom,n.maxzoom=r.maxZoom,n.source="main",n.filter=["all",["==",["get","type",["get","_dynamic"]],"poi-custom"],["any",["all",["!",["has","icon_only"]],["!",["has","text_only"]]],["all",["has","icon_only"],["==",["get","icon_only"],!0]],["all",["has","icon_only"],["has","text_only"],["==",["get","text_only"],!1],["==",["get","icon_only"],!1]]],["==",["to-number",["get","level"]],0]],n.layout=new h0.LayoutProperties({"icon-image":"{amenity}","icon-size":["interpolate",["exponential",.5],["zoom"],17,.1,22,.5],"text-anchor":"top","text-offset":[0,2],"text-font":["Open Sans Regular"],"text-size":14,"symbol-placement":"point","icon-allow-overlap":!0,"text-allow-overlap":!0,visibility:!1}),n}return t}(h0.default);sf.PolygonIconsLayer=rRe;var nRe=function(e){M2(t,e);function t(r){var n=e.call(this,r)||this;return n.id="shop-labels",n.type="symbol",n.minzoom=r.minZoom,n.maxzoom=r.maxZoom,n.source="main",n.filter=["all",["==",["get","type",["get","_dynamic"]],"shop-label"],["==",["to-number",["get","level"]],0]],n.layout=new h0.LayoutProperties({"symbol-placement":r.symbolPlacement,"text-anchor":"top","text-ignore-placement":!0,"text-allow-overlap":!0,"text-field":"{title}","text-font":r.textFont,"text-size":r.labelFontSize,"text-letter-spacing":.005,"text-max-width":7}),n.paint=new h0.PaintProperties({"text-color":["case",["boolean",["feature-state","selected"],!1],r.selectedLabelColor,["boolean",["feature-state","hover"],!1],r.hoverLabelColor,r.defaultLabelColor]}),n}return t}(h0.default);sf.PolygonTitlesLayer=nRe;var iRe=function(e){M2(t,e);function t(r){var n=e.call(this,r)||this;return n.id="shop-labels-line",n.type="line",n.minzoom=r.minZoom,n.maxzoom=r.maxZoom,n.source="main",n.filter=["all",["==",["get","type",["get","_dynamic"]],"shop-label"],["==",["to-number",["get","level"]],0]],n.layout=new lO.LayoutProperties({"line-join":"round","line-cap":"round"}),n.paint=new lO.PaintProperties({"line-color":"#000","line-width":3}),n}return t}(lO.default);sf.PolygonTitlesLineLayer=iRe;var WN={};Object.defineProperty(WN,"__esModule",{value:!0});var oRe=Tc,aRe=function(){function e(t){this.id=t.id?t.id:(0,oRe.uuidv4)(),this.lat=t.lat,this.lng=t.lng,this.level=t.level}return e.prototype.updatePosition=function(t){this.lat=t.lat,this.lng=t.lng,this.level=t.level},e}();WN.default=aRe;var XN={},YN={},tx,sRe=new Uint8Array(16);function UH(){if(!tx&&(tx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!tx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tx(sRe)}const uRe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function L2(e){return typeof e=="string"&&uRe.test(e)}var _s=[];for(var cO=0;cO<256;++cO)_s.push((cO+256).toString(16).substr(1));function R2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(_s[e[t+0]]+_s[e[t+1]]+_s[e[t+2]]+_s[e[t+3]]+"-"+_s[e[t+4]]+_s[e[t+5]]+"-"+_s[e[t+6]]+_s[e[t+7]]+"-"+_s[e[t+8]]+_s[e[t+9]]+"-"+_s[e[t+10]]+_s[e[t+11]]+_s[e[t+12]]+_s[e[t+13]]+_s[e[t+14]]+_s[e[t+15]]).toLowerCase();if(!L2(r))throw TypeError("Stringified UUID is invalid");return r}var z8,fO,hO=0,dO=0;function lRe(e,t,r){var n=t&&r||0,i=t||new Array(16);e=e||{};var o=e.node||z8,s=e.clockseq!==void 0?e.clockseq:fO;if(o==null||s==null){var a=e.random||(e.rng||UH)();o==null&&(o=z8=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),s==null&&(s=fO=(a[6]<<8|a[7])&16383)}var d=e.msecs!==void 0?e.msecs:Date.now(),f=e.nsecs!==void 0?e.nsecs:dO+1,g=d-hO+(f-dO)/1e4;if(g<0&&e.clockseq===void 0&&(s=s+1&16383),(g<0||d>hO)&&e.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");hO=d,dO=f,fO=s,d+=122192928e5;var _=((d&268435455)*1e4+f)%4294967296;i[n++]=_>>>24&255,i[n++]=_>>>16&255,i[n++]=_>>>8&255,i[n++]=_&255;var b=d/4294967296*1e4&268435455;i[n++]=b>>>8&255,i[n++]=b&255,i[n++]=b>>>24&15|16,i[n++]=b>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(var P=0;P<6;++P)i[n+P]=o[P];return t||R2(i)}function VH(e){if(!L2(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function cRe(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var fRe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",hRe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function GH(e,t,r){function n(i,o,s,a){if(typeof i=="string"&&(i=cRe(i)),typeof o=="string"&&(o=VH(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+i.length);if(d.set(o),d.set(i,o.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,s){a=a||0;for(var f=0;f<16;++f)s[a+f]=d[f];return s}return R2(d)}try{n.name=e}catch{}return n.DNS=fRe,n.URL=hRe,n}function dRe(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return pRe(mRe(gRe(e),e.length*8))}function pRe(e){for(var t=[],r=e.length*32,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(s)}return t}function qH(e){return(e+64>>>9<<4)+14+1}function mRe(e,t){e[t>>5]|=128<<t%32,e[qH(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=r,d=n,f=i,g=o;r=Ys(r,n,i,o,e[s],7,-680876936),o=Ys(o,r,n,i,e[s+1],12,-389564586),i=Ys(i,o,r,n,e[s+2],17,606105819),n=Ys(n,i,o,r,e[s+3],22,-1044525330),r=Ys(r,n,i,o,e[s+4],7,-176418897),o=Ys(o,r,n,i,e[s+5],12,1200080426),i=Ys(i,o,r,n,e[s+6],17,-1473231341),n=Ys(n,i,o,r,e[s+7],22,-45705983),r=Ys(r,n,i,o,e[s+8],7,1770035416),o=Ys(o,r,n,i,e[s+9],12,-1958414417),i=Ys(i,o,r,n,e[s+10],17,-42063),n=Ys(n,i,o,r,e[s+11],22,-1990404162),r=Ys(r,n,i,o,e[s+12],7,1804603682),o=Ys(o,r,n,i,e[s+13],12,-40341101),i=Ys(i,o,r,n,e[s+14],17,-1502002290),n=Ys(n,i,o,r,e[s+15],22,1236535329),r=Hs(r,n,i,o,e[s+1],5,-165796510),o=Hs(o,r,n,i,e[s+6],9,-1069501632),i=Hs(i,o,r,n,e[s+11],14,643717713),n=Hs(n,i,o,r,e[s],20,-373897302),r=Hs(r,n,i,o,e[s+5],5,-701558691),o=Hs(o,r,n,i,e[s+10],9,38016083),i=Hs(i,o,r,n,e[s+15],14,-660478335),n=Hs(n,i,o,r,e[s+4],20,-405537848),r=Hs(r,n,i,o,e[s+9],5,568446438),o=Hs(o,r,n,i,e[s+14],9,-1019803690),i=Hs(i,o,r,n,e[s+3],14,-187363961),n=Hs(n,i,o,r,e[s+8],20,1163531501),r=Hs(r,n,i,o,e[s+13],5,-1444681467),o=Hs(o,r,n,i,e[s+2],9,-51403784),i=Hs(i,o,r,n,e[s+7],14,1735328473),n=Hs(n,i,o,r,e[s+12],20,-1926607734),r=Zs(r,n,i,o,e[s+5],4,-378558),o=Zs(o,r,n,i,e[s+8],11,-2022574463),i=Zs(i,o,r,n,e[s+11],16,1839030562),n=Zs(n,i,o,r,e[s+14],23,-35309556),r=Zs(r,n,i,o,e[s+1],4,-1530992060),o=Zs(o,r,n,i,e[s+4],11,1272893353),i=Zs(i,o,r,n,e[s+7],16,-155497632),n=Zs(n,i,o,r,e[s+10],23,-1094730640),r=Zs(r,n,i,o,e[s+13],4,681279174),o=Zs(o,r,n,i,e[s],11,-358537222),i=Zs(i,o,r,n,e[s+3],16,-722521979),n=Zs(n,i,o,r,e[s+6],23,76029189),r=Zs(r,n,i,o,e[s+9],4,-640364487),o=Zs(o,r,n,i,e[s+12],11,-421815835),i=Zs(i,o,r,n,e[s+15],16,530742520),n=Zs(n,i,o,r,e[s+2],23,-995338651),r=Ks(r,n,i,o,e[s],6,-198630844),o=Ks(o,r,n,i,e[s+7],10,1126891415),i=Ks(i,o,r,n,e[s+14],15,-1416354905),n=Ks(n,i,o,r,e[s+5],21,-57434055),r=Ks(r,n,i,o,e[s+12],6,1700485571),o=Ks(o,r,n,i,e[s+3],10,-1894986606),i=Ks(i,o,r,n,e[s+10],15,-1051523),n=Ks(n,i,o,r,e[s+1],21,-2054922799),r=Ks(r,n,i,o,e[s+8],6,1873313359),o=Ks(o,r,n,i,e[s+15],10,-30611744),i=Ks(i,o,r,n,e[s+6],15,-1560198380),n=Ks(n,i,o,r,e[s+13],21,1309151649),r=Ks(r,n,i,o,e[s+4],6,-145523070),o=Ks(o,r,n,i,e[s+11],10,-1120210379),i=Ks(i,o,r,n,e[s+2],15,718787259),n=Ks(n,i,o,r,e[s+9],21,-343485551),r=Yh(r,a),n=Yh(n,d),i=Yh(i,f),o=Yh(o,g)}return[r,n,i,o]}function gRe(e){if(e.length===0)return[];for(var t=e.length*8,r=new Uint32Array(qH(t)),n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function Yh(e,t){var r=(e&65535)+(t&65535),n=(e>>16)+(t>>16)+(r>>16);return n<<16|r&65535}function vRe(e,t){return e<<t|e>>>32-t}function k2(e,t,r,n,i,o){return Yh(vRe(Yh(Yh(t,e),Yh(n,o)),i),r)}function Ys(e,t,r,n,i,o,s){return k2(t&r|~t&n,e,t,i,o,s)}function Hs(e,t,r,n,i,o,s){return k2(t&n|r&~n,e,t,i,o,s)}function Zs(e,t,r,n,i,o,s){return k2(t^r^n,e,t,i,o,s)}function Ks(e,t,r,n,i,o,s){return k2(r^(t|~n),e,t,i,o,s)}var yRe=GH("v3",48,dRe);const _Re=yRe;function bRe(e,t,r){e=e||{};var n=e.random||(e.rng||UH)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return R2(n)}function xRe(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function pO(e,t){return e<<t|e>>>32-t}function wRe(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),d=0;d<s;++d){for(var f=new Uint32Array(16),g=0;g<16;++g)f[g]=e[d*64+g*4]<<24|e[d*64+g*4+1]<<16|e[d*64+g*4+2]<<8|e[d*64+g*4+3];a[d]=f}a[s-1][14]=(e.length-1)*8/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=(e.length-1)*8&4294967295;for(var _=0;_<s;++_){for(var b=new Uint32Array(80),P=0;P<16;++P)b[P]=a[_][P];for(var L=16;L<80;++L)b[L]=pO(b[L-3]^b[L-8]^b[L-14]^b[L-16],1);for(var R=r[0],$=r[1],F=r[2],T=r[3],x=r[4],N=0;N<80;++N){var B=Math.floor(N/20),H=pO(R,5)+xRe(B,$,F,T)+x+t[B]+b[N]>>>0;x=T,T=F,F=pO($,30)>>>0,$=R,R=H}r[0]=r[0]+R>>>0,r[1]=r[1]+$>>>0,r[2]=r[2]+F>>>0,r[3]=r[3]+T>>>0,r[4]=r[4]+x>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var ERe=GH("v5",80,wRe);const SRe=ERe,PRe="00000000-0000-0000-0000-000000000000";function ARe(e){if(!L2(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const CRe=Object.freeze(Object.defineProperty({__proto__:null,NIL:PRe,parse:VH,stringify:R2,v1:lRe,v3:_Re,v4:bRe,v5:SRe,validate:L2,version:ARe},Symbol.toStringTag,{value:"Module"})),IRe=Yg(CRe);Object.defineProperty(YN,"__esModule",{value:!0});var mO=IRe,ORe=function(){function e(t){this.id=t.id?t.id:"".concat((0,mO.v4)(),":").concat((0,mO.v4)()),this.organization_id=t.organization_id,this.organization_name=t.organization_name,this.visitor_id=t.visitor_id?t.visitor_id:(0,mO.v4)(),this.createdAt=t.createdAt?t.createdAt:new Date}return e}();YN.default=ORe;var TRe=Pe&&Pe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MRe=Pe&&Pe.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(g){try{f(n.next(g))}catch(_){s(_)}}function d(g){try{f(n.throw(g))}catch(_){s(_)}}function f(g){g.done?o(g.value):i(g.value).then(a,d)}f((n=n.apply(e,t||[])).next())})},LRe=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(XN,"__esModule",{value:!0});var RRe=Tc,kRe=YN,DRe=function(e){TRe(t,e);function t(r){var n=e.call(this,r)||this;return n.startLngLat=r.startLngLat,n.startLevel=r.startLevel,n.startSegmentId=r.startSegmentId,n.startSegmentName=r.startSegmentName,n.startGeofenceId=r.startGeofenceId,n.startGeofenceName=r.startGeofenceName,n.destinationFeatureId=r.destinationFeatureId,n.destinationName=r.destinationName,n.destinationLngLat=r.destinationLngLat,n.destinationLevel=r.destinationLevel,n.foundPath=r.foundPath,n.optionAvoidBarrier=r.optionAvoidBarrier,n.optionAvoidElevators=r.optionAvoidElevators,n.optionAvoidEscalators=r.optionAvoidEscalators,n.optionAvoidNarrowPaths=r.optionAvoidNarrowPaths,n.optionAvoidRamps=r.optionAvoidRamps,n.optionAvoidStaircases=r.optionAvoidStaircases,n.optionAvoidTicketGates=r.optionAvoidTicketGates,n.route=r.route,n.rerouted=r.rerouted,n}return t.prototype.save=function(){return MRe(this,void 0,void 0,function(){var r;return LRe(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,RRe.axios.post("v6/geo/wayfinding_logs",[this])];case 1:return n.sent(),[3,3];case 2:return r=n.sent(),[3,3];case 3:return[2]}})})},t}(kRe.default);XN.default=DRe;var D2={};Object.defineProperty(D2,"__esModule",{value:!0});D2.translations=void 0;D2.translations={en:{ELEVATOR:"Elevator",ESCALATOR:"Escalator",STAIRS:"Stairs",RAMP:"Ramp",UP:"up",DOWN:"down",TO_FLOOR:"to floor"},fi:{ELEVATOR:"Hissi",ESCALATOR:"Liukuportaat",STAIRS:"Portaat",RAMP:"Luiska",UP:"yls",DOWN:"alas",TO_FLOOR:"kerrokseen"},ar:{ELEVATOR:"",ESCALATOR:" ",STAIRS:"",RAMP:"",UP:"",DOWN:"",TO_FLOOR:" "},it:{ELEVATOR:"Ascensore",ESCALATOR:"Scala mobile",STAIRS:"Scale",RAMP:"Rampa",UP:"su",DOWN:"gi",TO_FLOOR:"al piano"}};var B8;function WH(){return B8||(B8=1,function(e){var t=Pe&&Pe.__assign||function(){return t=Object.assign||function(fe){for(var G,K=1,re=arguments.length;K<re;K++){G=arguments[K];for(var ie in G)Object.prototype.hasOwnProperty.call(G,ie)&&(fe[ie]=G[ie])}return fe},t.apply(this,arguments)},r=Pe&&Pe.__awaiter||function(fe,G,K,re){function ie(he){return he instanceof K?he:new K(function(ae){ae(he)})}return new(K||(K=Promise))(function(he,ae){function Te($e){try{Xe(re.next($e))}catch(at){ae(at)}}function Le($e){try{Xe(re.throw($e))}catch(at){ae(at)}}function Xe($e){$e.done?he($e.value):ie($e.value).then(Te,Le)}Xe((re=re.apply(fe,G||[])).next())})},n=Pe&&Pe.__generator||function(fe,G){var K={label:0,sent:function(){if(he[0]&1)throw he[1];return he[1]},trys:[],ops:[]},re,ie,he,ae;return ae={next:Te(0),throw:Te(1),return:Te(2)},typeof Symbol=="function"&&(ae[Symbol.iterator]=function(){return this}),ae;function Te(Xe){return function($e){return Le([Xe,$e])}}function Le(Xe){if(re)throw new TypeError("Generator is already executing.");for(;ae&&(ae=0,Xe[0]&&(K=0)),K;)try{if(re=1,ie&&(he=Xe[0]&2?ie.return:Xe[0]?ie.throw||((he=ie.return)&&he.call(ie),0):ie.next)&&!(he=he.call(ie,Xe[1])).done)return he;switch(ie=0,he&&(Xe=[Xe[0]&2,he.value]),Xe[0]){case 0:case 1:he=Xe;break;case 4:return K.label++,{value:Xe[1],done:!1};case 5:K.label++,ie=Xe[1],Xe=[0];continue;case 7:Xe=K.ops.pop(),K.trys.pop();continue;default:if(he=K.trys,!(he=he.length>0&&he[he.length-1])&&(Xe[0]===6||Xe[0]===2)){K=0;continue}if(Xe[0]===3&&(!he||Xe[1]>he[0]&&Xe[1]<he[3])){K.label=Xe[1];break}if(Xe[0]===6&&K.label<he[1]){K.label=he[1],he=Xe;break}if(he&&K.label<he[2]){K.label=he[2],K.ops.push(Xe);break}he[2]&&K.ops.pop(),K.trys.pop();continue}Xe=G.call(fe,K)}catch($e){Xe=[6,$e],ie=0}finally{re=he=0}if(Xe[0]&5)throw Xe[1];return{value:Xe[0]?Xe[1]:void 0,done:!0}}},i=Pe&&Pe.__spreadArray||function(fe,G,K){if(K||arguments.length===2)for(var re=0,ie=G.length,he;re<ie;re++)(he||!(re in G))&&(he||(he=Array.prototype.slice.call(G,0,re)),he[re]=G[re]);return fe.concat(he||Array.prototype.slice.call(G))};Object.defineProperty(e,"__esModule",{value:!0}),e.Map=e.globalState=void 0;var o=gG,s=z1e(),a=DR,d=MN(),f=y_,g=__,_=VE,b=LN,P=kN,L=Su,R=DN,$=$N,F=zN,T=Tc,x=tH,N=Qg,B=v_,H=BN,Z=x_,Y=eRe,W=El,Q=sf,me=WN,ge=Vt,be=XN,oe=D2;e.globalState={initializing:!0,floor:new g.FloorModel({}),floors:[],place:new f.PlaceModel({}),places:[],style:new _.default({}),styles:[],amenities:[],features:new L.FeatureCollection({}),dynamicFeatures:new L.FeatureCollection({}),allFeatures:new L.FeatureCollection({}),latitude:0,longitude:0,loadingRoute:!1,noPlaces:!1,textNavigation:null,persons:[],user:null};var Ie=function(){function fe(G){var K=this;this.geojsonSource=new b.default(new L.FeatureCollection({})),this.syntheticSource=new P.default(new L.FeatureCollection({})),this.routingSource=new R.default,this.clusterSource=new $.default,this.imageSourceManager=new F.default,this.onMapReadyListener=new H.Subject,this.onPlaceSelectListener=new H.Subject,this.onFloorSelectListener=new H.Subject,this.onRouteFoundListener=new H.Subject,this.onRouteFailedListener=new H.Subject,this.onRouteCancelListener=new H.Subject,this.onFeatureAddListener=new H.Subject,this.onFeatureUpdateListener=new H.Subject,this.onFeatureDeleteListener=new H.Subject,this.onPolygonClickListener=new H.Subject,this.onPoiClickListener=new H.Subject,this.onPersonUpdateListener=new H.Subject,this.onStepSetListener=new H.Subject,this.defaultOptions={selector:"proximiioMap",allowNewFeatureModal:!1,newFeatureModalEvent:"click",enableTBTNavigation:!0,zoomIntoPlace:!0,isKiosk:!1,initPolygons:!1,polygonsOptions:{defaultPolygonColor:"#dbd7e8",hoverPolygonColor:"#a58dfa",selectedPolygonColor:"#6945ed",defaultLabelColor:"#6945ed",hoverLabelColor:"#fff",selectedLabelColor:"#fff",defaultPolygonHeight:3,hoverPolygonHeight:3,selectedPolygonHeight:3,base:0,opacity:1,removeOriginalPolygonsLayer:!0,minZoom:17,maxZoom:24,labelFontSize:["interpolate",["exponential",1.75],["zoom"],18,["interpolate",["linear"],["/",["get","length",["get","_dynamic"]],["length",["get","title"]]],1,5,5,10,10,20,15,30],22,["interpolate",["linear"],["/",["get","length",["get","_dynamic"]],["length",["get","title"]]],1,30,5,50,10,60,15,70]],textFont:["Amiri Bold"],symbolPlacement:"line-center",autoLabelLines:!0},considerVisibilityParam:!0,fitBoundsPadding:250,minFitBoundsDistance:15,showLevelDirectionIcon:!1,showRasterFloorplans:!1,animatedRoute:!1,animationLooping:!0,routeAnimation:{enabled:!1,type:"dash",looping:!0,followRoute:!0,durationMultiplier:30,fps:120,pointColor:"#1d8a9f",pointRadius:8,lineColor:"#6945ed",lineWidth:5,lineOpacity:.6},useRasterTiles:!1,handleUrlParams:!1,urlParams:{startFeauture:"startFeature",destinationFeature:"destinationFeature",defaultPlace:"defaultPlace"},useGpsLocation:!1,geolocationControlOptions:{autoTrigger:!0,autoLocate:!0,position:"top-right"},language:"en",routeWithDetails:!0,blockFeatureClickWhileRouting:!1,useTimerangeData:!1,sendAnalytics:!0},this.showStartPoint=!1,this.amenityIds=[],this.filteredFeatures=[],this.hiddenFeatures=[],this.filteredAmenities=[],this.amenityFilters=[],this.hiddenAmenities=[],this.amenityCategories={},this.currentStep=0,this.step=0,this.animateRoute=function(){var ae;if(K.routingSource&&K.routingSource.route&&K.routingSource.route["path-part-".concat(K.currentStep)]){var Te=K.routingSource.route["path-part-".concat(K.currentStep)]&&((ae=K.routingSource.route["path-part-".concat(K.currentStep)].properties)===null||ae===void 0?void 0:ae.level)===K.state.floor.level?K.routingSource.route["path-part-".concat(K.currentStep)]:(0,ge.lineString)(K.routingSource.levelPoints[K.state.floor.level].map(function(br){return br.geometry.coordinates}));if(K.defaultOptions.routeAnimation.type==="point"){clearInterval(K.animationInterval),clearTimeout(K.animationTimeout);var Le=Z.length(Te)*1e3,Xe=1.4,$e=Le/Xe,at=K.defaultOptions.routeAnimation.durationMultiplier,_t=K.defaultOptions.routeAnimation.duration?K.defaultOptions.routeAnimation.duration:$e*(1/at),Lt=K.defaultOptions.routeAnimation.fps,pt=Math.round(Lt*_t),Ot=Z.length(Te),vt=Ot/pt,Ze=_t/pt*1e3,Zt=0;K.animationInterval=setInterval(function(){K.updateData(Te,vt,Zt,pt),Zt===pt+1?clearInterval(K.animationInterval):Zt+=1},Ze)}if(K.defaultOptions.routeAnimation.type==="dash"){var rr=[[0,4,3],[.5,4,2.5],[1,4,2],[1.5,4,1.5],[2,4,1],[2.5,4,.5],[3,4,0],[0,.5,3,3.5],[0,1,3,3],[0,1.5,3,2.5],[0,2,3,2],[0,2.5,3,1.5],[0,3,3,1],[0,3.5,3,.5]];K.map.getSource("lineAlong").setData(Te);var Gt=function(br){var un=Math.floor(br/50%rr.length);un!==K.step&&(K.map.setPaintProperty("line-dashed","line-dasharray",rr[K.step]),K.step=un),requestAnimationFrame(Gt)};requestAnimationFrame(Gt)}}},this.updateData=function(ae,Te,Le,Xe){var $e=!1,at=Te*Le,_t=Z.along(ae,at),Lt=Z.lineSplit(ae,_t).features[0];K.map.getSource("pointAlong").setData(_t),K.map.getSource("lineAlong").setData(Lt),K.defaultOptions.routeAnimation.followRoute&&!$e&&($e=!0,setTimeout(function(){K.map.jumpTo({center:_t.geometry.coordinates}),$e=!1},100)),Le===Xe&&K.defaultOptions.routeAnimation.looping&&(K.animationTimeout=setTimeout(function(){K.animateRoute()},2e3))},G.isKiosk&&G.mapboxOptions&&G.kioskSettings&&!G.mapboxOptions.center&&(G.mapboxOptions.center=G.kioskSettings.coordinates);var re=t(t({},this.defaultOptions.urlParams),G.urlParams),ie=t(t({},this.defaultOptions.polygonsOptions),G.polygonsOptions),he=t(t({},this.defaultOptions.routeAnimation),G.routeAnimation);if(this.defaultOptions=t(t({},this.defaultOptions),G),this.defaultOptions.urlParams=re,this.defaultOptions.polygonsOptions=ie,this.defaultOptions.routeAnimation=he,this.state=e.globalState,this.defaultOptions.isKiosk&&this.defaultOptions.useGpsLocation)throw new Error("It's not possible to use both isKiosk and useGpsLocation options as enabled!");o.getRTLTextPluginStatus()!=="loaded"&&o.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",null,!0),this.map=new o.Map(t(t({},this.defaultOptions.mapboxOptions),{container:this.defaultOptions.selector?this.defaultOptions.selector:"map"})),this.map.on("load",function(ae){K.onMapReady(ae)}),this.onSourceChange=this.onSourceChange.bind(this),this.onSyntheticChange=this.onSyntheticChange.bind(this),this.onStyleChange=this.onStyleChange.bind(this),this.onStyleSelect=this.onStyleSelect.bind(this),this.onRouteUpdate=this.onRouteUpdate.bind(this),this.onRouteChange=this.onRouteChange.bind(this),this.onRouteCancel=this.onRouteCancel.bind(this),this.initialize()}return fe.prototype.initialize=function(){return r(this,void 0,void 0,function(){return n(this,function(G){switch(G.label){case 0:return this.geojsonSource.on(this.onSourceChange),this.syntheticSource.on(this.onSyntheticChange),this.routingSource.on(this.onRouteChange),[4,this.fetch()];case 1:return G.sent(),[2]}})})},fe.prototype.cancelObservers=function(){return r(this,void 0,void 0,function(){return n(this,function(G){return this.geojsonSource.off(this.onSourceChange),this.syntheticSource.off(this.onSyntheticChange),this.state.style.off(this.onStyleChange),[2]})})},fe.prototype.fetch=function(){var G,K,re;return r(this,void 0,void 0,function(){var ie,he,ae,Te,Le,Xe,$e,at,_t,Lt,pt,Ot,vt,Ze,Zt=this;return n(this,function(rr){switch(rr.label){case 0:return ie=null,this.defaultOptions.handleUrlParams&&(he=new URLSearchParams(window.location.search),ie=he.get(this.defaultOptions.urlParams.defaultPlace)),[4,s.default.getPackage({initPolygons:this.defaultOptions.initPolygons,autoLabelLines:this.defaultOptions.polygonsOptions.autoLabelLines,amenityIdProperty:this.defaultOptions.amenityIdProperty,hiddenAmenities:this.defaultOptions.hiddenAmenities,useTimerangeData:this.defaultOptions.useTimerangeData,filter:this.defaultOptions.defaultFilter,featuresMaxBounds:this.defaultOptions.featuresMaxBounds})];case 1:return ae=rr.sent(),Te=ae.places,Le=ae.style,Xe=ae.styles,$e=ae.features,at=ae.amenities,_t=$e.features.filter(function(Gt){return Gt.properties.type==="elevator"||Gt.properties.type==="escalator"||Gt.properties.type==="staircase"}),[4,a.default.getCurrentUser()];case 2:return Lt=rr.sent(),pt=ie?Te.find(function(Gt){return Gt.id===ie||Gt.name===ie}):Te.find(function(Gt){return Gt.id===Zt.defaultOptions.defaultPlaceId}),Ot=Te.length>0?pt||Te[0]:new f.PlaceModel({}),vt=[Ot.location.lng,Ot.location.lat],!((G=this.defaultOptions.mapboxOptions)===null||G===void 0)&&G.center&&(vt=this.defaultOptions.mapboxOptions.center),this.defaultOptions.isKiosk&&(vt=(K=this.defaultOptions.kioskSettings)===null||K===void 0?void 0:K.coordinates),ie&&(vt=[Ot.location.lng,Ot.location.lat]),Le.center=vt,this.defaultOptions.mapboxOptions&&(this.defaultOptions.mapboxOptions.center=Le.center),this.defaultOptions.zoomLevel&&(Le.zoom=this.defaultOptions.zoomLevel),this.defaultOptions.language&&(this.geojsonSource.language=this.defaultOptions.language),this.defaultOptions.routeColor&&(Ze=Le.layers.find(function(Gt){return Gt.id==="proximiio-routing-line-remaining"}),Ze&&(Ze.paint["line-color"]=this.defaultOptions.routeColor)),this.defaultOptions.forceFloorLevel!==null&&this.defaultOptions.forceFloorLevel!==void 0&&(this.routingSource.routing.forceFloorLevel=this.defaultOptions.forceFloorLevel),this.defaultOptions.routeWithDetails!==null&&this.defaultOptions.routeWithDetails!==void 0&&(this.routingSource.routing.routeWithDetails=this.defaultOptions.routeWithDetails),this.geojsonSource.fetch($e),this.routingSource.routing.setData(new L.FeatureCollection($e)),this.prepareStyle(Le),this.imageSourceManager.enabled=this.defaultOptions.showRasterFloorplans,this.imageSourceManager.belowLayer=Le.usesPrefixes()?"proximiio-floors":"floors",this.imageSourceManager.initialize(),this.state=t(t({},this.state),{initializing:!1,place:Ot,places:Te,style:Le,styles:Xe,amenities:at,features:$e,allFeatures:new L.FeatureCollection($e),levelChangers:new L.FeatureCollection({features:_t}),latitude:vt[1],longitude:vt[0],zoom:this.defaultOptions.zoomLevel?this.defaultOptions.zoomLevel:(re=this.defaultOptions.mapboxOptions)===null||re===void 0?void 0:re.zoom,noPlaces:Te.length===0,user:Lt}),Le.on(this.onStyleChange),this.map.setStyle(this.state.style),this.map.setCenter(vt),this.defaultOptions.allowNewFeatureModal&&this.map.on(this.defaultOptions.newFeatureModalEvent?this.defaultOptions.newFeatureModalEvent:"dblclick",function(Gt){Zt.featureDialog(Gt)}),[2]}})})},fe.prototype.onMapReady=function(G){var K,re;return r(this,void 0,void 0,function(){var ie,he,ae,Te,Le,Xe,$e,at,_t,Lt,pt,Ot=this;return n(this,function(vt){switch(vt.label){case 0:return ie=G.target,ie?((K=this.state.style)===null||K===void 0||K.togglePaths(!0),he=ie.getLayer("routing-line-completed"),ae=typeof he>"u"&&typeof ie.getLayer("proximiio-routing-line-completed")<"u",Te=ie.getLayer("shops"),ae?(ie.moveLayer("proximiio-routing-line-completed","proximiio-outer_wall"),ie.moveLayer("proximiio-routing-line-remaining","proximiio-outer_wall"),ie.moveLayer("proximiio-paths","routing-line-completed")):he&&(Te&&(ie.moveLayer("routing-line-completed","proximiio-routing-symbols"),ie.moveLayer("routing-line-remaining","proximiio-routing-symbols")),ie.moveLayer("proximiio-paths","routing-line-completed")),Le=ie.getLayer("proximiio-routing-symbols"),Le&&(Le.filter.push(["match",["get","type"],["poi","poi-custom"],!1,!0]),this.state.style.getLayer("proximiio-routing-symbols").filter=Le.filter,ie.setFilter("proximiio-routing-symbols",Le.filter)),ie.setMaxZoom(30),[4,(0,T.getImageFromBase64)(x.chevron)]):[3,7];case 1:return Xe=vt.sent(),[4,(0,T.getImageFromBase64)(x.person)];case 2:return $e=vt.sent(),[4,(0,T.getImageFromBase64)(x.floorchangeUpImage)];case 3:return at=vt.sent(),[4,(0,T.getImageFromBase64)(x.floorchangeDownImage)];case 4:return _t=vt.sent(),[4,(0,T.getImageFromBase64)(x.popupImage)];case 5:return Lt=vt.sent(),ie.addImage("chevron_right",Xe),ie.addImage("pulsing-dot",x.pulsingDot,{pixelRatio:2}),ie.addImage("person",$e),ie.addImage("floorchange-up-image",at),ie.addImage("floorchange-down-image",_t),ie.addImage("popup",Lt,{stretchX:[[25,55],[85,115]],stretchY:[[25,100]],content:[25,25,115,100],pixelRatio:2}),this.onSourceChange(),this.updateMapSource(this.geojsonSource),this.updateMapSource(this.routingSource),this.updateCluster(),this.updateImages(),this.filteredAmenities=this.amenityIds,this.imageSourceManager.setLevel(ie,(re=this.state.floor)===null||re===void 0?void 0:re.level,this.state),[4,this.onPlaceSelect(this.state.place,this.defaultOptions.zoomIntoPlace)];case 6:vt.sent(),this.defaultOptions.useRasterTiles&&this.initRasterTiles(),this.defaultOptions.initPolygons&&this.initPolygons(),this.defaultOptions.isKiosk&&this.initKiosk(),this.defaultOptions.considerVisibilityParam&&this.handlePoiVisibility(),this.defaultOptions.showLevelDirectionIcon&&this.initDirectionIcon(),(this.defaultOptions.animatedRoute||this.defaultOptions.routeAnimation.enabled)&&(this.defaultOptions.animatedRoute,this.initAnimatedRoute()),this.defaultOptions.hiddenAmenities&&(pt=["proximiio-pois-icons","proximiio-pois-labels","pois-icons","pois-labels","poi-custom-icons"],pt.forEach(function(Ze){var Zt=Ot.map.getLayer(Ze);if(Zt){var rr=i([],Zt.filter,!0);rr.push(["!=",["get","hideIcon"],"hide"]),Ot.state.style.getLayer(Ze).filter=rr,Ot.map.setFilter(Ze,rr)}})),this.initPersonsMap(),this.defaultOptions.initPolygons||(this.map.on("click","proximiio-pois-icons",function(Ze){Ot.onShopClick(Ze)}),this.map.on("click","proximiio-pois-labels",function(Ze){Ot.onShopClick(Ze)}),this.map.on("click","pois-icons",function(Ze){Ot.onShopClick(Ze)})),this.onMapReadyListener.next(!0),this.defaultOptions.useGpsLocation&&this.initGeoLocation(),this.defaultOptions.handleUrlParams&&this.initUrlParams(),this.map.setStyle(this.state.style),vt.label=7;case 7:return[2]}})})},fe.prototype.onRefetch=function(){return r(this,void 0,void 0,function(){var G,K;return n(this,function(re){switch(re.label){case 0:return this.map?[4,s.default.getPackage({initPolygons:this.defaultOptions.initPolygons,autoLabelLines:this.defaultOptions.polygonsOptions.autoLabelLines,amenityIdProperty:this.defaultOptions.amenityIdProperty,hiddenAmenities:this.defaultOptions.hiddenAmenities,useTimerangeData:this.defaultOptions.useTimerangeData,filter:this.defaultOptions.defaultFilter,featuresMaxBounds:this.defaultOptions.featuresMaxBounds})]:[3,2];case 1:G=re.sent().features,K=G.features.filter(function(ie){return ie.properties.type==="elevator"||ie.properties.type==="escalator"||ie.properties.type==="staircase"}),this.state=t(t({},this.state),{features:G,allFeatures:new L.FeatureCollection(G),levelChangers:new L.FeatureCollection({features:K})}),this.geojsonSource.fetch(this.state.features),this.onFeaturesChange(),re.label=2;case 2:return[2]}})})},fe.prototype.initKiosk=function(){this.map&&(this.showStartPoint=!1,this.defaultOptions.kioskSettings&&(this.startPoint=Z.point(this.defaultOptions.kioskSettings.coordinates,{level:this.defaultOptions.kioskSettings.level}),this.showStartPoint=!0,this.state.style.addSource("my-location",{type:"geojson",data:{type:"FeatureCollection",features:[this.startPoint]}}),this.state.style.addLayer({id:"my-location-layer",type:"symbol",source:"my-location",layout:{"icon-image":"pulsing-dot"},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]}),this.centerOnPoi(this.startPoint)))},fe.prototype.onSetKiosk=function(G,K,re){this.map&&this.defaultOptions.isKiosk&&(this.defaultOptions.kioskSettings={coordinates:[K,G],level:re},this.startPoint=Z.point(this.defaultOptions.kioskSettings.coordinates,{level:this.defaultOptions.kioskSettings.level}),this.state.style.sources["my-location"].data={type:"FeatureCollection",features:[this.startPoint]},this.map.setFilter("my-location-layer",["all",["==",["to-number",["get","level"]],re]]),this.map.setStyle(this.state.style),this.centerOnPoi(this.startPoint))},fe.prototype.initGeoLocation=function(){var G=this;if(this.map&&this.defaultOptions.useGpsLocation){var K=new o.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,trackUserLocation:!0});this.map.addControl(K,this.defaultOptions.geolocationControlOptions.position),this.defaultOptions.geolocationControlOptions.autoTrigger&&setTimeout(function(){K.trigger()},300),this.defaultOptions.geolocationControlOptions.autoLocate===!1&&setTimeout(function(){K._watchState="BACKGROUND",K._geolocateButton&&(K._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),K._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active")),K.fire(new Event("trackuserlocationend"))}),K.on("geolocate",function(re){G.startPoint=Z.point([re.coords.longitude,re.coords.latitude],{level:G.state.floor.level})})}},fe.prototype.initDirectionIcon=function(){var G=this;if(this.map){var K=this.map.getLayer("proximiio-levelchangers"),re=this.map.getLayoutProperty("proximiio-levelchangers","icon-size"),ie=50;this.state.style.addSource("direction-icon-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.addLayer({id:"direction-halo-layer",type:"circle",source:"direction-icon-source",minzoom:K.minzoom,maxzoom:K.maxzoom,paint:{"circle-radius":re[0]==="interpolate"?[re[0],re[1],re[2],re[3],re[4]*(ie||50),re[5],re[6]*(ie||50)]:ie,"circle-color":"#000"},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},"proximiio-paths-names"),this.state.style.addLayer({id:"direction-popup-layer",type:"symbol",source:"direction-icon-source",minzoom:K.minzoom,maxzoom:K.maxzoom,layout:{"text-field":["get","description"],"icon-text-fit":"both","icon-image":["get","popupImage"],"icon-allow-overlap":!0,"text-allow-overlap":!0,"icon-anchor":"bottom","text-anchor":"bottom","text-offset":[0,-2.4],"text-font":this.defaultOptions.polygonsOptions.textFont},paint:{"text-color":"#fff"},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},"proximiio-polygons-above-paths"),this.map.on("click","proximiio-levelchangers",function(he){if(G.routingSource.points){var ae=G.state.style.getSource("direction-icon-source").data.features.find(function(Te){return Te.properties.level===G.state.floor.level});ae&&ae.properties&&!isNaN(ae.properties.destinationLevel)&&he.features[0].properties.id===ae.properties.levelChangerId&&(G.setFloorByLevel(ae.properties.destinationLevel),G.setNavStep("next"))}}),this.map.on("click","direction-popup-layer",function(he){G.routingSource.points&&he.features[0].properties&&!isNaN(he.features[0].properties.destinationLevel)&&(G.setFloorByLevel(he.features[0].properties.destinationLevel),G.setNavStep("next"))})}},fe.prototype.addDirectionFeatures=function(){var G=this,K=this.state.textNavigation.steps.filter(function(re,ie,he){var ae,Te=re.direction.split("_")[0];if(re.levelChangerId&&(Te==="UP"||Te==="DOWN"))return re.destinationLevel=he[ie+1]?(ae=he[ie+1])===null||ae===void 0?void 0:ae.level:null,re}).map(function(re){var ie=G.state.allFeatures.features.find(function(Le){return Le.id===re.levelChangerId}),he=re.direction.split("_")[0],ae=re.direction.split("_")[1],Te=G.state.floors.filter(function(Le){return Le.level===re.destinationLevel})?G.state.floors.filter(function(Le){return Le.level===re.destinationLevel})[0]:G.state.floor;return new L.default({type:"Feature",geometry:ie.geometry,properties:{usecase:"floor-change-symbol",icon:he==="UP"?"floorchange-up-image":"floorchange-down-image",iconOffset:he==="UP"?[4,-90]:[4,90],popupImage:"popup",description:"".concat(oe.translations[G.defaultOptions.language][ae],` 
 `).concat(oe.translations[G.defaultOptions.language][he]," ").concat(oe.translations[G.defaultOptions.language].TO_FLOOR," ").concat(Te.name?G.getFloorName(Te):re.destinationLevel),level:re.level,destinationLevel:re.destinationLevel,levelChangerId:ie.properties.id}})});this.state.style.sources["direction-icon-source"].data={type:"FeatureCollection",features:K},this.map.setStyle(this.state.style)},fe.prototype.onSetFeaturesHighlight=function(G,K,re,ie){var he=this.map,ae=this.state.allFeatures.features.filter(function(Xe){return G.includes(Xe.id||Xe.properties.id)}),Te=this.map.getLayer("proximiio-pois-icons"),Le=this.map.getLayoutProperty("proximiio-pois-icons","icon-size");he&&(he.getLayer("highlight-icon-layer")||this.state.style.addLayer({id:"highlight-icon-layer",type:"circle",source:"highlight-icon-source",minzoom:Te.minzoom,maxzoom:Te.maxzoom,paint:{"circle-radius":Le[0]==="interpolate"?[Le[0],Le[1],Le[2],Le[3],Le[4]*(re||50),Le[5],Le[6]*(re||50)]:re,"circle-color":K||"#000","circle-blur":ie??.8},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},this.defaultOptions.initPolygons?"shop-custom":"proximiio-shop"),he.getSource("highlight-icon-source")||this.state.style.addSource("highlight-icon-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.sources["highlight-icon-source"].data.features=ae||[],this.map.setStyle(this.state.style))},fe.prototype.initAnimatedRoute=function(){this.map&&(this.defaultOptions.routeAnimation.type==="point"&&(this.state.style.addSource("lineAlong",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.addLayer({id:"lineAlong",type:"line",source:"lineAlong",minzoom:17,maxzoom:24,paint:{"line-width":this.defaultOptions.routeAnimation.lineWidth,"line-color":this.defaultOptions.routeAnimation.lineColor,"line-opacity":this.defaultOptions.routeAnimation.lineOpacity},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},"proximiio-routing-line-remaining"),this.state.style.addSource("pointAlong",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.addLayer({id:"pointAlong",type:"circle",source:"pointAlong",minzoom:17,maxzoom:24,paint:{"circle-color":this.defaultOptions.routeAnimation.pointColor,"circle-radius":this.defaultOptions.routeAnimation.pointRadius},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},"lineAlong")),this.defaultOptions.routeAnimation.type==="dash"&&(this.state.style.getLayer("proximiio-routing-line-remaining")&&this.state.style.removeLayer("proximiio-routing-line-remaining"),this.state.style.addSource("lineAlong",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.addLayer({type:"line",source:"lineAlong",id:"line-background",paint:{"line-color":this.defaultOptions.routeAnimation.lineColor,"line-width":this.defaultOptions.routeAnimation.lineWidth,"line-opacity":this.defaultOptions.routeAnimation.lineOpacity}}),this.state.style.addLayer({type:"line",source:"lineAlong",id:"line-dashed",paint:{"line-color":this.defaultOptions.routeAnimation.lineColor,"line-width":this.defaultOptions.routeAnimation.lineWidth,"line-dasharray":[0,4,3]}})))},fe.prototype.initRasterTiles=function(){var G,K,re,ie,he,ae;if(this.map){var Te=this.state.style.metadata;this.state.style.addSource("raster-tiles",{type:"raster",tiles:!((G=this.defaultOptions.rasterTilesOptions)===null||G===void 0)&&G.tilesUrl?["https://api.proximi.fi/imageproxy/source=".concat(this.defaultOptions.rasterTilesOptions.tilesUrl)]:["https://api.proximi.fi/imageproxy/source=".concat(Te["proximiio:raster:tileurl"])],tileSize:!((K=this.defaultOptions.rasterTilesOptions)===null||K===void 0)&&K.tileSize?this.defaultOptions.rasterTilesOptions.tileSize:Te["proximiio:raster:tilesize"]?Te["proximiio:raster:tilesize"]:256,attribution:!((re=this.defaultOptions.rasterTilesOptions)===null||re===void 0)&&re.attribution?this.defaultOptions.rasterTilesOptions.attribution:Te["proximiio:raster:attribution"]?Te["proximiio:raster:attribution"]:""}),this.state.style.addLayer({id:"raster-tiles",type:"raster",source:"raster-tiles",minzoom:!((ie=this.defaultOptions.rasterTilesOptions)===null||ie===void 0)&&ie.minZoom?this.defaultOptions.rasterTilesOptions.minZoom:Te["proximiio:raster:minzoom"]?Te["proximiio:raster:minzoom"]:15,maxzoom:!((he=this.defaultOptions.rasterTilesOptions)===null||he===void 0)&&he.maxZoom?this.defaultOptions.rasterTilesOptions.maxZoom:Te["proximiio:raster:maxzoom"]?Te["proximiio:raster:maxzoom"]:22},!((ae=this.defaultOptions.rasterTilesOptions)===null||ae===void 0)&&ae.beforeLayer?this.defaultOptions.rasterTilesOptions.beforeLayer:Te["proximiio:raster:beforelayer"]?Te["proximiio:raster:beforelayer"]:"osm-country_label-en")}},fe.prototype.initPolygons=function(){var G=this;if(this.map){var K=new Q.PolygonTitlesLayer(this.defaultOptions.polygonsOptions);K.setFilterLevel(this.state.floor.level),this.state.style.addLayer(K.json,"proximiio-paths");var re=new Q.PolygonIconsLayer(this.defaultOptions.polygonsOptions);re.setFilterLevel(this.state.floor.level),this.state.style.addLayer(re.json,"proximiio-paths");var ie=new Q.PolygonsLayer(this.defaultOptions.polygonsOptions);ie.setFilterLevel(this.state.floor.level),this.state.style.addLayer(ie.json,"proximiio-paths"),this.state.style.getLayer("proximiio-shop")&&this.defaultOptions.polygonsOptions.removeOriginalPolygonsLayer&&this.state.style.removeLayer("proximiio-shop"),this.map.on("click","proximiio-pois-icons",function(he){G.onShopClick(he)}),this.map.on("mousemove","proximiio-pois-icons",function(he){G.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","proximiio-pois-icons",function(he){G.map.getCanvas().style.cursor=""}),this.map.on("click","pois-icons",function(he){G.onShopClick(he)}),this.map.on("mousemove","pois-icons",function(he){G.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","pois-icons",function(he){G.map.getCanvas().style.cursor=""}),this.map.on("click","shop-custom",function(he){G.onShopClick(he)}),this.map.on("mouseenter","shop-custom",function(){G.onShopMouseEnter()}),this.map.on("mousemove","shop-custom",function(he){G.onShopMouseMove(he)}),this.map.on("mouseleave","shop-custom",function(he){G.onShopMouseLeave(he)})}},fe.prototype.onShopClick=function(G){if((!this.defaultOptions.blockFeatureClickWhileRouting||this.defaultOptions.blockFeatureClickWhileRouting&&!this.routingSource.route)&&G.features&&G.features[0]&&G.features[0].properties)if(G.features[0].properties._dynamic=G.features[0].properties._dynamic?JSON.parse(G.features[0].properties._dynamic):{},this.defaultOptions.initPolygons){var K=this.state.allFeatures.features.find(function(ie){var he;return ie.properties.id===((he=G.features[0].properties._dynamic)===null||he===void 0?void 0:he.poi_id)}),re=this.state.allFeatures.features.find(function(ie){var he,ae;return!((he=G.features[0].properties._dynamic)===null||he===void 0)&&he.id?ie.id===((ae=G.features[0].properties._dynamic)===null||ae===void 0?void 0:ae.id):ie.properties.id===G.features[0].properties.id});K&&this.handlePolygonSelection(K),this.onPolygonClickListener.next(K||re)}else{var re=this.state.allFeatures.features.find(function(he){return he.properties.id===G.features[0].properties.id});this.onPoiClickListener.next(re)}},fe.prototype.handlePolygonSelection=function(G){var K=G&&G.properties._dynamic?G.properties._dynamic.polygon_id:null;this.selectedPolygon&&(this.map.setFeatureState({source:"main",id:this.selectedPolygon.id},{selected:!1}),this.selectedPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.selectedPolygon.properties._dynamic.label_id},{selected:!1})),K&&(this.selectedPolygon=this.state.allFeatures.features.find(function(re){var ie,he;return((ie=re.properties._dynamic)===null||ie===void 0?void 0:ie.id)===K&&((he=re.properties._dynamic)===null||he===void 0?void 0:he.type)==="shop-custom"}),this.selectedPolygon&&(this.map.setFeatureState({source:"main",id:this.selectedPolygon.id},{selected:!0}),this.selectedPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.selectedPolygon.properties._dynamic.label_id},{selected:!0})))},fe.prototype.onShopMouseEnter=function(){this.map.getCanvas().style.cursor="pointer"},fe.prototype.onShopMouseMove=function(G){G.features&&G.features.length>0&&(G.features[0].properties._dynamic=JSON.parse(G.features[0].properties._dynamic?G.features[0].properties._dynamic:{}),this.hoveredPolygon&&(this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!1}),this.hoveredPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties._dynamic.label_id},{hover:!1})),this.hoveredPolygon=G.features[0],this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!0}),this.hoveredPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties._dynamic.label_id},{hover:!0}))},fe.prototype.onShopMouseLeave=function(G){this.map.getCanvas().style.cursor="",this.hoveredPolygon&&(this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!1}),this.hoveredPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties._dynamic.label_id},{hover:!1})),this.hoveredPolygon=null},fe.prototype.initUrlParams=function(){var G=new URLSearchParams(window.location.search),K=G.get(this.defaultOptions.urlParams.startFeauture),re=G.get(this.defaultOptions.urlParams.destinationFeature),ie=G.get(this.defaultOptions.urlParams.defaultPlace),he=ie?this.state.places.find(function(Le){var Xe;return Le.id===ie||((Xe=Le.name)===null||Xe===void 0?void 0:Xe.toLowerCase())===(ie==null?void 0:ie.toLowerCase())}):this.state.place,ae=K?this.state.allFeatures.features.find(function(Le){var Xe;return Le.properties.title&&Le.properties.place_id===he.id&&(Le.id===K||Le.properties.id===K||((Xe=Le.properties.title)===null||Xe===void 0?void 0:Xe.toLowerCase())===(K==null?void 0:K.toLowerCase()))}):this.startPoint,Te=re?this.state.allFeatures.features.find(function(Le){var Xe;return Le.properties.title&&Le.properties.place_id===he.id&&(Le.id===re||Le.properties.id===re||((Xe=Le.properties.title)===null||Xe===void 0?void 0:Xe.toLowerCase())===(re==null?void 0:re.toLowerCase()))}):void 0;ae&&ae.id&&!Te&&(this.centerToFeature(ae.id),this.map&&this.defaultOptions.isKiosk&&this.setKiosk(ae.geometry.coordinates[1],ae.geometry.coordinates[0],ae.properties.level)),!ae&&Te&&this.centerToFeature(Te.id),ae&&Te&&this.onRouteUpdate(ae,Te)},fe.prototype.featureDialog=function(G){var K=this,re,ie=this.map.queryRenderedFeatures(G.point,{layers:["proximiio-pois-icons","proximiio-pois-labels"]}),he=ie.length>0,ae=new Y.modal({footer:!0,stickyFooter:!1,closeMethods:["overlay","button","escape"],closeLabel:"Close",onClose:function(){ae.destroy()}});ae.setContent(he?(0,W.EDIT_FEATURE_DIALOG)(G,ie[0]):(0,W.NEW_FEATURE_DIALOG)(G,(re=this.state.floor)===null||re===void 0?void 0:re.level)),ae.addFooterBtn("Submit","tingle-btn tingle-btn--primary",function(){return r(K,void 0,void 0,function(){var Te,Le,Xe,$e;return n(this,function(at){switch(at.label){case 0:return Te=new FormData(document.querySelector("#modal-form")),$e={id:"".concat(Te.get("id")),title:"".concat(Te.get("title")),level:Te.get("level"),lat:Te.get("lat"),lng:Te.get("lng")},Te.get("icon").size?[4,(0,T.getBase64FromImage)(Te.get("icon"))]:[3,2];case 1:return Xe=at.sent(),[3,3];case 2:Xe=void 0,at.label=3;case 3:return Le=($e.icon=Xe,$e),Le.title&&Le.level&&Le.lat&&Le.lng?he?[4,this.onUpdateFeature(Le.id,Le.title,+Le.level,+Le.lat,+Le.lng,Le.icon)]:[3,5]:[3,8];case 4:return at.sent(),[3,7];case 5:return[4,this.onAddNewFeature(Le.title,+Le.level,+Le.lat,+Le.lng,Le.icon,Le.id)];case 6:at.sent(),at.label=7;case 7:return ae.close(),[3,9];case 8:alert("Please fill all the required fields!"),at.label=9;case 9:return[2]}})})}),he&&ae.addFooterBtn("Delete","tingle-btn tingle-btn--danger",function(){var Te,Le;K.onDeleteFeature((Le=(Te=ie[0])===null||Te===void 0?void 0:Te.properties)===null||Le===void 0?void 0:Le.id),ae.close()}),ae.addFooterBtn("Cancel","tingle-btn tingle-btn--default tingle-btn--pull-right",function(){ae.close()}),ae.open()},fe.prototype.onAddNewFeature=function(G,K,re,ie,he,ae,Te,Le,Xe,$e){return $e===void 0&&($e=!0),r(this,void 0,void 0,function(){var at,_t,Lt;return n(this,function(pt){switch(pt.label){case 0:if(at=ae||(0,T.uuidv4)(),this.state.allFeatures.features.findIndex(function(Ot){return Ot.id===at||Ot.properties.id===at})>0)throw new Error("Create feature failed: Feature with id '".concat(at,"' already exists!"));return _t=new L.default({type:"Feature",id:at,geometry:new L.Geometry({type:"Point",coordinates:[ie,re]}),properties:t({type:"poi",usecase:"poi",id:at,minzoom:15,visibility:"visible",amenity:he?ae:"default",title:G,level:K,images:[he],place_id:Te,floor_id:Le},Xe)}),he&&he.length>0?[4,(0,T.getImageFromBase64)(he)]:[3,2];case 1:Lt=pt.sent(),this.map.addImage(at,Lt),pt.label=2;case 2:return $e?[3,4]:(this.state.features.features.push(_t),[4,(0,d.addFeatures)({type:"FeatureCollection",features:[_t.json]})]);case 3:return pt.sent(),[3,5];case 4:this.state.dynamicFeatures.features.push(_t),pt.label=5;case 5:return this.geojsonSource.create(_t),this.onFeaturesChange(),this.onFeatureAddListener.next(_t),[2,_t]}})})},fe.prototype.onUpdateFeature=function(G,K,re,ie,he,ae,Te,Le,Xe,$e){return $e===void 0&&($e=!0),r(this,void 0,void 0,function(){var at,_t,Lt,pt,Ot;return n(this,function(vt){switch(vt.label){case 0:if(at=this.state.allFeatures.features.find(function(Ze){return Ze.id===G||Ze.properties.id===G}),!at)throw new Error("Update feature failed: Feature with id '".concat(G,"' has not been found!"));return _t=new L.default(at),_t.geometry.coordinates=[he||_t.geometry.coordinates[0],ie||_t.geometry.coordinates[1]],_t.properties=t(t(t({},_t.properties),{title:K||_t.properties.title,level:re||_t.properties.level,amenity:ae?G:_t.properties.amenity,images:ae?[ae]:_t.properties.images,place_id:Te||_t.properties.place_id,floor_id:Le||_t.properties.floor_id}),Xe),ae&&ae.length>0?[4,(0,T.getImageFromBase64)(ae)]:[3,2];case 1:Lt=vt.sent(),this.map.addImage(G,Lt),vt.label=2;case 2:return $e?[3,4]:(pt=this.state.features.features.findIndex(function(Ze){return Ze.id===_t.id||Ze.properties.id===_t.id}),this.state.features.features[pt]=_t,[4,(0,d.addFeatures)({type:"FeatureCollection",features:[_t.json]})]);case 3:return vt.sent(),[3,5];case 4:Ot=this.state.dynamicFeatures.features.findIndex(function(Ze){return Ze.id===_t.id||Ze.properties.id===_t.id}),this.state.dynamicFeatures.features[Ot]=_t,vt.label=5;case 5:return this.geojsonSource.update(_t),this.onFeaturesChange(),this.onFeatureUpdateListener.next(_t),[2,_t]}})})},fe.prototype.onDeleteFeature=function(G,K){return K===void 0&&(K=!0),r(this,void 0,void 0,function(){var re,ie,he;return n(this,function(ae){switch(ae.label){case 0:if(re=this.state.allFeatures.features.find(function(Te){return Te.id===G||Te.properties.id===G}),!re)throw new Error("Deleting feature failed: Feature with id '".concat(G,"' has not been found!"));return K?[3,2]:(ie=this.state.features.features.findIndex(function(Te){return Te.id===G||Te.properties.id===G}),this.state.features.features.splice(ie,1),[4,(0,d.deleteFeatures)({type:"FeatureCollection",features:[re]})]);case 1:return ae.sent(),[3,3];case 2:he=this.state.dynamicFeatures.features.findIndex(function(Te){return Te.id===G||Te.properties.id===G}),this.state.dynamicFeatures.features.splice(he,1),ae.label=3;case 3:return this.geojsonSource.delete(G),this.onFeaturesChange(),this.onFeatureDeleteListener.next(re),[2]}})})},fe.prototype.onFeaturesChange=function(){this.state.allFeatures.features=i(i([],this.state.features.features,!0),this.state.dynamicFeatures.features,!0),this.onSourceChange(),this.routingSource.routing.setData(this.state.allFeatures),this.updateMapSource(this.routingSource)},fe.prototype.onSetFeatureFilter=function(G,K){for(var re=this.state.allFeatures.features.filter(function(Xe){return Xe.properties.id===G||Xe.id===G||Xe.properties.title===G}),ie=function(Xe){K&&he.hiddenFeatures.findIndex(function($e){return $e===Xe.properties.id})===-1?he.hiddenFeatures.push(Xe.properties.id):!K&&he.filteredFeatures.findIndex(function($e){return $e===Xe.properties.id})===-1&&he.filteredFeatures.push(Xe.properties.id)},he=this,ae=0,Te=re;ae<Te.length;ae++){var Le=Te[ae];ie(Le)}this.filterOutFeatures()},fe.prototype.onRemoveFeatureFilter=function(G,K){for(var re=this.state.allFeatures.features.filter(function(Xe){return Xe.properties.id===G||Xe.id===G||Xe.properties.title===G}),ie=function(Xe){K&&he.hiddenFeatures.findIndex(function($e){return $e===Xe.properties.id})!==-1?he.hiddenFeatures.splice(he.hiddenFeatures.findIndex(function($e){return $e===Xe.properties.id}),1):!K&&he.filteredFeatures.findIndex(function($e){return $e===Xe.properties.id})!==-1&&he.filteredFeatures.splice(he.filteredFeatures.findIndex(function($e){return $e===Xe.properties.id}),1)},he=this,ae=0,Te=re;ae<Te.length;ae++){var Le=Te[ae];ie(Le)}this.filteredFeatures=this.filteredFeatures.length>0?this.filteredFeatures:[],this.hiddenFeatures=this.hiddenFeatures.length>0?this.hiddenFeatures:[],this.filterOutFeatures()},fe.prototype.onHidePois=function(){this.hiddenFeatures=this.state.allFeatures.features.filter(function(G){return G.properties.type==="poi"||G.properties.usecase==="poi"}).map(function(G){return G.properties.id}),this.filterOutFeatures()},fe.prototype.onResetFeatureFilters=function(){this.filteredFeatures=[],this.hiddenFeatures=[],this.filterOutFeatures()},fe.prototype.onSetAmenityFilter=function(G,K,re){if(K&&re)throw new Error("It's not possible to use both category and inverted options in setAmenityFilter function!");if(K){this.amenityCategories[K].active=!0,this.amenityCategories[K].activeId=G;var ie=[],he=function(Le){if(ae.amenityCategories.hasOwnProperty(Le)){var Xe=ae.amenityCategories[Le];Xe.active&&(ie=Array.isArray(G)?ie.concat(Xe.amenities.filter(function($e){return!Xe.activeId.includes($e)})):ie.concat(Xe.amenities.filter(function($e){return $e!==Xe.activeId})))}},ae=this;for(var Te in this.amenityCategories)he(Te);this.amenityFilters=this.amenityIds.filter(function(Le){return!ie.includes(Le)})}else re&&this.hiddenAmenities.findIndex(function(Le){return Le===G})===-1?(Array.isArray(G)?this.hiddenAmenities.concat(G):this.hiddenAmenities.push(G),this.filteredAmenities=this.filteredAmenities.filter(function(Le){return Le!==G})):!re&&this.amenityFilters.findIndex(function(Le){return Le===G})===-1&&(Array.isArray(G)?this.amenityFilters.concat(G):this.amenityFilters.push(G));this.filteredAmenities=this.amenityFilters,this.filterOutFeatures(),re||this.setActivePolygons(G)},fe.prototype.onRemoveAmenityFilter=function(G,K,re){if(K&&re)throw new Error("It's not possible to use both category and inverted options in removeAmenityFilter function!");if(K&&this.amenityCategories[K].active&&JSON.stringify(this.amenityCategories[K].activeId)===JSON.stringify(G)){var ie=Array.isArray(G)?this.amenityCategories[K].amenities.filter(function(he){return!G.includes(he)}):this.amenityCategories[K].amenities.filter(function(he){return he!==G});this.amenityFilters=this.amenityFilters.concat(ie),this.amenityCategories[K].active=!1}else K||(re?(this.hiddenAmenities=this.hiddenAmenities.filter(function(he){return he!==G}),this.filteredAmenities.findIndex(function(he){return he===G})===-1&&(Array.isArray(G)?this.filteredAmenities.concat(G):this.filteredAmenities.push(G))):this.amenityFilters=this.amenityFilters.filter(function(he){return he!==G}));this.filteredAmenities=this.amenityFilters.length>0?this.amenityFilters:this.amenityIds,this.hiddenAmenities=this.hiddenAmenities.length>0?this.hiddenAmenities:[],this.filterOutFeatures(),this.setActivePolygons(null)},fe.prototype.onResetAmenityFilters=function(){this.amenityFilters=[],this.hiddenAmenities=[];for(var G in this.amenityCategories)this.amenityCategories.hasOwnProperty(G)&&(this.amenityCategories[G].active=!1);this.filteredAmenities=this.amenityIds,this.filterOutFeatures(),this.setActivePolygons(null)},fe.prototype.filterOutFeatures=function(){var G=this,K=["proximiio-pois-icons","proximiio-pois-labels","pois-icons","pois-labels"];this.defaultOptions.initPolygons&&K.push("poi-custom-icons","shop-labels"),K.forEach(function(re){if(G.map.getLayer(re)){var ie=G.map.getLayer(re),he=i([],ie.filter,!0),ae=he.findIndex(function(Le){return Le[1][1]&&Le[1][1][1]==="amenity"}),Te=he.findIndex(function(Le){return Le[1][1]==="id"});G.filteredAmenities.length>0&&(ae!==-1?he[ae]=["any",["in",["get","amenity"],["literal",G.filteredAmenities]],["in",["get","amenity",["get","_dynamic"]],["literal",G.filteredAmenities]]]:he.push(["any",["in",["get","amenity"],["literal",G.filteredAmenities]],["in",["get","amenity",["get","_dynamic"]],["literal",G.filteredAmenities]]])),G.filteredFeatures.length>0?Te!==-1?he[Te]=["match",["get","id"],G.filteredFeatures,!0,!1]:he.push(["match",["get","id"],G.filteredFeatures,!0,!1]):Te!==-1&&he.splice(Te,1),G.hiddenFeatures.length>0?Te!==-1?he[Te]=["match",["get","id"],G.hiddenFeatures,!1,!0]:he.push(["match",["get","id"],G.hiddenFeatures,!1,!0]):Te!==-1&&he.splice(Te,1),G.state.style.getLayer(re).filter=he,G.map.setFilter(re,he)}}),this.state.style.notify("filter-change")},fe.prototype.setActivePolygons=function(G){var K=this;if(this.defaultOptions.initPolygons){var re=this.activePolygonsAmenity?this.state.allFeatures.features.filter(function(pt){var Ot;return(Array.isArray(K.activePolygonsAmenity)?K.activePolygonsAmenity.includes(pt.properties.amenity):pt.properties.amenity===K.activePolygonsAmenity)&&((Ot=pt.properties._dynamic)===null||Ot===void 0?void 0:Ot.polygon_id)&&pt.geometry.type==="Point"}):[],ie=G?this.state.allFeatures.features.filter(function(pt){var Ot;return(Array.isArray(G)?G.includes(pt.properties.amenity):pt.properties.amenity===G)&&((Ot=pt.properties._dynamic)===null||Ot===void 0?void 0:Ot.polygon_id)&&pt.geometry.type==="Point"}):[];if(re.length>0)for(var he=function(pt){var Ot=ae.state.allFeatures.features.find(function(vt){var Ze,Zt,rr;return((Ze=vt.properties._dynamic)===null||Ze===void 0?void 0:Ze.id)===((Zt=pt.properties._dynamic)===null||Zt===void 0?void 0:Zt.polygon_id)&&((rr=vt.properties._dynamic)===null||rr===void 0?void 0:rr.type)==="shop-custom"});Ot&&ae.map.setFeatureState({source:"main",id:Ot.id},{active:!1})},ae=this,Te=0,Le=re;Te<Le.length;Te++){var Xe=Le[Te];he(Xe)}if(ie.length>0)for(var $e=function(pt){var Ot=at.state.allFeatures.features.find(function(vt){var Ze,Zt,rr;return((Ze=vt.properties._dynamic)===null||Ze===void 0?void 0:Ze.id)===((Zt=pt.properties._dynamic)===null||Zt===void 0?void 0:Zt.polygon_id)&&((rr=vt.properties._dynamic)===null||rr===void 0?void 0:rr.type)==="shop-custom"});Ot&&at.map.setFeatureState({source:"main",id:Ot.id},{active:!0})},at=this,_t=0,Lt=ie;_t<Lt.length;_t++){var Xe=Lt[_t];$e(Xe)}}this.activePolygonsAmenity=G},fe.prototype.handlePoiVisibility=function(){var G=this,K=["proximiio-pois-icons","proximiio-pois-labels","pois-icons","pois-labels"];this.defaultOptions.initPolygons&&K.push("poi-custom-icons","shop-labels"),K.forEach(function(re){G.map.getLayer(re)&&setTimeout(function(){var ie=G.map.getLayer(re);if(ie){var he=i([],ie.filter,!0),ae=he.findIndex(function(Te){return Te[1][1]==="visibility"});ae!==-1?he[ae][0]==="!="?he[ae]=["match",["get","visibility"],["visible","hidden","undefined"],!0,!1]:he[ae]=["!=",["get","visibility"],"hidden"]:he.push(["!=",["get","visibility"],"hidden"]),G.state.style.getLayer(re).filter=he,G.map.setFilter(re,he)}})}),this.state.style.notify("filter-change")},fe.prototype.onToggleHiddenPois=function(){this.handlePoiVisibility()},fe.prototype.onSetPerson=function(G,K,re,ie){var he=new me.default({lat:G,lng:K,level:re,id:ie});this.state=t(t({},this.state),{persons:[he]}),this.initPersonsMap()},fe.prototype.onAddPerson=function(G,K,re,ie){var he=new me.default({lat:G,lng:K,level:re,id:ie});this.state.persons=i(i([],this.state.persons,!0),[he],!1),this.initPersonsMap()},fe.prototype.onUpdatePerson=function(G,K,re,ie){G.updatePosition({lat:K,lng:re,level:ie}),this.initPersonsMap()},fe.prototype.initPersonsMap=function(){var G=this.map;G.getLayer("persons-layer")||this.state.style.addLayer({id:"persons-layer",type:"symbol",source:"persons-source",layout:{"icon-image":"person","icon-size":["interpolate",["exponential",.3],["zoom"],17,.1,22,.3]},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]}),G.getSource("persons-source")||this.state.style.addSource("persons-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}});var K=this.state.persons.map(function(re){return Z.point([re.lng,re.lat],{level:re.level})});this.state.style.sources["persons-source"].data={type:"FeatureCollection",features:K},this.onPersonUpdateListener.next(this.state.persons)},fe.prototype.prepareStyle=function(G){G.setSource("main",this.geojsonSource),G.setSource("synthetic",this.syntheticSource),G.setSource("route",this.routingSource),G.setSource("clusters",this.clusterSource),G.setLevel(0)},fe.prototype.onRouteChange=function(G){return r(this,void 0,void 0,function(){var K,re,ie,he,ae=this;return n(this,function(Te){switch(Te.label){case 0:return G==="loading-start"?(this.state=t(t({},this.state),{loadingRoute:!0}),[2]):G!=="loading-finished"?[3,3]:this.routingSource.route?(this.currentStep=0,K=this.routingSource.lines[0],re={steps:this.routingSource.steps,destination:this.endPoint,start:this.startPoint},this.state=t(t({},this.state),{loadingRoute:!1,textNavigation:re}),this.defaultOptions.showLevelDirectionIcon&&this.addDirectionFeatures(),(this.defaultOptions.animatedRoute||this.defaultOptions.routeAnimation.enabled)&&(this.defaultOptions.animatedRoute,this.animateRoute()),this.defaultOptions.forceFloorLevel!==null&&this.defaultOptions.forceFloorLevel!==void 0&&(this.routingSource.data.features=this.routingSource.data.features.map(function(Le){return Le.properties.level!==ae.defaultOptions.forceFloorLevel&&(Le.properties.level=ae.defaultOptions.forceFloorLevel),Le})),this.centerOnRoute(K),this.onRouteFoundListener.next({route:this.routingSource.route,TBTNav:this.defaultOptions.enableTBTNavigation?re:null,details:this.defaultOptions.routeWithDetails?this.routingSource.details:null,start:this.startPoint,end:this.endPoint}),this.defaultOptions.sendAnalytics?(ie=new be.default({organization_id:this.state.user.organization.id,organization_name:this.state.user.organization.name,startLngLat:this.routingSource.start.geometry.coordinates,startLevel:this.routingSource.start.properties.level,startSegmentId:this.routingSource.start.id,startSegmentName:this.defaultOptions.isKiosk?"kioskPoint":this.routingSource.start.properties.title,destinationFeatureId:this.routingSource.finish.id,destinationName:this.routingSource.finish.properties.title,destinationLngLat:this.routingSource.finish.geometry.coordinates,destinationLevel:this.routingSource.finish.properties.level,foundPath:this.routingSource.lines.length>0,optionAvoidBarrier:this.routingSource.routing.wayfinding.configuration.avoidBarriers,optionAvoidElevators:this.routingSource.routing.wayfinding.configuration.avoidElevators,optionAvoidEscalators:this.routingSource.routing.wayfinding.configuration.avoidEscalators,optionAvoidNarrowPaths:this.routingSource.routing.wayfinding.configuration.avoidNarrowPaths,optionAvoidRamps:this.routingSource.routing.wayfinding.configuration.avoidRamps,optionAvoidStaircases:this.routingSource.routing.wayfinding.configuration.avoidStaircases,optionAvoidTicketGates:this.routingSource.routing.wayfinding.configuration.avoidTicketGates,route:this.routingSource.points.map(function(Le){return[Le.geometry.coordinates[0],Le.geometry.coordinates[1],Le.properties.level]}),rerouted:!1}),[4,ie.save()]):[3,2]):[3,2];case 1:Te.sent(),Te.label=2;case 2:return[2];case 3:return G==="route-undefined"?(this.state=t(t({},this.state),{loadingRoute:!1}),this.onRouteFailedListener.next("route not found"),[2]):(he=this.state.style,he.setSource("route",this.routingSource),this.state=t(t({},this.state),{style:he}),this.updateMapSource(this.routingSource),[2])}})})},fe.prototype.onSourceChange=function(){this.state=t(t({},this.state),{style:this.state.style}),this.updateMapSource(this.geojsonSource),this.updateCluster()},fe.prototype.onSyntheticChange=function(){this.state.style.setSource("synthetic",this.syntheticSource),this.updateMapSource(this.syntheticSource)},fe.prototype.updateMapSource=function(G){var K=this.map;if(K&&K.getSource(G.id)){var re=K.getSource(G.id);re&&re.setData(G.data)}},fe.prototype.onStyleSelect=function(G){var K=this.map;K&&(this.prepareStyle(G),K.setStyle(G.json)),this.state=t(t({},this.state),{style:G})},fe.prototype.onStyleChange=function(G,K){var re=this.map;if(re){if(G==="overlay-toggled"){var ie=this.state.style.overlay?"visible":"none";re.setLayoutProperty("main-polygon-fill","visibility",ie),re.setLayoutProperty("main-polygon-outline","visibility",ie)}if(G==="segments-toggled"){var he=this.state.style.segments?"visible":"none";re.setLayoutProperty("main-segment-fill","visibility",he),re.setLayoutProperty("main-segment-outline","visibility",he)}if(G==="routable-toggled"){var ae=this.state.style.segments?"visible":"none";re.setLayoutProperty("main-routable-fill","visibility",ae),re.setLayoutProperty("main-routable-outline","visibility",ae)}if(G==="cluster-toggled"){var Te=this.state.style.cluster?"visible":"none";re.setLayoutProperty("clusters-circle","visibility",Te)}}if(G==="layer-update"&&K){var Le=K.layer,Xe=K.changes,$e=Xe.filter(function(pt){return pt.kind==="E"&&pt.path[0]==="layout"}),at=Xe.filter(function(pt){return pt.kind==="E"&&pt.path[0]==="paint"}),_t=this.map;_t&&($e.forEach(function(pt){pt.kind==="E"&&_t.setLayoutProperty(Le.id,pt.path[1],pt.rhs)}),at.forEach(function(pt){pt.kind==="E"&&_t.setPaintProperty(Le.id,pt.path[1],pt.rhs)}))}if(G==="filter-change"){var Lt=this.map;this.state.style.getLayers("main").forEach(function(pt){Lt.getLayer(pt.id)&&Lt.removeLayer(pt.id),Lt.addLayer(pt)})}this.map.setStyle(this.state.style),this.state=t(t({},this.state),{style:this.state.style})},fe.prototype.onToggleRasterFloorplans=function(){this.imageSourceManager.enabled=!this.imageSourceManager.enabled;var G=this.map;G&&this.imageSourceManager.setLevel(G,this.state.floor.level,this.state)},fe.prototype.updateCluster=function(){var G=this,K=this.map;if(K){var re={type:"FeatureCollection",features:this.geojsonSource.data.features.filter(function(he){return he.isPoint&&he.hasLevel(G.state.floor.level)}).map(function(he){return he.json})},ie=K.getSource("clusters");ie&&ie.setData(re)}},fe.prototype.onPlaceSelect=function(G,K,re){return r(this,void 0,void 0,function(){var ie,he,ae,Te;return n(this,function(Le){switch(Le.label){case 0:return this.state=t(t({},this.state),{place:G}),[4,(0,N.getPlaceFloors)(G.id)];case 1:return ie=Le.sent(),he={floors:ie.sort(function(Xe,$e){return Xe.level-$e.level})},ie.length>0&&(ae=re?ie.find(function(Xe){return Xe.level===re}):ie.find(function(Xe){return Xe.level===0}),ae?he.floor=ae:he.floor=ie[0]),this.state=t(t({},this.state),he),Te=this.map,Te&&K&&Te.flyTo({center:[G.location.lng,G.location.lat]}),this.onPlaceSelectListener.next(G),he.floor&&this.onFloorSelect(he.floor),[2]}})})},fe.prototype.onFloorSelect=function(G){var K=this,re,ie=this.map,he=this.routingSource.levelPoints&&this.routingSource.levelPoints[G.level]?this.routingSource.levelPoints[G.level]:null;if(ie){if(this.state.style.setLevel(G.level),ie.setStyle(this.state.style),setTimeout(function(){i(i([],K.state.style.getLayers("main"),!0),K.state.style.getLayers("route"),!0).forEach(function($e){ie.getLayer($e.id)&&ie.setFilter($e.id,$e.filter)}),K.imageSourceManager.setLevel(ie,G.level,K.state)}),he){var ae=this.routingSource.route["path-part-".concat(this.currentStep)]&&((re=this.routingSource.route["path-part-".concat(this.currentStep)].properties)===null||re===void 0?void 0:re.level)===G.level?this.routingSource.route["path-part-".concat(this.currentStep)]:(0,ge.lineString)(this.routingSource.levelPoints[G.level].map(function($e){return $e.geometry.coordinates})),Te=Z.length(ae,{units:"kilometers"})*1e3,Le=Z.bbox(ae);Te>=this.defaultOptions.minFitBoundsDistance?ie.fitBounds(Le,{padding:this.defaultOptions.fitBoundsPadding,bearing:this.map.getBearing(),pitch:this.map.getPitch()}):this.map.flyTo({center:Z.center(ae).geometry.coordinates})}if(this.defaultOptions.isKiosk&&ie.getLayer("my-location-layer")){var Xe=["all",["==",["to-number",["get","level"]],G.level]];ie.setFilter("my-location-layer",Xe),this.state.style.getLayer("my-location-layer").filter=Xe}if(this.defaultOptions.useGpsLocation&&this.startPoint&&(this.startPoint.properties=t(t({},this.startPoint.properties),{level:G.level})),ie.getLayer("persons-layer")){var Xe=["all",["==",["to-number",["get","level"]],G.level]];ie.setFilter("persons-layer",Xe),this.state.style.getLayer("persons-layer").filter=Xe}if(this.defaultOptions.showLevelDirectionIcon&&ie.getLayer("direction-halo-layer")){var Xe=["all",["==",["to-number",["get","level"]],G.level]];ie.setFilter("direction-halo-layer",Xe),this.state.style.getLayer("direction-halo-layer").filter=Xe,ie.setFilter("direction-popup-layer",Xe),this.state.style.getLayer("direction-popup-layer").filter=Xe}if(ie.getLayer("highlight-icon-layer")){var Xe=["all",["==",["to-number",["get","level"]],G.level]];ie.setFilter("highlight-icon-layer",Xe),this.state.style.getLayer("highlight-icon-layer").filter=Xe}}this.state=t(t({},this.state),{floor:G,style:this.state.style}),(this.defaultOptions.animatedRoute||this.defaultOptions.routeAnimation.enabled&&he)&&(this.defaultOptions.animatedRoute,this.animateRoute()),this.updateCluster(),this.onFloorSelectListener.next(G)},fe.prototype.onRouteUpdate=function(G,K){this.startPoint=G,this.endPoint=K;try{K&&this.defaultOptions.initPolygons&&this.handlePolygonSelection(K),K&&this.defaultOptions.animatedRoute&&(this.defaultOptions.animatedRoute,clearInterval(this.animationInterval)),this.routingSource.update(G,K)}catch{}this.state=t(t({},this.state),{style:this.state.style})},fe.prototype.onRouteCancel=function(){this.state=t(t({},this.state),{textNavigation:null}),this.defaultOptions.initPolygons&&this.handlePolygonSelection(),this.defaultOptions.showLevelDirectionIcon&&(this.state.style.sources["direction-icon-source"].data={type:"FeatureCollection",features:[]}),(this.defaultOptions.animatedRoute||this.defaultOptions.routeAnimation.enabled)&&(this.defaultOptions.animatedRoute,this.defaultOptions.routeAnimation.type==="point"&&(clearInterval(this.animationInterval),this.map.getSource("pointAlong").setData({type:"FeatureCollection",features:[]}),this.map.getSource("lineAlong").setData({type:"FeatureCollection",features:[]}))),this.map.setStyle(this.state.style),this.routingSource.cancel(),this.onRouteCancelListener.next("route cancelled")},fe.prototype.centerOnPoi=function(G){if(this.state.floor.level!==parseInt(G.properties.level,0)){var K=this.state.floors.find(function(re){return re.level===G.properties.level});K&&this.onFloorSelect(K)}this.map&&this.map.flyTo({center:G.geometry.coordinates})},fe.prototype.centerOnRoute=function(G){var K;if(G&&G.properties){if(this.state.floor.level!==+G.properties.level){var re=this.state.floors.find(function(Te){return Te.level===+G.properties.level});re&&this.onFloorSelect(re)}if(this.map){var ie=this.routingSource.route["path-part-".concat(this.currentStep)]&&((K=this.routingSource.route["path-part-".concat(this.currentStep)].properties)===null||K===void 0?void 0:K.level)===this.state.floor.level?this.routingSource.route["path-part-".concat(this.currentStep)]:(0,ge.lineString)(this.routingSource.levelPoints[this.state.floor.level].map(function(Te){return Te.geometry.coordinates})),he=Z.length(ie,{units:"kilometers"})*1e3,ae=Z.bbox(ie);he>=this.defaultOptions.minFitBoundsDistance?this.map.fitBounds(ae,{padding:this.defaultOptions.fitBoundsPadding,bearing:this.map.getBearing(),pitch:this.map.getPitch()}):this.map.flyTo({center:Z.center(ie).geometry.coordinates})}}},fe.prototype.centerOnCoords=function(G,K,re){this.map&&this.map.flyTo({center:[K,G],zoom:re||18})},fe.prototype.updateImages=function(){var G=this;this.state.amenities.forEach(function(K){G.amenityIds.push(K.id),K.icon&&G.map.loadImage(K.icon,function(re,ie){if(re)throw re;G.map.addImage(K.id,ie)})})},fe.prototype.getUpcomingFloorNumber=function(G){var K=this;if(this.routingSource.lines&&this.routingSource.route){var re=this.routingSource.lines.findIndex(function(Te){return+Te.properties.level===K.state.floor.level}),ie=this.routingSource.lines[re],he=this.routingSource.lines.findIndex(function(Te){return G==="up"?+Te.properties.level>ie.properties.level:+Te.properties.level<ie.properties.level}),ae=this.routingSource.lines[he];return ae&&(G==="up"&&+ae.properties.level>this.state.floor.level||G==="down"&&+ae.properties.level<this.state.floor.level)?+ae.properties.level:this.state.floor.level}},fe.prototype.getClosestFeature=function(G,K){var re=this,ie=this.state.allFeatures.features.filter(function(Te){return Te.properties.amenity===G&&Te.geometry.type==="Point"&&Te.properties.level===K.properties.level}),he=this.state.allFeatures.features.filter(function(Te){return Te.properties.amenity===G&&Te.geometry.type==="Point"});this.defaultOptions.defaultPlaceId&&(ie=ie.filter(function(Te){return Te.properties.place_id===re.defaultOptions.defaultPlaceId}),he=he.filter(function(Te){return Te.properties.place_id===re.defaultOptions.defaultPlaceId}));var ae=Z.point(K.geometry.coordinates);return ie.length>0||he.length>0?Z.nearestPoint(ae,Z.featureCollection(ie.length>0?ie:he)):!1},fe.prototype.getFloorName=function(G){return G.metadata&&G.metadata["title_"+this.defaultOptions.language]?G.metadata["title_"+this.defaultOptions.language]:G.name},fe.prototype.getMapboxInstance=function(){return this.map},fe.prototype.getMapState=function(){return this.state},fe.prototype.getMapReadyListener=function(){return this.onMapReadyListener.asObservable()},fe.prototype.setLanguage=function(G){this.geojsonSource.language=G,this.geojsonSource.fetch(this.state.features),this.defaultOptions.language=G,this.onFeaturesChange()},fe.prototype.setPlace=function(G,K,re){return r(this,void 0,void 0,function(){var ie,he;return n(this,function(ae){switch(ae.label){case 0:return[4,(0,B.getPlaceById)(G)];case 1:return ie=ae.sent(),he=typeof K<"u"?K:!0,[4,this.onPlaceSelect(ie,he,re)];case 2:return ae.sent(),[2,ie]}})})},fe.prototype.getPlaceSelectListener=function(){return this.onPlaceSelectListener.asObservable()},fe.prototype.setFloorById=function(G){var K=this.state.floors.filter(function(re){return re.id===G})?this.state.floors.filter(function(re){return re.id===G})[0]:this.state.floor;return K&&this.onFloorSelect(new g.FloorModel(K)),K},fe.prototype.setFloorByLevel=function(G){var K=this.state.floors.filter(function(re){return re.level===G})?this.state.floors.filter(function(re){return re.level===G})[0]:this.state.floor;return K&&this.onFloorSelect(new g.FloorModel(K)),K},fe.prototype.setFloorByWay=function(G){var K,re=G==="up"?this.state.floor.level+1:this.state.floor.level-1;return this.routingSource.route&&(re=this.getUpcomingFloorNumber(G)),K=this.state.floors.filter(function(ie){return ie.level===re})?this.state.floors.filter(function(ie){return ie.level===re})[0]:this.state.floor,K&&this.onFloorSelect(new g.FloorModel(K)),K},fe.prototype.getFloorSelectListener=function(){return this.onFloorSelectListener.asObservable()},fe.prototype.findRouteByIds=function(G,K,re,ie){var he=K?this.state.allFeatures.features.find(function(Te){return Te.id===K||Te.properties.id===K}):this.startPoint,ae=this.state.allFeatures.features.find(function(Te){return Te.id===G||Te.properties.id===G});this.routingSource.toggleAccessible(re),ie&&this.routingSource.setConfig(ie),this.onRouteUpdate(he,ae)},fe.prototype.findRouteByTitle=function(G,K,re,ie){var he=K?this.state.allFeatures.features.find(function(Te){return Te.properties.title===K}):this.startPoint,ae=this.state.allFeatures.features.find(function(Te){return Te.properties.title===G});this.routingSource.toggleAccessible(re),ie&&this.routingSource.setConfig(ie),this.onRouteUpdate(he,ae)},fe.prototype.findRouteByCoords=function(G,K,re,ie,he,ae,Te,Le){var Xe=ie&&he&&ae?Z.feature({type:"Point",coordinates:[he,ie]},{level:ae}):this.startPoint,$e=Z.feature({type:"Point",coordinates:[K,G]},{level:re});this.routingSource.toggleAccessible(Te),Le&&this.routingSource.setConfig(Le),this.onRouteUpdate(Xe,$e)},fe.prototype.findRouteToNearestFeature=function(G,K,re,ie){var he=K?this.state.allFeatures.features.find(function(Te){return Te.id===K||Te.properties.id===K}):this.startPoint,ae=this.getClosestFeature(G,he);if(ae)this.routingSource.toggleAccessible(re),ie&&this.routingSource.setConfig(ie),this.onRouteUpdate(he,ae);else throw new Error("Feature not found")},fe.prototype.cancelRoute=function(){this.onRouteCancel()},fe.prototype.setNavStep=function(G){var K=0;if((0,ge.isNumber)(G)&&(K=+G),G==="next"&&(K=this.currentStep+1),G==="next"&&Object.keys(this.routingSource.route).length-1===this.currentStep&&(K=0),G==="previous"&&this.currentStep>0&&(K=this.currentStep-1),K!==this.currentStep&&this.routingSource&&this.routingSource.route&&this.routingSource.route["path-part-".concat(K)])return this.currentStep=K,this.centerOnRoute(this.routingSource.route["path-part-".concat(K)]),this.onStepSetListener.next(this.currentStep),G},fe.prototype.getNavStepSetListener=function(){return this.onStepSetListener.asObservable()},fe.prototype.getTBTNav=function(){return this.state.textNavigation},fe.prototype.getRouteFoundListener=function(){return this.onRouteFoundListener.asObservable()},fe.prototype.getRouteFailedListener=function(){return this.onRouteFailedListener.asObservable()},fe.prototype.getRouteCancelListener=function(){return this.onRouteCancelListener.asObservable()},fe.prototype.centerToRoute=function(){if(this.routingSource&&this.routingSource.route&&this.routingSource.route["path-part-0"]){var G=this.routingSource.route["path-part-0"];return this.centerOnRoute(G),G}else throw new Error("Route not found")},fe.prototype.centerToFeature=function(G){var K=this.state.allFeatures.features.find(function(re){return re.id===G||re.properties.id===G});if(K)return this.centerOnPoi(K),K;throw new Error("Feature not found")},fe.prototype.centerToCoordinates=function(G,K,re){this.centerOnCoords(G,K,re)},fe.prototype.addCustomFeature=function(G,K,re,ie,he,ae,Te,Le,Xe,$e){return r(this,void 0,void 0,function(){return n(this,function(at){switch(at.label){case 0:return[4,this.onAddNewFeature(G,+K,+re,+ie,he,ae,Te,Le,Xe,$e)];case 1:return[2,at.sent()]}})})},fe.prototype.updateFeature=function(G,K,re,ie,he,ae,Te,Le,Xe,$e){return r(this,void 0,void 0,function(){return n(this,function(at){switch(at.label){case 0:return[4,this.onUpdateFeature(G,K,re,ie,he,ae,Te,Le,Xe,$e)];case 1:return[2,at.sent()]}})})},fe.prototype.deleteFeature=function(G,K){return this.onDeleteFeature(G,K)},fe.prototype.getCustomFeaturesList=function(){return this.state.dynamicFeatures},fe.prototype.getFeatureAddListener=function(){return this.onFeatureAddListener.asObservable()},fe.prototype.getFeatureUpdateListener=function(){return this.onFeatureUpdateListener.asObservable()},fe.prototype.getFeatureDeleteListener=function(){return this.onFeatureDeleteListener.asObservable()},fe.prototype.setKiosk=function(G,K,re){if(this.defaultOptions.isKiosk)this.onSetKiosk(G,K,re);else throw new Error("Map is not initiated as kiosk")},fe.prototype.setBoundsPadding=function(G){this.defaultOptions.fitBoundsPadding=G},fe.prototype.setFiltering=function(G){G?this.defaultOptions.defaultFilter=G:delete this.defaultOptions.defaultFilter,this.onRefetch()},fe.prototype.setFeatureFilter=function(G,K){this.onSetFeatureFilter(G,K)},fe.prototype.removeFeatureFilter=function(G,K){this.onRemoveFeatureFilter(G,K)},fe.prototype.hidePois=function(){this.onHidePois()},fe.prototype.resetFeatureFilters=function(){this.onResetFeatureFilters()},fe.prototype.setAmenityFilter=function(G,K,re){if(!K||K&&this.amenityCategories[K])this.onSetAmenityFilter(G,K,re);else throw new Error("It seems there is no '".concat(K,"' amenities category created, please set category with 'setAmenitiesCategory()' method"))},fe.prototype.removeAmenityFilter=function(G,K,re){if(!K||K&&this.amenityCategories[K])this.onRemoveAmenityFilter(G,K,re);else throw new Error("It seems there is no '".concat(K,"' amenities category created, please set category with 'setAmenitiesCategory()' method"))},fe.prototype.resetAmenityFilters=function(){this.onResetAmenityFilters()},fe.prototype.setAmenitiesCategory=function(G,K){this.amenityCategories[G]={amenities:K}},fe.prototype.removeAmenitiesCategory=function(G){if(this.amenityCategories[G])delete this.amenityCategories[G];else throw new Error("It seems there is no '".concat(G,"' amenities category created, please set category with 'setAmenitiesCategory()' method"))},fe.prototype.resetAmenitiesCategory=function(){this.amenityCategories={}},fe.prototype.getPolygonClickListener=function(){return this.onPolygonClickListener.asObservable()},fe.prototype.getPoiClickListener=function(){return this.onPoiClickListener.asObservable()},fe.prototype.setPerson=function(G,K,re,ie){this.onSetPerson(G,K,re,ie)},fe.prototype.upsertPerson=function(G,K,re,ie){var he=ie?this.state.persons.find(function(ae){return ae.id===ie}):null;he?this.onUpdatePerson(he,G,K,re):this.onAddPerson(G,K,re,ie)},fe.prototype.getPersonUpdateListener=function(){return this.onPersonUpdateListener.asObservable()},fe.prototype.toggleHiddenPois=function(){this.onToggleHiddenPois()},fe.prototype.toggleRasterFloorplans=function(){this.onToggleRasterFloorplans()},fe.prototype.setFeaturesHighlight=function(G,K,re,ie){this.onSetFeaturesHighlight(G,K,re,ie)},fe.prototype.refetch=function(){this.onRefetch()},fe}();e.Map=Ie}(fI)),fI}var N2={},XH={exports:{}};(function(e,t){var r;r=function(){function n(G,K){var re=Object.keys(G);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(G);K&&(ie=ie.filter(function(he){return Object.getOwnPropertyDescriptor(G,he).enumerable})),re.push.apply(re,ie)}return re}function i(G){for(var K=1;K<arguments.length;K++){var re=arguments[K]!=null?arguments[K]:{};K%2?n(Object(re),!0).forEach(function(ie){s(G,ie,re[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(re)):n(Object(re)).forEach(function(ie){Object.defineProperty(G,ie,Object.getOwnPropertyDescriptor(re,ie))})}return G}function o(G){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o(G)}function s(G,K,re){return K in G?Object.defineProperty(G,K,{value:re,enumerable:!0,configurable:!0,writable:!0}):G[K]=re,G}function a(G){return function(K){if(Array.isArray(K))return f(K)}(G)||function(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}(G)||d(G)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(G,K){if(G){if(typeof G=="string")return f(G,K);var re=Object.prototype.toString.call(G).slice(8,-1);return re==="Object"&&G.constructor&&(re=G.constructor.name),re==="Map"||re==="Set"?Array.from(G):re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re)?f(G,K):void 0}}function f(G,K){(K==null||K>G.length)&&(K=G.length);for(var re=0,ie=new Array(K);re<K;re++)ie[re]=G[re];return ie}var g=function(G){return typeof G=="string"?document.querySelector(G):G()},_=function(G,K){var re=typeof G=="string"?document.createElement(G):G;for(var ie in K){var he=K[ie];if(ie==="inside")he.append(re);else if(ie==="dest")g(he[0]).insertAdjacentElement(he[1],re);else if(ie==="around"){var ae=he;ae.parentNode.insertBefore(re,ae),re.append(ae),ae.getAttribute("autofocus")!=null&&ae.focus()}else ie in re?re[ie]=he:re.setAttribute(ie,he)}return re},b=function(G,K){return G=String(G).toLowerCase(),K?G.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):G},P=function(G,K){return _("mark",i({innerHTML:G},typeof K=="string"&&{class:K})).outerHTML},L=function(G,K){K.input.dispatchEvent(new CustomEvent(G,{bubbles:!0,detail:K.feedback,cancelable:!0}))},R=function(G,K,re){var ie=re||{},he=ie.mode,ae=ie.diacritics,Te=ie.highlight,Le=b(K,ae);if(K=String(K),G=b(G,ae),he==="loose"){var Xe=(G=G.replace(/ /g,"")).length,$e=0,at=Array.from(K).map(function(Lt,pt){return $e<Xe&&Le[pt]===G[$e]&&(Lt=Te?P(Lt,Te):Lt,$e++),Lt}).join("");if($e===Xe)return at}else{var _t=Le.indexOf(G);if(~_t)return G=K.substring(_t,_t+G.length),_t=Te?K.replace(G,P(G,Te)):K}},$=function(G,K){return new Promise(function(re,ie){var he;return(he=G.data).cache&&he.store?re():new Promise(function(ae,Te){return typeof he.src=="function"?he.src(K).then(ae,Te):ae(he.src)}).then(function(ae){try{return G.feedback=he.store=ae,L("response",G),re()}catch(Te){return ie(Te)}},ie)})},F=function(G,K){var re=K.data,ie=K.searchEngine,he=[];re.store.forEach(function(Te,Le){var Xe=function(_t){var Lt=_t?Te[_t]:Te,pt=typeof ie=="function"?ie(G,Lt):R(G,Lt,{mode:ie,diacritics:K.diacritics,highlight:K.resultItem.highlight});if(pt){var Ot={match:pt,value:Te};_t&&(Ot.key=_t),he.push(Ot)}};if(re.keys){var $e,at=function(_t,Lt){var pt=typeof Symbol<"u"&&_t[Symbol.iterator]||_t["@@iterator"];if(!pt){if(Array.isArray(_t)||(pt=d(_t))||Lt&&_t&&typeof _t.length=="number"){pt&&(_t=pt);var Ot=0,vt=function(){};return{s:vt,n:function(){return Ot>=_t.length?{done:!0}:{done:!1,value:_t[Ot++]}},e:function(Gt){throw Gt},f:vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ze,Zt=!0,rr=!1;return{s:function(){pt=pt.call(_t)},n:function(){var Gt=pt.next();return Zt=Gt.done,Gt},e:function(Gt){rr=!0,Ze=Gt},f:function(){try{Zt||pt.return==null||pt.return()}finally{if(rr)throw Ze}}}}(re.keys);try{for(at.s();!($e=at.n()).done;)Xe($e.value)}catch(_t){at.e(_t)}finally{at.f()}}else Xe()}),re.filter&&(he=re.filter(he));var ae=he.slice(0,K.resultsList.maxResults);K.feedback={query:G,matches:he,results:ae},L("results",K)},T="aria-expanded",x="aria-activedescendant",N="aria-selected",B=function(G,K){G.feedback.selection=i({index:K},G.feedback.results[K])},H=function(G){G.isOpen||((G.wrapper||G.input).setAttribute(T,!0),G.list.removeAttribute("hidden"),G.isOpen=!0,L("open",G))},Z=function(G){G.isOpen&&((G.wrapper||G.input).setAttribute(T,!1),G.input.setAttribute(x,""),G.list.setAttribute("hidden",""),G.isOpen=!1,L("close",G))},Y=function(G,K){var re=K.resultItem,ie=K.list.getElementsByTagName(re.tag),he=!!re.selected&&re.selected.split(" ");if(K.isOpen&&ie.length){var ae,Te,Le=K.cursor;G>=ie.length&&(G=0),G<0&&(G=ie.length-1),K.cursor=G,Le>-1&&(ie[Le].removeAttribute(N),he&&(Te=ie[Le].classList).remove.apply(Te,a(he))),ie[G].setAttribute(N,!0),he&&(ae=ie[G].classList).add.apply(ae,a(he)),K.input.setAttribute(x,ie[K.cursor].id),K.list.scrollTop=ie[G].offsetTop-K.list.clientHeight+ie[G].clientHeight+5,K.feedback.cursor=K.cursor,B(K,G),L("navigate",K)}},W=function(G){Y(G.cursor+1,G)},Q=function(G){Y(G.cursor-1,G)},me=function(G,K,re){(re=re>=0?re:G.cursor)<0||(G.feedback.event=K,B(G,re),L("selection",G),Z(G))};function ge(G,K){var re=this;return new Promise(function(ie,he){var ae,Te;return ae=K||((Te=G.input)instanceof HTMLInputElement||Te instanceof HTMLTextAreaElement?Te.value:Te.innerHTML),function(Xe,$e,at){return $e?$e(Xe):Xe.length>=at}(ae=G.query?G.query(ae):ae,G.trigger,G.threshold)?$(G,ae).then(function(Xe){try{return G.feedback instanceof Error?ie():(F(ae,G),G.resultsList&&function($e){var at=$e.resultsList,_t=$e.list,Lt=$e.resultItem,pt=$e.feedback,Ot=pt.matches,vt=pt.results;if($e.cursor=-1,_t.innerHTML="",Ot.length||at.noResults){var Ze=new DocumentFragment;vt.forEach(function(Zt,rr){var Gt=_(Lt.tag,i({id:"".concat(Lt.id,"_").concat(rr),role:"option",innerHTML:Zt.match,inside:Ze},Lt.class&&{class:Lt.class}));Lt.element&&Lt.element(Gt,Zt)}),_t.append(Ze),at.element&&at.element(_t,pt),H($e)}else Z($e)}(G),Le.call(re))}catch($e){return he($e)}},he):(Z(G),Le.call(re));function Le(){return ie()}})}var be=function(G,K){for(var re in G)for(var ie in G[re])K(re,ie)},oe=function(G){var K,re,ie,he=G.events,ae=(K=function(){return ge(G)},re=G.debounce,function(){clearTimeout(ie),ie=setTimeout(function(){return K()},re)}),Te=G.events=i({input:i({},he&&he.input)},G.resultsList&&{list:he?i({},he.list):{}}),Le={input:{input:function(){ae()},keydown:function(Xe){(function($e,at){switch($e.keyCode){case 40:case 38:$e.preventDefault(),$e.keyCode===40?W(at):Q(at);break;case 13:at.submit||$e.preventDefault(),at.cursor>=0&&me(at,$e);break;case 9:at.resultsList.tabSelect&&at.cursor>=0&&me(at,$e);break;case 27:at.input.value="",Z(at)}})(Xe,G)},blur:function(){Z(G)}},list:{mousedown:function(Xe){Xe.preventDefault()},click:function(Xe){(function($e,at){var _t=at.resultItem.tag.toUpperCase(),Lt=Array.from(at.list.querySelectorAll(_t)),pt=$e.target.closest(_t);pt&&pt.nodeName===_t&&me(at,$e,Lt.indexOf(pt))})(Xe,G)}}};be(Le,function(Xe,$e){(G.resultsList||$e==="input")&&(Te[Xe][$e]||(Te[Xe][$e]=Le[Xe][$e]))}),be(Te,function(Xe,$e){G[Xe].addEventListener($e,Te[Xe][$e])})};function Ie(G){var K=this;return new Promise(function(re,ie){var he,ae,Te;if(he=G.placeHolder,Te={role:"combobox","aria-owns":(ae=G.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},_(G.input,i(i({"aria-controls":ae.id,"aria-autocomplete":"both"},he&&{placeholder:he}),!G.wrapper&&i({},Te))),G.wrapper&&(G.wrapper=_("div",i({around:G.input,class:G.name+"_wrapper"},Te))),ae&&(G.list=_(ae.tag,i({dest:[ae.destination,ae.position],id:ae.id,role:"listbox",hidden:"hidden"},ae.class&&{class:ae.class}))),oe(G),G.data.cache)return $(G).then(function(Xe){try{return Le.call(K)}catch($e){return ie($e)}},ie);function Le(){return L("init",G),re()}return Le.call(K)})}function fe(G){var K=G.prototype;K.init=function(){Ie(this)},K.start=function(re){ge(this,re)},K.unInit=function(){if(this.wrapper){var re=this.wrapper.parentNode;re.insertBefore(this.input,this.wrapper),re.removeChild(this.wrapper)}var ie;be((ie=this).events,function(he,ae){ie[he].removeEventListener(ae,ie.events[he][ae])})},K.open=function(){H(this)},K.close=function(){Z(this)},K.goTo=function(re){Y(re,this)},K.next=function(){W(this)},K.previous=function(){Q(this)},K.select=function(re){me(this,null,re)},K.search=function(re,ie,he){return R(re,ie,he)}}return function G(K){this.options=K,this.id=G.instances=(G.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(re){var ie=re.name,he=re.options,ae=re.resultsList,Te=re.resultItem;for(var Le in he)if(o(he[Le])==="object")for(var Xe in re[Le]||(re[Le]={}),he[Le])re[Le][Xe]=he[Le][Xe];else re[Le]=he[Le];re.selector=re.selector||"#"+ie,ae.destination=ae.destination||re.selector,ae.id=ae.id||ie+"_list_"+re.id,Te.id=Te.id||ie+"_result",re.input=g(re.selector)}(this),fe.call(this,G),Ie(this)}},e.exports=r()})(XH);var NRe=XH.exports,tL=Pe&&Pe.__assign||function(){return tL=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tL.apply(this,arguments)},gO=Pe&&Pe.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(g){try{f(n.next(g))}catch(_){s(_)}}function d(g){try{f(n.throw(g))}catch(_){s(_)}}function f(g){g.done?o(g.value):i(g.value).then(a,d)}f((n=n.apply(e,t||[])).next())})},vO=Pe&&Pe.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(g){return d([f,g])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(N2,"__esModule",{value:!0});N2.Select=void 0;var j8=v_,U8=Qg,FRe=MN(),$Re=NRe,zRe=BN,BRe=function(){function e(t,r,n){var i=this;this.useApiSearch=!1,this.onSelectListener=new zRe.Subject;var o=r!=null&&r.selector?"".concat(r.selector):"#proximiioSelect";this.useApiSearch=n!==void 0?n:!1,this.ac=new $Re(tL({data:this.getData(t),selector:o},r)),document.querySelector(o).addEventListener("selection",function(s){var a=s.detail;document.querySelector(o).blur();var d=a.selection.value[a.selection.key];document.querySelector(o).value=d,i.onSelectListener.next(a.selection.value)})}return e.prototype.getData=function(t){if(t==="Places")return this.getPlaces();if(t==="Floors")return this.getFloors();if(t==="Pois")return this.getPois()},e.prototype.getPlaces=function(){var t=this;return{src:function(r){return gO(t,void 0,void 0,function(){var n,i,o;return vO(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.useApiSearch?[4,j8.default.getPlaces(10,0,void 0,void 0,"name",r)]:[3,2];case 1:return i=s.sent(),[3,4];case 2:return[4,j8.default.getPlaces(100)];case 3:i=s.sent(),s.label=4;case 4:return n=i,[2,n.data];case 5:return o=s.sent(),[2,o];case 6:return[2]}})})},keys:["name"],cache:!1}},e.prototype.getFloors=function(){var t=this;return{src:function(r){return gO(t,void 0,void 0,function(){var n,i,o;return vO(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.useApiSearch?[4,U8.default.getFloors(10,0,void 0,void 0,"name",r)]:[3,2];case 1:return i=s.sent(),[3,4];case 2:return[4,U8.default.getFloors(100)];case 3:i=s.sent(),s.label=4;case 4:return n=i,[2,n.data];case 5:return o=s.sent(),[2,o];case 6:return[2]}})})},keys:["name"],cache:!1}},e.prototype.getPois=function(){var t=this;return{src:function(r){return gO(t,void 0,void 0,function(){var n;return vO(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,FRe.default.getPois()];case 1:return[2,i.sent()];case 2:return n=i.sent(),[2,n];case 3:return[2]}})})},keys:["getTitleWithLevel"],cache:!1}},e.prototype.getSelectListener=function(){return this.onSelectListener.asObservable()},e}();N2.Select=BRe;Object.defineProperty(Q7,"__esModule",{value:!0});var jRe=DR,URe=v_,VRe=Qg,GRe=WH(),qRe=N2,V8=Q7.default={Auth:jRe.default,Places:URe.default,Floors:VRe.default,Map:GRe.Map,Select:qRe.Select};const G8=e=>{let t;const r=new Set,n=(d,f)=>{const g=typeof d=="function"?d(t):d;if(!Object.is(g,t)){const _=t;t=f??typeof g!="object"?g:Object.assign({},t,g),r.forEach(b=>b(t,_))}},i=()=>t,a={setState:n,getState:i,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{r.clear()}};return t=e(n,i,a),a},WRe=e=>e?G8(e):G8;var YH={exports:{}},HH={},ZH={exports:{}},KH={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug=ne;function XRe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var YRe=typeof Object.is=="function"?Object.is:XRe,HRe=Ug.useState,ZRe=Ug.useEffect,KRe=Ug.useLayoutEffect,JRe=Ug.useDebugValue;function QRe(e,t){var r=t(),n=HRe({inst:{value:r,getSnapshot:t}}),i=n[0].inst,o=n[1];return KRe(function(){i.value=r,i.getSnapshot=t,yO(i)&&o({inst:i})},[e,r,t]),ZRe(function(){return yO(i)&&o({inst:i}),e(function(){yO(i)&&o({inst:i})})},[e]),JRe(r),r}function yO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!YRe(e,r)}catch{return!0}}function eke(e,t){return t()}var tke=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eke:QRe;KH.useSyncExternalStore=Ug.useSyncExternalStore!==void 0?Ug.useSyncExternalStore:tke;ZH.exports=KH;var rke=ZH.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=ne,nke=rke;function ike(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oke=typeof Object.is=="function"?Object.is:ike,ake=nke.useSyncExternalStore,ske=F2.useRef,uke=F2.useEffect,lke=F2.useMemo,cke=F2.useDebugValue;HH.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=ske(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=lke(function(){function d(P){if(!f){if(f=!0,g=P,P=n(P),i!==void 0&&s.hasValue){var L=s.value;if(i(L,P))return _=L}return _=P}if(L=_,oke(g,P))return L;var R=n(P);return i!==void 0&&i(L,R)?L:(g=P,_=R)}var f=!1,g,_,b=r===void 0?null:r;return[function(){return d(t())},b===null?void 0:function(){return d(b())}]},[t,r,n,i]);var a=ake(e,o[0],o[1]);return uke(function(){s.hasValue=!0,s.value=a},[a]),cke(a),a};YH.exports=HH;var fke=YH.exports;const hke=bd(fke),{useDebugValue:dke}=Tr,{useSyncExternalStoreWithSelector:pke}=hke;function mke(e,t=e.getState,r){const n=pke(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return dke(n),n}const q8=e=>{const t=typeof e=="function"?WRe(e):e,r=(n,i)=>mke(t,n,i);return Object.assign(r,t),r},gke=e=>e?q8(e):q8;var JH={},$2={},Ku={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.areaConversion=mn.timeConversion=mn.distanceConversion=mn.altitudeKeys=mn.latitudeKeys=mn.longitudeKeys=mn.MAXLON=mn.MINLON=mn.MAXLAT=mn.MINLAT=mn.earthRadius=mn.sexagesimalPattern=void 0;var vke=/^([0-9]{1,3})\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)[']\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["]\s*)?([NEOSW]?)$/;mn.sexagesimalPattern=vke;var yke=6378137;mn.earthRadius=yke;var _ke=-90;mn.MINLAT=_ke;var bke=90;mn.MAXLAT=bke;var xke=-180;mn.MINLON=xke;var wke=180;mn.MAXLON=wke;var Eke=["lng","lon","longitude",0];mn.longitudeKeys=Eke;var Ske=["lat","latitude",1];mn.latitudeKeys=Ske;var Pke=["alt","altitude","elevation","elev",2];mn.altitudeKeys=Pke;var Ake={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};mn.distanceConversion=Ake;var Cke={m:60,h:3600,d:86400};mn.timeConversion=Cke;var Ic={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};mn.areaConversion=Ic;Ic.sqm=Ic.m2;Ic.sqkm=Ic.km2;Ic.sqft=Ic.ft2;Ic.sqyd=Ic.yd2;Ic.sqin=Ic.in2;var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.default=void 0;var Ike=function(t,r){return r.reduce(function(n,i){if(typeof t>"u"||t===null)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,i)&&typeof i<"u"&&typeof n>"u"?(n=i,i):n},void 0)},Oke=Ike;tm.default=Oke;var xv={},rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.default=void 0;var Tke=function(t){var r=t.toString().trim();return isNaN(parseFloat(r))?!1:parseFloat(r)===Number(r)},Mke=Tke;rm.default=Mke;var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.default=void 0;var Lke=mn,Rke=function(t){return Lke.sexagesimalPattern.test(t.toString().trim())},kke=Rke;nm.default=kke;var im={};Object.defineProperty(im,"__esModule",{value:!0});im.default=void 0;var Dke=mn,Nke=function(t){var r=new RegExp(Dke.sexagesimalPattern).exec(t.toString().trim());if(typeof r>"u"||r===null)throw new Error("Given value is not in sexagesimal format");var n=Number(r[2])/60||0,i=Number(r[4])/3600||0,o=parseFloat(r[1])+n+i;return["S","W"].includes(r[7])?-o:o},Fke=Nke;im.default=Fke;var P1={},wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.default=void 0;var _O=mn,bO=$ke(tm);function $ke(e){return e&&e.__esModule?e:{default:e}}function W8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(r),!0).forEach(function(n){Bke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jke=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{longitude:_O.longitudeKeys,latitude:_O.latitudeKeys,altitude:_O.altitudeKeys},n=(0,bO.default)(t,r.longitude),i=(0,bO.default)(t,r.latitude),o=(0,bO.default)(t,r.altitude);return zke({latitude:i,longitude:n},o?{altitude:o}:{})},Uke=jke;wv.default=Uke;var A1={};Object.defineProperty(A1,"__esModule",{value:!0});A1.default=void 0;var Vke=HN(rm),Gke=HN(nm),qke=HN(im),X8=mn;function HN(e){return e&&e.__esModule?e:{default:e}}var Wke=function e(t){return(0,Vke.default)(t)?!(parseFloat(t)>X8.MAXLAT||t<X8.MINLAT):(0,Gke.default)(t)?e((0,qke.default)(t)):!1},Xke=Wke;A1.default=Xke;var C1={};Object.defineProperty(C1,"__esModule",{value:!0});C1.default=void 0;var Yke=ZN(rm),Hke=ZN(nm),Zke=ZN(im),Y8=mn;function ZN(e){return e&&e.__esModule?e:{default:e}}var Kke=function e(t){return(0,Yke.default)(t)?!(parseFloat(t)>Y8.MAXLON||t<Y8.MINLON):(0,Hke.default)(t)?e((0,Zke.default)(t)):!1},Jke=Kke;C1.default=Jke;Object.defineProperty(P1,"__esModule",{value:!0});P1.default=void 0;var Qke=KN(wv),H8=KN(A1),Z8=KN(C1);function KN(e){return e&&e.__esModule?e:{default:e}}var eDe=function(t){var r=(0,Qke.default)(t),n=r.latitude,i=r.longitude;if(Array.isArray(t)&&t.length>=2)return(0,Z8.default)(t[0])&&(0,H8.default)(t[1]);if(typeof n>"u"||typeof i>"u")return!1;var o=t[i],s=t[n];return!(typeof s>"u"||typeof o>"u"||(0,H8.default)(s)===!1||(0,Z8.default)(o)===!1)},tDe=eDe;P1.default=tDe;Object.defineProperty(xv,"__esModule",{value:!0});xv.default=void 0;var rDe=I1(rm),nDe=I1(nm),iDe=I1(im),K8=I1(P1),oDe=I1(wv);function I1(e){return e&&e.__esModule?e:{default:e}}function J8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(r),!0).forEach(function(n){rL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aDe=function e(t){if((0,rDe.default)(t))return Number(t);if((0,nDe.default)(t))return(0,iDe.default)(t);if((0,K8.default)(t)){var r=(0,oDe.default)(t);return Array.isArray(t)?t.map(function(n,i){return[0,1].includes(i)?e(n):n}):xO(xO(xO({},t),r.latitude&&rL({},r.latitude,e(t[r.latitude]))),r.longitude&&rL({},r.longitude,e(t[r.longitude])))}return Array.isArray(t)?t.map(function(n){return(0,K8.default)(n)?e(n):n}):t},sDe=aDe;xv.default=sDe;Object.defineProperty(Ku,"__esModule",{value:!0});Ku.default=void 0;var uDe=mn,lDe=QH(tm),cDe=QH(xv);function QH(e){return e&&e.__esModule?e:{default:e}}var fDe=function(t,r){var n=(0,lDe.default)(t,uDe.latitudeKeys);if(!(typeof n>"u"||n===null)){var i=t[n];return r===!0?i:(0,cDe.default)(i)}},hDe=fDe;Ku.default=hDe;var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.default=void 0;var dDe=mn,pDe=eZ(tm),mDe=eZ(xv);function eZ(e){return e&&e.__esModule?e:{default:e}}var gDe=function(t,r){var n=(0,pDe.default)(t,dDe.longitudeKeys);if(!(typeof n>"u"||n===null)){var i=t[n];return r===!0?i:(0,mDe.default)(i)}},vDe=gDe;Ju.default=vDe;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.default=void 0;var yDe=function(t){return t*Math.PI/180},_De=yDe;sc.default=_De;var _h={};Object.defineProperty(_h,"__esModule",{value:!0});_h.default=void 0;var bDe=function(t){return t*180/Math.PI},xDe=bDe;_h.default=xDe;Object.defineProperty($2,"__esModule",{value:!0});$2.default=void 0;var wDe=z2(Ku),EDe=z2(Ju),wO=z2(sc),EO=z2(_h),Q8=mn;function z2(e){return e&&e.__esModule?e:{default:e}}var SDe=function(t,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:6371e3,o=(0,wDe.default)(t),s=(0,EDe.default)(t),a=r/i,d=(0,wO.default)(n),f=(0,wO.default)(o),g=(0,wO.default)(s),_=Math.asin(Math.sin(f)*Math.cos(a)+Math.cos(f)*Math.sin(a)*Math.cos(d)),b=g+Math.atan2(Math.sin(d)*Math.sin(a)*Math.cos(f),Math.cos(a)-Math.sin(f)*Math.sin(_)),P=(0,EO.default)(b);return(P<Q8.MINLON||P>Q8.MAXLON)&&(b=(b+3*Math.PI)%(2*Math.PI)-Math.PI,P=(0,EO.default)(b)),{latitude:(0,EO.default)(_),longitude:P}},PDe=SDe;$2.default=PDe;var B2={};Object.defineProperty(B2,"__esModule",{value:!0});B2.default=void 0;var ADe=mn,CDe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",n=ADe.areaConversion[r];if(n)return t*n;throw new Error("Invalid unit used for area conversion.")},IDe=CDe;B2.default=IDe;var j2={};Object.defineProperty(j2,"__esModule",{value:!0});j2.default=void 0;var ODe=mn,TDe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",n=ODe.distanceConversion[r];if(n)return t*n;throw new Error("Invalid unit used for distance conversion.")},MDe=TDe;j2.default=MDe;var U2={};Object.defineProperty(U2,"__esModule",{value:!0});U2.default=void 0;var rx=mn,LDe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"kmh";switch(r){case"kmh":return t*rx.timeConversion.h*rx.distanceConversion.km;case"mph":return t*rx.timeConversion.h*rx.distanceConversion.mi;default:return t}},RDe=LDe;U2.default=RDe;var V2={};Object.defineProperty(V2,"__esModule",{value:!0});V2.default=void 0;function ej(e,t){return FDe(e)||NDe(e,t)||DDe(e,t)||kDe()}function kDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DDe(e,t){if(e){if(typeof e=="string")return tj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tj(e,t)}}function tj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NDe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(d){i=!0,o=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function FDe(e){if(Array.isArray(e))return e}var $De=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4,n=Math.pow(10,r);return Math.round(t*n)/n},zDe=function(t){var r=t.toString().split("."),n=ej(r,2),i=n[0],o=n[1],s=Math.abs(Number(i)),a=+("0."+(o||0))*60,d=a.toString().split("."),f=Math.floor(a),g=$De(+("0."+(d[1]||0))*60).toString(),_=g.split("."),b=ej(_,2),P=b[0],L=b[1],R=L===void 0?"0":L;return s+" "+f.toString().padStart(2,"0")+"' "+P.padStart(2,"0")+"."+R.padEnd(1,"0")+'"'},BDe=zDe;V2.default=BDe;var G2={},O1={},xf={},T1={};Object.defineProperty(T1,"__esModule",{value:!0});T1.default=void 0;var jDe=function(t){return t>1?1:t<-1?-1:t},UDe=jDe;T1.default=UDe;Object.defineProperty(xf,"__esModule",{value:!0});xf.default=void 0;var rj=q2(Ku),nj=q2(Ju),Mm=q2(sc),VDe=q2(T1),GDe=mn;function q2(e){return e&&e.__esModule?e:{default:e}}var qDe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;n=typeof n<"u"&&!isNaN(n)?n:1;var i=(0,rj.default)(t),o=(0,nj.default)(t),s=(0,rj.default)(r),a=(0,nj.default)(r),d=Math.acos((0,VDe.default)(Math.sin((0,Mm.default)(s))*Math.sin((0,Mm.default)(i))+Math.cos((0,Mm.default)(s))*Math.cos((0,Mm.default)(i))*Math.cos((0,Mm.default)(o)-(0,Mm.default)(a))))*GDe.earthRadius;return Math.round(d/n)*n},WDe=qDe;xf.default=WDe;Object.defineProperty(O1,"__esModule",{value:!0});O1.default=void 0;var ij=XDe(xf);function XDe(e){return e&&e.__esModule?e:{default:e}}var YDe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ij.default;return n=typeof n=="function"?n:ij.default,r.slice().sort(function(i,o){return n(t,i)-n(t,o)})},HDe=YDe;O1.default=HDe;Object.defineProperty(G2,"__esModule",{value:!0});G2.default=void 0;var ZDe=KDe(O1);function KDe(e){return e&&e.__esModule?e:{default:e}}var JDe=function(t,r){return(0,ZDe.default)(t,r)[0]},QDe=JDe;G2.default=QDe;var W2={};Object.defineProperty(W2,"__esModule",{value:!0});W2.default=void 0;var SO=JN(sc),eNe=JN(Ku),oj=JN(Ju),aj=mn;function JN(e){return e&&e.__esModule?e:{default:e}}var tNe=function(t){var r=0;if(t.length>2){for(var n,i,o,s=0;s<t.length;s++){s===t.length-2?(n=t.length-2,i=t.length-1,o=0):s===t.length-1?(n=t.length-1,i=0,o=1):(n=s,i=s+1,o=s+2);var a=(0,oj.default)(t[n]),d=(0,eNe.default)(t[i]),f=(0,oj.default)(t[o]);r+=((0,SO.default)(f)-(0,SO.default)(a))*Math.sin((0,SO.default)(d))}r=r*aj.earthRadius*aj.earthRadius/2}return Math.abs(r)},rNe=tNe;W2.default=rNe;var M1={};Object.defineProperty(M1,"__esModule",{value:!0});M1.default=void 0;var nNe=tZ(Ku),iNe=tZ(Ju);function tZ(e){return e&&e.__esModule?e:{default:e}}var oNe=function(t){if(Array.isArray(t)===!1||t.length===0)throw new Error("No points were given.");return t.reduce(function(r,n){var i=(0,nNe.default)(n),o=(0,iNe.default)(n);return{maxLat:Math.max(i,r.maxLat),minLat:Math.min(i,r.minLat),maxLng:Math.max(o,r.maxLng),minLng:Math.min(o,r.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},aNe=oNe;M1.default=aNe;var X2={};Object.defineProperty(X2,"__esModule",{value:!0});X2.default=void 0;var sNe=Y2(Ku),uNe=Y2(Ju),Lm=Y2(sc),nx=Y2(_h),vy=mn;function Y2(e){return e&&e.__esModule?e:{default:e}}var lNe=function(t,r){var n=(0,sNe.default)(t),i=(0,uNe.default)(t),o=(0,Lm.default)(n),s=(0,Lm.default)(i),a=r/vy.earthRadius,d=o-a,f=o+a,g=(0,Lm.default)(vy.MAXLAT),_=(0,Lm.default)(vy.MINLAT),b=(0,Lm.default)(vy.MAXLON),P=(0,Lm.default)(vy.MINLON),L,R;if(d>_&&f<g){var $=Math.asin(Math.sin(a)/Math.cos(o));L=s-$,L<P&&(L+=Math.PI*2),R=s+$,R>b&&(R-=Math.PI*2)}else d=Math.max(d,_),f=Math.min(f,g),L=P,R=b;return[{latitude:(0,nx.default)(d),longitude:(0,nx.default)(L)},{latitude:(0,nx.default)(f),longitude:(0,nx.default)(R)}]},cNe=lNe;X2.default=cNe;var H2={};Object.defineProperty(H2,"__esModule",{value:!0});H2.default=void 0;var fNe=Z2(Ku),hNe=Z2(Ju),sj=Z2(sc),uj=Z2(_h);function Z2(e){return e&&e.__esModule?e:{default:e}}var dNe=function(t){if(Array.isArray(t)===!1||t.length===0)return!1;var r=t.length,n=t.reduce(function(a,d){var f=(0,sj.default)((0,fNe.default)(d)),g=(0,sj.default)((0,hNe.default)(d));return{X:a.X+Math.cos(f)*Math.cos(g),Y:a.Y+Math.cos(f)*Math.sin(g),Z:a.Z+Math.sin(f)}},{X:0,Y:0,Z:0}),i=n.X/r,o=n.Y/r,s=n.Z/r;return{longitude:(0,uj.default)(Math.atan2(o,i)),latitude:(0,uj.default)(Math.atan2(s,Math.sqrt(i*i+o*o)))}},pNe=dNe;H2.default=pNe;var K2={};Object.defineProperty(K2,"__esModule",{value:!0});K2.default=void 0;var mNe=gNe(M1);function gNe(e){return e&&e.__esModule?e:{default:e}}var vNe=function(t){var r=(0,mNe.default)(t),n=r.minLat+(r.maxLat-r.minLat)/2,i=r.minLng+(r.maxLng-r.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(i.toFixed(6))}},yNe=vNe;K2.default=yNe;var J2={},L1={};Object.defineProperty(L1,"__esModule",{value:!0});L1.default=void 0;var lj=Q2(Ku),cj=Q2(Ju),ix=Q2(sc),_Ne=Q2(_h);function Q2(e){return e&&e.__esModule?e:{default:e}}var bNe=function(t,r){var n=(0,ix.default)((0,cj.default)(r))-(0,ix.default)((0,cj.default)(t)),i=Math.log(Math.tan((0,ix.default)((0,lj.default)(r))/2+Math.PI/4)/Math.tan((0,ix.default)((0,lj.default)(t))/2+Math.PI/4));return Math.abs(n)>Math.PI&&(n>0?n=(Math.PI*2-n)*-1:n=Math.PI*2+n),((0,_Ne.default)(Math.atan2(n,i))+360)%360},xNe=bNe;L1.default=xNe;Object.defineProperty(J2,"__esModule",{value:!0});J2.default=void 0;var fj=wNe(L1);function wNe(e){return e&&e.__esModule?e:{default:e}}var ENe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fj.default,i=typeof n=="function"?n(t,r):(0,fj.default)(t,r);if(isNaN(i))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(i/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},SNe=ENe;J2.default=SNe;var R1={};Object.defineProperty(R1,"__esModule",{value:!0});R1.default=void 0;var PO=rZ(xf),hj=rZ(T1);function rZ(e){return e&&e.__esModule?e:{default:e}}var PNe=function(t,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=(0,PO.default)(r,t,i),s=(0,PO.default)(t,n,i),a=(0,PO.default)(r,n,i),d=Math.acos((0,hj.default)((o*o+a*a-s*s)/(2*o*a))),f=Math.acos((0,hj.default)((s*s+a*a-o*o)/(2*s*a)));return d>Math.PI/2?o:f>Math.PI/2?s:Math.sin(d)*o},ANe=PNe;R1.default=ANe;var eA={};Object.defineProperty(eA,"__esModule",{value:!0});eA.default=void 0;var dj=tA(Ku),pj=tA(Ju),Bf=tA(sc),CNe=tA(_h);function tA(e){return e&&e.__esModule?e:{default:e}}var INe=function(t,r){var n=(0,dj.default)(r),i=(0,pj.default)(r),o=(0,dj.default)(t),s=(0,pj.default)(t),a=((0,CNe.default)(Math.atan2(Math.sin((0,Bf.default)(i)-(0,Bf.default)(s))*Math.cos((0,Bf.default)(n)),Math.cos((0,Bf.default)(o))*Math.sin((0,Bf.default)(n))-Math.sin((0,Bf.default)(o))*Math.cos((0,Bf.default)(n))*Math.cos((0,Bf.default)(i)-(0,Bf.default)(s))))+360)%360;return a},ONe=INe;eA.default=ONe;var rA={};Object.defineProperty(rA,"__esModule",{value:!0});rA.default=void 0;var TNe=MNe(xf);function MNe(e){return e&&e.__esModule?e:{default:e}}function Yx(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yx=function(r){return typeof r}:Yx=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yx(e)}var LNe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TNe.default;return t.reduce(function(n,i){return Yx(n)==="object"&&n.last!==null&&(n.distance+=r(i,n.last)),n.last=i,n},{last:null,distance:0}).distance},RNe=LNe;rA.default=RNe;var nA={};Object.defineProperty(nA,"__esModule",{value:!0});nA.default=void 0;var mj=QN(Ku),gj=QN(Ju),AO=QN(sc),vj=mn;function QN(e){return e&&e.__esModule?e:{default:e}}var kNe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;n=typeof n<"u"&&!isNaN(n)?n:1;var i=(0,mj.default)(t),o=(0,gj.default)(t),s=(0,mj.default)(r),a=(0,gj.default)(r),d=6356752314245e-6,f=1/298.257223563,g=(0,AO.default)(a-o),_,b,P,L,R,$,F=Math.atan((1-f)*Math.tan((0,AO.default)(parseFloat(i)))),T=Math.atan((1-f)*Math.tan((0,AO.default)(parseFloat(s)))),x=Math.sin(F),N=Math.cos(F),B=Math.sin(T),H=Math.cos(T),Z=g,Y,W=100;do{var Q=Math.sin(Z),me=Math.cos(Z);if($=Math.sqrt(H*Q*(H*Q)+(N*B-x*H*me)*(N*B-x*H*me)),$===0)return 0;_=x*B+N*H*me,b=Math.atan2($,_),P=N*H*Q/$,L=1-P*P,R=_-2*x*B/L,isNaN(R)&&(R=0);var ge=f/16*L*(4+f*(4-3*L));Y=Z,Z=g+(1-ge)*f*P*(b+ge*$*(R+ge*_*(-1+2*R*R)))}while(Math.abs(Z-Y)>1e-12&&--W>0);if(W===0)return NaN;var be=L*(vj.earthRadius*vj.earthRadius-d*d)/(d*d),oe=1+be/16384*(4096+be*(-768+be*(320-175*be))),Ie=be/1024*(256+be*(-128+be*(74-47*be))),fe=Ie*$*(R+Ie/4*(_*(-1+2*R*R)-Ie/6*R*(-3+4*$*$)*(-3+4*R*R))),G=d*oe*(b-fe);return Math.round(G/n)*n},DNe=kNe;nA.default=DNe;var iA={};Object.defineProperty(iA,"__esModule",{value:!0});iA.default=void 0;var NNe=function(t){if(/^(NNE|NE|NNW|N)$/.test(t))return"N";if(/^(ENE|E|ESE|SE)$/.test(t))return"E";if(/^(SSE|S|SSW|SW)$/.test(t))return"S";if(/^(WSW|W|WNW|NW)$/.test(t))return"W"},FNe=NNe;iA.default=FNe;var oA={};Object.defineProperty(oA,"__esModule",{value:!0});oA.default=void 0;var $Ne=zNe(xf);function zNe(e){return e&&e.__esModule?e:{default:e}}var BNe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$Ne.default,i=n(t,r),o=Number(r.time)-Number(t.time),s=i/o*1e3;return s},jNe=BNe;oA.default=jNe;var aA={};Object.defineProperty(aA,"__esModule",{value:!0});aA.default=void 0;var CO=UNe(xf);function UNe(e){return e&&e.__esModule?e:{default:e}}var VNe=function(t,r,n){return(0,CO.default)(r,t)+(0,CO.default)(t,n)===(0,CO.default)(r,n)},GNe=VNe;aA.default=GNe;var sA={};Object.defineProperty(sA,"__esModule",{value:!0});sA.default=void 0;var ox=nZ(Ku),Xl=nZ(Ju);function nZ(e){return e&&e.__esModule?e:{default:e}}var qNe=function(t,r){for(var n=!1,i=r.length,o=-1,s=i-1;++o<i;s=o)((0,Xl.default)(r[o])<=(0,Xl.default)(t)&&(0,Xl.default)(t)<(0,Xl.default)(r[s])||(0,Xl.default)(r[s])<=(0,Xl.default)(t)&&(0,Xl.default)(t)<(0,Xl.default)(r[o]))&&(0,ox.default)(t)<((0,ox.default)(r[s])-(0,ox.default)(r[o]))*((0,Xl.default)(t)-(0,Xl.default)(r[o]))/((0,Xl.default)(r[s])-(0,Xl.default)(r[o]))+(0,ox.default)(r[o])&&(n=!n);return n},WNe=qNe;sA.default=WNe;var uA={};Object.defineProperty(uA,"__esModule",{value:!0});uA.default=void 0;var XNe=YNe(R1);function YNe(e){return e&&e.__esModule?e:{default:e}}var HNe=function(t,r,n,i){return(0,XNe.default)(t,r,n)<i},ZNe=HNe;uA.default=ZNe;var lA={};Object.defineProperty(lA,"__esModule",{value:!0});lA.default=void 0;var KNe=JNe(xf);function JNe(e){return e&&e.__esModule?e:{default:e}}var QNe=function(t,r,n){var i=.01;return(0,KNe.default)(t,r,i)<n},e3e=QNe;lA.default=e3e;var cA={};Object.defineProperty(cA,"__esModule",{value:!0});cA.default=void 0;function t3e(e,t){return o3e(e)||i3e(e,t)||n3e(e,t)||r3e()}function r3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n3e(e,t){if(e){if(typeof e=="string")return yj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yj(e,t)}}function yj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i3e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(d){i=!0,o=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function o3e(e){if(Array.isArray(e))return e}var a3e=function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");var r=t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", "),n=r.map(function(i){var o=i.split(" "),s=t3e(o,2),a=s[0],d=s[1];return{longitude:parseFloat(a),latitude:parseFloat(d)}});return n},s3e=a3e;cA.default=s3e;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(e,"computeDestinationPoint",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"convertArea",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"convertSpeed",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"decimalToSexagesimal",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"findNearest",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"getAreaOfPolygon",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getBounds",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"getBoundsOfDistance",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"getCenter",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"getCenterOfBounds",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"getCompassDirection",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"getCoordinateKey",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(e,"getCoordinateKeys",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(e,"getDistance",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(e,"getDistanceFromLine",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(e,"getGreatCircleBearing",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(e,"getLatitude",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"getLongitude",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(e,"getPathLength",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(e,"getPreciseDistance",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(e,"getRhumbLineBearing",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(e,"getRoughCompassDirection",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(e,"getSpeed",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(e,"isPointInLine",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(e,"isPointInPolygon",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(e,"isPointNearLine",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(e,"isPointWithinRadius",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(e,"isSexagesimal",{enumerable:!0,get:function(){return Ie.default}}),Object.defineProperty(e,"isValidCoordinate",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(e,"isValidLatitude",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(e,"isValidLongitude",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(e,"orderByDistance",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(e,"sexagesimalToDecimal",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(e,"toDecimal",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(e,"toRad",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(e,"toDeg",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(e,"wktToPolygon",{enumerable:!0,get:function(){return Le.default}});var r=$e($2),n=$e(B2),i=$e(j2),o=$e(U2),s=$e(V2),a=$e(G2),d=$e(W2),f=$e(M1),g=$e(X2),_=$e(H2),b=$e(K2),P=$e(J2),L=$e(tm),R=$e(wv),$=$e(xf),F=$e(R1),T=$e(eA),x=$e(Ku),N=$e(Ju),B=$e(rA),H=$e(nA),Z=$e(L1),Y=$e(iA),W=$e(oA),Q=$e(rm),me=$e(aA),ge=$e(sA),be=$e(uA),oe=$e(lA),Ie=$e(nm),fe=$e(P1),G=$e(A1),K=$e(C1),re=$e(O1),ie=$e(im),he=$e(xv),ae=$e(sc),Te=$e(_h),Le=$e(cA),Xe=mn;Object.keys(Xe).forEach(function(at){at==="default"||at==="__esModule"||Object.prototype.hasOwnProperty.call(t,at)||Object.defineProperty(e,at,{enumerable:!0,get:function(){return Xe[at]}})});function $e(at){return at&&at.__esModule?at:{default:at}}})(JH);function iZ(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=iZ(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function oZ(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=iZ(e))&&(n&&(n+=" "),n+=t);return n}const e3="-";function u3e(e){const t=c3e(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;function i(s){const a=s.split(e3);return a[0]===""&&a.length!==1&&a.shift(),aZ(a,t)||l3e(s)}function o(s,a){const d=r[s]||[];return a&&n[s]?[...d,...n[s]]:d}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function aZ(e,t){var s;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?aZ(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(e3);return(s=t.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId}const _j=/^\[(.+)\]$/;function l3e(e){if(_j.test(e)){const t=_j.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function c3e(e){const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return h3e(Object.entries(e.classGroups),r).forEach(([o,s])=>{nL(s,n,o,t)}),n}function nL(e,t,r,n){e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:bj(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(f3e(i)){nL(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,s])=>{nL(s,bj(t,o),r,n)})})}function bj(e,t){let r=e;return t.split(e3).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function f3e(e){return e.isThemeGetter}function h3e(e,t){return t?e.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[t+s,a])):o);return[r,i]}):e}function d3e(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;function i(o,s){r.set(o,s),t++,t>e&&(t=0,n=r,r=new Map)}return{get(o){let s=r.get(o);if(s!==void 0)return s;if((s=n.get(o))!==void 0)return i(o,s),s},set(o,s){r.has(o)?r.set(o,s):i(o,s)}}}const sZ="!";function p3e(e){const t=e.separator,r=t.length===1,n=t[0],i=t.length;return function(s){const a=[];let d=0,f=0,g;for(let R=0;R<s.length;R++){let $=s[R];if(d===0){if($===n&&(r||s.slice(R,R+i)===t)){a.push(s.slice(f,R)),f=R+i;continue}if($==="/"){g=R;continue}}$==="["?d++:$==="]"&&d--}const _=a.length===0?s:s.substring(f),b=_.startsWith(sZ),P=b?_.substring(1):_,L=g&&g>f?g-f:void 0;return{modifiers:a,hasImportantModifier:b,baseClassName:P,maybePostfixModifierPosition:L}}}function m3e(e){if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t}function g3e(e){return{cache:d3e(e.cacheSize),splitModifiers:p3e(e),...u3e(e)}}const v3e=/\s+/;function y3e(e,t){const{splitModifiers:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=new Set;return e.trim().split(v3e).map(s=>{const{modifiers:a,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:g}=r(s);let _=n(g?f.substring(0,g):f),b=!!g;if(!_){if(!g)return{isTailwindClass:!1,originalClassName:s};if(_=n(f),!_)return{isTailwindClass:!1,originalClassName:s};b=!1}const P=m3e(a).join(":");return{isTailwindClass:!0,modifierId:d?P+sZ:P,classGroupId:_,originalClassName:s,hasPostfixModifier:b}}).reverse().filter(s=>{if(!s.isTailwindClass)return!0;const{modifierId:a,classGroupId:d,hasPostfixModifier:f}=s,g=a+d;return o.has(g)?!1:(o.add(g),i(d,f).forEach(_=>o.add(a+_)),!0)}).reverse().map(s=>s.originalClassName).join(" ")}function _3e(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=uZ(t))&&(n&&(n+=" "),n+=r);return n}function uZ(e){if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=uZ(e[n]))&&(r&&(r+=" "),r+=t);return r}function b3e(e,...t){let r,n,i,o=s;function s(d){const f=t.reduce((g,_)=>_(g),e());return r=g3e(f),n=r.cache.get,i=r.cache.set,o=a,a(d)}function a(d){const f=n(d);if(f)return f;const g=y3e(d,r);return i(d,g),g}return function(){return o(_3e.apply(null,arguments))}}function fo(e){const t=r=>r[e]||[];return t.isThemeGetter=!0,t}const lZ=/^\[(?:([a-z-]+):)?(.+)\]$/i,x3e=/^\d+\/\d+$/,w3e=new Set(["px","full","screen"]),E3e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S3e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P3e=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,A3e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function vc(e){return np(e)||w3e.has(e)||x3e.test(e)}function kh(e){return Ev(e,"length",k3e)}function np(e){return!!e&&!Number.isNaN(Number(e))}function ax(e){return Ev(e,"number",np)}function yy(e){return!!e&&Number.isInteger(Number(e))}function C3e(e){return e.endsWith("%")&&np(e.slice(0,-1))}function vn(e){return lZ.test(e)}function Dh(e){return E3e.test(e)}const I3e=new Set(["length","size","percentage"]);function O3e(e){return Ev(e,I3e,cZ)}function T3e(e){return Ev(e,"position",cZ)}const M3e=new Set(["image","url"]);function L3e(e){return Ev(e,M3e,N3e)}function R3e(e){return Ev(e,"",D3e)}function _y(){return!0}function Ev(e,t,r){const n=lZ.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1}function k3e(e){return S3e.test(e)}function cZ(){return!1}function D3e(e){return P3e.test(e)}function N3e(e){return A3e.test(e)}function F3e(){const e=fo("colors"),t=fo("spacing"),r=fo("blur"),n=fo("brightness"),i=fo("borderColor"),o=fo("borderRadius"),s=fo("borderSpacing"),a=fo("borderWidth"),d=fo("contrast"),f=fo("grayscale"),g=fo("hueRotate"),_=fo("invert"),b=fo("gap"),P=fo("gradientColorStops"),L=fo("gradientColorStopPositions"),R=fo("inset"),$=fo("margin"),F=fo("opacity"),T=fo("padding"),x=fo("saturate"),N=fo("scale"),B=fo("sepia"),H=fo("skew"),Z=fo("space"),Y=fo("translate"),W=()=>["auto","contain","none"],Q=()=>["auto","hidden","clip","visible","scroll"],me=()=>["auto",vn,t],ge=()=>[vn,t],be=()=>["",vc,kh],oe=()=>["auto",np,vn],Ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],K=()=>["start","end","center","between","around","evenly","stretch"],re=()=>["","0",vn],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[np,ax],ae=()=>[np,vn];return{cacheSize:500,separator:":",theme:{colors:[_y],spacing:[vc,kh],blur:["none","",Dh,vn],brightness:he(),borderColor:[e],borderRadius:["none","","full",Dh,vn],borderSpacing:ge(),borderWidth:be(),contrast:he(),grayscale:re(),hueRotate:ae(),invert:re(),gap:ge(),gradientColorStops:[e],gradientColorStopPositions:[C3e,kh],inset:me(),margin:me(),opacity:he(),padding:ge(),saturate:he(),scale:he(),sepia:re(),skew:ae(),space:ge(),translate:ge()},classGroups:{aspect:[{aspect:["auto","square","video",vn]}],container:["container"],columns:[{columns:[Dh]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ie(),vn]}],overflow:[{overflow:Q()}],"overflow-x":[{"overflow-x":Q()}],"overflow-y":[{"overflow-y":Q()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[R]}],"inset-x":[{"inset-x":[R]}],"inset-y":[{"inset-y":[R]}],start:[{start:[R]}],end:[{end:[R]}],top:[{top:[R]}],right:[{right:[R]}],bottom:[{bottom:[R]}],left:[{left:[R]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yy,vn]}],basis:[{basis:me()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",vn]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",yy,vn]}],"grid-cols":[{"grid-cols":[_y]}],"col-start-end":[{col:["auto",{span:["full",yy,vn]},vn]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[_y]}],"row-start-end":[{row:["auto",{span:[yy,vn]},vn]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",vn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",vn]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[$]}],mx:[{mx:[$]}],my:[{my:[$]}],ms:[{ms:[$]}],me:[{me:[$]}],mt:[{mt:[$]}],mr:[{mr:[$]}],mb:[{mb:[$]}],ml:[{ml:[$]}],"space-x":[{"space-x":[Z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",vn,t]}],"min-w":[{"min-w":["min","max","fit",vn,vc]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Dh]},Dh,vn]}],h:[{h:[vn,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",vc,vn]}],"max-h":[{"max-h":[vn,t,"min","max","fit"]}],"font-size":[{text:["base",Dh,kh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ax]}],"font-family":[{font:[_y]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",vn]}],"line-clamp":[{"line-clamp":["none",np,ax]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vc,vn]}],"list-image":[{"list-image":["none",vn]}],"list-style-type":[{list:["none","disc","decimal",vn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[F]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[F]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vc,kh]}],"underline-offset":[{"underline-offset":["auto",vc,vn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:ge()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[F]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ie(),T3e]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",O3e]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L3e]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[L]}],"gradient-via-pos":[{via:[L]}],"gradient-to-pos":[{to:[L]}],"gradient-from":[{from:[P]}],"gradient-via":[{via:[P]}],"gradient-to":[{to:[P]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[F]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[F]}],"divide-style":[{divide:fe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[vc,vn]}],"outline-w":[{outline:[vc,kh]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[F]}],"ring-offset-w":[{"ring-offset":[vc,kh]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Dh,R3e]}],"shadow-color":[{shadow:[_y]}],opacity:[{opacity:[F]}],"mix-blend":[{"mix-blend":G()}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Dh,vn]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[_]}],saturate:[{saturate:[x]}],sepia:[{sepia:[B]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[F]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[B]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",vn]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",vn]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",vn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[yy,vn]}],"translate-x":[{"translate-x":[Y]}],"translate-y":[{"translate-y":[Y]}],"skew-x":[{"skew-x":[H]}],"skew-y":[{"skew-y":[H]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",vn]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ge()}],"scroll-mx":[{"scroll-mx":ge()}],"scroll-my":[{"scroll-my":ge()}],"scroll-ms":[{"scroll-ms":ge()}],"scroll-me":[{"scroll-me":ge()}],"scroll-mt":[{"scroll-mt":ge()}],"scroll-mr":[{"scroll-mr":ge()}],"scroll-mb":[{"scroll-mb":ge()}],"scroll-ml":[{"scroll-ml":ge()}],"scroll-p":[{"scroll-p":ge()}],"scroll-px":[{"scroll-px":ge()}],"scroll-py":[{"scroll-py":ge()}],"scroll-ps":[{"scroll-ps":ge()}],"scroll-pe":[{"scroll-pe":ge()}],"scroll-pt":[{"scroll-pt":ge()}],"scroll-pr":[{"scroll-pr":ge()}],"scroll-pb":[{"scroll-pb":ge()}],"scroll-pl":[{"scroll-pl":ge()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[vc,kh,ax]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const $3e=b3e(F3e);function ii(...e){return $3e(oZ(e))}const fA=({floor:e,language:t})=>e.name.length===1&&Number(parseInt(e.name))?`L${e.name}`:e.metadata&&e.metadata["title_"+t]?e.metadata["title_"+t]:e.name;var fZ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},xj=Tr.createContext&&Tr.createContext(fZ),id=globalThis&&globalThis.__assign||function(){return id=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},id.apply(this,arguments)},z3e=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function hZ(e){return e&&e.map(function(t,r){return Tr.createElement(t.tag,id({key:r},t.attr),hZ(t.child))})}function jo(e){return function(t){return Tr.createElement(B3e,id({attr:id({},e.attr)},t),hZ(e.child))}}function B3e(e){var t=function(r){var n=e.attr,i=e.size,o=e.title,s=z3e(e,["attr","size","title"]),a=i||r.size||"1em",d;return r.className&&(d=r.className),e.className&&(d=(d?d+" ":"")+e.className),Tr.createElement("svg",id({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,s,{className:d,style:id(id({color:e.color||r.color},r.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&Tr.createElement("title",null,o),e.children)};return xj!==void 0?Tr.createElement(xj.Consumer,null,function(r){return t(r)}):t(fZ)}function j3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M246.64,63,194.87,34.74A5.93,5.93,0,0,0,192,34H160a6,6,0,0,0-6,6,26,26,0,0,1-52,0,6,6,0,0,0-6-6H64a5.93,5.93,0,0,0-2.88.74L9.36,63A13.77,13.77,0,0,0,3.58,81.55l19.28,36.81A14.38,14.38,0,0,0,35.67,126H58v82a14,14,0,0,0,14,14H184a14,14,0,0,0,14-14V126h22.34a14.38,14.38,0,0,0,12.81-7.64l19.28-36.81A13.77,13.77,0,0,0,246.64,63Zm-211,51a2.42,2.42,0,0,1-2.18-1.21L14.21,76a1.82,1.82,0,0,1,.9-2.47L58,50.11V114ZM186,208a2,2,0,0,1-2,2H72a2,2,0,0,1-2-2V46H90.48a38,38,0,0,0,75,0H186Zm55.8-132-19.28,36.8a2.42,2.42,0,0,1-2.18,1.21H198V50.11l42.9,23.4A1.83,1.83,0,0,1,241.79,76Z"}}]})(e)}function U3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M92,140a12,12,0,1,1,12-12A12,12,0,0,1,92,140Zm72-24a12,12,0,1,0,12,12A12,12,0,0,0,164,116Zm-12.27,45.23a45,45,0,0,1-47.46,0,8,8,0,0,0-8.54,13.54,61,61,0,0,0,64.54,0,8,8,0,0,0-8.54-13.54ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88.11,88.11,0,0,0-84.09-87.91C120.32,56.38,120,71.88,120,72a8,8,0,0,0,16,0,8,8,0,0,1,16,0,24,24,0,0,1-48,0c0-.73.13-14.3,8.46-30.63A88,88,0,1,0,216,128Z"}}]})(e)}function V3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M192,112H160V56a16,16,0,0,0-16-16H32a8,8,0,0,0-7.47,10.86c11.06,28.84,8.76,83.71-.22,114.93A8.25,8.25,0,0,0,24,168v32a16,16,0,0,0,16,16H66.11a16,16,0,0,0,7.16-1.69L85.89,208h16.22l12.62,6.31a16,16,0,0,0,7.16,1.69h28.22a16,16,0,0,0,7.16-1.69L169.89,208h16.22l12.62,6.31a16,16,0,0,0,7.16,1.69H232a16,16,0,0,0,16-16V168A56.06,56.06,0,0,0,192,112ZM42.86,56H144V80H112a8,8,0,0,0,0,16h32v16H112a8,8,0,0,0,0,16h80a40.07,40.07,0,0,1,39.2,32H42.25C49,129.16,50.41,85.83,42.86,56ZM232,200H205.89l-12.62-6.31a16,16,0,0,0-7.16-1.69H169.89a16,16,0,0,0-7.16,1.69L150.11,200H121.89l-12.62-6.31a16,16,0,0,0-7.16-1.69H85.89a16,16,0,0,0-7.16,1.69L66.11,200H40V176H232Z"}}]})(e)}function G3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M240,112H229.2L201.42,49.5A16,16,0,0,0,186.8,40H69.2a16,16,0,0,0-14.62,9.5L26.8,112H16a8,8,0,0,0,0,16h8v80a16,16,0,0,0,16,16H64a16,16,0,0,0,16-16V192h96v16a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V128h8a8,8,0,0,0,0-16ZM69.2,56H186.8l24.89,56H44.31ZM64,208H40V192H64Zm128,0V192h24v16Zm24-32H40V128H216ZM56,152a8,8,0,0,1,8-8H80a8,8,0,0,1,0,16H64A8,8,0,0,1,56,152Zm112,0a8,8,0,0,1,8-8h16a8,8,0,0,1,0,16H176A8,8,0,0,1,168,152Z"}}]})(e)}function q3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M80,56V24a8,8,0,0,1,16,0V56a8,8,0,0,1-16,0Zm40,8a8,8,0,0,0,8-8V24a8,8,0,0,0-16,0V56A8,8,0,0,0,120,64Zm32,0a8,8,0,0,0,8-8V24a8,8,0,0,0-16,0V56A8,8,0,0,0,152,64Zm96,56v8a40,40,0,0,1-37.51,39.91,96.59,96.59,0,0,1-27,40.09H208a8,8,0,0,1,0,16H32a8,8,0,0,1,0-16H56.54A96.3,96.3,0,0,1,24,136V88a8,8,0,0,1,8-8H208A40,40,0,0,1,248,120ZM200,96H40v40a80.27,80.27,0,0,0,45.12,72h69.76A80.27,80.27,0,0,0,200,136Zm32,24a24,24,0,0,0-16-22.62V136a95.78,95.78,0,0,1-1.2,15A24,24,0,0,0,232,128Z"}}]})(e)}function W3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm-32,80v96H136V112Zm-56,96H80V112h40Zm88,0H192V104a8,8,0,0,0-8-8H72a8,8,0,0,0-8,8V208H48V48H208V208ZM152,72a8,8,0,0,1-8,8H112a8,8,0,0,1,0-16h32A8,8,0,0,1,152,72Z"}}]})(e)}function X3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M72,88V40a8,8,0,0,1,16,0V88a8,8,0,0,1-16,0ZM216,40V224a8,8,0,0,1-16,0V176H152a8,8,0,0,1-8-8,268.75,268.75,0,0,1,7.22-56.88c9.78-40.49,28.32-67.63,53.63-78.47A8,8,0,0,1,216,40ZM200,53.9c-32.17,24.57-38.47,84.42-39.7,106.1H200ZM119.89,38.69a8,8,0,1,0-15.78,2.63L112,88.63a32,32,0,0,1-64,0l7.88-47.31a8,8,0,1,0-15.78-2.63l-8,48A8.17,8.17,0,0,0,32,88a48.07,48.07,0,0,0,40,47.32V224a8,8,0,0,0,16,0V135.32A48.07,48.07,0,0,0,128,88a8.17,8.17,0,0,0-.11-1.31Z"}}]})(e)}function Y3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,88a40,40,0,1,0,40,40A40,40,0,0,0,128,88Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,152ZM240,56H16a8,8,0,0,0-8,8V192a8,8,0,0,0,8,8H240a8,8,0,0,0,8-8V64A8,8,0,0,0,240,56ZM193.65,184H62.35A56.78,56.78,0,0,0,24,145.65v-35.3A56.78,56.78,0,0,0,62.35,72h131.3A56.78,56.78,0,0,0,232,110.35v35.3A56.78,56.78,0,0,0,193.65,184ZM232,93.37A40.81,40.81,0,0,1,210.63,72H232ZM45.37,72A40.81,40.81,0,0,1,24,93.37V72ZM24,162.63A40.81,40.81,0,0,1,45.37,184H24ZM210.63,184A40.81,40.81,0,0,1,232,162.63V184Z"}}]})(e)}function nE(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M152,80a32,32,0,1,0-32-32A32,32,0,0,0,152,80Zm0-48a16,16,0,1,1-16,16A16,16,0,0,1,152,32Zm64,112a8,8,0,0,1-8,8c-35.31,0-52.95-17.81-67.12-32.12-2.74-2.77-5.36-5.4-8-7.84l-13.43,30.88,37.2,26.57A8,8,0,0,1,160,176v56a8,8,0,0,1-16,0V180.12l-31.07-22.2L79.34,235.19A8,8,0,0,1,72,240a7.84,7.84,0,0,1-3.19-.67,8,8,0,0,1-4.15-10.52l54.08-124.37c-9.31-1.65-20.92,1.2-34.7,8.58a163.88,163.88,0,0,0-30.57,21.77,8,8,0,0,1-10.95-11.66c2.5-2.35,61.69-57.23,98.72-25.08,3.83,3.32,7.48,7,11,10.57C166.19,122.7,179.36,136,208,136A8,8,0,0,1,216,144Z"}}]})(e)}function H3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M222.14,58.87A8,8,0,0,0,216,56H54.68L49.79,29.14A16,16,0,0,0,34.05,16H16a8,8,0,0,0,0,16h18L59.56,172.29a24,24,0,0,0,5.33,11.27,28,28,0,1,0,44.4,8.44h45.42A27.75,27.75,0,0,0,152,204a28,28,0,1,0,28-28H83.17a8,8,0,0,1-7.87-6.57L72.13,152h116a24,24,0,0,0,23.61-19.71l12.16-66.86A8,8,0,0,0,222.14,58.87ZM96,204a12,12,0,1,1-12-12A12,12,0,0,1,96,204Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,192,204Zm4-74.57A8,8,0,0,1,188.1,136H69.22L57.59,72H206.41Z"}}]})(e)}function Z3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M212,152a12,12,0,1,1-12-12A12,12,0,0,1,212,152Zm-4.55,39.29A48.08,48.08,0,0,1,160,232H136a48.05,48.05,0,0,1-48-48V143.49A64,64,0,0,1,32,80V40A16,16,0,0,1,48,24H64a8,8,0,0,1,0,16H48V80a48,48,0,0,0,48.64,48c26.11-.34,47.36-22.25,47.36-48.83V40H128a8,8,0,0,1,0-16h16a16,16,0,0,1,16,16V79.17c0,32.84-24.53,60.29-56,64.31V184a32,32,0,0,0,32,32h24a32.06,32.06,0,0,0,31.22-25,40,40,0,1,1,16.23.27ZM224,152a24,24,0,1,0-24,24A24,24,0,0,0,224,152Z"}}]})(e)}function K3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M120,64a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h16A8,8,0,0,1,120,64Zm52.32,133.14,3.52,24.6A16,16,0,0,1,160,240H96a16,16,0,0,1-15.84-18.26l3.52-24.6A96.09,96.09,0,0,1,32,112a8,8,0,0,1,8-8H56V40A16,16,0,0,1,72,24H184a16,16,0,0,1,16,16v64h16a8,8,0,0,1,8,8A96.09,96.09,0,0,1,172.32,197.14ZM72,104H184V40H72Zm85.07,99.5a96.15,96.15,0,0,1-58.14,0L96,224h64ZM207.6,120H48.4a80,80,0,0,0,159.2,0Z"}}]})(e)}function J3e(e){return jo({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M255.59,189.47a8,8,0,0,0-10.12-5.06l-17.42,5.81-28.9-57.8A8,8,0,0,0,192,128H112V104h56a8,8,0,0,0,0-16H112V79a32,32,0,1,0-16,0V89.81A72,72,0,0,0,112,232c33.52,0,63.69-22.71,71.75-54a8,8,0,1,0-15.5-4C162.09,198,137.91,216,112,216A56,56,0,0,1,96,106.34V136a8,8,0,0,0,8,8h83.05l29.79,59.58a8,8,0,0,0,9.69,4l24-8A8,8,0,0,0,255.59,189.47ZM88,48a16,16,0,1,1,16,16A16,16,0,0,1,88,48Z"}}]})(e)}const Q3e=[{title:"Cafs",icon:q3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:c693d414-4613-4c6c-95da-771e52759873",type:"list"},{title:"Clothing",icon:j3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:d111c5e4-1a63-48b3-94de-5fa7b309daaf",type:"list"},{title:"Groceries",icon:H3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:da5435e2-9179-4ca6-86e4-652b7e8d109b",type:"list"},{title:"Restaurants",icon:X3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:c96e80d7-6683-4ca0-bc64-b6ed3fc824e2",type:"list"},{title:"Shoes",icon:V3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:f62dd757-4057-4015-97a0-c66d8934f7d8",type:"list"},{title:"Toilet",icon:K3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:e762ea14-70e2-49b7-9938-f6870f9ab18f",type:"closest"},{title:"Accessible toilet",icon:J3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:61042c8a-87a3-40e4-afa8-3a2c3c09fbf8",type:"closest"},{title:"Baby changing",icon:U3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:62c605cc-75c0-449a-987c-3bdfef2c1642",type:"closest"},{title:"Emergency care",icon:Z3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:57ef933b-ff2e-4db1-bc99-d21f2053abb2",type:"closest"},{title:"ATM",icon:Y3e,id:"44010f6f-9963-4433-ad86-40b89b829c41:2cd016a5-8703-417c-af07-d49aef074ad3",type:"closest"}],dZ=[{name:"kiosk1",latitude:25.33766469,longitude:51.4814541,level:0,pitch:0,bearing:179.2,zoom:18,bounds:[[51.478472777,25.336273415],[51.482695283,25.338782543]]},{name:"kiosk2",latitude:25.33687709,longitude:51.4814541,level:2,pitch:0,bearing:-91.2,zoom:17,bounds:[[51.479646637,25.335341258],[51.482528207,25.339278794]]},{name:"entrance",poiId:"44010f6f-9963-4433-ad86-40b89b829c41:9b8fea62-ef62-4598-8e8e-deaaaf359f47"}],wj={appInitiated:!1,map:{},kioskMode:!1,currentLang:"en",places:[],currentPlace:{},floors:[],currentFloor:{},routeStart:{},routeFinish:{},features:[],amenities:[],accessibleRoute:!1,filterItems:Q3e,activeFilter:{},showCustomRoutePicker:!1,haveRouteDetails:!1,routeDetails:{},currentStep:0,activeKiosk:{},kiosks:dZ},eFe="da2152c9-48bc-437d-a19d-ceb6a3a0f02a",Ej=(e,t,r)=>(e.properties&&(e.properties._dynamic||(e.properties._dynamic={}),e.geometry.type||(e.geometry.type="Point"),e.properties.title=e.properties.title_i18n&&e.properties.title_i18n[r]?e.properties.title_i18n[r]:e.properties.title,e.properties._dynamic.floor=e.properties.floor_id?t.find(n=>n.id===e.properties.floor_id):null,e.properties._dynamic.floorName=e.properties._dynamic.floor?fA({floor:e.properties._dynamic.floor,language:r}):null),e),Ct=gke()((e,t)=>({...wj,setAppInitiated:r=>{e(()=>({appInitiated:r}))},setMap:r=>{e(()=>({map:r}))},setKioskMode:r=>{e(()=>({kioskMode:r}))},setCurrentLang:r=>{e(()=>({currentLang:r}))},setPlaces:r=>{e(()=>({places:r}))},setCurrentPlace:r=>{e(()=>({currentPlace:r}))},setFloors:r=>{e(()=>({floors:r}))},setCurrentFloor:r=>{e(()=>({currentFloor:r}))},setRouteStart:r=>{e(()=>(r=Ej(r,t().floors,t().currentLang),{routeStart:r}))},setRouteFinish:r=>{e(()=>(r=Ej(r,t().floors,t().currentLang),{routeFinish:r}))},setFeatures:r=>{e(()=>({features:r}))},setAmenities:r=>{e(()=>({amenities:r}))},setAccessibleRoute:r=>{e(()=>({accessibleRoute:r}))},setActiveFilter:r=>{e(()=>({activeFilter:r}))},setShowCustomRoutePicker:r=>{e(()=>({showCustomRoutePicker:r}))},setHaveRouteDetails:r=>{e(()=>({haveRouteDetails:r}))},setRouteDetails:r=>{e(()=>({routeDetails:r}))},setCurrentStep:r=>{e(()=>({currentStep:r}))},setActiveKiosk:r=>{e(()=>({activeKiosk:r}))},getSortedPOIs:()=>t().features.filter(n=>(n.properties.usecase==="poi"||n.properties.type==="poi")&&n.properties.type!=="escalator"&&n.properties.type!=="elevator"&&n.properties.type!=="staircase"&&n.properties.place_id===eFe).sort((n,i)=>n.properties.title>i.properties.title?-1:1).sort((n,i)=>n.properties.level>i.properties.level?1:-1).map(n=>{var s,a;const i=JH.isPointWithinRadius({lat:n.geometry.coordinates[1],lng:n.geometry.coordinates[0]},{lat:t().currentPlace.location.lat,lng:t().currentPlace.location.lng},1e4),o=t().floors.find(d=>d.id===n.properties.floor_id);return n.properties.title=(s=n.properties)!=null&&s.title_i18n?n.properties.title_i18n[t().currentLang]?n.properties.title_i18n[t().currentLang]:(a=n.properties.title_i18n)==null?void 0:a.en:n.properties.title,{...n,icon:t().amenities.filter(d=>d.id===n.properties.amenity)[0]?t().amenities.filter(d=>d.id===n.properties.amenity)[0].icon:"",category:t().amenities.filter(d=>d.id===n.properties.amenity)[0]?t().amenities.filter(d=>d.id===n.properties.amenity)[0].title:"",search_query:n.properties.title+" "+n.properties.level,coordinates:n.geometry.coordinates,isInside:i,score:0,foundInDescription:!1,floor:o,floorName:o?fA({floor:o,language:t().currentLang}):""}}).filter(n=>n.isInside),reset:()=>{e(wj)}}));function tFe(){const e=Ct(n=>n.map),t=Ct(n=>n.accessibleRoute);return[ne.useCallback(({start:n,finish:i,type:o})=>{const a={...{avoidElevators:!0,avoidEscalators:!1,avoidStaircases:!1,avoidRamps:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1,avoidHills:!1},avoidElevators:!t,avoidRamps:!t,avoidEscalators:!!t,avoidStaircases:!!t,avoidBarriers:!!t,avoidNarrowPaths:!!t,avoidRevolvingDoors:!!t,avoidTicketGates:!!t};if(o==="closest"){e.findRouteToNearestFeature(i,n,t,a);return}e.findRouteByIds(i,n,t,a)},[t,e])]}function rFe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}const{useRef:nFe}=Tr;function iFe(e){const t=nFe();return r=>{const n=e(r);return rFe(t.current,n)?t.current:t.current=n}}function oFe(){const e=ne.useRef(!1),[t]=tFe(),r="19",n="40",i="12",o="da2152c9-48bc-437d-a19d-ceb6a3a0f02a",s={coordinates:[+"51.48091652702158",+"25.336680584406395"],level:+"0"},a={top:250,bottom:250,left:500,right:250},d=Ct(G=>G.kioskMode),f=Ct(G=>G.currentLang),g=Ct(G=>G.filterItems),_=Ct(G=>G.map),b=Ct(G=>G.routeFinish),P=Ct(G=>G.routeStart),L=Ct(G=>G.activeFilter),R=Ct(G=>G.activeKiosk),$=Ct(G=>G.features),F=Ct(G=>G.places),T=Ct(G=>G.currentPlace),x=Ct(iFe(G=>G.setMap)),N=Ct(G=>G.setPlaces),B=Ct(G=>G.setCurrentPlace),H=Ct(G=>G.setFloors),Z=Ct(G=>G.setCurrentFloor),Y=Ct(G=>G.setFeatures),W=Ct(G=>G.setAmenities),Q=Ct(G=>G.setRouteStart),me=Ct(G=>G.setRouteFinish),ge=Ct(G=>G.setHaveRouteDetails),be=Ct(G=>G.setRouteDetails),oe=Ct(G=>G.setCurrentStep),Ie=Ct(G=>G.setActiveFilter),fe=Ct(G=>G.setShowCustomRoutePicker);return ne.useEffect(()=>{if(P!=null&&P.id){if(b!=null&&b.id){t({finish:b.id,start:P.id==="kiosk"?void 0:P.id}),oe(0);return}}else Object.keys(_).length>0&&_.cancelRoute()},[_,P,b,t,oe]),ne.useEffect(()=>{b!=null&&b.id?(_.getMapboxInstance().flyTo({center:b.geometry.coordinates,zoom:19}),_.setFloorByLevel(b.properties.level),_.handlePolygonSelection(b),Ie({}),fe(!1)):Object.keys(_).length>0&&(_.cancelRoute(),_.handlePolygonSelection())},[_,b,Ie,fe]),ne.useEffect(()=>{L!=null&&L.id?_.setAmenityFilter(L.id,L.type):Object.keys(_).length>0&&_.resetAmenityFilters()},[_,L]),ne.useEffect(()=>{const G=new URLSearchParams(window.location.search),K=G.get("startFeature"),re=G.get("destinationFeature"),ie=G.get("defaultPlace"),he=K?$.find(Le=>Le.id===K||Le.properties.id===K||Le.properties.title===K):void 0;he&&Q(he);const ae=re?$.find(Le=>Le.id===re||Le.properties.id===re||Le.properties.title===re):void 0;ae&&me(ae);const Te=ie?F.find(Le=>Le.id===ie||Le.name===ie):void 0;Te&&_.setPlace(Te.id)},[$,me,Q,F,T,_]),ne.useEffect(()=>{e.current||(e.current=!0,V8.Auth.loginWithToken("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImlzcyI6IjQ0MDEwZjZmLTk5NjMtNDQzMy1hZDg2LTQwYjg5YjgyOWM0MSIsInR5cGUiOiJ1c2VyIiwidXNlciI6IkRlbW8gV2F5ZmluZGluZyIsInVzZXJfaWQiOiI1ZTBkNDVlMy0wMjVmLTRiMzItYmUwNy0wYzk0MjUxYmQ1NzMiLCJ0ZW5hbnRfaWQiOiI0NDAxMGY2Zi05OTYzLTQ0MzMtYWQ4Ni00MGI4OWI4MjljNDEifQ.reaAdK4uUqvGcDghQTmXtbsHR4mX9Hcinwwg4_uqwfQ").then(()=>{const G=new V8.Map({mapboxOptions:{zoom:r,pitch:d&&(R!=null&&R.pitch)?R.pitch:n,bearing:d&&(R!=null&&R.bearing)?R.bearing:i},defaultPlaceId:o,isKiosk:d,kioskSettings:{coordinates:d&&(R!=null&&R.longitude)&&(R!=null&&R.latitude)?[R.longitude,R.latitude]:s.coordinates,level:d&&(R!=null&&R.level)?R.level:s.level},fitBoundsPadding:a,handleUrlParams:!0,language:f,showLevelDirectionIcon:!0,initPolygons:!0,routeAnimation:{enabled:!0,type:"point"},blockFeatureClickWhileRouting:!0});G.getMapReadyListener().subscribe(K=>{const re=G.getMapState();if(G.getMapboxInstance().addControl(new Ioe.NavigationControl({showZoom:!1})),x(G),N(re.places),B(re.place),H(re.floors),Z(re.floor),Y(re.allFeatures.features),W(re.amenities),G.setAmenitiesCategory("list",g.filter(ie=>ie.type==="list").map(ie=>ie.id).flat(2)),G.setAmenitiesCategory("closest",g.filter(ie=>ie.type==="closest").map(ie=>ie.id).flat(2)),d){const ie=re.allFeatures.features.find(he=>he.id===(R==null?void 0:R.poiId));R!=null&&R.bounds&&G.getMapboxInstance().setMaxBounds(R.bounds),R!=null&&R.zoom&&G.getMapboxInstance().setZoom(R.zoom),ie&&R&&(R.longitude=ie.geometry.coordinates[0],R.latitude=ie.geometry.coordinates[1],R.level=ie.properties.level,R.longitude&&R.latitude&&typeof R.level<"u"&&G.setKiosk(R.latitude,R.longitude,R.level))}}),G.getPolygonClickListener().subscribe(K=>{me(K)}),G.getPlaceSelectListener().subscribe(K=>{B(K)}),G.getFloorSelectListener().subscribe(K=>{Z(K)}),G.getRouteFoundListener().subscribe(K=>{K.details&&K.TBTNav&&(ge(!0),be(K))}),G.getNavStepSetListener().subscribe(K=>{oe(K)})}))}),Qe.jsx(Qe.Fragment,{children:Qe.jsx("div",{id:"proximiioMap",className:"w-screen h-screen"})})}function jr(){return jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jr.apply(this,arguments)}function aFe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function pZ(...e){return t=>e.forEach(r=>aFe(r,t))}function oc(...e){return ne.useCallback(pZ(...e),e)}const Op=ne.forwardRef((e,t)=>{const{children:r,...n}=e,i=ne.Children.toArray(r),o=i.find(uFe);if(o){const s=o.props.children,a=i.map(d=>d===o?ne.Children.count(s)>1?ne.Children.only(null):ne.isValidElement(s)?s.props.children:null:d);return ne.createElement(iL,jr({},n,{ref:t}),ne.isValidElement(s)?ne.cloneElement(s,void 0,a):null)}return ne.createElement(iL,jr({},n,{ref:t}),r)});Op.displayName="Slot";const iL=ne.forwardRef((e,t)=>{const{children:r,...n}=e;return ne.isValidElement(r)?ne.cloneElement(r,{...lFe(n,r.props),ref:t?pZ(t,r.ref):r.ref}):ne.Children.count(r)>1?ne.Children.only(null):null});iL.displayName="SlotClone";const sFe=({children:e})=>ne.createElement(ne.Fragment,null,e);function uFe(e){return ne.isValidElement(e)&&e.type===sFe}function lFe(e,t){const r={...t};for(const n in t){const i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...a)=>{o(...a),i(...a)}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}const Sj=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,Pj=oZ,mZ=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Pj(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(f=>{const g=r==null?void 0:r[f],_=o==null?void 0:o[f];if(g===null)return null;const b=Sj(g)||Sj(_);return i[f][b]}),a=r&&Object.entries(r).reduce((f,g)=>{let[_,b]=g;return b===void 0||(f[_]=b),f},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,g)=>{let{class:_,className:b,...P}=g;return Object.entries(P).every(L=>{let[R,$]=L;return Array.isArray($)?$.includes({...o,...a}[R]):{...o,...a}[R]===$})?[...f,_,b]:f},[]);return Pj(e,s,d,r==null?void 0:r.class,r==null?void 0:r.className)},cFe=mZ("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:border-primary hover:text-primary",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",dark:"text-white bg-black"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-16 w-16 text-2xl"}},defaultVariants:{variant:"default",size:"default"}}),uf=ne.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},o)=>{const s=n?Op:"button";return Qe.jsx(s,{className:ii(cFe({variant:t,size:r,className:e})),ref:o,...i})});uf.displayName="Button";function fFe(){const e=Ct(s=>s.map),t=Ct(s=>s.floors),r=Ct(s=>s.currentFloor),n=Ct(s=>s.currentLang),i=s=>{Object.keys(e).length>0&&e.setFloorById(s.id)},o=t.map(s=>Qe.jsx(uf,{variant:(r==null?void 0:r.id)===s.id?"dark":"default",onClick:()=>i(s),children:fA({floor:s,language:n})},s.id));return Qe.jsx("div",{className:"absolute z-10 flex items-center justify-center gap-1 left-[calc(50%-140px)] top-20 w-[280px] lg:top-5",children:o})}function hFe(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]=`react-i18next:: ${t[0]}`)}}const Aj={};function oL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&Aj[t[0]]||(typeof t[0]=="string"&&(Aj[t[0]]=new Date),hFe(...t))}const gZ=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}};function Cj(e,t,r){e.loadNamespaces(t,gZ(e,r))}function Ij(e,t,r,n){typeof r=="string"&&(r=[r]),r.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,gZ(e,n))}function dFe(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=t.languages[0],i=t.options?t.options.fallbackLng:!1,o=t.languages[t.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const s=(a,d)=>{const f=t.services.backendConnector.state[`${a}|${d}`];return f===-1||f===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||s(n,e)&&(!i||s(o,e)))}function pFe(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(oL("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(i,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,e))return!1}}):dFe(e,t,r)}const mFe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,gFe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},vFe=e=>gFe[e],yFe=e=>e.replace(mFe,vFe);let aL={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:yFe};function _Fe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};aL={...aL,...e}}function bFe(){return aL}let vZ;function xFe(e){vZ=e}function wFe(){return vZ}const EFe={type:"3rdParty",init(e){_Fe(e.options.react),xFe(e)}},SFe=ne.createContext();class PFe{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const AFe=(e,t)=>{const r=ne.useRef();return ne.useEffect(()=>{r.current=t?r.current:e},[e,t]),r.current};function CFe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:r}=t,{i18n:n,defaultNS:i}=ne.useContext(SFe)||{},o=r||n||wFe();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new PFe),!o){oL("You will need to pass in an i18next instance by using initReactI18next");const x=(B,H)=>typeof H=="string"?H:H&&typeof H=="object"&&typeof H.defaultValue=="string"?H.defaultValue:Array.isArray(B)?B[B.length-1]:B,N=[x,{},!1];return N.t=x,N.i18n={},N.ready=!1,N}o.options.react&&o.options.react.wait!==void 0&&oL("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...bFe(),...o.options.react,...t},{useSuspense:a,keyPrefix:d}=s;let f=e||i||o.options&&o.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(f);const g=(o.isInitialized||o.initializedStoreOnce)&&f.every(x=>pFe(x,o,s));function _(){return o.getFixedT(t.lng||null,s.nsMode==="fallback"?f:f[0],d)}const[b,P]=ne.useState(_);let L=f.join();t.lng&&(L=`${t.lng}${L}`);const R=AFe(L),$=ne.useRef(!0);ne.useEffect(()=>{const{bindI18n:x,bindI18nStore:N}=s;$.current=!0,!g&&!a&&(t.lng?Ij(o,t.lng,f,()=>{$.current&&P(_)}):Cj(o,f,()=>{$.current&&P(_)})),g&&R&&R!==L&&$.current&&P(_);function B(){$.current&&P(_)}return x&&o&&o.on(x,B),N&&o&&o.store.on(N,B),()=>{$.current=!1,x&&o&&x.split(" ").forEach(H=>o.off(H,B)),N&&o&&N.split(" ").forEach(H=>o.store.off(H,B))}},[o,L]);const F=ne.useRef(!0);ne.useEffect(()=>{$.current&&!F.current&&P(_),F.current=!1},[o,d]);const T=[b,o,g];if(T.t=b,T.i18n=o,T.ready=g,g||!g&&!a)return T;throw new Promise(x=>{t.lng?Ij(o,t.lng,f,()=>x()):Cj(o,f,()=>x())})}function IFe(){const e=Ct(d=>d.map),t=Ct(d=>d.setRouteStart),r=Ct(d=>d.setRouteFinish),n=Ct(d=>d.setActiveFilter),i=Ct(d=>d.setShowCustomRoutePicker),o=Ct(d=>d.setHaveRouteDetails),s=ne.useCallback(()=>{Object.keys(e).length>0&&(t({}),r({}),n({}),i(!1),o(!1),e.refetch())},[e,t,r,n,i,o]);return[ne.useCallback(()=>{let d;const f=()=>{clearTimeout(d),d=setTimeout(s,6e4)};window.onload=f,window.onmousemove=f,window.onmousedown=f,window.ontouchstart=f,window.ontouchmove=f,window.onclick=f,window.onkeydown=f,window.addEventListener("scroll",f,!0)},[s])]}function Sg(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function OFe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function yZ(...e){return t=>e.forEach(r=>OFe(r,t))}function k1(...e){return ne.useCallback(yZ(...e),e)}function TFe(e,t=[]){let r=[];function n(o,s){const a=ne.createContext(s),d=r.length;r=[...r,s];function f(_){const{scope:b,children:P,...L}=_,R=(b==null?void 0:b[e][d])||a,$=ne.useMemo(()=>L,Object.values(L));return ne.createElement(R.Provider,{value:$},P)}function g(_,b){const P=(b==null?void 0:b[e][d])||a,L=ne.useContext(P);if(L)return L;if(s!==void 0)return s;throw new Error(`\`${_}\` must be used within \`${o}\``)}return f.displayName=o+"Provider",[f,g]}const i=()=>{const o=r.map(s=>ne.createContext(s));return function(a){const d=(a==null?void 0:a[e])||o;return ne.useMemo(()=>({[`__scope${e}`]:{...a,[e]:d}}),[a,d])}};return i.scopeName=e,[n,MFe(i,...t)]}function MFe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=n.reduce((a,{useScope:d,scopeName:f})=>{const _=d(o)[`__scope${f}`];return{...a,..._}},{});return ne.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}const sL=globalThis!=null&&globalThis.document?ne.useLayoutEffect:()=>{},LFe=XV["useId".toString()]||(()=>{});let RFe=0;function IO(e){const[t,r]=ne.useState(LFe());return sL(()=>{e||r(n=>n??String(RFe++))},[e]),e||(t?`radix-${t}`:"")}function Tp(e){const t=ne.useRef(e);return ne.useEffect(()=>{t.current=e}),ne.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function kFe({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,i]=DFe({defaultProp:t,onChange:r}),o=e!==void 0,s=o?e:n,a=Tp(r),d=ne.useCallback(f=>{if(o){const _=typeof f=="function"?f(e):f;_!==e&&a(_)}else i(f)},[o,e,i,a]);return[s,d]}function DFe({defaultProp:e,onChange:t}){const r=ne.useState(e),[n]=r,i=ne.useRef(n),o=Tp(t);return ne.useEffect(()=>{i.current!==n&&(o(n),i.current=n)},[n,i,o]),r}const t3=ne.forwardRef((e,t)=>{const{children:r,...n}=e,i=ne.Children.toArray(r),o=i.find(FFe);if(o){const s=o.props.children,a=i.map(d=>d===o?ne.Children.count(s)>1?ne.Children.only(null):ne.isValidElement(s)?s.props.children:null:d);return ne.createElement(uL,jr({},n,{ref:t}),ne.isValidElement(s)?ne.cloneElement(s,void 0,a):null)}return ne.createElement(uL,jr({},n,{ref:t}),r)});t3.displayName="Slot";const uL=ne.forwardRef((e,t)=>{const{children:r,...n}=e;return ne.isValidElement(r)?ne.cloneElement(r,{...$Fe(n,r.props),ref:yZ(t,r.ref)}):ne.Children.count(r)>1?ne.Children.only(null):null});uL.displayName="SlotClone";const NFe=({children:e})=>ne.createElement(ne.Fragment,null,e);function FFe(e){return ne.isValidElement(e)&&e.type===NFe}function $Fe(e,t){const r={...t};for(const n in t){const i=e[n],o=t[n];/^on[A-Z]/.test(n)?r[n]=(...a)=>{o==null||o(...a),i==null||i(...a)}:n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}const zFe=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],hA=zFe.reduce((e,t)=>{const r=ne.forwardRef((n,i)=>{const{asChild:o,...s}=n,a=o?t3:t;return ne.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),ne.createElement(a,jr({},s,{ref:i}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function BFe(e,t){e&&Dp.flushSync(()=>e.dispatchEvent(t))}function jFe(e){const t=Tp(e);ne.useEffect(()=>{const r=n=>{n.key==="Escape"&&t(n)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t])}const lL="dismissableLayer.update",UFe="dismissableLayer.pointerDownOutside",VFe="dismissableLayer.focusOutside";let Oj;const GFe=ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qFe=ne.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...d}=e,f=ne.useContext(GFe),[g,_]=ne.useState(null),[,b]=ne.useState({}),P=k1(t,H=>_(H)),L=Array.from(f.layers),[R]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),$=L.indexOf(R),F=g?L.indexOf(g):-1,T=f.layersWithOutsidePointerEventsDisabled.size>0,x=F>=$,N=WFe(H=>{const Z=H.target,Y=[...f.branches].some(W=>W.contains(Z));!x||Y||(i==null||i(H),s==null||s(H),H.defaultPrevented||a==null||a())}),B=XFe(H=>{const Z=H.target;[...f.branches].some(W=>W.contains(Z))||(o==null||o(H),s==null||s(H),H.defaultPrevented||a==null||a())});return jFe(H=>{F===f.layers.size-1&&(n==null||n(H),!H.defaultPrevented&&a&&(H.preventDefault(),a()))}),ne.useEffect(()=>{if(g)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Oj=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),Tj(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=Oj)}},[g,r,f]),ne.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),Tj())},[g,f]),ne.useEffect(()=>{const H=()=>b({});return document.addEventListener(lL,H),()=>document.removeEventListener(lL,H)},[]),ne.createElement(hA.div,jr({},d,{ref:P,style:{pointerEvents:T?x?"auto":"none":void 0,...e.style},onFocusCapture:Sg(e.onFocusCapture,B.onFocusCapture),onBlurCapture:Sg(e.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Sg(e.onPointerDownCapture,N.onPointerDownCapture)}))});function WFe(e){const t=Tp(e),r=ne.useRef(!1),n=ne.useRef(()=>{});return ne.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let f=function(){_Z(UFe,t,d,{discrete:!0})};var a=f;const d={originalEvent:s};s.pointerType==="touch"?(document.removeEventListener("click",n.current),n.current=f,document.addEventListener("click",n.current,{once:!0})):f()}r.current=!1},o=window.setTimeout(()=>{document.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),document.removeEventListener("pointerdown",i),document.removeEventListener("click",n.current)}},[t]),{onPointerDownCapture:()=>r.current=!0}}function XFe(e){const t=Tp(e),r=ne.useRef(!1);return ne.useEffect(()=>{const n=i=>{i.target&&!r.current&&_Z(VFe,t,{originalEvent:i},{discrete:!1})};return document.addEventListener("focusin",n),()=>document.removeEventListener("focusin",n)},[t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Tj(){const e=new CustomEvent(lL);document.dispatchEvent(e)}function _Z(e,t,r,{discrete:n}){const i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?BFe(i,o):i.dispatchEvent(o)}const OO="focusScope.autoFocusOnMount",TO="focusScope.autoFocusOnUnmount",Mj={bubbles:!1,cancelable:!0},YFe=ne.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,d]=ne.useState(null),f=Tp(i),g=Tp(o),_=ne.useRef(null),b=k1(t,R=>d(R)),P=ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ne.useEffect(()=>{if(n){let F=function(x){if(P.paused||!a)return;const N=x.target;a.contains(N)?_.current=N:Wd(_.current,{select:!0})},T=function(x){P.paused||!a||a.contains(x.relatedTarget)||Wd(_.current,{select:!0})};var R=F,$=T;return document.addEventListener("focusin",F),document.addEventListener("focusout",T),()=>{document.removeEventListener("focusin",F),document.removeEventListener("focusout",T)}}},[n,a,P.paused]),ne.useEffect(()=>{if(a){Rj.add(P);const R=document.activeElement;if(!a.contains(R)){const F=new CustomEvent(OO,Mj);a.addEventListener(OO,f),a.dispatchEvent(F),F.defaultPrevented||(HFe(e4e(bZ(a)),{select:!0}),document.activeElement===R&&Wd(a))}return()=>{a.removeEventListener(OO,f),setTimeout(()=>{const F=new CustomEvent(TO,Mj);a.addEventListener(TO,g),a.dispatchEvent(F),F.defaultPrevented||Wd(R??document.body,{select:!0}),a.removeEventListener(TO,g),Rj.remove(P)},0)}}},[a,f,g,P]);const L=ne.useCallback(R=>{if(!r&&!n||P.paused)return;const $=R.key==="Tab"&&!R.altKey&&!R.ctrlKey&&!R.metaKey,F=document.activeElement;if($&&F){const T=R.currentTarget,[x,N]=ZFe(T);x&&N?!R.shiftKey&&F===N?(R.preventDefault(),r&&Wd(x,{select:!0})):R.shiftKey&&F===x&&(R.preventDefault(),r&&Wd(N,{select:!0})):F===T&&R.preventDefault()}},[r,n,P.paused]);return ne.createElement(hA.div,jr({tabIndex:-1},s,{ref:b,onKeyDown:L}))});function HFe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Wd(n,{select:t}),document.activeElement!==r)return}function ZFe(e){const t=bZ(e),r=Lj(t,e),n=Lj(t.reverse(),e);return[r,n]}function bZ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Lj(e,t){for(const r of e)if(!KFe(r,{upTo:t}))return r}function KFe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function JFe(e){return e instanceof HTMLInputElement&&"select"in e}function Wd(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&JFe(e)&&t&&e.select()}}const Rj=QFe();function QFe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=kj(e,t),e.unshift(t)},remove(t){var r;e=kj(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function kj(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function e4e(e){return e.filter(t=>t.tagName!=="A")}const t4e=ne.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...i}=e;return n?J7.createPortal(ne.createElement(hA.div,jr({},i,{ref:t})),n):null});function r4e(e,t){return ne.useReducer((r,n)=>{const i=t[r][n];return i??r},e)}const dA=e=>{const{present:t,children:r}=e,n=n4e(t),i=typeof r=="function"?r({present:n.isPresent}):ne.Children.only(r),o=k1(n.ref,i.ref);return typeof r=="function"||n.isPresent?ne.cloneElement(i,{ref:o}):null};dA.displayName="Presence";function n4e(e){const[t,r]=ne.useState(),n=ne.useRef({}),i=ne.useRef(e),o=ne.useRef("none"),s=e?"mounted":"unmounted",[a,d]=r4e(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ne.useEffect(()=>{const f=sx(n.current);o.current=a==="mounted"?f:"none"},[a]),sL(()=>{const f=n.current,g=i.current;if(g!==e){const b=o.current,P=sx(f);e?d("MOUNT"):P==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(g&&b!==P?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),sL(()=>{if(t){const f=_=>{const P=sx(n.current).includes(_.animationName);_.target===t&&P&&Dp.flushSync(()=>d("ANIMATION_END"))},g=_=>{_.target===t&&(o.current=sx(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:ne.useCallback(f=>{f&&(n.current=getComputedStyle(f)),r(f)},[])}}function sx(e){return(e==null?void 0:e.animationName)||"none"}let MO=0;function i4e(){ne.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:Dj()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:Dj()),MO++,()=>{MO===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),MO--}},[])}function Dj(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var tu=function(){return tu=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},tu.apply(this,arguments)};function r3(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function xZ(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var d0="right-scroll-bar-position",p0="width-before-scroll-bar",o4e="with-scroll-bars-hidden",a4e="--removed-body-scroll-bar-size";function s4e(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function u4e(e,t){var r=ne.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}function wZ(e,t){return u4e(t||null,function(r){return e.forEach(function(n){return s4e(n,r)})})}function l4e(e){return e}function c4e(e,t){t===void 0&&(t=l4e);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var s=t(o,n);return r.push(s),function(){r=r.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(n=!0;r.length;){var s=r;r=[],s.forEach(o)}r={push:function(a){return o(a)},filter:function(){return r}}},assignMedium:function(o){n=!0;var s=[];if(r.length){var a=r;r=[],a.forEach(o),s=r}var d=function(){var g=s;s=[],g.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),r={push:function(g){s.push(g),f()},filter:function(g){return s=s.filter(g),r}}}};return i}function EZ(e){e===void 0&&(e={});var t=c4e(null);return t.options=tu({async:!0,ssr:!1},e),t}var SZ=function(e){var t=e.sideCar,r=r3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return ne.createElement(n,tu({},r))};SZ.isSideCarExport=!0;function PZ(e,t){return e.useMedium(t),SZ}var AZ=EZ(),LO=function(){},pA=ne.forwardRef(function(e,t){var r=ne.useRef(null),n=ne.useState({onScrollCapture:LO,onWheelCapture:LO,onTouchMoveCapture:LO}),i=n[0],o=n[1],s=e.forwardProps,a=e.children,d=e.className,f=e.removeScrollBar,g=e.enabled,_=e.shards,b=e.sideCar,P=e.noIsolation,L=e.inert,R=e.allowPinchZoom,$=e.as,F=$===void 0?"div":$,T=r3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=b,N=wZ([r,t]),B=tu(tu({},T),i);return ne.createElement(ne.Fragment,null,g&&ne.createElement(x,{sideCar:AZ,removeScrollBar:f,shards:_,noIsolation:P,inert:L,setCallbacks:o,allowPinchZoom:!!R,lockRef:r}),s?ne.cloneElement(ne.Children.only(a),tu(tu({},B),{ref:N})):ne.createElement(F,tu({},B,{className:d,ref:N}),a))});pA.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pA.classNames={fullWidth:p0,zeroRight:d0};var Nj,f4e=function(){if(Nj)return Nj;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function h4e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=f4e();return t&&e.setAttribute("nonce",t),e}function d4e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function p4e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var m4e=function(){var e=0,t=null;return{add:function(r){e==0&&(t=h4e())&&(d4e(t,r),p4e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},g4e=function(){var e=m4e();return function(t,r){ne.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},n3=function(){var e=g4e(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},v4e={left:0,top:0,right:0,gap:0},RO=function(e){return parseInt(e||"",10)||0},y4e=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[RO(r),RO(n),RO(i)]},_4e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return v4e;var t=y4e(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},b4e=n3(),x4e=function(e,t,r,n){var i=e.left,o=e.top,s=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(o4e,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(d0,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(p0,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(d0," .").concat(d0,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(p0," .").concat(p0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(a4e,": ").concat(a,`px;
  }
`)},CZ=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n,o=ne.useMemo(function(){return _4e(i)},[i]);return ne.createElement(b4e,{styles:x4e(o,!t,i,r?"":"!important")})},cL=!1;if(typeof window<"u")try{var ux=Object.defineProperty({},"passive",{get:function(){return cL=!0,!0}});window.addEventListener("test",ux,ux),window.removeEventListener("test",ux,ux)}catch{cL=!1}var Rm=cL?{passive:!1}:!1,w4e=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},E4e=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},Fj=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=IZ(e,r);if(n){var i=OZ(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},S4e=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},P4e=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},IZ=function(e,t){return e==="v"?w4e(t):E4e(t)},OZ=function(e,t){return e==="v"?S4e(t):P4e(t)},A4e=function(e,t){return e==="h"&&t==="rtl"?-1:1},C4e=function(e,t,r,n,i){var o=A4e(e,window.getComputedStyle(t).direction),s=o*n,a=r.target,d=t.contains(a),f=!1,g=s>0,_=0,b=0;do{var P=OZ(e,a),L=P[0],R=P[1],$=P[2],F=R-$-o*L;(L||F)&&IZ(e,a)&&(_+=F,b+=L),a=a.parentNode}while(!d&&a!==document.body||d&&(t.contains(a)||t===a));return(g&&(i&&_===0||!i&&s>_)||!g&&(i&&b===0||!i&&-s>b))&&(f=!0),f},lx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$j=function(e){return[e.deltaX,e.deltaY]},zj=function(e){return e&&"current"in e?e.current:e},I4e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},O4e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},T4e=0,km=[];function M4e(e){var t=ne.useRef([]),r=ne.useRef([0,0]),n=ne.useRef(),i=ne.useState(T4e++)[0],o=ne.useState(function(){return n3()})[0],s=ne.useRef(e);ne.useEffect(function(){s.current=e},[e]),ne.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var R=xZ([e.lockRef.current],(e.shards||[]).map(zj),!0).filter(Boolean);return R.forEach(function($){return $.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),R.forEach(function($){return $.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=ne.useCallback(function(R,$){if("touches"in R&&R.touches.length===2)return!s.current.allowPinchZoom;var F=lx(R),T=r.current,x="deltaX"in R?R.deltaX:T[0]-F[0],N="deltaY"in R?R.deltaY:T[1]-F[1],B,H=R.target,Z=Math.abs(x)>Math.abs(N)?"h":"v";if("touches"in R&&Z==="h"&&H.type==="range")return!1;var Y=Fj(Z,H);if(!Y)return!0;if(Y?B=Z:(B=Z==="v"?"h":"v",Y=Fj(Z,H)),!Y)return!1;if(!n.current&&"changedTouches"in R&&(x||N)&&(n.current=B),!B)return!0;var W=n.current||B;return C4e(W,$,R,W==="h"?x:N,!0)},[]),d=ne.useCallback(function(R){var $=R;if(!(!km.length||km[km.length-1]!==o)){var F="deltaY"in $?$j($):lx($),T=t.current.filter(function(B){return B.name===$.type&&B.target===$.target&&I4e(B.delta,F)})[0];if(T&&T.should){$.preventDefault();return}if(!T){var x=(s.current.shards||[]).map(zj).filter(Boolean).filter(function(B){return B.contains($.target)}),N=x.length>0?a($,x[0]):!s.current.noIsolation;N&&$.preventDefault()}}},[]),f=ne.useCallback(function(R,$,F,T){var x={name:R,delta:$,target:F,should:T};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(N){return N!==x})},1)},[]),g=ne.useCallback(function(R){r.current=lx(R),n.current=void 0},[]),_=ne.useCallback(function(R){f(R.type,$j(R),R.target,a(R,e.lockRef.current))},[]),b=ne.useCallback(function(R){f(R.type,lx(R),R.target,a(R,e.lockRef.current))},[]);ne.useEffect(function(){return km.push(o),e.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:b}),document.addEventListener("wheel",d,Rm),document.addEventListener("touchmove",d,Rm),document.addEventListener("touchstart",g,Rm),function(){km=km.filter(function(R){return R!==o}),document.removeEventListener("wheel",d,Rm),document.removeEventListener("touchmove",d,Rm),document.removeEventListener("touchstart",g,Rm)}},[]);var P=e.removeScrollBar,L=e.inert;return ne.createElement(ne.Fragment,null,L?ne.createElement(o,{styles:O4e(i)}):null,P?ne.createElement(CZ,{gapMode:"margin"}):null)}const L4e=PZ(AZ,M4e);var TZ=ne.forwardRef(function(e,t){return ne.createElement(pA,tu({},e,{ref:t,sideCar:L4e}))});TZ.classNames=pA.classNames;const R4e=TZ;var k4e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Dm=new WeakMap,cx=new WeakMap,fx={},kO=0,MZ=function(e){return e&&(e.host||MZ(e.parentNode))},D4e=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=MZ(r);return n&&e.contains(n)?n:null}).filter(function(r){return!!r})},N4e=function(e,t,r,n){var i=D4e(t,Array.isArray(e)?e:[e]);fx[r]||(fx[r]=new WeakMap);var o=fx[r],s=[],a=new Set,d=new Set(i),f=function(_){!_||a.has(_)||(a.add(_),f(_.parentNode))};i.forEach(f);var g=function(_){!_||d.has(_)||Array.prototype.forEach.call(_.children,function(b){if(a.has(b))g(b);else{var P=b.getAttribute(n),L=P!==null&&P!=="false",R=(Dm.get(b)||0)+1,$=(o.get(b)||0)+1;Dm.set(b,R),o.set(b,$),s.push(b),R===1&&L&&cx.set(b,!0),$===1&&b.setAttribute(r,"true"),L||b.setAttribute(n,"true")}})};return g(t),a.clear(),kO++,function(){s.forEach(function(_){var b=Dm.get(_)-1,P=o.get(_)-1;Dm.set(_,b),o.set(_,P),b||(cx.has(_)||_.removeAttribute(n),cx.delete(_)),P||_.removeAttribute(r)}),kO--,kO||(Dm=new WeakMap,Dm=new WeakMap,cx=new WeakMap,fx={})}},i3=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||k4e(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),N4e(n,i,r,"aria-hidden")):function(){return null}};const LZ="Dialog",[RZ,y9e]=TFe(LZ),[F4e,om]=RZ(LZ),$4e=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,a=ne.useRef(null),d=ne.useRef(null),[f=!1,g]=kFe({prop:n,defaultProp:i,onChange:o});return ne.createElement(F4e,{scope:t,triggerRef:a,contentRef:d,contentId:IO(),titleId:IO(),descriptionId:IO(),open:f,onOpenChange:g,onOpenToggle:ne.useCallback(()=>g(_=>!_),[g]),modal:s},r)},kZ="DialogPortal",[z4e,DZ]=RZ(kZ,{forceMount:void 0}),B4e=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,o=om(kZ,t);return ne.createElement(z4e,{scope:t,forceMount:r},ne.Children.map(n,s=>ne.createElement(dA,{present:r||o.open},ne.createElement(t4e,{asChild:!0,container:i},s))))},fL="DialogOverlay",j4e=ne.forwardRef((e,t)=>{const r=DZ(fL,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=om(fL,e.__scopeDialog);return o.modal?ne.createElement(dA,{present:n||o.open},ne.createElement(U4e,jr({},i,{ref:t}))):null}),U4e=ne.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=om(fL,r);return ne.createElement(R4e,{as:t3,allowPinchZoom:!0,shards:[i.contentRef]},ne.createElement(hA.div,jr({"data-state":FZ(i.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),K0="DialogContent",V4e=ne.forwardRef((e,t)=>{const r=DZ(K0,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=om(K0,e.__scopeDialog);return ne.createElement(dA,{present:n||o.open},o.modal?ne.createElement(G4e,jr({},i,{ref:t})):ne.createElement(q4e,jr({},i,{ref:t})))}),G4e=ne.forwardRef((e,t)=>{const r=om(K0,e.__scopeDialog),n=ne.useRef(null),i=k1(t,r.contentRef,n);return ne.useEffect(()=>{const o=n.current;if(o)return i3(o)},[]),ne.createElement(NZ,jr({},e,{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Sg(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=r.triggerRef.current)===null||s===void 0||s.focus()}),onPointerDownOutside:Sg(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:Sg(e.onFocusOutside,o=>o.preventDefault())}))}),q4e=ne.forwardRef((e,t)=>{const r=om(K0,e.__scopeDialog),n=ne.useRef(!1);return ne.createElement(NZ,jr({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,i),!i.defaultPrevented){var s;n.current||(s=r.triggerRef.current)===null||s===void 0||s.focus(),i.preventDefault()}n.current=!1},onInteractOutside:i=>{var o,s;(o=e.onInteractOutside)===null||o===void 0||o.call(e,i),i.defaultPrevented||(n.current=!0);const a=i.target;((s=r.triggerRef.current)===null||s===void 0?void 0:s.contains(a))&&i.preventDefault()}}))}),NZ=ne.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,a=om(K0,r),d=ne.useRef(null),f=k1(t,d);return i4e(),ne.createElement(ne.Fragment,null,ne.createElement(YFe,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o},ne.createElement(qFe,jr({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":FZ(a.open)},s,{ref:f,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function FZ(e){return e?"open":"closed"}const W4e=$4e,X4e=B4e,Y4e=j4e,H4e=V4e;var Bj=1,Z4e=.9,K4e=.3,DO=.1,J4e=0,NO=.999,Q4e=.9999,e5e=.99,jj=/[\\\/\-_+.# \t"@\[\(\{&]/,t5e=/[\\\/\-_+.# \t"@\[\(\{&]/g;function hL(e,t,r,n,i,o){if(o===t.length)return i===e.length?Bj:e5e;for(var s=n.charAt(o),a=r.indexOf(s,i),d=0,f,g,_;a>=0;)f=hL(e,t,r,n,a+1,o+1),f>d&&(a===i?f*=Bj:jj.test(e.charAt(a-1))?(f*=Z4e,_=e.slice(i,a-1).match(t5e),_&&i>0&&(f*=Math.pow(NO,_.length))):jj.test(e.slice(i,a-1))?(f*=J4e,i>0&&(f*=Math.pow(NO,a-i))):(f*=K4e,i>0&&(f*=Math.pow(NO,a-i))),e.charAt(a)!==t.charAt(o)&&(f*=Q4e)),f<DO&&r.charAt(a-1)===n.charAt(o+1)&&r.charAt(a-1)!==n.charAt(o)&&(g=hL(e,t,r,n,a+1,o+2),g*DO>f&&(f=g*DO)),f>d&&(d=f),a=r.indexOf(s,a+1);return d}function r5e(e,t){return hL(e,t,e.toLowerCase(),t.toLowerCase(),0,0)}var n5e=r5e;const i5e=bd(n5e);var o5e='[cmdk-list-sizer=""]',by='[cmdk-group=""]',FO='[cmdk-group-items=""]',a5e='[cmdk-group-heading=""]',$Z='[cmdk-item=""]',Uj=`${$Z}:not([aria-disabled="true"])`,dL="cmdk-item-select",Nh="data-value",s5e=(e,t)=>i5e(e,t),zZ=ne.createContext(void 0),D1=()=>ne.useContext(zZ),BZ=ne.createContext(void 0),o3=()=>ne.useContext(BZ),jZ=ne.createContext(void 0),UZ=ne.forwardRef((e,t)=>{let r=ne.useRef(null),n=Um(()=>({search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}})),i=Um(()=>new Set),o=Um(()=>new Map),s=Um(()=>new Map),a=Um(()=>new Set),d=VZ(e),{label:f,children:g,value:_,onValueChange:b,filter:P,shouldFilter:L,...R}=e,$=ne.useId(),F=ne.useId(),T=ne.useId(),x=y5e();Sv(()=>{if(_!==void 0){let re=_.trim().toLowerCase();n.current.value=re,x(6,Q),N.emit()}},[_]);let N=ne.useMemo(()=>({subscribe:re=>(a.current.add(re),()=>a.current.delete(re)),snapshot:()=>n.current,setState:(re,ie,he)=>{var ae,Te,Le;if(!Object.is(n.current[re],ie)){if(n.current[re]=ie,re==="search")W(),Z(),x(1,Y);else if(re==="value")if(((ae=d.current)==null?void 0:ae.value)!==void 0){(Le=(Te=d.current).onValueChange)==null||Le.call(Te,ie);return}else he||x(5,Q);N.emit()}},emit:()=>{a.current.forEach(re=>re())}}),[]),B=ne.useMemo(()=>({value:(re,ie)=>{ie!==s.current.get(re)&&(s.current.set(re,ie),n.current.filtered.items.set(re,H(ie)),x(2,()=>{Z(),N.emit()}))},item:(re,ie)=>(i.current.add(re),ie&&(o.current.has(ie)?o.current.get(ie).add(re):o.current.set(ie,new Set([re]))),x(3,()=>{W(),Z(),n.current.value||Y(),N.emit()}),()=>{s.current.delete(re),i.current.delete(re),n.current.filtered.items.delete(re),x(4,()=>{W(),Y(),N.emit()})}),group:re=>(o.current.has(re)||o.current.set(re,new Set),()=>{s.current.delete(re),o.current.delete(re)}),filter:()=>d.current.shouldFilter,label:f||e["aria-label"],listId:$,inputId:T,labelId:F}),[]);function H(re){var ie;let he=((ie=d.current)==null?void 0:ie.filter)??s5e;return re?he(re,n.current.search):0}function Z(){if(!r.current||!n.current.search||d.current.shouldFilter===!1)return;let re=n.current.filtered.items,ie=[];n.current.filtered.groups.forEach(ae=>{let Te=o.current.get(ae),Le=0;Te.forEach(Xe=>{let $e=re.get(Xe);Le=Math.max($e,Le)}),ie.push([ae,Le])});let he=r.current.querySelector(o5e);ge().sort((ae,Te)=>{let Le=ae.getAttribute(Nh),Xe=Te.getAttribute(Nh);return(re.get(Xe)??0)-(re.get(Le)??0)}).forEach(ae=>{let Te=ae.closest(FO);Te?Te.appendChild(ae.parentElement===Te?ae:ae.closest(`${FO} > *`)):he.appendChild(ae.parentElement===he?ae:ae.closest(`${FO} > *`))}),ie.sort((ae,Te)=>Te[1]-ae[1]).forEach(ae=>{let Te=r.current.querySelector(`${by}[${Nh}="${ae[0]}"]`);Te==null||Te.parentElement.appendChild(Te)})}function Y(){let re=ge().find(he=>!he.ariaDisabled),ie=re==null?void 0:re.getAttribute(Nh);N.setState("value",ie||void 0)}function W(){if(!n.current.search||d.current.shouldFilter===!1){n.current.filtered.count=i.current.size;return}n.current.filtered.groups=new Set;let re=0;for(let ie of i.current){let he=s.current.get(ie),ae=H(he);n.current.filtered.items.set(ie,ae),ae>0&&re++}for(let[ie,he]of o.current)for(let ae of he)if(n.current.filtered.items.get(ae)>0){n.current.filtered.groups.add(ie);break}n.current.filtered.count=re}function Q(){var re,ie,he;let ae=me();ae&&(((re=ae.parentElement)==null?void 0:re.firstChild)===ae&&((he=(ie=ae.closest(by))==null?void 0:ie.querySelector(a5e))==null||he.scrollIntoView({block:"nearest"})),ae.scrollIntoView({block:"nearest"}))}function me(){return r.current.querySelector(`${$Z}[aria-selected="true"]`)}function ge(){return Array.from(r.current.querySelectorAll(Uj))}function be(re){let ie=ge()[re];ie&&N.setState("value",ie.getAttribute(Nh))}function oe(re){var ie;let he=me(),ae=ge(),Te=ae.findIndex(Xe=>Xe===he),Le=ae[Te+re];(ie=d.current)!=null&&ie.loop&&(Le=Te+re<0?ae[ae.length-1]:Te+re===ae.length?ae[0]:ae[Te+re]),Le&&N.setState("value",Le.getAttribute(Nh))}function Ie(re){let ie=me(),he=ie==null?void 0:ie.closest(by),ae;for(;he&&!ae;)he=re>0?g5e(he,by):v5e(he,by),ae=he==null?void 0:he.querySelector(Uj);ae?N.setState("value",ae.getAttribute(Nh)):oe(re)}let fe=()=>be(ge().length-1),G=re=>{re.preventDefault(),re.metaKey?fe():re.altKey?Ie(1):oe(1)},K=re=>{re.preventDefault(),re.metaKey?be(0):re.altKey?Ie(-1):oe(-1)};return ne.createElement("div",{ref:N1([r,t]),...R,"cmdk-root":"",onKeyDown:re=>{var ie;if((ie=R.onKeyDown)==null||ie.call(R,re),!re.defaultPrevented)switch(re.key){case"n":case"j":{re.ctrlKey&&G(re);break}case"ArrowDown":{G(re);break}case"p":case"k":{re.ctrlKey&&K(re);break}case"ArrowUp":{K(re);break}case"Home":{re.preventDefault(),be(0);break}case"End":{re.preventDefault(),fe();break}case"Enter":{re.preventDefault();let he=me();if(he){let ae=new Event(dL);he.dispatchEvent(ae)}}}}},ne.createElement("label",{"cmdk-label":"",htmlFor:B.inputId,id:B.labelId,style:_5e},f),ne.createElement(BZ.Provider,{value:N},ne.createElement(zZ.Provider,{value:B},g)))}),u5e=ne.forwardRef((e,t)=>{let r=ne.useId(),n=ne.useRef(null),i=ne.useContext(jZ),o=D1(),s=VZ(e);Sv(()=>o.item(r,i),[]);let a=GZ(r,n,[e.value,e.children,n]),d=o3(),f=Vg(F=>F.value&&F.value===a.current),g=Vg(F=>o.filter()===!1?!0:F.search?F.filtered.items.get(r)>0:!0);ne.useEffect(()=>{let F=n.current;if(!(!F||e.disabled))return F.addEventListener(dL,_),()=>F.removeEventListener(dL,_)},[g,e.onSelect,e.disabled]);function _(){var F,T;(T=(F=s.current).onSelect)==null||T.call(F,a.current)}function b(){d.setState("value",a.current,!0)}if(!g)return null;let{disabled:P,value:L,onSelect:R,...$}=e;return ne.createElement("div",{ref:N1([n,t]),...$,"cmdk-item":"",role:"option","aria-disabled":P||void 0,"aria-selected":f||void 0,"data-selected":f||void 0,onPointerMove:P?void 0:b,onClick:P?void 0:_},e.children)}),l5e=ne.forwardRef((e,t)=>{let{heading:r,children:n,...i}=e,o=ne.useId(),s=ne.useRef(null),a=ne.useRef(null),d=ne.useId(),f=D1(),g=Vg(b=>f.filter()===!1?!0:b.search?b.filtered.groups.has(o):!0);Sv(()=>f.group(o),[]),GZ(o,s,[e.value,e.heading,a]);let _=ne.createElement(jZ.Provider,{value:o},n);return ne.createElement("div",{ref:N1([s,t]),...i,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},r&&ne.createElement("div",{ref:a,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),ne.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},_))}),c5e=ne.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,i=ne.useRef(null),o=Vg(s=>!s.search);return!r&&!o?null:ne.createElement("div",{ref:N1([i,t]),...n,"cmdk-separator":"",role:"separator"})}),f5e=ne.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,i=e.value!=null,o=o3(),s=Vg(d=>d.search),a=D1();return ne.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),ne.createElement("input",{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.listId,"aria-labelledby":a.labelId,id:a.inputId,type:"text",value:i?e.value:s,onChange:d=>{i||o.setState("search",d.target.value),r==null||r(d.target.value)}})}),h5e=ne.forwardRef((e,t)=>{let{children:r,...n}=e,i=ne.useRef(null),o=ne.useRef(null),s=D1();return ne.useEffect(()=>{if(o.current&&i.current){let a=o.current,d=i.current,f,g=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let _=a.getBoundingClientRect().height;d.style.setProperty("--cmdk-list-height",_.toFixed(1)+"px")})});return g.observe(a),()=>{cancelAnimationFrame(f),g.unobserve(a)}}},[]),ne.createElement("div",{ref:N1([i,t]),...n,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:s.listId,"aria-labelledby":s.inputId},ne.createElement("div",{ref:o,"cmdk-list-sizer":""},r))}),d5e=ne.forwardRef((e,t)=>{let{open:r,onOpenChange:n,container:i,...o}=e;return ne.createElement(W4e,{open:r,onOpenChange:n},ne.createElement(X4e,{container:i},ne.createElement(Y4e,{"cmdk-overlay":""}),ne.createElement(H4e,{"aria-label":e.label,"cmdk-dialog":""},ne.createElement(UZ,{ref:t,...o}))))}),p5e=ne.forwardRef((e,t)=>{let r=ne.useRef(!0),n=Vg(i=>i.filtered.count===0);return ne.useEffect(()=>{r.current=!1},[]),r.current||!n?null:ne.createElement("div",{ref:t,...e,"cmdk-empty":"",role:"presentation"})}),m5e=ne.forwardRef((e,t)=>{let{progress:r,children:n,...i}=e;return ne.createElement("div",{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},ne.createElement("div",{"aria-hidden":!0},n))}),Qu=Object.assign(UZ,{List:h5e,Item:u5e,Input:f5e,Group:l5e,Separator:c5e,Dialog:d5e,Empty:p5e,Loading:m5e});function g5e(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function v5e(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function VZ(e){let t=ne.useRef(e);return Sv(()=>{t.current=e}),t}var Sv=typeof window>"u"?ne.useEffect:ne.useLayoutEffect;function Um(e){let t=ne.useRef();return t.current===void 0&&(t.current=e()),t}function N1(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function Vg(e){let t=o3(),r=()=>e(t.snapshot());return ne.useSyncExternalStore(t.subscribe,r,r)}function GZ(e,t,r){let n=ne.useRef(),i=D1();return Sv(()=>{var o;let s=(()=>{var a;for(let d of r){if(typeof d=="string")return d.trim().toLowerCase();if(typeof d=="object"&&"current"in d&&d.current)return(a=d.current.textContent)==null?void 0:a.trim().toLowerCase()}})();i.value(e,s),(o=t.current)==null||o.setAttribute(Nh,s),n.current=s}),n}var y5e=()=>{let[e,t]=ne.useState(),r=Um(()=>new Map);return Sv(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,i)=>{r.current.set(n,i),t({})}},_5e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},b5e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x5e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mA=(e,t)=>{const r=ne.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:a,...d},f)=>ne.createElement("svg",{ref:f,...b5e,width:i,height:i,stroke:n,strokeWidth:s?Number(o)*24/Number(i):o,className:`lucide lucide-${x5e(e)}`,...d},[...t.map(([g,_])=>ne.createElement(g,_)),...(Array.isArray(a)?a:[a])||[]]));return r.displayName=`${e}`,r},qZ=mA("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),WZ=mA("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),w5e=mA("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),E5e=mA("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ls(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Pv(e,t=[]){let r=[];function n(o,s){const a=ne.createContext(s),d=r.length;r=[...r,s];function f(_){const{scope:b,children:P,...L}=_,R=(b==null?void 0:b[e][d])||a,$=ne.useMemo(()=>L,Object.values(L));return ne.createElement(R.Provider,{value:$},P)}function g(_,b){const P=(b==null?void 0:b[e][d])||a,L=ne.useContext(P);if(L)return L;if(s!==void 0)return s;throw new Error(`\`${_}\` must be used within \`${o}\``)}return f.displayName=o+"Provider",[f,g]}const i=()=>{const o=r.map(s=>ne.createContext(s));return function(a){const d=(a==null?void 0:a[e])||o;return ne.useMemo(()=>({[`__scope${e}`]:{...a,[e]:d}}),[a,d])}};return i.scopeName=e,[n,S5e(i,...t)]}function S5e(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=n.reduce((a,{useScope:d,scopeName:f})=>{const _=d(o)[`__scope${f}`];return{...a,..._}},{});return ne.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}const Gg=globalThis!=null&&globalThis.document?ne.useLayoutEffect:()=>{},P5e=XV["useId".toString()]||(()=>{});let A5e=0;function m0(e){const[t,r]=ne.useState(P5e());return Gg(()=>{e||r(n=>n??String(A5e++))},[e]),e||(t?`radix-${t}`:"")}function sh(e){const t=ne.useRef(e);return ne.useEffect(()=>{t.current=e}),ne.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function Av({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,i]=C5e({defaultProp:t,onChange:r}),o=e!==void 0,s=o?e:n,a=sh(r),d=ne.useCallback(f=>{if(o){const _=typeof f=="function"?f(e):f;_!==e&&a(_)}else i(f)},[o,e,i,a]);return[s,d]}function C5e({defaultProp:e,onChange:t}){const r=ne.useState(e),[n]=r,i=ne.useRef(n),o=sh(t);return ne.useEffect(()=>{i.current!==n&&(o(n),i.current=n)},[n,i,o]),r}const I5e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Au=I5e.reduce((e,t)=>{const r=ne.forwardRef((n,i)=>{const{asChild:o,...s}=n,a=o?Op:t;return ne.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),ne.createElement(a,jr({},s,{ref:i}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function O5e(e,t){e&&Dp.flushSync(()=>e.dispatchEvent(t))}function T5e(e,t=globalThis==null?void 0:globalThis.document){const r=sh(e);ne.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const pL="dismissableLayer.update",M5e="dismissableLayer.pointerDownOutside",L5e="dismissableLayer.focusOutside";let Vj;const R5e=ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),XZ=ne.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:d,...f}=e,g=ne.useContext(R5e),[_,b]=ne.useState(null),P=(r=_==null?void 0:_.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,L]=ne.useState({}),R=oc(t,Y=>b(Y)),$=Array.from(g.layers),[F]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),T=$.indexOf(F),x=_?$.indexOf(_):-1,N=g.layersWithOutsidePointerEventsDisabled.size>0,B=x>=T,H=k5e(Y=>{const W=Y.target,Q=[...g.branches].some(me=>me.contains(W));!B||Q||(o==null||o(Y),a==null||a(Y),Y.defaultPrevented||d==null||d())},P),Z=D5e(Y=>{const W=Y.target;[...g.branches].some(me=>me.contains(W))||(s==null||s(Y),a==null||a(Y),Y.defaultPrevented||d==null||d())},P);return T5e(Y=>{x===g.layers.size-1&&(i==null||i(Y),!Y.defaultPrevented&&d&&(Y.preventDefault(),d()))},P),ne.useEffect(()=>{if(_)return n&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(Vj=P.body.style.pointerEvents,P.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(_)),g.layers.add(_),Gj(),()=>{n&&g.layersWithOutsidePointerEventsDisabled.size===1&&(P.body.style.pointerEvents=Vj)}},[_,P,n,g]),ne.useEffect(()=>()=>{_&&(g.layers.delete(_),g.layersWithOutsidePointerEventsDisabled.delete(_),Gj())},[_,g]),ne.useEffect(()=>{const Y=()=>L({});return document.addEventListener(pL,Y),()=>document.removeEventListener(pL,Y)},[]),ne.createElement(Au.div,jr({},f,{ref:R,style:{pointerEvents:N?B?"auto":"none":void 0,...e.style},onFocusCapture:ls(e.onFocusCapture,Z.onFocusCapture),onBlurCapture:ls(e.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:ls(e.onPointerDownCapture,H.onPointerDownCapture)}))});function k5e(e,t=globalThis==null?void 0:globalThis.document){const r=sh(e),n=ne.useRef(!1),i=ne.useRef(()=>{});return ne.useEffect(()=>{const o=a=>{if(a.target&&!n.current){let g=function(){YZ(M5e,r,f,{discrete:!0})};var d=g;const f={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=g,t.addEventListener("click",i.current,{once:!0})):g()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function D5e(e,t=globalThis==null?void 0:globalThis.document){const r=sh(e),n=ne.useRef(!1);return ne.useEffect(()=>{const i=o=>{o.target&&!n.current&&YZ(L5e,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Gj(){const e=new CustomEvent(pL);document.dispatchEvent(e)}function YZ(e,t,r,{discrete:n}){const i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?O5e(i,o):i.dispatchEvent(o)}const $O="focusScope.autoFocusOnMount",zO="focusScope.autoFocusOnUnmount",qj={bubbles:!1,cancelable:!0},HZ=ne.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,d]=ne.useState(null),f=sh(i),g=sh(o),_=ne.useRef(null),b=oc(t,R=>d(R)),P=ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ne.useEffect(()=>{if(n){let T=function(H){if(P.paused||!a)return;const Z=H.target;a.contains(Z)?_.current=Z:Fh(_.current,{select:!0})},x=function(H){if(P.paused||!a)return;const Z=H.relatedTarget;Z!==null&&(a.contains(Z)||Fh(_.current,{select:!0}))},N=function(H){if(document.activeElement===document.body)for(const Y of H)Y.removedNodes.length>0&&Fh(a)};var R=T,$=x,F=N;document.addEventListener("focusin",T),document.addEventListener("focusout",x);const B=new MutationObserver(N);return a&&B.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",T),document.removeEventListener("focusout",x),B.disconnect()}}},[n,a,P.paused]),ne.useEffect(()=>{if(a){Xj.add(P);const R=document.activeElement;if(!a.contains(R)){const F=new CustomEvent($O,qj);a.addEventListener($O,f),a.dispatchEvent(F),F.defaultPrevented||(N5e(j5e(ZZ(a)),{select:!0}),document.activeElement===R&&Fh(a))}return()=>{a.removeEventListener($O,f),setTimeout(()=>{const F=new CustomEvent(zO,qj);a.addEventListener(zO,g),a.dispatchEvent(F),F.defaultPrevented||Fh(R??document.body,{select:!0}),a.removeEventListener(zO,g),Xj.remove(P)},0)}}},[a,f,g,P]);const L=ne.useCallback(R=>{if(!r&&!n||P.paused)return;const $=R.key==="Tab"&&!R.altKey&&!R.ctrlKey&&!R.metaKey,F=document.activeElement;if($&&F){const T=R.currentTarget,[x,N]=F5e(T);x&&N?!R.shiftKey&&F===N?(R.preventDefault(),r&&Fh(x,{select:!0})):R.shiftKey&&F===x&&(R.preventDefault(),r&&Fh(N,{select:!0})):F===T&&R.preventDefault()}},[r,n,P.paused]);return ne.createElement(Au.div,jr({tabIndex:-1},s,{ref:b,onKeyDown:L}))});function N5e(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Fh(n,{select:t}),document.activeElement!==r)return}function F5e(e){const t=ZZ(e),r=Wj(t,e),n=Wj(t.reverse(),e);return[r,n]}function ZZ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Wj(e,t){for(const r of e)if(!$5e(r,{upTo:t}))return r}function $5e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function z5e(e){return e instanceof HTMLInputElement&&"select"in e}function Fh(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&z5e(e)&&t&&e.select()}}const Xj=B5e();function B5e(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Yj(e,t),e.unshift(t)},remove(t){var r;e=Yj(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function Yj(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function j5e(e){return e.filter(t=>t.tagName!=="A")}const KZ=ne.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...i}=e;return n?J7.createPortal(ne.createElement(Au.div,jr({},i,{ref:t})),n):null});function U5e(e,t){return ne.useReducer((r,n)=>{const i=t[r][n];return i??r},e)}const Cv=e=>{const{present:t,children:r}=e,n=V5e(t),i=typeof r=="function"?r({present:n.isPresent}):ne.Children.only(r),o=oc(n.ref,i.ref);return typeof r=="function"||n.isPresent?ne.cloneElement(i,{ref:o}):null};Cv.displayName="Presence";function V5e(e){const[t,r]=ne.useState(),n=ne.useRef({}),i=ne.useRef(e),o=ne.useRef("none"),s=e?"mounted":"unmounted",[a,d]=U5e(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ne.useEffect(()=>{const f=hx(n.current);o.current=a==="mounted"?f:"none"},[a]),Gg(()=>{const f=n.current,g=i.current;if(g!==e){const b=o.current,P=hx(f);e?d("MOUNT"):P==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(g&&b!==P?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),Gg(()=>{if(t){const f=_=>{const P=hx(n.current).includes(_.animationName);_.target===t&&P&&Dp.flushSync(()=>d("ANIMATION_END"))},g=_=>{_.target===t&&(o.current=hx(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:ne.useCallback(f=>{f&&(n.current=getComputedStyle(f)),r(f)},[])}}function hx(e){return(e==null?void 0:e.animationName)||"none"}let BO=0;function JZ(){ne.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:Hj()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:Hj()),BO++,()=>{BO===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),BO--}},[])}function Hj(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var QZ=EZ(),jO=function(){},gA=ne.forwardRef(function(e,t){var r=ne.useRef(null),n=ne.useState({onScrollCapture:jO,onWheelCapture:jO,onTouchMoveCapture:jO}),i=n[0],o=n[1],s=e.forwardProps,a=e.children,d=e.className,f=e.removeScrollBar,g=e.enabled,_=e.shards,b=e.sideCar,P=e.noIsolation,L=e.inert,R=e.allowPinchZoom,$=e.as,F=$===void 0?"div":$,T=r3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=b,N=wZ([r,t]),B=tu(tu({},T),i);return ne.createElement(ne.Fragment,null,g&&ne.createElement(x,{sideCar:QZ,removeScrollBar:f,shards:_,noIsolation:P,inert:L,setCallbacks:o,allowPinchZoom:!!R,lockRef:r}),s?ne.cloneElement(ne.Children.only(a),tu(tu({},B),{ref:N})):ne.createElement(F,tu({},B,{className:d,ref:N}),a))});gA.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gA.classNames={fullWidth:p0,zeroRight:d0};var mL=!1;if(typeof window<"u")try{var dx=Object.defineProperty({},"passive",{get:function(){return mL=!0,!0}});window.addEventListener("test",dx,dx),window.removeEventListener("test",dx,dx)}catch{mL=!1}var Nm=mL?{passive:!1}:!1,G5e=function(e){return e.tagName==="TEXTAREA"},eK=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!G5e(e)&&r[t]==="visible")},q5e=function(e){return eK(e,"overflowY")},W5e=function(e){return eK(e,"overflowX")},Zj=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=tK(e,r);if(n){var i=rK(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},X5e=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Y5e=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},tK=function(e,t){return e==="v"?q5e(t):W5e(t)},rK=function(e,t){return e==="v"?X5e(t):Y5e(t)},H5e=function(e,t){return e==="h"&&t==="rtl"?-1:1},Z5e=function(e,t,r,n,i){var o=H5e(e,window.getComputedStyle(t).direction),s=o*n,a=r.target,d=t.contains(a),f=!1,g=s>0,_=0,b=0;do{var P=rK(e,a),L=P[0],R=P[1],$=P[2],F=R-$-o*L;(L||F)&&tK(e,a)&&(_+=F,b+=L),a=a.parentNode}while(!d&&a!==document.body||d&&(t.contains(a)||t===a));return(g&&(i&&_===0||!i&&s>_)||!g&&(i&&b===0||!i&&-s>b))&&(f=!0),f},px=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Kj=function(e){return[e.deltaX,e.deltaY]},Jj=function(e){return e&&"current"in e?e.current:e},K5e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},J5e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Q5e=0,Fm=[];function e6e(e){var t=ne.useRef([]),r=ne.useRef([0,0]),n=ne.useRef(),i=ne.useState(Q5e++)[0],o=ne.useState(function(){return n3()})[0],s=ne.useRef(e);ne.useEffect(function(){s.current=e},[e]),ne.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var R=xZ([e.lockRef.current],(e.shards||[]).map(Jj),!0).filter(Boolean);return R.forEach(function($){return $.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),R.forEach(function($){return $.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=ne.useCallback(function(R,$){if("touches"in R&&R.touches.length===2)return!s.current.allowPinchZoom;var F=px(R),T=r.current,x="deltaX"in R?R.deltaX:T[0]-F[0],N="deltaY"in R?R.deltaY:T[1]-F[1],B,H=R.target,Z=Math.abs(x)>Math.abs(N)?"h":"v";if("touches"in R&&Z==="h"&&H.type==="range")return!1;var Y=Zj(Z,H);if(!Y)return!0;if(Y?B=Z:(B=Z==="v"?"h":"v",Y=Zj(Z,H)),!Y)return!1;if(!n.current&&"changedTouches"in R&&(x||N)&&(n.current=B),!B)return!0;var W=n.current||B;return Z5e(W,$,R,W==="h"?x:N,!0)},[]),d=ne.useCallback(function(R){var $=R;if(!(!Fm.length||Fm[Fm.length-1]!==o)){var F="deltaY"in $?Kj($):px($),T=t.current.filter(function(B){return B.name===$.type&&B.target===$.target&&K5e(B.delta,F)})[0];if(T&&T.should){$.cancelable&&$.preventDefault();return}if(!T){var x=(s.current.shards||[]).map(Jj).filter(Boolean).filter(function(B){return B.contains($.target)}),N=x.length>0?a($,x[0]):!s.current.noIsolation;N&&$.cancelable&&$.preventDefault()}}},[]),f=ne.useCallback(function(R,$,F,T){var x={name:R,delta:$,target:F,should:T};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(N){return N!==x})},1)},[]),g=ne.useCallback(function(R){r.current=px(R),n.current=void 0},[]),_=ne.useCallback(function(R){f(R.type,Kj(R),R.target,a(R,e.lockRef.current))},[]),b=ne.useCallback(function(R){f(R.type,px(R),R.target,a(R,e.lockRef.current))},[]);ne.useEffect(function(){return Fm.push(o),e.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:b}),document.addEventListener("wheel",d,Nm),document.addEventListener("touchmove",d,Nm),document.addEventListener("touchstart",g,Nm),function(){Fm=Fm.filter(function(R){return R!==o}),document.removeEventListener("wheel",d,Nm),document.removeEventListener("touchmove",d,Nm),document.removeEventListener("touchstart",g,Nm)}},[]);var P=e.removeScrollBar,L=e.inert;return ne.createElement(ne.Fragment,null,L?ne.createElement(o,{styles:J5e(i)}):null,P?ne.createElement(CZ,{gapMode:"margin"}):null)}const t6e=PZ(QZ,e6e);var nK=ne.forwardRef(function(e,t){return ne.createElement(gA,tu({},e,{ref:t,sideCar:t6e}))});nK.classNames=gA.classNames;const iK=nK,oK="Dialog",[aK,_9e]=Pv(oK),[r6e,wf]=aK(oK),n6e=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,a=ne.useRef(null),d=ne.useRef(null),[f=!1,g]=Av({prop:n,defaultProp:i,onChange:o});return ne.createElement(r6e,{scope:t,triggerRef:a,contentRef:d,contentId:m0(),titleId:m0(),descriptionId:m0(),open:f,onOpenChange:g,onOpenToggle:ne.useCallback(()=>g(_=>!_),[g]),modal:s},r)},sK="DialogPortal",[i6e,uK]=aK(sK,{forceMount:void 0}),o6e=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,o=wf(sK,t);return ne.createElement(i6e,{scope:t,forceMount:r},ne.Children.map(n,s=>ne.createElement(Cv,{present:r||o.open},ne.createElement(KZ,{asChild:!0,container:i},s))))},gL="DialogOverlay",a6e=ne.forwardRef((e,t)=>{const r=uK(gL,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=wf(gL,e.__scopeDialog);return o.modal?ne.createElement(Cv,{present:n||o.open},ne.createElement(s6e,jr({},i,{ref:t}))):null}),s6e=ne.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=wf(gL,r);return ne.createElement(iK,{as:Op,allowPinchZoom:!0,shards:[i.contentRef]},ne.createElement(Au.div,jr({"data-state":cK(i.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),J0="DialogContent",u6e=ne.forwardRef((e,t)=>{const r=uK(J0,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=wf(J0,e.__scopeDialog);return ne.createElement(Cv,{present:n||o.open},o.modal?ne.createElement(l6e,jr({},i,{ref:t})):ne.createElement(c6e,jr({},i,{ref:t})))}),l6e=ne.forwardRef((e,t)=>{const r=wf(J0,e.__scopeDialog),n=ne.useRef(null),i=oc(t,r.contentRef,n);return ne.useEffect(()=>{const o=n.current;if(o)return i3(o)},[]),ne.createElement(lK,jr({},e,{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ls(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=r.triggerRef.current)===null||s===void 0||s.focus()}),onPointerDownOutside:ls(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:ls(e.onFocusOutside,o=>o.preventDefault())}))}),c6e=ne.forwardRef((e,t)=>{const r=wf(J0,e.__scopeDialog),n=ne.useRef(!1),i=ne.useRef(!1);return ne.createElement(lK,jr({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s;if((s=e.onCloseAutoFocus)===null||s===void 0||s.call(e,o),!o.defaultPrevented){var a;n.current||(a=r.triggerRef.current)===null||a===void 0||a.focus(),o.preventDefault()}n.current=!1,i.current=!1},onInteractOutside:o=>{var s,a;(s=e.onInteractOutside)===null||s===void 0||s.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const d=o.target;((a=r.triggerRef.current)===null||a===void 0?void 0:a.contains(d))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}}))}),lK=ne.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,a=wf(J0,r),d=ne.useRef(null),f=oc(t,d);return JZ(),ne.createElement(ne.Fragment,null,ne.createElement(HZ,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o},ne.createElement(XZ,jr({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":cK(a.open)},s,{ref:f,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),f6e="DialogTitle",h6e=ne.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=wf(f6e,r);return ne.createElement(Au.h2,jr({id:i.titleId},n,{ref:t}))}),d6e="DialogDescription",p6e=ne.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=wf(d6e,r);return ne.createElement(Au.p,jr({id:i.descriptionId},n,{ref:t}))}),m6e="DialogClose",g6e=ne.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=wf(m6e,r);return ne.createElement(Au.button,jr({type:"button"},n,{ref:t,onClick:ls(e.onClick,()=>i.onOpenChange(!1))}))});function cK(e){return e?"open":"closed"}const v6e=n6e,y6e=o6e,fK=a6e,hK=u6e,dK=h6e,pK=p6e,_6e=g6e,b6e=v6e,x6e=y6e,mK=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(fK,{ref:r,className:ii("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));mK.displayName=fK.displayName;const gK=ne.forwardRef(({className:e,children:t,...r},n)=>Qe.jsxs(x6e,{children:[Qe.jsx(mK,{}),Qe.jsxs(hK,{ref:n,className:ii("fixed left-[50%] top-[25%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:top-[50%]",e),...r,children:[t,Qe.jsxs(_6e,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Qe.jsx(E5e,{className:"w-4 h-4"}),Qe.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gK.displayName=hK.displayName;const w6e=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(dK,{ref:r,className:ii("text-lg font-semibold leading-none tracking-tight",e),...t}));w6e.displayName=dK.displayName;const E6e=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(pK,{ref:r,className:ii("text-sm text-muted-foreground",e),...t}));E6e.displayName=pK.displayName;const vA=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(Qu,{ref:r,className:ii("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));vA.displayName=Qu.displayName;const S6e=({children:e,dialogProps:t,commandProps:r})=>Qe.jsx(b6e,{...t,children:Qe.jsx(gK,{className:"p-0 overflow-hidden shadow-lg",children:Qe.jsx(vA,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",...r,children:e})})}),yA=ne.forwardRef(({className:e,...t},r)=>Qe.jsxs("div",{className:"flex items-center px-3 border-b","cmdk-input-wrapper":"",children:[Qe.jsx(w5e,{className:"w-4 h-4 mr-2 opacity-50 shrink-0"}),Qe.jsx(Qu.Input,{ref:r,className:ii("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));yA.displayName=Qu.Input.displayName;const vK=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(Qu.List,{ref:r,className:ii("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));vK.displayName=Qu.List.displayName;const _A=ne.forwardRef((e,t)=>Qe.jsx(Qu.Empty,{ref:t,className:"py-6 text-sm text-center",...e}));_A.displayName=Qu.Empty.displayName;const Q0=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(Qu.Group,{ref:r,className:ii("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Q0.displayName=Qu.Group.displayName;const yK=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(Qu.Separator,{ref:r,className:ii("-mx-1 h-px bg-border",e),...t}));yK.displayName=Qu.Separator.displayName;const e_=ne.forwardRef(({className:e,...t},r)=>Qe.jsx(Qu.Item,{ref:r,className:ii("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-muted aria-selected:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t}));e_.displayName=Qu.Item.displayName;const vL=({className:e,...t})=>Qe.jsx("span",{className:ii("ml-auto text-xs tracking-widest text-muted-foreground",e),...t});vL.displayName="CommandShortcut";function P6e(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z",clipRule:"evenodd"}}]})(e)}function A6e(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5.22 8.22a.749.749 0 0 0 0 1.06l6.25 6.25a.749.749 0 0 0 1.06 0l6.25-6.25a.749.749 0 1 0-1.06-1.06L12 13.939 6.28 8.22a.749.749 0 0 0-1.06 0Z"}}]})(e)}function C6e(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.78 15.78a.749.749 0 0 1-1.06 0L12 10.061 6.28 15.78a.749.749 0 1 1-1.06-1.06l6.25-6.25a.749.749 0 0 1 1.06 0l6.25 6.25a.749.749 0 0 1 0 1.06Z"}}]})(e)}function Qj(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12Zm0-1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9Z"}}]})(e)}const I6e={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]}};class iE{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,r)}init(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||I6e,this.options=r,this.debug=r.debug}log(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}warn(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}error(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"error","")}deprecate(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new iE(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new iE(this.logger,t)}}var lf=new iE;class bA{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]=this.observers[n]||[],this.observers[n].push(r)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(n=>n!==r)}}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.observers[t]&&[].concat(this.observers[t]).forEach(s=>{s(...n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(s=>{s.apply(s,[t,...n])})}}function xy(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function eU(e){return e==null?"":""+e}function O6e(e,t,r){e.forEach(n=>{t[n]&&(r[n]=t[n])})}function a3(e,t,r){function n(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function i(){return!e||typeof e=="string"}const o=typeof t!="string"?[].concat(t):t.split(".");for(;o.length>1;){if(i())return{};const s=n(o.shift());!e[s]&&r&&(e[s]=new r),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={}}return i()?{}:{obj:e,k:n(o.shift())}}function tU(e,t,r){const{obj:n,k:i}=a3(e,t,Object);n[i]=r}function T6e(e,t,r,n){const{obj:i,k:o}=a3(e,t,Object);i[o]=i[o]||[],n&&(i[o]=i[o].concat(r)),n||i[o].push(r)}function oE(e,t){const{obj:r,k:n}=a3(e,t);if(r)return r[n]}function M6e(e,t,r){const n=oE(e,r);return n!==void 0?n:oE(t,r)}function _K(e,t,r){for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?typeof e[n]=="string"||e[n]instanceof String||typeof t[n]=="string"||t[n]instanceof String?r&&(e[n]=t[n]):_K(e[n],t[n],r):e[n]=t[n]);return e}function $m(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var L6e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function R6e(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>L6e[t]):e}const k6e=[" ",",","?","!",";"];function D6e(e,t,r){t=t||"",r=r||"";const n=k6e.filter(s=>t.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;const i=new RegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!i.test(e);if(!o){const s=e.indexOf(r);s>0&&!i.test(e.substring(0,s))&&(o=!0)}return o}function aE(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const n=t.split(r);let i=e;for(let o=0;o<n.length;++o){if(!i||typeof i[n[o]]=="string"&&o+1<n.length)return;if(i[n[o]]===void 0){let s=2,a=n.slice(o,o+s).join(r),d=i[a];for(;d===void 0&&n.length>o+s;)s++,a=n.slice(o,o+s).join(r),d=i[a];if(d===void 0)return;if(d===null)return null;if(t.endsWith(a)){if(typeof d=="string")return d;if(a&&typeof d[a]=="string")return d[a]}const f=n.slice(o+s).join(r);return f?aE(d,f,r):void 0}i=i[n[o]]}return i}function sE(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class rU extends bA{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a=[t,r];n&&typeof n!="string"&&(a=a.concat(n)),n&&typeof n=="string"&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(a=t.split("."));const d=oE(this.data,a);return d||!s||typeof n!="string"?d:aE(this.data&&this.data[t]&&this.data[t][r],n,o)}addResource(t,r,n,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[t,r];n&&(a=a.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(a=t.split("."),i=r,r=a[1]),this.addNamespaces(r),tU(this.data,a,i),o.silent||this.emit("added",t,r,n,i)}addResources(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in n)(typeof n[o]=="string"||Object.prototype.toString.apply(n[o])==="[object Array]")&&this.addResource(t,r,o,n[o],{silent:!0});i.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},a=[t,r];t.indexOf(".")>-1&&(a=t.split("."),i=n,n=r,r=a[1]),this.addNamespaces(r);let d=oE(this.data,a)||{};i?_K(d,n,o):d={...d,...n},tU(this.data,a,d),s.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,r)}:this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(i=>r[i]&&Object.keys(r[i]).length>0)}toJSON(){return this.data}}var bK={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,i){return e.forEach(o=>{this.processors[o]&&(t=this.processors[o].process(t,r,n,i))}),t}};const nU={};class uE extends bA{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),O6e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=lf.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const n=this.resolve(t,r);return n&&n.res!==void 0}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const s=n&&t.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!D6e(t,n,i);if(s&&!a){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:o};const f=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),t=f.join(i)}return typeof o=="string"&&(o=[o]),{key:t,namespaces:o}}translate(t,r,n){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(t[t.length-1],r),d=a[a.length-1],f=r.lng||this.language,g=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f&&f.toLowerCase()==="cimode"){if(g){const N=r.nsSeparator||this.options.nsSeparator;return i?{res:`${d}${N}${s}`,usedKey:s,exactUsedKey:s,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:`${d}${N}${s}`}return i?{res:s,usedKey:s,exactUsedKey:s,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:s}const _=this.resolve(t,r);let b=_&&_.res;const P=_&&_.usedKey||s,L=_&&_.exactUsedKey||s,R=Object.prototype.toString.apply(b),$=["[object Number]","[object Function]","[object RegExp]"],F=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject;if(T&&b&&(typeof b!="string"&&typeof b!="boolean"&&typeof b!="number")&&$.indexOf(R)<0&&!(typeof F=="string"&&R==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,b,{...r,ns:a}):`key '${s} (${this.language})' returned an object instead of string.`;return i?(_.res=N,_.usedParams=this.getUsedParamsDetails(r),_):N}if(o){const N=R==="[object Array]",B=N?[]:{},H=N?L:P;for(const Z in b)if(Object.prototype.hasOwnProperty.call(b,Z)){const Y=`${H}${o}${Z}`;B[Z]=this.translate(Y,{...r,joinArrays:!1,ns:a}),B[Z]===Y&&(B[Z]=b[Z])}b=B}}else if(T&&typeof F=="string"&&R==="[object Array]")b=b.join(F),b&&(b=this.extendTranslation(b,t,r,n));else{let N=!1,B=!1;const H=r.count!==void 0&&typeof r.count!="string",Z=uE.hasDefaultValue(r),Y=H?this.pluralResolver.getSuffix(f,r.count,r):"",W=r.ordinal&&H?this.pluralResolver.getSuffix(f,r.count,{ordinal:!1}):"",Q=r[`defaultValue${Y}`]||r[`defaultValue${W}`]||r.defaultValue;!this.isValidLookup(b)&&Z&&(N=!0,b=Q),this.isValidLookup(b)||(B=!0,b=s);const ge=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&B?void 0:b,be=Z&&Q!==b&&this.options.updateMissing;if(B||N||be){if(this.logger.log(be?"updateKey":"missingKey",f,d,s,be?Q:b),o){const G=this.resolve(s,{...r,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let oe=[];const Ie=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ie&&Ie[0])for(let G=0;G<Ie.length;G++)oe.push(Ie[G]);else this.options.saveMissingTo==="all"?oe=this.languageUtils.toResolveHierarchy(r.lng||this.language):oe.push(r.lng||this.language);const fe=(G,K,re)=>{const ie=Z&&re!==b?re:ge;this.options.missingKeyHandler?this.options.missingKeyHandler(G,d,K,ie,be,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(G,d,K,ie,be,r),this.emit("missingKey",G,d,K,b)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?oe.forEach(G=>{this.pluralResolver.getSuffixes(G,r).forEach(K=>{fe([G],s+K,r[`defaultValue${K}`]||Q)})}):fe(oe,s,Q))}b=this.extendTranslation(b,t,r,_,n),B&&b===s&&this.options.appendNamespaceToMissingKey&&(b=`${d}:${s}`),(B||N)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?b=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${s}`:s,N?b:void 0):b=this.options.parseMissingKeyHandler(b))}return i?(_.res=b,_.usedParams=this.getUsedParamsDetails(r),_):b}extendTranslation(t,r,n,i,o){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const f=typeof t=="string"&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(f){const b=t.match(this.interpolator.nestingRegexp);g=b&&b.length}let _=n.replace&&typeof n.replace!="string"?n.replace:n;if(this.options.interpolation.defaultVariables&&(_={...this.options.interpolation.defaultVariables,..._}),t=this.interpolator.interpolate(t,_,n.lng||this.language,n),f){const b=t.match(this.interpolator.nestingRegexp),P=b&&b.length;g<P&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=i.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var b=arguments.length,P=new Array(b),L=0;L<b;L++)P[L]=arguments[L];return o&&o[0]===P[0]&&!n.context?(s.logger.warn(`It seems you are nesting recursively key: ${P[0]} in key: ${r[0]}`),null):s.translate(...P,r)},n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,d=typeof a=="string"?[a]:a;return t!=null&&d&&d.length&&n.applyPostProcessor!==!1&&(t=bK.handle(d,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,o,s,a;return typeof t=="string"&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,r),g=f.key;i=g;let _=f.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));const b=r.count!==void 0&&typeof r.count!="string",P=b&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),L=r.context!==void 0&&(typeof r.context=="string"||typeof r.context=="number")&&r.context!=="",R=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);_.forEach($=>{this.isValidLookup(n)||(a=$,!nU[`${R[0]}-${$}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(nU[`${R[0]}-${$}`]=!0,this.logger.warn(`key "${i}" for languages "${R.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(F=>{if(this.isValidLookup(n))return;s=F;const T=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(T,g,F,$,r);else{let N;b&&(N=this.pluralResolver.getSuffix(F,r.count,r));const B=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(b&&(T.push(g+N),r.ordinal&&N.indexOf(H)===0&&T.push(g+N.replace(H,this.options.pluralSeparator)),P&&T.push(g+B)),L){const Z=`${g}${this.options.contextSeparator}${r.context}`;T.push(Z),b&&(T.push(Z+N),r.ordinal&&N.indexOf(H)===0&&T.push(Z+N.replace(H,this.options.pluralSeparator)),P&&T.push(Z+B))}}let x;for(;x=T.pop();)this.isValidLookup(n)||(o=x,n=this.getResource(F,$,x,r))}))})}),{res:n,usedKey:i,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,r,n,i):this.resourceStore.getResource(t,r,n,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&typeof t.replace!="string";let i=n?t.replace:t;if(n&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const o of r)delete i[o]}return i}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}function UO(e){return e.charAt(0).toUpperCase()+e.slice(1)}class iU{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=lf.create("languageUtils")}getScriptPartFromCode(t){if(t=sE(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=sE(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const r=["hans","hant","latn","cyrl","cans","mong","arab"];let n=t.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=UO(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=UO(n[1].toLowerCase())),r.indexOf(n[2].toLowerCase())>-1&&(n[2]=UO(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(r=i)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&o.indexOf(i)===0)return o})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes(r||this.options.fallbackLng||[],t),i=[],o=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),n.forEach(s=>{i.indexOf(s)<0&&o(this.formatLanguageCode(s))}),i}}let N6e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],F6e={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}};const $6e=["v1","v2","v3"],z6e=["v4"],oU={zero:0,one:1,two:2,few:3,many:4,other:5};function B6e(){const e={};return N6e.forEach(t=>{t.lngs.forEach(r=>{e[r]={numbers:t.nr,plurals:F6e[t.fc]}})}),e}class j6e{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=r,this.logger=lf.create("pluralResolver"),(!this.options.compatibilityJSON||z6e.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=B6e()}addRule(t,r){this.rules[t]=r}getRule(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(sE(t),{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,r);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(i=>`${r}${i}`)}getSuffixes(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,r);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,o)=>oU[i]-oU[o]).map(i=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i}`):n.numbers.map(i=>this.getSuffix(t,i,r)):[]}getSuffix(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(r)}`:this.getSuffixRetroCompatible(i,r):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,r){const n=t.noAbs?t.plurals(r):t.plurals(Math.abs(r));let i=t.numbers[n];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const o=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!$6e.includes(this.options.compatibilityJSON)}}function aU(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=M6e(e,t,r);return!o&&i&&typeof r=="string"&&(o=aE(e,r,n),o===void 0&&(o=aE(t,r,n))),o}class U6e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=lf.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(r=>r),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const r=t.interpolation;this.escape=r.escape!==void 0?r.escape:R6e,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?$m(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?$m(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?$m(r.nestingPrefix):r.nestingPrefixEscaped||$m("$t("),this.nestingSuffix=r.nestingSuffix?$m(r.nestingSuffix):r.nestingSuffixEscaped||$m(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(t,"g");const r=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(r,"g");const n=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(n,"g")}interpolate(t,r,n,i){let o,s,a;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(L){return L.replace(/\$/g,"$$$$")}const g=L=>{if(L.indexOf(this.formatSeparator)<0){const T=aU(r,d,L,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,n,{...i,...r,interpolationkey:L}):T}const R=L.split(this.formatSeparator),$=R.shift().trim(),F=R.join(this.formatSeparator).trim();return this.format(aU(r,d,$,this.options.keySeparator,this.options.ignoreJSONStructure),F,n,{...i,...r,interpolationkey:$})};this.resetRegExp();const _=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,b=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:L=>f(L)},{regex:this.regexp,safeValue:L=>this.escapeValue?f(this.escape(L)):f(L)}].forEach(L=>{for(a=0;o=L.regex.exec(t);){const R=o[1].trim();if(s=g(R),s===void 0)if(typeof _=="function"){const F=_(t,o,i);s=typeof F=="string"?F:""}else if(i&&Object.prototype.hasOwnProperty.call(i,R))s="";else if(b){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${R} for interpolating ${t}`),s="";else typeof s!="string"&&!this.useRawValueToEscape&&(s=eU(s));const $=L.safeValue(s);if(t=t.replace(o[0],$),b?(L.regex.lastIndex+=s.length,L.regex.lastIndex-=o[0].length):L.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,o,s;function a(d,f){const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const _=d.split(new RegExp(`${g}[ ]*{`));let b=`{${_[1]}`;d=_[0],b=this.interpolate(b,s);const P=b.match(/'/g),L=b.match(/"/g);(P&&P.length%2===0&&!L||L.length%2!==0)&&(b=b.replace(/'/g,'"'));try{s=JSON.parse(b),f&&(s={...f,...s})}catch(R){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,R),`${d}${g}${b}`}return delete s.defaultValue,d}for(;i=this.nestingRegexp.exec(t);){let d=[];s={...n},s=s.replace&&typeof s.replace!="string"?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let f=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const g=i[1].split(this.formatSeparator).map(_=>_.trim());i[1]=g.shift(),d=g,f=!0}if(o=r(a.call(this,i[1].trim(),s),s),o&&i[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=eU(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),o=""),f&&(o=d.reduce((g,_)=>this.format(g,_,n.lng,{...n,interpolationkey:i[1].trim()}),o.trim())),t=t.replace(i[0],o),this.regexp.lastIndex=0}return t}}function V6e(e){let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);t==="currency"&&i.indexOf(":")<0?r.currency||(r.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?r.range||(r.range=i.trim()):i.split(";").forEach(s=>{if(!s)return;const[a,...d]=s.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,"");r[a.trim()]||(r[a.trim()]=f),f==="false"&&(r[a.trim()]=!1),f==="true"&&(r[a.trim()]=!0),isNaN(f)||(r[a.trim()]=parseInt(f,10))})}return{formatName:t,formatOptions:r}}function zm(e){const t={};return function(n,i,o){const s=i+JSON.stringify(o);let a=t[s];return a||(a=e(sE(i),o),t[s]=a),a(n)}}class G6e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=lf.create("formatter"),this.options=t,this.formats={number:zm((r,n)=>{const i=new Intl.NumberFormat(r,{...n});return o=>i.format(o)}),currency:zm((r,n)=>{const i=new Intl.NumberFormat(r,{...n,style:"currency"});return o=>i.format(o)}),datetime:zm((r,n)=>{const i=new Intl.DateTimeFormat(r,{...n});return o=>i.format(o)}),relativetime:zm((r,n)=>{const i=new Intl.RelativeTimeFormat(r,{...n});return o=>i.format(o,n.range||"day")}),list:zm((r,n)=>{const i=new Intl.ListFormat(r,{...n});return o=>i.format(o)})},this.init(t)}init(t){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=zm(r)}format(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r.split(this.formatSeparator).reduce((a,d)=>{const{formatName:f,formatOptions:g}=V6e(d);if(this.formats[f]){let _=a;try{const b=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},P=b.locale||b.lng||i.locale||i.lng||n;_=this.formats[f](a,P,{...g,...i,...b})}catch(b){this.logger.warn(b)}return _}else this.logger.warn(`there was no format function for ${f}`);return a},t)}}function q6e(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}class W6e extends bA{constructor(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=lf.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(t,r,n,i){const o={},s={},a={},d={};return t.forEach(f=>{let g=!0;r.forEach(_=>{const b=`${f}|${_}`;!n.reload&&this.store.hasResourceBundle(f,_)?this.state[b]=2:this.state[b]<0||(this.state[b]===1?s[b]===void 0&&(s[b]=!0):(this.state[b]=1,g=!1,s[b]===void 0&&(s[b]=!0),o[b]===void 0&&(o[b]=!0),d[_]===void 0&&(d[_]=!0)))}),g||(a[f]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(d)}}loaded(t,r,n){const i=t.split("|"),o=i[0],s=i[1];r&&this.emit("failedLoading",o,s,r),n&&this.store.addResourceBundle(o,s,n),this.state[t]=r?-1:2;const a={};this.queue.forEach(d=>{T6e(d.loaded,[o],s),q6e(d,t),r&&d.errors.push(r),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{a[f]||(a[f]={});const g=d.loaded[f];g.length&&g.forEach(_=>{a[f][_]===void 0&&(a[f][_]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(d=>!d.done)}read(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:i,wait:o,callback:s});return}this.readingCalls++;const a=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const _=this.waitingReads.shift();this.read(_.lng,_.ns,_.fcName,_.tried,_.wait,_.callback)}if(f&&g&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,i+1,o*2,s)},o);return}s(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(t,r);f&&typeof f.then=="function"?f.then(g=>a(null,g)).catch(a):a(null,f)}catch(f){a(f)}return}return d(t,r,a)}prepareLoading(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof r=="string"&&(r=[r]);const o=this.queueLoad(t,r,n,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t.split("|"),i=n[0],o=n[1];this.read(i,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${r}loading namespace ${o} for language ${i} failed`,s),!s&&a&&this.logger.log(`${r}loaded namespace ${o} for language ${i}`,a),this.loaded(t,s,a)})}saveMissing(t,r,n,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const d={...s,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(t,r,n,i,d):g=f(t,r,n,i),g&&typeof g.then=="function"?g.then(_=>a(null,_)).catch(a):a(null,g)}catch(g){a(g)}else f(t,r,n,i,a,d)}!t||!t[0]||this.store.addResource(t[0],r,n,i)}}}function sU(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let r={};if(typeof t[1]=="object"&&(r=t[1]),typeof t[1]=="string"&&(r.defaultValue=t[1]),typeof t[2]=="string"&&(r.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(i=>{r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:(e,t,r,n)=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function uU(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function mx(){}function X6e(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})}class t_ extends bA{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=uU(t),this.services={},this.logger=lf,this.modules={external:[]},X6e(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(){var t=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;typeof r=="function"&&(n=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const i=sU();this.options={...i,...this.options,...uU(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function o(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?lf.init(o(this.modules.logger),this.options):lf.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=G6e);const _=new iU(this.options);this.store=new rU(this.options.resources,this.options);const b=this.services;b.logger=lf,b.resourceStore=this.store,b.languageUtils=_,b.pluralResolver=new j6e(_,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(b.formatter=o(g),b.formatter.init(b,this.options),this.options.interpolation.format=b.formatter.format.bind(b.formatter)),b.interpolator=new U6e(this.options),b.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},b.backendConnector=new W6e(o(this.modules.backend),b.resourceStore,b,this.options),b.backendConnector.on("*",function(P){for(var L=arguments.length,R=new Array(L>1?L-1:0),$=1;$<L;$++)R[$-1]=arguments[$];t.emit(P,...R)}),this.modules.languageDetector&&(b.languageDetector=o(this.modules.languageDetector),b.languageDetector.init&&b.languageDetector.init(b,this.options.detection,this.options)),this.modules.i18nFormat&&(b.i18nFormat=o(this.modules.i18nFormat),b.i18nFormat.init&&b.i18nFormat.init(this)),this.translator=new uE(this.services,this.options),this.translator.on("*",function(P){for(var L=arguments.length,R=new Array(L>1?L-1:0),$=1;$<L;$++)R[$-1]=arguments[$];t.emit(P,...R)}),this.modules.external.forEach(P=>{P.init&&P.init(this)})}if(this.format=this.options.interpolation.format,n||(n=mx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return t.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return t.store[g](...arguments),t}});const d=xy(),f=()=>{const g=(_,b)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(b),n(_,b)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),d}loadResources(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mx;const i=typeof t=="string"?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>s(d)),this.options.preload&&this.options.preload.forEach(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(a)})}else n(null)}reloadResources(t,r,n){const i=xy();return t||(t=this.languages),r||(r=this.options.ns),n||(n=mx),this.services.backendConnector.reload(t,r,o=>{i.resolve(),n(o)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&bK.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(t,r){var n=this;this.isLanguageChangingTo=t;const i=xy();this.emit("languageChanging",t);const o=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},s=(d,f)=>{f?(o(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),r&&r(d,function(){return n.t(...arguments)})},a=d=>{!t&&!d&&this.services.languageDetector&&(d=[]);const f=typeof d=="string"?d:this.services.languageUtils.getBestMatchFromCodes(d);f&&(this.language||o(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(f)),this.loadResources(f,g=>{s(g,f)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,r,n){var i=this;const o=function(s,a){let d;if(typeof a!="object"){for(var f=arguments.length,g=new Array(f>2?f-2:0),_=2;_<f;_++)g[_-2]=arguments[_];d=i.options.overloadTranslationOptionHandler([s,a].concat(g))}else d={...a};d.lng=d.lng||o.lng,d.lngs=d.lngs||o.lngs,d.ns=d.ns||o.ns,d.keyPrefix=d.keyPrefix||n||o.keyPrefix;const b=i.options.keySeparator||".";let P;return d.keyPrefix&&Array.isArray(s)?P=s.map(L=>`${d.keyPrefix}${b}${L}`):P=d.keyPrefix?`${d.keyPrefix}${b}${s}`:s,i.t(P,d)};return typeof t=="string"?o.lng=t:o.lngs=t,o.ns=r,o.keyPrefix=n,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const s=(a,d)=>{const f=this.services.backendConnector.state[`${a}|${d}`];return f===-1||f===2};if(r.precheck){const a=r.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,t)&&(!i||s(o,t)))}loadNamespaces(t,r){const n=xy();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=xy();typeof t=="string"&&(t=[t]);const i=this.options.preload||[],o=t.filter(s=>i.indexOf(s)<0);return o.length?(this.options.preload=i.concat(o),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new iU(sU());return r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new t_(t,r)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mx;const n=t.forkResourceStore;n&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},o=new t_(i);return(t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n&&(o.store=new rU(this.store.data,i),o.services.resourceStore=o.store),o.translator=new uE(o.services,i),o.translator.on("*",function(a){for(var d=arguments.length,f=new Array(d>1?d-1:0),g=1;g<d;g++)f[g-1]=arguments[g];o.emit(a,...f)}),o.init(i,r),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const iu=t_.createInstance();iu.createInstance=t_.createInstance;iu.createInstance;iu.dir;iu.init;iu.loadResources;iu.reloadResources;iu.use;iu.changeLanguage;iu.getFixedT;const tn=iu.t;iu.exists;iu.setDefaultNamespace;iu.hasLoadedNamespace;iu.loadNamespaces;iu.loadLanguages;var xA={exports:{}},xK={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AE",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"C",:"C",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"Y",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"ae",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"c",:"c",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"y",:"y",:"A",:"a",:"A",:"a",:"A",:"a",:"C",:"c",:"C",:"c",:"C",:"c",:"C",:"c",C:"C",c:"c",:"D",:"d",:"D",:"d",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"G",:"G",:"g",:"g",:"G",:"g",:"G",:"g",:"G",:"g",:"H",:"h",:"H",:"h",:"H",:"h",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"IJ",:"ij",:"J",:"j",:"K",:"k",:"K",:"k",K:"K",k:"k",:"L",:"l",:"L",:"l",:"L",:"l",:"L",:"l",:"l",:"l",:"M",:"m",M:"M",m:"m",:"N",:"n",:"N",:"n",:"N",:"n",:"n",N:"N",n:"n",:"O",:"o",:"O",:"o",:"O",:"o",:"OE",:"oe",P:"P",p:"p",:"R",:"r",:"R",:"r",:"R",:"r",R:"R",r:"r",:"R",:"r",:"S",:"s",:"S",:"s",:"S",:"S",:"s",:"s",:"S",:"s",:"T",:"t",:"t",:"T",:"T",:"t",:"T",:"t",T:"T",t:"t",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",V:"V",v:"v",:"W",:"w",:"W",:"w",X:"X",x:"x",:"Y",:"y",:"Y",Y:"Y",y:"y",:"Z",:"z",:"Z",:"z",:"Z",:"z",:"s",:"f",:"O",:"o",:"U",:"u",:"A",:"a",:"I",:"i",:"O",:"o",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"A",:"a",:"AE",:"ae",:"O",:"o",:"TH",:"th",:"P",:"p",:"S",:"s",X:"X",x:"x",:"",:"",:"",:"",A:"A",a:"a",E:"E",e:"e",I:"I",i:"i",:"N",:"n",:"O",:"o",:"O",:"o",:"U",:"u",:"W",:"w",:"Y",:"y",:"A",:"a",:"E",:"e",:"I",:"i",:"O",:"o",:"R",:"r",:"U",:"u",B:"B",b:"b",:"C",:"c",:"E",:"e",F:"F",f:"f",:"G",:"g",:"H",:"h",J:"J",:"j",:"K",:"k",M:"M",m:"m",P:"P",p:"p",Q:"Q",q:"q",:"R",:"r",:"S",:"s",V:"V",v:"v",W:"W",w:"w",X:"X",x:"x",Y:"Y",y:"y",A:"A",a:"a",B:"B",b:"b",:"D",:"d",:"E",:"e",:"E",:"e",:"H",:"h",I:"I",i:"i",:"I",:"i",M:"M",m:"m",O:"O",o:"o",Q:"Q",q:"q",U:"U",u:"u",X:"X",x:"x",Z:"Z",z:"z",:"",:"",:"",:""},wK=Object.keys(xK).join("|"),Y6e=new RegExp(wK,"g"),H6e=new RegExp(wK,"");function Z6e(e){return xK[e]}var EK=function(e){return e.replace(Y6e,Z6e)},K6e=function(e){return!!e.match(H6e)};xA.exports=EK;xA.exports.has=K6e;xA.exports.remove=EK;var J6e=xA.exports;const lU=bd(J6e);function Q6e(){const e=Ct(R=>R.getSortedPOIs()),t=Ct(R=>R.currentLang),r=Ct(R=>R.features),n=Ct(R=>R.setRouteFinish),[i,o]=ne.useState(!1),[s,a]=ne.useState(""),[d,f]=ne.useState(e),[g,_]=ne.useState([]),[b,P]=ne.useState([]);ne.useEffect(()=>{const R=$=>{$.key==="f"&&($.metaKey||$.ctrlKey)&&($.preventDefault(),o(F=>!F))};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[]),ne.useEffect(()=>{const R=[...e].map($=>{var N,B,H;const F=(N=$.properties)!=null&&N.description_i18n&&((B=$.properties)!=null&&B.description_i18n[t])?$.properties.description_i18n[t]:(H=$.properties.description_i18n)==null?void 0:H.en,T=lU($.properties.title),x=lU(s.toLowerCase());if(T.toLowerCase().indexOf(x)>-1||(F==null?void 0:F.toLowerCase().indexOf(x))>-1)return T.toLowerCase().startsWith(x)?$.score=3:T.toLowerCase().indexOf(x)>-1?$.score=2:(F==null?void 0:F.toLowerCase().indexOf(x))>-1&&($.score=1,$.foundInDescription=!0),$}).filter($=>$).sort(($,F)=>$&&F?F.score-$.score||($.properties.title>F.properties.title?1:-1):0);R.length!==d.length&&(f(R),_(R.filter($=>!$.foundInDescription)),P(R.filter($=>$.foundInDescription)))},[s,t,e,d]);const L=R=>{const $=r.find(F=>F.id===R);o(!1),n($)};return Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs("button",{className:"absolute z-10 flex items-center px-5 py-2 text-sm transition-colors border-2 rounded-full bg-white/80 top-5 left-5 right-12 text-muted-foreground hover:border-primary/70 lg:right-auto",onClick:()=>o(!0),children:[Qe.jsx(P6e,{className:"mr-2"}),tn("click-here-or-press"),Qe.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 mx-2 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[Qe.jsx("span",{className:"text-xs",children:"Ctrl + "}),"F"]}),tn("to-search")]}),Qe.jsxs(S6e,{dialogProps:{open:i,onOpenChange:o},commandProps:{shouldFilter:!1},children:[Qe.jsx(yA,{placeholder:`${tn("searchPlaceholder")}...`,value:s,onValueChange:a}),Qe.jsxs(vK,{children:[Qe.jsx(_A,{children:tn("no-results")}),g.length>0&&Qe.jsx(Q0,{heading:tn("suggestions"),children:g.map(R=>{var $;return Qe.jsxs(e_,{value:R.id,onSelect:L,className:"cursor-pointer",children:[Qe.jsx(Qj,{className:"w-4 h-4 mr-2"}),Qe.jsx("span",{children:($=R.properties)==null?void 0:$.title}),Qe.jsx(vL,{children:R.floorName})]},R.id)})}),b.length>0&&Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(yK,{}),Qe.jsx(Q0,{heading:tn("found-in-description"),children:b.map(R=>{var $;return Qe.jsxs(e_,{value:R.id,onSelect:L,className:"cursor-pointer",children:[Qe.jsx(Qj,{className:"w-4 h-4 mr-2"}),Qe.jsx("span",{children:($=R.properties)==null?void 0:$.title}),Qe.jsx(vL,{children:R.floorName})]},R.id)})})]})]})]})]})}const SK=ne.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),wA=ne.createContext({}),EA=ne.createContext(null),SA=typeof document<"u",s3=SA?ne.useLayoutEffect:ne.useEffect,PK=ne.createContext({strict:!1}),u3=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e$e="framerAppearId",AK="data-"+u3(e$e);function t$e(e,t,r,n){const{visualElement:i}=ne.useContext(wA),o=ne.useContext(PK),s=ne.useContext(EA),a=ne.useContext(SK).reducedMotion,d=ne.useRef();n=n||o.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:i,props:r,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const f=d.current;ne.useInsertionEffect(()=>{f&&f.update(r,s)});const g=ne.useRef(!!(r[AK]&&!window.HandoffComplete));return s3(()=>{f&&(f.render(),g.current&&f.animationState&&f.animationState.animateChanges())}),ne.useEffect(()=>{f&&(f.updateFeatures(),!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(g.current=!1,window.HandoffComplete=!0))}),f}function lg(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function r$e(e,t,r){return ne.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):lg(r)&&(r.current=n))},[t])}function r_(e){return typeof e=="string"||Array.isArray(e)}function PA(e){return typeof e=="object"&&typeof e.start=="function"}const l3=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],c3=["initial",...l3];function AA(e){return PA(e.animate)||c3.some(t=>r_(e[t]))}function CK(e){return!!(AA(e)||e.variants)}function n$e(e,t){if(AA(e)){const{initial:r,animate:n}=e;return{initial:r===!1||r_(r)?r:void 0,animate:r_(n)?n:void 0}}return e.inherit!==!1?t:{}}function i$e(e){const{initial:t,animate:r}=n$e(e,ne.useContext(wA));return ne.useMemo(()=>({initial:t,animate:r}),[cU(t),cU(r)])}function cU(e){return Array.isArray(e)?e.join(" "):e}const fU={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},n_={};for(const e in fU)n_[e]={isEnabled:t=>fU[e].some(r=>!!t[r])};function o$e(e){for(const t in e)n_[t]={...n_[t],...e[t]}}const f3=ne.createContext({}),IK=ne.createContext({}),a$e=Symbol.for("motionComponentSymbol");function s$e({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){e&&o$e(e);function o(a,d){let f;const g={...ne.useContext(SK),...a,layoutId:u$e(a)},{isStatic:_}=g,b=i$e(a),P=n(a,_);if(!_&&SA){b.visualElement=t$e(i,P,g,t);const L=ne.useContext(IK),R=ne.useContext(PK).strict;b.visualElement&&(f=b.visualElement.loadFeatures(g,R,e,L))}return ne.createElement(wA.Provider,{value:b},f&&b.visualElement?ne.createElement(f,{visualElement:b.visualElement,...g}):null,r(i,a,r$e(P,b.visualElement,d),P,_,b.visualElement))}const s=ne.forwardRef(o);return s[a$e]=i,s}function u$e({layoutId:e}){const t=ne.useContext(f3).id;return t&&e!==void 0?t+"-"+e:e}function l$e(e){function t(n,i={}){return s$e(e(n,i))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,i)=>(r.has(i)||r.set(i,t(i)),r.get(i))})}const c$e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function h3(e){return typeof e!="string"||e.includes("-")?!1:!!(c$e.indexOf(e)>-1||/[A-Z]/.test(e))}const lE={};function f$e(e){Object.assign(lE,e)}const F1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],am=new Set(F1);function OK(e,{layout:t,layoutId:r}){return am.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!lE[e]||e==="opacity")}const Yu=e=>!!(e&&e.getVelocity),h$e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},d$e=F1.length;function p$e(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,i){let o="";for(let s=0;s<d$e;s++){const a=F1[s];if(e[a]!==void 0){const d=h$e[a]||a;o+=`${d}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,n?"":o):r&&n&&(o="none"),o}const TK=e=>t=>typeof t=="string"&&t.startsWith(e),MK=TK("--"),yL=TK("var(--"),m$e=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,g$e=(e,t)=>t&&typeof e=="number"?t.transform(e):e,md=(e,t,r)=>Math.min(Math.max(r,e),t),sm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},g0={...sm,transform:e=>md(0,1,e)},gx={...sm,default:1},v0=e=>Math.round(e*1e5)/1e5,CA=/(-)?([\d]*\.?[\d])+/g,LK=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,v$e=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $1(e){return typeof e=="string"}const z1=e=>({test:t=>$1(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$h=z1("deg"),hf=z1("%"),en=z1("px"),y$e=z1("vh"),_$e=z1("vw"),hU={...hf,parse:e=>hf.parse(e)/100,transform:e=>hf.transform(e*100)},dU={...sm,transform:Math.round},RK={borderWidth:en,borderTopWidth:en,borderRightWidth:en,borderBottomWidth:en,borderLeftWidth:en,borderRadius:en,radius:en,borderTopLeftRadius:en,borderTopRightRadius:en,borderBottomRightRadius:en,borderBottomLeftRadius:en,width:en,maxWidth:en,height:en,maxHeight:en,size:en,top:en,right:en,bottom:en,left:en,padding:en,paddingTop:en,paddingRight:en,paddingBottom:en,paddingLeft:en,margin:en,marginTop:en,marginRight:en,marginBottom:en,marginLeft:en,rotate:$h,rotateX:$h,rotateY:$h,rotateZ:$h,scale:gx,scaleX:gx,scaleY:gx,scaleZ:gx,skew:$h,skewX:$h,skewY:$h,distance:en,translateX:en,translateY:en,translateZ:en,x:en,y:en,z:en,perspective:en,transformPerspective:en,opacity:g0,originX:hU,originY:hU,originZ:en,zIndex:dU,fillOpacity:g0,strokeOpacity:g0,numOctaves:dU};function d3(e,t,r,n){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let d=!1,f=!1,g=!0;for(const _ in t){const b=t[_];if(MK(_)){o[_]=b;continue}const P=RK[_],L=g$e(b,P);if(am.has(_)){if(d=!0,s[_]=L,!g)continue;b!==(P.default||0)&&(g=!1)}else _.startsWith("origin")?(f=!0,a[_]=L):i[_]=L}if(t.transform||(d||n?i.transform=p$e(e.transform,r,g,n):i.transform&&(i.transform="none")),f){const{originX:_="50%",originY:b="50%",originZ:P=0}=a;i.transformOrigin=`${_} ${b} ${P}`}}const p3=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kK(e,t,r){for(const n in t)!Yu(t[n])&&!OK(n,r)&&(e[n]=t[n])}function b$e({transformTemplate:e},t,r){return ne.useMemo(()=>{const n=p3();return d3(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function x$e(e,t,r){const n=e.style||{},i={};return kK(i,n,e),Object.assign(i,b$e(e,t,r)),e.transformValues?e.transformValues(i):i}function w$e(e,t,r){const n={},i=x$e(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const E$e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function cE(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||E$e.has(e)}let DK=e=>!cE(e);function S$e(e){e&&(DK=t=>t.startsWith("on")?!cE(t):e(t))}try{S$e(require("@emotion/is-prop-valid").default)}catch{}function P$e(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(DK(i)||r===!0&&cE(i)||!t&&!cE(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function pU(e,t,r){return typeof e=="string"?e:en.transform(t+r*e)}function A$e(e,t,r){const n=pU(t,e.x,e.width),i=pU(r,e.y,e.height);return`${n} ${i}`}const C$e={offset:"stroke-dashoffset",array:"stroke-dasharray"},I$e={offset:"strokeDashoffset",array:"strokeDasharray"};function O$e(e,t,r=1,n=0,i=!0){e.pathLength=1;const o=i?C$e:I$e;e[o.offset]=en.transform(-n);const s=en.transform(t),a=en.transform(r);e[o.array]=`${s} ${a}`}function m3(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:d=0,...f},g,_,b){if(d3(e,f,g,b),_){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:P,style:L,dimensions:R}=e;P.transform&&(R&&(L.transform=P.transform),delete P.transform),R&&(i!==void 0||o!==void 0||L.transform)&&(L.transformOrigin=A$e(R,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(P.x=t),r!==void 0&&(P.y=r),n!==void 0&&(P.scale=n),s!==void 0&&O$e(P,s,a,d,!1)}const NK=()=>({...p3(),attrs:{}}),g3=e=>typeof e=="string"&&e.toLowerCase()==="svg";function T$e(e,t,r,n){const i=ne.useMemo(()=>{const o=NK();return m3(o,t,{enableHardwareAcceleration:!1},g3(n),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};kK(o,e.style,e),i.style={...o,...i.style}}return i}function M$e(e=!1){return(r,n,i,{latestValues:o},s)=>{const d=(h3(r)?T$e:w$e)(n,o,s,r),g={...P$e(n,typeof r=="string",e),...d,ref:i},{children:_}=n,b=ne.useMemo(()=>Yu(_)?_.get():_,[_]);return ne.createElement(r,{...g,children:b})}}function FK(e,{style:t,vars:r},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const o in r)e.style.setProperty(o,r[o])}const $K=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zK(e,t,r,n){FK(e,t,void 0,n);for(const i in t.attrs)e.setAttribute($K.has(i)?i:u3(i),t.attrs[i])}function v3(e,t){const{style:r}=e,n={};for(const i in r)(Yu(r[i])||t.style&&Yu(t.style[i])||OK(i,e))&&(n[i]=r[i]);return n}function BK(e,t){const r=v3(e,t);for(const n in e)if(Yu(e[n])||Yu(t[n])){const i=F1.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=e[n]}return r}function y3(e,t,r,n={},i={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,i)),t}function jK(e){const t=ne.useRef(null);return t.current===null&&(t.current=e()),t.current}const fE=e=>Array.isArray(e),L$e=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),R$e=e=>fE(e)?e[e.length-1]||0:e;function Hx(e){const t=Yu(e)?e.get():e;return L$e(t)?t.toValue():t}function k$e({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,i,o){const s={latestValues:D$e(n,i,o,e),renderState:t()};return r&&(s.mount=a=>r(n,a,s)),s}const UK=e=>(t,r)=>{const n=ne.useContext(wA),i=ne.useContext(EA),o=()=>k$e(e,t,n,i);return r?o():jK(o)};function D$e(e,t,r,n){const i={},o=n(e,{});for(const b in o)i[b]=Hx(o[b]);let{initial:s,animate:a}=e;const d=AA(e),f=CK(e);t&&f&&!d&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let g=r?r.initial===!1:!1;g=g||s===!1;const _=g?a:s;return _&&typeof _!="boolean"&&!PA(_)&&(Array.isArray(_)?_:[_]).forEach(P=>{const L=y3(e,P);if(!L)return;const{transitionEnd:R,transition:$,...F}=L;for(const T in F){let x=F[T];if(Array.isArray(x)){const N=g?x.length-1:0;x=x[N]}x!==null&&(i[T]=x)}for(const T in R)i[T]=R[T]}),i}const Zo=e=>e;class mU{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function N$e(e){let t=new mU,r=new mU,n=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(d,f=!1,g=!1)=>{const _=g&&i,b=_?t:r;return f&&s.add(d),b.add(d)&&_&&i&&(n=t.order.length),d},cancel:d=>{r.remove(d),s.delete(d)},process:d=>{if(i){o=!0;return}if(i=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let f=0;f<n;f++){const g=t.order[f];g(d),s.has(g)&&(a.schedule(g),e())}i=!1,o&&(o=!1,a.process(d))}};return a}const vx=["prepare","read","update","preRender","render","postRender"],F$e=40;function $$e(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=vx.reduce((_,b)=>(_[b]=N$e(()=>r=!0),_),{}),s=_=>o[_].process(i),a=()=>{const _=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(_-i.timestamp,F$e),1),i.timestamp=_,i.isProcessing=!0,vx.forEach(s),i.isProcessing=!1,r&&t&&(n=!1,e(a))},d=()=>{r=!0,n=!0,i.isProcessing||e(a)};return{schedule:vx.reduce((_,b)=>{const P=o[b];return _[b]=(L,R=!1,$=!1)=>(r||d(),P.schedule(L,R,$)),_},{}),cancel:_=>vx.forEach(b=>o[b].cancel(_)),state:i,steps:o}}const{schedule:ro,cancel:uh,state:os,steps:VO}=$$e(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zo,!0),z$e={useVisualState:UK({scrapeMotionValuesFromProps:BK,createRenderState:NK,onMount:(e,t,{renderState:r,latestValues:n})=>{ro.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ro.render(()=>{m3(r,n,{enableHardwareAcceleration:!1},g3(t.tagName),e.transformTemplate),zK(t,r)})}})},B$e={useVisualState:UK({scrapeMotionValuesFromProps:v3,createRenderState:p3})};function j$e(e,{forwardMotionProps:t=!1},r,n){return{...h3(e)?z$e:B$e,preloadedFeatures:r,useRender:M$e(t),createVisualElement:n,Component:e}}function Zf(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const VK=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function IA(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const U$e=e=>t=>VK(t)&&e(t,IA(t));function Jf(e,t,r,n){return Zf(e,t,U$e(r),n)}const V$e=(e,t)=>r=>t(e(r)),od=(...e)=>e.reduce(V$e);function GK(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const gU=GK("dragHorizontal"),vU=GK("dragVertical");function qK(e){let t=!1;if(e==="y")t=vU();else if(e==="x")t=gU();else{const r=gU(),n=vU();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function WK(){const e=qK(!0);return e?(e(),!1):!0}class kd{constructor(t){this.isMounted=!1,this.node=t}update(){}}function yU(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),i=(o,s)=>{if(o.type==="touch"||WK())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[n]&&ro.update(()=>a[n](o,s))};return Jf(e.current,r,i,{passive:!e.getProps()[n]})}class G$e extends kd{mount(){this.unmount=od(yU(this.node,!0),yU(this.node,!1))}unmount(){}}class q$e extends kd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=od(Zf(this.node.current,"focus",()=>this.onFocus()),Zf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const XK=(e,t)=>t?e===t?!0:XK(e,t.parentElement):!1;function GO(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,IA(r))}class W$e extends kd{constructor(){super(...arguments),this.removeStartListeners=Zo,this.removeEndListeners=Zo,this.removeAccessibleListeners=Zo,this.startPointerPress=(t,r)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),o=Jf(window,"pointerup",(a,d)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:g}=this.node.getProps();ro.update(()=>{XK(this.node.current,a.target)?f&&f(a,d):g&&g(a,d)})},{passive:!(n.onTap||n.onPointerUp)}),s=Jf(window,"pointercancel",(a,d)=>this.cancelPress(a,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=od(o,s),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||GO("up",(d,f)=>{const{onTap:g}=this.node.getProps();g&&ro.update(()=>g(d,f))})};this.removeEndListeners(),this.removeEndListeners=Zf(this.node.current,"keyup",s),GO("down",(a,d)=>{this.startPress(a,d)})},r=Zf(this.node.current,"keydown",t),n=()=>{this.isPressing&&GO("cancel",(o,s)=>this.cancelPress(o,s))},i=Zf(this.node.current,"blur",n);this.removeAccessibleListeners=od(r,i)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ro.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!WK()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ro.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=Jf(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Zf(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=od(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const _L=new WeakMap,qO=new WeakMap,X$e=e=>{const t=_L.get(e.target);t&&t(e)},Y$e=e=>{e.forEach(X$e)};function H$e({root:e,...t}){const r=e||document;qO.has(r)||qO.set(r,{});const n=qO.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(Y$e,{root:e,...t})),n[i]}function Z$e(e,t,r){const n=H$e(t);return _L.set(e,r),n.observe(e),()=>{_L.delete(e),n.unobserve(e)}}const K$e={some:0,all:1};class J$e extends kd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:o}=t,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:K$e[i]},a=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:_}=this.node.getProps(),b=f?g:_;b&&b(d)};return Z$e(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Q$e(t,r))&&this.startObserver()}unmount(){}}function Q$e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const eze={inView:{Feature:J$e},tap:{Feature:W$e},focus:{Feature:q$e},hover:{Feature:G$e}};function YK(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function tze(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function rze(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function OA(e,t,r){const n=e.getProps();return y3(n,t,r!==void 0?r:n.custom,tze(e),rze(e))}let nze=Zo,_3=Zo;const ad=e=>e*1e3,Qf=e=>e/1e3,ize={current:!1},HK=e=>Array.isArray(e)&&typeof e[0]=="number";function ZK(e){return!!(!e||typeof e=="string"&&KK[e]||HK(e)||Array.isArray(e)&&e.every(ZK))}const Wy=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,KK={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wy([0,.65,.55,1]),circOut:Wy([.55,0,1,.45]),backIn:Wy([.31,.01,.66,-.59]),backOut:Wy([.33,1.53,.69,.99])};function JK(e){if(e)return HK(e)?Wy(e):Array.isArray(e)?e.map(JK):KK[e]}function oze(e,t,r,{delay:n=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:d}={}){const f={[t]:r};d&&(f.offset=d);const g=JK(a);return Array.isArray(g)&&(f.easing=g),e.animate(f,{delay:n,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function aze(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const QK=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,sze=1e-7,uze=12;function lze(e,t,r,n,i){let o,s,a=0;do s=t+(r-t)/2,o=QK(s,n,i)-e,o>0?r=s:t=s;while(Math.abs(o)>sze&&++a<uze);return s}function B1(e,t,r,n){if(e===t&&r===n)return Zo;const i=o=>lze(o,0,1,e,r);return o=>o===0||o===1?o:QK(i(o),t,n)}const cze=B1(.42,0,1,1),fze=B1(0,0,.58,1),eJ=B1(.42,0,.58,1),hze=e=>Array.isArray(e)&&typeof e[0]!="number",tJ=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,rJ=e=>t=>1-e(1-t),nJ=e=>1-Math.sin(Math.acos(e)),b3=rJ(nJ),dze=tJ(b3),iJ=B1(.33,1.53,.69,.99),x3=rJ(iJ),pze=tJ(x3),mze=e=>(e*=2)<1?.5*x3(e):.5*(2-Math.pow(2,-10*(e-1))),gze={linear:Zo,easeIn:cze,easeInOut:eJ,easeOut:fze,circIn:nJ,circInOut:dze,circOut:b3,backIn:x3,backInOut:pze,backOut:iJ,anticipate:mze},_U=e=>{if(Array.isArray(e)){_3(e.length===4);const[t,r,n,i]=e;return B1(t,r,n,i)}else if(typeof e=="string")return gze[e];return e},w3=(e,t)=>r=>!!($1(r)&&v$e.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),oJ=(e,t,r)=>n=>{if(!$1(n))return n;const[i,o,s,a]=n.match(CA);return{[e]:parseFloat(i),[t]:parseFloat(o),[r]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},vze=e=>md(0,255,e),WO={...sm,transform:e=>Math.round(vze(e))},ip={test:w3("rgb","red"),parse:oJ("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+WO.transform(e)+", "+WO.transform(t)+", "+WO.transform(r)+", "+v0(g0.transform(n))+")"};function yze(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const bL={test:w3("#"),parse:yze,transform:ip.transform},cg={test:w3("hsl","hue"),parse:oJ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+hf.transform(v0(t))+", "+hf.transform(v0(r))+", "+v0(g0.transform(n))+")"},yu={test:e=>ip.test(e)||bL.test(e)||cg.test(e),parse:e=>ip.test(e)?ip.parse(e):cg.test(e)?cg.parse(e):bL.parse(e),transform:e=>$1(e)?e:e.hasOwnProperty("red")?ip.transform(e):cg.transform(e)},$o=(e,t,r)=>-r*e+r*t+e;function XO(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function _ze({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,o=0,s=0;if(!t)i=o=s=r;else{const a=r<.5?r*(1+t):r+t-r*t,d=2*r-a;i=XO(d,a,e+1/3),o=XO(d,a,e),s=XO(d,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:n}}const YO=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},bze=[bL,ip,cg],xze=e=>bze.find(t=>t.test(e));function bU(e){const t=xze(e);let r=t.parse(e);return t===cg&&(r=_ze(r)),r}const aJ=(e,t)=>{const r=bU(e),n=bU(t),i={...r};return o=>(i.red=YO(r.red,n.red,o),i.green=YO(r.green,n.green,o),i.blue=YO(r.blue,n.blue,o),i.alpha=$o(r.alpha,n.alpha,o),ip.transform(i))};function wze(e){var t,r;return isNaN(e)&&$1(e)&&(((t=e.match(CA))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(LK))===null||r===void 0?void 0:r.length)||0)>0}const sJ={regex:m$e,countKey:"Vars",token:"${v}",parse:Zo},uJ={regex:LK,countKey:"Colors",token:"${c}",parse:yu.parse},lJ={regex:CA,countKey:"Numbers",token:"${n}",parse:sm.parse};function HO(e,{regex:t,countKey:r,token:n,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(i)))}function hE(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&HO(r,sJ),HO(r,uJ),HO(r,lJ),r}function cJ(e){return hE(e).values}function fJ(e){const{values:t,numColors:r,numVars:n,tokenised:i}=hE(e),o=t.length;return s=>{let a=i;for(let d=0;d<o;d++)d<n?a=a.replace(sJ.token,s[d]):d<n+r?a=a.replace(uJ.token,yu.transform(s[d])):a=a.replace(lJ.token,v0(s[d]));return a}}const Eze=e=>typeof e=="number"?0:e;function Sze(e){const t=cJ(e);return fJ(e)(t.map(Eze))}const gd={test:wze,parse:cJ,createTransformer:fJ,getAnimatableNone:Sze},hJ=(e,t)=>r=>`${r>0?t:e}`;function dJ(e,t){return typeof e=="number"?r=>$o(e,t,r):yu.test(e)?aJ(e,t):e.startsWith("var(")?hJ(e,t):mJ(e,t)}const pJ=(e,t)=>{const r=[...e],n=r.length,i=e.map((o,s)=>dJ(o,t[s]));return o=>{for(let s=0;s<n;s++)r[s]=i[s](o);return r}},Pze=(e,t)=>{const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=dJ(e[i],t[i]));return i=>{for(const o in n)r[o]=n[o](i);return r}},mJ=(e,t)=>{const r=gd.createTransformer(t),n=hE(e),i=hE(t);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?od(pJ(n.values,i.values),r):hJ(e,t)},i_=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},xU=(e,t)=>r=>$o(e,t,r);function Aze(e){return typeof e=="number"?xU:typeof e=="string"?yu.test(e)?aJ:mJ:Array.isArray(e)?pJ:typeof e=="object"?Pze:xU}function Cze(e,t,r){const n=[],i=r||Aze(e[0]),o=e.length-1;for(let s=0;s<o;s++){let a=i(e[s],e[s+1]);if(t){const d=Array.isArray(t)?t[s]||Zo:t;a=od(d,a)}n.push(a)}return n}function gJ(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const o=e.length;if(_3(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=Cze(t,n,i),a=s.length,d=f=>{let g=0;if(a>1)for(;g<e.length-2&&!(f<e[g+1]);g++);const _=i_(e[g],e[g+1],f);return s[g](_)};return r?f=>d(md(e[0],e[o-1],f)):d}function Ize(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=i_(0,t,n);e.push($o(r,1,i))}}function Oze(e){const t=[0];return Ize(t,e.length-1),t}function Tze(e,t){return e.map(r=>r*t)}function Mze(e,t){return e.map(()=>t||eJ).splice(0,e.length-1)}function dE({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=hze(n)?n.map(_U):_U(n),o={done:!1,value:t[0]},s=Tze(r&&r.length===t.length?r:Oze(t),e),a=gJ(s,t,{ease:Array.isArray(i)?i:Mze(t,i)});return{calculatedDuration:e,next:d=>(o.value=a(d),o.done=d>=e,o)}}function vJ(e,t){return t?e*(1e3/t):0}const Lze=5;function yJ(e,t,r){const n=Math.max(t-Lze,0);return vJ(r-e(n),t-n)}const ZO=.001,Rze=.01,wU=10,kze=.05,Dze=1;function Nze({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,o;nze(e<=ad(wU));let s=1-t;s=md(kze,Dze,s),e=md(Rze,wU,Qf(e)),s<1?(i=f=>{const g=f*s,_=g*e,b=g-r,P=xL(f,s),L=Math.exp(-_);return ZO-b/P*L},o=f=>{const _=f*s*e,b=_*r+r,P=Math.pow(s,2)*Math.pow(f,2)*e,L=Math.exp(-_),R=xL(Math.pow(f,2),s);return(-i(f)+ZO>0?-1:1)*((b-P)*L)/R}):(i=f=>{const g=Math.exp(-f*e),_=(f-r)*e+1;return-ZO+g*_},o=f=>{const g=Math.exp(-f*e),_=(r-f)*(e*e);return g*_});const a=5/e,d=$ze(i,o,a);if(e=ad(e),isNaN(d))return{stiffness:100,damping:10,duration:e};{const f=Math.pow(d,2)*n;return{stiffness:f,damping:s*2*Math.sqrt(n*f),duration:e}}}const Fze=12;function $ze(e,t,r){let n=r;for(let i=1;i<Fze;i++)n=n-e(n)/t(n);return n}function xL(e,t){return e*Math.sqrt(1-t*t)}const zze=["duration","bounce"],Bze=["stiffness","damping","mass"];function EU(e,t){return t.some(r=>e[r]!==void 0)}function jze(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!EU(e,Bze)&&EU(e,zze)){const r=Nze(e);t={...t,...r,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function _J({keyframes:e,restDelta:t,restSpeed:r,...n}){const i=e[0],o=e[e.length-1],s={done:!1,value:i},{stiffness:a,damping:d,mass:f,velocity:g,duration:_,isResolvedFromDuration:b}=jze(n),P=g?-Qf(g):0,L=d/(2*Math.sqrt(a*f)),R=o-i,$=Qf(Math.sqrt(a/f)),F=Math.abs(R)<5;r||(r=F?.01:2),t||(t=F?.005:.5);let T;if(L<1){const x=xL($,L);T=N=>{const B=Math.exp(-L*$*N);return o-B*((P+L*$*R)/x*Math.sin(x*N)+R*Math.cos(x*N))}}else if(L===1)T=x=>o-Math.exp(-$*x)*(R+(P+$*R)*x);else{const x=$*Math.sqrt(L*L-1);T=N=>{const B=Math.exp(-L*$*N),H=Math.min(x*N,300);return o-B*((P+L*$*R)*Math.sinh(H)+x*R*Math.cosh(H))/x}}return{calculatedDuration:b&&_||null,next:x=>{const N=T(x);if(b)s.done=x>=_;else{let B=P;x!==0&&(L<1?B=yJ(T,x,N):B=0);const H=Math.abs(B)<=r,Z=Math.abs(o-N)<=t;s.done=H&&Z}return s.value=s.done?o:N,s}}}function SU({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:d,restDelta:f=.5,restSpeed:g}){const _=e[0],b={done:!1,value:_},P=Y=>a!==void 0&&Y<a||d!==void 0&&Y>d,L=Y=>a===void 0?d:d===void 0||Math.abs(a-Y)<Math.abs(d-Y)?a:d;let R=r*t;const $=_+R,F=s===void 0?$:s($);F!==$&&(R=F-_);const T=Y=>-R*Math.exp(-Y/n),x=Y=>F+T(Y),N=Y=>{const W=T(Y),Q=x(Y);b.done=Math.abs(W)<=f,b.value=b.done?F:Q};let B,H;const Z=Y=>{P(b.value)&&(B=Y,H=_J({keyframes:[b.value,L(b.value)],velocity:yJ(x,Y,b.value),damping:i,stiffness:o,restDelta:f,restSpeed:g}))};return Z(0),{calculatedDuration:null,next:Y=>{let W=!1;return!H&&B===void 0&&(W=!0,N(Y),Z(Y)),B!==void 0&&Y>B?H.next(Y-B):(!W&&N(Y),b)}}}const Uze=e=>{const t=({timestamp:r})=>e(r);return{start:()=>ro.update(t,!0),stop:()=>uh(t),now:()=>os.isProcessing?os.timestamp:performance.now()}},PU=2e4;function AU(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<PU;)t+=r,n=e.next(t);return t>=PU?1/0:t}const Vze={decay:SU,inertia:SU,tween:dE,keyframes:dE,spring:_J};function pE({autoplay:e=!0,delay:t=0,driver:r=Uze,keyframes:n,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:d,onStop:f,onComplete:g,onUpdate:_,...b}){let P=1,L=!1,R,$;const F=()=>{$=new Promise(he=>{R=he})};F();let T;const x=Vze[i]||dE;let N;x!==dE&&typeof n[0]!="number"&&(N=gJ([0,100],n,{clamp:!1}),n=[0,100]);const B=x({...b,keyframes:n});let H;a==="mirror"&&(H=x({...b,keyframes:[...n].reverse(),velocity:-(b.velocity||0)}));let Z="idle",Y=null,W=null,Q=null;B.calculatedDuration===null&&o&&(B.calculatedDuration=AU(B));const{calculatedDuration:me}=B;let ge=1/0,be=1/0;me!==null&&(ge=me+s,be=ge*(o+1)-s);let oe=0;const Ie=he=>{if(W===null)return;P>0&&(W=Math.min(W,he)),P<0&&(W=Math.min(he-be/P,W)),Y!==null?oe=Y:oe=Math.round(he-W)*P;const ae=oe-t*(P>=0?1:-1),Te=P>=0?ae<0:ae>be;oe=Math.max(ae,0),Z==="finished"&&Y===null&&(oe=be);let Le=oe,Xe=B;if(o){const Lt=oe/ge;let pt=Math.floor(Lt),Ot=Lt%1;!Ot&&Lt>=1&&(Ot=1),Ot===1&&pt--,pt=Math.min(pt,o+1);const vt=!!(pt%2);vt&&(a==="reverse"?(Ot=1-Ot,s&&(Ot-=s/ge)):a==="mirror"&&(Xe=H));let Ze=md(0,1,Ot);oe>be&&(Ze=a==="reverse"&&vt?1:0),Le=Ze*ge}const $e=Te?{done:!1,value:n[0]}:Xe.next(Le);N&&($e.value=N($e.value));let{done:at}=$e;!Te&&me!==null&&(at=P>=0?oe>=be:oe<=0);const _t=Y===null&&(Z==="finished"||Z==="running"&&at);return _&&_($e.value),_t&&K(),$e},fe=()=>{T&&T.stop(),T=void 0},G=()=>{Z="idle",fe(),R(),F(),W=Q=null},K=()=>{Z="finished",g&&g(),fe(),R()},re=()=>{if(L)return;T||(T=r(Ie));const he=T.now();d&&d(),Y!==null?W=he-Y:(!W||Z==="finished")&&(W=he),Z==="finished"&&F(),Q=W,Y=null,Z="running",T.start()};e&&re();const ie={then(he,ae){return $.then(he,ae)},get time(){return Qf(oe)},set time(he){he=ad(he),oe=he,Y!==null||!T||P===0?Y=he:W=T.now()-he/P},get duration(){const he=B.calculatedDuration===null?AU(B):B.calculatedDuration;return Qf(he)},get speed(){return P},set speed(he){he===P||!T||(P=he,ie.time=Qf(oe))},get state(){return Z},play:re,pause:()=>{Z="paused",Y=oe},stop:()=>{L=!0,Z!=="idle"&&(Z="idle",f&&f(),G())},cancel:()=>{Q!==null&&Ie(Q),G()},complete:()=>{Z="finished"},sample:he=>(W=0,Ie(he))};return ie}function Gze(e){let t;return()=>(t===void 0&&(t=e()),t)}const qze=Gze(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Wze=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),yx=10,Xze=2e4,Yze=(e,t)=>t.type==="spring"||e==="backgroundColor"||!ZK(t.ease);function Hze(e,t,{onUpdate:r,onComplete:n,...i}){if(!(qze()&&Wze.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,a,d;const f=()=>{d=new Promise(T=>{a=T})};f();let{keyframes:g,duration:_=300,ease:b,times:P}=i;if(Yze(t,i)){const T=pE({...i,repeat:0,delay:0});let x={done:!1,value:g[0]};const N=[];let B=0;for(;!x.done&&B<Xze;)x=T.sample(B),N.push(x.value),B+=yx;P=void 0,g=N,_=B-yx,b="linear"}const L=oze(e.owner.current,t,g,{...i,duration:_,ease:b,times:P});i.syncStart&&(L.startTime=os.isProcessing?os.timestamp:document.timeline?document.timeline.currentTime:performance.now());const R=()=>L.cancel(),$=()=>{ro.update(R),a(),f()};return L.onfinish=()=>{e.set(aze(g,i)),n&&n(),$()},{then(T,x){return d.then(T,x)},attachTimeline(T){return L.timeline=T,L.onfinish=null,Zo},get time(){return Qf(L.currentTime||0)},set time(T){L.currentTime=ad(T)},get speed(){return L.playbackRate},set speed(T){L.playbackRate=T},get duration(){return Qf(_)},play:()=>{s||(L.play(),uh(R))},pause:()=>L.pause(),stop:()=>{if(s=!0,L.playState==="idle")return;const{currentTime:T}=L;if(T){const x=pE({...i,autoplay:!1});e.setWithVelocity(x.sample(T-yx).value,x.sample(T).value,yx)}$()},complete:()=>L.finish(),cancel:$}}function Zze({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const i=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Zo,pause:Zo,stop:Zo,then:o=>(o(),Promise.resolve()),cancel:Zo,complete:Zo});return t?pE({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const Kze={type:"spring",stiffness:500,damping:25,restSpeed:10},Jze=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Qze={type:"keyframes",duration:.8},eBe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tBe=(e,{keyframes:t})=>t.length>2?Qze:am.has(e)?e.startsWith("scale")?Jze(t[1]):Kze:eBe,wL=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gd.test(t)||t==="0")&&!t.startsWith("url(")),rBe=new Set(["brightness","contrast","saturate","opacity"]);function nBe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(CA)||[];if(!n)return e;const i=r.replace(n,"");let o=rBe.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+i+")"}const iBe=/([a-z-]*)\(.*?\)/g,EL={...gd,getAnimatableNone:e=>{const t=e.match(iBe);return t?t.map(nBe).join(" "):e}},oBe={...RK,color:yu,backgroundColor:yu,outlineColor:yu,fill:yu,stroke:yu,borderColor:yu,borderTopColor:yu,borderRightColor:yu,borderBottomColor:yu,borderLeftColor:yu,filter:EL,WebkitFilter:EL},E3=e=>oBe[e];function bJ(e,t){let r=E3(e);return r!==EL&&(r=gd),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const xJ=e=>/^0[^.\s]+$/.test(e);function aBe(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||xJ(e)}function sBe(e,t,r,n){const i=wL(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const s=n.from!==void 0?n.from:e.get();let a;const d=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?s:o[f-1]),aBe(o[f])&&d.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(a=o[f]);if(i&&d.length&&a)for(let f=0;f<d.length;f++){const g=d[f];o[g]=bJ(t,a)}return o}function uBe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:d,elapsed:f,...g}){return!!Object.keys(g).length}function S3(e,t){return e[t]||e.default||e}const P3=(e,t,r,n={})=>i=>{const o=S3(n,e)||{},s=o.delay||n.delay||0;let{elapsed:a=0}=n;a=a-ad(s);const d=sBe(t,e,r,o),f=d[0],g=d[d.length-1],_=wL(e,f),b=wL(e,g);let P={keyframes:d,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:L=>{t.set(L),o.onUpdate&&o.onUpdate(L)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(uBe(o)||(P={...P,...tBe(e,P)}),P.duration&&(P.duration=ad(P.duration)),P.repeatDelay&&(P.repeatDelay=ad(P.repeatDelay)),!_||!b||ize.current||o.type===!1)return Zze(P);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const L=Hze(t,e,P);if(L)return L}return pE(P)};function mE(e){return!!(Yu(e)&&e.add)}const wJ=e=>/^\-?\d*\.?\d+$/.test(e);function A3(e,t){e.indexOf(t)===-1&&e.push(t)}function C3(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class I3{constructor(){this.subscriptions=[]}add(t){return A3(this.subscriptions,t),()=>C3(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lBe=e=>!isNaN(parseFloat(e));class cBe{constructor(t,r={}){this.version="10.16.15",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:s}=os;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,ro.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ro.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=lBe(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new I3);const n=this.events[t].add(r);return t==="change"?()=>{n(),ro.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?vJ(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qg(e,t){return new cBe(e,t)}const EJ=e=>t=>t.test(e),fBe={test:e=>e==="auto",parse:e=>e},SJ=[sm,en,hf,$h,_$e,y$e,fBe],wy=e=>SJ.find(EJ(e)),hBe=[...SJ,yu,gd],dBe=e=>hBe.find(EJ(e));function pBe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,qg(r))}function mBe(e,t){const r=OA(e,t);let{transitionEnd:n={},transition:i={},...o}=r?e.makeTargetAnimatable(r,!1):{};o={...o,...n};for(const s in o){const a=R$e(o[s]);pBe(e,s,a)}}function gBe(e,t,r){var n,i;const o=Object.keys(t).filter(a=>!e.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const d=o[a],f=t[d];let g=null;Array.isArray(f)&&(g=f[0]),g===null&&(g=(i=(n=r[d])!==null&&n!==void 0?n:e.readValue(d))!==null&&i!==void 0?i:t[d]),g!=null&&(typeof g=="string"&&(wJ(g)||xJ(g))?g=parseFloat(g):!dBe(g)&&gd.test(f)&&(g=bJ(d,f)),e.addValue(d,qg(g,{owner:e})),r[d]===void 0&&(r[d]=g),g!==null&&e.setBaseTarget(d,g))}}function vBe(e,t){return t?(t[e]||t.default||t).from:void 0}function yBe(e,t,r){const n={};for(const i in e){const o=vBe(i,t);if(o!==void 0)n[i]=o;else{const s=r.getValue(i);s&&(n[i]=s.get())}}return n}function _Be({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function bBe(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function PJ(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const d=e.getValue("willChange");n&&(o=n);const f=[],g=i&&e.animationState&&e.animationState.getState()[i];for(const _ in a){const b=e.getValue(_),P=a[_];if(!b||P===void 0||g&&_Be(g,_))continue;const L={delay:r,elapsed:0,...S3(o||{},_)};let R=!0;if(window.HandoffAppearAnimations&&!b.hasAnimated){const T=e.getProps()[AK];if(T){const x=window.HandoffAppearAnimations(T,_,b,ro);x&&(R=!1,L.elapsed=x,L.syncStart=!0)}}let $=R&&!bBe(b,P);if(L.type==="spring"&&(b.getVelocity()||L.velocity)&&($=!1),b.animation&&($=!1),$)continue;b.start(P3(_,b,P,e.shouldReduceMotion&&am.has(_)?{type:!1}:L));const F=b.animation;mE(d)&&(d.add(_),F.then(()=>d.remove(_))),f.push(F)}return s&&Promise.all(f).then(()=>{s&&mBe(e,s)}),f}function SL(e,t,r={}){const n=OA(e,t,r.custom);let{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const o=n?()=>Promise.all(PJ(e,n,r)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:_}=i;return xBe(e,t,f+d,g,_,r)}:()=>Promise.resolve(),{when:a}=i;if(a){const[d,f]=a==="beforeChildren"?[o,s]:[s,o];return d().then(()=>f())}else return Promise.all([o(),s(r.delay)])}function xBe(e,t,r=0,n=0,i=1,o){const s=[],a=(e.variantChildren.size-1)*n,d=i===1?(f=0)=>f*n:(f=0)=>a-f*n;return Array.from(e.variantChildren).sort(wBe).forEach((f,g)=>{f.notify("AnimationStart",t),s.push(SL(f,t,{...o,delay:r+d(g)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(s)}function wBe(e,t){return e.sortNodePosition(t)}function EBe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(o=>SL(e,o,r));n=Promise.all(i)}else if(typeof t=="string")n=SL(e,t,r);else{const i=typeof t=="function"?OA(e,t,r.custom):t;n=Promise.all(PJ(e,i,r))}return n.then(()=>e.notify("AnimationComplete",t))}const SBe=[...l3].reverse(),PBe=l3.length;function ABe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>EBe(e,r,n)))}function CBe(e){let t=ABe(e);const r=OBe();let n=!0;const i=(d,f)=>{const g=OA(e,f);if(g){const{transition:_,transitionEnd:b,...P}=g;d={...d,...P,...b}}return d};function o(d){t=d(e)}function s(d,f){const g=e.getProps(),_=e.getVariantContext(!0)||{},b=[],P=new Set;let L={},R=1/0;for(let F=0;F<PBe;F++){const T=SBe[F],x=r[T],N=g[T]!==void 0?g[T]:_[T],B=r_(N),H=T===f?x.isActive:null;H===!1&&(R=F);let Z=N===_[T]&&N!==g[T]&&B;if(Z&&n&&e.manuallyAnimateOnMount&&(Z=!1),x.protectedKeys={...L},!x.isActive&&H===null||!N&&!x.prevProp||PA(N)||typeof N=="boolean")continue;const Y=IBe(x.prevProp,N);let W=Y||T===f&&x.isActive&&!Z&&B||F>R&&B;const Q=Array.isArray(N)?N:[N];let me=Q.reduce(i,{});H===!1&&(me={});const{prevResolvedValues:ge={}}=x,be={...ge,...me},oe=Ie=>{W=!0,P.delete(Ie),x.needsAnimating[Ie]=!0};for(const Ie in be){const fe=me[Ie],G=ge[Ie];L.hasOwnProperty(Ie)||(fe!==G?fE(fe)&&fE(G)?!YK(fe,G)||Y?oe(Ie):x.protectedKeys[Ie]=!0:fe!==void 0?oe(Ie):P.add(Ie):fe!==void 0&&P.has(Ie)?oe(Ie):x.protectedKeys[Ie]=!0)}x.prevProp=N,x.prevResolvedValues=me,x.isActive&&(L={...L,...me}),n&&e.blockInitialAnimation&&(W=!1),W&&!Z&&b.push(...Q.map(Ie=>({animation:Ie,options:{type:T,...d}})))}if(P.size){const F={};P.forEach(T=>{const x=e.getBaseTarget(T);x!==void 0&&(F[T]=x)}),b.push({animation:F})}let $=!!b.length;return n&&(g.initial===!1||g.initial===g.animate)&&!e.manuallyAnimateOnMount&&($=!1),n=!1,$?t(b):Promise.resolve()}function a(d,f,g){var _;if(r[d].isActive===f)return Promise.resolve();(_=e.variantChildren)===null||_===void 0||_.forEach(P=>{var L;return(L=P.animationState)===null||L===void 0?void 0:L.setActive(d,f)}),r[d].isActive=f;const b=s(g,d);for(const P in r)r[P].protectedKeys={};return b}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>r}}function IBe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!YK(t,e):!1}function Ud(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OBe(){return{animate:Ud(!0),whileInView:Ud(),whileHover:Ud(),whileTap:Ud(),whileDrag:Ud(),whileFocus:Ud(),exit:Ud()}}class TBe extends kd{constructor(t){super(t),t.animationState||(t.animationState=CBe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),PA(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let MBe=0;class LBe extends kd{constructor(){super(...arguments),this.id=MBe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const RBe={animation:{Feature:TBe},exit:{Feature:LBe}},CU=(e,t)=>Math.abs(e-t);function kBe(e,t){const r=CU(e.x,t.x),n=CU(e.y,t.y);return Math.sqrt(r**2+n**2)}class AJ{constructor(t,r,{transformPagePoint:n,contextWindow:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=JO(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,b=kBe(g.offset,{x:0,y:0})>=3;if(!_&&!b)return;const{point:P}=g,{timestamp:L}=os;this.history.push({...P,timestamp:L});const{onStart:R,onMove:$}=this.handlers;_||(R&&R(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),$&&$(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=KO(_,this.transformPagePoint),ro.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:b,onSessionEnd:P}=this.handlers,L=JO(g.type==="pointercancel"?this.lastMoveEventInfo:KO(_,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,L),P&&P(g,L)},!VK(t))return;this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const o=IA(t),s=KO(o,this.transformPagePoint),{point:a}=s,{timestamp:d}=os;this.history=[{...a,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,JO(s,this.history)),this.removeListeners=od(Jf(this.contextWindow,"pointermove",this.handlePointerMove),Jf(this.contextWindow,"pointerup",this.handlePointerUp),Jf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),uh(this.updatePoint)}}function KO(e,t){return t?{point:t(e.point)}:e}function IU(e,t){return{x:e.x-t.x,y:e.y-t.y}}function JO({point:e},t){return{point:e,delta:IU(e,CJ(t)),offset:IU(e,DBe(t)),velocity:NBe(t,.1)}}function DBe(e){return e[0]}function CJ(e){return e[e.length-1]}function NBe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=CJ(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>ad(t)));)r--;if(!n)return{x:0,y:0};const o=Qf(i.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Tl(e){return e.max-e.min}function PL(e,t=0,r=.01){return Math.abs(e-t)<=r}function OU(e,t,r,n=.5){e.origin=n,e.originPoint=$o(t.min,t.max,e.origin),e.scale=Tl(r)/Tl(t),(PL(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=$o(r.min,r.max,e.origin)-e.originPoint,(PL(e.translate)||isNaN(e.translate))&&(e.translate=0)}function y0(e,t,r,n){OU(e.x,t.x,r.x,n?n.originX:void 0),OU(e.y,t.y,r.y,n?n.originY:void 0)}function TU(e,t,r){e.min=r.min+t.min,e.max=e.min+Tl(t)}function FBe(e,t,r){TU(e.x,t.x,r.x),TU(e.y,t.y,r.y)}function MU(e,t,r){e.min=t.min-r.min,e.max=e.min+Tl(t)}function _0(e,t,r){MU(e.x,t.x,r.x),MU(e.y,t.y,r.y)}function $Be(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?$o(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?$o(r,e,n.max):Math.min(e,r)),e}function LU(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function zBe(e,{top:t,left:r,bottom:n,right:i}){return{x:LU(e.x,r,i),y:LU(e.y,t,n)}}function RU(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function BBe(e,t){return{x:RU(e.x,t.x),y:RU(e.y,t.y)}}function jBe(e,t){let r=.5;const n=Tl(e),i=Tl(t);return i>n?r=i_(t.min,t.max-n,e.min):n>i&&(r=i_(e.min,e.max-i,t.min)),md(0,1,r)}function UBe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const AL=.35;function VBe(e=AL){return e===!1?e=0:e===!0&&(e=AL),{x:kU(e,"left","right"),y:kU(e,"top","bottom")}}function kU(e,t,r){return{min:DU(e,t),max:DU(e,r)}}function DU(e,t){return typeof e=="number"?e:e[t]||0}const NU=()=>({translate:0,scale:1,origin:0,originPoint:0}),fg=()=>({x:NU(),y:NU()}),FU=()=>({min:0,max:0}),ya=()=>({x:FU(),y:FU()});function ef(e){return[e("x"),e("y")]}function IJ({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function GBe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qBe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function QO(e){return e===void 0||e===1}function CL({scale:e,scaleX:t,scaleY:r}){return!QO(e)||!QO(t)||!QO(r)}function Xd(e){return CL(e)||OJ(e)||e.z||e.rotate||e.rotateX||e.rotateY}function OJ(e){return $U(e.x)||$U(e.y)}function $U(e){return e&&e!=="0%"}function gE(e,t,r){const n=e-r,i=t*n;return r+i}function zU(e,t,r,n,i){return i!==void 0&&(e=gE(e,i,n)),gE(e,r,n)+t}function IL(e,t=0,r=1,n,i){e.min=zU(e.min,t,r,n,i),e.max=zU(e.max,t,r,n,i)}function TJ(e,{x:t,y:r}){IL(e.x,t.translate,t.scale,t.originPoint),IL(e.y,r.translate,r.scale,r.originPoint)}function WBe(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let o,s;for(let a=0;a<i;a++){o=r[a],s=o.projectionDelta;const d=o.instance;d&&d.style&&d.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&hg(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,TJ(e,s)),n&&Xd(o.latestValues)&&hg(e,o.latestValues))}t.x=BU(t.x),t.y=BU(t.y)}function BU(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Vh(e,t){e.min=e.min+t,e.max=e.max+t}function jU(e,t,[r,n,i]){const o=t[i]!==void 0?t[i]:.5,s=$o(e.min,e.max,o);IL(e,t[r],t[n],s,t.scale)}const XBe=["x","scaleX","originX"],YBe=["y","scaleY","originY"];function hg(e,t){jU(e.x,t,XBe),jU(e.y,t,YBe)}function MJ(e,t){return IJ(qBe(e.getBoundingClientRect(),t))}function HBe(e,t,r){const n=MJ(e,r),{scroll:i}=t;return i&&(Vh(n.x,i.offset.x),Vh(n.y,i.offset.y)),n}const LJ=({current:e})=>e?e.ownerDocument.defaultView:null,ZBe=new WeakMap;class KBe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ya(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=d=>{this.stopAnimation(),r&&this.snapToCursor(IA(d,"page").point)},o=(d,f)=>{const{drag:g,dragPropagation:_,onDragStart:b}=this.getProps();if(g&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=qK(g),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ef(L=>{let R=this.getAxisMotionValue(L).get()||0;if(hf.test(R)){const{projection:$}=this.visualElement;if($&&$.layout){const F=$.layout.layoutBox[L];F&&(R=Tl(F)*(parseFloat(R)/100))}}this.originPoint[L]=R}),b&&ro.update(()=>b(d,f),!1,!0);const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},s=(d,f)=>{const{dragPropagation:g,dragDirectionLock:_,onDirectionLock:b,onDrag:P}=this.getProps();if(!g&&!this.openGlobalLock)return;const{offset:L}=f;if(_&&this.currentDirection===null){this.currentDirection=JBe(L),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,L),this.updateAxis("y",f.point,L),this.visualElement.render(),P&&P(d,f)},a=(d,f)=>this.stop(d,f);this.panSession=new AJ(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),contextWindow:LJ(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ro.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!_x(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let s=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(s=$Be(s,this.constraints[t],this.elastic[t])),o.set(s)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&lg(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=zBe(i.layoutBox,r):this.constraints=!1,this.elastic=VBe(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ef(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=UBe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!lg(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=HBe(n,i.root,this.visualElement.getTransformPagePoint());let s=BBe(i.layout.layoutBox,o);if(r){const a=r(GBe(s));this.hasMutatedConstraints=!!a,a&&(s=IJ(a))}return s}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),d=this.constraints||{},f=ef(g=>{if(!_x(g,r,this.currentDirection))return;let _=d&&d[g]||{};s&&(_={min:0,max:0});const b=i?200:1e6,P=i?40:1e7,L={type:"inertia",velocity:n?t[g]:0,bounceStiffness:b,bounceDamping:P,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(g,L)});return Promise.all(f).then(a)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(P3(t,n,0,r))}stopAnimation(){ef(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ef(r=>{const{drag:n}=this.getProps();if(!_x(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(r);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[r];o.set(t[r]-$o(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!lg(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ef(s=>{const a=this.getAxisMotionValue(s);if(a){const d=a.get();i[s]=jBe({min:d,max:d},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ef(s=>{if(!_x(s,t,null))return;const a=this.getAxisMotionValue(s),{min:d,max:f}=this.constraints[s];a.set($o(d,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;ZBe.set(this.visualElement,this);const t=this.visualElement.current,r=Jf(t,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();lg(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const s=Zf(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(ef(g=>{const _=this.getAxisMotionValue(g);_&&(this.originPoint[g]+=d[g].translate,_.set(_.get()+d[g].translate))}),this.visualElement.render())});return()=>{s(),r(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=AL,dragMomentum:a=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function _x(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function JBe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class QBe extends kd{constructor(t){super(t),this.removeGroupControls=Zo,this.removeListeners=Zo,this.controls=new KBe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zo}unmount(){this.removeGroupControls(),this.removeListeners()}}const UU=e=>(t,r)=>{e&&ro.update(()=>e(t,r))};class e8e extends kd{constructor(){super(...arguments),this.removePointerDownListener=Zo}onPointerDown(t){this.session=new AJ(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LJ(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:UU(t),onStart:UU(r),onMove:n,onEnd:(o,s)=>{delete this.session,i&&ro.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=Jf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function t8e(){const e=ne.useContext(EA);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,i=ne.useId();return ne.useEffect(()=>n(i),[]),!t&&r?[!1,()=>r&&r(i)]:[!0]}const Zx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function VU(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ey={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(en.test(e))e=parseFloat(e);else return e;const r=VU(e,t.target.x),n=VU(e,t.target.y);return`${r}% ${n}%`}},r8e={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=gd.parse(e);if(i.length>5)return n;const o=gd.createTransformer(e),s=typeof i[0]!="number"?1:0,a=r.x.scale*t.x,d=r.y.scale*t.y;i[0+s]/=a,i[1+s]/=d;const f=$o(a,d,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};class n8e extends Tr.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:o}=t;f$e(i8e),o&&(r.group&&r.group.add(o),n&&n.register&&i&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Zx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:o}=this.props,s=n.projection;return s&&(s.isPresent=o,i||t.layoutDependency!==r||r===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||ro.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function RJ(e){const[t,r]=t8e(),n=ne.useContext(f3);return Tr.createElement(n8e,{...e,layoutGroup:n,switchLayoutGroup:ne.useContext(IK),isPresent:t,safeToRemove:r})}const i8e={borderRadius:{...Ey,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ey,borderTopRightRadius:Ey,borderBottomLeftRadius:Ey,borderBottomRightRadius:Ey,boxShadow:r8e},kJ=["TopLeft","TopRight","BottomLeft","BottomRight"],o8e=kJ.length,GU=e=>typeof e=="string"?parseFloat(e):e,qU=e=>typeof e=="number"||en.test(e);function a8e(e,t,r,n,i,o){i?(e.opacity=$o(0,r.opacity!==void 0?r.opacity:1,s8e(n)),e.opacityExit=$o(t.opacity!==void 0?t.opacity:1,0,u8e(n))):o&&(e.opacity=$o(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let s=0;s<o8e;s++){const a=`border${kJ[s]}Radius`;let d=WU(t,a),f=WU(r,a);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||qU(d)===qU(f)?(e[a]=Math.max($o(GU(d),GU(f),n),0),(hf.test(f)||hf.test(d))&&(e[a]+="%")):e[a]=f}(t.rotate||r.rotate)&&(e.rotate=$o(t.rotate||0,r.rotate||0,n))}function WU(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const s8e=DJ(0,.5,b3),u8e=DJ(.5,.95,Zo);function DJ(e,t,r){return n=>n<e?0:n>t?1:r(i_(e,t,n))}function XU(e,t){e.min=t.min,e.max=t.max}function Yl(e,t){XU(e.x,t.x),XU(e.y,t.y)}function YU(e,t,r,n,i){return e-=t,e=gE(e,1/r,n),i!==void 0&&(e=gE(e,1/i,n)),e}function l8e(e,t=0,r=1,n=.5,i,o=e,s=e){if(hf.test(t)&&(t=parseFloat(t),t=$o(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=$o(o.min,o.max,n);e===o&&(a-=t),e.min=YU(e.min,t,r,a,i),e.max=YU(e.max,t,r,a,i)}function HU(e,t,[r,n,i],o,s){l8e(e,t[r],t[n],t[i],t.scale,o,s)}const c8e=["x","scaleX","originX"],f8e=["y","scaleY","originY"];function ZU(e,t,r,n){HU(e.x,t,c8e,r?r.x:void 0,n?n.x:void 0),HU(e.y,t,f8e,r?r.y:void 0,n?n.y:void 0)}function KU(e){return e.translate===0&&e.scale===1}function NJ(e){return KU(e.x)&&KU(e.y)}function h8e(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function FJ(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function JU(e){return Tl(e.x)/Tl(e.y)}class d8e{constructor(){this.members=[]}add(t){A3(this.members,t),t.scheduleRender()}remove(t){if(C3(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QU(e,t,r){let n="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(n=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:d,rotateX:f,rotateY:g}=r;d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),g&&(n+=`rotateY(${g}deg) `)}const s=e.x.scale*t.x,a=e.y.scale*t.y;return(s!==1||a!==1)&&(n+=`scale(${s}, ${a})`),n||"none"}const p8e=(e,t)=>e.depth-t.depth;class m8e{constructor(){this.children=[],this.isDirty=!1}add(t){A3(this.children,t),this.isDirty=!0}remove(t){C3(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(p8e),this.isDirty=!1,this.children.forEach(t)}}function g8e(e,t){const r=performance.now(),n=({timestamp:i})=>{const o=i-r;o>=t&&(uh(n),e(o-t))};return ro.read(n,!0),()=>uh(n)}function v8e(e){window.MotionDebug&&window.MotionDebug.record(e)}function y8e(e){return e instanceof SVGElement&&e.tagName!=="svg"}function _8e(e,t,r){const n=Yu(e)?e:qg(e);return n.start(P3("",n,t,r)),n.animation}const eV=["","X","Y","Z"],b8e={visibility:"hidden"},tV=1e3;let x8e=0;const Yd={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $J({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=x8e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yd.totalNodes=Yd.resolvedTargetDeltas=Yd.recalculatedProjection=0,this.nodes.forEach(S8e),this.nodes.forEach(O8e),this.nodes.forEach(T8e),this.nodes.forEach(P8e),v8e(Yd)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new m8e)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new I3),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const d=this.eventHandlers.get(s);d&&d.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=y8e(s),this.instance=s;const{layoutId:d,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(f||d)&&(this.isLayoutDirty=!0),e){let _;const b=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=g8e(b,250),Zx.hasAnimatedSinceResize&&(Zx.hasAnimatedSinceResize=!1,this.nodes.forEach(nV))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&g&&(d||f)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:b,hasRelativeTargetChanged:P,layout:L})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||g.getDefaultTransition()||D8e,{onLayoutAnimationStart:$,onLayoutAnimationComplete:F}=g.getProps(),T=!this.targetLayout||!FJ(this.targetLayout,L)||P,x=!b&&P;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||b&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,x);const N={...S3(R,"layout"),onPlay:$,onComplete:F};(g.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else b||nV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=L})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,uh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(M8e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const _=this.path[g];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:a,layout:d}=this.options;if(a===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rV);return}this.isUpdating||this.nodes.forEach(C8e),this.isUpdating=!1,this.nodes.forEach(I8e),this.nodes.forEach(w8e),this.nodes.forEach(E8e),this.clearAllSnapshots();const a=performance.now();os.delta=md(0,1e3/60,a-os.timestamp),os.timestamp=a,os.isProcessing=!0,VO.update.process(os),VO.preRender.process(os),VO.render.process(os),os.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(A8e),this.sharedNodes.forEach(L8e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ro.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ro.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ya(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!NJ(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;s&&(a||Xd(this.latestValues)||g)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let d=this.removeElementScroll(a);return s&&(d=this.removeTransform(d)),N8e(d),{animationId:this.root.animationId,measuredBox:a,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return ya();const a=s.measureViewportBox(),{scroll:d}=this.root;return d&&(Vh(a.x,d.offset.x),Vh(a.y,d.offset.y)),a}removeElementScroll(s){const a=ya();Yl(a,s);for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:_}=f;if(f!==this.root&&g&&_.layoutScroll){if(g.isRoot){Yl(a,s);const{scroll:b}=this.root;b&&(Vh(a.x,-b.offset.x),Vh(a.y,-b.offset.y))}Vh(a.x,g.offset.x),Vh(a.y,g.offset.y)}}return a}applyTransform(s,a=!1){const d=ya();Yl(d,s);for(let f=0;f<this.path.length;f++){const g=this.path[f];!a&&g.options.layoutScroll&&g.scroll&&g!==g.root&&hg(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Xd(g.latestValues)&&hg(d,g.latestValues)}return Xd(this.latestValues)&&hg(d,this.latestValues),d}removeTransform(s){const a=ya();Yl(a,s);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Xd(f.latestValues))continue;CL(f.latestValues)&&f.updateSnapshot();const g=ya(),_=f.measurePageBox();Yl(g,_),ZU(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Xd(this.latestValues)&&ZU(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==os.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(s||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:_,layoutId:b}=this.options;if(!(!this.layout||!(_||b))){if(this.resolvedRelativeTargetAt=os.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ya(),this.relativeTargetOrigin=ya(),_0(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),Yl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ya(),this.targetWithTransforms=ya()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FBe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yl(this.target,this.layout.layoutBox),TJ(this.target,this.targetDelta)):Yl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ya(),this.relativeTargetOrigin=ya(),_0(this.relativeTargetOrigin,this.target,P.target),Yl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yd.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||CL(this.parent.latestValues)||OJ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),d=!!this.resumingFrom||this!==a;let f=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===os.timestamp&&(f=!1),f)return;const{layout:g,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||_))return;Yl(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,P=this.treeScale.y;WBe(this.layoutCorrected,this.treeScale,this.path,d),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:L}=a;if(!L){this.projectionTransform&&(this.projectionDelta=fg(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=fg(),this.projectionDeltaWithTransform=fg());const R=this.projectionTransform;y0(this.projectionDelta,this.layoutCorrected,L,this.latestValues),this.projectionTransform=QU(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==b||this.treeScale.y!==P)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",L)),Yd.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},_=fg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const b=ya(),P=d?d.source:void 0,L=this.layout?this.layout.source:void 0,R=P!==L,$=this.getStack(),F=!$||$.members.length<=1,T=!!(R&&!F&&this.options.crossfade===!0&&!this.path.some(k8e));this.animationProgress=0;let x;this.mixTargetDelta=N=>{const B=N/1e3;iV(_.x,s.x,B),iV(_.y,s.y,B),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_0(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R8e(this.relativeTarget,this.relativeTargetOrigin,b,B),x&&h8e(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ya()),Yl(x,this.relativeTarget)),R&&(this.animationValues=g,a8e(g,f,this.latestValues,B,T,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(uh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ro.update(()=>{Zx.hasAnimatedSinceResize=!0,this.currentAnimation=_8e(0,tV,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:d,layout:f,latestValues:g}=s;if(!(!a||!d||!f)){if(this!==s&&this.layout&&f&&zJ(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||ya();const _=Tl(this.layout.layoutBox.x);d.x.min=s.target.x.min,d.x.max=d.x.min+_;const b=Tl(this.layout.layoutBox.y);d.y.min=s.target.y.min,d.y.max=d.y.min+b}Yl(a,d),hg(a,g),y0(this.projectionDeltaWithTransform,this.layoutCorrected,a,g)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new d8e),this.sharedNodes.get(s).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:d}=s;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(a=!0),!a)return;const f={};for(let g=0;g<eV.length;g++){const _="rotate"+eV[g];d[_]&&(f[_]=d[_],s.setStaticValue(_,0))}s.render();for(const g in f)s.setStaticValue(g,f[g]);s.scheduleRender()}getProjectionStyles(s){var a,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return b8e;const f={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Hx(s==null?void 0:s.pointerEvents)||"",f.transform=g?g(this.latestValues,""):"none",f;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=Hx(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Xd(this.latestValues)&&(R.transform=g?g({},""):"none",this.hasProjected=!1),R}const b=_.animationValues||_.latestValues;this.applyTransformsToTarget(),f.transform=QU(this.projectionDeltaWithTransform,this.treeScale,b),g&&(f.transform=g(b,f.transform));const{x:P,y:L}=this.projectionDelta;f.transformOrigin=`${P.origin*100}% ${L.origin*100}% 0`,_.animationValues?f.opacity=_===this?(d=(a=b.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:f.opacity=_===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const R in lE){if(b[R]===void 0)continue;const{correct:$,applyTo:F}=lE[R],T=f.transform==="none"?b[R]:$(b[R],_);if(F){const x=F.length;for(let N=0;N<x;N++)f[F[N]]=T}else f[R]=T}return this.options.layoutId&&(f.pointerEvents=_===this?Hx(s==null?void 0:s.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(rV),this.root.sharedNodes.clear()}}}function w8e(e){e.updateLayout()}function E8e(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:o}=e.options,s=r.source!==e.layout.source;o==="size"?ef(_=>{const b=s?r.measuredBox[_]:r.layoutBox[_],P=Tl(b);b.min=n[_].min,b.max=b.min+P}):zJ(o,r.layoutBox,n)&&ef(_=>{const b=s?r.measuredBox[_]:r.layoutBox[_],P=Tl(n[_]);b.max=b.min+P,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[_].max=e.relativeTarget[_].min+P)});const a=fg();y0(a,n,r.layoutBox);const d=fg();s?y0(d,e.applyTransform(i,!0),r.measuredBox):y0(d,n,r.layoutBox);const f=!NJ(a);let g=!1;if(!e.resumeFrom){const _=e.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:b,layout:P}=_;if(b&&P){const L=ya();_0(L,r.layoutBox,b.layoutBox);const R=ya();_0(R,n,P.layoutBox),FJ(L,R)||(g=!0),_.options.layoutRoot&&(e.relativeTarget=R,e.relativeTargetOrigin=L,e.relativeParent=_)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:d,layoutDelta:a,hasLayoutChanged:f,hasRelativeTargetChanged:g})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function S8e(e){Yd.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function P8e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function A8e(e){e.clearSnapshot()}function rV(e){e.clearMeasurements()}function C8e(e){e.isLayoutDirty=!1}function I8e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nV(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function O8e(e){e.resolveTargetDelta()}function T8e(e){e.calcProjection()}function M8e(e){e.resetRotation()}function L8e(e){e.removeLeadSnapshot()}function iV(e,t,r){e.translate=$o(t.translate,0,r),e.scale=$o(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function oV(e,t,r,n){e.min=$o(t.min,r.min,n),e.max=$o(t.max,r.max,n)}function R8e(e,t,r,n){oV(e.x,t.x,r.x,n),oV(e.y,t.y,r.y,n)}function k8e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const D8e={duration:.45,ease:[.4,0,.1,1]},aV=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),sV=aV("applewebkit/")&&!aV("chrome/")?Math.round:Zo;function uV(e){e.min=sV(e.min),e.max=sV(e.max)}function N8e(e){uV(e.x),uV(e.y)}function zJ(e,t,r){return e==="position"||e==="preserve-aspect"&&!PL(JU(t),JU(r),.2)}const F8e=$J({attachResizeListener:(e,t)=>Zf(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),eT={current:void 0},BJ=$J({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!eT.current){const e=new F8e({});e.mount(window),e.setOptions({layoutScroll:!0}),eT.current=e}return eT.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),$8e={pan:{Feature:e8e},drag:{Feature:QBe,ProjectionNode:BJ,MeasureLayout:RJ}},z8e=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function B8e(e){const t=z8e.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function OL(e,t,r=1){const[n,i]=B8e(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const s=o.trim();return wJ(s)?parseFloat(s):s}else return yL(i)?OL(i,t,r+1):i}function j8e(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(i=>{const o=i.get();if(!yL(o))return;const s=OL(o,n);s&&i.set(s)});for(const i in t){const o=t[i];if(!yL(o))continue;const s=OL(o,n);s&&(t[i]=s,r||(r={}),r[i]===void 0&&(r[i]=o))}return{target:t,transitionEnd:r}}const U8e=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),jJ=e=>U8e.has(e),V8e=e=>Object.keys(e).some(jJ),lV=e=>e===sm||e===en,cV=(e,t)=>parseFloat(e.split(", ")[t]),fV=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return cV(i[1],t);{const o=n.match(/^matrix\((.+)\)$/);return o?cV(o[1],e):0}},G8e=new Set(["x","y","z"]),q8e=F1.filter(e=>!G8e.has(e));function W8e(e){const t=[];return q8e.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Wg={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:fV(4,13),y:fV(5,14)};Wg.translateX=Wg.x;Wg.translateY=Wg.y;const X8e=(e,t,r)=>{const n=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(f=>{a[f]=Wg[f](n,o)}),t.render();const d=t.measureViewportBox();return r.forEach(f=>{const g=t.getValue(f);g&&g.jump(a[f]),e[f]=Wg[f](d,o)}),e},Y8e=(e,t,r={},n={})=>{t={...t},n={...n};const i=Object.keys(t).filter(jJ);let o=[],s=!1;const a=[];if(i.forEach(d=>{const f=e.getValue(d);if(!e.hasValue(d))return;let g=r[d],_=wy(g);const b=t[d];let P;if(fE(b)){const L=b.length,R=b[0]===null?1:0;g=b[R],_=wy(g);for(let $=R;$<L&&b[$]!==null;$++)P?_3(wy(b[$])===P):P=wy(b[$])}else P=wy(b);if(_!==P)if(lV(_)&&lV(P)){const L=f.get();typeof L=="string"&&f.set(parseFloat(L)),typeof b=="string"?t[d]=parseFloat(b):Array.isArray(b)&&P===en&&(t[d]=b.map(parseFloat))}else _!=null&&_.transform&&(P!=null&&P.transform)&&(g===0||b===0)?g===0?f.set(P.transform(g)):t[d]=_.transform(b):(s||(o=W8e(e),s=!0),a.push(d),n[d]=n[d]!==void 0?n[d]:t[d],f.jump(b))}),a.length){const d=a.indexOf("height")>=0?window.pageYOffset:null,f=X8e(t,e,a);return o.length&&o.forEach(([g,_])=>{e.getValue(g).set(_)}),e.render(),SA&&d!==null&&window.scrollTo({top:d}),{target:f,transitionEnd:n}}else return{target:t,transitionEnd:n}};function H8e(e,t,r,n){return V8e(t)?Y8e(e,t,r,n):{target:t,transitionEnd:n}}const Z8e=(e,t,r,n)=>{const i=j8e(e,t,n);return t=i.target,n=i.transitionEnd,H8e(e,t,r,n)},TL={current:null},UJ={current:!1};function K8e(){if(UJ.current=!0,!!SA)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>TL.current=e.matches;e.addListener(t),t()}else TL.current=!1}function J8e(e,t,r){const{willChange:n}=t;for(const i in t){const o=t[i],s=r[i];if(Yu(o))e.addValue(i,o),mE(n)&&n.add(i);else if(Yu(s))e.addValue(i,qg(o,{owner:e})),mE(n)&&n.remove(i);else if(s!==o)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(i);e.addValue(i,qg(a!==void 0?a:o,{owner:e}))}}for(const i in r)t[i]===void 0&&e.removeValue(i);return t}const hV=new WeakMap,VJ=Object.keys(n_),Q8e=VJ.length,dV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],eje=c3.length;class tje{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ro.render(this.render,!1,!0);const{latestValues:a,renderState:d}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=r.initial?{...a}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=AA(r),this.isVariantNode=CK(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(r,{});for(const _ in g){const b=g[_];a[_]!==void 0&&Yu(b)&&(b.set(a[_],!1),mE(f)&&f.add(_))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,hV.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),UJ.current||K8e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:TL.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hV.delete(this.current),this.projection&&this.projection.unmount(),uh(this.notifyUpdate),uh(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=am.has(t),i=r.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&ro.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,i,o){let s,a;for(let d=0;d<Q8e;d++){const f=VJ[d],{isEnabled:g,Feature:_,ProjectionNode:b,MeasureLayout:P}=n_[f];b&&(s=b),g(r)&&(!this.features[f]&&_&&(this.features[f]=new _(this)),P&&(a=P))}if(!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:f,drag:g,dragConstraints:_,layoutScroll:b,layoutRoot:P}=r;this.projection.setOptions({layoutId:d,layout:f,alwaysMeasureLayout:!!g||_&&lg(_),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:b,layoutRoot:P})}return a}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ya()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<dV.length;n++){const i=dV[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=J8e(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<eje;n++){const i=c3[n],o=this.props[i];(r_(o)||o===!1)&&(r[i]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=qg(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(r=y3(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Yu(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new I3),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class GJ extends tje{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:i},o){let s=yBe(n,t||{},this);if(i&&(r&&(r=i(r)),n&&(n=i(n)),s&&(s=i(s))),o){gBe(this,n,s);const a=Z8e(this,n,s,r);r=a.transitionEnd,n=a.target}return{transition:t,transitionEnd:r,...n}}}function rje(e){return window.getComputedStyle(e)}class nje extends GJ{readValueFromInstance(t,r){if(am.has(r)){const n=E3(r);return n&&n.default||0}else{const n=rje(t),i=(MK(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return MJ(t,r)}build(t,r,n,i){d3(t,r,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,r){return v3(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Yu(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,i){FK(t,r,n,i)}}class ije extends GJ{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(am.has(r)){const n=E3(r);return n&&n.default||0}return r=$K.has(r)?r:u3(r),t.getAttribute(r)}measureInstanceViewportBox(){return ya()}scrapeMotionValuesFromProps(t,r){return BK(t,r)}build(t,r,n,i){m3(t,r,n,this.isSVGTag,i.transformTemplate)}renderInstance(t,r,n,i){zK(t,r,n,i)}mount(t){this.isSVGTag=g3(t.tagName),super.mount(t)}}const oje=(e,t)=>h3(e)?new ije(t,{enableHardwareAcceleration:!1}):new nje(t,{enableHardwareAcceleration:!0}),aje={layout:{ProjectionNode:BJ,MeasureLayout:RJ}},sje={...RBe,...eze,...$8e,...aje},Oc=l$e((e,t)=>j$e(e,t,sje,oje));function qJ(){const e=ne.useRef(!1);return s3(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function uje(){const e=qJ(),[t,r]=ne.useState(0),n=ne.useCallback(()=>{e.current&&r(t+1)},[t]);return[ne.useCallback(()=>ro.postRender(n),[n]),t]}class lje extends ne.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function cje({children:e,isPresent:t}){const r=ne.useId(),n=ne.useRef(null),i=ne.useRef({width:0,height:0,top:0,left:0});return ne.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:d}=i.current;if(t||!n.current||!o||!s)return;n.current.dataset.motionPopId=r;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[t]),ne.createElement(lje,{isPresent:t,childRef:n,sizeRef:i},ne.cloneElement(e,{ref:n}))}const tT=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=jK(fje),d=ne.useId(),f=ne.useMemo(()=>({id:d,initial:t,isPresent:r,custom:i,onExitComplete:g=>{a.set(g,!0);for(const _ of a.values())if(!_)return;n&&n()},register:g=>(a.set(g,!1),()=>a.delete(g))}),o?void 0:[r]);return ne.useMemo(()=>{a.forEach((g,_)=>a.set(_,!1))},[r]),ne.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),s==="popLayout"&&(e=ne.createElement(cje,{isPresent:r},e)),ne.createElement(EA.Provider,{value:f},e)};function fje(){return new Map}function hje(e){return ne.useEffect(()=>()=>e(),[])}const Hd=e=>e.key||"";function dje(e,t){e.forEach(r=>{const n=Hd(r);t.set(n,r)})}function pje(e){const t=[];return ne.Children.forEach(e,r=>{ne.isValidElement(r)&&t.push(r)}),t}const TA=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=ne.useContext(f3).forceRender||uje()[0],d=qJ(),f=pje(e);let g=f;const _=ne.useRef(new Map).current,b=ne.useRef(g),P=ne.useRef(new Map).current,L=ne.useRef(!0);if(s3(()=>{L.current=!1,dje(f,P),b.current=g}),hje(()=>{L.current=!0,P.clear(),_.clear()}),L.current)return ne.createElement(ne.Fragment,null,g.map(T=>ne.createElement(tT,{key:Hd(T),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:s},T)));g=[...g];const R=b.current.map(Hd),$=f.map(Hd),F=R.length;for(let T=0;T<F;T++){const x=R[T];$.indexOf(x)===-1&&!_.has(x)&&_.set(x,void 0)}return s==="wait"&&_.size&&(g=[]),_.forEach((T,x)=>{if($.indexOf(x)!==-1)return;const N=P.get(x);if(!N)return;const B=R.indexOf(x);let H=T;if(!H){const Z=()=>{_.delete(x);const Y=Array.from(P.keys()).filter(W=>!$.includes(W));if(Y.forEach(W=>P.delete(W)),b.current=f.filter(W=>{const Q=Hd(W);return Q===x||Y.includes(Q)}),!_.size){if(d.current===!1)return;a(),n&&n()}};H=ne.createElement(tT,{key:Hd(N),isPresent:!1,onExitComplete:Z,custom:t,presenceAffectsLayout:o,mode:s},N),_.set(x,H)}g.splice(B,0,H)}),g=g.map(T=>{const x=T.key;return _.has(x)?T:ne.createElement(tT,{key:Hd(T),isPresent:!0,presenceAffectsLayout:o,mode:s},T)}),ne.createElement(ne.Fragment,null,_.size?g:g.map(T=>ne.cloneElement(T)))};function mje(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function gje(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var vje=["mousedown","touchstart"],yje=function(e,t,r){r===void 0&&(r=vje);var n=ne.useRef(t);ne.useEffect(function(){n.current=t},[t]),ne.useEffect(function(){for(var i=function(d){var f=e.current;f&&!f.contains(d.target)&&n.current(d)},o=0,s=r;o<s.length;o++){var a=s[o];mje(document,a,i)}return function(){for(var d=0,f=r;d<f.length;d++){var g=f[d];gje(document,g,i)}}},[r,e])};const _je=yje,Sy=48,bje=({color:e="currentColor",direction:t="left",distance:r="md",duration:n=.4,easing:i="cubic-bezier(0, 0, 0, 1)",hideOutline:o=!0,label:s,lines:a=3,onToggle:d,render:f,rounded:g=!1,size:_=32,toggle:b,toggled:P})=>{const[L,R]=ne.useState(!1),$=Math.max(12,Math.min(Sy,_)),F=Math.round((Sy-$)/2),T=$/12,x=Math.round(T),B=$/(a*((r==="lg"?.25:r==="sm"?.75:.5)+(a===3?1:1.25))),H=Math.round(B),Z=x*a+H*(a-1),Y=Math.round((Sy-Z)/2),W=a===3?r==="lg"?4.0425:r==="sm"?5.1625:4.6325:r==="lg"?6.7875:r==="sm"?8.4875:7.6675,Q=(T-x+(B-H))/(a===3?1:2),me=parseFloat(($/W-Q/(4/3)).toFixed(2)),ge=Math.max(0,n),be={cursor:"pointer",height:`${Sy}px`,position:"relative",transition:`${ge}s ${i}`,userSelect:"none",width:`${Sy}px`},oe={background:e,height:`${x}px`,left:`${F}px`,position:"absolute"};o&&(be.outline="none"),g&&(oe.borderRadius="9em");const Ie=b||R,fe=P!==void 0?P:L;return f({barHeight:x,barStyles:oe,burgerStyles:be,easing:i,handler:()=>{Ie(!fe),typeof d=="function"&&d(!fe)},isLeft:t==="left",isToggled:fe,label:s,margin:H,move:me,time:ge,topOffset:Y,width:$})};function ML(){return ML=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ML.apply(this,arguments)}const xje=e=>Tr.createElement(bje,ML({},e,{render:t=>Tr.createElement("div",{className:"hamburger-react","aria-label":t.label,"aria-expanded":t.isToggled,onClick:t.handler,onKeyUp:r=>r.key==="Enter"&&t.handler(),role:"button",style:{...t.burgerStyles,transform:`${t.isToggled?`rotate(${90*(t.isLeft?-1:1)}deg)`:"none"}`},tabIndex:0},Tr.createElement("div",{style:{transition:`${t.time/2}s ${t.easing} ${t.isToggled?"0s":`${t.time/2}s`}`,transform:`${t.isToggled?`translateY(${t.barHeight+t.margin}px)`:"none"}`}},Tr.createElement("div",{style:{...t.barStyles,width:`${t.width}px`,top:`${t.topOffset}px`,transition:`${t.time/2}s ${t.easing} ${t.isToggled?`${t.time/2}s`:"0s"}`,transform:`${t.isToggled?`rotate(${45*(t.isLeft?1:-1)}deg)`:"none"}`}})),Tr.createElement("div",{style:{transition:`${t.time/2}s ${t.easing}`,opacity:`${t.isToggled?"0":"1"}`}},Tr.createElement("div",{style:{...t.barStyles,width:`${t.width}px`,top:`${t.topOffset+t.barHeight+t.margin}px`,transition:`${t.time/2}s ${t.easing}`}})),Tr.createElement("div",{style:{transition:`${t.time/2}s ${t.easing} ${t.isToggled?"0s":`${t.time/2}s`}`,transform:`${t.isToggled?`translateY(-${t.barHeight+t.margin}px)`:"none"}`}},Tr.createElement("div",{style:{...t.barStyles,width:`${t.width}px`,top:`${t.topOffset+t.barHeight*2+t.margin*2}px`,transition:`${t.time/2}s ${t.easing} ${t.isToggled?`${t.time/2}s`:"0s"}`,transform:`${t.isToggled?`rotate(${45*(t.isLeft?-1:1)}deg)`:"none"}`}})))}));function wje({className:e,isOpen:t,setOpen:r,color:n,setColor:i,onClose:o}){return Qe.jsx("div",{className:ii("absolute z-30 p-1 top-20 left-5 hover:border-primary/70 rounded-2xl",t?"hover:border-rose-500 lg:p-3":"border-2 rounded-full bg-white/80",e),children:Qe.jsx(xje,{toggled:t,size:26,toggle:()=>r(!t),color:n,onToggle:s=>{s?i("#e11d48"):o()}})})}function Eje(){const e=Ct(a=>a.activeFilter),t=Ct(a=>a.getSortedPOIs()),r=Ct(a=>a.features),n=Ct(a=>a.setRouteFinish),i=Ct(a=>a.setActiveFilter),o=t.filter(a=>(Array.isArray(e.id)?e.id.includes(a.properties.amenity):a.properties.amenity===e.id)&&a.properties.type==="poi").sort((a,d)=>a.properties.title>d.properties.title?1:-1),s=a=>{const d=r.find(f=>f.id===a);n(d),i({})};return Qe.jsx(Qe.Fragment,{children:Qe.jsx(Oc.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.2},className:"fixed inset-x-0 bottom-0 z-10 p-5 border-2 rounded-lg lg:pt-12 lg:absolute bg-white/80 lg:top-20 lg:left-5 lg:inset-x-auto lg:bottom-auto",children:Qe.jsx("ul",{children:o.map((a,d)=>Qe.jsxs(Oc.li,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20,delay:.1+d/10},className:"font-semibold flex items-center justify-between px-1 py-2 border-b border-b-black/30 min-w-[320px] last:border-b-0 cursor-pointer group",onClick:()=>s(a.id),children:[Qe.jsx("span",{className:"text-lg group-hover:text-primary",children:a.properties.title}),Qe.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 text-sm text-center rounded-md bg-primary/70 text-primary-foreground group-hover:bg-primary",children:a.floorName})]},a.properties.id))})},"list")})}function pV({heading:e,color:t,items:r}){const n=Ct(o=>o.setActiveFilter),i=o=>{n(o)};return Qe.jsx(Qe.Fragment,{children:Qe.jsxs(TA,{children:[Qe.jsx(Oc.h1,{initial:{scale:2,opacity:0,filter:"blur(100px)"},animate:{scale:1,opacity:1,filter:"blur(0px)"},transition:{duration:.2},className:ii("text-md font-semibold mb-1 sm:text-xl sm:mb-2",t==="primary"&&"text-primary",t==="secondary"&&"text-secondary"),children:e},"heading"),Qe.jsx("ul",{className:"grid grid-cols-5 gap-2 mb-2 sm:mb-6",children:r.map((o,s)=>Qe.jsxs(Oc.li,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20,delay:.1+s/10},className:"w-12 text-center sm:w-16",children:[Qe.jsxs(uf,{size:"icon",variant:t==="primary"?"default":"secondary",className:"w-12 h-12 text-lg sm:w-16 sm:h-16 sm:text-2xl",onClick:()=>i(o),children:[o.icon&&Tr.createElement(o.icon),o.iconImage&&Qe.jsx("img",{src:o.iconImage,alt:tn(o.title)})]}),Qe.jsx("p",{className:"mt-1 overflow-hidden text-xs text-ellipsis whitespace-nowrap sm:overflow-auto sm:whitespace-normal",children:tn(o.title)})]},s))})]})})}function Sje(){const e=Ct(t=>t.filterItems);return Qe.jsx(Qe.Fragment,{children:Qe.jsxs(Oc.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.2},className:"absolute z-10 p-3 pt-12 border-2 rounded-lg bg-white/80 top-20 left-5 sm:p-5 sm:pt-16",children:[Qe.jsx(pV,{heading:tn("shops"),items:e.filter(t=>t.type==="list"),color:"primary"}),Qe.jsx(pV,{heading:tn("showTheClosest"),items:e.filter(t=>t.type==="closest"),color:"secondary"})]},"filters")})}const Pje=["top","right","bottom","left"],vd=Math.min,wl=Math.max,vE=Math.round,bx=Math.floor,yd=e=>({x:e,y:e}),Aje={left:"right",right:"left",bottom:"top",top:"bottom"},Cje={start:"end",end:"start"};function LL(e,t,r){return wl(e,vd(t,r))}function lh(e,t){return typeof e=="function"?e(t):e}function ch(e){return e.split("-")[0]}function Iv(e){return e.split("-")[1]}function O3(e){return e==="x"?"y":"x"}function T3(e){return e==="y"?"height":"width"}function Ov(e){return["top","bottom"].includes(ch(e))?"y":"x"}function M3(e){return O3(Ov(e))}function Ije(e,t,r){r===void 0&&(r=!1);const n=Iv(e),i=M3(e),o=T3(i);let s=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=yE(s)),[s,yE(s)]}function Oje(e){const t=yE(e);return[RL(e),t,RL(t)]}function RL(e){return e.replace(/start|end/g,t=>Cje[t])}function Tje(e,t,r){const n=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?o:s;default:return[]}}function Mje(e,t,r,n){const i=Iv(e);let o=Tje(ch(e),r==="start",n);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(RL)))),o}function yE(e){return e.replace(/left|right|bottom|top/g,t=>Aje[t])}function Lje(e){return{top:0,right:0,bottom:0,left:0,...e}}function WJ(e){return typeof e!="number"?Lje(e):{top:e,right:e,bottom:e,left:e}}function _E(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function mV(e,t,r){let{reference:n,floating:i}=e;const o=Ov(t),s=M3(t),a=T3(s),d=ch(t),f=o==="y",g=n.x+n.width/2-i.width/2,_=n.y+n.height/2-i.height/2,b=n[a]/2-i[a]/2;let P;switch(d){case"top":P={x:g,y:n.y-i.height};break;case"bottom":P={x:g,y:n.y+n.height};break;case"right":P={x:n.x+n.width,y:_};break;case"left":P={x:n.x-i.width,y:_};break;default:P={x:n.x,y:n.y}}switch(Iv(t)){case"start":P[s]-=b*(r&&f?-1:1);break;case"end":P[s]+=b*(r&&f?-1:1);break}return P}const Rje=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:s}=r,a=o.filter(Boolean),d=await(s.isRTL==null?void 0:s.isRTL(t));let f=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:g,y:_}=mV(f,n,d),b=n,P={},L=0;for(let R=0;R<a.length;R++){const{name:$,fn:F}=a[R],{x:T,y:x,data:N,reset:B}=await F({x:g,y:_,initialPlacement:n,placement:b,strategy:i,middlewareData:P,rects:f,platform:s,elements:{reference:e,floating:t}});if(g=T??g,_=x??_,P={...P,[$]:{...P[$],...N}},B&&L<=50){L++,typeof B=="object"&&(B.placement&&(b=B.placement),B.rects&&(f=B.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):B.rects),{x:g,y:_}=mV(f,b,d)),R=-1;continue}}return{x:g,y:_,placement:b,strategy:i,middlewareData:P}};async function o_(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:o,rects:s,elements:a,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:_="floating",altBoundary:b=!1,padding:P=0}=lh(t,e),L=WJ(P),$=a[b?_==="floating"?"reference":"floating":_],F=_E(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement($)))==null||r?$:$.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:f,rootBoundary:g,strategy:d})),T=_==="floating"?{...s.floating,x:n,y:i}:s.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),N=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},B=_E(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:T,offsetParent:x,strategy:d}):T);return{top:(F.top-B.top+L.top)/N.y,bottom:(B.bottom-F.bottom+L.bottom)/N.y,left:(F.left-B.left+L.left)/N.x,right:(B.right-F.right+L.right)/N.x}}const gV=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:o,platform:s,elements:a,middlewareData:d}=t,{element:f,padding:g=0}=lh(e,t)||{};if(f==null)return{};const _=WJ(g),b={x:r,y:n},P=M3(i),L=T3(P),R=await s.getDimensions(f),$=P==="y",F=$?"top":"left",T=$?"bottom":"right",x=$?"clientHeight":"clientWidth",N=o.reference[L]+o.reference[P]-b[P]-o.floating[L],B=b[P]-o.reference[P],H=await(s.getOffsetParent==null?void 0:s.getOffsetParent(f));let Z=H?H[x]:0;(!Z||!await(s.isElement==null?void 0:s.isElement(H)))&&(Z=a.floating[x]||o.floating[L]);const Y=N/2-B/2,W=Z/2-R[L]/2-1,Q=vd(_[F],W),me=vd(_[T],W),ge=Q,be=Z-R[L]-me,oe=Z/2-R[L]/2+Y,Ie=LL(ge,oe,be),fe=!d.arrow&&Iv(i)!=null&&oe!=Ie&&o.reference[L]/2-(oe<ge?Q:me)-R[L]/2<0,G=fe?oe<ge?oe-ge:oe-be:0;return{[P]:b[P]+G,data:{[P]:Ie,centerOffset:oe-Ie-G,...fe&&{alignmentOffset:G}},reset:fe}}}),kje=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:d,elements:f}=t,{mainAxis:g=!0,crossAxis:_=!0,fallbackPlacements:b,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:L="none",flipAlignment:R=!0,...$}=lh(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const F=ch(i),T=ch(a)===a,x=await(d.isRTL==null?void 0:d.isRTL(f.floating)),N=b||(T||!R?[yE(a)]:Oje(a));!b&&L!=="none"&&N.push(...Mje(a,R,L,x));const B=[a,...N],H=await o_(t,$),Z=[];let Y=((n=o.flip)==null?void 0:n.overflows)||[];if(g&&Z.push(H[F]),_){const ge=Ije(i,s,x);Z.push(H[ge[0]],H[ge[1]])}if(Y=[...Y,{placement:i,overflows:Z}],!Z.every(ge=>ge<=0)){var W,Q;const ge=(((W=o.flip)==null?void 0:W.index)||0)+1,be=B[ge];if(be)return{data:{index:ge,overflows:Y},reset:{placement:be}};let oe=(Q=Y.filter(Ie=>Ie.overflows[0]<=0).sort((Ie,fe)=>Ie.overflows[1]-fe.overflows[1])[0])==null?void 0:Q.placement;if(!oe)switch(P){case"bestFit":{var me;const Ie=(me=Y.map(fe=>[fe.placement,fe.overflows.filter(G=>G>0).reduce((G,K)=>G+K,0)]).sort((fe,G)=>fe[1]-G[1])[0])==null?void 0:me[0];Ie&&(oe=Ie);break}case"initialPlacement":oe=a;break}if(i!==oe)return{reset:{placement:oe}}}return{}}}};function vV(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function yV(e){return Pje.some(t=>e[t]>=0)}const Dje=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=lh(e,t);switch(n){case"referenceHidden":{const o=await o_(t,{...i,elementContext:"reference"}),s=vV(o,r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:yV(s)}}}case"escaped":{const o=await o_(t,{...i,altBoundary:!0}),s=vV(o,r.floating);return{data:{escapedOffsets:s,escaped:yV(s)}}}default:return{}}}}};async function Nje(e,t){const{placement:r,platform:n,elements:i}=e,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),s=ch(r),a=Iv(r),d=Ov(r)==="y",f=["left","top"].includes(s)?-1:1,g=o&&d?-1:1,_=lh(t,e);let{mainAxis:b,crossAxis:P,alignmentAxis:L}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return a&&typeof L=="number"&&(P=a==="end"?L*-1:L),d?{x:P*g,y:b*f}:{x:b*f,y:P*g}}const Fje=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:o,placement:s,middlewareData:a}=t,d=await Nje(t,e);return s===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+d.x,y:o+d.y,data:{...d,placement:s}}}}},$je=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:$=>{let{x:F,y:T}=$;return{x:F,y:T}}},...d}=lh(e,t),f={x:r,y:n},g=await o_(t,d),_=Ov(ch(i)),b=O3(_);let P=f[b],L=f[_];if(o){const $=b==="y"?"top":"left",F=b==="y"?"bottom":"right",T=P+g[$],x=P-g[F];P=LL(T,P,x)}if(s){const $=_==="y"?"top":"left",F=_==="y"?"bottom":"right",T=L+g[$],x=L-g[F];L=LL(T,L,x)}const R=a.fn({...t,[b]:P,[_]:L});return{...R,data:{x:R.x-r,y:R.y-n}}}}},zje=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:d=!0,crossAxis:f=!0}=lh(e,t),g={x:r,y:n},_=Ov(i),b=O3(_);let P=g[b],L=g[_];const R=lh(a,t),$=typeof R=="number"?{mainAxis:R,crossAxis:0}:{mainAxis:0,crossAxis:0,...R};if(d){const x=b==="y"?"height":"width",N=o.reference[b]-o.floating[x]+$.mainAxis,B=o.reference[b]+o.reference[x]-$.mainAxis;P<N?P=N:P>B&&(P=B)}if(f){var F,T;const x=b==="y"?"width":"height",N=["top","left"].includes(ch(i)),B=o.reference[_]-o.floating[x]+(N&&((F=s.offset)==null?void 0:F[_])||0)+(N?0:$.crossAxis),H=o.reference[_]+o.reference[x]+(N?0:((T=s.offset)==null?void 0:T[_])||0)-(N?$.crossAxis:0);L<B?L=B:L>H&&(L=H)}return{[b]:P,[_]:L}}}},Bje=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:r,rects:n,platform:i,elements:o}=t,{apply:s=()=>{},...a}=lh(e,t),d=await o_(t,a),f=ch(r),g=Iv(r),_=Ov(r)==="y",{width:b,height:P}=n.floating;let L,R;f==="top"||f==="bottom"?(L=f,R=g===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(R=f,L=g==="end"?"top":"bottom");const $=P-d[L],F=b-d[R],T=!t.middlewareData.shift;let x=$,N=F;if(_){const H=b-d.left-d.right;N=g||T?vd(F,H):H}else{const H=P-d.top-d.bottom;x=g||T?vd($,H):H}if(T&&!g){const H=wl(d.left,0),Z=wl(d.right,0),Y=wl(d.top,0),W=wl(d.bottom,0);_?N=b-2*(H!==0||Z!==0?H+Z:wl(d.left,d.right)):x=P-2*(Y!==0||W!==0?Y+W:wl(d.top,d.bottom))}await s({...t,availableWidth:N,availableHeight:x});const B=await i.getDimensions(o.floating);return b!==B.width||P!==B.height?{reset:{rects:!0}}:{}}}};function _d(e){return XJ(e)?(e.nodeName||"").toLowerCase():"#document"}function Cl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bh(e){var t;return(t=(XJ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function XJ(e){return e instanceof Node||e instanceof Cl(e).Node}function fh(e){return e instanceof Element||e instanceof Cl(e).Element}function pf(e){return e instanceof HTMLElement||e instanceof Cl(e).HTMLElement}function _V(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Cl(e).ShadowRoot}function j1(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=ac(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function jje(e){return["table","td","th"].includes(_d(e))}function L3(e){const t=R3(),r=ac(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Uje(e){let t=Xg(e);for(;pf(t)&&!MA(t);){if(L3(t))return t;t=Xg(t)}return null}function R3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function MA(e){return["html","body","#document"].includes(_d(e))}function ac(e){return Cl(e).getComputedStyle(e)}function LA(e){return fh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Xg(e){if(_d(e)==="html")return e;const t=e.assignedSlot||e.parentNode||_V(e)&&e.host||bh(e);return _V(t)?t.host:t}function YJ(e){const t=Xg(e);return MA(t)?e.ownerDocument?e.ownerDocument.body:e.body:pf(t)&&j1(t)?t:YJ(t)}function a_(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=YJ(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),s=Cl(i);return o?t.concat(s,s.visualViewport||[],j1(i)?i:[],s.frameElement&&r?a_(s.frameElement):[]):t.concat(i,a_(i,[],r))}function HJ(e){const t=ac(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=pf(e),o=i?e.offsetWidth:r,s=i?e.offsetHeight:n,a=vE(r)!==o||vE(n)!==s;return a&&(r=o,n=s),{width:r,height:n,$:a}}function k3(e){return fh(e)?e:e.contextElement}function Pg(e){const t=k3(e);if(!pf(t))return yd(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:o}=HJ(t);let s=(o?vE(r.width):r.width)/n,a=(o?vE(r.height):r.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Vje=yd(0);function ZJ(e){const t=Cl(e);return!R3()||!t.visualViewport?Vje:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Gje(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Cl(e)?!1:t}function Mp(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=k3(e);let s=yd(1);t&&(n?fh(n)&&(s=Pg(n)):s=Pg(e));const a=Gje(o,r,n)?ZJ(o):yd(0);let d=(i.left+a.x)/s.x,f=(i.top+a.y)/s.y,g=i.width/s.x,_=i.height/s.y;if(o){const b=Cl(o),P=n&&fh(n)?Cl(n):n;let L=b.frameElement;for(;L&&n&&P!==b;){const R=Pg(L),$=L.getBoundingClientRect(),F=ac(L),T=$.left+(L.clientLeft+parseFloat(F.paddingLeft))*R.x,x=$.top+(L.clientTop+parseFloat(F.paddingTop))*R.y;d*=R.x,f*=R.y,g*=R.x,_*=R.y,d+=T,f+=x,L=Cl(L).frameElement}}return _E({width:g,height:_,x:d,y:f})}function qje(e){let{rect:t,offsetParent:r,strategy:n}=e;const i=pf(r),o=bh(r);if(r===o)return t;let s={scrollLeft:0,scrollTop:0},a=yd(1);const d=yd(0);if((i||!i&&n!=="fixed")&&((_d(r)!=="body"||j1(o))&&(s=LA(r)),pf(r))){const f=Mp(r);a=Pg(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-s.scrollLeft*a.x+d.x,y:t.y*a.y-s.scrollTop*a.y+d.y}}function Wje(e){return Array.from(e.getClientRects())}function KJ(e){return Mp(bh(e)).left+LA(e).scrollLeft}function Xje(e){const t=bh(e),r=LA(e),n=e.ownerDocument.body,i=wl(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=wl(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+KJ(e);const a=-r.scrollTop;return ac(n).direction==="rtl"&&(s+=wl(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:s,y:a}}function Yje(e,t){const r=Cl(e),n=bh(e),i=r.visualViewport;let o=n.clientWidth,s=n.clientHeight,a=0,d=0;if(i){o=i.width,s=i.height;const f=R3();(!f||f&&t==="fixed")&&(a=i.offsetLeft,d=i.offsetTop)}return{width:o,height:s,x:a,y:d}}function Hje(e,t){const r=Mp(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=pf(e)?Pg(e):yd(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,d=i*o.x,f=n*o.y;return{width:s,height:a,x:d,y:f}}function bV(e,t,r){let n;if(t==="viewport")n=Yje(e,r);else if(t==="document")n=Xje(bh(e));else if(fh(t))n=Hje(t,r);else{const i=ZJ(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return _E(n)}function JJ(e,t){const r=Xg(e);return r===t||!fh(r)||MA(r)?!1:ac(r).position==="fixed"||JJ(r,t)}function Zje(e,t){const r=t.get(e);if(r)return r;let n=a_(e,[],!1).filter(a=>fh(a)&&_d(a)!=="body"),i=null;const o=ac(e).position==="fixed";let s=o?Xg(e):e;for(;fh(s)&&!MA(s);){const a=ac(s),d=L3(s);!d&&a.position==="fixed"&&(i=null),(o?!d&&!i:!d&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||j1(s)&&!d&&JJ(e,s))?n=n.filter(g=>g!==s):i=a,s=Xg(s)}return t.set(e,n),n}function Kje(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const s=[...r==="clippingAncestors"?Zje(t,this._c):[].concat(r),n],a=s[0],d=s.reduce((f,g)=>{const _=bV(t,g,i);return f.top=wl(_.top,f.top),f.right=vd(_.right,f.right),f.bottom=vd(_.bottom,f.bottom),f.left=wl(_.left,f.left),f},bV(t,a,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Jje(e){return HJ(e)}function Qje(e,t,r){const n=pf(t),i=bh(t),o=r==="fixed",s=Mp(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const d=yd(0);if(n||!n&&!o)if((_d(t)!=="body"||j1(i))&&(a=LA(t)),n){const f=Mp(t,!0,o,t);d.x=f.x+t.clientLeft,d.y=f.y+t.clientTop}else i&&(d.x=KJ(i));return{x:s.left+a.scrollLeft-d.x,y:s.top+a.scrollTop-d.y,width:s.width,height:s.height}}function xV(e,t){return!pf(e)||ac(e).position==="fixed"?null:t?t(e):e.offsetParent}function QJ(e,t){const r=Cl(e);if(!pf(e))return r;let n=xV(e,t);for(;n&&jje(n)&&ac(n).position==="static";)n=xV(n,t);return n&&(_d(n)==="html"||_d(n)==="body"&&ac(n).position==="static"&&!L3(n))?r:n||Uje(e)||r}const eUe=async function(e){let{reference:t,floating:r,strategy:n}=e;const i=this.getOffsetParent||QJ,o=this.getDimensions;return{reference:Qje(t,await i(r),n),floating:{x:0,y:0,...await o(r)}}};function tUe(e){return ac(e).direction==="rtl"}const rUe={convertOffsetParentRelativeRectToViewportRelativeRect:qje,getDocumentElement:bh,getClippingRect:Kje,getOffsetParent:QJ,getElementRects:eUe,getClientRects:Wje,getDimensions:Jje,getScale:Pg,isElement:fh,isRTL:tUe};function nUe(e,t){let r=null,n;const i=bh(e);function o(){clearTimeout(n),r&&r.disconnect(),r=null}function s(a,d){a===void 0&&(a=!1),d===void 0&&(d=1),o();const{left:f,top:g,width:_,height:b}=e.getBoundingClientRect();if(a||t(),!_||!b)return;const P=bx(g),L=bx(i.clientWidth-(f+_)),R=bx(i.clientHeight-(g+b)),$=bx(f),T={rootMargin:-P+"px "+-L+"px "+-R+"px "+-$+"px",threshold:wl(0,vd(1,d))||1};let x=!0;function N(B){const H=B[0].intersectionRatio;if(H!==d){if(!x)return s();H?s(!1,H):n=setTimeout(()=>{s(!1,1e-7)},100)}x=!1}try{r=new IntersectionObserver(N,{...T,root:i.ownerDocument})}catch{r=new IntersectionObserver(N,T)}r.observe(e)}return s(!0),o}function iUe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,f=k3(e),g=i||o?[...f?a_(f):[],...a_(t)]:[];g.forEach(F=>{i&&F.addEventListener("scroll",r,{passive:!0}),o&&F.addEventListener("resize",r)});const _=f&&a?nUe(f,r):null;let b=-1,P=null;s&&(P=new ResizeObserver(F=>{let[T]=F;T&&T.target===f&&P&&(P.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{P&&P.observe(t)})),r()}),f&&!d&&P.observe(f),P.observe(t));let L,R=d?Mp(e):null;d&&$();function $(){const F=Mp(e);R&&(F.x!==R.x||F.y!==R.y||F.width!==R.width||F.height!==R.height)&&r(),R=F,L=requestAnimationFrame($)}return r(),()=>{g.forEach(F=>{i&&F.removeEventListener("scroll",r),o&&F.removeEventListener("resize",r)}),_&&_(),P&&P.disconnect(),P=null,d&&cancelAnimationFrame(L)}}const oUe=(e,t,r)=>{const n=new Map,i={platform:rUe,...r},o={...i.platform,_c:n};return Rje(e,t,{...i,platform:o})},aUe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?gV({element:n.current,padding:i}).fn(r):{}:n?gV({element:n,padding:i}).fn(r):{}}}};var Kx=typeof document<"u"?ne.useLayoutEffect:ne.useEffect;function bE(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!bE(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&e.$$typeof)&&!bE(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function eQ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wV(e,t){const r=eQ(e);return Math.round(t*r)/r}function EV(e){const t=ne.useRef(e);return Kx(()=>{t.current=e}),t}function sUe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:d,open:f}=e,[g,_]=ne.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[b,P]=ne.useState(n);bE(b,n)||P(n);const[L,R]=ne.useState(null),[$,F]=ne.useState(null),T=ne.useCallback(fe=>{fe!=H.current&&(H.current=fe,R(fe))},[R]),x=ne.useCallback(fe=>{fe!==Z.current&&(Z.current=fe,F(fe))},[F]),N=o||L,B=s||$,H=ne.useRef(null),Z=ne.useRef(null),Y=ne.useRef(g),W=EV(d),Q=EV(i),me=ne.useCallback(()=>{if(!H.current||!Z.current)return;const fe={placement:t,strategy:r,middleware:b};Q.current&&(fe.platform=Q.current),oUe(H.current,Z.current,fe).then(G=>{const K={...G,isPositioned:!0};ge.current&&!bE(Y.current,K)&&(Y.current=K,Dp.flushSync(()=>{_(K)}))})},[b,t,r,Q]);Kx(()=>{f===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,_(fe=>({...fe,isPositioned:!1})))},[f]);const ge=ne.useRef(!1);Kx(()=>(ge.current=!0,()=>{ge.current=!1}),[]),Kx(()=>{if(N&&(H.current=N),B&&(Z.current=B),N&&B){if(W.current)return W.current(N,B,me);me()}},[N,B,me,W]);const be=ne.useMemo(()=>({reference:H,floating:Z,setReference:T,setFloating:x}),[T,x]),oe=ne.useMemo(()=>({reference:N,floating:B}),[N,B]),Ie=ne.useMemo(()=>{const fe={position:r,left:0,top:0};if(!oe.floating)return fe;const G=wV(oe.floating,g.x),K=wV(oe.floating,g.y);return a?{...fe,transform:"translate("+G+"px, "+K+"px)",...eQ(oe.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:G,top:K}},[r,a,oe.floating,g.x,g.y]);return ne.useMemo(()=>({...g,update:me,refs:be,elements:oe,floatingStyles:Ie}),[g,me,be,oe,Ie])}function uUe(e){const[t,r]=ne.useState(void 0);return Gg(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;s=f.inlineSize,a=f.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}const tQ="Popper",[rQ,nQ]=Pv(tQ),[lUe,iQ]=rQ(tQ),cUe=e=>{const{__scopePopper:t,children:r}=e,[n,i]=ne.useState(null);return ne.createElement(lUe,{scope:t,anchor:n,onAnchorChange:i},r)},fUe="PopperAnchor",hUe=ne.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,o=iQ(fUe,r),s=ne.useRef(null),a=oc(t,s);return ne.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||s.current)}),n?null:ne.createElement(Au.div,jr({},i,{ref:a}))}),oQ="PopperContent",[dUe,x9e]=rQ(oQ),pUe=ne.forwardRef((e,t)=>{var r,n,i,o,s,a,d,f;const{__scopePopper:g,side:_="bottom",sideOffset:b=0,align:P="center",alignOffset:L=0,arrowPadding:R=0,avoidCollisions:$=!0,collisionBoundary:F=[],collisionPadding:T=0,sticky:x="partial",hideWhenDetached:N=!1,updatePositionStrategy:B="optimized",onPlaced:H,...Z}=e,Y=iQ(oQ,g),[W,Q]=ne.useState(null),me=oc(t,rr=>Q(rr)),[ge,be]=ne.useState(null),oe=uUe(ge),Ie=(r=oe==null?void 0:oe.width)!==null&&r!==void 0?r:0,fe=(n=oe==null?void 0:oe.height)!==null&&n!==void 0?n:0,G=_+(P!=="center"?"-"+P:""),K=typeof T=="number"?T:{top:0,right:0,bottom:0,left:0,...T},re=Array.isArray(F)?F:[F],ie=re.length>0,he={padding:K,boundary:re.filter(mUe),altBoundary:ie},{refs:ae,floatingStyles:Te,placement:Le,isPositioned:Xe,middlewareData:$e}=sUe({strategy:"fixed",placement:G,whileElementsMounted:(...rr)=>iUe(...rr,{animationFrame:B==="always"}),elements:{reference:Y.anchor},middleware:[Fje({mainAxis:b+fe,alignmentAxis:L}),$&&$je({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?zje():void 0,...he}),$&&kje({...he}),Bje({...he,apply:({elements:rr,rects:Gt,availableWidth:br,availableHeight:un})=>{const{width:ot,height:Oe}=Gt.reference,ve=rr.floating.style;ve.setProperty("--radix-popper-available-width",`${br}px`),ve.setProperty("--radix-popper-available-height",`${un}px`),ve.setProperty("--radix-popper-anchor-width",`${ot}px`),ve.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),ge&&aUe({element:ge,padding:R}),gUe({arrowWidth:Ie,arrowHeight:fe}),N&&Dje({strategy:"referenceHidden",...he})]}),[at,_t]=aQ(Le),Lt=sh(H);Gg(()=>{Xe&&(Lt==null||Lt())},[Xe,Lt]);const pt=(i=$e.arrow)===null||i===void 0?void 0:i.x,Ot=(o=$e.arrow)===null||o===void 0?void 0:o.y,vt=((s=$e.arrow)===null||s===void 0?void 0:s.centerOffset)!==0,[Ze,Zt]=ne.useState();return Gg(()=>{W&&Zt(window.getComputedStyle(W).zIndex)},[W]),ne.createElement("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...Te,transform:Xe?Te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ze,"--radix-popper-transform-origin":[(a=$e.transformOrigin)===null||a===void 0?void 0:a.x,(d=$e.transformOrigin)===null||d===void 0?void 0:d.y].join(" ")},dir:e.dir},ne.createElement(dUe,{scope:g,placedSide:at,onArrowChange:be,arrowX:pt,arrowY:Ot,shouldHideArrow:vt},ne.createElement(Au.div,jr({"data-side":at,"data-align":_t},Z,{ref:me,style:{...Z.style,animation:Xe?void 0:"none",opacity:(f=$e.hide)!==null&&f!==void 0&&f.referenceHidden?0:void 0}}))))});function mUe(e){return e!==null}const gUe=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i,o,s;const{placement:a,rects:d,middlewareData:f}=t,_=((r=f.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,b=_?0:e.arrowWidth,P=_?0:e.arrowHeight,[L,R]=aQ(a),$={start:"0%",center:"50%",end:"100%"}[R],F=((n=(i=f.arrow)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0)+b/2,T=((o=(s=f.arrow)===null||s===void 0?void 0:s.y)!==null&&o!==void 0?o:0)+P/2;let x="",N="";return L==="bottom"?(x=_?$:`${F}px`,N=`${-P}px`):L==="top"?(x=_?$:`${F}px`,N=`${d.floating.height+P}px`):L==="right"?(x=`${-P}px`,N=_?$:`${T}px`):L==="left"&&(x=`${d.floating.width+P}px`,N=_?$:`${T}px`),{data:{x,y:N}}}});function aQ(e){const[t,r="center"]=e.split("-");return[t,r]}const vUe=cUe,yUe=hUe,_Ue=pUe,sQ="Popover",[uQ,w9e]=Pv(sQ,[nQ]),D3=nQ(),[bUe,Tv]=uQ(sQ),xUe=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:s=!1}=e,a=D3(t),d=ne.useRef(null),[f,g]=ne.useState(!1),[_=!1,b]=Av({prop:n,defaultProp:i,onChange:o});return ne.createElement(vUe,a,ne.createElement(bUe,{scope:t,contentId:m0(),triggerRef:d,open:_,onOpenChange:b,onOpenToggle:ne.useCallback(()=>b(P=>!P),[b]),hasCustomAnchor:f,onCustomAnchorAdd:ne.useCallback(()=>g(!0),[]),onCustomAnchorRemove:ne.useCallback(()=>g(!1),[]),modal:s},r))},wUe="PopoverTrigger",EUe=ne.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Tv(wUe,r),o=D3(r),s=oc(t,i.triggerRef),a=ne.createElement(Au.button,jr({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":fQ(i.open)},n,{ref:s,onClick:ls(e.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:ne.createElement(yUe,jr({asChild:!0},o),a)}),lQ="PopoverPortal",[SUe,PUe]=uQ(lQ,{forceMount:void 0}),AUe=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,o=Tv(lQ,t);return ne.createElement(SUe,{scope:t,forceMount:r},ne.createElement(Cv,{present:r||o.open},ne.createElement(KZ,{asChild:!0,container:i},n)))},s_="PopoverContent",CUe=ne.forwardRef((e,t)=>{const r=PUe(s_,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,o=Tv(s_,e.__scopePopover);return ne.createElement(Cv,{present:n||o.open},o.modal?ne.createElement(IUe,jr({},i,{ref:t})):ne.createElement(OUe,jr({},i,{ref:t})))}),IUe=ne.forwardRef((e,t)=>{const r=Tv(s_,e.__scopePopover),n=ne.useRef(null),i=oc(t,n),o=ne.useRef(!1);return ne.useEffect(()=>{const s=n.current;if(s)return i3(s)},[]),ne.createElement(iK,{as:Op,allowPinchZoom:!0},ne.createElement(cQ,jr({},e,{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ls(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),o.current||(a=r.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:ls(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,d=a.button===0&&a.ctrlKey===!0,f=a.button===2||d;o.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:ls(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})))}),OUe=ne.forwardRef((e,t)=>{const r=Tv(s_,e.__scopePopover),n=ne.useRef(!1),i=ne.useRef(!1);return ne.createElement(cQ,jr({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s;if((s=e.onCloseAutoFocus)===null||s===void 0||s.call(e,o),!o.defaultPrevented){var a;n.current||(a=r.triggerRef.current)===null||a===void 0||a.focus(),o.preventDefault()}n.current=!1,i.current=!1},onInteractOutside:o=>{var s,a;(s=e.onInteractOutside)===null||s===void 0||s.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const d=o.target;((a=r.triggerRef.current)===null||a===void 0?void 0:a.contains(d))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}}))}),cQ=ne.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:g,..._}=e,b=Tv(s_,r),P=D3(r);return JZ(),ne.createElement(HZ,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o},ne.createElement(XZ,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:g,onEscapeKeyDown:a,onPointerDownOutside:d,onFocusOutside:f,onDismiss:()=>b.onOpenChange(!1)},ne.createElement(_Ue,jr({"data-state":fQ(b.open),role:"dialog",id:b.contentId},P,_,{ref:t,style:{..._.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function fQ(e){return e?"open":"closed"}const TUe=xUe,MUe=EUe,LUe=AUe,hQ=CUe,dQ=TUe,pQ=MUe,N3=ne.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>Qe.jsx(LUe,{children:Qe.jsx(hQ,{ref:i,align:t,sideOffset:r,className:ii("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));N3.displayName=hQ.displayName;function SV({selectedPoi:e,placeholder:t,onSelect:r}){var a;const n=Ct(d=>d.getSortedPOIs()),[i,o]=ne.useState(!1),s=d=>{o(!1),r(d)};return Qe.jsxs(dQ,{open:i,onOpenChange:o,children:[Qe.jsx(pQ,{asChild:!0,children:Qe.jsxs(uf,{variant:"outline",role:"combobox","aria-expanded":i,className:"lg:min-w-[320px] justify-between flex my-4",children:[e!=null&&e.id?(a=n.find(d=>d.id===e.id))==null?void 0:a.properties.title:t,Qe.jsx(WZ,{className:"w-4 h-4 ml-2 opacity-50 shrink-0"})]})}),Qe.jsx(N3,{className:"lg:min-w-[320px] p-0",children:Qe.jsxs(vA,{className:"h-64 overflow-auto",filter:(d,f)=>n.find(_=>_.id===d&&_.properties.title.toLowerCase().includes(f))?1:0,children:[Qe.jsx(yA,{placeholder:t}),Qe.jsx(_A,{children:tn("no-results")}),Qe.jsx(Q0,{className:"overflow-auto",children:n.map(d=>Qe.jsxs(e_,{value:d.id,onSelect:s,className:"cursor-pointer",children:[Qe.jsx(qZ,{className:ii("mr-2 h-4 w-4",e.id===d.id?"opacity-100":"opacity-0")}),Qe.jsx("span",{className:"flex-1",children:d.properties.title}),Qe.jsxs("span",{className:"text-black/30",children:[tn("floor"),": ",d.floorName]})]},d.id))})]})})]})}function RUe(){const e=Ct(s=>s.activeFilter),t=Ct(s=>s.filterItems).filter(s=>s.type==="closest"),r=Ct(s=>s.setActiveFilter),[n,i]=ne.useState(!1),o=s=>{const a=t.find(d=>d.title.toLowerCase()===s);i(!1),r(a)};return Qe.jsxs(dQ,{open:n,onOpenChange:i,children:[Qe.jsx(pQ,{asChild:!0,children:Qe.jsxs(uf,{variant:"outline",role:"combobox","aria-expanded":n,className:"lg:min-w-[320px] justify-between flex my-4",children:[e!=null&&e.id?`${tn("closest")} ${tn(t.find(s=>s.title===e.title).title)}`:tn("destination"),Qe.jsx(WZ,{className:"w-4 h-4 ml-2 opacity-50 shrink-0"})]})}),Qe.jsx(N3,{className:"lg:min-w-[320px] p-0",children:Qe.jsxs(vA,{children:[Qe.jsx(yA,{placeholder:tn("destination")}),Qe.jsx(_A,{children:tn("no-results")}),Qe.jsx(Q0,{children:t.map(s=>Qe.jsxs(e_,{value:s.title,onSelect:o,className:"cursor-pointer",children:[Qe.jsx(qZ,{className:ii("mr-2 h-4 w-4",e.title===s.title?"opacity-100":"opacity-0")}),`${tn("closest")} ${s.title}`]},s.title))})]})})]})}function kUe(){const e=Ct(F=>F.features),t=Ct(F=>F.activeFilter),r=Ct(F=>F.routeStart),n=Ct(F=>F.routeFinish),i=Ct(F=>F.map),o=Ct(F=>F.showCustomRoutePicker),[s,a]=ne.useState(r),[d,f]=ne.useState(n),g=Ct(F=>F.setRouteStart),_=Ct(F=>F.setRouteFinish),b=Ct(F=>F.setActiveFilter),P=Ct(F=>F.setShowCustomRoutePicker),L=F=>{a(e.find(T=>T.id===F))},R=F=>{f(e.find(T=>T.id===F))},$=()=>{if(s!=null&&s.id&&(d!=null&&d.id)){g(s),_(d),P(!1);return}if(s!=null&&s.id&&(t!=null&&t.id)){const F=i.getClosestFeature(t.id,s);g(s),_(F),b({});return}};return Qe.jsx(Qe.Fragment,{children:Qe.jsxs(Oc.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.2},className:"fixed inset-x-0 bottom-0 z-10 p-5 border-2 rounded-lg lg:pt-12 lg:absolute bg-white/80 lg:top-20 lg:left-5 lg:inset-x-auto lg:bottom-auto",children:[Qe.jsx("h2",{className:"text-lg font-semibold lg:mb-4 lg:mt-4 text-primary",children:tn(t.title)}),Qe.jsxs("div",{className:"flex items-center gap-1 lg:block",children:[Qe.jsx(SV,{selectedPoi:s,onSelect:L,placeholder:tn("startingPoint")}),o&&Qe.jsx(SV,{selectedPoi:d,onSelect:R,placeholder:tn("destination")}),(t==null?void 0:t.type)==="closest"&&Qe.jsx(RUe,{}),Qe.jsxs(uf,{className:"flex w-full",disabled:!(s!=null&&s.id)||!(d!=null&&d.id)||!(t!=null&&t.id)&&!o,onClick:$,children:[Qe.jsx(nE,{className:"mr-2 text-2xl"}),Qe.jsx("span",{className:"hidden sm:inline",children:tn("takeMeThere")})]})]})]},"list")})}function rT({className:e,...t}){return Qe.jsx("div",{className:ii("animate-pulse rounded-md bg-muted",e),...t})}function DUe({showMore:e}){var o,s;const[t,r]=ne.useState(!0),n=Ct(a=>a.routeFinish),i=()=>`https://api.proximi.fi/v5/geo/${n.properties.images[0]}?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImlzcyI6IjQ0MDEwZjZmLTk5NjMtNDQzMy1hZDg2LTQwYjg5YjgyOWM0MSIsInR5cGUiOiJ1c2VyIiwidXNlciI6IkRlbW8gV2F5ZmluZGluZyIsInVzZXJfaWQiOiI1ZTBkNDVlMy0wMjVmLTRiMzItYmUwNy0wYzk0MjUxYmQ1NzMiLCJ0ZW5hbnRfaWQiOiI0NDAxMGY2Zi05OTYzLTQ0MzMtYWQ4Ni00MGI4OWI4MjljNDEifQ.reaAdK4uUqvGcDghQTmXtbsHR4mX9Hcinwwg4_uqwfQ`;return Qe.jsx(TA,{children:Qe.jsxs(Oc.div,{className:ii("lg:block max-h-96 overflow-hidden",!e&&"hidden"),children:[t&&Qe.jsxs("div",{className:"flex items-center h-56 p-8",children:[Qe.jsx(rT,{className:"w-12 h-12 rounded-full"}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(rT,{className:"h-4 w-[250px]"}),Qe.jsx(rT,{className:"h-4 w-[200px]"})]})]}),Qe.jsx(Oc.img,{src:(o=n.properties)!=null&&o.images[0]?i():"https://picsum.photos/500/300",alt:(s=n.properties)==null?void 0:s.title,onLoad:()=>{r(!1)},initial:{scale:2,opacity:0,filter:"blur(100px)"},animate:{scale:1,opacity:1,filter:"blur(0)"},transition:{duration:.4},className:ii("w-full",t&&"hidden opacity-0")})]})})}var NUe=Object.defineProperty,xE=Object.getOwnPropertySymbols,mQ=Object.prototype.hasOwnProperty,gQ=Object.prototype.propertyIsEnumerable,PV=(e,t,r)=>t in e?NUe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,FUe=(e,t)=>{for(var r in t||(t={}))mQ.call(t,r)&&PV(e,r,t[r]);if(xE)for(var r of xE(t))gQ.call(t,r)&&PV(e,r,t[r]);return e},$Ue=(e,t)=>{var r={};for(var n in e)mQ.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&xE)for(var n of xE(e))t.indexOf(n)<0&&gQ.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Lp;(e=>{const t=class{constructor(d,f,g,_){if(this.version=d,this.errorCorrectionLevel=f,this.modules=[],this.isFunction=[],d<t.MIN_VERSION||d>t.MAX_VERSION)throw new RangeError("Version value out of range");if(_<-1||_>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let b=[];for(let L=0;L<this.size;L++)b.push(!1);for(let L=0;L<this.size;L++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const P=this.addEccAndInterleave(g);if(this.drawCodewords(P),_==-1){let L=1e9;for(let R=0;R<8;R++){this.applyMask(R),this.drawFormatBits(R);const $=this.getPenaltyScore();$<L&&(_=R,L=$),this.applyMask(R)}}o(0<=_&&_<=7),this.mask=_,this.applyMask(_),this.drawFormatBits(_),this.isFunction=[]}static encodeText(d,f){const g=e.QrSegment.makeSegments(d);return t.encodeSegments(g,f)}static encodeBinary(d,f){const g=e.QrSegment.makeBytes(d);return t.encodeSegments([g],f)}static encodeSegments(d,f,g=1,_=40,b=-1,P=!0){if(!(t.MIN_VERSION<=g&&g<=_&&_<=t.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let L,R;for(L=g;;L++){const x=t.getNumDataCodewords(L,f)*8,N=a.getTotalBits(d,L);if(N<=x){R=N;break}if(L>=_)throw new RangeError("Data too long")}for(const x of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])P&&R<=t.getNumDataCodewords(L,x)*8&&(f=x);let $=[];for(const x of d){n(x.mode.modeBits,4,$),n(x.numChars,x.mode.numCharCountBits(L),$);for(const N of x.getData())$.push(N)}o($.length==R);const F=t.getNumDataCodewords(L,f)*8;o($.length<=F),n(0,Math.min(4,F-$.length),$),n(0,(8-$.length%8)%8,$),o($.length%8==0);for(let x=236;$.length<F;x^=253)n(x,8,$);let T=[];for(;T.length*8<$.length;)T.push(0);return $.forEach((x,N)=>T[N>>>3]|=x<<7-(N&7)),new t(L,f,T,b)}getModule(d,f){return 0<=d&&d<this.size&&0<=f&&f<this.size&&this.modules[f][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),f=d.length;for(let g=0;g<f;g++)for(let _=0;_<f;_++)g==0&&_==0||g==0&&_==f-1||g==f-1&&_==0||this.drawAlignmentPattern(d[g],d[_]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const f=this.errorCorrectionLevel.formatBits<<3|d;let g=f;for(let b=0;b<10;b++)g=g<<1^(g>>>9)*1335;const _=(f<<10|g)^21522;o(_>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,i(_,b));this.setFunctionModule(8,7,i(_,6)),this.setFunctionModule(8,8,i(_,7)),this.setFunctionModule(7,8,i(_,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,i(_,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,i(_,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,i(_,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const f=this.version<<12|d;o(f>>>18==0);for(let g=0;g<18;g++){const _=i(f,g),b=this.size-11+g%3,P=Math.floor(g/3);this.setFunctionModule(b,P,_),this.setFunctionModule(P,b,_)}}drawFinderPattern(d,f){for(let g=-4;g<=4;g++)for(let _=-4;_<=4;_++){const b=Math.max(Math.abs(_),Math.abs(g)),P=d+_,L=f+g;0<=P&&P<this.size&&0<=L&&L<this.size&&this.setFunctionModule(P,L,b!=2&&b!=4)}}drawAlignmentPattern(d,f){for(let g=-2;g<=2;g++)for(let _=-2;_<=2;_++)this.setFunctionModule(d+_,f+g,Math.max(Math.abs(_),Math.abs(g))!=1)}setFunctionModule(d,f,g){this.modules[f][d]=g,this.isFunction[f][d]=!0}addEccAndInterleave(d){const f=this.version,g=this.errorCorrectionLevel;if(d.length!=t.getNumDataCodewords(f,g))throw new RangeError("Invalid argument");const _=t.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][f],b=t.ECC_CODEWORDS_PER_BLOCK[g.ordinal][f],P=Math.floor(t.getNumRawDataModules(f)/8),L=_-P%_,R=Math.floor(P/_);let $=[];const F=t.reedSolomonComputeDivisor(b);for(let x=0,N=0;x<_;x++){let B=d.slice(N,N+R-b+(x<L?0:1));N+=B.length;const H=t.reedSolomonComputeRemainder(B,F);x<L&&B.push(0),$.push(B.concat(H))}let T=[];for(let x=0;x<$[0].length;x++)$.forEach((N,B)=>{(x!=R-b||B>=L)&&T.push(N[x])});return o(T.length==P),T}drawCodewords(d){if(d.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let f=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let _=0;_<this.size;_++)for(let b=0;b<2;b++){const P=g-b,R=(g+1&2)==0?this.size-1-_:_;!this.isFunction[R][P]&&f<d.length*8&&(this.modules[R][P]=i(d[f>>>3],7-(f&7)),f++)}}o(f==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let f=0;f<this.size;f++)for(let g=0;g<this.size;g++){let _;switch(d){case 0:_=(g+f)%2==0;break;case 1:_=f%2==0;break;case 2:_=g%3==0;break;case 3:_=(g+f)%3==0;break;case 4:_=(Math.floor(g/3)+Math.floor(f/2))%2==0;break;case 5:_=g*f%2+g*f%3==0;break;case 6:_=(g*f%2+g*f%3)%2==0;break;case 7:_=((g+f)%2+g*f%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[f][g]&&_&&(this.modules[f][g]=!this.modules[f][g])}}getPenaltyScore(){let d=0;for(let b=0;b<this.size;b++){let P=!1,L=0,R=[0,0,0,0,0,0,0];for(let $=0;$<this.size;$++)this.modules[b][$]==P?(L++,L==5?d+=t.PENALTY_N1:L>5&&d++):(this.finderPenaltyAddHistory(L,R),P||(d+=this.finderPenaltyCountPatterns(R)*t.PENALTY_N3),P=this.modules[b][$],L=1);d+=this.finderPenaltyTerminateAndCount(P,L,R)*t.PENALTY_N3}for(let b=0;b<this.size;b++){let P=!1,L=0,R=[0,0,0,0,0,0,0];for(let $=0;$<this.size;$++)this.modules[$][b]==P?(L++,L==5?d+=t.PENALTY_N1:L>5&&d++):(this.finderPenaltyAddHistory(L,R),P||(d+=this.finderPenaltyCountPatterns(R)*t.PENALTY_N3),P=this.modules[$][b],L=1);d+=this.finderPenaltyTerminateAndCount(P,L,R)*t.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let P=0;P<this.size-1;P++){const L=this.modules[b][P];L==this.modules[b][P+1]&&L==this.modules[b+1][P]&&L==this.modules[b+1][P+1]&&(d+=t.PENALTY_N2)}let f=0;for(const b of this.modules)f=b.reduce((P,L)=>P+(L?1:0),f);const g=this.size*this.size,_=Math.ceil(Math.abs(f*20-g*10)/g)-1;return o(0<=_&&_<=9),d+=_*t.PENALTY_N4,o(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,f=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let _=this.size-7;g.length<d;_-=f)g.splice(1,0,_);return g}}static getNumRawDataModules(d){if(d<t.MIN_VERSION||d>t.MAX_VERSION)throw new RangeError("Version number out of range");let f=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;f-=(25*g-10)*g-55,d>=7&&(f-=36)}return o(208<=f&&f<=29648),f}static getNumDataCodewords(d,f){return Math.floor(t.getNumRawDataModules(d)/8)-t.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d]*t.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let f=[];for(let _=0;_<d-1;_++)f.push(0);f.push(1);let g=1;for(let _=0;_<d;_++){for(let b=0;b<f.length;b++)f[b]=t.reedSolomonMultiply(f[b],g),b+1<f.length&&(f[b]^=f[b+1]);g=t.reedSolomonMultiply(g,2)}return f}static reedSolomonComputeRemainder(d,f){let g=f.map(_=>0);for(const _ of d){const b=_^g.shift();g.push(0),f.forEach((P,L)=>g[L]^=t.reedSolomonMultiply(P,b))}return g}static reedSolomonMultiply(d,f){if(d>>>8||f>>>8)throw new RangeError("Byte out of range");let g=0;for(let _=7;_>=0;_--)g=g<<1^(g>>>7)*285,g^=(f>>>_&1)*d;return o(g>>>8==0),g}finderPenaltyCountPatterns(d){const f=d[1];o(f<=this.size*3);const g=f>0&&d[2]==f&&d[3]==f*3&&d[4]==f&&d[5]==f;return(g&&d[0]>=f*4&&d[6]>=f?1:0)+(g&&d[6]>=f*4&&d[0]>=f?1:0)}finderPenaltyTerminateAndCount(d,f,g){return d&&(this.finderPenaltyAddHistory(f,g),f=0),f+=this.size,this.finderPenaltyAddHistory(f,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,f){f[0]==0&&(d+=this.size),f.pop(),f.unshift(d)}};let r=t;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=r;function n(d,f,g){if(f<0||f>31||d>>>f)throw new RangeError("Value out of range");for(let _=f-1;_>=0;_--)g.push(d>>>_&1)}function i(d,f){return(d>>>f&1)!=0}function o(d){if(!d)throw new Error("Assertion error")}const s=class{constructor(d,f,g){if(this.mode=d,this.numChars=f,this.bitData=g,f<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let f=[];for(const g of d)n(g,8,f);return new s(s.Mode.BYTE,d.length,f)}static makeNumeric(d){if(!s.isNumeric(d))throw new RangeError("String contains non-numeric characters");let f=[];for(let g=0;g<d.length;){const _=Math.min(d.length-g,3);n(parseInt(d.substr(g,_),10),_*3+1,f),g+=_}return new s(s.Mode.NUMERIC,d.length,f)}static makeAlphanumeric(d){if(!s.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let f=[],g;for(g=0;g+2<=d.length;g+=2){let _=s.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;_+=s.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),n(_,11,f)}return g<d.length&&n(s.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,f),new s(s.Mode.ALPHANUMERIC,d.length,f)}static makeSegments(d){return d==""?[]:s.isNumeric(d)?[s.makeNumeric(d)]:s.isAlphanumeric(d)?[s.makeAlphanumeric(d)]:[s.makeBytes(s.toUtf8ByteArray(d))]}static makeEci(d){let f=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)n(d,8,f);else if(d<16384)n(2,2,f),n(d,14,f);else if(d<1e6)n(6,3,f),n(d,21,f);else throw new RangeError("ECI assignment value out of range");return new s(s.Mode.ECI,0,f)}static isNumeric(d){return s.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return s.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,f){let g=0;for(const _ of d){const b=_.mode.numCharCountBits(f);if(_.numChars>=1<<b)return 1/0;g+=4+b+_.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let f=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?f.push(d.charCodeAt(g)):(f.push(parseInt(d.substr(g+1,2),16)),g+=2);return f}};let a=s;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=a})(Lp||(Lp={}));(e=>{(t=>{const r=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Lp||(Lp={}));(e=>{(t=>{const r=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Lp||(Lp={}));var Xy=Lp;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var zUe={L:Xy.QrCode.Ecc.LOW,M:Xy.QrCode.Ecc.MEDIUM,Q:Xy.QrCode.Ecc.QUARTILE,H:Xy.QrCode.Ecc.HIGH},BUe=128,jUe="L",UUe="#FFFFFF",VUe="#000000",GUe=!1,vQ=4,qUe=.1;function WUe(e,t=0){const r=[];return e.forEach(function(n,i){let o=null;n.forEach(function(s,a){if(!s&&o!==null){r.push(`M${o+t} ${i+t}h${a-o}v1H${o+t}z`),o=null;return}if(a===n.length-1){if(!s)return;o===null?r.push(`M${a+t},${i+t} h1v1H${a+t}z`):r.push(`M${o+t},${i+t} h${a+1-o}v1H${o+t}z`);return}s&&o===null&&(o=a)})}),r.join("")}function XUe(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((i,o)=>o<t.x||o>=t.x+t.w?i:!1))}function YUe(e,t,r,n){if(n==null)return null;const i=r?vQ:0,o=e.length+i*2,s=Math.floor(t*qUe),a=o/t,d=(n.width||s)*a,f=(n.height||s)*a,g=n.x==null?e.length/2-d/2:n.x*a,_=n.y==null?e.length/2-f/2:n.y*a;let b=null;if(n.excavate){let P=Math.floor(g),L=Math.floor(_),R=Math.ceil(d+g-P),$=Math.ceil(f+_-L);b={x:P,y:L,w:R,h:$}}return{x:g,y:_,h:f,w:d,excavation:b}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function HUe(e){const t=e,{value:r,size:n=BUe,level:i=jUe,bgColor:o=UUe,fgColor:s=VUe,includeMargin:a=GUe,imageSettings:d}=t,f=$Ue(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let g=Xy.QrCode.encodeText(r,zUe[i]).getModules();const _=a?vQ:0,b=g.length+_*2,P=YUe(g,n,a,d);let L=null;d!=null&&P!=null&&(P.excavation!=null&&(g=XUe(g,P.excavation)),L=Tr.createElement("image",{xlinkHref:d.src,height:P.h,width:P.w,x:P.x+_,y:P.y+_,preserveAspectRatio:"none"}));const R=WUe(g,_);return Tr.createElement("svg",FUe({height:n,width:n,viewBox:`0 0 ${b} ${b}`},f),Tr.createElement("path",{fill:o,d:`M0,0 h${b}v${b}H0z`,shapeRendering:"crispEdges"}),Tr.createElement("path",{fill:s,d:R,shapeRendering:"crispEdges"}),L)}function ZUe({showMore:e}){var f,g,_,b,P;const[t,r]=ne.useState(""),n=Ct(L=>L.currentLang),i=Ct(L=>L.routeFinish),o=Ct(L=>L.haveRouteDetails),s=Ct(L=>L.routeStart),a=Ct(L=>L.routeFinish),d=()=>{const R=new Date().getDay();if(i.properties)return i.properties.workingHours&&i.properties.workingHours[R]?`${i.properties.workingHours[R][0]} - ${i.properties.workingHours[R][1]}`:i.properties.metadata&&i.properties.metadata.openHours&&i.properties.metadata.openHours[R].en?i.properties.metadata.openHours[R][n]?i.properties.metadata.openHours[R][n]:i.properties.metadata.openHours[R].en:tn("noOpenHours")};return ne.useEffect(()=>{const L=new URL(window.location.href),R=L.searchParams;o&&(!s&&a&&R.set("destinationFeature",a.properties.id),a&&s&&(R.set("destinationFeature",a.properties.id),R.set("startFeature",s.properties.id))),r(L.href)},[o,a,s]),Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("h1",{className:"text-2xl font-semibold text-primary",children:(f=i.properties)==null?void 0:f.title}),o&&Qe.jsxs("div",{className:"items-center justify-center hidden py-4 lg:flex",children:[Qe.jsx(HUe,{value:t,className:"shrink-0",size:96}),Qe.jsx("p",{className:"pl-4 text-lg font-semibold text-primary",children:tn("scan-qr-code")})]}),Qe.jsx("h3",{className:ii("text-sm text-primary lg:block",!e&&"hidden"),children:d()}),Qe.jsxs("h3",{className:"mb-2 text-sm font-semibold lg:mb-8",children:[tn("floor"),":"," ",(_=(g=i.properties)==null?void 0:g._dynamic)!=null&&_.floorName?(b=i.properties)==null?void 0:b._dynamic.floorName:(P=i.properties)==null?void 0:P.level]})]})}function KUe(e){return jo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M16.354 5.075l-7.855 7.854-7.853-7.854 0.707-0.707 7.145 7.146 7.148-7.147 0.708 0.708z"}}]})(e)}function JUe(e){return jo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M16.354 11.896l-0.707 0.707-7.147-7.146-7.146 7.146-0.707-0.707 7.853-7.853 7.854 7.853z"}}]})(e)}const QUe="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";function eVe({showMore:e}){var f,g,_;const[t,r]=ne.useState(QUe),[n,i]=ne.useState(!1),[o,s]=ne.useState(200),a=Ct(b=>b.routeFinish),d=Ct(b=>b.currentLang);return ne.useEffect(()=>{var b,P,L;if((b=a==null?void 0:a.properties)!=null&&b.description_i18n){r(a.properties.description_i18n[d]?a.properties.description_i18n[d]:a.properties.description_i18n.en);return}if((L=(P=a==null?void 0:a.properties)==null?void 0:P.metadata)!=null&&L.description){r(a.properties.metadata.description[d]?a.properties.metadata.description[d]:a.properties.metadata.description.en);return}},[(f=a==null?void 0:a.properties)==null?void 0:f.description_i18n,(_=(g=a==null?void 0:a.properties)==null?void 0:g.metadata)==null?void 0:_.description,d]),Qe.jsx(Qe.Fragment,{children:t&&Qe.jsxs("div",{className:ii("mb-4 lg:block",!e&&"hidden"),children:[Qe.jsxs("p",{className:"text-sm",children:[t.slice(0,o)," ",t.length>o?"...":""]}),t.length>o&&Qe.jsxs("span",{onClick:()=>{s(t.length),i(!0)},className:"text-sm font-semibold cursor-pointer hover:text-primary",children:[tn("showMore"),Qe.jsx(KUe,{className:"inline-flex ml-1 text-xs"})]}),n&&Qe.jsxs("span",{onClick:()=>{s(200),i(!1)},className:"text-sm font-semibold cursor-pointer hover:text-primary",children:[tn("showLess"),Qe.jsx(JUe,{className:"inline-flex ml-1 text-xs"})]})]})})}function tVe({showMore:e}){const[t,r]=ne.useState(""),n=Ct(i=>i.routeFinish);return ne.useEffect(()=>{(()=>{if(n.properties){const o=typeof n.properties.url>"u"?typeof n.properties.metadata<"u"?n.properties.metadata.url:"yolo":n.properties.url;if(o){let s=o.startsWith("http://")?1:0;s===0&&(s=o.startsWith("https://")?2:0),r(s===0?`http://${o}`:o);return}r(o)}})()},[n.properties]),Qe.jsx(Qe.Fragment,{children:t&&Qe.jsxs("p",{className:ii("mb-4 text-sm lg:block",!e&&"hidden"),children:[tn("link"),":"," ",Qe.jsx("a",{href:t,target:"_blank",className:"hover:text-primary",children:t})]})})}function rVe({closestParkingFeature:e,showMore:t,onSet:r}){const n=Ct(f=>f.map),i=Ct(f=>f.currentLang),o=Ct(f=>f.haveRouteDetails),s="44010f6f-9963-4433-ad86-40b89b829c41:adf1071e-81cb-4134-ae55-2e0e0005d2b7",a=Ct(f=>f.routeFinish);ne.useEffect(()=>{(()=>{if(a.properties){const g=n.getClosestFeature(s,a);g.properties.title=g.properties.title_i18n&&g.properties.title_i18n[i]?g.properties.title_i18n[i]:g.properties.title,r(g)}})()},[i,n,r,s,a]);const d=()=>{n.centerToFeature(e.id)};return Qe.jsx(Qe.Fragment,{children:e&&(e==null?void 0:e.properties)&&Qe.jsxs("p",{className:ii("text-sm cursor-pointer text-primary hover:text-accent lg:text-md",o&&"lg:block",o&&!t&&"hidden",t&&"mt-4"),onClick:d,children:[Qe.jsxs("strong",{children:[tn("closest-parking"),":"]})," ",e.properties.title]})})}function nVe(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M8 21l4 0"}},{tag:"path",attr:{d:"M10 21l0 -18"}},{tag:"path",attr:{d:"M10 4l9 4l-9 4"}}]})(e)}function iVe(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}},{tag:"path",attr:{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}},{tag:"path",attr:{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"}}]})(e)}function oVe({closestParkingFeature:e,showMore:t}){const r=Ct(g=>g.features),n=Ct(g=>g.haveRouteDetails),i=Ct(g=>g.kioskMode),o=Ct(g=>g.activeKiosk),s=Ct(g=>g.setRouteStart),a=Ct(g=>g.setShowCustomRoutePicker),d="44010f6f-9963-4433-ad86-40b89b829c41:f6ea1437-e372-4348-9b96-b1304c8a8952",f=g=>{if(g==="parking"&&(e!=null&&e.properties)){s(e);return}if(g==="entrance"){const _=r.find(b=>b.id===d);if(_){s(_);return}}if(g==="other"){a(!0);return}if(g==="kiosk"){const _=new lae({id:"kiosk",geometry:{type:"Point",coordinates:[o==null?void 0:o.longitude,o==null?void 0:o.latitude]},type:"Feature",properties:{...o}});s(_);return}};return Qe.jsxs(TA,{children:[i&&Qe.jsx(Oc.div,{className:ii("mt-4",n&&"lg:block",n&&!t&&"hidden"),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20,delay:.2},children:Qe.jsxs(uf,{onClick:()=>f("kiosk"),className:"flex w-full",children:[Qe.jsx(nE,{className:"mr-2 text-2xl"}),tn("takeMeThere")]})}),!i&&Qe.jsxs(Oc.div,{className:ii("grid grid-cols-3 gap-2 mt-4",n&&"lg:grid",n&&!t&&"hidden"),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20,delay:.2},children:[Qe.jsxs(uf,{onClick:()=>f("parking"),className:"flex flex-col h-auto gap-1 font-light whitespace-normal",children:[Qe.jsx(G3e,{className:"block text-lg lg:text-2xl"}),tn("route-from-parking")]}),Qe.jsxs(uf,{onClick:()=>f("entrance"),className:"flex flex-col h-auto gap-1 font-light whitespace-normal",children:[Qe.jsx(nE,{className:"block text-lg lg:text-2xl"}),tn("route-from-entrance")]}),Qe.jsxs(uf,{onClick:()=>f("other"),className:"flex flex-col h-auto gap-1 font-light whitespace-normal",children:[Qe.jsx(iVe,{className:"block text-lg lg:text-2xl"}),tn("other-route")]})]})]})}var yQ={exports:{}};(function(e){(function(){var t=n(function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return(x===1?"":"")+"  "},","),r={af:n("jaar",function(x){return"maand"+(x===1?"":"e")},function(x){return x===1?"week":"weke"},function(x){return x===1?"dag":"dae"},function(x){return x===1?"uur":"ure"},function(x){return x===1?"minuut":"minute"},function(x){return"sekonde"+(x===1?"":"s")},function(x){return"millisekonde"+(x===1?"":"s")},","),ar:g(n(function(x){return["","",""][i(x)]},function(x){return["","",""][i(x)]},function(x){return["","",""][i(x)]},function(x){return["","",""][i(x)]},function(x){return["","",""][i(x)]},function(x){return["","",""][i(x)]},function(x){return["","",""][i(x)]},function(x){return["  ","  ","  "][i(x)]},","),{delimiter:"  ",_digitReplacements:["","","","","","","","","",""]}),bg:n(function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},","),bn:n("","","","","","","",""),ca:n(function(x){return"any"+(x===1?"":"s")},function(x){return"mes"+(x===1?"":"os")},function(x){return"setman"+(x===1?"a":"es")},function(x){return"di"+(x===1?"a":"es")},function(x){return"hor"+(x===1?"a":"es")},function(x){return"minut"+(x===1?"":"s")},function(x){return"segon"+(x===1?"":"s")},function(x){return"milisegon"+(x===1?"":"s")},","),ckb:n("","","","","","",""," ","."),cs:n(function(x){return["rok","roku","roky","let"][a(x)]},function(x){return["msc","msce","msce","msc"][a(x)]},function(x){return["tden","tdne","tdny","tdn"][a(x)]},function(x){return["den","dne","dny","dn"][a(x)]},function(x){return["hodina","hodiny","hodiny","hodin"][a(x)]},function(x){return["minuta","minuty","minuty","minut"][a(x)]},function(x){return["sekunda","sekundy","sekundy","sekund"][a(x)]},function(x){return["milisekunda","milisekundy","milisekundy","milisekund"][a(x)]},","),cy:n("flwyddyn","mis","wythnos","diwrnod","awr","munud","eiliad","milieiliad"),da:n("r",function(x){return"mned"+(x===1?"":"er")},function(x){return"uge"+(x===1?"":"r")},function(x){return"dag"+(x===1?"":"e")},function(x){return"time"+(x===1?"":"r")},function(x){return"minut"+(x===1?"":"ter")},function(x){return"sekund"+(x===1?"":"er")},function(x){return"millisekund"+(x===1?"":"er")},","),de:n(function(x){return"Jahr"+(x===1?"":"e")},function(x){return"Monat"+(x===1?"":"e")},function(x){return"Woche"+(x===1?"":"n")},function(x){return"Tag"+(x===1?"":"e")},function(x){return"Stunde"+(x===1?"":"n")},function(x){return"Minute"+(x===1?"":"n")},function(x){return"Sekunde"+(x===1?"":"n")},function(x){return"Millisekunde"+(x===1?"":"n")},","),el:t,en:n(function(x){return"year"+(x===1?"":"s")},function(x){return"month"+(x===1?"":"s")},function(x){return"week"+(x===1?"":"s")},function(x){return"day"+(x===1?"":"s")},function(x){return"hour"+(x===1?"":"s")},function(x){return"minute"+(x===1?"":"s")},function(x){return"second"+(x===1?"":"s")},function(x){return"millisecond"+(x===1?"":"s")}),eo:n(function(x){return"jaro"+(x===1?"":"j")},function(x){return"monato"+(x===1?"":"j")},function(x){return"semajno"+(x===1?"":"j")},function(x){return"tago"+(x===1?"":"j")},function(x){return"horo"+(x===1?"":"j")},function(x){return"minuto"+(x===1?"":"j")},function(x){return"sekundo"+(x===1?"":"j")},function(x){return"milisekundo"+(x===1?"":"j")},","),es:n(function(x){return"ao"+(x===1?"":"s")},function(x){return"mes"+(x===1?"":"es")},function(x){return"semana"+(x===1?"":"s")},function(x){return"da"+(x===1?"":"s")},function(x){return"hora"+(x===1?"":"s")},function(x){return"minuto"+(x===1?"":"s")},function(x){return"segundo"+(x===1?"":"s")},function(x){return"milisegundo"+(x===1?"":"s")},","),et:n(function(x){return"aasta"+(x===1?"":"t")},function(x){return"kuu"+(x===1?"":"d")},function(x){return"ndal"+(x===1?"":"at")},function(x){return"pev"+(x===1?"":"a")},function(x){return"tund"+(x===1?"":"i")},function(x){return"minut"+(x===1?"":"it")},function(x){return"sekund"+(x===1?"":"it")},function(x){return"millisekund"+(x===1?"":"it")},","),eu:n("urte","hilabete","aste","egun","ordu","minutu","segundo","milisegundo",","),fa:n("","","","","","",""," "),fi:n(function(x){return x===1?"vuosi":"vuotta"},function(x){return x===1?"kuukausi":"kuukautta"},function(x){return"viikko"+(x===1?"":"a")},function(x){return"piv"+(x===1?"":"")},function(x){return"tunti"+(x===1?"":"a")},function(x){return"minuutti"+(x===1?"":"a")},function(x){return"sekunti"+(x===1?"":"a")},function(x){return"millisekunti"+(x===1?"":"a")},","),fo:n("r",function(x){return x===1?"mnaur":"mnair"},function(x){return x===1?"vika":"vikur"},function(x){return x===1?"dagur":"dagar"},function(x){return x===1?"tmi":"tmar"},function(x){return x===1?"minuttur":"minuttir"},"sekund","millisekund",","),fr:n(function(x){return"an"+(x>=2?"s":"")},"mois",function(x){return"semaine"+(x>=2?"s":"")},function(x){return"jour"+(x>=2?"s":"")},function(x){return"heure"+(x>=2?"s":"")},function(x){return"minute"+(x>=2?"s":"")},function(x){return"seconde"+(x>=2?"s":"")},function(x){return"milliseconde"+(x>=2?"s":"")},","),gr:t,he:n(function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""}),hr:n(function(x){return x%10===2||x%10===3||x%10===4?"godine":"godina"},function(x){return x===1?"mjesec":x===2||x===3||x===4?"mjeseca":"mjeseci"},function(x){return x%10===1&&x!==11?"tjedan":"tjedna"},function(x){return x===1?"dan":"dana"},function(x){return x===1?"sat":x===2||x===3||x===4?"sata":"sati"},function(x){var N=x%10;return(N===2||N===3||N===4)&&(x<10||x>14)?"minute":"minuta"},function(x){var N=x%10;return N===5||Math.floor(x)===x&&x>=10&&x<=19?"sekundi":N===1?"sekunda":N===2||N===3||N===4?"sekunde":"sekundi"},function(x){return x===1?"milisekunda":x%10===2||x%10===3||x%10===4?"milisekunde":"milisekundi"},","),hi:n("",function(x){return x===1?"":""},function(x){return x===1?"":""},"",function(x){return x===1?"":""},"","",""),hu:n("v","hnap","ht","nap","ra","perc","msodperc","ezredmsodperc",","),id:n("tahun","bulan","minggu","hari","jam","menit","detik","milidetik"),is:n("r",function(x){return"mnu"+(x===1?"ur":"ir")},function(x){return"vik"+(x===1?"a":"ur")},function(x){return"dag"+(x===1?"ur":"ar")},function(x){return"klukkutm"+(x===1?"i":"ar")},function(x){return"mnt"+(x===1?"a":"ur")},function(x){return"seknd"+(x===1?"a":"ur")},function(x){return"milliseknd"+(x===1?"a":"ur")}),it:n(function(x){return"ann"+(x===1?"o":"i")},function(x){return"mes"+(x===1?"e":"i")},function(x){return"settiman"+(x===1?"a":"e")},function(x){return"giorn"+(x===1?"o":"i")},function(x){return"or"+(x===1?"a":"e")},function(x){return"minut"+(x===1?"o":"i")},function(x){return"second"+(x===1?"o":"i")},function(x){return"millisecond"+(x===1?"o":"i")},","),ja:n("","","","","","","",""),km:n("","","","","","","",""),kn:n(function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""}),ko:n("","","","","","",""," "),ku:n("sal","meh","hefte","roj","seet","deqe","saniye","mlirk",","),lo:n("","","","","","","","",","),lt:n(function(x){return x%10===0||x%100>=10&&x%100<=20?"met":"metai"},function(x){return["mnuo","mnesiai","mnesi"][d(x)]},function(x){return["savait","savaits","savaii"][d(x)]},function(x){return["diena","dienos","dien"][d(x)]},function(x){return["valanda","valandos","valand"][d(x)]},function(x){return["minut","minuts","minui"][d(x)]},function(x){return["sekund","sekunds","sekundi"][d(x)]},function(x){return["milisekund","milisekunds","milisekundi"][d(x)]},","),lv:n(function(x){return f(x)?"gads":"gadi"},function(x){return f(x)?"mnesis":"mnei"},function(x){return f(x)?"neda":"nedas"},function(x){return f(x)?"diena":"dienas"},function(x){return f(x)?"stunda":"stundas"},function(x){return f(x)?"minte":"mintes"},function(x){return f(x)?"sekunde":"sekundes"},function(x){return f(x)?"milisekunde":"milisekundes"},","),mk:n(function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},","),mn:n("",""," ","","","","",""),mr:n(function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},"","",function(x){return x===1?"":""},"",""),ms:n("tahun","bulan","minggu","hari","jam","minit","saat","milisaat"),nl:n("jaar",function(x){return x===1?"maand":"maanden"},function(x){return x===1?"week":"weken"},function(x){return x===1?"dag":"dagen"},"uur",function(x){return x===1?"minuut":"minuten"},function(x){return x===1?"seconde":"seconden"},function(x){return x===1?"milliseconde":"milliseconden"},","),no:n("r",function(x){return"mned"+(x===1?"":"er")},function(x){return"uke"+(x===1?"":"r")},function(x){return"dag"+(x===1?"":"er")},function(x){return"time"+(x===1?"":"r")},function(x){return"minutt"+(x===1?"":"er")},function(x){return"sekund"+(x===1?"":"er")},function(x){return"millisekund"+(x===1?"":"er")},","),pl:n(function(x){return["rok","roku","lata","lat"][o(x)]},function(x){return["miesic","miesica","miesice","miesicy"][o(x)]},function(x){return["tydzie","tygodnia","tygodnie","tygodni"][o(x)]},function(x){return["dzie","dnia","dni","dni"][o(x)]},function(x){return["godzina","godziny","godziny","godzin"][o(x)]},function(x){return["minuta","minuty","minuty","minut"][o(x)]},function(x){return["sekunda","sekundy","sekundy","sekund"][o(x)]},function(x){return["milisekunda","milisekundy","milisekundy","milisekund"][o(x)]},","),pt:n(function(x){return"ano"+(x===1?"":"s")},function(x){return x===1?"ms":"meses"},function(x){return"semana"+(x===1?"":"s")},function(x){return"dia"+(x===1?"":"s")},function(x){return"hora"+(x===1?"":"s")},function(x){return"minuto"+(x===1?"":"s")},function(x){return"segundo"+(x===1?"":"s")},function(x){return"milissegundo"+(x===1?"":"s")},","),ro:n(function(x){return x===1?"an":"ani"},function(x){return x===1?"lun":"luni"},function(x){return x===1?"sptmn":"sptmni"},function(x){return x===1?"zi":"zile"},function(x){return x===1?"or":"ore"},function(x){return x===1?"minut":"minute"},function(x){return x===1?"secund":"secunde"},function(x){return x===1?"milisecund":"milisecunde"},","),ru:n(function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},","),sq:n(function(x){return x===1?"vit":"vjet"},"muaj","jav","dit","or",function(x){return"minut"+(x===1?"":"a")},function(x){return"sekond"+(x===1?"":"a")},function(x){return"milisekond"+(x===1?"":"a")},","),sr:n(function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},","),ta:n(function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return""+(x===1?"":"")},function(x){return""+(x===1?"":"")},function(x){return" "+(x===1?"":"")}),te:n(function(x){return""+(x===1?"":"")},function(x){return""+(x===1?"":"")},function(x){return x===1?"":""},function(x){return""+(x===1?"":"")},function(x){return""+(x===1?"":"")},function(x){return x===1?"":""},function(x){return x===1?"":""},function(x){return x===1?"":""}),uk:n(function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},function(x){return["","",""][s(x)]},","),ur:n("",function(x){return x===1?"":""},function(x){return x===1?"":""},"",function(x){return x===1?"":""},"",""," "),sk:n(function(x){return["rok","roky","roky","rokov"][a(x)]},function(x){return["mesiac","mesiace","mesiace","mesiacov"][a(x)]},function(x){return["tde","tdne","tdne","tdov"][a(x)]},function(x){return["de","dni","dni","dn"][a(x)]},function(x){return["hodina","hodiny","hodiny","hodn"][a(x)]},function(x){return["minta","minty","minty","mint"][a(x)]},function(x){return["sekunda","sekundy","sekundy","seknd"][a(x)]},function(x){return["milisekunda","milisekundy","milisekundy","miliseknd"][a(x)]},","),sl:n(function(x){return x%10===1?"leto":x%100===2?"leti":x%100===3||x%100===4||Math.floor(x)!==x&&x%100<=5?"leta":"let"},function(x){return x%10===1?"mesec":x%100===2||Math.floor(x)!==x&&x%100<=5?"meseca":x%10===3||x%10===4?"mesece":"mesecev"},function(x){return x%10===1?"teden":x%10===2||Math.floor(x)!==x&&x%100<=4?"tedna":x%10===3||x%10===4?"tedne":"tednov"},function(x){return x%100===1?"dan":"dni"},function(x){return x%10===1?"ura":x%100===2?"uri":x%10===3||x%10===4||Math.floor(x)!==x?"ure":"ur"},function(x){return x%10===1?"minuta":x%10===2?"minuti":x%10===3||x%10===4||Math.floor(x)!==x&&x%100<=4?"minute":"minut"},function(x){return x%10===1?"sekunda":x%100===2?"sekundi":x%100===3||x%100===4||Math.floor(x)!==x?"sekunde":"sekund"},function(x){return x%10===1?"milisekunda":x%100===2?"milisekundi":x%100===3||x%100===4||Math.floor(x)!==x?"milisekunde":"milisekund"},","),sv:n("r",function(x){return"mnad"+(x===1?"":"er")},function(x){return"veck"+(x===1?"a":"or")},function(x){return"dag"+(x===1?"":"ar")},function(x){return"timm"+(x===1?"e":"ar")},function(x){return"minut"+(x===1?"":"er")},function(x){return"sekund"+(x===1?"":"er")},function(x){return"millisekund"+(x===1?"":"er")},","),sw:g(n(function(x){return x===1?"mwaka":"miaka"},function(x){return x===1?"mwezi":"miezi"},"wiki",function(x){return x===1?"siku":"masiku"},function(x){return x===1?"saa":"masaa"},"dakika","sekunde","milisekunde"),{_numberFirst:!0}),tr:n("yl","ay","hafta","gn","saat","dakika","saniye","milisaniye",","),th:n("","","","","","","",""),uz:n("yil","oy","hafta","kun","soat","minut","sekund","millisekund"),uz_CYR:n("","","","","","","",""),vi:n("nm","thng","tun","ngy","gi","pht","giy","mili giy",","),zh_CN:n("","","","","","","",""),zh_TW:n("","","","","","","","")};function n(x,N,B,H,Z,Y,W,Q,me){var ge={y:x,mo:N,w:B,d:H,h:Z,m:Y,s:W,ms:Q};return typeof me<"u"&&(ge.decimal=me),ge}function i(x){return x===2?1:x>2&&x<11?2:0}function o(x){return x===1?0:Math.floor(x)!==x?1:x%10>=2&&x%10<=4&&!(x%100>10&&x%100<20)?2:3}function s(x){return Math.floor(x)!==x?2:x%100>=5&&x%100<=20||x%10>=5&&x%10<=9||x%10===0?0:x%10===1?1:x>1?2:0}function a(x){return x===1?0:Math.floor(x)!==x?1:x%10>=2&&x%10<=4&&x%100<10?2:3}function d(x){return x===1||x%10===1&&x%100>20?0:Math.floor(x)!==x||x%10>=2&&x%100>20||x%10>=2&&x%100<10?1:2}function f(x){return x%10===1&&x%100!==11}function g(x){for(var N,B=1;B<arguments.length;B++){N=arguments[B];for(var H in N)b(N,H)&&(x[H]=N[H])}return x}var _=Array.isArray||function(x){return Object.prototype.toString.call(x)==="[object Array]"};function b(x,N){return Object.prototype.hasOwnProperty.call(x,N)}function P(x){var N=[x.language];if(b(x,"fallbacks"))if(_(x.fallbacks)&&x.fallbacks.length)N=N.concat(x.fallbacks);else throw new Error("fallbacks must be an array with at least one element");for(var B=0;B<N.length;B++){var H=N[B];if(b(x.languages,H))return x.languages[H];if(b(r,H))return r[H]}throw new Error("No language found.")}function L(x,N,B){var H=x.unitName,Z=x.unitCount,Y=B.spacer,W=B.maxDecimalPoints,Q;b(B,"decimal")?Q=B.decimal:b(N,"decimal")?Q=N.decimal:Q=".";var me;"digitReplacements"in B?me=B.digitReplacements:"_digitReplacements"in N&&(me=N._digitReplacements);var ge,be=W===void 0?Z:Math.floor(Z*Math.pow(10,W))/Math.pow(10,W),oe=be.toString();if(me){ge="";for(var Ie=0;Ie<oe.length;Ie++){var fe=oe[Ie];fe==="."?ge+=Q:ge+=me[fe]}}else ge=oe.replace(".",Q);var G=N[H],K;return typeof G=="function"?K=G(Z):K=G,N._numberFirst?K+Y+ge:ge+Y+K}function R(x,N){var B,H,Z,Y,W=N.units,Q=N.unitMeasures,me="largest"in N?N.largest:1/0;if(!W.length)return[];var ge={};for(Y=x,H=0;H<W.length;H++){B=W[H];var be=Q[B],oe=H===W.length-1;Z=oe?Y/be:Math.floor(Y/be),ge[B]=Z,Y-=Z*be}if(N.round){var Ie=me;for(H=0;H<W.length;H++)if(B=W[H],Z=ge[B],Z!==0&&(Ie--,Ie===0)){for(var fe=H+1;fe<W.length;fe++){var G=W[fe],K=ge[G];ge[B]+=K*Q[G]/Q[B],ge[G]=0}break}for(H=W.length-1;H>=0;H--)if(B=W[H],Z=ge[B],Z!==0){var re=Math.round(Z);if(ge[B]=re,H===0)break;var ie=W[H-1],he=Q[ie],ae=Math.floor(re*Q[B]/he);if(ae)ge[ie]+=ae,ge[B]=0;else break}}var Te=[];for(H=0;H<W.length&&Te.length<me;H++)B=W[H],Z=ge[B],Z&&Te.push({unitName:B,unitCount:Z});return Te}function $(x,N){var B=P(N);if(!x.length){var H=N.units,Z=H[H.length-1];return L({unitName:Z,unitCount:0},B,N)}var Y=N.conjunction,W=N.serialComma,Q;b(N,"delimiter")?Q=N.delimiter:b(B,"delimiter")?Q=B.delimiter:Q=", ";for(var me=[],ge=0;ge<x.length;ge++)me.push(L(x[ge],B,N));return!Y||x.length===1?me.join(Q):x.length===2?me.join(Y):me.slice(0,-1).join(Q)+(W?",":"")+Y+me.slice(-1)}function F(x){var N=function(H,Z){H=Math.abs(H);var Y=g({},N,Z||{}),W=R(H,Y);return $(W,Y)};return g(N,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},x)}var T=F({});T.getSupportedLanguages=function(){var N=[];for(var B in r)b(r,B)&&B!=="gr"&&N.push(B);return N},T.humanizer=F,e.exports?e.exports=T:this.humanizeDuration=T})()})(yQ);var aVe=yQ.exports;const sVe=bd(aVe);function uVe({showMore:e}){var d,f;const t=Ct(g=>g.haveRouteDetails),r=Ct(g=>g.routeDetails),n=Ct(g=>g.currentLang),[i,o]=ne.useState(0),[s,a]=ne.useState("");return ne.useEffect(()=>{var g,_;o(Math.round((g=r==null?void 0:r.details)==null?void 0:g.distance)),a(sVe(((_=r==null?void 0:r.details)==null?void 0:_.duration.realistic)*1e3,{delimiter:` ${tn("and")} `,round:!0,language:n}))},[(d=r==null?void 0:r.details)==null?void 0:d.distance,n,(f=r==null?void 0:r.details)==null?void 0:f.duration.realistic]),Qe.jsx(Qe.Fragment,{children:t&&Qe.jsxs("p",{className:ii("mb-4 text-sm lg:block",!e&&"hidden"),children:[Qe.jsxs("strong",{children:[tn("distance"),":"]})," ",i,"m /"," ",s]})})}function lVe(e){const t=e+"CollectionProvider",[r,n]=Pv(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=P=>{const{scope:L,children:R}=P,$=Tr.useRef(null),F=Tr.useRef(new Map).current;return Tr.createElement(i,{scope:L,itemMap:F,collectionRef:$},R)},a=e+"CollectionSlot",d=Tr.forwardRef((P,L)=>{const{scope:R,children:$}=P,F=o(a,R),T=oc(L,F.collectionRef);return Tr.createElement(Op,{ref:T},$)}),f=e+"CollectionItemSlot",g="data-radix-collection-item",_=Tr.forwardRef((P,L)=>{const{scope:R,children:$,...F}=P,T=Tr.useRef(null),x=oc(L,T),N=o(f,R);return Tr.useEffect(()=>(N.itemMap.set(T,{ref:T,...F}),()=>void N.itemMap.delete(T))),Tr.createElement(Op,{[g]:"",ref:x},$)});function b(P){const L=o(e+"CollectionConsumer",P);return Tr.useCallback(()=>{const $=L.collectionRef.current;if(!$)return[];const F=Array.from($.querySelectorAll(`[${g}]`));return Array.from(L.itemMap.values()).sort((N,B)=>F.indexOf(N.ref.current)-F.indexOf(B.ref.current))},[L.collectionRef,L.itemMap])}return[{Provider:s,Slot:d,ItemSlot:_},b,n]}const cVe=ne.createContext(void 0);function _Q(e){const t=ne.useContext(cVe);return e||t||"ltr"}const nT="rovingFocusGroup.onEntryFocus",fVe={bubbles:!1,cancelable:!0},F3="RovingFocusGroup",[kL,bQ,hVe]=lVe(F3),[dVe,xQ]=Pv(F3,[hVe]),[pVe,mVe]=dVe(F3),gVe=ne.forwardRef((e,t)=>ne.createElement(kL.Provider,{scope:e.__scopeRovingFocusGroup},ne.createElement(kL.Slot,{scope:e.__scopeRovingFocusGroup},ne.createElement(vVe,jr({},e,{ref:t}))))),vVe=ne.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:d,onEntryFocus:f,...g}=e,_=ne.useRef(null),b=oc(t,_),P=_Q(o),[L=null,R]=Av({prop:s,defaultProp:a,onChange:d}),[$,F]=ne.useState(!1),T=sh(f),x=bQ(r),N=ne.useRef(!1),[B,H]=ne.useState(0);return ne.useEffect(()=>{const Z=_.current;if(Z)return Z.addEventListener(nT,T),()=>Z.removeEventListener(nT,T)},[T]),ne.createElement(pVe,{scope:r,orientation:n,dir:P,loop:i,currentTabStopId:L,onItemFocus:ne.useCallback(Z=>R(Z),[R]),onItemShiftTab:ne.useCallback(()=>F(!0),[]),onFocusableItemAdd:ne.useCallback(()=>H(Z=>Z+1),[]),onFocusableItemRemove:ne.useCallback(()=>H(Z=>Z-1),[])},ne.createElement(Au.div,jr({tabIndex:$||B===0?-1:0,"data-orientation":n},g,{ref:b,style:{outline:"none",...e.style},onMouseDown:ls(e.onMouseDown,()=>{N.current=!0}),onFocus:ls(e.onFocus,Z=>{const Y=!N.current;if(Z.target===Z.currentTarget&&Y&&!$){const W=new CustomEvent(nT,fVe);if(Z.currentTarget.dispatchEvent(W),!W.defaultPrevented){const Q=x().filter(Ie=>Ie.focusable),me=Q.find(Ie=>Ie.active),ge=Q.find(Ie=>Ie.id===L),oe=[me,ge,...Q].filter(Boolean).map(Ie=>Ie.ref.current);wQ(oe)}}N.current=!1}),onBlur:ls(e.onBlur,()=>F(!1))})))}),yVe="RovingFocusGroupItem",_Ve=ne.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:o,...s}=e,a=m0(),d=o||a,f=mVe(yVe,r),g=f.currentTabStopId===d,_=bQ(r),{onFocusableItemAdd:b,onFocusableItemRemove:P}=f;return ne.useEffect(()=>{if(n)return b(),()=>P()},[n,b,P]),ne.createElement(kL.ItemSlot,{scope:r,id:d,focusable:n,active:i},ne.createElement(Au.span,jr({tabIndex:g?0:-1,"data-orientation":f.orientation},s,{ref:t,onMouseDown:ls(e.onMouseDown,L=>{n?f.onItemFocus(d):L.preventDefault()}),onFocus:ls(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:ls(e.onKeyDown,L=>{if(L.key==="Tab"&&L.shiftKey){f.onItemShiftTab();return}if(L.target!==L.currentTarget)return;const R=wVe(L,f.orientation,f.dir);if(R!==void 0){L.preventDefault();let F=_().filter(T=>T.focusable).map(T=>T.ref.current);if(R==="last")F.reverse();else if(R==="prev"||R==="next"){R==="prev"&&F.reverse();const T=F.indexOf(L.currentTarget);F=f.loop?EVe(F,T+1):F.slice(T+1)}setTimeout(()=>wQ(F))}})})))}),bVe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xVe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function wVe(e,t,r){const n=xVe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return bVe[n]}function wQ(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function EVe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}const SVe=gVe,PVe=_Ve,EQ=ne.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n=!1,onPressedChange:i,...o}=e,[s=!1,a]=Av({prop:r,onChange:i,defaultProp:n});return ne.createElement(Au.button,jr({type:"button","aria-pressed":s,"data-state":s?"on":"off","data-disabled":e.disabled?"":void 0},o,{ref:t,onClick:ls(e.onClick,()=>{e.disabled||a(!s)})}))}),SQ=EQ,RA="ToggleGroup",[PQ,E9e]=Pv(RA,[xQ]),AQ=xQ(),AVe=Tr.forwardRef((e,t)=>{const{type:r,...n}=e;if(r==="single"){const i=n;return Tr.createElement(CVe,jr({},i,{ref:t}))}if(r==="multiple"){const i=n;return Tr.createElement(IVe,jr({},i,{ref:t}))}throw new Error(`Missing prop \`type\` expected on \`${RA}\``)}),[CQ,IQ]=PQ(RA),CVe=Tr.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...o}=e,[s,a]=Av({prop:r,defaultProp:n,onChange:i});return Tr.createElement(CQ,{scope:e.__scopeToggleGroup,type:"single",value:s?[s]:[],onItemActivate:a,onItemDeactivate:Tr.useCallback(()=>a(""),[a])},Tr.createElement(OQ,jr({},o,{ref:t})))}),IVe=Tr.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...o}=e,[s=[],a]=Av({prop:r,defaultProp:n,onChange:i}),d=Tr.useCallback(g=>a((_=[])=>[..._,g]),[a]),f=Tr.useCallback(g=>a((_=[])=>_.filter(b=>b!==g)),[a]);return Tr.createElement(CQ,{scope:e.__scopeToggleGroup,type:"multiple",value:s,onItemActivate:d,onItemDeactivate:f},Tr.createElement(OQ,jr({},o,{ref:t})))}),[OVe,TVe]=PQ(RA),OQ=Tr.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:i=!0,orientation:o,dir:s,loop:a=!0,...d}=e,f=AQ(r),g=_Q(s),_={role:"group",dir:g,...d};return Tr.createElement(OVe,{scope:r,rovingFocus:i,disabled:n},i?Tr.createElement(SVe,jr({asChild:!0},f,{orientation:o,dir:g,loop:a}),Tr.createElement(Au.div,jr({},_,{ref:t}))):Tr.createElement(Au.div,jr({},_,{ref:t})))}),DL="ToggleGroupItem",MVe=Tr.forwardRef((e,t)=>{const r=IQ(DL,e.__scopeToggleGroup),n=TVe(DL,e.__scopeToggleGroup),i=AQ(e.__scopeToggleGroup),o=r.value.includes(e.value),s=n.disabled||e.disabled,a={...e,pressed:o,disabled:s},d=Tr.useRef(null);return n.rovingFocus?Tr.createElement(PVe,jr({asChild:!0},i,{focusable:!s,active:o,ref:d}),Tr.createElement(AV,jr({},a,{ref:t}))):Tr.createElement(AV,jr({},a,{ref:t}))}),AV=Tr.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...i}=e,o=IQ(DL,r),s={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=o.type==="single"?s:void 0;return Tr.createElement(EQ,jr({},a,i,{ref:t,onPressedChange:d=>{d?o.onItemActivate(n):o.onItemDeactivate(n)}}))}),TQ=AVe,MQ=MVe,LQ=mZ("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-primary data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-black/5",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),LVe=ne.forwardRef(({className:e,variant:t,size:r,...n},i)=>Qe.jsx(SQ,{ref:i,className:ii(LQ({variant:t,size:r,className:e})),...n}));LVe.displayName=SQ.displayName;const RQ=ne.createContext({size:"default",variant:"default"}),kQ=ne.forwardRef(({className:e,variant:t,size:r,children:n,...i},o)=>Qe.jsx(TQ,{ref:o,className:ii("flex items-center justify-center gap-1",e),...i,children:Qe.jsx(RQ.Provider,{value:{variant:t,size:r},children:n})}));kQ.displayName=TQ.displayName;const NL=ne.forwardRef(({className:e,children:t,variant:r,size:n,...i},o)=>{const s=ne.useContext(RQ);return Qe.jsx(MQ,{ref:o,className:ii(LQ({variant:s.variant||r,size:s.size||n}),e),...i,children:t})});NL.displayName=MQ.displayName;function RVe({showMore:e}){const t=Ct(o=>o.accessibleRoute),r=Ct(o=>o.haveRouteDetails),n=Ct(o=>o.setAccessibleRoute),i=o=>{n(o==="accessible")};return Qe.jsx(Qe.Fragment,{children:r&&Qe.jsxs(kQ,{type:"single",value:t?"accessible":"fastest",onValueChange:i,className:ii("mb-4 lg:flex",!e&&"hidden"),children:[Qe.jsxs(NL,{value:"fastest","aria-label":"Toggle fastest",className:"flex flex-col flex-1 h-auto gap-1 p-2 font-light whitespace-normal lg:p-3",children:[Qe.jsx(nE,{className:"block text-lg lg:text-4xl"}),Qe.jsx("p",{children:tn("fast-route")})]}),Qe.jsxs(NL,{value:"accessible","aria-label":"Toggle accessible",className:"flex flex-col flex-1 h-auto gap-1 p-2 font-light whitespace-normal lg:p-3",children:[Qe.jsx(W3e,{className:"block text-lg lg:text-4xl"}),Qe.jsx("p",{children:tn("use-elevators")})]})]})})}function kVe(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 17 5-5-5-5"}},{tag:"path",attr:{d:"m13 17 5-5-5-5"}}]})(e)}function DVe(){var _,b;const[e,t]=ne.useState([]),r=Ct(P=>P.map),n=Ct(P=>P.haveRouteDetails),i=Ct(P=>P.routeDetails),o=Ct(P=>P.floors),s=Ct(P=>P.currentFloor),a=Ct(P=>P.currentLang),d=Ct(P=>P.currentStep),f=Ct(P=>P.setCurrentStep);ne.useEffect(()=>{if(n){const P=i.TBTNav.steps;let L=0;t(P.filter((R,$,F)=>{const T=R.direction.split("_")[0];if(R.levelChangerId&&(T==="UP"||T==="DOWN")||R.direction==="FINISH")return R.stepsUntil=F.slice(L,$),L=$+1,R}).map(R=>{const $=R.direction.split("_")[0]?R.direction.split("_")[0]:R.direction,F=R.direction.split("_")[1],T=o.filter(H=>H.level===R.destinationLevel)?o.filter(H=>H.level===R.destinationLevel)[0]:s,x=R.stepsUntil.reduce((H,Z)=>H+Z.distanceFromLastStep,0),N=R.distanceFromLastStep+x;let B;return $==="FINISH"?B=a==="fi"?`${tn("you-will-arrive")} ${N|0}m ${tn("in")}.`:`${tn("in")} ${N|0}m ${tn("you-will-arrive")}.`:B=`${tn("go")} ${N|0}m ${tn("and-take-the")} ${tn(F)} ${tn($)} ${tn("TO_FLOOR")} ${T.name?fA({floor:T,language:a}):R.destinationLevel}.`,{...R,totalDistance:N,description:B,destinationFloor:T}}))}},[n,(_=i==null?void 0:i.TBTNav)==null?void 0:_.steps,s,a,o]);const g=()=>{const P=e.length-1;d!==P?(f(d+1),r.setNavStep(d+1)):(f(0),r.setNavStep(0))};return Qe.jsx(Qe.Fragment,{children:n&&Qe.jsxs("div",{className:"flex items-stretch lg:mb-4",children:[Qe.jsx("div",{className:"flex items-center flex-1 p-4 text-sm text-black rounded-l-lg bg-black/5",children:(b=e[d])==null?void 0:b.description}),Qe.jsxs("div",{className:"flex flex-col justify-center p-2 text-lg text-center text-white transition-colors bg-black rounded-r-lg cursor-pointer lg:p-4 lg:text-4xl hover:bg-primary",onClick:g,children:[d!==e.length-1?Qe.jsx(kVe,{className:"mx-auto mb-1"}):Qe.jsx(nVe,{className:"mx-auto mb-1"}),Qe.jsx("p",{className:"text-sm uppercase",children:d!==e.length-1?tn("next"):tn("arrived")})]})]})})}function NVe(){const[e,t]=ne.useState({}),[r,n]=ne.useState(!1);return Qe.jsx(Qe.Fragment,{children:Qe.jsxs(Oc.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.2},className:ii("fixed inset-x-0 bottom-0 z-10 overflow-x-hidden overflow-y-auto bg-white rounded-lg shadow-[rgba(17,_17,_26,_0.1)_0px_0px_16px] lg:shadow-xl lg:absolute lg:top-20 lg:left-5 lg:max-w-md lg:bottom-auto lg:max-h-[90%]",r&&"max-h-[70%]"),children:[Qe.jsxs("div",{className:"absolute z-20 block w-12 h-12 text-5xl cursor-pointer left-[calc(50%-24px)] text-primary hover:text-accent lg:hidden",onClick:()=>n(!r),children:[r&&Qe.jsx(A6e,{})," ",!r&&Qe.jsx(C6e,{})]}),Qe.jsx(DUe,{showMore:r}),Qe.jsxs("div",{className:"pt-10 px-6 py-5 bg-white rounded-tr-2xl relative lg:top-[-20px] lg:px-10",children:[Qe.jsx(ZUe,{showMore:r}),Qe.jsx(eVe,{showMore:r}),Qe.jsx(tVe,{showMore:r}),Qe.jsx(uVe,{showMore:r}),Qe.jsx(RVe,{showMore:r}),Qe.jsx(DVe,{}),Qe.jsx(rVe,{closestParkingFeature:e,onSet:t,showMore:r}),Qe.jsx(oVe,{closestParkingFeature:e,showMore:r})]})]},"details")})}function FVe(){const[e,t]=ne.useState(!1),[r,n]=ne.useState("#000"),i=ne.useRef(null),o=Ct(L=>L.activeFilter),s=Ct(L=>L.routeFinish),a=Ct(L=>L.showCustomRoutePicker),d=Ct(L=>L.setActiveFilter),f=Ct(L=>L.setRouteFinish),g=Ct(L=>L.setRouteStart),_=Ct(L=>L.setShowCustomRoutePicker),b=Ct(L=>L.setHaveRouteDetails);_je(i,()=>{e&&(s!=null&&s.id)||e&&(o!=null&&o.id)||e&&P()}),ne.useEffect(()=>{s!=null&&s.id&&(t(!0),n("#e11d48"))},[s]);const P=()=>{t(!1),n("#000"),d({}),f({}),g({}),_(!1),b(!1)};return Qe.jsxs("div",{ref:i,children:[Qe.jsx(wje,{isOpen:e,setOpen:t,color:r,setColor:n,onClose:P,className:ii((s==null?void 0:s.id)&&"bg-white shadow-md lg:shadow-none lg:m-3 lg:p-1",((o==null?void 0:o.type)==="list"||(o==null?void 0:o.type)==="closest"||a)&&"bg-white shadow-md lg:shadow-none lg:bg-transparent")}),Qe.jsxs(TA,{children:[e&&Object.keys(o).length===0&&Object.keys(s).length===0&&Qe.jsx(Sje,{},"1"),e&&(o==null?void 0:o.type)==="list"&&Qe.jsx(Eje,{},"2"),e&&((o==null?void 0:o.type)==="closest"||a)&&Qe.jsx(kUe,{},"3"),e&&(s==null?void 0:s.id)&&!a&&Qe.jsx(NVe,{},"4")]})]})}function $Ve(e){return jo({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0013 3.06V1h-2v2.06A8.994 8.994 0 003.06 11H1v2h2.06A8.994 8.994 0 0011 20.94V23h2v-2.06A8.994 8.994 0 0020.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}}]})(e)}function zVe(){const e=Ct(i=>i.map),t=Ct(i=>i.activeKiosk),r=Ct(i=>i.kioskMode),n=()=>{Object.keys(e).length>0&&(e.getMapboxInstance().flyTo({center:[r&&(t!=null&&t.longitude)?t.longitude:+"51.48091652702158",r&&(t!=null&&t.latitude)?t.latitude:+"25.336680584406395"],bearing:r&&(t!=null&&t.bearing)?t.bearing:+"12",pitch:r&&(t!=null&&t.pitch)?t.pitch:+"40",zoom:r&&(t!=null&&t.zoom)?t.zoom:+"19"}),e.setFloorByLevel(r&&(t!=null&&t.level)?t.level:+"0"))};return Qe.jsx("div",{className:ii("absolute z-[6] p-4 top-40 left-5 hover:border-primary/70 border-2 rounded-full bg-white/80 text-2xl cursor-pointer"),onClick:n,children:Qe.jsx($Ve,{})})}function BVe(){const{t:e,i18n:t}=CFe(),[r]=IFe(),[n,i]=Ct(g=>[g.appInitiated,g.setAppInitiated]),[o,s]=Ct(g=>[g.kioskMode,g.setKioskMode]),a=Ct(g=>g.map),d=Ct(g=>g.setCurrentLang),f=Ct(g=>g.setActiveKiosk);return ne.useEffect(()=>{if(n)return;const g=new URLSearchParams(window.location.search),_=g.get("language")??"en";if(d(_),t.changeLanguage(_),g.get("kiosk")){const b=dZ.find(P=>P.name===g.get("kiosk"));s(!0),f(b)}i(!0)},[n,t,s,f,d,i]),ne.useEffect(()=>{o&&r()},[a,o,r]),Qe.jsx(Qe.Fragment,{children:n&&Qe.jsxs("main",{children:[Object.keys(a).length===0&&Qe.jsx("div",{className:"fixed flex w-screen h-screen",children:Qe.jsxs("div",{className:"mx-auto mt-[20%]",children:[Qe.jsx("div",{className:"w-40 h-40 mx-auto border border-gray-300 rounded-full animate-spin border-t-primary"}),Qe.jsx("h3",{className:"mt-8 text-3xl font-semibold",children:e("welcomeMessage")})]})}),Qe.jsx(Q6e,{}),Qe.jsx(fFe,{}),Qe.jsx(FVe,{}),Qe.jsx(zVe,{}),Qe.jsx(oFe,{})]})})}function FL(e){"@babel/helpers - typeof";return FL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FL(e)}var DQ=[],jVe=DQ.forEach,UVe=DQ.slice;function $L(e){return jVe.call(UVe.call(arguments,1),function(t){if(t)for(var r in t)e[r]===void 0&&(e[r]=t[r])}),e}function NQ(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":FL(XMLHttpRequest))==="object"}function VVe(e){return!!e&&typeof e.then=="function"}function GVe(e){return VVe(e)?e:Promise.resolve(e)}function qVe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zL={exports:{}},xx={exports:{}},CV;function WVe(){return CV||(CV=1,function(e,t){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Pe<"u"&&Pe,n=function(){function o(){this.fetch=!1,this.DOMException=r.DOMException}return o.prototype=r,new o}();(function(o){(function(s){var a=typeof o<"u"&&o||typeof self<"u"&&self||typeof a<"u"&&a,d={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function f(Ie){return Ie&&DataView.prototype.isPrototypeOf(Ie)}if(d.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=ArrayBuffer.isView||function(Ie){return Ie&&g.indexOf(Object.prototype.toString.call(Ie))>-1};function b(Ie){if(typeof Ie!="string"&&(Ie=String(Ie)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(Ie)||Ie==="")throw new TypeError('Invalid character in header field name: "'+Ie+'"');return Ie.toLowerCase()}function P(Ie){return typeof Ie!="string"&&(Ie=String(Ie)),Ie}function L(Ie){var fe={next:function(){var G=Ie.shift();return{done:G===void 0,value:G}}};return d.iterable&&(fe[Symbol.iterator]=function(){return fe}),fe}function R(Ie){this.map={},Ie instanceof R?Ie.forEach(function(fe,G){this.append(G,fe)},this):Array.isArray(Ie)?Ie.forEach(function(fe){this.append(fe[0],fe[1])},this):Ie&&Object.getOwnPropertyNames(Ie).forEach(function(fe){this.append(fe,Ie[fe])},this)}R.prototype.append=function(Ie,fe){Ie=b(Ie),fe=P(fe);var G=this.map[Ie];this.map[Ie]=G?G+", "+fe:fe},R.prototype.delete=function(Ie){delete this.map[b(Ie)]},R.prototype.get=function(Ie){return Ie=b(Ie),this.has(Ie)?this.map[Ie]:null},R.prototype.has=function(Ie){return this.map.hasOwnProperty(b(Ie))},R.prototype.set=function(Ie,fe){this.map[b(Ie)]=P(fe)},R.prototype.forEach=function(Ie,fe){for(var G in this.map)this.map.hasOwnProperty(G)&&Ie.call(fe,this.map[G],G,this)},R.prototype.keys=function(){var Ie=[];return this.forEach(function(fe,G){Ie.push(G)}),L(Ie)},R.prototype.values=function(){var Ie=[];return this.forEach(function(fe){Ie.push(fe)}),L(Ie)},R.prototype.entries=function(){var Ie=[];return this.forEach(function(fe,G){Ie.push([G,fe])}),L(Ie)},d.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);function $(Ie){if(Ie.bodyUsed)return Promise.reject(new TypeError("Already read"));Ie.bodyUsed=!0}function F(Ie){return new Promise(function(fe,G){Ie.onload=function(){fe(Ie.result)},Ie.onerror=function(){G(Ie.error)}})}function T(Ie){var fe=new FileReader,G=F(fe);return fe.readAsArrayBuffer(Ie),G}function x(Ie){var fe=new FileReader,G=F(fe);return fe.readAsText(Ie),G}function N(Ie){for(var fe=new Uint8Array(Ie),G=new Array(fe.length),K=0;K<fe.length;K++)G[K]=String.fromCharCode(fe[K]);return G.join("")}function B(Ie){if(Ie.slice)return Ie.slice(0);var fe=new Uint8Array(Ie.byteLength);return fe.set(new Uint8Array(Ie)),fe.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(Ie){this.bodyUsed=this.bodyUsed,this._bodyInit=Ie,Ie?typeof Ie=="string"?this._bodyText=Ie:d.blob&&Blob.prototype.isPrototypeOf(Ie)?this._bodyBlob=Ie:d.formData&&FormData.prototype.isPrototypeOf(Ie)?this._bodyFormData=Ie:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(Ie)?this._bodyText=Ie.toString():d.arrayBuffer&&d.blob&&f(Ie)?(this._bodyArrayBuffer=B(Ie.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Ie)||_(Ie))?this._bodyArrayBuffer=B(Ie):this._bodyText=Ie=Object.prototype.toString.call(Ie):this._bodyText="",this.headers.get("content-type")||(typeof Ie=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(Ie)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var Ie=$(this);if(Ie)return Ie;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var Ie=$(this);return Ie||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(T)}),this.text=function(){var Ie=$(this);if(Ie)return Ie;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var Z=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Y(Ie){var fe=Ie.toUpperCase();return Z.indexOf(fe)>-1?fe:Ie}function W(Ie,fe){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');fe=fe||{};var G=fe.body;if(Ie instanceof W){if(Ie.bodyUsed)throw new TypeError("Already read");this.url=Ie.url,this.credentials=Ie.credentials,fe.headers||(this.headers=new R(Ie.headers)),this.method=Ie.method,this.mode=Ie.mode,this.signal=Ie.signal,!G&&Ie._bodyInit!=null&&(G=Ie._bodyInit,Ie.bodyUsed=!0)}else this.url=String(Ie);if(this.credentials=fe.credentials||this.credentials||"same-origin",(fe.headers||!this.headers)&&(this.headers=new R(fe.headers)),this.method=Y(fe.method||this.method||"GET"),this.mode=fe.mode||this.mode||null,this.signal=fe.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(fe.cache==="no-store"||fe.cache==="no-cache")){var K=/([?&])_=[^&]*/;if(K.test(this.url))this.url=this.url.replace(K,"$1_="+new Date().getTime());else{var re=/\?/;this.url+=(re.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}W.prototype.clone=function(){return new W(this,{body:this._bodyInit})};function Q(Ie){var fe=new FormData;return Ie.trim().split("&").forEach(function(G){if(G){var K=G.split("="),re=K.shift().replace(/\+/g," "),ie=K.join("=").replace(/\+/g," ");fe.append(decodeURIComponent(re),decodeURIComponent(ie))}}),fe}function me(Ie){var fe=new R,G=Ie.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(K){return K.indexOf(`
`)===0?K.substr(1,K.length):K}).forEach(function(K){var re=K.split(":"),ie=re.shift().trim();if(ie){var he=re.join(":").trim();fe.append(ie,he)}}),fe}H.call(W.prototype);function ge(Ie,fe){if(!(this instanceof ge))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');fe||(fe={}),this.type="default",this.status=fe.status===void 0?200:fe.status,this.ok=this.status>=200&&this.status<300,this.statusText=fe.statusText===void 0?"":""+fe.statusText,this.headers=new R(fe.headers),this.url=fe.url||"",this._initBody(Ie)}H.call(ge.prototype),ge.prototype.clone=function(){return new ge(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},ge.error=function(){var Ie=new ge(null,{status:0,statusText:""});return Ie.type="error",Ie};var be=[301,302,303,307,308];ge.redirect=function(Ie,fe){if(be.indexOf(fe)===-1)throw new RangeError("Invalid status code");return new ge(null,{status:fe,headers:{location:Ie}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(fe,G){this.message=fe,this.name=G;var K=Error(fe);this.stack=K.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function oe(Ie,fe){return new Promise(function(G,K){var re=new W(Ie,fe);if(re.signal&&re.signal.aborted)return K(new s.DOMException("Aborted","AbortError"));var ie=new XMLHttpRequest;function he(){ie.abort()}ie.onload=function(){var Te={status:ie.status,statusText:ie.statusText,headers:me(ie.getAllResponseHeaders()||"")};Te.url="responseURL"in ie?ie.responseURL:Te.headers.get("X-Request-URL");var Le="response"in ie?ie.response:ie.responseText;setTimeout(function(){G(new ge(Le,Te))},0)},ie.onerror=function(){setTimeout(function(){K(new TypeError("Network request failed"))},0)},ie.ontimeout=function(){setTimeout(function(){K(new TypeError("Network request failed"))},0)},ie.onabort=function(){setTimeout(function(){K(new s.DOMException("Aborted","AbortError"))},0)};function ae(Te){try{return Te===""&&a.location.href?a.location.href:Te}catch{return Te}}ie.open(re.method,ae(re.url),!0),re.credentials==="include"?ie.withCredentials=!0:re.credentials==="omit"&&(ie.withCredentials=!1),"responseType"in ie&&(d.blob?ie.responseType="blob":d.arrayBuffer&&re.headers.get("Content-Type")&&re.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(ie.responseType="arraybuffer")),fe&&typeof fe.headers=="object"&&!(fe.headers instanceof R)?Object.getOwnPropertyNames(fe.headers).forEach(function(Te){ie.setRequestHeader(Te,P(fe.headers[Te]))}):re.headers.forEach(function(Te,Le){ie.setRequestHeader(Le,Te)}),re.signal&&(re.signal.addEventListener("abort",he),ie.onreadystatechange=function(){ie.readyState===4&&re.signal.removeEventListener("abort",he)}),ie.send(typeof re._bodyInit>"u"?null:re._bodyInit)})}return oe.polyfill=!0,a.fetch||(a.fetch=oe,a.Headers=R,a.Request=W,a.Response=ge),s.Headers=R,s.Request=W,s.Response=ge,s.fetch=oe,s})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(xx,xx.exports)),xx.exports}(function(e,t){var r;if(typeof fetch=="function"&&(typeof Pe<"u"&&Pe.fetch?r=Pe.fetch:typeof window<"u"&&window.fetch?r=window.fetch:r=fetch),typeof qVe<"u"&&(typeof window>"u"||typeof window.document>"u")){var n=r||WVe();n.default&&(n=n.default),t.default=n,e.exports=t.default}})(zL,zL.exports);var FQ=zL.exports;const $Q=bd(FQ),IV=FV({__proto__:null,default:$Q},[FQ]);function wE(e){"@babel/helpers - typeof";return wE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wE(e)}var eh;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?eh=global.fetch:typeof window<"u"&&window.fetch?eh=window.fetch:eh=fetch);var u_;NQ()&&(typeof global<"u"&&global.XMLHttpRequest?u_=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(u_=window.XMLHttpRequest));var EE;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?EE=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(EE=window.ActiveXObject));!eh&&IV&&!u_&&!EE&&(eh=$Q||IV);typeof eh!="function"&&(eh=void 0);var BL=function(t,r){if(r&&wE(r)==="object"){var n="";for(var i in r)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(r[i]);if(!n)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+n.slice(1)}return t},OV=function(t,r,n){var i=function(s){if(!s.ok)return n(s.statusText||"Error",{status:s.status});s.text().then(function(a){n(null,{status:s.status,data:a})}).catch(n)};typeof fetch=="function"?fetch(t,r).then(i).catch(n):eh(t,r).then(i).catch(n)},TV=!1,XVe=function(t,r,n,i){t.queryStringParams&&(r=BL(r,t.queryStringParams));var o=$L({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(o["Content-Type"]="application/json");var s=typeof t.requestOptions=="function"?t.requestOptions(n):t.requestOptions,a=$L({method:n?"POST":"GET",body:n?t.stringify(n):void 0,headers:o},TV?{}:s);try{OV(r,a,i)}catch(d){if(!s||Object.keys(s).length===0||!d.message||d.message.indexOf("not implemented")<0)return i(d);try{Object.keys(s).forEach(function(f){delete a[f]}),OV(r,a,i),TV=!0}catch(f){i(f)}}},YVe=function(t,r,n,i){n&&wE(n)==="object"&&(n=BL("",n).slice(1)),t.queryStringParams&&(r=BL(r,t.queryStringParams));try{var o;u_?o=new u_:o=new EE("MSXML2.XMLHTTP.3.0"),o.open(n?"POST":"GET",r,1),t.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!t.withCredentials,n&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var s=t.customHeaders;if(s=typeof s=="function"?s():s,s)for(var a in s)o.setRequestHeader(a,s[a]);o.onreadystatechange=function(){o.readyState>3&&i(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(n)}catch{}},HVe=function(t,r,n,i){if(typeof n=="function"&&(i=n,n=void 0),i=i||function(){},eh&&r.indexOf("file:")!==0)return XVe(t,r,n,i);if(NQ()||typeof ActiveXObject=="function")return YVe(t,r,n,i);i(new Error("No fetch and no xhr implementation found!"))};function l_(e){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l_(e)}function ZVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zQ(n.key),n)}}function KVe(e,t,r){return t&&MV(e.prototype,t),r&&MV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function JVe(e,t,r){return t=zQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zQ(e){var t=QVe(e,"string");return l_(t)==="symbol"?t:String(t)}function QVe(e,t){if(l_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(l_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e9e=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(r){return JSON.parse(r)},stringify:JSON.stringify,parsePayload:function(r,n,i){return JVe({},n,i||"")},parseLoadPayload:function(r,n){},request:HVe,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},BQ=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ZVe(this,e),this.services=t,this.options=r,this.allOptions=n,this.type="backend",this.init(t,r,n)}return KVe(e,[{key:"init",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r,this.options=$L(i,this.options||{},e9e()),this.allOptions=o,this.services&&this.options.reloadInterval&&setInterval(function(){return n.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(r,n,i){this._readAny(r,r,n,n,i)}},{key:"read",value:function(r,n,i){this._readAny([r],r,[n],n,i)}},{key:"_readAny",value:function(r,n,i,o,s){var a=this,d=this.options.loadPath;typeof this.options.loadPath=="function"&&(d=this.options.loadPath(r,i)),d=GVe(d),d.then(function(f){if(!f)return s(null,{});var g=a.services.interpolator.interpolate(f,{lng:r.join("+"),ns:i.join("+")});a.loadUrl(g,s,n,o)})}},{key:"loadUrl",value:function(r,n,i,o){var s=this,a=typeof i=="string"?[i]:i,d=typeof o=="string"?[o]:o,f=this.options.parseLoadPayload(a,d);this.options.request(this.options,r,f,function(g,_){if(_&&(_.status>=500&&_.status<600||!_.status))return n("failed loading "+r+"; status code: "+_.status,!0);if(_&&_.status>=400&&_.status<500)return n("failed loading "+r+"; status code: "+_.status,!1);if(!_&&g&&g.message&&g.message.indexOf("Failed to fetch")>-1)return n("failed loading "+r+": "+g.message,!0);if(g)return n(g,!1);var b,P;try{typeof _.data=="string"?b=s.options.parse(_.data,i,o):b=_.data}catch{P="failed parsing "+r+" to json"}if(P)return n(P,!1);n(null,b)})}},{key:"create",value:function(r,n,i,o,s){var a=this;if(this.options.addPath){typeof r=="string"&&(r=[r]);var d=this.options.parsePayload(n,i,o),f=0,g=[],_=[];r.forEach(function(b){var P=a.options.addPath;typeof a.options.addPath=="function"&&(P=a.options.addPath(b,n));var L=a.services.interpolator.interpolate(P,{lng:b,ns:n});a.options.request(a.options,L,d,function(R,$){f+=1,g.push(R),_.push($),f===r.length&&typeof s=="function"&&s(g,_)})})}}},{key:"reload",value:function(){var r=this,n=this.services,i=n.backendConnector,o=n.languageUtils,s=n.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var d=[],f=function(_){var b=o.toResolveHierarchy(_);b.forEach(function(P){d.indexOf(P)<0&&d.push(P)})};f(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(g){return f(g)}),d.forEach(function(g){r.allOptions.ns.forEach(function(_){i.read(g,_,"read",null,null,function(b,P){b&&s.warn("loading namespace ".concat(_," for language ").concat(g," failed"),b),!b&&P&&s.log("loaded namespace ".concat(_," for language ").concat(g),P),i.loaded("".concat(g,"|").concat(_),b,P)})})})}}}]),e}();BQ.type="backend";function t9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c_(e){"@babel/helpers - typeof";return c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c_(e)}function r9e(e,t){if(c_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(c_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n9e(e){var t=r9e(e,"string");return c_(t)==="symbol"?t:String(t)}function LV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n9e(n.key),n)}}function i9e(e,t,r){return t&&LV(e.prototype,t),r&&LV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var jQ=[],o9e=jQ.forEach,a9e=jQ.slice;function s9e(e){return o9e.call(a9e.call(arguments,1),function(t){if(t)for(var r in t)e[r]===void 0&&(e[r]=t[r])}),e}var RV=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,u9e=function(t,r,n){var i=n||{};i.path=i.path||"/";var o=encodeURIComponent(r),s="".concat(t,"=").concat(o);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!RV.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain=".concat(i.domain)}if(i.path){if(!RV.test(i.path))throw new TypeError("option path is invalid");s+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite){var d=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(d){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},kV={create:function(t,r,n,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),i&&(o.domain=i),document.cookie=u9e(t,encodeURIComponent(r),o)},read:function(t){for(var r="".concat(t,"="),n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(r)===0)return o.substring(r.length,o.length)}return null},remove:function(t){this.create(t,"",-1)}},l9e={name:"cookie",lookup:function(t){var r;if(t.lookupCookie&&typeof document<"u"){var n=kV.read(t.lookupCookie);n&&(r=n)}return r},cacheUserLanguage:function(t,r){r.lookupCookie&&typeof document<"u"&&kV.create(r.lookupCookie,t,r.cookieMinutes,r.cookieDomain,r.cookieOptions)}},c9e={name:"querystring",lookup:function(t){var r;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=n.substring(1),o=i.split("&"),s=0;s<o.length;s++){var a=o[s].indexOf("=");if(a>0){var d=o[s].substring(0,a);d===t.lookupQuerystring&&(r=o[s].substring(a+1))}}}return r}},Py=null,DV=function(){if(Py!==null)return Py;try{Py=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Py=!1}return Py},f9e={name:"localStorage",lookup:function(t){var r;if(t.lookupLocalStorage&&DV()){var n=window.localStorage.getItem(t.lookupLocalStorage);n&&(r=n)}return r},cacheUserLanguage:function(t,r){r.lookupLocalStorage&&DV()&&window.localStorage.setItem(r.lookupLocalStorage,t)}},Ay=null,NV=function(){if(Ay!==null)return Ay;try{Ay=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Ay=!1}return Ay},h9e={name:"sessionStorage",lookup:function(t){var r;if(t.lookupSessionStorage&&NV()){var n=window.sessionStorage.getItem(t.lookupSessionStorage);n&&(r=n)}return r},cacheUserLanguage:function(t,r){r.lookupSessionStorage&&NV()&&window.sessionStorage.setItem(r.lookupSessionStorage,t)}},d9e={name:"navigator",lookup:function(t){var r=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)r.push(navigator.languages[n]);navigator.userLanguage&&r.push(navigator.userLanguage),navigator.language&&r.push(navigator.language)}return r.length>0?r:void 0}},p9e={name:"htmlTag",lookup:function(t){var r,n=t.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},m9e={name:"path",lookup:function(t){var r;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof n[t.lookupFromPathIndex]!="string")return;r=n[t.lookupFromPathIndex].replace("/","")}else r=n[0].replace("/","")}return r}},g9e={name:"subdomain",lookup:function(t){var r=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}};function v9e(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(t){return t}}}var UQ=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t9e(this,e),this.type="languageDetector",this.detectors={},this.init(t,r)}return i9e(e,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r||{languageUtils:{}},this.options=s9e(n,this.options||{},v9e()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(o){return o.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(l9e),this.addDetector(c9e),this.addDetector(f9e),this.addDetector(h9e),this.addDetector(d9e),this.addDetector(p9e),this.addDetector(m9e),this.addDetector(g9e)}},{key:"addDetector",value:function(r){this.detectors[r.name]=r}},{key:"detect",value:function(r){var n=this;r||(r=this.options.order);var i=[];return r.forEach(function(o){if(n.detectors[o]){var s=n.detectors[o].lookup(n.options);s&&typeof s=="string"&&(s=[s]),s&&(i=i.concat(s))}}),i=i.map(function(o){return n.options.convertDetectedLanguage(o)}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(r,n){var i=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(r)>-1||n.forEach(function(o){i.detectors[o]&&i.detectors[o].cacheUserLanguage(r,i.options)}))}}]),e}();UQ.type="languageDetector";iu.use(BQ).use(UQ).use(EFe).init({fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json",crossDomain:!0}});iT.createRoot(document.getElementById("root")).render(Qe.jsx(Tr.StrictMode,{children:Qe.jsx(BVe,{})}));
